!function(e,t){"use strict";var i,n=e.document;i=function(){var i,r,o,s,a,l,c,d,u,h,p,f,m,g={},v={},y=!1,_={ENTER:13,ESC:27,SPACE:32},b=[];return v={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',cancel:'<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},m=function(){var e,i,r=!1,o=n.createElement("fakeelement"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(e in s)if(o.style[e]!==t){i=s[e],r=!0;break}return{type:i,supported:r}},i=function(e){return n.getElementById(e)},g={labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok",transition:t,addListeners:function(e){var t,i,l,c,d,u="undefined"!=typeof o,h="undefined"!=typeof r,p="undefined"!=typeof f,m="",g=this;t=function(t){return"undefined"!=typeof t.preventDefault&&t.preventDefault(),l(t),"undefined"!=typeof f&&(m=f.value),"function"==typeof e&&("undefined"!=typeof f?e(!0,m):e(!0)),!1},i=function(t){return"undefined"!=typeof t.preventDefault&&t.preventDefault(),l(t),"function"==typeof e&&e(!1),!1},l=function(){g.hide(),g.unbind(n.body,"keyup",c),g.unbind(s,"focus",d),u&&g.unbind(o,"click",t),h&&g.unbind(r,"click",i)},c=function(e){var n=e.keyCode;(n===_.SPACE&&!p||p&&n===_.ENTER)&&t(e),n===_.ESC&&h&&i(e)},d=function(){p?f.focus():!h||g.buttonReverse?o.focus():r.focus()},this.bind(s,"focus",d),this.bind(a,"focus",d),u&&this.bind(o,"click",t),h&&this.bind(r,"click",i),this.bind(n.body,"keyup",c),this.transition.supported||this.setFocus()},bind:function(e,t,i){"function"==typeof e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},handleErrors:function(){if("undefined"!=typeof e.onerror){var t=this;return e.onerror=function(e,i,n){t.error("["+e+" on line "+n+" of "+i+"]",0)},!0}return!1},appendButtons:function(e,t){return this.buttonReverse?t+e:e+t},build:function(e){var t="",i=e.type,n=e.message,r=e.cssClass||"";switch(t+='<div class="alertify-dialog">',t+='<a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>',"none"===g.buttonFocus&&(t+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),"prompt"===i&&(t+='<div id="alertify-form">'),t+='<article class="alertify-inner">',t+=v.message.replace("{{message}}",n),"prompt"===i&&(t+=v.input),t+=v.buttons.holder,t+="</article>","prompt"===i&&(t+="</div>"),t+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',t+="</div>",i){case"confirm":t=t.replace("{{buttons}}",this.appendButtons(v.buttons.cancel,v.buttons.ok)),t=t.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":t=t.replace("{{buttons}}",this.appendButtons(v.buttons.cancel,v.buttons.submit)),t=t.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":t=t.replace("{{buttons}}",v.buttons.ok),t=t.replace("{{ok}}",this.labels.ok)}return u.className="alertify alertify-"+i+" "+r,d.className="alertify-cover",t},close:function(e,t){var i,n,r=t&&!isNaN(t)?+t:this.delay,o=this;this.bind(e,"click",function(){i(e)}),n=function(e){e.stopPropagation(),o.unbind(this,o.transition.type,n),h.removeChild(this),h.hasChildNodes()||(h.className+=" alertify-logs-hidden")},i=function(e){"undefined"!=typeof e&&e.parentNode===h&&(o.transition.supported?(o.bind(e,o.transition.type,n),e.className+=" alertify-log-hide"):(h.removeChild(e),h.hasChildNodes()||(h.className+=" alertify-logs-hidden")))},0!==t&&setTimeout(function(){i(e)},r)},dialog:function(e,t,i,r,o){c=n.activeElement;var s=function(){h&&null!==h.scrollTop&&d&&null!==d.scrollTop||s()};if("string"!=typeof e)throw new Error("message must be a string");if("string"!=typeof t)throw new Error("type must be a string");if("undefined"!=typeof i&&"function"!=typeof i)throw new Error("fn must be a function");return this.init(),s(),b.push({type:t,message:e,callback:i,placeholder:r,cssClass:o}),y||this.setup(),this},extend:function(e){if("string"!=typeof e)throw new Error("extend method must have exactly one paramter");return function(t,i){return this.log(t,e,i),this}},hide:function(){var e,t=this;b.splice(0,1),b.length>0?this.setup(!0):(y=!1,e=function(i){i.stopPropagation(),t.unbind(u,t.transition.type,e)},this.transition.supported?(this.bind(u,this.transition.type,e),u.className="alertify alertify-hide alertify-hidden"):u.className="alertify alertify-hide alertify-hidden alertify-isHidden",d.className="alertify-cover alertify-cover-hidden",c.focus())},init:function(){n.createElement("nav"),n.createElement("article"),n.createElement("section"),null==i("alertify-cover")&&(d=n.createElement("div"),d.setAttribute("id","alertify-cover"),d.className="alertify-cover alertify-cover-hidden",n.body.appendChild(d)),null==i("alertify")&&(y=!1,b=[],u=n.createElement("section"),u.setAttribute("id","alertify"),u.className="alertify alertify-hidden",n.body.appendChild(u)),null==i("alertify-logs")&&(h=n.createElement("section"),h.setAttribute("id","alertify-logs"),h.className="alertify-logs alertify-logs-hidden",n.body.appendChild(h)),n.body.setAttribute("tabindex","0"),this.transition=m()},log:function(e,t,i){var n=function(){h&&null!==h.scrollTop||n()};return this.init(),n(),h.className="alertify-logs",this.notify(e,t,i),this},notify:function(e,t,i){var r=n.createElement("article");r.className="alertify-log"+("string"==typeof t&&""!==t?" alertify-log-"+t:""),r.innerHTML=e,h.appendChild(r),setTimeout(function(){r.className=r.className+" alertify-log-show"},50),this.close(r,i)},set:function(e){var t;if("object"!=typeof e&&e instanceof Array)throw new Error("args must be an object");for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},setFocus:function(){f?(f.focus(),f.select()):l.focus()},setup:function(e){var n,c=b[0],d=this;y=!0,n=function(e){e.stopPropagation(),d.setFocus(),d.unbind(u,d.transition.type,n)},this.transition.supported&&!e&&this.bind(u,this.transition.type,n),u.innerHTML=this.build(c),s=i("alertify-resetFocus"),a=i("alertify-resetFocusBack"),o=i("alertify-ok")||t,r=i("alertify-cancel")||t,l="cancel"===g.buttonFocus?r:"none"===g.buttonFocus?i("alertify-noneFocus"):o,f=i("alertify-text")||t,p=i("alertify-form")||t,"string"==typeof c.placeholder&&""!==c.placeholder&&(f.value=c.placeholder),e&&this.setFocus(),this.addListeners(c.callback)},unbind:function(e,t,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i)}},{alert:function(e,t,i){return g.dialog(e,"alert",t,"",i),this},confirm:function(e,t,i){return g.dialog(e,"confirm",t,"",i),this},extend:g.extend,init:g.init,log:function(e,t,i){return g.log(e,t,i),this},prompt:function(e,t,i,n){return g.dialog(e,"prompt",t,i,n),this},success:function(e,t){return g.log(e,"success",t),this},error:function(e,t){return g.log(e,"error",t),this},set:function(e){g.set(e)},labels:g.labels,debug:g.handleErrors}},"function"==typeof define?define([],function(){return new i}):"undefined"==typeof e.alertify&&(e.alertify=new i)}(this),function(e,t,i){"use strict";function n(e){return function(){var t,i=arguments[0];for(t="["+(e?e+":":"")+i+"] http://errors.angularjs.org/1.3.8/"+(e?e+"/":"")+i,i=1;i<arguments.length;i++){t=t+(1==i?"?":"&")+"p"+(i-1)+"=";var n,r=encodeURIComponent;n=arguments[i],n="function"==typeof n?n.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof n?"undefined":"string"!=typeof n?JSON.stringify(n):n,t+=r(n)}return Error(t)}}function r(e){if(null==e||x(e))return!1;var t=e.length;return!(e.nodeType!==Li||!t)||(y(e)||Fi(e)||0===t||"number"==typeof t&&0<t&&t-1 in e)}function o(e,t,i){var n,s;if(e)if(w(e))for(n in e)"prototype"==n||"length"==n||"name"==n||e.hasOwnProperty&&!e.hasOwnProperty(n)||t.call(i,e[n],n,e);else if(Fi(e)||r(e)){var a="object"!=typeof e;for(n=0,s=e.length;n<s;n++)(a||n in e)&&t.call(i,e[n],n,e)}else if(e.forEach&&e.forEach!==o)e.forEach(t,i,e);else for(n in e)e.hasOwnProperty(n)&&t.call(i,e[n],n,e);return e}function s(e,t,i){for(var n=Object.keys(e).sort(),r=0;r<n.length;r++)t.call(i,e[n[r]],n[r]);return n}function a(e){return function(t,i){e(i,t)}}function l(){return++Ii}function c(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function d(e){for(var t=e.$$hashKey,i=1,n=arguments.length;i<n;i++){var r=arguments[i];if(r)for(var o=Object.keys(r),s=0,a=o.length;s<a;s++){var l=o[s];e[l]=r[l]}}return c(e,t),e}function u(e){return parseInt(e,10)}function h(){}function p(e){return e}function f(e){return function(){return e}}function m(e){return"undefined"==typeof e}function g(e){return"undefined"!=typeof e}function v(e){return null!==e&&"object"==typeof e}function y(e){return"string"==typeof e}function _(e){return"number"==typeof e}function b(e){return"[object Date]"===Mi.call(e)}function w(e){return"function"==typeof e}function k(e){return"[object RegExp]"===Mi.call(e)}function x(e){return e&&e.window===e}function C(e){return e&&e.$evalAsync&&e.$watch}function S(e){return"boolean"==typeof e}function T(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function D(e){var t={};e=e.split(",");var i;for(i=0;i<e.length;i++)t[e[i]]=!0;return t}function M(e){return ki(e.nodeName||e[0]&&e[0].nodeName)}function A(e,t){var i=e.indexOf(t);return 0<=i&&e.splice(i,1),t}function E(e,t,i,n){if(x(e)||C(e))throw Ai("cpws");if(t){if(e===t)throw Ai("cpi");if(i=i||[],n=n||[],v(e)){var r=i.indexOf(e);if(-1!==r)return n[r];i.push(e),n.push(t)}if(Fi(e))for(var s=t.length=0;s<e.length;s++)r=E(e[s],null,i,n),v(e[s])&&(i.push(e[s]),n.push(r)),t.push(r);else{var a=t.$$hashKey;Fi(t)?t.length=0:o(t,function(e,i){delete t[i]});for(s in e)e.hasOwnProperty(s)&&(r=E(e[s],null,i,n),v(e[s])&&(i.push(e[s]),n.push(r)),t[s]=r);c(t,a)}}else(t=e)&&(Fi(e)?t=E(e,[],i,n):b(e)?t=new Date(e.getTime()):k(e)?(t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex):v(e)&&(r=Object.create(Object.getPrototypeOf(e)),t=E(e,r,i,n)));return t}function I(e,t){if(Fi(e)){t=t||[];for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}else if(v(e))for(i in t=t||{},e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i]);return t||e}function P(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r=typeof e;if(r==typeof t&&"object"==r){if(!Fi(e)){if(b(e))return!!b(t)&&P(e.getTime(),t.getTime());if(k(e)&&k(t))return e.toString()==t.toString();if(C(e)||C(t)||x(e)||x(t)||Fi(t))return!1;r={};for(n in e)if("$"!==n.charAt(0)&&!w(e[n])){if(!P(e[n],t[n]))return!1;r[n]=!0}for(n in t)if(!r.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t[n]!==i&&!w(t[n]))return!1;return!0}if(!Fi(t))return!1;if((r=e.length)==t.length){for(n=0;n<r;n++)if(!P(e[n],t[n]))return!1;return!0}}return!1}function F(e,t,i){return e.concat(Si.call(t,i))}function z(e,t){var i=2<arguments.length?Si.call(arguments,2):[];return!w(t)||t instanceof RegExp?t:i.length?function(){return arguments.length?t.apply(e,F(i,arguments,0)):t.apply(e,i)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function H(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=i:x(n)?r="$WINDOW":n&&t===n?r="$DOCUMENT":C(n)&&(r="$SCOPE"),r}function R(e,t){return"undefined"==typeof e?i:(_(t)||(t=t?2:null),JSON.stringify(e,H,t))}function N(e){return y(e)?JSON.parse(e):e}function $(e){e=yi(e).clone();try{e.empty()}catch(e){}var t=yi("<div>").append(e).html();try{return e[0].nodeType===Bi?ki(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+ki(t)})}catch(e){return ki(t)}}function O(e){try{return decodeURIComponent(e)}catch(e){}}function L(e){var t,i,n={};return o((e||"").split("&"),function(e){e&&(t=e.replace(/\+/g,"%20").split("="),i=O(t[0]),g(i)&&(e=!g(t[1])||O(t[1]),xi.call(n,i)?Fi(n[i])?n[i].push(e):n[i]=[n[i],e]:n[i]=e))}),n}function B(e){var t=[];return o(e,function(e,i){Fi(e)?o(e,function(e){t.push(V(i,!0)+(!0===e?"":"="+V(e,!0)))}):t.push(V(i,!0)+(!0===e?"":"="+V(e,!0)))}),t.length?t.join("&"):""}function U(e){return V(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function V(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function W(e,t){var i,n,r=Ni.length;for(e=yi(e),n=0;n<r;++n)if(i=Ni[n]+t,y(i=e.attr(i)))return i;return null}function j(e,t){var i,n,r={};o(Ni,function(t){t+="app",!i&&e.hasAttribute&&e.hasAttribute(t)&&(i=e,n=e.getAttribute(t))}),o(Ni,function(t){t+="app";var r;!i&&(r=e.querySelector("["+t.replace(":","\\:")+"]"))&&(i=r,n=r.getAttribute(t))}),i&&(r.strictDi=null!==W(i,"strict-di"),t(i,n?[n]:[],r))}function q(i,n,r){v(r)||(r={}),r=d({strictDi:!1},r);var s=function(){if(i=yi(i),i.injector()){var e=i[0]===t?"document":$(i);throw Ai("btstrpd",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}return n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",i)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng"),e=Pe(n,r.strictDi),e.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,i,n){e.$apply(function(){t.data("$injector",n),i(t)(e)})}]),e},a=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return e&&a.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(a,"")),e&&!l.test(e.name)?s():(e.name=e.name.replace(l,""),void(Ei.resumeBootstrap=function(e){o(e,function(e){n.push(e)}),s()}))}function G(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function Y(e){if(e=Ei.element(e).injector(),!e)throw Ai("test");return e.get("$$testability")}function Q(e,t){return t=t||"_",e.replace($i,function(e,i){return(i?t:"")+e.toLowerCase()})}function K(){var t;Oi||((_i=e.jQuery)&&_i.fn.on?(yi=_i,d(_i.fn,{scope:en.scope,isolateScope:en.isolateScope,controller:en.controller,injector:en.injector,inheritedData:en.inheritedData}),t=_i.cleanData,_i.cleanData=function(e){var i;if(Pi)Pi=!1;else for(var n,r=0;null!=(n=e[r]);r++)(i=_i._data(n,"events"))&&i.$destroy&&_i(n).triggerHandler("$destroy");t(e)}):yi=le,Ei.element=yi,Oi=!0)}function X(e,t,i){if(!e)throw Ai("areq",t||"?",i||"required");return e}function Z(e,t,i){return i&&Fi(e)&&(e=e[e.length-1]),X(w(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function J(e,t){if("hasOwnProperty"===e)throw Ai("badname",t)}function ee(e,t,i){if(!t)return e;t=t.split(".");for(var n,r=e,o=t.length,s=0;s<o;s++)n=t[s],e&&(e=(r=e)[n]);return!i&&w(e)?z(r,e):e}function te(e){var t=e[0];e=e[e.length-1];var i=[t];do{if(t=t.nextSibling,!t)break;i.push(t)}while(t!==e);return yi(i)}function ie(){return Object.create(null)}function ne(e){function t(e,t,i){return e[t]||(e[t]=i())}var i=n("$injector"),r=n("ng");return e=t(e,"angular",Object),e.$$minErr=e.$$minErr||n,t(e,"module",function(){var e={};return function(n,o,s){if("hasOwnProperty"===n)throw r("badname","module");return o&&e.hasOwnProperty(n)&&(e[n]=null),t(e,n,function(){function e(e,i,n,r){return r||(r=t),function(){return r[n||"push"]([e,i,arguments]),c}}if(!o)throw i("nomod",n);var t=[],r=[],a=[],l=e("$injector","invoke","push",r),c={_invokeQueue:t,_configBlocks:r,_runBlocks:a,requires:o,name:n,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:l,run:function(e){return a.push(e),this}};return s&&l(s),c})}})}function re(t){d(t,{bootstrap:q,copy:E,extend:d,equals:P,element:yi,forEach:o,injector:Pe,noop:h,bind:z,toJson:R,fromJson:N,identity:p,isUndefined:m,isDefined:g,isString:y,isFunction:w,isObject:v,isNumber:_,isElement:T,isArray:Fi,version:Ui,isDate:b,lowercase:ki,uppercase:Ci,callbacks:{counter:0},getTestability:Y,$$minErr:n,$$csp:Ri,reloadWithDebugInfo:G}),bi=ne(e);try{bi("ngLocale")}catch(e){bi("ngLocale",[]).provider("$locale",it)}bi("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Pt}),e.provider("$compile",Oe).directive({a:qn,input:dr,textarea:dr,form:Kn,script:Xr,select:eo,style:io,option:to,ngBind:Dr,ngBindHtml:Ar,ngBindTemplate:Mr,ngClass:Er,ngClassEven:Pr,ngClassOdd:Ir,ngCloak:Fr,ngController:zr,ngForm:Xn,ngHide:jr,ngIf:Nr,ngInclude:$r,ngInit:Lr,ngNonBindable:Br,ngPluralize:Ur,ngRepeat:Vr,ngShow:Wr,ngStyle:qr,ngSwitch:Gr,ngSwitchWhen:Yr,ngSwitchDefault:Qr,ngOptions:Jr,ngTransclude:Kr,ngModel:vr,ngList:xr,ngChange:yr,pattern:br,ngPattern:br,required:_r,ngRequired:_r,minlength:kr,ngMinlength:kr,maxlength:wr,ngMaxlength:wr,ngValue:Sr,ngModelOptions:Tr}).directive({ngInclude:Or}).directive(Gn).directive(Hr),e.provider({$anchorScroll:Fe,$animate:un,$browser:Re,$cacheFactory:Ne,$controller:Ve,$document:We,$exceptionHandler:je,$filter:Wt,$interpolate:et,$interval:tt,$http:Ke,$httpBackend:Ze,$location:mt,$log:gt,$parse:Tt,$rootScope:It,$q:Dt,$$q:Mt,$sce:Rt,$sceDelegate:Ht,$sniffer:Nt,$templateCache:$e,$templateRequest:$t,$$testability:Ot,$timeout:Lt,$window:Vt,$$rAF:Et,$$asyncCallback:ze,$$jqLite:De})}])}function oe(e){return e.replace(ji,function(e,t,i,n){return n?i.toUpperCase():i}).replace(qi,"Moz$1")}function se(e){return e=e.nodeType,e===Li||!e||9===e}function ae(e,t){var i,n,r=t.createDocumentFragment(),s=[];if(Ki.test(e)){for(i=i||r.appendChild(t.createElement("div")),n=(Xi.exec(e)||["",""])[1].toLowerCase(),n=Ji[n]||Ji._default,i.innerHTML=n[1]+e.replace(Zi,"<$1></$2>")+n[2],n=n[0];n--;)i=i.lastChild;s=F(s,i.childNodes),i=r.firstChild,i.textContent=""}else s.push(t.createTextNode(e));return r.textContent="",r.innerHTML="",o(s,function(e){r.appendChild(e)}),r}function le(e){if(e instanceof le)return e;var i;if(y(e)&&(e=zi(e),i=!0),!(this instanceof le)){if(i&&"<"!=e.charAt(0))throw Yi("nosel");return new le(e)}if(i){i=t;var n;e=(n=Qi.exec(e))?[i.createElement(n[1])]:(n=ae(e,i))?n.childNodes:[]}ye(this,e)}function ce(e){return e.cloneNode(!0)}function de(e,t){if(t||he(e),e.querySelectorAll)for(var i=e.querySelectorAll("*"),n=0,r=i.length;n<r;n++)he(i[n])}function ue(e,t,i,n){if(g(n))throw Yi("offargs");var r=(n=pe(e))&&n.events,s=n&&n.handle;if(s)if(t)o(t.split(" "),function(t){if(g(i)){var n=r[t];if(A(n||[],i),n&&0<n.length)return}e.removeEventListener(t,s,!1),delete r[t]});else for(t in r)"$destroy"!==t&&e.removeEventListener(t,s,!1),delete r[t]}function he(e,t){var n=e.ng339,r=n&&Vi[n];r&&(t?delete r.data[t]:(r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),ue(e)),delete Vi[n],e.ng339=i))}function pe(e,t){var n=e.ng339,n=n&&Vi[n];return t&&!n&&(e.ng339=n=++Wi,n=Vi[n]={events:{},data:{},handle:i}),n}function fe(e,t,i){if(se(e)){var n=g(i),r=!n&&t&&!v(t),o=!t;if(e=(e=pe(e,!r))&&e.data,n)e[t]=i;else{if(o)return e;if(r)return e&&e[t];d(e,t)}}}function me(e,t){return!!e.getAttribute&&-1<(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")}function ge(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",zi((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+zi(t)+" "," ")))})}function ve(e,t){if(t&&e.setAttribute){var i=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=zi(e),-1===i.indexOf(" "+e+" ")&&(i+=e+" ")}),e.setAttribute("class",zi(i))}}function ye(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var i=t.length;if("number"==typeof i&&t.window!==t){if(i)for(var n=0;n<i;n++)e[e.length++]=t[n]}else e[e.length++]=t}}function _e(e,t){return be(e,"$"+(t||"ngController")+"Controller")}function be(e,t,n){for(9==e.nodeType&&(e=e.documentElement),t=Fi(t)?t:[t];e;){for(var r=0,o=t.length;r<o;r++)if((n=yi.data(e,t[r]))!==i)return n;e=e.parentNode||11===e.nodeType&&e.host}}function we(e){for(de(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function ke(e,t){t||de(e);var i=e.parentNode;i&&i.removeChild(e)}function xe(t,i){i=i||e,"complete"===i.document.readyState?i.setTimeout(t):yi(i).on("load",t)}function Ce(e,t){var i=tn[t.toLowerCase()];return i&&nn[M(e)]&&i}function Se(e,t){var i=e.nodeName;return("INPUT"===i||"TEXTAREA"===i)&&rn[t]}function Te(e,t){var i=function(i,n){i.isDefaultPrevented=function(){return i.defaultPrevented};var r=t[n||i.type],o=r?r.length:0;if(o){if(m(i.immediatePropagationStopped)){var s=i.stopImmediatePropagation;i.stopImmediatePropagation=function(){i.immediatePropagationStopped=!0,i.stopPropagation&&i.stopPropagation(),s&&s.call(i)}}i.isImmediatePropagationStopped=function(){return!0===i.immediatePropagationStopped},1<o&&(r=I(r));for(var a=0;a<o;a++)i.isImmediatePropagationStopped()||r[a].call(e,i)}};return i.elem=e,i}function De(){this.$get=function(){return d(le,{hasClass:function(e,t){return e.attr&&(e=e[0]),me(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),ve(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),ge(e,t)}})}}function Me(e,t){var i=e&&e.$$hashKey;return i?("function"==typeof i&&(i=e.$$hashKey()),i):(i=typeof e,i="function"==i||"object"==i&&null!==e?e.$$hashKey=i+":"+(t||l)():i+":"+e)}function Ae(e,t){if(t){var i=0;this.nextUid=function(){return++i}}o(e,this.put,this)}function Ee(e){return(e=e.toString().replace(ln,"").match(on))?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Ie(e,t,i){var n;if("function"==typeof e){if(!(n=e.$inject)){if(n=[],e.length){if(t)throw y(i)&&i||(i=e.name||Ee(e)),cn("strictdi",i);t=e.toString().replace(ln,""),t=t.match(on),o(t[1].split(sn),function(e){e.replace(an,function(e,t,i){n.push(i)})})}e.$inject=n}}else Fi(e)?(t=e.length-1,Z(e[t],"fn"),n=e.slice(0,t)):Z(e,"fn",!0);return n}function Pe(e,t){function n(e){return function(t,i){return v(t)?void o(t,a(e)):e(t,i)}}function r(e,t){if(J(e,"service"),(w(t)||Fi(t))&&(t=b.instantiate(t)),!t.$get)throw cn("pget",e);return _[e+"Provider"]=t}function s(e,t){return function(){var i=x.invoke(t,this);if(m(i))throw cn("undef",e);return i}}function l(e,t,i){return r(e,{$get:!1!==i?s(e,t):t})}function c(e){var t,i=[];return o(e,function(e){function n(e){var t,i;for(t=0,i=e.length;t<i;t++){var n=e[t],r=b.get(n[0]);r[n[1]].apply(r,n[2])}}if(!g.get(e)){g.put(e,!0);try{y(e)?(t=bi(e),i=i.concat(c(t.requires)).concat(t._runBlocks),n(t._invokeQueue),n(t._configBlocks)):w(e)?i.push(b.invoke(e)):Fi(e)?i.push(b.invoke(e)):Z(e,"module")}catch(t){throw Fi(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1==t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),cn("modulerr",e,t.stack||t.message||t)}}}),i}function d(e,i){function n(t,n){if(e.hasOwnProperty(t)){if(e[t]===u)throw cn("cdep",t+" <- "+p.join(" <- "));return e[t]}try{return p.unshift(t),e[t]=u,e[t]=i(t,n)}catch(i){throw e[t]===u&&delete e[t],i}finally{p.shift()}}function r(e,i,r,o){"string"==typeof r&&(o=r,r=null);var s,a,l,c=[],d=Ie(e,t,o);for(a=0,s=d.length;a<s;a++){if(l=d[a],"string"!=typeof l)throw cn("itkn",l);c.push(r&&r.hasOwnProperty(l)?r[l]:n(l,o))}return Fi(e)&&(e=e[s]),e.apply(i,c)}return{invoke:r,instantiate:function(e,t,i){var n=Object.create((Fi(e)?e[e.length-1]:e).prototype);return e=r(e,n,t,i),v(e)||w(e)?e:n},get:n,annotate:Ie,has:function(t){return _.hasOwnProperty(t+"Provider")||e.hasOwnProperty(t)}}}t=!0===t;var u={},p=[],g=new Ae([],(!0)),_={$provide:{provider:n(r),factory:n(l),service:n(function(e,t){return l(e,["$injector",function(e){return e.instantiate(t)}])}),value:n(function(e,t){return l(e,f(t),!1)}),constant:n(function(e,t){J(e,"constant"),_[e]=t,k[e]=t}),decorator:function(e,t){var i=b.get(e+"Provider"),n=i.$get;i.$get=function(){var e=x.invoke(n,i);return x.invoke(t,null,{$delegate:e})}}}},b=_.$injector=d(_,function(e,t){throw Ei.isString(t)&&p.push(t),cn("unpr",p.join(" <- "))}),k={},x=k.$injector=d(k,function(e,t){var n=b.get(e+"Provider",t);return x.invoke(n.$get,n,i,e)});return o(c(e),function(e){x.invoke(e||h)}),x}function Fe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,i,n){function r(e){var t=null;return Array.prototype.some.call(e,function(e){if("a"===M(e))return t=e,!0}),t}function o(e){if(e){e.scrollIntoView();var i;i=s.yOffset,w(i)?i=i():T(i)?(i=i[0],i="fixed"!==t.getComputedStyle(i).position?0:i.getBoundingClientRect().bottom):_(i)||(i=0),i&&(e=e.getBoundingClientRect().top,t.scrollBy(0,e-i))}else t.scrollTo(0,0)}function s(){var e,t=i.hash();t?(e=a.getElementById(t))?o(e):(e=r(a.getElementsByName(t)))?o(e):"top"===t&&o(null):o(null)}var a=t.document;return e&&n.$watch(function(){return i.hash()},function(e,t){e===t&&""===e||xe(function(){n.$evalAsync(s)})}),s}]}function ze(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function He(e,t,n,r){function s(e){try{e.apply(null,Si.call(arguments,1))}finally{if(k--,0===k)for(;x.length;)try{x.pop()()}catch(e){n.error(e)}}}function a(e,t){!function i(){o(S,function(e){e()}),C=t(i,e)}()}function l(){c(),d()}function c(){T=e.history.state,T=m(T)?null:T,P(T,z)&&(T=z),z=T}function d(){M===p.url()&&D===T||(M=p.url(),D=T,o(I,function(e){e(p.url(),T)}))}function u(e){try{return decodeURIComponent(e)}catch(t){return e}}var p=this,f=t[0],g=e.location,v=e.history,_=e.setTimeout,b=e.clearTimeout,w={};p.isMock=!1;var k=0,x=[];p.$$completeOutstandingRequest=s,p.$$incOutstandingRequestCount=function(){k++},p.notifyWhenNoOutstandingRequests=function(e){o(S,function(e){e()}),0===k?e():x.push(e)};var C,S=[];p.addPollFn=function(e){return m(C)&&a(100,_),S.push(e),e};var T,D,M=g.href,A=t.find("base"),E=null;c(),D=T,p.url=function(t,i,n){if(m(n)&&(n=null),g!==e.location&&(g=e.location),v!==e.history&&(v=e.history),t){var o=D===n;if(M===t&&(!r.history||o))return p;var s=M&&at(M)===at(t);return M=t,D=n,!r.history||s&&o?(s||(E=t),i?g.replace(t):s?(i=g,n=t.indexOf("#"),t=-1===n?"":t.substr(n+1),i.hash=t):g.href=t):(v[i?"replaceState":"pushState"](n,"",t),c(),D=T),p}return E||g.href.replace(/%27/g,"'")},p.state=function(){return T};var I=[],F=!1,z=null;p.onUrlChange=function(t){return F||(r.history&&yi(e).on("popstate",l),yi(e).on("hashchange",l),F=!0),I.push(t),t},p.$$checkUrlChange=d,p.baseHref=function(){var e=A.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var H={},R="",N=p.baseHref();p.cookies=function(e,t){var r,o,s,a;if(!e){if(f.cookie!==R)for(R=f.cookie,r=R.split("; "),H={},s=0;s<r.length;s++)o=r[s],a=o.indexOf("="),0<a&&(e=u(o.substring(0,a)),H[e]===i&&(H[e]=u(o.substring(a+1))));return H}t===i?f.cookie=encodeURIComponent(e)+"=;path="+N+";expires=Thu, 01 Jan 1970 00:00:00 GMT":y(t)&&(r=(f.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+N).length+1,4096<r&&n.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+r+" > 4096 bytes)!"))},p.defer=function(e,t){var i;return k++,i=_(function(){delete w[i],s(e)},t||0),w[i]=!0,i},p.defer.cancel=function(e){return!!w[e]&&(delete w[e],b(e),s(h),!0)}}function Re(){this.$get=["$window","$log","$sniffer","$document",function(e,t,i,n){return new He(e,n,t,i)}]}function Ne(){this.$get=function(){function e(e,i){function r(e){e!=h&&(p?p==e&&(p=e.n):p=e,o(e.n,e.p),o(e,h),h=e,h.n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw n("$cacheFactory")("iid",e);var s=0,a=d({},i,{id:e}),l={},c=i&&i.capacity||Number.MAX_VALUE,u={},h=null,p=null;return t[e]={put:function(e,t){if(c<Number.MAX_VALUE){var i=u[e]||(u[e]={key:e});r(i)}if(!m(t))return e in l||s++,l[e]=t,s>c&&this.remove(p.key),t},get:function(e){if(c<Number.MAX_VALUE){var t=u[e];if(!t)return;r(t)}return l[e]},remove:function(e){if(c<Number.MAX_VALUE){var t=u[e];if(!t)return;t==h&&(h=t.p),t==p&&(p=t.n),o(t.n,t.p),delete u[e]}delete l[e],s--},removeAll:function(){l={},s=0,u={},h=p=null},destroy:function(){u=a=l=null,delete t[e]},info:function(){return d({},a,{size:s})}}}var t={};return e.info=function(){var e={};return o(t,function(t,i){e[i]=t.info()}),e},e.get=function(e){return t[e]},e}}function $e(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Oe(e,n){function r(e,t){var i=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,n={};return o(e,function(e,r){var o=e.match(i);if(!o)throw hn("iscp",t,r,e);n[r]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||r}}),n}var s={},l=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,c=/(([\w\-]+)(?:\:([^;]+))?;?)/,u=D("ngSrc,ngSrcset,src,srcset"),m=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,_=/^(on[a-z]+|formaction)$/;this.directive=function t(i,n){return J(i,"directive"),y(i)?(X(n,"directiveFactory"),s.hasOwnProperty(i)||(s[i]=[],e.factory(i+"Directive",["$injector","$exceptionHandler",function(e,t){var n=[];return o(s[i],function(o,s){try{var a=e.invoke(o);w(a)?a={compile:f(a)}:!a.compile&&a.link&&(a.compile=f(a.link)),a.priority=a.priority||0,a.index=s,a.name=a.name||i,a.require=a.require||a.controller&&a.name,a.restrict=a.restrict||"EA",v(a.scope)&&(a.$$isolateBindings=r(a.scope,a.name)),n.push(a)}catch(e){t(e)}}),n}])),s[i].push(n)):o(i,a(t)),this},this.aHrefSanitizationWhitelist=function(e){return g(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return g(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var b=!0;this.debugInfoEnabled=function(e){return g(e)?(b=e,this):b},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,n,r,a,f,g,k,x,S,T,D){function E(e,t){try{e.addClass(t)}catch(e){}}function I(e,t,i,n,r){e instanceof yi||(e=yi(e)),o(e,function(t,i){t.nodeType==Bi&&t.nodeValue.match(/\S+/)&&(e[i]=yi(t).wrap("<span></span>").parent()[0])});var s=F(e,t,e,i,n,r);I.$$addScopeClass(e);var a=null;return function(t,i,n){X(t,"scope"),n=n||{};var r=n.parentBoundTranscludeFn,o=n.transcludeControllers;if(n=n.futureParentElement,r&&r.$$boundTransclude&&(r=r.$$boundTransclude),a||(a=(n=n&&n[0])&&"foreignobject"!==M(n)&&n.toString().match(/SVG/)?"svg":"html"),n="html"!==a?yi(Y(a,yi("<div>").append(e).html())):i?en.clone.call(e):e,o)for(var l in o)n.data("$"+l+"Controller",o[l].instance);return I.$$addScopeInfo(n,t),i&&i(n,t),s&&s(t,n,n,r),n}}function F(e,t,n,r,o,s){function a(e,n,r,o){var s,a,l,c,d,u,f;if(h)for(f=Array(n.length),c=0;c<p.length;c+=3)s=p[c],f[s]=n[s];else f=n;for(c=0,d=p.length;c<d;)a=f[p[c++]],n=p[c++],s=p[c++],n?(n.scope?(l=e.$new(),I.$$addScopeInfo(yi(a),l)):l=e,u=n.transcludeOnThisElement?z(e,n.transclude,o,n.elementTranscludeOnThisElement):!n.templateOnThisElement&&o?o:!o&&t?z(e,t):null,n(s,l,a,r,u)):s&&s(e,a.childNodes,i,o)}for(var l,c,d,u,h,p=[],f=0;f<e.length;f++)l=new ne,c=H(e[f],[],l,0===f?r:i,o),(s=c.length?O(c,e[f],l,t,n,null,[],[],s):null)&&s.scope&&I.$$addScopeClass(l.$$element),l=s&&s.terminal||!(d=e[f].childNodes)||!d.length?null:F(d,s?(s.transcludeOnThisElement||!s.templateOnThisElement)&&s.transclude:t),(s||l)&&(p.push(f,s,l),u=!0,h=h||s),s=null;return u?a:null}function z(e,t,i,n){return function(n,r,o,s,a){return n||(n=e.$new(!1,a),n.$$transcluded=!0),t(n,r,{parentBoundTranscludeFn:i,transcludeControllers:o,futureParentElement:s})}}function H(e,t,i,n,r){var o,s=i.$attr;switch(e.nodeType){case Li:B(t,Le(M(e)),"E",n,r);for(var a,d,u,h=e.attributes,p=0,f=h&&h.length;p<f;p++){var m=!1,g=!1;a=h[p],o=a.name,d=zi(a.value),a=Le(o),(u=ae.test(a))&&(o=o.replace(pn,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var v=a.replace(/(Start|End)$/,"");U(v)&&a===v+"Start"&&(m=o,g=o.substr(0,o.length-5)+"end",o=o.substr(0,o.length-6)),a=Le(o.toLowerCase()),s[a]=o,!u&&i.hasOwnProperty(a)||(i[a]=d,Ce(e,a)&&(i[a]=!0)),Z(e,t,d,a,u),B(t,a,"A",n,r,m,g);
}if(e=e.className,y(e)&&""!==e)for(;o=c.exec(e);)a=Le(o[2]),B(t,a,"C",n,r)&&(i[a]=zi(o[3])),e=e.substr(o.index+o[0].length);break;case Bi:G(t,e.nodeValue);break;case 8:try{(o=l.exec(e.nodeValue))&&(a=Le(o[1]),B(t,a,"M",n,r)&&(i[a]=zi(o[2])))}catch(e){}}return t.sort(j),t}function R(e,t,i){var n=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw hn("uterdir",t,i);e.nodeType==Li&&(e.hasAttribute(t)&&r++,e.hasAttribute(i)&&r--),n.push(e),e=e.nextSibling}while(0<r)}else n.push(e);return yi(n)}function N(e,t,i){return function(n,r,o,s,a){return r=R(r[0],t,i),e(n,r,o,s,a)}}function O(e,s,a,l,c,d,u,h,p){function _(e,t,i,n){e&&(i&&(e=N(e,i,n)),e.require=T.require,e.directiveName=D,(z===T||T.$$isolateScope)&&(e=ee(e,{isolateScope:!0})),u.push(e)),t&&(i&&(t=N(t,i,n)),t.require=T.require,t.directiveName=D,(z===T||T.$$isolateScope)&&(t=ee(t,{isolateScope:!0})),h.push(t))}function b(e,t,i,n){var r,s,a="data",l=!1,c=i;if(y(t)){if(s=t.match(m),t=t.substring(s[0].length),s[3]&&(s[1]?s[3]=null:s[1]=s[3]),"^"===s[1]?a="inheritedData":"^^"===s[1]&&(a="inheritedData",c=i.parent()),"?"===s[2]&&(l=!0),r=null,n&&"data"===a&&(r=n[t])&&(r=r.instance),r=r||c[a]("$"+t+"Controller"),!r&&!l)throw hn("ctreq",t,e);return r||null}return Fi(t)&&(r=[],o(t,function(t){r.push(b(e,t,i,n))})),r}function k(e,t,r,l,c){function d(e,t,n){var r;return C(e)||(n=t,t=e,e=i),G&&(r=_),n||(n=G?k.parent():k),c(e,t,r,n,D)}var p,m,v,y,_,w,k,x;if(s===r?(x=a,k=a.$$element):(k=yi(r),x=new ne(k,a)),z&&(y=t.$new(!0)),c&&(w=d,w.$$boundTransclude=c),F&&(S={},_={},o(F,function(e){var i={$scope:e===z||e.$$isolateScope?y:t,$element:k,$attrs:x,$transclude:w};v=e.controller,"@"==v&&(v=x[e.name]),i=g(v,i,!0,e.controllerAs),_[e.name]=i,G||k.data("$"+e.name+"Controller",i.instance),S[e.name]=i})),z){I.$$addScopeInfo(k,y,!0,!(O&&(O===z||O===z.$$originalDirective))),I.$$addScopeClass(k,!0),l=S&&S[z.name];var T=y;l&&l.identifier&&!0===z.bindToController&&(T=l.instance),o(y.$$isolateBindings=z.$$isolateBindings,function(e,i){var r,o,s,a,l=e.attrName,c=e.optional;switch(e.mode){case"@":x.$observe(l,function(e){T[i]=e}),x.$$observers[l].$$scope=t,x[l]&&(T[i]=n(x[l])(t));break;case"=":if(c&&!x[l])break;o=f(x[l]),a=o.literal?P:function(e,t){return e===t||e!==e&&t!==t},s=o.assign||function(){throw r=T[i]=o(t),hn("nonassign",x[l],z.name)},r=T[i]=o(t),c=function(e){return a(e,T[i])||(a(e,r)?s(t,e=T[i]):T[i]=e),r=e},c.$stateful=!0,c=e.collection?t.$watchCollection(x[l],c):t.$watch(f(x[l],c),null,o.literal),y.$on("$destroy",c);break;case"&":o=f(x[l]),T[i]=function(e){return o(t,e)}}})}for(S&&(o(S,function(e){e()}),S=null),l=0,p=u.length;l<p;l++)m=u[l],te(m,m.isolateScope?y:t,k,x,m.require&&b(m.directiveName,m.require,k,_),w);var D=t;for(z&&(z.template||null===z.templateUrl)&&(D=y),e&&e(D,r.childNodes,i,c),l=h.length-1;0<=l;l--)m=h[l],te(m,m.isolateScope?y:t,k,x,m.require&&b(m.directiveName,m.require,k,_),w)}p=p||{};for(var x,S,T,D,M,A,E=-Number.MAX_VALUE,F=p.controllerDirectives,z=p.newIsolateScopeDirective,O=p.templateDirective,B=p.nonTlbTranscludeDirective,U=!1,j=!1,G=p.hasElementTranscludeDirective,Q=a.$$element=yi(s),K=l,X=0,Z=e.length;X<Z;X++){T=e[X];var ie=T.$$start,re=T.$$end;if(ie&&(Q=R(s,ie,re)),M=i,E>T.priority)break;if((M=T.scope)&&(T.templateUrl||(v(M)?(q("new/isolated scope",z||x,T,Q),z=T):q("new/isolated scope",z,T,Q)),x=x||T),D=T.name,!T.templateUrl&&T.controller&&(M=T.controller,F=F||{},q("'"+D+"' controller",F[D],T,Q),F[D]=T),(M=T.transclude)&&(U=!0,T.$$tlb||(q("transclusion",B,T,Q),B=T),"element"==M?(G=!0,E=T.priority,M=Q,Q=a.$$element=yi(t.createComment(" "+D+": "+a[D]+" ")),s=Q[0],J(c,Si.call(M,0),s),K=I(M,l,E,d&&d.name,{nonTlbTranscludeDirective:B})):(M=yi(ce(s)).contents(),Q.empty(),K=I(M,l))),T.template)if(j=!0,q("template",O,T,Q),O=T,M=w(T.template)?T.template(Q,a):T.template,M=se(M),T.replace){if(d=T,M=Ki.test(M)?Ue(Y(T.templateNamespace,zi(M))):[],s=M[0],1!=M.length||s.nodeType!==Li)throw hn("tplrt",D,"");J(c,Q,s),Z={$attr:{}},M=H(s,[],Z);var oe=e.splice(X+1,e.length-(X+1));z&&L(M),e=e.concat(M).concat(oe),V(a,Z),Z=e.length}else Q.html(M);if(T.templateUrl)j=!0,q("template",O,T,Q),O=T,T.replace&&(d=T),k=W(e.splice(X,e.length-X),Q,a,c,U&&K,u,h,{controllerDirectives:F,newIsolateScopeDirective:z,templateDirective:O,nonTlbTranscludeDirective:B}),Z=e.length;else if(T.compile)try{A=T.compile(Q,a,K),w(A)?_(null,A,ie,re):A&&_(A.pre,A.post,ie,re)}catch(e){r(e,$(Q))}T.terminal&&(k.terminal=!0,E=Math.max(E,T.priority))}return k.scope=x&&!0===x.scope,k.transcludeOnThisElement=U,k.elementTranscludeOnThisElement=G,k.templateOnThisElement=j,k.transclude=K,p.hasElementTranscludeDirective=G,k}function L(e){for(var t=0,i=e.length;t<i;t++){var n,r=t;n=d(Object.create(e[t]),{$$isolateScope:!0}),e[r]=n}}function B(t,n,o,a,l,c,u){if(n===l)return null;if(l=null,s.hasOwnProperty(n)){var h;n=e.get(n+"Directive");for(var p=0,f=n.length;p<f;p++)try{if(h=n[p],(a===i||a>h.priority)&&-1!=h.restrict.indexOf(o)){if(c){var m={$$start:c,$$end:u};h=d(Object.create(h),m)}t.push(h),l=h}}catch(e){r(e)}}return l}function U(t){if(s.hasOwnProperty(t))for(var i=e.get(t+"Directive"),n=0,r=i.length;n<r;n++)if(t=i[n],t.multiElement)return!0;return!1}function V(e,t){var i=t.$attr,n=e.$attr,r=e.$$element;o(e,function(n,r){"$"!=r.charAt(0)&&(t[r]&&t[r]!==n&&(n+=("style"===r?";":" ")+t[r]),e.$set(r,n,!0,i[r]))}),o(t,function(t,o){"class"==o?(E(r,t),e.class=(e.class?e.class+" ":"")+t):"style"==o?(r.attr("style",r.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==o.charAt(0)||e.hasOwnProperty(o)||(e[o]=t,n[o]=i[o])})}function W(e,t,i,n,r,s,l,c){var u,h,p=[],f=t[0],m=e.shift(),g=d({},m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),y=w(m.templateUrl)?m.templateUrl(t,i):m.templateUrl,_=m.templateNamespace;return t.empty(),a(S.getTrustedResourceUrl(y)).then(function(a){var d,b;if(a=se(a),m.replace){if(a=Ki.test(a)?Ue(Y(_,zi(a))):[],d=a[0],1!=a.length||d.nodeType!==Li)throw hn("tplrt",m.name,y);a={$attr:{}},J(n,t,d);var w=H(d,[],a);v(m.scope)&&L(w),e=w.concat(e),V(i,a)}else d=f,t.html(a);for(e.unshift(g),u=O(e,d,i,r,t,m,s,l,c),o(n,function(e,i){e==d&&(n[i]=t[0])}),h=F(t[0].childNodes,r);p.length;){a=p.shift(),b=p.shift();var k=p.shift(),x=p.shift(),w=t[0];if(!a.$$destroyed){if(b!==f){var C=b.className;c.hasElementTranscludeDirective&&m.replace||(w=ce(d)),J(k,yi(b),w),E(yi(w),C)}b=u.transcludeOnThisElement?z(a,u.transclude,x):x,u(h,a,w,n,b)}}p=null}),function(e,t,i,n,r){e=r,t.$$destroyed||(p?p.push(t,i,n,e):(u.transcludeOnThisElement&&(e=z(t,u.transclude,r)),u(h,t,i,n,e)))}}function j(e,t){var i=t.priority-e.priority;return 0!==i?i:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function q(e,t,i,n){if(t)throw hn("multidir",t.name,i.name,e,$(n))}function G(e,t){var i=n(t,!0);i&&e.push({priority:0,compile:function(e){e=e.parent();var t=!!e.length;return t&&I.$$addBindingClass(e),function(e,n){var r=n.parent();t||I.$$addBindingClass(r),I.$$addBindingInfo(r,i.expressions),e.$watch(i,function(e){n[0].nodeValue=e})}}})}function Y(e,i){switch(e=ki(e||"html")){case"svg":case"math":var n=t.createElement("div");return n.innerHTML="<"+e+">"+i+"</"+e+">",n.childNodes[0].childNodes;default:return i}}function K(e,t){if("srcdoc"==t)return S.HTML;var i=M(e);return"xlinkHref"==t||"form"==i&&"action"==t||"img"!=i&&("src"==t||"ngSrc"==t)?S.RESOURCE_URL:void 0}function Z(e,t,i,r,o){var s=K(e,r);o=u[r]||o;var a=n(i,!0,s,o);if(a){if("multiple"===r&&"select"===M(e))throw hn("selmulti",$(e));t.push({priority:100,compile:function(){return{pre:function(e,t,l){if(t=l.$$observers||(l.$$observers={}),_.test(r))throw hn("nodomevents");var c=l[r];c!==i&&(a=c&&n(c,!0,s,o),i=c),a&&(l[r]=a(e),(t[r]||(t[r]=[])).$$inter=!0,(l.$$observers&&l.$$observers[r].$$scope||e).$watch(a,function(e,t){"class"===r&&e!=t?l.$updateClass(e,t):l.$set(r,e)}))}}}})}}function J(e,i,n){var r,o,s=i[0],a=i.length,l=s.parentNode;if(e)for(r=0,o=e.length;r<o;r++)if(e[r]==s){e[r++]=n,o=r+a-1;for(var c=e.length;r<c;r++,o++)o<c?e[r]=e[o]:delete e[r];e.length-=a-1,e.context===s&&(e.context=n);break}for(l&&l.replaceChild(n,s),e=t.createDocumentFragment(),e.appendChild(s),yi(n).data(yi(s).data()),_i?(Pi=!0,_i.cleanData([s])):delete yi.cache[s[yi.expando]],s=1,a=i.length;s<a;s++)l=i[s],yi(l).remove(),e.appendChild(l),delete i[s];i[0]=n,i.length=1}function ee(e,t){return d(function(){return e.apply(null,arguments)},e,t)}function te(e,t,i,n,o,s){try{e(t,i,n,o,s)}catch(e){r(e,$(i))}}var ne=function(e,t){if(t){var i,n,r,o=Object.keys(t);for(i=0,n=o.length;i<n;i++)r=o[i],this[r]=t[r]}else this.$attr={};this.$$element=e};ne.prototype={$normalize:Le,$addClass:function(e){e&&0<e.length&&T.addClass(this.$$element,e)},$removeClass:function(e){e&&0<e.length&&T.removeClass(this.$$element,e)},$updateClass:function(e,t){var i=Be(e,t);i&&i.length&&T.addClass(this.$$element,i),(i=Be(t,e))&&i.length&&T.removeClass(this.$$element,i)},$set:function(e,t,n,s){var a=this.$$element[0],l=Ce(a,e),c=Se(a,e),a=e;if(l?(this.$$element.prop(e,t),s=l):c&&(this[c]=t,a=c),this[e]=t,s?this.$attr[e]=s:(s=this.$attr[e])||(this.$attr[e]=s=Q(e,"-")),l=M(this.$$element),"a"===l&&"href"===e||"img"===l&&"src"===e)this[e]=t=D(t,"src"===e);else if("img"===l&&"srcset"===e){for(var l="",c=zi(t),d=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,d=/\s/.test(c)?d:/(,)/,c=c.split(d),d=Math.floor(c.length/2),u=0;u<d;u++)var h=2*u,l=l+D(zi(c[h]),!0),l=l+(" "+zi(c[h+1]));c=zi(c[2*u]).split(/\s/),l+=D(zi(c[0]),!0),2===c.length&&(l+=" "+zi(c[1])),this[e]=t=l}!1!==n&&(null===t||t===i?this.$$element.removeAttr(s):this.$$element.attr(s,t)),(e=this.$$observers)&&o(e[a],function(e){try{e(t)}catch(e){r(e)}})},$observe:function(e,t){var i=this,n=i.$$observers||(i.$$observers=ie()),r=n[e]||(n[e]=[]);return r.push(t),k.$evalAsync(function(){!r.$$inter&&i.hasOwnProperty(e)&&t(i[e])}),function(){A(r,t)}}};var re=n.startSymbol(),oe=n.endSymbol(),se="{{"==re||"}}"==oe?p:function(e){return e.replace(/\{\{/g,re).replace(/}}/g,oe)},ae=/^ngAttr[A-Z]/;return I.$$addBindingInfo=b?function(e,t){var i=e.data("$binding")||[];Fi(t)?i=i.concat(t):i.push(t),e.data("$binding",i)}:h,I.$$addBindingClass=b?function(e){E(e,"ng-binding")}:h,I.$$addScopeInfo=b?function(e,t,i,n){e.data(i?n?"$isolateScopeNoTemplate":"$isolateScope":"$scope",t)}:h,I.$$addScopeClass=b?function(e,t){E(e,t?"ng-isolate-scope":"ng-scope")}:h,I}]}function Le(e){return oe(e.replace(pn,""))}function Be(e,t){var i="",n=e.split(/\s+/),r=t.split(/\s+/),o=0;e:for(;o<n.length;o++){for(var s=n[o],a=0;a<r.length;a++)if(s==r[a])continue e;i+=(0<i.length?" ":"")+s}return i}function Ue(e){e=yi(e);var t=e.length;if(1>=t)return e;for(;t--;)8===e[t].nodeType&&Ti.call(e,t,1);return e}function Ve(){var e={},t=!1,r=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,i){J(t,"controller"),v(t)?d(e,t):e[t]=i},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(o,s){function a(e,t,i,r){if(!e||!v(e.$scope))throw n("$controller")("noscp",r,t);e.$scope[t]=i}return function(n,l,c,u){var h,p,f;return c=!0===c,u&&y(u)&&(f=u),y(n)&&(u=n.match(r),p=u[1],f=f||u[3],n=e.hasOwnProperty(p)?e[p]:ee(l.$scope,p,!0)||(t?ee(s,p,!0):i),Z(n,p,!0)),c?(c=(Fi(n)?n[n.length-1]:n).prototype,h=Object.create(c),f&&a(l,f,h,p||n.name),d(function(){return o.invoke(n,h,l,p),h},{instance:h,identifier:f})):(h=o.instantiate(n,l,p),f&&a(l,f,h,p||n.name),h)}}]}function We(){this.$get=["$window",function(e){return yi(e.document)}]}function je(){this.$get=["$log",function(e){return function(t,i){e.error.apply(e,arguments)}}]}function qe(e,t){if(y(e)){var i=e.replace(yn,"").trim();if(i){var n=t("Content-Type");(n=n&&0===n.indexOf(fn))||(n=(n=i.match(gn))&&vn[n[0]].test(i)),n&&(e=N(i))}}return e}function Ge(e){var t,i,n,r=ie();return e?(o(e.split("\n"),function(e){n=e.indexOf(":"),t=ki(zi(e.substr(0,n))),i=zi(e.substr(n+1)),t&&(r[t]=r[t]?r[t]+", "+i:i)}),r):r}function Ye(e){var t=v(e)?e:i;return function(i){return t||(t=Ge(e)),i?(i=t[ki(i)],void 0===i&&(i=null),i):t}}function Qe(e,t,i,n){return w(n)?n(e,t,i):(o(n,function(n){e=n(e,t,i)}),e)}function Ke(){var e=this.defaults={transformResponse:[qe],transformRequest:[function(e){return v(e)&&"[object File]"!==Mi.call(e)&&"[object Blob]"!==Mi.call(e)&&"[object FormData]"!==Mi.call(e)?R(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:I(mn),put:I(mn),patch:I(mn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},t=!1;this.useApplyAsync=function(e){return g(e)?(t=!!e,this):t};var r=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,l,c,u,h,p){function f(t){function r(e){var t=d({},e);return t.data=e.data?Qe(e.data,e.headers,e.status,a.transformResponse):e.data,e=e.status,200<=e&&300>e?t:h.reject(t)}function s(e){var t,i={};return o(e,function(e,n){w(e)?(t=e(),null!=t&&(i[n]=t)):i[n]=e}),i}if(!Ei.isObject(t))throw n("$http")("badreq",t);var a=d({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},t);a.headers=function(t){var i,n,r=e.headers,o=d({},t.headers),r=d({},r.common,r[ki(t.method)]);e:for(i in r){t=ki(i);for(n in o)if(ki(n)===t)continue e;o[i]=r[i]}return s(o)}(t),a.method=Ci(a.method);var l=[function(t){var n=t.headers,s=Qe(t.data,Ye(n),i,t.transformRequest);return m(s)&&o(n,function(e,t){"content-type"===ki(t)&&delete n[t]}),m(t.withCredentials)&&!m(e.withCredentials)&&(t.withCredentials=e.withCredentials),_(t,s).then(r,r)},i],c=h.when(a);for(o(C,function(e){(e.request||e.requestError)&&l.unshift(e.request,e.requestError),(e.response||e.responseError)&&l.push(e.response,e.responseError)});l.length;){t=l.shift();var u=l.shift(),c=c.then(t,u)}return c.success=function(e){return c.then(function(t){e(t.data,t.status,t.headers,a)}),c},c.error=function(e){return c.then(null,function(t){e(t.data,t.status,t.headers,a)}),c},c}function _(n,r){function o(e,i,n,r){function o(){s(i,e,n,r)}p&&(200<=e&&300>e?p.put(S,[e,i,Ge(n),r]):p.remove(S)),t?u.$applyAsync(o):(o(),u.$$phase||u.$apply())}function s(e,t,i,r){t=Math.max(t,0),(200<=t&&300>t?_.resolve:_.reject)({data:e,status:t,headers:Ye(i),config:n,statusText:r})}function c(e){s(e.data,e.status,I(e.headers()),e.statusText)}function d(){var e=f.pendingRequests.indexOf(n);-1!==e&&f.pendingRequests.splice(e,1)}var p,y,_=h.defer(),b=_.promise,C=n.headers,S=k(n.url,n.params);return f.pendingRequests.push(n),b.then(d,d),!n.cache&&!e.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(p=v(n.cache)?n.cache:v(e.cache)?e.cache:x),p&&(y=p.get(S),g(y)?y&&w(y.then)?y.then(c,c):Fi(y)?s(y[1],y[0],I(y[2]),y[3]):s(y,200,{},"OK"):p.put(S,b)),m(y)&&((y=Ut(n.url)?l.cookies()[n.xsrfCookieName||e.xsrfCookieName]:i)&&(C[n.xsrfHeaderName||e.xsrfHeaderName]=y),a(n.method,S,r,o,C,n.timeout,n.withCredentials,n.responseType)),b}function k(e,t){if(!t)return e;var i=[];return s(t,function(e,t){null===e||m(e)||(Fi(e)||(e=[e]),o(e,function(e){v(e)&&(e=b(e)?e.toISOString():R(e)),i.push(V(t)+"="+V(e))}))}),0<i.length&&(e+=(-1==e.indexOf("?")?"?":"&")+i.join("&")),e}var x=c("$http"),C=[];return o(r,function(e){C.unshift(y(e)?p.get(e):p.invoke(e))}),f.pendingRequests=[],function(e){o(arguments,function(e){f[e]=function(t,i){return f(d(i||{},{method:e,url:t}))}})}("get","delete","head","jsonp"),function(e){o(arguments,function(e){f[e]=function(t,i,n){return f(d(n||{},{method:e,url:t,data:i}))}})}("post","put","patch"),f.defaults=e,f}]}function Xe(){return new e.XMLHttpRequest}function Ze(){this.$get=["$browser","$window","$document",function(e,t,i){return Je(e,Xe,e.defer,t.angular.callbacks,i[0])}]}function Je(e,t,n,r,s){function a(e,t,i){var n=s.createElement("script"),o=null;return n.type="text/javascript",n.src=e,n.async=!0,o=function(e){n.removeEventListener("load",o,!1),n.removeEventListener("error",o,!1),s.body.removeChild(n),n=null;var a=-1,l="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),l=e.type,a="error"===e.type?404:200),i&&i(a,l)},n.addEventListener("load",o,!1),n.addEventListener("error",o,!1),s.body.appendChild(n),o}return function(s,l,c,d,u,p,f,m){function v(){b&&b(),k&&k.abort()}function y(t,r,o,s,a){x!==i&&n.cancel(x),b=k=null,t(r,o,s,a),e.$$completeOutstandingRequest(h)}if(e.$$incOutstandingRequestCount(),l=l||e.url(),"jsonp"==ki(s)){var _="_"+(r.counter++).toString(36);r[_]=function(e){r[_].data=e,r[_].called=!0};var b=a(l.replace("JSON_CALLBACK","angular.callbacks."+_),_,function(e,t){y(d,e,r[_].data,"",t),r[_]=h})}else{var k=t();if(k.open(s,l,!0),o(u,function(e,t){g(e)&&k.setRequestHeader(t,e)}),k.onload=function(){var e=k.statusText||"",t="response"in k?k.response:k.responseText,i=1223===k.status?204:k.status;0===i&&(i=t?200:"file"==Bt(l).protocol?404:0),y(d,i,t,k.getAllResponseHeaders(),e)},s=function(){y(d,-1,null,null,"")},k.onerror=s,k.onabort=s,f&&(k.withCredentials=!0),m)try{k.responseType=m}catch(e){if("json"!==m)throw e}k.send(c||null)}if(0<p)var x=n(v,p);else p&&w(p.then)&&p.then(v)}}function et(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(i,n,r){function o(e){return"\\\\\\"+e}function s(o,s,h,p){function f(i){return i.replace(c,e).replace(u,t)}function v(e){try{var t=e;e=h?r.getTrusted(h,t):r.valueOf(t);var i;if(p&&!g(e))i=e;else if(null==e)i="";else{switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=R(e)}i=e}return i}catch(e){i=_n("interr",o,e.toString()),n(i)}}p=!!p;for(var y,_,b=0,k=[],x=[],C=o.length,S=[],T=[];b<C;){if(-1==(y=o.indexOf(e,b))||-1==(_=o.indexOf(t,y+a))){b!==C&&S.push(f(o.substring(b)));break}b!==y&&S.push(f(o.substring(b,y))),b=o.substring(y+a,_),k.push(b),x.push(i(b,v)),b=_+l,T.push(S.length),S.push("")}if(h&&1<S.length)throw _n("noconcat",o);if(!s||k.length){var D=function(e){for(var t=0,i=k.length;t<i;t++){if(p&&m(e[t]))return;S[T[t]]=e[t]}return S.join("")};return d(function(e){var t=0,i=k.length,r=Array(i);try{for(;t<i;t++)r[t]=x[t](e);return D(r)}catch(t){e=_n("interr",o,t.toString()),n(e)}},{exp:o,expressions:k,$$watchDelegate:function(e,t,i){var n;return e.$watchGroup(x,function(i,r){var o=D(i);w(t)&&t.call(this,o,i!==r?n:o,e),n=o},i)}})}}var a=e.length,l=t.length,c=new RegExp(e.replace(/./g,o),"g"),u=new RegExp(t.replace(/./g,o),"g");return s.startSymbol=function(){return e},s.endSymbol=function(){return t},s}]}function tt(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,i,n){function r(r,s,a,l){var c=t.setInterval,d=t.clearInterval,u=0,h=g(l)&&!l,p=(h?n:i).defer(),f=p.promise;return a=g(a)?a:0,f.then(null,null,r),f.$$intervalId=c(function(){p.notify(u++),0<a&&u>=a&&(p.resolve(u),d(f.$$intervalId),delete o[f.$$intervalId]),h||e.$apply()},s),o[f.$$intervalId]=p,f}var o={};return r.cancel=function(e){return!!(e&&e.$$intervalId in o)&&(o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0)},r}]}function it(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(e){return 1===e?"one":"other"}}}}function nt(e){e=e.split("/");for(var t=e.length;t--;)e[t]=U(e[t]);return e.join("/")}function rt(e,t){var i=Bt(e);t.$$protocol=i.protocol,t.$$host=i.hostname,t.$$port=u(i.port)||wn[i.protocol]||null}function ot(e,t){var i="/"!==e.charAt(0);i&&(e="/"+e);var n=Bt(e);t.$$path=decodeURIComponent(i&&"/"===n.pathname.charAt(0)?n.pathname.substring(1):n.pathname),t.$$search=L(n.search),t.$$hash=decodeURIComponent(n.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function st(e,t){if(0===t.indexOf(e))return t.substr(e.length)}function at(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function lt(e){return e.replace(/(#.+)|#$/,"$1")}function ct(e){return e.substr(0,at(e).lastIndexOf("/")+1)}function dt(e,t){this.$$html5=!0,t=t||"";var n=ct(e);rt(e,this),this.$$parse=function(e){var t=st(n,e);if(!y(t))throw kn("ipthprfx",e,n);ot(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=B(this.$$search),t=this.$$hash?"#"+U(this.$$hash):"";this.$$url=nt(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=n+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var s,a;return(s=st(e,r))!==i?(a=s,a=(s=st(t,s))!==i?n+(st("/",s)||s):e+a):(s=st(n,r))!==i?a=n+s:n==r+"/"&&(a=n),a&&this.$$parse(a),!!a}}function ut(e,t){var i=ct(e);rt(e,this),this.$$parse=function(n){n=st(e,n)||st(i,n);var r;"#"===n.charAt(0)?(r=st(t,n),m(r)&&(r=n)):r=this.$$html5?n:"",ot(r,this),n=this.$$path;var o=/^\/[A-Z]:(\/.*)/;0===r.indexOf(e)&&(r=r.replace(e,"")),o.exec(r)||(n=(r=o.exec(n))?r[1]:n),this.$$path=n,this.$$compose()},this.$$compose=function(){var i=B(this.$$search),n=this.$$hash?"#"+U(this.$$hash):"";this.$$url=nt(this.$$path)+(i?"?"+i:"")+n,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t,i){return at(e)==at(t)&&(this.$$parse(t),!0)}}function ht(e,t){this.$$html5=!0,ut.apply(this,arguments);var i=ct(e);this.$$parseLinkUrl=function(n,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,s;return e==at(n)?o=n:(s=st(i,n))?o=e+t+s:i===n+"/"&&(o=i),o&&this.$$parse(o),!!o},this.$$compose=function(){var i=B(this.$$search),n=this.$$hash?"#"+U(this.$$hash):"";this.$$url=nt(this.$$path)+(i?"?"+i:"")+n,this.$$absUrl=e+t+this.$$url}}function pt(e){return function(){return this[e]}}function ft(e,t){return function(i){return m(i)?this[e]:(this[e]=t(i),this.$$compose(),this)}}function mt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return g(t)?(e=t,this):e},this.html5Mode=function(e){return S(e)?(t.enabled=e,this):v(e)?(S(e.enabled)&&(t.enabled=e.enabled),S(e.requireBase)&&(t.requireBase=e.requireBase),S(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(i,n,r,o,s){function a(e,t,i){var r=c.url(),o=c.$$state;try{n.url(e,t,i),c.$$state=n.state()}catch(e){throw c.url(r),c.$$state=o,e}}function l(e,t){i.$broadcast("$locationChangeSuccess",c.absUrl(),e,c.$$state,t)}var c,d;d=n.baseHref();var u,h=n.url();if(t.enabled){if(!d&&t.requireBase)throw kn("nobase");u=h.substring(0,h.indexOf("/",h.indexOf("//")+2))+(d||"/"),d=r.history?dt:ht}else u=at(h),d=ut;c=new d(u,"#"+e),c.$$parseLinkUrl(h,h),c.$$state=n.state();var p=/^\s*(javascript|mailto):/i;o.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&2!=e.which){for(var r=yi(e.target);"a"!==M(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;var a=r.prop("href"),l=r.attr("href")||r.attr("xlink:href");v(a)&&"[object SVGAnimatedString]"===a.toString()&&(a=Bt(a.animVal).href),p.test(a)||!a||r.attr("target")||e.isDefaultPrevented()||!c.$$parseLinkUrl(a,l)||(e.preventDefault(),c.absUrl()!=n.url()&&(i.$apply(),s.angular["ff-684208-preventDefault"]=!0))}}),c.absUrl()!=h&&n.url(c.absUrl(),!0);var f=!0;return n.onUrlChange(function(e,t){i.$evalAsync(function(){var n,r=c.absUrl(),o=c.$$state;c.$$parse(e),c.$$state=t,n=i.$broadcast("$locationChangeStart",e,r,t,o).defaultPrevented,c.absUrl()===e&&(n?(c.$$parse(r),c.$$state=o,a(r,!1,o)):(f=!1,l(r,o)))}),i.$$phase||i.$digest()}),i.$watch(function(){var e=lt(n.url()),t=lt(c.absUrl()),o=n.state(),s=c.$$replace,d=e!==t||c.$$html5&&r.history&&o!==c.$$state;(f||d)&&(f=!1,i.$evalAsync(function(){var t=c.absUrl(),n=i.$broadcast("$locationChangeStart",t,e,c.$$state,o).defaultPrevented;c.absUrl()===t&&(n?(c.$$parse(e),c.$$state=o):(d&&a(t,s,o===c.$$state?null:c.$$state),l(e,o)))})),c.$$replace=!1}),c}]}function gt(){var e=!0,t=this;this.debugEnabled=function(t){return g(t)?(e=t,this):e},this.$get=["$window",function(i){function n(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function r(e){var t=i.console||{},r=t[e]||t.log||h;e=!1;try{e=!!r.apply}catch(e){}return e?function(){var e=[];return o(arguments,function(t){e.push(n(t))}),r.apply(t,e)}:function(e,t){r(e,null==t?"":t)}}return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var i=r("debug");return function(){e&&i.apply(t,arguments)}}()}}]}function vt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw Cn("isecfld",t);return e}function yt(e,t){if(e){if(e.constructor===e)throw Cn("isecfn",t);if(e.window===e)throw Cn("isecwindow",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Cn("isecdom",t);if(e===Object)throw Cn("isecobj",t)}return e}function _t(e){return e.constant}function bt(e,t,i,n){yt(e,n),t=t.split(".");for(var r,o=0;1<t.length;o++){r=vt(t.shift(),n);var s=yt(e[r],n);s||(s={},e[r]=s),e=s}return r=vt(t.shift(),n),yt(e[r],n),e[r]=i}function wt(e){return"constructor"==e}function kt(e,t,n,r,o,s,a){vt(e,s),vt(t,s),vt(n,s),vt(r,s),vt(o,s);var l=function(e){return yt(e,s)},c=a||wt(e)?l:p,d=a||wt(t)?l:p,u=a||wt(n)?l:p,h=a||wt(r)?l:p,f=a||wt(o)?l:p;return function(s,a){var l=a&&a.hasOwnProperty(e)?a:s;return null==l?l:(l=c(l[e]),t?null==l?i:(l=d(l[t]),n?null==l?i:(l=u(l[n]),r?null==l?i:(l=h(l[r]),o?null==l?i:l=f(l[o]):l):l):l):l)}}function xt(e,t){return function(i,n){return e(i,n,yt,t)}}function Ct(e,t,n){var r=t.expensiveChecks,s=r?zn:Fn,a=s[e];if(a)return a;var l=e.split("."),c=l.length;if(t.csp)a=6>c?kt(l[0],l[1],l[2],l[3],l[4],n,r):function(e,t){var o,s=0;do o=kt(l[s++],l[s++],l[s++],l[s++],l[s++],n,r)(e,t),t=i,e=o;while(s<c);return o};else{var d="";r&&(d+="s = eso(s, fe);\nl = eso(l, fe);\n");var u=r;o(l,function(e,t){vt(e,n);var i=(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e;(r||wt(e))&&(i="eso("+i+", fe)",u=!0),d+="if(s == null) return undefined;\ns="+i+";\n"}),d+="return s;",t=new Function("s","l","eso","fe",d),t.toString=f(d),u&&(t=xt(t,n)),a=t}return a.sharedGetter=!0,a.assign=function(t,i){return bt(t,e,i,e)},s[e]=a}function St(e){return w(e.valueOf)?e.valueOf():Hn.call(e)}function Tt(){var e=ie(),t=ie();this.$get=["$filter","$sniffer",function(i,n){function r(e){var t=e;return e.sharedGetter&&(t=function(t,i){return e(t,i)},t.literal=e.literal,t.constant=e.constant,t.assign=e.assign),t}function s(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i];r.constant||(r.inputs?s(r.inputs,t):-1===t.indexOf(r)&&t.push(r))}return t}function a(e,t){return null==e||null==t?e===t:("object"!=typeof e||(e=St(e),"object"!=typeof e))&&(e===t||e!==e&&t!==t)}function l(e,t,i,n){var r,o=n.$$inputs||(n.$$inputs=s(n.inputs,[]));if(1===o.length){var l=a,o=o[0];return e.$watch(function(e){var t=o(e);return a(t,l)||(r=n(e),l=t&&St(t)),r},t,i)}for(var c=[],d=0,u=o.length;d<u;d++)c[d]=a;return e.$watch(function(e){for(var t=!1,i=0,s=o.length;i<s;i++){var l=o[i](e);(t||(t=!a(l,c[i])))&&(c[i]=l&&St(l))}return t&&(r=n(e)),r},t,i)}function c(e,t,i,n){var r,o;return r=e.$watch(function(e){return n(e)},function(e,i,n){o=e,w(t)&&t.apply(this,arguments),g(e)&&n.$$postDigest(function(){g(o)&&r()})},i)}function d(e,t,i,n){function r(e){var t=!0;return o(e,function(e){g(e)||(t=!1)}),t}var s,a;return s=e.$watch(function(e){return n(e)},function(e,i,n){a=e,w(t)&&t.call(this,e,i,n),r(e)&&n.$$postDigest(function(){r(a)&&s()})},i)}function u(e,t,i,n){var r;return r=e.$watch(function(e){return n(e)},function(e,i,n){w(t)&&t.apply(this,arguments),r()},i)}function p(e,t){if(!t)return e;var i=e.$$watchDelegate,i=i!==d&&i!==c?function(i,n){var r=e(i,n);return t(r,i,n)}:function(i,n){var r=e(i,n),o=t(r,i,n);return g(r)?o:r};return e.$$watchDelegate&&e.$$watchDelegate!==l?i.$$watchDelegate=e.$$watchDelegate:t.$stateful||(i.$$watchDelegate=l,i.inputs=[e]),i}var f={csp:n.csp,expensiveChecks:!1},m={csp:n.csp,expensiveChecks:!0};return function(n,o,s){var a,g,v;switch(typeof n){case"string":v=n=n.trim();var y=s?t:e;return a=y[v],a||(":"===n.charAt(0)&&":"===n.charAt(1)&&(g=!0,n=n.substring(2)),s=s?m:f,a=new In(s),a=new Pn(a,i,s).parse(n),a.constant?a.$$watchDelegate=u:g?(a=r(a),a.$$watchDelegate=a.literal?d:c):a.inputs&&(a.$$watchDelegate=l),y[v]=a),p(a,o);case"function":return p(n,o);default:return p(h,o)}}}]}function Dt(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return At(function(t){e.$evalAsync(t)},t)}]}function Mt(){this.$get=["$browser","$exceptionHandler",function(e,t){return At(function(t){e.defer(t)},t)}]}function At(e,t){function r(e,t,i){function n(t){return function(i){r||(r=!0,t.call(e,i))}}var r=!1;return[n(t),n(i)]}function s(){this.$$state={status:0}}function a(e,t){return function(i){t.call(e,i)}}function l(n){!n.processScheduled&&n.pending&&(n.processScheduled=!0,e(function(){var e,r,o;o=n.pending,n.processScheduled=!1,n.pending=i;for(var s=0,a=o.length;s<a;++s){r=o[s][0],e=o[s][n.status];try{w(e)?r.resolve(e(n.value)):1===n.status?r.resolve(n.value):r.reject(n.value)}catch(e){r.reject(e),t(e)}}}))}function c(){this.promise=new s,this.resolve=a(this,this.resolve),this.reject=a(this,this.reject),this.notify=a(this,this.notify)}var d=n("$q",TypeError);s.prototype={then:function(e,t,i){var n=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([n,e,t,i]),0<this.$$state.status&&l(this.$$state),n.promise},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then(function(t){return h(t,!0,e)},function(t){return h(t,!1,e)},t)}},c.prototype={resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(d("qcycle",e)):this.$$resolve(e))},$$resolve:function(e){var i,n;n=r(this,this.$$resolve,this.$$reject);try{(v(e)||w(e))&&(i=e&&e.then),w(i)?(this.promise.$$state.status=-1,i.call(e,n[0],n[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(e){n[1](e),t(e)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(i){var n=this.promise.$$state.pending;0>=this.promise.$$state.status&&n&&n.length&&e(function(){for(var e,r,o=0,s=n.length;o<s;o++){r=n[o][0],e=n[o][3];try{r.notify(w(e)?e(i):i)}catch(e){t(e)}}})}};var u=function(e,t){var i=new c;return t?i.resolve(e):i.reject(e),i.promise},h=function(e,t,i){var n=null;try{w(i)&&(n=i())}catch(e){return u(e,!1)}return n&&w(n.then)?n.then(function(){return u(e,t)},function(e){return u(e,!1)}):u(e,t)},p=function(e,t,i,n){var r=new c;return r.resolve(e),r.promise.then(t,i,n)},f=function e(t){if(!w(t))throw d("norslvr",t);if(!(this instanceof e))return new e(t);var i=new c;return t(function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise};return f.defer=function(){return new c},f.reject=function(e){var t=new c;return t.reject(e),t.promise},f.when=p,f.all=function(e){var t=new c,i=0,n=Fi(e)?[]:{};return o(e,function(e,r){i++,p(e).then(function(e){n.hasOwnProperty(r)||(n[r]=e,--i||t.resolve(n))},function(e){n.hasOwnProperty(r)||t.reject(e)})}),0===i&&t.resolve(n),t.promise},f}function Et(){this.$get=["$window","$timeout",function(e,t){var i=e.requestAnimationFrame||e.webkitRequestAnimationFrame,n=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,r=!!i,o=r?function(e){var t=i(e);return function(){n(t)}}:function(e){var i=t(e,16.66,!1);return function(){t.cancel(i)}};return o.supported=r,o}]}function It(){var e=10,t=n("$rootScope"),i=null,s=null;
this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(n,a,l,c){function d(){this.$id=++Ii,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function u(e){if(_.$$phase)throw t("inprog",_.$$phase);_.$$phase=e}function p(e,t,i){do e.$$listenerCount[i]-=t,0===e.$$listenerCount[i]&&delete e.$$listenerCount[i];while(e=e.$parent)}function f(){}function g(){for(;x.length;)try{x.shift()()}catch(e){a(e)}s=null}function y(){null===s&&(s=c.defer(function(){_.$apply(g)}))}d.prototype={constructor:d,$new:function(e,t){function i(){n.$$destroyed=!0}var n;return t=t||this,e?(n=new d,n.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=++Ii,this.$$ChildScope=null},this.$$ChildScope.prototype=this),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!=this)&&n.$on("$destroy",i),n},$watch:function(e,t,n){var r=l(e);if(r.$$watchDelegate)return r.$$watchDelegate(this,t,n,r);var o=this.$$watchers,s={fn:t,last:f,get:r,exp:e,eq:!!n};return i=null,w(t)||(s.fn=h),o||(o=this.$$watchers=[]),o.unshift(s),function(){A(o,s),i=null}},$watchGroup:function(e,t){function i(){l=!1,c?(c=!1,t(r,r,a)):t(r,n,a)}var n=Array(e.length),r=Array(e.length),s=[],a=this,l=!1,c=!0;if(!e.length){var d=!0;return a.$evalAsync(function(){d&&t(r,r,a)}),function(){d=!1}}return 1===e.length?this.$watch(e[0],function(e,i,o){r[0]=e,n[0]=i,t(r,e===i?r:n,o)}):(o(e,function(e,t){var o=a.$watch(e,function(e,o){r[t]=e,n[t]=o,l||(l=!0,a.$evalAsync(i))});s.push(o)}),function(){for(;s.length;)s.shift()()})},$watchCollection:function(e,t){function i(e){n=e;var t,i,s,a;if(!m(n)){if(v(n))if(r(n))for(o!==h&&(o=h,g=o.length=0,d++),e=n.length,g!==e&&(d++,o.length=g=e),t=0;t<e;t++)a=o[t],s=n[t],i=a!==a&&s!==s,i||a===s||(d++,o[t]=s);else{o!==p&&(o=p={},g=0,d++),e=0;for(t in n)n.hasOwnProperty(t)&&(e++,s=n[t],a=o[t],t in o?(i=a!==a&&s!==s,i||a===s||(d++,o[t]=s)):(g++,o[t]=s,d++));if(g>e)for(t in d++,o)n.hasOwnProperty(t)||(g--,delete o[t])}else o!==n&&(o=n,d++);return d}}i.$stateful=!0;var n,o,s,a=this,c=1<t.length,d=0,u=l(e,i),h=[],p={},f=!0,g=0;return this.$watch(u,function(){if(f?(f=!1,t(n,n,a)):t(n,s,a),c)if(v(n))if(r(n)){s=Array(n.length);for(var e=0;e<n.length;e++)s[e]=n[e]}else for(e in s={},n)xi.call(n,e)&&(s[e]=n[e]);else s=n})},$digest:function(){var n,r,o,l,d,h,p,m,v,y=e,x=[];u("$digest"),c.$$checkUrlChange(),this===_&&null!==s&&(c.defer.cancel(s),g()),i=null;do{for(h=!1,p=this;b.length;){try{v=b.shift(),v.scope.$eval(v.expression,v.locals)}catch(e){a(e)}i=null}e:do{if(l=p.$$watchers)for(d=l.length;d--;)try{if(n=l[d])if((r=n.get(p))===(o=n.last)||(n.eq?P(r,o):"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))){if(n===i){h=!1;break e}}else h=!0,i=n,n.last=n.eq?E(r,null):r,n.fn(r,o===f?r:o,p),5>y&&(m=4-y,x[m]||(x[m]=[]),x[m].push({msg:w(n.exp)?"fn: "+(n.exp.name||n.exp.toString()):n.exp,newVal:r,oldVal:o}))}catch(e){a(e)}if(!(l=p.$$childHead||p!==this&&p.$$nextSibling))for(;p!==this&&!(l=p.$$nextSibling);)p=p.$parent}while(p=l);if((h||b.length)&&!y--)throw _.$$phase=null,t("infdig",e,x)}while(h||b.length);for(_.$$phase=null;k.length;)try{k.shift()()}catch(e){a(e)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==_){for(var t in this.$$listenerCount)p(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=h,this.$on=this.$watch=this.$watchGroup=function(){return h},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(e,t){return l(e)(this,t)},$evalAsync:function(e,t){_.$$phase||b.length||c.defer(function(){b.length&&_.$digest()}),b.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){k.push(e)},$apply:function(e){try{return u("$apply"),this.$eval(e)}catch(e){a(e)}finally{_.$$phase=null;try{_.$digest()}catch(e){throw a(e),e}}},$applyAsync:function(e){function t(){i.$eval(e)}var i=this;e&&x.push(t),y()},$on:function(e,t){var i=this.$$listeners[e];i||(this.$$listeners[e]=i=[]),i.push(t);var n=this;do n.$$listenerCount[e]||(n.$$listenerCount[e]=0),n.$$listenerCount[e]++;while(n=n.$parent);var r=this;return function(){var n=i.indexOf(t);-1!==n&&(i[n]=null,p(r,1,e))}},$emit:function(e,t){var i,n,r,o=[],s=this,l=!1,c={name:e,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},d=F([c],arguments,1);do{for(i=s.$$listeners[e]||o,c.currentScope=s,n=0,r=i.length;n<r;n++)if(i[n])try{i[n].apply(null,d)}catch(e){a(e)}else i.splice(n,1),n--,r--;if(l)return c.currentScope=null,c;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(e,t){var i=this,n=this,r={name:e,targetScope:this,preventDefault:function(){r.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[e])return r;for(var o,s,l=F([r],arguments,1);i=n;){for(r.currentScope=i,n=i.$$listeners[e]||[],o=0,s=n.length;o<s;o++)if(n[o])try{n[o].apply(null,l)}catch(e){a(e)}else n.splice(o,1),o--,s--;if(!(n=i.$$listenerCount[e]&&i.$$childHead||i!==this&&i.$$nextSibling))for(;i!==this&&!(n=i.$$nextSibling);)i=i.$parent}return r.currentScope=null,r}};var _=new d,b=_.$$asyncQueue=[],k=_.$$postDigestQueue=[],x=_.$$applyAsyncQueue=[];return _}]}function Pt(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return g(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return g(e)?(t=e,this):t},this.$get=function(){return function(i,n){var r,o=n?t:e;return r=Bt(i).href,""===r||r.match(o)?i:"unsafe:"+r}}}function Ft(e){if("self"===e)return e;if(y(e)){if(-1<e.indexOf("***"))throw Rn("iwcard",e);return e=Hi(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(k(e))return new RegExp("^"+e.source+"$");throw Rn("imatcher")}function zt(e){var t=[];return g(e)&&o(e,function(e){t.push(Ft(e))}),t}function Ht(){this.SCE_CONTEXTS=Nn;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=zt(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=zt(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Ut(t):!!e.exec(t.href)}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}var s=function(e){throw Rn("unsafe")};n.has("$sanitize")&&(s=n.get("$sanitize"));var a=o(),l={};return l[Nn.HTML]=o(a),l[Nn.CSS]=o(a),l[Nn.URL]=o(a),l[Nn.JS]=o(a),l[Nn.RESOURCE_URL]=o(l[Nn.URL]),{trustAs:function(e,t){var n=l.hasOwnProperty(e)?l[e]:null;if(!n)throw Rn("icontext",e,t);if(null===t||t===i||""===t)return t;if("string"!=typeof t)throw Rn("itype",e);return new n(t)},getTrusted:function(n,o){if(null===o||o===i||""===o)return o;var a=l.hasOwnProperty(n)?l[n]:null;if(a&&o instanceof a)return o.$$unwrapTrustedValue();if(n===Nn.RESOURCE_URL){var c,d,a=Bt(o.toString()),u=!1;for(c=0,d=e.length;c<d;c++)if(r(e[c],a)){u=!0;break}if(u)for(c=0,d=t.length;c<d;c++)if(r(t[c],a)){u=!1;break}if(u)return o;throw Rn("insecurl",o.toString())}if(n===Nn.HTML)return s(o);throw Rn("unsafe")},valueOf:function(e){return e instanceof a?e.$$unwrapTrustedValue():e}}}]}function Rt(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,i){if(e&&8>vi)throw Rn("iequirks");var n=I(Nn);n.isEnabled=function(){return e},n.trustAs=i.trustAs,n.getTrusted=i.getTrusted,n.valueOf=i.valueOf,e||(n.trustAs=n.getTrusted=function(e,t){return t},n.valueOf=p),n.parseAs=function(e,i){var r=t(i);return r.literal&&r.constant?r:t(i,function(t){return n.getTrusted(e,t)})};var r=n.parseAs,s=n.getTrusted,a=n.trustAs;return o(Nn,function(e,t){var i=ki(t);n[oe("parse_as_"+i)]=function(t){return r(e,t)},n[oe("get_trusted_"+i)]=function(t){return s(e,t)},n[oe("trust_as_"+i)]=function(t){return a(e,t)}}),n}]}function Nt(){this.$get=["$window","$document",function(e,t){var i,n={},r=u((/android (\d+)/.exec(ki((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},a=/^(Moz|webkit|ms)(?=[A-Z])/,l=s.body&&s.body.style,c=!1,d=!1;if(l){for(var h in l)if(c=a.exec(h)){i=c[0],i=i.substr(0,1).toUpperCase()+i.substr(1);break}i||(i="WebkitOpacity"in l&&"webkit"),c=!!("transition"in l||i+"Transition"in l),d=!!("animation"in l||i+"Animation"in l),!r||c&&d||(c=y(s.body.style.webkitTransition),d=y(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>r||o),hasEvent:function(e){if("input"===e&&11>=vi)return!1;if(m(n[e])){var t=s.createElement("div");n[e]="on"+e in t}return n[e]},csp:Ri(),vendorPrefix:i,transitions:c,animations:d,android:r}}]}function $t(){this.$get=["$templateCache","$http","$q",function(e,t,i){function n(r,o){n.totalPendingRequests++;var s=t.defaults&&t.defaults.transformResponse;return Fi(s)?s=s.filter(function(e){return e!==qe}):s===qe&&(s=null),t.get(r,{cache:e,transformResponse:s}).then(function(e){return n.totalPendingRequests--,e.data},function(e){if(n.totalPendingRequests--,!o)throw hn("tpload",r);return i.reject(e)})}return n.totalPendingRequests=0,n}]}function Ot(){this.$get=["$rootScope","$browser","$location",function(e,t,i){return{findBindings:function(e,t,i){e=e.getElementsByClassName("ng-binding");var n=[];return o(e,function(e){var r=Ei.element(e).data("$binding");r&&o(r,function(r){i?new RegExp("(^|\\s)"+Hi(t)+"(\\s|\\||$)").test(r)&&n.push(e):-1!=r.indexOf(t)&&n.push(e)})}),n},findModels:function(e,t,i){for(var n=["ng-","data-ng-","ng\\:"],r=0;r<n.length;++r){var o=e.querySelectorAll("["+n[r]+"model"+(i?"=":"*=")+'"'+t+'"]');if(o.length)return o}},getLocation:function(){return i.url()},setLocation:function(t){t!==i.url()&&(i.url(t),e.$digest())},whenStable:function(e){t.notifyWhenNoOutstandingRequests(e)}}}]}function Lt(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,i,n,r){function o(o,a,l){var c=g(l)&&!l,d=(c?n:i).defer(),u=d.promise;return a=t.defer(function(){try{d.resolve(o())}catch(e){d.reject(e),r(e)}finally{delete s[u.$$timeoutId]}c||e.$apply()},a),u.$$timeoutId=a,s[a]=d,u}var s={};return o.cancel=function(e){return!!(e&&e.$$timeoutId in s)&&(s[e.$$timeoutId].reject("canceled"),delete s[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},o}]}function Bt(e){return vi&&($n.setAttribute("href",e),e=$n.href),$n.setAttribute("href",e),{href:$n.href,protocol:$n.protocol?$n.protocol.replace(/:$/,""):"",host:$n.host,search:$n.search?$n.search.replace(/^\?/,""):"",hash:$n.hash?$n.hash.replace(/^#/,""):"",hostname:$n.hostname,port:$n.port,pathname:"/"===$n.pathname.charAt(0)?$n.pathname:"/"+$n.pathname}}function Ut(e){return e=y(e)?Bt(e):e,e.protocol===On.protocol&&e.host===On.host}function Vt(){this.$get=f(e)}function Wt(e){function t(i,n){if(v(i)){var r={};return o(i,function(e,i){r[i]=t(i,e)}),r}return e.factory(i+"Filter",n)}this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+"Filter")}}],t("currency",Yt),t("date",ii),t("filter",jt),t("json",ni),t("limitTo",ri),t("lowercase",Wn),t("number",Qt),t("orderBy",oi),t("uppercase",jn)}function jt(){return function(e,t,i){if(!Fi(e))return e;var n;switch(typeof t){case"function":break;case"boolean":case"number":case"string":n=!0;case"object":t=qt(t,i,n);break;default:return e}return e.filter(t)}}function qt(e,t,i){var n=v(e)&&"$"in e;return!0===t?t=P:w(t)||(t=function(e,t){return!v(e)&&!v(t)&&(e=ki(""+e),t=ki(""+t),-1!==e.indexOf(t))}),function(r){return n&&!v(r)?Gt(r,e.$,t,!1):Gt(r,e,t,i)}}function Gt(e,t,i,n,r){var o=typeof e,s=typeof t;if("string"===s&&"!"===t.charAt(0))return!Gt(e,t.substring(1),i,n);if("array"===o)return e.some(function(e){return Gt(e,t,i,n)});switch(o){case"object":var a;if(n){for(a in e)if("$"!==a.charAt(0)&&Gt(e[a],t,i,!0))return!0;return!r&&Gt(e,t,i,!1)}if("object"===s){for(a in t)if(r=t[a],!w(r)&&(o="$"===a,!Gt(o?e:e[a],r,i,o,o)))return!1;return!0}return i(e,t);case"function":return!1;default:return i(e,t)}}function Yt(e){var t=e.NUMBER_FORMATS;return function(e,i,n){return m(i)&&(i=t.CURRENCY_SYM),m(n)&&(n=t.PATTERNS[1].maxFrac),null==e?e:Kt(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,n).replace(/\u00A4/g,i)}}function Qt(e){var t=e.NUMBER_FORMATS;return function(e,i){return null==e?e:Kt(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,i)}}function Kt(e,t,i,n,r){if(!isFinite(e)||v(e))return"";var o=0>e;e=Math.abs(e);var s=e+"",a="",l=[],c=!1;if(-1!==s.indexOf("e")){var d=s.match(/([\d\.]+)e(-?)(\d+)/);d&&"-"==d[2]&&d[3]>r+1?e=0:(a=s,c=!0)}if(c)0<r&&1>e&&(a=e.toFixed(r),e=parseFloat(a));else{s=(s.split(Ln)[1]||"").length,m(r)&&(r=Math.min(Math.max(t.minFrac,s),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+r)).toString()+"e"+-r);var s=(""+e).split(Ln),c=s[0],s=s[1]||"",u=0,h=t.lgSize,p=t.gSize;if(c.length>=h+p)for(u=c.length-h,d=0;d<u;d++)0===(u-d)%p&&0!==d&&(a+=i),a+=c.charAt(d);for(d=u;d<c.length;d++)0===(c.length-d)%h&&0!==d&&(a+=i),a+=c.charAt(d);for(;s.length<r;)s+="0";r&&"0"!==r&&(a+=n+s.substr(0,r))}return 0===e&&(o=!1),l.push(o?t.negPre:t.posPre,a,o?t.negSuf:t.posSuf),l.join("")}function Xt(e,t,i){var n="";for(0>e&&(n="-",e=-e),e=""+e;e.length<t;)e="0"+e;return i&&(e=e.substr(e.length-t)),n+e}function Zt(e,t,i,n){return i=i||0,function(r){return r=r["get"+e](),(0<i||r>-i)&&(r+=i),0===r&&-12==i&&(r=12),Xt(r,t,n)}}function Jt(e,t){return function(i,n){var r=i["get"+e](),o=Ci(t?"SHORT"+e:e);return n[o][r]}}function ei(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function ti(e){return function(t){var i=ei(t.getFullYear());return t=+new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))-+i,t=1+Math.round(t/6048e5),Xt(t,e)}}function ii(e){function t(e){var t;if(t=e.match(i)){e=new Date(0);var n=0,r=0,o=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=u(t[9]+t[10]),r=u(t[9]+t[11])),o.call(e,u(t[1]),u(t[2])-1,u(t[3])),n=u(t[4]||0)-n,r=u(t[5]||0)-r,o=u(t[6]||0),t=Math.round(1e3*parseFloat("0."+(t[7]||0))),s.call(e,n,r,o,t)}return e}var i=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(i,n,r){var s,a,l="",c=[];if(n=n||"mediumDate",n=e.DATETIME_FORMATS[n]||n,y(i)&&(i=Vn.test(i)?u(i):t(i)),_(i)&&(i=new Date(i)),!b(i))return i;for(;n;)(a=Un.exec(n))?(c=F(c,a,1),n=c.pop()):(c.push(n),n=null);return r&&"UTC"===r&&(i=new Date(i.getTime()),i.setMinutes(i.getMinutes()+i.getTimezoneOffset())),o(c,function(t){s=Bn[t],l+=s?s(i,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function ni(){return function(e,t){return m(t)&&(t=2),R(e,t)}}function ri(){return function(e,t){if(_(e)&&(e=e.toString()),!Fi(e)&&!y(e))return e;if(t=1/0===Math.abs(Number(t))?Number(t):u(t),y(e))return t?0<=t?e.slice(0,t):e.slice(t,e.length):"";var i,n;if(t>e.length?t=e.length:t<-e.length&&(t=-e.length),0<t)i=0,n=t;else{if(!t)return[];i=e.length+t,n=e.length}return e.slice(i,n)}}function oi(e){return function(t,i,n){function o(e,t){return t?function(t,i){return e(i,t)}:e}function s(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function a(e){return null===e?"null":"function"==typeof e.valueOf&&(e=e.valueOf(),s(e))||"function"==typeof e.toString&&(e=e.toString(),s(e))?e:""}function l(e,t){var i=typeof e,n=typeof t;return i===n&&"object"===i&&(e=a(e),t=a(t)),i===n?("string"===i&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:e<t?-1:1):i<n?-1:1}return r(t)?(i=Fi(i)?i:[i],0===i.length&&(i=["+"]),i=i.map(function(t){var i=!1,n=t||p;if(y(t)){if("+"!=t.charAt(0)&&"-"!=t.charAt(0)||(i="-"==t.charAt(0),t=t.substring(1)),""===t)return o(l,i);if(n=e(t),n.constant){var r=n();return o(function(e,t){return l(e[r],t[r])},i)}}return o(function(e,t){return l(n(e),n(t))},i)}),Si.call(t).sort(o(function(e,t){for(var n=0;n<i.length;n++){var r=i[n](e,t);if(0!==r)return r}return 0},n))):t}}function si(e){return w(e)&&(e={link:e}),e.restrict=e.restrict||"AC",f(e)}function ai(e,t,n,r,s){var a=this,l=[],c=a.$$parentForm=e.parent().controller("form")||Yn;a.$error={},a.$$success={},a.$pending=i,a.$name=s(t.name||t.ngForm||"")(n),a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,a.$submitted=!1,c.$addControl(a),a.$rollbackViewValue=function(){o(l,function(e){e.$rollbackViewValue()})},a.$commitViewValue=function(){o(l,function(e){e.$commitViewValue()})},a.$addControl=function(e){J(e.$name,"input"),l.push(e),e.$name&&(a[e.$name]=e)},a.$$renameControl=function(e,t){var i=e.$name;a[i]===e&&delete a[i],a[t]=e,e.$name=t},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],o(a.$pending,function(t,i){a.$setValidity(i,null,e)}),o(a.$error,function(t,i){a.$setValidity(i,null,e)}),A(l,e)},fi({ctrl:this,$element:e,set:function(e,t,i){var n=e[t];n?-1===n.indexOf(i)&&n.push(i):e[t]=[i]},unset:function(e,t,i){var n=e[t];n&&(A(n,i),0===n.length&&delete e[t])},parentForm:c,$animate:r}),a.$setDirty=function(){r.removeClass(e,pr),r.addClass(e,fr),a.$dirty=!0,a.$pristine=!1,c.$setDirty()},a.$setPristine=function(){r.setClass(e,pr,fr+" ng-submitted"),a.$dirty=!1,a.$pristine=!0,a.$submitted=!1,o(l,function(e){e.$setPristine()})},a.$setUntouched=function(){o(l,function(e){e.$setUntouched()})},a.$setSubmitted=function(){r.addClass(e,"ng-submitted"),a.$submitted=!0,c.$setSubmitted()}}function li(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function ci(e,t,i,n,r,o){var s=ki(t[0].type);if(!r.android){var a=!1;t.on("compositionstart",function(e){a=!0}),t.on("compositionend",function(){a=!1,l()})}var l=function(e){if(c&&(o.defer.cancel(c),c=null),!a){var r=t.val();e=e&&e.type,"password"===s||i.ngTrim&&"false"===i.ngTrim||(r=zi(r)),(n.$viewValue!==r||""===r&&n.$$hasNativeValidators)&&n.$setViewValue(r,e)}};if(r.hasEvent("input"))t.on("input",l);else{var c,d=function(e,t,i){c||(c=o.defer(function(){c=null,t&&t.value===i||l(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&19>t||37<=t&&40>=t||d(e,this,this.value)}),r.hasEvent("paste")&&t.on("paste cut",d)}t.on("change",l),n.$render=function(){t.val(n.$isEmpty(n.$viewValue)?"":n.$viewValue)}}function di(e,t){return function(i,n){var r,s;if(b(i))return i;if(y(i)){if('"'==i.charAt(0)&&'"'==i.charAt(i.length-1)&&(i=i.substring(1,i.length-1)),Zn.test(i))return new Date(i);if(e.lastIndex=0,r=e.exec(i))return r.shift(),s=n?{yyyy:n.getFullYear(),MM:n.getMonth()+1,dd:n.getDate(),HH:n.getHours(),mm:n.getMinutes(),ss:n.getSeconds(),sss:n.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(r,function(e,i){i<t.length&&(s[t[i]]=+e)}),new Date(s.yyyy,s.MM-1,s.dd,s.HH,s.mm,s.ss||0,1e3*s.sss||0)}return NaN}}function ui(e,t,n,r){return function(o,s,a,l,c,d,u){function h(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function p(e){return g(e)?b(e)?e:n(e):i}hi(o,s,a,l),ci(o,s,a,l,c,d);var f,v=l&&l.$options&&l.$options.timezone;if(l.$$parserName=e,l.$parsers.push(function(e){return l.$isEmpty(e)?null:t.test(e)?(e=n(e,f),"UTC"===v&&e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e):i}),l.$formatters.push(function(e){if(e&&!b(e))throw lr("datefmt",e);if(h(e)){if((f=e)&&"UTC"===v){var t=6e4*f.getTimezoneOffset();f=new Date(f.getTime()+t)}return u("date")(e,r,v)}return f=null,""}),g(a.min)||a.ngMin){var y;l.$validators.min=function(e){return!h(e)||m(y)||n(e)>=y},a.$observe("min",function(e){y=p(e),l.$validate()})}if(g(a.max)||a.ngMax){var _;l.$validators.max=function(e){return!h(e)||m(_)||n(e)<=_},a.$observe("max",function(e){_=p(e),l.$validate()})}}}function hi(e,t,n,r){(r.$$hasNativeValidators=v(t[0].validity))&&r.$parsers.push(function(e){var n=t.prop("validity")||{};return n.badInput&&!n.typeMismatch?i:e})}function pi(e,t,i,r,o){if(g(r)){if(e=e(r),!e.constant)throw n("ngModel")("constexpr",i,r);return e(t)}return o}function fi(e){function t(e,t){t&&!s[e]?(d.addClass(o,e),s[e]=!0):!t&&s[e]&&(d.removeClass(o,e),s[e]=!1)}function n(e,i){e=e?"-"+Q(e,"-"):"",t(ur+e,!0===i),t(hr+e,!1===i)}var r=e.ctrl,o=e.$element,s={},a=e.set,l=e.unset,c=e.parentForm,d=e.$animate;s[hr]=!(s[ur]=o.hasClass(ur)),r.$setValidity=function(e,o,s){o===i?(r.$pending||(r.$pending={}),a(r.$pending,e,s)):(r.$pending&&l(r.$pending,e,s),mi(r.$pending)&&(r.$pending=i)),S(o)?o?(l(r.$error,e,s),a(r.$$success,e,s)):(a(r.$error,e,s),l(r.$$success,e,s)):(l(r.$error,e,s),l(r.$$success,e,s)),r.$pending?(t(mr,!0),r.$valid=r.$invalid=i,n("",null)):(t(mr,!1),r.$valid=mi(r.$error),r.$invalid=!r.$valid,n("",r.$valid)),o=r.$pending&&r.$pending[e]?i:!r.$error[e]&&(!!r.$$success[e]||null),n(e,o),c.$setValidity(e,o,r)}}function mi(e){if(e)for(var t in e)return!1;return!0}function gi(e,t){return e="ngClass"+e,["$animate",function(i){function n(e,t){var i=[],n=0;e:for(;n<e.length;n++){for(var r=e[n],o=0;o<t.length;o++)if(r==t[o])continue e;i.push(r)}return i}function r(e){if(!Fi(e)){if(y(e))return e.split(" ");if(v(e)){var t=[];return o(e,function(e,i){e&&(t=t.concat(i.split(" ")))}),t}}return e}return{restrict:"AC",link:function(s,a,l){function c(e,t){var i=a.data("$classCounts")||{},n=[];return o(e,function(e){(0<t||i[e])&&(i[e]=(i[e]||0)+t,i[e]===+(0<t)&&n.push(e))}),a.data("$classCounts",i),n.join(" ")}function d(e){if(!0===t||s.$index%2===t){var o=r(e||[]);if(u){if(!P(e,u)){var d=r(u),h=n(o,d),o=n(d,o),h=c(h,1),o=c(o,-1);h&&h.length&&i.addClass(a,h),o&&o.length&&i.removeClass(a,o)}}else{var h=c(o,1);l.$addClass(h)}}u=I(e)}var u;s.$watch(l[e],d,!0),l.$observe("class",function(t){d(s.$eval(l[e]))}),"ngClass"!==e&&s.$watch("$index",function(i,n){var o=1&i;if(o!==(1&n)){var a=r(s.$eval(l[e]));o===t?(o=c(a,1),l.$addClass(o)):(o=c(a,-1),l.$removeClass(o))}})}}}]}var vi,yi,_i,bi,wi=/^\/(.+)\/([a-z]*)$/,ki=function(e){return y(e)?e.toLowerCase():e},xi=Object.prototype.hasOwnProperty,Ci=function(e){return y(e)?e.toUpperCase():e},Si=[].slice,Ti=[].splice,Di=[].push,Mi=Object.prototype.toString,Ai=n("ng"),Ei=e.angular||(e.angular={}),Ii=0;vi=t.documentMode,h.$inject=[],p.$inject=[];var Pi,Fi=Array.isArray,zi=function(e){return y(e)?e.trim():e},Hi=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ri=function(){if(g(Ri.isActive_))return Ri.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(t){e=!0}return Ri.isActive_=e},Ni=["ng-","data-ng-","ng:","x-ng-"],$i=/[A-Z]/g,Oi=!1,Li=1,Bi=3,Ui={full:"1.3.8",major:1,minor:3,dot:8,codeName:"prophetic-narwhal"};le.expando="ng339";var Vi=le.cache={},Wi=1;le._data=function(e){return this.cache[e[this.expando]]||{}};var ji=/([\:\-\_]+(.))/g,qi=/^moz([A-Z])/,Gi={mouseleave:"mouseout",mouseenter:"mouseover"},Yi=n("jqLite"),Qi=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ki=/<|&#?\w+;/,Xi=/<([\w:]+)/,Zi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ji={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ji.optgroup=Ji.option,Ji.tbody=Ji.tfoot=Ji.colgroup=Ji.caption=Ji.thead,Ji.th=Ji.td;var en=le.prototype={ready:function(i){function n(){r||(r=!0,i())}var r=!1;"complete"===t.readyState?setTimeout(n):(this.on("DOMContentLoaded",n),le(e).on("load",n))},toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return yi(0<=e?this[e]:this[this.length+e])},length:0,push:Di,sort:[].sort,splice:[].splice},tn={};o("multiple selected checked disabled readOnly required open".split(" "),function(e){tn[ki(e)]=e});var nn={};o("input select option textarea button form details".split(" "),function(e){nn[e]=!0});var rn={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:fe,removeData:he},function(e,t){le[t]=e}),o({data:fe,inheritedData:be,scope:function(e){return yi.data(e,"$scope")||be(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return yi.data(e,"$isolateScope")||yi.data(e,"$isolateScopeNoTemplate")},controller:_e,injector:function(e){return be(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:me,css:function(e,t,i){return t=oe(t),g(i)?void(e.style[t]=i):e.style[t]},attr:function(e,t,n){var r=ki(t);if(tn[r]){if(!g(n))return e[t]||(e.attributes.getNamedItem(t)||h).specified?r:i;n?(e[t]=!0,e.setAttribute(t,r)):(e[t]=!1,e.removeAttribute(r))}else if(g(n))e.setAttribute(t,n);else if(e.getAttribute)return e=e.getAttribute(t,2),null===e?i:e},prop:function(e,t,i){return g(i)?void(e[t]=i):e[t]},text:function(){function e(e,t){if(m(t)){var i=e.nodeType;return i===Li||i===Bi?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(m(t)){if(e.multiple&&"select"===M(e)){var i=[];return o(e.options,function(e){e.selected&&i.push(e.value||e.text)}),0===i.length?null:i}return e.value}e.value=t},html:function(e,t){return m(t)?e.innerHTML:(de(e,!0),void(e.innerHTML=t))},empty:we},function(e,t){le.prototype[t]=function(t,n){var r,o,s=this.length;if(e!==we&&(2==e.length&&e!==me&&e!==_e?t:n)===i){if(v(t)){for(r=0;r<s;r++)if(e===fe)e(this[r],t);else for(o in t)e(this[r],o,t[o]);return this}for(r=e.$dv,s=r===i?Math.min(s,1):s,o=0;o<s;o++){var a=e(this[o],t,n);r=r?r+a:a}return r}for(r=0;r<s;r++)e(this[r],t,n);return this}}),o({removeData:he,on:function e(t,i,n,r){if(g(r))throw Yi("onargs");if(se(t)){var o=pe(t,!0);r=o.events;var s=o.handle;s||(s=o.handle=Te(t,r));for(var o=0<=i.indexOf(" ")?i.split(" "):[i],a=o.length;a--;){i=o[a];var l=r[i];l||(r[i]=[],"mouseenter"===i||"mouseleave"===i?e(t,Gi[i],function(e){var t=e.relatedTarget;t&&(t===this||this.contains(t))||s(e,i)}):"$destroy"!==i&&t.addEventListener(i,s,!1),l=r[i]),l.push(n)}}},off:ue,one:function(e,t,i){e=yi(e),e.on(t,function n(){e.off(t,i),e.off(t,n)}),e.on(t,i)},replaceWith:function(e,t){var i,n=e.parentNode;de(e),o(new le(t),function(t){i?n.insertBefore(t,i.nextSibling):n.replaceChild(t,e),i=t})},children:function(e){var t=[];return o(e.childNodes,function(e){e.nodeType===Li&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var i=e.nodeType;if(i===Li||11===i){t=new le(t);for(var i=0,n=t.length;i<n;i++)e.appendChild(t[i])}},prepend:function(e,t){if(e.nodeType===Li){var i=e.firstChild;o(new le(t),function(t){e.insertBefore(t,i)})}},wrap:function(e,t){t=yi(t).eq(0).clone()[0];var i=e.parentNode;i&&i.replaceChild(t,e),t.appendChild(e)},remove:ke,detach:function(e){ke(e,!0)},after:function(e,t){var i=e,n=e.parentNode;t=new le(t);for(var r=0,o=t.length;r<o;r++){var s=t[r];n.insertBefore(s,i.nextSibling),i=s}},addClass:ve,removeClass:ge,toggleClass:function(e,t,i){t&&o(t.split(" "),function(t){var n=i;m(n)&&(n=!me(e,t)),(n?ve:ge)(e,t)})},parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:ce,triggerHandler:function(e,t,i){var n,r,s=t.type||t,a=pe(e);(a=(a=a&&a.events)&&a[s])&&(n={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:h,type:s,target:e},t.type&&(n=d(n,t)),t=I(a),r=i?[n].concat(i):[n],o(t,function(t){n.isImmediatePropagationStopped()||t.apply(e,r)}))}},function(e,t){le.prototype[t]=function(t,i,n){for(var r,o=0,s=this.length;o<s;o++)m(r)?(r=e(this[o],t,i,n),g(r)&&(r=yi(r))):ye(r,e(this[o],t,i,n));return g(r)?r:this},le.prototype.bind=le.prototype.on,le.prototype.unbind=le.prototype.off}),Ae.prototype={put:function(e,t){this[Me(e,this.nextUid)]=t},get:function(e){return this[Me(e,this.nextUid)]},remove:function(e){var t=this[e=Me(e,this.nextUid)];return delete this[e],t}};var on=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,sn=/,/,an=/^\s*(_?)(\S+?)\1\s*$/,ln=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,cn=n("$injector");Pe.$$annotate=Ie;var dn=n("$animate"),un=["$provide",function(e){this.$$selectors={},this.register=function(t,i){var n=t+"-animation";if(t&&"."!=t.charAt(0))throw dn("notcsel",t);this.$$selectors[t.substr(1)]=n,e.factory(n,i)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(e,t,i){function n(t){var n,r=e.defer();return r.promise.$$cancelFn=function(){n&&n()},i.$$postDigest(function(){n=t(function(){r.resolve()})}),r.promise}function r(e,t){var i=[],n=[],r=ie();return o((e.attr("class")||"").split(/\s+/),function(e){r[e]=!0}),o(t,function(e,t){var o=r[t];!1===e&&o?n.push(t):!0!==e||o||i.push(t)}),0<i.length+n.length&&[i.length?i:null,n.length?n:null]}function s(e,t,i){for(var n=0,r=t.length;n<r;++n)e[t[n]]=i}function a(){return c||(c=e.defer(),t(function(){c.resolve(),c=null})),c.promise}function l(e,t){if(Ei.isObject(t)){var i=d(t.from||{},t.to||{});e.css(i)}}var c;return{animate:function(e,t,i){return l(e,{from:t,to:i}),a()},enter:function(e,t,i,n){return l(e,n),i?i.after(e):t.prepend(e),a()},leave:function(e,t){return e.remove(),a()},move:function(e,t,i,n){return this.enter(e,t,i,n)},addClass:function(e,t,i){return this.setClass(e,t,[],i)},$$addClassImmediately:function(e,t,i){return e=yi(e),t=y(t)?t:Fi(t)?t.join(" "):"",o(e,function(e){ve(e,t)}),l(e,i),a()},removeClass:function(e,t,i){return this.setClass(e,[],t,i)},$$removeClassImmediately:function(e,t,i){return e=yi(e),t=y(t)?t:Fi(t)?t.join(" "):"",o(e,function(e){ge(e,t)}),l(e,i),a()},setClass:function(e,t,i,o){var a=this,l=!1;e=yi(e);var c=e.data("$$animateClasses");return c?o&&c.options&&(c.options=Ei.extend(c.options||{},o)):(c={classes:{},options:o},l=!0),o=c.classes,t=Fi(t)?t:t.split(" "),i=Fi(i)?i:i.split(" "),s(o,t,!0),s(o,i,!1),l&&(c.promise=n(function(t){var i=e.data("$$animateClasses");if(e.removeData("$$animateClasses"),i){var n=r(e,i.classes);n&&a.$$setClassImmediately(e,n[0],n[1],i.options)}t()}),e.data("$$animateClasses",c)),c.promise},$$setClassImmediately:function(e,t,i,n){return t&&this.$$addClassImmediately(e,t),i&&this.$$removeClassImmediately(e,i),l(e,n),a()},enabled:h,cancel:h}}]}],hn=n("$compile");Oe.$inject=["$provide","$$sanitizeUriProvider"];var pn=/^((?:x|data)[\:\-_])/i,fn="application/json",mn={"Content-Type":fn+";charset=utf-8"},gn=/^\[|^\{(?!\{)/,vn={"[":/]$/,"{":/}$/},yn=/^\)\]\}',?\n/,_n=n("$interpolate"),bn=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,wn={http:80,https:443,ftp:21},kn=n("$location"),xn={$$html5:!1,$$replace:!1,absUrl:pt("$$absUrl"),url:function(e){if(m(e))return this.$$url;var t=bn.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:pt("$$protocol"),host:pt("$$host"),port:pt("$$port"),path:ft("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(y(e)||_(e))e=e.toString(),this.$$search=L(e);else{if(!v(e))throw kn("isrcharg");e=E(e,{}),
o(e,function(t,i){null==t&&delete e[i]}),this.$$search=e}break;default:m(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:ft("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};o([ht,ut,dt],function(e){e.prototype=Object.create(xn),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==dt||!this.$$html5)throw kn("nostate");return this.$$state=m(t)?null:t,this}});var Cn=n("$parse"),Sn=Function.prototype.call,Tn=Function.prototype.apply,Dn=Function.prototype.bind,Mn=ie();o({null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:function(){}},function(e,t){e.constant=e.literal=e.sharedGetter=!0,Mn[t]=e}),Mn.this=function(e){return e},Mn.this.sharedGetter=!0;var An=d(ie(),{"+":function(e,t,n,r){return n=n(e,t),r=r(e,t),g(n)?g(r)?n+r:n:g(r)?r:i},"-":function(e,t,i,n){return i=i(e,t),n=n(e,t),(g(i)?i:0)-(g(n)?n:0)},"*":function(e,t,i,n){return i(e,t)*n(e,t)},"/":function(e,t,i,n){return i(e,t)/n(e,t)},"%":function(e,t,i,n){return i(e,t)%n(e,t)},"===":function(e,t,i,n){return i(e,t)===n(e,t)},"!==":function(e,t,i,n){return i(e,t)!==n(e,t)},"==":function(e,t,i,n){return i(e,t)==n(e,t)},"!=":function(e,t,i,n){return i(e,t)!=n(e,t)},"<":function(e,t,i,n){return i(e,t)<n(e,t)},">":function(e,t,i,n){return i(e,t)>n(e,t)},"<=":function(e,t,i,n){return i(e,t)<=n(e,t)},">=":function(e,t,i,n){return i(e,t)>=n(e,t)},"&&":function(e,t,i,n){return i(e,t)&&n(e,t)},"||":function(e,t,i,n){return i(e,t)||n(e,t)},"!":function(e,t,i){return!i(e,t)},"=":!0,"|":!0}),En={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},In=function(e){this.options=e};In.prototype={constructor:In,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;)if(e=this.text.charAt(this.index),'"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(e))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var t=e+this.peek(),i=t+this.peek(2),n=An[t],r=An[i];An[e]||n||r?(e=r?i:n?t:e,this.tokens.push({index:this.index,text:e,operator:!0}),this.index+=e.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){return e=e||1,this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(e){return"0"<=e&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdent:function(e){return"a"<=e&&"z">=e||"A"<=e&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,i){throw i=i||this.index,t=g(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,i)+"]":" "+i,Cn("lexerr",e,t,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var i=ki(this.text.charAt(this.index));if("."==i||this.isNumber(i))e+=i;else{var n=this.peek();if("e"==i&&this.isExpOperator(n))e+=i;else if(this.isExpOperator(i)&&n&&this.isNumber(n)&&"e"==e.charAt(e.length-1))e+=i;else{if(!this.isExpOperator(i)||n&&this.isNumber(n)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var i="",n=e,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index),n=n+o;if(r)"u"===o?(r=this.text.substring(this.index+1,this.index+5),r.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+r+"]"),this.index+=4,i+=String.fromCharCode(parseInt(r,16))):i+=En[o]||o,r=!1;else if("\\"===o)r=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:n,constant:!0,value:i});i+=o}this.index++}this.throwError("Unterminated quote",t)}};var Pn=function(e,t,i){this.lexer=e,this.$filter=t,this.options=i};Pn.ZERO=d(function(){return 0},{sharedGetter:!0,constant:!0}),Pn.prototype={constructor:Pn,parse:function(e){return this.text=e,this.tokens=this.lexer.lex(e),e=this.statements(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e.literal=!!e.literal,e.constant=!!e.constant,e},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.peek().identifier&&this.peek().text in Mn?e=Mn[this.consume().text]:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t,i;t=this.expect("(","[",".");)"("===t.text?(e=this.functionCall(e,i),i=null):"["===t.text?(i=e,e=this.objectIndex(e)):"."===t.text?(i=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw Cn("syntax",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw Cn("ueoe",this.text);return this.tokens[0]},peek:function(e,t,i,n){return this.peekAhead(0,e,t,i,n)},peekAhead:function(e,t,i,n,r){if(this.tokens.length>e){e=this.tokens[e];var o=e.text;if(o===t||o===i||o===n||o===r||!(t||i||n||r))return e}return!1},expect:function(e,t,i,n){return!!(e=this.peek(e,t,i,n))&&(this.tokens.shift(),e)},consume:function(e){if(0===this.tokens.length)throw Cn("ueoe",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},unaryFn:function(e,t){var i=An[e];return d(function(e,n){return i(e,n,t)},{constant:t.constant,inputs:[t]})},binaryFn:function(e,t,i,n){var r=An[t];return d(function(t,n){return r(t,n,e,i)},{constant:e.constant&&i.constant,inputs:!n&&[e,i]})},identifier:function(){for(var e=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)e+=this.consume().text+this.consume().text;return Ct(e,this.options,this.text)},constant:function(){var e=this.consume().value;return d(function(){return e},{constant:!0,literal:!0})},statements:function(){for(var e=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,i){for(var n,r=0,o=e.length;r<o;r++)n=e[r](t,i);return n}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},filter:function(e){var t,n,r=this.$filter(this.consume().text);if(this.peek(":"))for(t=[],n=[];this.expect(":");)t.push(this.expression());var o=[e].concat(t||[]);return d(function(o,s){var a=e(o,s);if(n){for(n[0]=a,a=t.length;a--;)n[a+1]=t[a](o,s);return r.apply(i,n)}return r(a)},{constant:!r.$stateful&&o.every(_t),inputs:!r.$stateful&&o})},expression:function(){return this.assignment()},assignment:function(){var e,t,i=this.ternary();return(t=this.expect("="))?(i.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),d(function(t,n){return i.assign(t,e(t,n),n)},{inputs:[i,e]})):i},ternary:function(){var e,t=this.logicalOR();if(this.expect("?")&&(e=this.assignment(),this.consume(":"))){var i=this.assignment();return d(function(n,r){return t(n,r)?e(n,r):i(n,r)},{constant:t.constant&&e.constant&&i.constant})}return t},logicalOR:function(){for(var e,t=this.logicalAND();e=this.expect("||");)t=this.binaryFn(t,e.text,this.logicalAND(),!0);return t},logicalAND:function(){for(var e,t=this.equality();e=this.expect("&&");)t=this.binaryFn(t,e.text,this.equality(),!0);return t},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t=this.binaryFn(t,e.text,this.relational());return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t=this.binaryFn(t,e.text,this.additive());return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.text,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.text,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(Pn.ZERO,e.text,this.unary()):(e=this.expect("!"))?this.unaryFn(e.text,this.unary()):this.primary()},fieldAccess:function(e){var t=this.identifier();return d(function(n,r,o){return n=o||e(n,r),null==n?i:t(n)},{assign:function(i,n,r){return(r=e(i,r))||e.assign(i,r={}),t.assign(r,n)}})},objectIndex:function(e){var t=this.text,n=this.expression();return this.consume("]"),d(function(r,o){var s=e(r,o),a=n(r,o);return vt(a,t),s?yt(s[a],t):i},{assign:function(i,r,o){var s=vt(n(i,o),t);return(o=yt(e(i,o),t))||e.assign(i,o={}),o[s]=r}})},functionCall:function(e,t){var n=[];if(")"!==this.peekToken().text)do n.push(this.expression());while(this.expect(","));this.consume(")");var r=this.text,o=n.length?[]:null;return function(s,a){var l=t?t(s,a):g(t)?i:s,c=e(s,a,l)||h;if(o)for(var d=n.length;d--;)o[d]=yt(n[d](s,a),r);if(yt(l,r),c){if(c.constructor===c)throw Cn("isecfn",r);if(c===Sn||c===Tn||c===Dn)throw Cn("isecff",r)}return l=c.apply?c.apply(l,o):c(o[0],o[1],o[2],o[3],o[4]),yt(l,r)}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),d(function(t,i){for(var n=[],r=0,o=e.length;r<o;r++)n.push(e[r](t,i));return n},{literal:!0,constant:e.every(_t),inputs:e})},object:function(){var e=[],t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var i=this.consume();i.constant?e.push(i.value):i.identifier?e.push(i.text):this.throwError("invalid key",i),this.consume(":"),t.push(this.expression())}while(this.expect(","));return this.consume("}"),d(function(i,n){for(var r={},o=0,s=t.length;o<s;o++)r[e[o]]=t[o](i,n);return r},{literal:!0,constant:t.every(_t),inputs:t})}};var Fn=ie(),zn=ie(),Hn=Object.prototype.valueOf,Rn=n("$sce"),Nn={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},hn=n("$compile"),$n=t.createElement("a"),On=Bt(e.location.href);Wt.$inject=["$provide"],Yt.$inject=["$locale"],Qt.$inject=["$locale"];var Ln=".",Bn={yyyy:Zt("FullYear",4),yy:Zt("FullYear",2,0,!0),y:Zt("FullYear",1),MMMM:Jt("Month"),MMM:Jt("Month",!0),MM:Zt("Month",2,1),M:Zt("Month",1,1),dd:Zt("Date",2),d:Zt("Date",1),HH:Zt("Hours",2),H:Zt("Hours",1),hh:Zt("Hours",2,-12),h:Zt("Hours",1,-12),mm:Zt("Minutes",2),m:Zt("Minutes",1),ss:Zt("Seconds",2),s:Zt("Seconds",1),sss:Zt("Milliseconds",3),EEEE:Jt("Day"),EEE:Jt("Day",!0),a:function(e,t){return 12>e.getHours()?t.AMPMS[0]:t.AMPMS[1]},Z:function(e){return e=-1*e.getTimezoneOffset(),e=(0<=e?"+":"")+(Xt(Math[0<e?"floor":"ceil"](e/60),2)+Xt(Math.abs(e%60),2))},ww:ti(2),w:ti(1)},Un=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Vn=/^\-?\d+$/;ii.$inject=["$locale"];var Wn=f(ki),jn=f(Ci);oi.$inject=["$parse"];var qn=f({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref&&!t.name)return function(e,t){var i="[object SVGAnimatedString]"===Mi.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(i)||e.preventDefault()})}}}),Gn={};o(tn,function(e,t){if("multiple"!=e){var i=Le("ng-"+t);Gn[i]=function(){return{restrict:"A",priority:100,link:function(e,n,r){e.$watch(r[i],function(e){r.$set(t,!!e)})}}}}}),o(rn,function(e,t){Gn[t]=function(){return{priority:100,link:function(e,i,n){return"ngPattern"===t&&"/"==n.ngPattern.charAt(0)&&(i=n.ngPattern.match(wi))?void n.$set("ngPattern",new RegExp(i[1],i[2])):void e.$watch(n[t],function(e){n.$set(t,e)})}}}}),o(["src","srcset","href"],function(e){var t=Le("ng-"+e);Gn[t]=function(){return{priority:99,link:function(i,n,r){var o=e,s=e;"href"===e&&"[object SVGAnimatedString]"===Mi.call(n.prop("href"))&&(s="xlinkHref",r.$attr[s]="xlink:href",o=null),r.$observe(t,function(t){t?(r.$set(s,t),vi&&o&&n.prop(o,r[s])):"href"===e&&r.$set(s,null)})}}}});var Yn={$addControl:h,$$renameControl:function(e,t){e.$name=t},$removeControl:h,$setValidity:h,$setDirty:h,$setPristine:h,$setSubmitted:h};ai.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Qn=function(e){return["$timeout",function(t){return{name:"form",restrict:e?"EAC":"E",controller:ai,compile:function(e){return e.addClass(pr).addClass(ur),{pre:function(e,n,r,o){if(!("action"in r)){var s=function(t){e.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),t.preventDefault()};n[0].addEventListener("submit",s,!1),n.on("$destroy",function(){t(function(){n[0].removeEventListener("submit",s,!1)},0,!1)})}var a=o.$$parentForm,l=o.$name;l&&(bt(e,l,o,l),r.$observe(r.name?"name":"ngForm",function(t){l!==t&&(bt(e,l,i,l),l=t,bt(e,l,o,l),a.$$renameControl(o,l))})),n.on("$destroy",function(){a.$removeControl(o),l&&bt(e,l,i,l),d(o,Yn)})}}}}}]},Kn=Qn(),Xn=Qn(!0),Zn=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Jn=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,er=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,tr=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,ir=/^(\d{4})-(\d{2})-(\d{2})$/,nr=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,rr=/^(\d{4})-W(\d\d)$/,or=/^(\d{4})-(\d\d)$/,sr=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ar=/(\s+|^)default(\s+|$)/,lr=new n("ngModel"),cr={text:function(e,t,i,n,r,o){ci(e,t,i,n,r,o),li(n)},date:ui("date",ir,di(ir,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ui("datetimelocal",nr,di(nr,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:ui("time",sr,di(sr,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ui("week",rr,function(e,t){if(b(e))return e;if(y(e)){rr.lastIndex=0;var i=rr.exec(e);if(i){var n=+i[1],r=+i[2],o=i=0,s=0,a=0,l=ei(n),r=7*(r-1);return t&&(i=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),a=t.getMilliseconds()),new Date(n,0,l.getDate()+r,i,o,s,a)}}return NaN},"yyyy-Www"),month:ui("month",or,di(or,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,r,o,s){if(hi(e,t,n,r),ci(e,t,n,r,o,s),r.$$parserName="number",r.$parsers.push(function(e){return r.$isEmpty(e)?null:tr.test(e)?parseFloat(e):i}),r.$formatters.push(function(e){if(!r.$isEmpty(e)){if(!_(e))throw lr("numfmt",e);e=e.toString()}return e}),n.min||n.ngMin){var a;r.$validators.min=function(e){return r.$isEmpty(e)||m(a)||e>=a},n.$observe("min",function(e){g(e)&&!_(e)&&(e=parseFloat(e,10)),a=_(e)&&!isNaN(e)?e:i,r.$validate()})}if(n.max||n.ngMax){var l;r.$validators.max=function(e){return r.$isEmpty(e)||m(l)||e<=l},n.$observe("max",function(e){g(e)&&!_(e)&&(e=parseFloat(e,10)),l=_(e)&&!isNaN(e)?e:i,r.$validate()})}},url:function(e,t,i,n,r,o){ci(e,t,i,n,r,o),li(n),n.$$parserName="url",n.$validators.url=function(e,t){var i=e||t;return n.$isEmpty(i)||Jn.test(i)}},email:function(e,t,i,n,r,o){ci(e,t,i,n,r,o),li(n),n.$$parserName="email",n.$validators.email=function(e,t){var i=e||t;return n.$isEmpty(i)||er.test(i)}},radio:function(e,t,i,n){m(i.name)&&t.attr("name",++Ii),t.on("click",function(e){t[0].checked&&n.$setViewValue(i.value,e&&e.type)}),n.$render=function(){t[0].checked=i.value==n.$viewValue},i.$observe("value",n.$render)},checkbox:function(e,t,i,n,r,o,s,a){var l=pi(a,e,"ngTrueValue",i.ngTrueValue,!0),c=pi(a,e,"ngFalseValue",i.ngFalseValue,!1);t.on("click",function(e){n.$setViewValue(t[0].checked,e&&e.type)}),n.$render=function(){t[0].checked=n.$viewValue},n.$isEmpty=function(e){return!1===e},n.$formatters.push(function(e){return P(e,l)}),n.$parsers.push(function(e){return e?l:c})},hidden:h,button:h,submit:h,reset:h,file:h},dr=["$browser","$sniffer","$filter","$parse",function(e,t,i,n){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,s,a){a[0]&&(cr[ki(s.type)]||cr.text)(r,o,s,a[0],t,e,i,n)}}}}],ur="ng-valid",hr="ng-invalid",pr="ng-pristine",fr="ng-dirty",mr="ng-pending",gr=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,n,r,s,a,l,c,d,u){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=i,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=i,this.$name=u(n.name||"",!1)(e);var p=s(n.ngModel),f=p.assign,v=p,y=f,b=null,k=this;this.$$setOptions=function(e){if((k.$options=e)&&e.getterSetter){var t=s(n.ngModel+"()"),i=s(n.ngModel+"($$$p)");v=function(e){var i=p(e);return w(i)&&(i=t(e)),i},y=function(e,t){w(p(e))?i(e,{$$$p:k.$modelValue}):f(e,k.$modelValue)}}else if(!p.assign)throw lr("nonassign",n.ngModel,$(r))},this.$render=h,this.$isEmpty=function(e){return m(e)||""===e||null===e||e!==e};var x=r.inheritedData("$formController")||Yn,C=0;fi({ctrl:this,$element:r,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:x,$animate:a}),this.$setPristine=function(){k.$dirty=!1,k.$pristine=!0,a.removeClass(r,fr),a.addClass(r,pr)},this.$setDirty=function(){k.$dirty=!0,k.$pristine=!1,a.removeClass(r,pr),a.addClass(r,fr),x.$setDirty()},this.$setUntouched=function(){k.$touched=!1,k.$untouched=!0,a.setClass(r,"ng-untouched","ng-touched")},this.$setTouched=function(){k.$touched=!0,k.$untouched=!1,a.setClass(r,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){l.cancel(b),k.$viewValue=k.$$lastCommittedViewValue,k.$render()},this.$validate=function(){if(!_(k.$modelValue)||!isNaN(k.$modelValue)){var e=k.$$rawModelValue,t=k.$valid,n=k.$modelValue,r=k.$options&&k.$options.allowInvalid;k.$$runValidators(!k.$error[k.$$parserName||"parse"]&&i,e,k.$$lastCommittedViewValue,function(o){r||t===o||(k.$modelValue=o?e:i,k.$modelValue!==n&&k.$$writeModelToScope())})}},this.$$runValidators=function(e,t,n,r){function s(){var e=!0;return o(k.$validators,function(i,r){var o=i(t,n);e=e&&o,l(r,o)}),!!e||(o(k.$asyncValidators,function(e,t){l(t,null)}),!1)}function a(){var e=[],r=!0;o(k.$asyncValidators,function(o,s){var a=o(t,n);if(!a||!w(a.then))throw lr("$asyncValidators",a);l(s,i),e.push(a.then(function(){l(s,!0)},function(e){r=!1,l(s,!1)}))}),e.length?d.all(e).then(function(){c(r)},h):c(!0)}function l(e,t){u===C&&k.$setValidity(e,t)}function c(e){u===C&&r(e)}C++;var u=C;(function(e){var t=k.$$parserName||"parse";if(e===i)l(t,null);else if(l(t,e),!e)return o(k.$validators,function(e,t){l(t,null)}),o(k.$asyncValidators,function(e,t){l(t,null)}),!1;return!0})(e)&&s()?a():c(!1)},this.$commitViewValue=function(){var e=k.$viewValue;l.cancel(b),(k.$$lastCommittedViewValue!==e||""===e&&k.$$hasNativeValidators)&&(k.$$lastCommittedViewValue=e,k.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var t=k.$$lastCommittedViewValue,n=!m(t)||i;if(n)for(var r=0;r<k.$parsers.length;r++)if(t=k.$parsers[r](t),m(t)){n=!1;break}_(k.$modelValue)&&isNaN(k.$modelValue)&&(k.$modelValue=v(e));var o=k.$modelValue,s=k.$options&&k.$options.allowInvalid;k.$$rawModelValue=t,s&&(k.$modelValue=t,k.$modelValue!==o&&k.$$writeModelToScope()),k.$$runValidators(n,t,k.$$lastCommittedViewValue,function(e){s||(k.$modelValue=e?t:i,k.$modelValue!==o&&k.$$writeModelToScope())})},this.$$writeModelToScope=function(){y(e,k.$modelValue),o(k.$viewChangeListeners,function(e){try{e()}catch(e){t(e)}})},this.$setViewValue=function(e,t){k.$viewValue=e,k.$options&&!k.$options.updateOnDefault||k.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var i=0,n=k.$options;n&&g(n.debounce)&&(n=n.debounce,_(n)?i=n:_(n[t])?i=n[t]:_(n.default)&&(i=n.default)),l.cancel(b),i?b=l(function(){k.$commitViewValue()},i):c.$$phase?k.$commitViewValue():e.$apply(function(){k.$commitViewValue()})},e.$watch(function(){var t=v(e);if(t!==k.$modelValue){k.$modelValue=k.$$rawModelValue=t;for(var n=k.$formatters,r=n.length,o=t;r--;)o=n[r](o);k.$viewValue!==o&&(k.$viewValue=k.$$lastCommittedViewValue=o,k.$render(),k.$$runValidators(i,t,o,h))}return t})}],vr=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:gr,priority:1,compile:function(t){return t.addClass(pr).addClass("ng-untouched").addClass(ur),{pre:function(e,t,i,n){var r=n[0],o=n[1]||Yn;r.$$setOptions(n[2]&&n[2].$options),o.$addControl(r),i.$observe("name",function(e){r.$name!==e&&o.$$renameControl(r,e)}),e.$on("$destroy",function(){o.$removeControl(r)})},post:function(t,i,n,r){var o=r[0];o.$options&&o.$options.updateOn&&i.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),i.on("blur",function(i){o.$touched||(e.$$phase?t.$evalAsync(o.$setTouched):t.$apply(o.$setTouched))})}}}}}],yr=f({restrict:"A",require:"ngModel",link:function(e,t,i,n){n.$viewChangeListeners.push(function(){e.$eval(i.ngChange)})}}),_r=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){n&&(i.required=!0,n.$validators.required=function(e,t){return!i.required||!n.$isEmpty(t)},i.$observe("required",function(){n.$validate()}))}}},br=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,o){if(o){var s,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(y(e)&&0<e.length&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw n("ngPattern")("noregexp",a,e,$(t));s=e||i,o.$validate()}),o.$validators.pattern=function(e){return o.$isEmpty(e)||m(s)||s.test(e)}}}}},wr=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){if(n){var r=-1;i.$observe("maxlength",function(e){e=u(e),r=isNaN(e)?-1:e,n.$validate()}),n.$validators.maxlength=function(e,t){return 0>r||n.$isEmpty(e)||t.length<=r}}}}},kr=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,n){if(n){var r=0;i.$observe("minlength",function(e){r=u(e)||0,n.$validate()}),n.$validators.minlength=function(e,t){return n.$isEmpty(t)||t.length>=r}}}}},xr=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,r){var s=t.attr(n.$attr.ngList)||", ",a="false"!==n.ngTrim,l=a?zi(s):s;r.$parsers.push(function(e){if(!m(e)){var t=[];return e&&o(e.split(l),function(e){e&&t.push(a?zi(e):e)}),t}}),r.$formatters.push(function(e){return Fi(e)?e.join(s):i}),r.$isEmpty=function(e){return!e||!e.length}}}},Cr=/^(true|false|\d+)$/,Sr=function(){return{restrict:"A",priority:100,compile:function(e,t){return Cr.test(t.ngValue)?function(e,t,i){i.$set("value",e.$eval(i.ngValue))}:function(e,t,i){e.$watch(i.ngValue,function(e){i.$set("value",e)})}}}},Tr=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==i?(this.$options.updateOnDefault=!1,this.$options.updateOn=zi(this.$options.updateOn.replace(ar,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Dr=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=e===i?"":e})}}}}],Mr=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,o){n=e(r.attr(o.$attr.ngBindTemplate)),t.$$addBindingInfo(r,n.expressions),r=r[0],o.$observe("ngBindTemplate",function(e){r.textContent=e===i?"":e})}}}}],Ar=["$sce","$parse","$compile",function(e,t,i){return{restrict:"A",compile:function(n,r){var o=t(r.ngBindHtml),s=t(r.ngBindHtml,function(e){return(e||"").toString()});return i.$$addBindingClass(n),function(t,n,r){i.$$addBindingInfo(n,r.ngBindHtml),t.$watch(s,function(){n.html(e.getTrustedHtml(o(t))||"")})}}}}],Er=gi("",!0),Ir=gi("Odd",0),Pr=gi("Even",1),Fr=si({compile:function(e,t){t.$set("ngCloak",i),e.removeClass("ng-cloak")}}),zr=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Hr={},Rr={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Le("ng-"+e);Hr[t]=["$parse","$rootScope",function(i,n){return{restrict:"A",compile:function(r,o){var s=i(o[t],null,!0);return function(t,i){i.on(e,function(i){var r=function(){s(t,{$event:i})};Rr[e]&&n.$$phase?t.$evalAsync(r):t.$apply(r)})}}}}]});var Nr=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(i,n,r,o,s){var a,l,c;i.$watch(r.ngIf,function(i){i?l||s(function(i,o){l=o,i[i.length++]=t.createComment(" end ngIf: "+r.ngIf+" "),a={clone:i},e.enter(i,n.parent(),n)}):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),a&&(c=te(a.clone),e.leave(c).then(function(){c=null}),a=null))})}}}],$r=["$templateRequest","$anchorScroll","$animate","$sce",function(e,t,i,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Ei.noop,compile:function(r,o){var s=o.ngInclude||o.src,a=o.onload||"",l=o.autoscroll;return function(r,o,c,d,u){var h,p,f,m=0,v=function(){p&&(p.remove(),p=null),h&&(h.$destroy(),h=null),f&&(i.leave(f).then(function(){p=null}),p=f,f=null)};r.$watch(n.parseAsResourceUrl(s),function(n){var s=function(){!g(l)||l&&!r.$eval(l)||t()},c=++m;n?(e(n,!0).then(function(e){if(c===m){var t=r.$new();d.template=e,e=u(t,function(e){v(),i.enter(e,null,o).then(s)}),h=t,f=e,h.$emit("$includeContentLoaded",n),r.$eval(a)}},function(){c===m&&(v(),r.$emit("$includeContentError",n))}),r.$emit("$includeContentRequested",n)):(v(),d.template=null)})}}}}],Or=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(i,n,r,o){/SVG/.test(n[0].toString())?(n.empty(),e(ae(o.template,t).childNodes)(i,function(e){n.append(e)},{futureParentElement:n})):(n.html(o.template),e(n.contents())(i))}}}],Lr=si({priority:450,compile:function(){return{pre:function(e,t,i){e.$eval(i.ngInit)}}}}),Br=si({terminal:!0,priority:1e3}),Ur=["$locale","$interpolate",function(e,t){var i=/{}/g,n=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(r,s,a){function l(e){s.text(e||"")}var c,d=a.count,u=a.$attr.when&&s.attr(a.$attr.when),h=a.offset||0,p=r.$eval(u)||{},f={},u=t.startSymbol(),m=t.endSymbol(),g=u+d+"-"+h+m,v=Ei.noop;o(a,function(e,t){var i=n.exec(t);i&&(i=(i[1]?"-":"")+ki(i[2]),p[i]=s.attr(a.$attr[t]))}),o(p,function(e,n){f[n]=t(e.replace(i,g))}),r.$watch(d,function(t){t=parseFloat(t);var i=isNaN(t);i||t in p||(t=e.pluralCat(t-h)),t===c||i&&isNaN(c)||(v(),v=r.$watch(f[t],l),c=t)})}}}],Vr=["$parse","$animate",function(e,s){var a=n("ngRepeat"),l=function(e,t,i,n,r,o,s){e[i]=n,r&&(e[r]=o),e.$index=t,e.$first=0===t,e.$last=t===s-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(n,c){var d=c.ngRepeat,u=t.createComment(" end ngRepeat: "+d+" "),h=d.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!h)throw a("iexp",d);var p=h[1],f=h[2],m=h[3],g=h[4],h=p.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!h)throw a("iidexp",p);var v=h[3]||h[1],y=h[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(m)))throw a("badident",m);var _,b,w,k,x={$id:Me};return g?_=e(g):(w=function(e,t){return Me(t)},k=function(e){return e}),function(e,t,n,c,h){_&&(b=function(t,i,n){return y&&(x[y]=t),x[v]=i,x.$index=n,_(e,x)});var p=ie();e.$watchCollection(f,function(n){var c,f,g,_,x,C,S,T,D,M,A=t[0],E=ie();if(m&&(e[m]=n),r(n))T=n,f=b||w;else{f=b||k,T=[];for(M in n)n.hasOwnProperty(M)&&"$"!=M.charAt(0)&&T.push(M);T.sort()}for(_=T.length,M=Array(_),c=0;c<_;c++)if(x=n===T?c:T[c],C=n[x],S=f(x,C,c),p[S])D=p[S],delete p[S],E[S]=D,M[c]=D;else{if(E[S])throw o(M,function(e){e&&e.scope&&(p[e.id]=e)}),a("dupes",d,S,C);M[c]={id:S,scope:i,clone:i},E[S]=!0}for(g in p){if(D=p[g],S=te(D.clone),s.leave(S),S[0].parentNode)for(c=0,f=S.length;c<f;c++)S[c].$$NG_REMOVED=!0;D.scope.$destroy()}for(c=0;c<_;c++)if(x=n===T?c:T[c],C=n[x],D=M[c],D.scope){g=A;do g=g.nextSibling;while(g&&g.$$NG_REMOVED);D.clone[0]!=g&&s.move(te(D.clone),null,yi(A)),A=D.clone[D.clone.length-1],l(D.scope,c,v,C,y,x,_)}else h(function(e,t){D.scope=t;var i=u.cloneNode(!1);e[e.length++]=i,s.enter(e,null,yi(A)),A=i,D.clone=e,E[D.id]=D,l(D.scope,c,v,C,y,x,_)});p=E})}}}}],Wr=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,i,n){t.$watch(n.ngShow,function(t){e[t?"removeClass":"addClass"](i,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],jr=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,i,n){t.$watch(n.ngHide,function(t){e[t?"addClass":"removeClass"](i,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],qr=si(function(e,t,i){e.$watch(i.ngStyle,function(e,i){i&&e!==i&&o(i,function(e,i){t.css(i,"")}),e&&t.css(e)},!0)}),Gr=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(i,n,r,s){var a=[],l=[],c=[],d=[],u=function(e,t){return function(){e.splice(t,1)}};i.$watch(r.ngSwitch||r.on,function(i){var n,r;for(n=0,r=c.length;n<r;++n)e.cancel(c[n]);for(n=c.length=0,r=d.length;n<r;++n){var h=te(l[n].clone);d[n].$destroy(),(c[n]=e.leave(h)).then(u(c,n))}l.length=0,d.length=0,(a=s.cases["!"+i]||s.cases["?"])&&o(a,function(i){i.transclude(function(n,r){d.push(r);var o=i.element;n[n.length++]=t.createComment(" end ngSwitchWhen: "),l.push({clone:n}),e.enter(n,o.parent(),o)})})})}}}],Yr=si({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,i,n,r){n.cases["!"+i.ngSwitchWhen]=n.cases["!"+i.ngSwitchWhen]||[],n.cases["!"+i.ngSwitchWhen].push({transclude:r,element:t})}}),Qr=si({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,i,n,r){n.cases["?"]=n.cases["?"]||[],n.cases["?"].push({transclude:r,element:t})}}),Kr=si({restrict:"EAC",link:function(e,t,i,r,o){if(!o)throw n("ngTransclude")("orphan",$(t));o(function(e){t.empty(),t.append(e)})}}),Xr=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,i){"text/ng-template"==i.type&&e.put(i.id,t[0].text)}}}],Zr=n("ngOptions"),Jr=f({restrict:"A",terminal:!0}),eo=["$compile","$parse",function(e,n){var r=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:h};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,i){var n,r=this,o={},a=s;r.databound=i.ngModel,r.init=function(e,t,i){a=e,n=i},r.addOption=function(t,i){J(t,'"option value"'),o[t]=!0,a.$viewValue==t&&(e.val(t),n.parent()&&n.remove()),i&&i[0].hasAttribute("selected")&&(i[0].selected=!0)},r.removeOption=function(e){this.hasOption(e)&&(delete o[e],a.$viewValue===e&&this.renderUnknownOption(e))},r.renderUnknownOption=function(t){t="? "+Me(t)+" ?",n.val(t),e.prepend(n),e.val(t),n.prop("selected",!0)},r.hasOption=function(e){return o.hasOwnProperty(e)},t.$on("$destroy",function(){r.renderUnknownOption=h})}],link:function(s,a,l,c){function d(e,t,i,n){i.$render=function(){var e=i.$viewValue;n.hasOption(e)?(x.parent()&&x.remove(),t.val(e),""===e&&f.prop("selected",!0)):m(e)&&f?t.val(""):n.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){x.parent()&&x.remove(),i.$setViewValue(t.val())})})}function u(e,t,i){var n;i.$render=function(){var e=new Ae(i.$viewValue);o(t.find("option"),function(t){t.selected=g(e.get(t.value))})},e.$watch(function(){P(n,i.$viewValue)||(n=I(i.$viewValue),i.$render())}),t.on("change",function(){e.$apply(function(){var e=[];o(t.find("option"),function(t){
t.selected&&e.push(t.value)}),i.$setViewValue(e)})})}function h(t,s,a){function l(e,i,n){return F[x]=n,T&&(F[T]=i),e(t,F)}function c(e){var t;if(v)if(E&&Fi(e)){t=new Ae([]);for(var i=0;i<e.length;i++)t.put(l(E,null,e[i]),!0)}else t=new Ae(e);else E&&(e=l(E,null,e));return function(i,n){var r;return r=E?E:S?S:M,v?g(t.remove(l(r,i,n))):e===l(r,i,n)}}function d(){b||(t.$$postDigest(h),b=!0)}function u(e,t,i){e[t]=e[t]||0,e[t]+=i?1:-1}function h(){b=!1;var e,i,n,r,d,h={"":[]},f=[""];n=a.$viewValue,r=A(t)||[];var y,x,C,S,M=T?Object.keys(r).sort():r,z={};d=c(n);var H,R,N=!1;for(I={},S=0;C=M.length,S<C;S++)y=S,T&&(y=M[S],"$"===y.charAt(0))||(x=r[y],e=l(D,y,x)||"",(i=h[e])||(i=h[e]=[],f.push(e)),e=d(y,x),N=N||e,x=l(m,y,x),x=g(x)?x:"",R=E?E(t,F):T?M[S]:S,E&&(I[R]=y),i.push({id:R,label:x,selected:e}));for(v||(_||null===n?h[""].unshift({id:"",label:"",selected:!N}):N||h[""].unshift({id:"?",label:"",selected:!0})),y=0,M=f.length;y<M;y++){for(e=f[y],i=h[e],P.length<=y?(n={element:k.clone().attr("label",e),label:i.label},r=[n],P.push(r),s.append(n.element)):(r=P[y],n=r[0],n.label!=e&&n.element.attr("label",n.label=e)),N=null,S=0,C=i.length;S<C;S++)e=i[S],(d=r[S+1])?(N=d.element,d.label!==e.label&&(u(z,d.label,!1),u(z,e.label,!0),N.text(d.label=e.label),N.prop("label",d.label)),d.id!==e.id&&N.val(d.id=e.id),N[0].selected!==e.selected&&(N.prop("selected",d.selected=e.selected),vi&&N.prop("selected",d.selected))):(""===e.id&&_?H=_:(H=w.clone()).val(e.id).prop("selected",e.selected).attr("selected",e.selected).prop("label",e.label).text(e.label),r.push(d={element:H,label:e.label,id:e.id,selected:e.selected}),u(z,e.label,!0),N?N.after(H):n.element.append(H),N=H);for(S++;r.length>S;)e=r.pop(),u(z,e.label,!1),e.element.remove()}for(;P.length>y;){for(i=P.pop(),S=1;S<i.length;++S)u(z,i[S].label,!1);i[0].element.remove()}o(z,function(e,t){0<e?p.addOption(t):0>e&&p.removeOption(t)})}var f;if(!(f=y.match(r)))throw Zr("iexp",y,$(s));var m=n(f[2]||f[1]),x=f[4]||f[6],C=/ as /.test(f[0])&&f[1],S=C?n(C):null,T=f[5],D=n(f[3]||""),M=n(f[2]?f[1]:x),A=n(f[7]),E=f[8]?n(f[8]):null,I={},P=[[{element:s,label:""}]],F={};_&&(e(_)(t),_.removeClass("ng-scope"),_.remove()),s.empty(),s.on("change",function(){t.$apply(function(){var e,n=A(t)||[];if(v)e=[],o(s.val(),function(t){t=E?I[t]:t,e.push("?"===t?i:""===t?null:l(S?S:M,t,n[t]))});else{var r=E?I[s.val()]:s.val();e="?"===r?i:""===r?null:l(S?S:M,r,n[r])}a.$setViewValue(e),h()})}),a.$render=h,t.$watchCollection(A,d),t.$watchCollection(function(){var e,i=A(t);if(i&&Fi(i)){e=Array(i.length);for(var n=0,r=i.length;n<r;n++)e[n]=l(m,n,i[n])}else if(i)for(n in e={},i)i.hasOwnProperty(n)&&(e[n]=l(m,n,i[n]));return e},d),v&&t.$watchCollection(function(){return a.$modelValue},d)}if(c[1]){var p=c[0];c=c[1];var f,v=l.multiple,y=l.ngOptions,_=!1,b=!1,w=yi(t.createElement("option")),k=yi(t.createElement("optgroup")),x=w.clone();l=0;for(var C=a.children(),S=C.length;l<S;l++)if(""===C[l].value){f=_=C.eq(l);break}p.init(c,_,x),v&&(c.$isEmpty=function(e){return!e||0===e.length}),y?h(s,a,c):v?u(s,a,c):d(s,a,c,p)}}}}],to=["$interpolate",function(e){var t={addOption:h,removeOption:h};return{restrict:"E",priority:100,compile:function(i,n){if(m(n.value)){var r=e(i.text(),!0);r||n.$set("value",i.text())}return function(e,i,n){var o=i.parent(),s=o.data("$selectController")||o.parent().data("$selectController");s&&s.databound||(s=t),r?e.$watch(r,function(e,t){n.$set("value",e),t!==e&&s.removeOption(t),s.addOption(e,i)}):s.addOption(n.value,i),i.on("$destroy",function(){s.removeOption(n.value)})}}}}],io=f({restrict:"E",terminal:!1});e.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(K(),re(Ei),yi(t).ready(function(){j(t,q)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),!function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}var i=function(t,i){var o=this;this.element=e(t),this.language=i.language||this.element.data("date-language")||"en",this.language=this.language in n?this.language:"en",this.isRTL=n[this.language].rtl||!1,this.formatType=i.formatType||this.element.data("format-type")||"standard",this.format=r.parseFormat(i.format||this.element.data("date-format")||r.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar").parent(),this.componentReset=!!this.element.is(".date")&&this.element.find(".add-on .icon-remove").parent(),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=i.linkField||this.element.data("link-field")||!1,this.linkFormat=r.parseFormat(i.linkFormat||this.element.data("link-format")||r.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=i.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=i.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=i.initialDate||new Date,this._attachEvents(),this.formatViewType="datetime","formatViewType"in i?this.formatViewType=i.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in i?this.minView=i.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=r.convertViewMode(this.minView),this.maxView=r.modes.length-1,"maxView"in i?this.maxView=i.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=r.convertViewMode(this.maxView),this.startViewMode=2,"startView"in i?this.startViewMode=i.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=r.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in i?this.viewSelect=i.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=r.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=e(r.template).appendTo(this.isInline?this.element:"body").on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),e(document).on("mousedown",function(t){0===e(t.target).closest(".datetimepicker").length&&o.hide()}),this.autoclose=!1,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(i.weekStart||this.element.data("date-weekstart")||n[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};i.prototype={constructor:i,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:e.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]];for(var t,i,n=0;n<this._events.length;n++)t=this._events[n][0],i=this._events[n][1],t.on(i)},_detachEvents:function(){for(var e,t,i=0;i<this._events.length;i++)e=this._events[i][0],t=this._events[i][1],e.off(t);this._events=[]},show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(t){this.isVisible&&(this.isInline||(this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.element.data().datetimepicker},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-6e4*e.getTimezoneOffset()))},setUTCDate:function(e){e>=this.startDate&&e<=this.endDate?(this.date=e,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:e,startDate:this.startDate,endDate:this.endDate})},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t)),this.linkField&&e("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(e){return void 0==e&&(e=this.format),r.formatDate(this.date,e,this.language,this.formatType)},setStartDate:function(e){this.startDate=e||-(1/0),this.startDate!==-(1/0)&&(this.startDate=r.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(e){this.endDate=e||1/0,this.endDate!==1/0&&(this.endDate=r.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[],e.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t,i,n,r=parseInt(this.element.parents().filter(function(){return"auto"!=e(this).css("z-index")}).first().css("z-index"))+10;this.component?(t=this.component.offset(),n=t.left,"bottom-left"!=this.pickerPosition&&"top-left"!=this.pickerPosition||(n+=this.component.outerWidth()-this.picker.outerWidth())):(t=this.element.offset(),n=t.left),i="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?t.top-this.picker.outerHeight():t.top+this.height,this.picker.css({top:i,left:n,zIndex:r})}},update:function(){var e,t=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],t=!0):e=(this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val())||this.initialDate,e||(e=new Date,t=!1),this.date=r.parseDate(e,this.format,this.language,this.formatType),t&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var e=this.weekStart,t="<tr>";e<this.weekStart+7;)t+='<th class="dow">'+n[this.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datetimepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;t<12;)e+='<span class="month">'+n[this.language].monthsShort[t++]+"</span>";this.picker.find(".datetimepicker-months td").html(e)},fill:function(){if(null!=this.date&&null!=this.viewDate){var i=new Date(this.viewDate),o=i.getUTCFullYear(),s=i.getUTCMonth(),a=i.getUTCDate(),l=i.getUTCHours(),c=i.getUTCMinutes(),d=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),u=this.startDate!==-(1/0)?this.startDate.getUTCMonth():-(1/0),h=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,p=this.endDate!==1/0?this.endDate.getUTCMonth():1/0,f=new t(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(n[this.language].months[s]+" "+o),"time"==this.formatViewType){var g=l%12?l%12:12,v=(g<10?"0":"")+g,y=(c<10?"0":"")+c,_=n[this.language].meridiem[l<12?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(v+":"+y+" "+_.toUpperCase()),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(v+":"+y+" "+_.toUpperCase())}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(a+" "+n[this.language].months[s]+" "+o),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(a+" "+n[this.language].months[s]+" "+o);this.picker.find("tfoot th.today").text(n[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var b=t(o,s-1,28,0,0,0,0),w=r.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth());b.setUTCDate(w),b.setUTCDate(w-(b.getUTCDay()-this.weekStart+7)%7);var k=new Date(b);k.setUTCDate(k.getUTCDate()+42),k=k.valueOf();for(var x,C=[];b.valueOf()<k;)b.getUTCDay()==this.weekStart&&C.push("<tr>"),x="",b.getUTCFullYear()<o||b.getUTCFullYear()==o&&b.getUTCMonth()<s?x+=" old":(b.getUTCFullYear()>o||b.getUTCFullYear()==o&&b.getUTCMonth()>s)&&(x+=" new"),this.todayHighlight&&b.getUTCFullYear()==m.getFullYear()&&b.getUTCMonth()==m.getMonth()&&b.getUTCDate()==m.getDate()&&(x+=" today"),b.valueOf()==f&&(x+=" active"),(b.valueOf()+864e5<=this.startDate||b.valueOf()>this.endDate||e.inArray(b.getUTCDay(),this.daysOfWeekDisabled)!==-1)&&(x+=" disabled"),C.push('<td class="day'+x+'">'+b.getUTCDate()+"</td>"),b.getUTCDay()==this.weekEnd&&C.push("</tr>"),b.setUTCDate(b.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(C.join("")),C=[];for(var S="",T="",D="",M=0;M<24;M++){var A=t(o,s,a,M);x="",A.valueOf()+36e5<=this.startDate||A.valueOf()>this.endDate?x+=" disabled":l==M&&(x+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(T=M<12?n[this.language].meridiem[0]:n[this.language].meridiem[1],T!=D&&(""!=D&&C.push("</fieldset>"),C.push('<fieldset class="hour"><legend>'+T.toUpperCase()+"</legend>")),D=T,S=M%12?M%12:12,C.push('<span class="hour'+x+" hour_"+(M<12?"am":"pm")+'">'+S+"</span>"),23==M&&C.push("</fieldset>")):(S=M+":00",C.push('<span class="hour'+x+'">'+S+"</span>"))}this.picker.find(".datetimepicker-hours td").html(C.join("")),C=[],S="",T="",D="";for(var M=0;M<60;M+=this.minuteStep){var A=t(o,s,a,l,M,0);x="",A.valueOf()<this.startDate||A.valueOf()>this.endDate?x+=" disabled":Math.floor(c/this.minuteStep)==Math.floor(M/this.minuteStep)&&(x+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(T=l<12?n[this.language].meridiem[0]:n[this.language].meridiem[1],T!=D&&(""!=D&&C.push("</fieldset>"),C.push('<fieldset class="minute"><legend>'+T.toUpperCase()+"</legend>")),D=T,S=l%12?l%12:12,C.push('<span class="minute'+x+'">'+S+":"+(M<10?"0"+M:M)+"</span>"),59==M&&C.push("</fieldset>")):(S=M+":00",C.push('<span class="minute'+x+'">'+l+":"+(M<10?"0"+M:M)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(C.join(""));var E=this.date.getUTCFullYear(),I=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");E==o&&I.eq(this.date.getUTCMonth()).addClass("active"),(o<d||o>h)&&I.addClass("disabled"),o==d&&I.slice(0,u).addClass("disabled"),o==h&&I.slice(p+1).addClass("disabled"),C="",o=10*parseInt(o/10,10);var P=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var M=-1;M<11;M++)C+='<span class="year'+(M==-1||10==M?" old":"")+(E==o?" active":"")+(o<d||o>h?" disabled":"")+'">'+o+"</span>",o+=1;P.html(C),this.place()}},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth(),n=e.getUTCDate(),r=e.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&r<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&r>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(i){i.stopPropagation(),i.preventDefault();var n=e(i.target).closest("span, td, th, legend");if(1==n.length){if(n.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var o=r.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,o);break;case 1:this.viewDate=this.moveDate(this.viewDate,o);break;case 2:this.viewDate=this.moveMonth(this.viewDate,o);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,o)}this.fill();break;case"today":var s=new Date;s=t(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),0),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(s),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){var a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCDate(),d=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();if(n.is(".month")?(this.viewDate.setUTCDate(1),l=n.parent().find("span").index(n),c=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(t(a,l,c,d,u,h,0))):n.is(".year")?(this.viewDate.setUTCDate(1),a=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(a),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(t(a,l,c,d,u,h,0))):n.is(".hour")?(d=parseInt(n.text(),10)||0,(n.hasClass("hour_am")||n.hasClass("hour_pm"))&&(12==d&&n.hasClass("hour_am")?d=0:12!=d&&n.hasClass("hour_pm")&&(d+=12)),this.viewDate.setUTCHours(d),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(t(a,l,c,d,u,h,0))):n.is(".minute")&&(u=parseInt(n.text().substr(n.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(u),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(t(a,l,c,d,u,h,0))),0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var c=parseInt(n.text(),10)||1,a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),d=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();n.is(".old")?0===l?(l=11,a-=1):l-=1:n.is(".new")&&(11==l?(l=0,a+=1):l+=1),this.viewDate.setUTCDate(c),this.viewDate.setUTCMonth(l),this.viewDate.setUTCFullYear(a),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(t(a,l,c,d,u,h,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(e,t){t&&"date"!=t||(this.date=e),t&&"view"!=t||(this.viewDate=e),this.fill(),this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose&&(!t||"date"==t)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+t*this.minuteStep),i},moveHour:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCHours(i.getUTCHours()+t),i},moveDate:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCDate(i.getUTCDate()+t),i},moveMonth:function(e,t){if(!t)return e;var i,n,r=new Date(e.valueOf()),o=r.getUTCDate(),s=r.getUTCMonth(),a=Math.abs(t);if(t=t>0?1:-1,1==a)n=t==-1?function(){return r.getUTCMonth()==s}:function(){return r.getUTCMonth()!=i},i=s+t,r.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var l=0;l<a;l++)r=this.moveMonth(r,t);i=r.getUTCMonth(),r.setUTCDate(o),n=function(){return i!=r.getUTCMonth()}}for(;n();)r.setUTCDate(--o),r.setUTCMonth(i);return r},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27==e.keyCode&&this.show());var t,i,n,r=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;t=37==e.keyCode?-1:1,viewMode=this.viewMode,e.ctrlKey?viewMode+=2:e.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):3==viewMode?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):2==viewMode?(i=this.moveDate(this.date,t),n=this.moveDate(this.viewDate,t)):1==viewMode?(i=this.moveHour(this.date,t),n=this.moveHour(this.viewDate,t)):0==viewMode&&(i=this.moveMinute(this.date,t),n=this.moveMinute(this.viewDate,t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),r=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;t=38==e.keyCode?-1:1,viewMode=this.viewMode,e.ctrlKey?viewMode+=2:e.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):3==viewMode?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):2==viewMode?(i=this.moveDate(this.date,7*t),n=this.moveDate(this.viewDate,7*t)):1==viewMode?this.showMeridian?(i=this.moveHour(this.date,6*t),n=this.moveHour(this.viewDate,6*t)):(i=this.moveHour(this.date,4*t),n=this.moveHour(this.viewDate,4*t)):0==viewMode&&(i=this.moveMinute(this.date,4*t),n=this.moveMinute(this.viewDate,4*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),r=!0);break;case 13:if(0!=this.viewMode){var o=this.viewMode;this.showMode(-1),this.fill(),o==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();e.preventDefault();break;case 9:this.hide()}if(r){var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(e){if(e){var t=Math.max(0,Math.min(r.modes.length-1,this.viewMode+e));t>=this.minView&&t<=this.maxView&&(this.viewMode=t)}this.picker.find(">div").hide().filter(".datetimepicker-"+r.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(e){this._setDate(null,"date")}},e.fn.datetimepicker=function(t){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var r=e(this),o=r.data("datetimepicker"),s="object"==typeof t&&t;o||r.data("datetimepicker",o=new i(this,e.extend({},e.fn.datetimepicker.defaults,s))),"string"==typeof t&&"function"==typeof o[t]&&o[t].apply(o,n)})},e.fn.datetimepicker.defaults={},e.fn.datetimepicker.Constructor=i;var n=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},r={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,r.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDefaultFormat:function(e,t){if("standard"==e)return"input"==t?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==e)return"input"==t?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(e){if("standard"==e)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==e)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(e,t){var i=e.replace(this.validParts(t),"\0").split("\0"),n=e.match(this.validParts(t));if(!i||!i.length||!n||0==n.length)throw new Error("Invalid date format.");return{separators:i,parts:n}},parseDate:function(r,o,s,a){if(r instanceof Date){var l=new Date(r.valueOf()-6e4*r.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(r)&&(o=this.parseFormat("yyyy-mm-dd",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(r)&&(o=this.parseFormat("yyyy-mm-dd hh:ii",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(r)&&(o=this.parseFormat("yyyy-mm-dd hh:ii:ss",a)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(r)){var c,d,u=/([-+]\d+)([dmwy])/,h=r.match(/([-+]\d+)([dmwy])/g);r=new Date;for(var p=0;p<h.length;p++)switch(c=u.exec(h[p]),d=parseInt(c[1]),c[2]){case"d":r.setUTCDate(r.getUTCDate()+d);break;case"m":r=i.prototype.moveMonth.call(i.prototype,r,d);break;case"w":r.setUTCDate(r.getUTCDate()+7*d);break;case"y":r=i.prototype.moveYear.call(i.prototype,r,d)}return t(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),0)}var f,m,c,h=r&&r.match(this.nonpunctuation)||[],r=new Date(0,0,0,0,0,0,0),g={},v=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],y={hh:function(e,t){return e.setUTCHours(t)},h:function(e,t){return e.setUTCHours(t)},HH:function(e,t){return e.setUTCHours(12==t?0:t)},H:function(e,t){return e.setUTCHours(12==t?0:t)},ii:function(e,t){return e.setUTCMinutes(t)},i:function(e,t){return e.setUTCMinutes(t)},ss:function(e,t){return e.setUTCSeconds(t)},s:function(e,t){return e.setUTCSeconds(t)},yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!=t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)},p:function(e,t){return e.setUTCHours(1==t?e.getUTCHours()+12:e.getUTCHours())}};if(y.M=y.MM=y.mm=y.m,y.dd=y.d,y.P=y.p,r=t(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()),h.length==o.parts.length){for(var p=0,_=o.parts.length;p<_;p++){if(f=parseInt(h[p],10),c=o.parts[p],isNaN(f))switch(c){case"MM":m=e(n[s].months).filter(function(){var e=this.slice(0,h[p].length),t=h[p].slice(0,e.length);return e==t}),f=e.inArray(m[0],n[s].months)+1;break;case"M":m=e(n[s].monthsShort).filter(function(){var e=this.slice(0,h[p].length),t=h[p].slice(0,e.length);return e==t}),f=e.inArray(m[0],n[s].monthsShort)+1;break;case"p":case"P":f=e.inArray(h[p].toLowerCase(),n[s].meridiem)}g[c]=f}for(var b,p=0;p<v.length;p++)b=v[p],b in g&&!isNaN(g[b])&&y[b](r,g[b])}return r},formatDate:function(t,i,o,s){if(null==t)return"";var a;if("standard"==s)a={yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear(),m:t.getUTCMonth()+1,M:n[o].monthsShort[t.getUTCMonth()],MM:n[o].months[t.getUTCMonth()],d:t.getUTCDate(),D:n[o].daysShort[t.getUTCDay()],DD:n[o].days[t.getUTCDay()],p:2==n[o].meridiem.length?n[o].meridiem[t.getUTCHours()<12?0:1]:"",h:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},a.H=a.h%12==0?12:a.h%12,a.HH=(a.H<10?"0":"")+a.H,a.P=a.p.toUpperCase(),a.hh=(a.h<10?"0":"")+a.h,a.ii=(a.i<10?"0":"")+a.i,a.ss=(a.s<10?"0":"")+a.s,a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m;else{if("php"!=s)throw new Error("Invalid format type.");a={y:t.getUTCFullYear().toString().substring(2),Y:t.getUTCFullYear(),F:n[o].months[t.getUTCMonth()],M:n[o].monthsShort[t.getUTCMonth()],n:t.getUTCMonth()+1,t:r.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth()),j:t.getUTCDate(),l:n[o].days[t.getUTCDay()],D:n[o].daysShort[t.getUTCDay()],w:t.getUTCDay(),N:0==t.getUTCDay()?7:t.getUTCDay(),S:t.getUTCDate()%10<=n[o].suffix.length?n[o].suffix[t.getUTCDate()%10-1]:"",a:2==n[o].meridiem.length?n[o].meridiem[t.getUTCHours()<12?0:1]:"",g:t.getUTCHours()%12==0?12:t.getUTCHours()%12,G:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},a.m=(a.n<10?"0":"")+a.n,a.d=(a.j<10?"0":"")+a.j,a.A=a.a.toString().toUpperCase(),a.h=(a.g<10?"0":"")+a.g,a.H=(a.G<10?"0":"")+a.G,a.i=(a.i<10?"0":"")+a.i,a.s=(a.s<10?"0":"")+a.s}for(var t=[],l=e.extend([],i.separators),c=0,d=i.parts.length;c<d;c++)l.length&&t.push(l.shift()),t.push(a[i.parts[c]]);return t.join("")},convertViewMode:function(e){switch(e){case 4:case"decade":e=4;break;case 3:case"year":e=3;break;case 2:case"month":e=2;break;case 1:case"day":e=1;break;case 0:case"hour":e=0}return e},headTemplate:'<thead><tr><th class="prev"><i class="icon-angle-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-angle-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};r.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+r.headTemplate+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table></div></div>",
e.fn.datetimepicker.DPGlobal=r}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.timepicker.defaults,i,this.$element.data()),this.minuteStep=this.options.minuteStep||this.minuteStep,this.secondStep=this.options.secondStep||this.secondStep,this.showMeridian=this.options.showMeridian||this.showMeridian,this.showSeconds=this.options.showSeconds||this.showSeconds,this.showInputs=this.options.showInputs||this.showInputs,this.disableFocus=this.options.disableFocus||this.disableFocus,this.template=this.options.template||this.template,this.modalBackdrop=this.options.modalBackdrop||this.modalBackdrop,this.defaultTime=this.options.defaultTime||this.defaultTime,this.open=!1,this.init()};t.prototype={constructor:t,init:function(){this.$element.parent().hasClass("input-append")?(this.$element.parent(".input-append").find(".add-on").on("click",e.proxy(this.showWidget,this)),this.$element.on({focus:e.proxy(this.highlightUnit,this),click:e.proxy(this.highlightUnit,this),keypress:e.proxy(this.elementKeypress,this),blur:e.proxy(this.blurElement,this)})):this.template?this.$element.on({focus:e.proxy(this.showWidget,this),click:e.proxy(this.showWidget,this),blur:e.proxy(this.blurElement,this)}):this.$element.on({focus:e.proxy(this.highlightUnit,this),click:e.proxy(this.highlightUnit,this),keypress:e.proxy(this.elementKeypress,this),blur:e.proxy(this.blurElement,this)}),this.$widget=e(this.getTemplate()).appendTo("body"),this.$widget.on("click",e.proxy(this.widgetClick,this)),this.showInputs&&this.$widget.find("input").on({click:function(){this.select()},keypress:e.proxy(this.widgetKeypress,this),change:e.proxy(this.updateFromWidgetInputs,this)}),this.setDefaultTime(this.defaultTime)},showWidget:function(t){if(t.stopPropagation(),t.preventDefault(),!this.open){this.$element.trigger("show"),this.disableFocus&&this.$element.blur();var i=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.updateFromElementVal(),e("html").trigger("click.timepicker.data-api").one("click.timepicker.data-api",e.proxy(this.hideWidget,this)),"modal"===this.template?this.$widget.modal("show").on("hidden",e.proxy(this.hideWidget,this)):(this.$widget.css({top:i.top+i.height,left:i.left}),this.open||this.$widget.addClass("open")),this.open=!0,this.$element.trigger("shown")}},hideWidget:function(){this.$element.trigger("hide"),"modal"===this.template?this.$widget.modal("hide"):this.$widget.removeClass("open"),this.open=!1,this.$element.trigger("hidden")},widgetClick:function(t){t.stopPropagation(),t.preventDefault();var i=e(t.target).closest("a").data("action");i&&(this[i](),this.update())},widgetKeypress:function(t){var i=e(t.target).closest("input").attr("name");switch(t.keyCode){case 9:this.showMeridian?"meridian"==i&&this.hideWidget():this.showSeconds?"second"==i&&this.hideWidget():"minute"==i&&this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.update();break;case 40:switch(i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.update()}},elementKeypress:function(e){this.$element.get(0);switch(e.keyCode){case 0:break;case 9:this.updateFromElementVal(),this.showMeridian?"meridian"!=this.highlightedUnit&&(e.preventDefault(),this.highlightNextUnit()):this.showSeconds?"second"!=this.highlightedUnit&&(e.preventDefault(),this.highlightNextUnit()):"minute"!=this.highlightedUnit&&(e.preventDefault(),this.highlightNextUnit());break;case 27:this.updateFromElementVal();break;case 37:this.updateFromElementVal(),this.highlightPrevUnit();break;case 38:switch(this.highlightedUnit){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement();break;case 39:this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(this.highlightedUnit){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement()}0!==e.keyCode&&8!==e.keyCode&&9!==e.keyCode&&46!==e.keyCode&&e.preventDefault()},setValues:function(e){if(this.showMeridian){var t=e.split(" "),i=t[0].split(":");this.meridian=t[1]}else var i=e.split(":");this.hour=parseInt(i[0],10),this.minute=parseInt(i[1],10),this.second=parseInt(i[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?(this.hour>12?this.hour=12:this.hour<1&&(this.hour=1),"am"==this.meridian||"a"==this.meridian?this.meridian="AM":"pm"!=this.meridian&&"p"!=this.meridian||(this.meridian="PM"),"AM"!=this.meridian&&"PM"!=this.meridian&&(this.meridian="AM")):this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0),this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59)),""!=this.$element.val()&&this.updateElement(),this.updateWidget()},setMeridian:function(e){"a"==e||"am"==e||"AM"==e?this.meridian="AM":"p"==e||"pm"==e||"PM"==e?this.meridian="PM":this.updateWidget(),this.updateElement()},setDefaultTime:function(e){if(e){if("current"===e){var t=new Date,i=t.getHours(),n=Math.floor(t.getMinutes()/this.minuteStep)*this.minuteStep,r=Math.floor(t.getSeconds()/this.secondStep)*this.secondStep,o="AM";this.showMeridian&&(0===i?i=12:i>=12?(i>12&&(i-=12),o="PM"):o="AM"),this.hour=i,this.minute=n,this.second=r,this.meridian=o}else"value"===e?this.setValues(this.$element.val()):this.setValues(e);""!=this.$element.val()&&this.updateElement(),this.updateWidget()}else this.hour=0,this.minute=0,this.second=0},formatTime:function(e,t,i,n){return e=e<10?"0"+e:e,t=t<10?"0"+t:t,i=i<10?"0"+i:i,e+":"+t+(this.showSeconds?":"+i:"")+(this.showMeridian?" "+n:"")},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},setTime:function(e){this.setValues(e),this.update()},update:function(){this.updateElement(),this.updateWidget()},blurElement:function(){this.highlightedUnit=void 0,this.updateFromElementVal()},updateElement:function(){var e=this.getTime();switch(this.$element.val(e).change(),this.highlightedUnit){case"hour":this.highlightHour();break;case"minute":this.highlightMinute();break;case"second":this.highlightSecond();break;case"meridian":this.highlightMeridian()}},updateWidget:function(){this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(this.hour<10?"0"+this.hour:this.hour),this.$widget.find("input.bootstrap-timepicker-minute").val(this.minute<10?"0"+this.minute:this.minute),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(this.second<10?"0"+this.second:this.second),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(this.hour),this.$widget.find("span.bootstrap-timepicker-minute").text(this.minute<10?"0"+this.minute:this.minute),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(this.second<10?"0"+this.second:this.second),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))},updateFromElementVal:function(e){var t=this.$element.val();t&&(this.setValues(t),this.updateWidget())},updateFromWidgetInputs:function(){var t=e("input.bootstrap-timepicker-hour",this.$widget).val()+":"+e("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+e("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+e("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setValues(t)},getCursorPosition:function(){var e=this.$element.get(0);if("selectionStart"in e)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange(),i=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-i}},highlightUnit:function(){this.$element.get(0);this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.highlightMeridian();break;case"second":this.highlightMeridian();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){this.highlightedUnit="hour",this.$element.get(0).setSelectionRange(0,2)},highlightMinute:function(){this.highlightedUnit="minute",this.$element.get(0).setSelectionRange(3,5)},highlightSecond:function(){this.highlightedUnit="second",this.$element.get(0).setSelectionRange(6,8)},highlightMeridian:function(){this.highlightedUnit="meridian",this.showSeconds?this.$element.get(0).setSelectionRange(9,11):this.$element.get(0).setSelectionRange(6,8)},incrementHour:function(){if(this.showMeridian)if(11===this.hour)this.toggleMeridian();else if(12===this.hour)return this.hour=1;return 23===this.hour?this.hour=0:void(this.hour=this.hour+1)},decrementHour:function(){if(this.showMeridian){if(1===this.hour)return this.hour=12;12===this.hour&&this.toggleMeridian()}return 0===this.hour?this.hour=23:void(this.hour=this.hour-1)},incrementMinute:function(){var e=this.minute+this.minuteStep-this.minute%this.minuteStep;e>59?(this.incrementHour(),this.minute=e-60):this.minute=e},decrementMinute:function(){var e=this.minute-this.minuteStep;e<0?(this.decrementHour(),this.minute=e+60):this.minute=e},incrementSecond:function(){var e=this.second+this.secondStep-this.second%this.secondStep;e>59?(this.incrementMinute(),this.second=e-60):this.second=e},decrementSecond:function(){var e=this.second-this.secondStep;e<0?(this.decrementMinute(),this.second=e+60):this.second=e},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM",this.update()},getTemplate:function(){if(this.options.templates[this.options.template])return this.options.templates[this.options.template];if(this.showInputs)var e='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>',t='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>',i='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>',n='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>';else var e='<span class="bootstrap-timepicker-hour"></span>',t='<span class="bootstrap-timepicker-minute"></span>',i='<span class="bootstrap-timepicker-second"></span>',n='<span class="bootstrap-timepicker-meridian"></span>';var r,o='<table class="'+(this.showSeconds?"show-seconds":"")+" "+(this.showMeridian?"show-meridian":"")+'"><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+e+'</td> <td class="separator">:</td><td>'+t+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+i+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+n+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr></table>";switch(this.options.template){case"modal":r='<div class="bootstrap-timepicker modal hide fade in" style="top: 30%; margin-top: 0; width: 200px; margin-left: -100px;" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">×</a><h3>Pick a Time</h3></div><div class="modal-content">'+o+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">Ok</a></div></div>';break;case"dropdown":r='<div class="bootstrap-timepicker dropdown-menu">'+o+"</div>"}return r}},e.fn.timepicker=function(i){return this.each(function(){var n=e(this),r=n.data("timepicker"),o="object"==typeof i&&i;r||n.data("timepicker",r=new t(this,o)),"string"==typeof i&&r[i]()})},e.fn.timepicker.defaults={minuteStep:15,secondStep:15,disableFocus:!1,defaultTime:"current",showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",modalBackdrop:!1,templates:{}},e.fn.timepicker.Constructor=t}(window.jQuery),!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.prototype.close=function(t){function i(){n.trigger("closed").remove()}var n,r=e(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),n=e(o),t&&t.preventDefault(),n.length||(n=r.hasClass("alert")?r:r.parent()),n.trigger(t=e.Event("close")),t.isDefaultPrevented()||(n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.on(e.support.transition.end,i):i())};var n=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var n=e(this),r=n.data("alert");r||n.data("alert",r=new i(this)),"string"==typeof t&&r[t].call(n)})},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.alert.data-api",t,i.prototype.close)}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,i)};t.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.data(),r=i.is("input")?"val":"html";e+="Text",n.resetText||i.data("resetText",i[r]()),i[r](n[e]||this.options[e]),setTimeout(function(){"loadingText"==e?i.addClass(t).attr(t,t):i.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=function(i){return this.each(function(){var n=e(this),r=n.data("button"),o="object"==typeof i&&i;r||n.data("button",r=new t(this,o)),"toggle"==i?r.toggle():i&&r.setState(i)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var i=e(t.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var i=this.getActiveIndex(),n=this;if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(t,i){var n,r=this.$element.find(".item.active"),o=i||r[t](),s=this.interval,a="next"==t?"left":"right",l="next"==t?"first":"last",c=this;if(this.sliding=!0,s&&this.pause(),o=o.length?o:this.$element.find(".item")[l](),n=e.Event("slide",{relatedTarget:o[0],direction:a}),!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(c.$indicators.children()[c.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;o.addClass(t),o[0].offsetWidth,r.addClass(a),o.addClass(a),this.$element.one(e.support.transition.end,function(){o.removeClass([t,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}}};var i=e.fn.carousel;e.fn.carousel=function(i){return this.each(function(){var n=e(this),r=n.data("carousel"),o=e.extend({},e.fn.carousel.defaults,"object"==typeof i&&i),s="string"==typeof i?i:o.slide;r||n.data("carousel",r=new t(this,o)),"number"==typeof i?r.to(i):s?r[s]():o.interval&&r.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var i,n,r=e(this),o=e(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},o.data(),r.data());o.carousel(s),(n=r.attr("data-slide-to"))&&o.data("carousel").pause().to(n).cycle(),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,i),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,i,n,r;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),i=e.camelCase(["scroll",t].join("-")),n=this.$parent&&this.$parent.find("> .accordion-group > .in"),n&&n.length){if(r=n.data("collapse"),r&&r.transitioning)return;n.collapse("hide"),r||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][i])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,n){var r=this,o=function(){"show"==i.type&&r.reset(),r.transitioning=0,r.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=e.fn.collapse;e.fn.collapse=function(i){return this.each(function(){var n=e(this),r=n.data("collapse"),o=e.extend({},e.fn.collapse.defaults,n.data(),"object"==typeof i&&i);r||n.data("collapse",r=new t(this,o)),"string"==typeof i&&r[i]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i,n=e(this),r=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),o=e(r).data("collapse")?"toggle":n.data();n[e(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(r).collapse(o)})}(window.jQuery),!function(e){"use strict";function t(){e(n).each(function(){i(e(this)).removeClass("open")})}function i(t){var i,n=t.attr("data-target");return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),i=n&&e(n),i&&i.length||(i=t.parent()),i}var n="[data-toggle=dropdown]",r=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(n){var r,o,s=e(this);if(!s.is(".disabled, :disabled"))return r=i(s),o=r.hasClass("open"),t(),o||r.toggleClass("open"),s.focus(),!1},keydown:function(t){var r,o,s,a,l;if(/(38|40|27)/.test(t.keyCode)&&(r=e(this),t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled"))){if(s=i(r),a=s.hasClass("open"),!a||a&&27==t.keyCode)return 27==t.which&&s.find(n).focus(),r.click();o=e("[role=menu] li:not(.divider):visible a",s),o.length&&(l=o.index(o.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<o.length-1&&l++,~l||(l=0),o.eq(l).focus())}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),n=i.data("dropdown");n||i.data("dropdown",n=new r(this)),"string"==typeof t&&n[t].call(i)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",n,r.prototype.toggle).on("keydown.dropdown.data-api",n+", [role=menu]",r.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.options=i,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=e.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),i?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var i=e.fn.modal;e.fn.modal=function(i){return this.each(function(){var n=e(this),r=n.data("modal"),o=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof i&&i);r||n.data("modal",r=new t(this,o)),"string"==typeof i?r[i]():o.show&&r.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),n=i.attr("href"),r=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},r.data(),i.data());t.preventDefault(),r.modal(o).one("hide",function(){i.focus()})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var r,o,s,a,l;for(this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,s=this.options.trigger.split(" "),l=s.length;l--;)a=s[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(r="hover"==a?"mouseenter":"focus",o="hover"==a?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i,n=e.fn[this.type].defaults,r={};return this._options&&e.each(this._options,function(e,t){n[e]!=t&&(r[e]=t)},this),i=e(t.currentTarget)[this.type](r).data(this.type),i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",void(this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide))):i.hide()},show:function(){var t,i,n,r,o,s,a=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),i=this.getPosition(),n=t[0].offsetWidth,r=t[0].offsetHeight,o){case"bottom":s={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":s={top:i.top-r,left:i.left+i.width/2-n/2};break;case"left":s={top:i.top+i.height/2-r/2,left:i.left-n};break;case"right":s={top:i.top+i.height/2-r/2,left:i.left+i.width}}this.applyPlacement(s,o),this.$element.trigger("shown")}},applyPlacement:function(e,t){var i,n,r,o,s=this.tip(),a=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(e).addClass(t).addClass("in"),i=s[0].offsetWidth,n=s[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,o=!0),"bottom"==t||"top"==t?(r=0,e.left<0&&(r=e.left*-2,e.left=0,s.offset(e),i=s[0].offsetWidth,n=s[0].offsetHeight),this.replaceArrow(r-a+i,i,"left")):this.replaceArrow(n-l,n,"top"),o&&s.offset(e)},replaceArrow:function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip(),n=e.Event("hide");if(this.$element.trigger(n),!n.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var n=e(this),r=n.data("tooltip"),o="object"==typeof i&&i;r||n.data("tooltip",r=new t(this,o)),"string"==typeof i&&r[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](i),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,i=this.options;return e=("function"==typeof i.content?i.content.call(t[0]):i.content)||t.attr("data-content");
},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var n=e(this),r=n.data("popover"),o="object"==typeof i&&i;r||n.data("popover",r=new t(this,o)),"string"==typeof i&&r[i]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(window.jQuery),!function(e){"use strict";function t(t,i){var n,r=e.proxy(this.process,this),o=e(e(t).is("body")?window:t);this.options=e.extend({},e.fn.scrollspy.defaults,i),this.$scrollElement=o.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(n=e(t).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,i=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),r=/^#\w/.test(n)&&e(n);return r&&r.length&&[[r.position().top+(!e.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(t>=n)return s!=(e=o.last()[0])&&this.activate(e);for(e=r.length;e--;)s!=o[e]&&t>=r[e]&&(!r[e+1]||t<=r[e+1])&&this.activate(o[e])},activate:function(t){var i,n;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=e.fn.scrollspy;e.fn.scrollspy=function(i){return this.each(function(){var n=e(this),r=n.data("scrollspy"),o="object"==typeof i&&i;r||n.data("scrollspy",r=new t(this,o)),"string"==typeof i&&r[i]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n,r=this.element,o=r.closest("ul:not(.dropdown-menu)"),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(t=o.find(".active:last a")[0],n=e.Event("show",{relatedTarget:t}),r.trigger(n),n.isDefaultPrevented()||(i=e(s),this.activate(r.parent("li"),o),this.activate(i,i.parent(),function(){r.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,i,n){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),s=n&&e.support.transition&&o.hasClass("fade");s?o.one(e.support.transition.end,r):r(),o.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each(function(){var n=e(this),r=n.data("tab");r||n.data("tab",r=new t(this)),"string"==typeof i&&r[i]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var i;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(i=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,i?this.process(i):this)},process:function(t){var i=this;return t=e.grep(t,function(e){return i.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,i=[],n=[],r=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?n.push(t):r.push(t):i.push(t);return i.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var i=this;return t=e(t).map(function(t,n){return t=e(i.options.item).attr("data-value",n),t.find("a").html(i.highlighter(n)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var i=this.$menu.find(".active").removeClass("active"),n=i.next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),i=t.prev();i.length||(i=this.$menu.find("li").last()),i.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var i=e.fn.typeahead;e.fn.typeahead=function(i){return this.each(function(){var n=e(this),r=n.data("typeahead"),o="object"==typeof i&&i;r||n.data("typeahead",r=new t(this,o)),"string"==typeof i&&r[i]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var i=e(this);i.data("typeahead")||i.typeahead(i.data())})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.options=e.extend({},e.fn.affix.defaults,i),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,i=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),o=this.options.offset,s=o.bottom,a=o.top,l="affix affix-top affix-bottom";"object"!=typeof o&&(s=a=o),"function"==typeof a&&(a=o.top()),"function"==typeof s&&(s=o.bottom()),t=!(null!=this.unpin&&n+this.unpin<=r.top)&&(null!=s&&r.top+this.$element.height()>=i-s?"bottom":null!=a&&n<=a&&"top"),this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?r.top-n:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}};var i=e.fn.affix;e.fn.affix=function(i){return this.each(function(){var n=e(this),r=n.data("affix"),o="object"==typeof i&&i;r||n.data("affix",r=new t(this,o)),"string"==typeof i&&r[i]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),i=t.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.affix(i)})})}(window.jQuery),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var e=Date,t=e.prototype,i=e.CultureInfo,n=function(e,t){return t||(t=2),("000"+e).slice(t*-1)};t.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},t.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},e.today=function(){return(new Date).clearTime()},e.compare=function(e,t){if(isNaN(e)||isNaN(t))throw new Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return e<t?-1:e>t?1:0;throw new TypeError(e+" - "+t)},e.equals=function(e,t){return 0===e.compareTo(t)},e.getDayNumberFromName=function(e){for(var t=i.dayNames,n=i.abbreviatedDayNames,r=i.shortestDayNames,o=e.toLowerCase(),s=0;s<t.length;s++)if(t[s].toLowerCase()==o||n[s].toLowerCase()==o||r[s].toLowerCase()==o)return s;return-1},e.getMonthNumberFromName=function(e){for(var t=i.monthNames,n=i.abbreviatedMonthNames,r=e.toLowerCase(),o=0;o<t.length;o++)if(t[o].toLowerCase()==r||n[o].toLowerCase()==r)return o;return-1},e.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},e.getDaysInMonth=function(t,i){return[31,e.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][i]},e.getTimezoneAbbreviation=function(e){for(var t=i.timezones,n=0;n<t.length;n++)if(t[n].offset===e)return t[n].name;return null},e.getTimezoneOffset=function(e){for(var t=i.timezones,n=0;n<t.length;n++)if(t[n].name===e.toUpperCase())return t[n].offset;return null},t.clone=function(){return new Date(this.getTime())},t.compareTo=function(e){return Date.compare(this,e)},t.equals=function(e){return Date.equals(this,e||new Date)},t.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},t.isAfter=function(e){return 1===this.compareTo(e||new Date)},t.isBefore=function(e){return this.compareTo(e||new Date)===-1},t.isToday=function(){return this.isSameDay(new Date)},t.isSameDay=function(e){return this.clone().clearTime().equals(e.clone().clearTime())},t.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},t.addSeconds=function(e){return this.addMilliseconds(1e3*e)},t.addMinutes=function(e){return this.addMilliseconds(6e4*e)},t.addHours=function(e){return this.addMilliseconds(36e5*e)},t.addDays=function(e){return this.setDate(this.getDate()+e),this},t.addWeeks=function(e){return this.addDays(7*e)},t.addMonths=function(t){var i=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(i,e.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},t.addYears=function(e){return this.addMonths(12*e)},t.add=function(e){if("number"==typeof e)return this._orient=e,this;var t=e;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};var r,o,s;t.getWeek=function(){var e,t,i,n,a,l,c,d,u,h;return r=r?r:this.getFullYear(),o=o?o:this.getMonth()+1,s=s?s:this.getDate(),o<=2?(e=r-1,t=(e/4|0)-(e/100|0)+(e/400|0),i=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),u=t-i,a=0,l=s-1+31*(o-1)):(e=r,t=(e/4|0)-(e/100|0)+(e/400|0),i=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),u=t-i,a=u+1,l=s+(153*(o-3)+2)/5+58+u),c=(e+t)%7,n=(l+c-a)%7,d=l+3-n|0,h=d<0?53-((c-u)/5|0):d>364+u?1:(d/7|0)+1,r=o=s=null,h},t.getISOWeek=function(){return r=this.getUTCFullYear(),o=this.getUTCMonth()+1,s=this.getUTCDate(),n(this.getWeek())},t.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())},e._validate=function(e,t,i,n){if("undefined"==typeof e)return!1;if("number"!=typeof e)throw new TypeError(e+" is not a Number.");if(e<t||e>i)throw new RangeError(e+" is not a valid value for "+n+".");return!0},e.validateMillisecond=function(t){return e._validate(t,0,999,"millisecond")},e.validateSecond=function(t){return e._validate(t,0,59,"second")},e.validateMinute=function(t){return e._validate(t,0,59,"minute")},e.validateHour=function(t){return e._validate(t,0,23,"hour")},e.validateDay=function(t,i,n){return e._validate(t,1,e.getDaysInMonth(i,n),"day")},e.validateMonth=function(t){return e._validate(t,0,11,"month")},e.validateYear=function(t){return e._validate(t,0,9999,"year")},t.set=function(t){return e.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),e.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),e.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),e.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),e.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),e.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),e.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),t.week&&e._validate(t.week,0,53,"week")&&this.setWeek(t.week),this},t.moveToFirstDayOfMonth=function(){return this.set({day:1})},t.moveToLastDayOfMonth=function(){return this.set({day:e.getDaysInMonth(this.getFullYear(),this.getMonth())})},t.moveToNthOccurrence=function(e,t){var i=0;if(t>0)i=t-1;else if(t===-1)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(i)},t.moveToDayOfWeek=function(e,t){var i=(e-this.getDay()+7*(t||1))%7;return this.addDays(0===i?i+=7*(t||1):i)},t.moveToMonth=function(e,t){var i=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(0===i?i+=12*(t||1):i)},t.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},t.getTimezone=function(){return e.getTimezoneAbbreviation(this.getUTCOffset())},t.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),i=Number(e)*-6/10;return this.addMinutes(i-t)},t.setTimezone=function(t){return this.setTimezoneOffset(e.getTimezoneOffset(t))},t.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},t.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},t.getUTCOffset=function(){var e,t=this.getTimezoneOffset()*-10/6;return t<0?(e=(t-1e4).toString(),e.charAt(0)+e.substr(2)):(e=(t+1e4).toString(),"+"+e.substr(1))},t.getElapsed=function(e){return(e||new Date)-this},t.toISOString||(t.toISOString=function(){function e(e){return e<10?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),t._toString=t.toString,t.toString=function(e){var t=this;if(e&&1==e.length){var r=i.formatPatterns;switch(t.t=t.toString,e){case"d":return t.t(r.shortDate);case"D":return t.t(r.longDate);case"F":return t.t(r.fullDateTime);case"m":return t.t(r.monthDay);case"r":return t.t(r.rfc1123);case"s":return t.t(r.sortableDateTime);case"t":return t.t(r.shortTime);case"T":return t.t(r.longTime);case"u":return t.t(r.universalSortableDateTime);case"y":return t.t(r.yearMonth)}}var o=function(e){switch(1*e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if("\\"===e.charAt(0))return e.replace("\\","");switch(t.h=t.getHours,e){case"hh":return n(t.h()<13?0===t.h()?12:t.h():t.h()-12);case"h":return t.h()<13?0===t.h()?12:t.h():t.h()-12;case"HH":return n(t.h());case"H":return t.h();case"mm":return n(t.getMinutes());case"m":return t.getMinutes();case"ss":return n(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return n(t.getFullYear(),4);case"yy":return n(t.getFullYear());case"dddd":return i.dayNames[t.getDay()];case"ddd":return i.abbreviatedDayNames[t.getDay()];case"dd":return n(t.getDate());case"d":return t.getDate();case"MMMM":return i.monthNames[t.getMonth()];case"MMM":return i.abbreviatedMonthNames[t.getMonth()];case"MM":return n(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.h()<12?i.amDesignator.substring(0,1):i.pmDesignator.substring(0,1);case"tt":return t.h()<12?i.amDesignator:i.pmDesignator;case"S":return o(t.getDate());default:return e}}):this._toString()}}(),function(){var e=Date,t=e.prototype,i=e.CultureInfo,n=Number.prototype;t._orient=1,t._nth=null,t._is=!1,t._same=!1,t._isSecond=!1,n._dateElement="day",t.next=function(){return this._orient=1,this},e.next=function(){return e.today().next()},t.last=t.prev=t.previous=function(){return this._orient=-1,this},e.last=e.prev=e.previous=function(){return e.today().last()},t.is=function(){return this._is=!0,this},t.same=function(){return this._same=!0,this._isSecond=!1,this},t.today=function(){return this.same().day()},t.weekday=function(){return!!this._is&&(this._is=!1,!this.is().sat()&&!this.is().sun())},t.at=function(t){return"string"==typeof t?e.parse(this.toString("d")+" "+t):this.set(t)},n.fromNow=n.after=function(e){var t={};return t[this._dateElement]=this,(e?e.clone():new Date).add(t)},n.ago=n.before=function(e){var t={};return t[this._dateElement]=this*-1,(e?e.clone():new Date).add(t)};var r,o="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),s="january february march april may june july august september october november december".split(/\s/),a="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),l="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),c="final first second third fourth fifth".split(/\s/);t.toObject=function(){for(var e={},t=0;t<a.length;t++)e[a[t].toLowerCase()]=this["get"+l[t]]();return e},e.fromObject=function(e){return e.week=null,Date.today().set(e)};for(var d=function(t){return function(){if(this._is)return this._is=!1,this.getDay()==t;if(null!==this._nth){this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1;var i=this._nth;this._nth=null;var n=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(t,i),this>n)throw new RangeError(e.getDayName(t)+" does not occur "+i+" times in the month of "+e.getMonthName(n.getMonth())+" "+n.getFullYear()+".");return this}return this.moveToDayOfWeek(t,this._orient)}},u=function(t){return function(){var n=e.today(),r=t-n.getDay();return 0===t&&1===i.firstDayOfWeek&&0!==n.getDay()&&(r+=7),n.addDays(r)}},h=0;h<o.length;h++)e[o[h].toUpperCase()]=e[o[h].toUpperCase().substring(0,3)]=h,e[o[h]]=e[o[h].substring(0,3)]=u(h),t[o[h]]=t[o[h].substring(0,3)]=d(h);for(var p=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}},f=function(t){return function(){return e.today().set({month:t,day:1})}},m=0;m<s.length;m++)e[s[m].toUpperCase()]=e[s[m].toUpperCase().substring(0,3)]=m,e[s[m]]=e[s[m].substring(0,3)]=f(m),t[s[m]]=t[s[m].substring(0,3)]=p(m);for(var g=function(e){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var t=this.toObject(),i=(arguments[0]||new Date).toObject(),n="",r=e.toLowerCase(),o=a.length-1;o>-1;o--){if(n=a[o].toLowerCase(),t[n]!=i[n])return!1;if(r==n)break}return!0}return"s"!=e.substring(e.length-1)&&(e+="s"),this["add"+e](this._orient)}},v=function(e){return function(){return this._dateElement=e,this}},y=0;y<a.length;y++)r=a[y].toLowerCase(),t[r]=t[r+"s"]=g(a[y]),n[r]=n[r+"s"]=v(r);t._ss=g("Second");for(var _=function(e){return function(t){return this._same?this._ss(arguments[0]):t||0===t?this.moveToNthOccurrence(t,e):(this._nth=e,2!==e||void 0!==t&&null!==t?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},b=0;b<c.length;b++)t[c[b]]=_(0===b?-1:b)}(),function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};for(var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(i){var n=i.match(t);if(n)return[n[0],i.substring(n[0].length)];throw new e.Exception(i)}},token:function(e){return function(e){return t.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(new RegExp("^"+e))},until:function(e){return function(t){for(var i=[],n=null;t.length;){try{n=e.call(this,t)}catch(e){i.push(n[0]),t=n[1];continue}break}return[i,t]}},many:function(e){return function(t){for(var i=[],n=null;t.length;){try{n=e.call(this,t)}catch(e){return[i,t]}i.push(n[0]),t=n[1]}return[i,t]}},optional:function(e){return function(t){var i=null;try{i=e.call(this,t)}catch(e){return[null,t]}return[i[0],i[1]]}},not:function(t){return function(i){try{t.call(this,i)}catch(e){return[null,i]}throw new e.Exception(i)}},ignore:function(e){return e?function(t){var i=null;return i=e.call(this,t),[null,i[1]]}:null},product:function(){for(var e=arguments[0],i=Array.prototype.slice.call(arguments,1),n=[],r=0;r<e.length;r++)n.push(t.each(e[r],i));return n},cache:function(t){var i={},n=null;return function(r){try{n=i[r]=i[r]||t.call(this,r)}catch(e){n=i[r]=e}if(n instanceof e.Exception)throw n;return n}},any:function(){var t=arguments;return function(i){for(var n=null,r=0;r<t.length;r++)if(null!=t[r]){try{n=t[r].call(this,i)}catch(e){n=null}if(n)return n}throw new e.Exception(i)}},each:function(){var t=arguments;return function(i){for(var n=[],r=null,o=0;o<t.length;o++)if(null!=t[o]){try{r=t[o].call(this,i)}catch(t){throw new e.Exception(i)}n.push(r[0]),i=r[1]}return[n,i]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(i,n,r){return n=n||t.rtoken(/^\s*/),r=r||null,1==i.length?i[0]:function(t){for(var o=null,s=null,a=[],l=0;l<i.length;l++){try{o=i[l].call(this,t)}catch(e){break}a.push(o[0]);try{s=n.call(this,o[1])}catch(e){s=null;break}t=s[1]}if(!o)throw new e.Exception(t);if(s)throw new e.Exception(s[1]);if(r)try{o=r.call(this,o[1])}catch(t){throw new e.Exception(o[1])}return[a,o?o[1]:t]}},between:function(e,i,n){n=n||e;var o=t.each(t.ignore(e),i,t.ignore(n));return function(e){var t=o.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,i,n){return i=i||t.rtoken(/^\s*/),n=n||null,e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(i)),e.slice(-1),t.ignore(n)):t.each(t.many(t.each(e,t.ignore(i))),px,t.ignore(n))},set:function(i,n,r){return n=n||t.rtoken(/^\s*/),r=r||null,function(o){for(var s=null,a=null,l=null,c=null,d=[[],o],u=!1,h=0;h<i.length;h++){l=null,a=null,s=null,u=1==i.length;try{s=i[h].call(this,o)}catch(e){continue}if(c=[[s[0]],s[1]],s[1].length>0&&!u)try{l=n.call(this,s[1])}catch(e){u=!0}else u=!0;if(u||0!==l[1].length||(u=!0),!u){for(var p=[],f=0;f<i.length;f++)h!=f&&p.push(i[f]);a=t.set(p,n).call(this,l[1]),a[0].length>0&&(c[0]=c[0].concat(a[0]),c[1]=a[1])}if(c[1].length<d[1].length&&(d=c),0===d[1].length)break}if(0===d[0].length)return d;if(r){try{l=r.call(this,d[1])}catch(t){throw new e.Exception(d[1])}d[1]=l[1]}return d}},forward:function(e,t){return function(i){return e[t].call(this,i)}},replace:function(e,t){return function(i){var n=e.call(this,i);return[t,n[1]]}},process:function(e,t){return function(i){var n=e.call(this,i);return[t.call(this,n[0]),n[1]]}},min:function(t,i){return function(n){var r=i.call(this,n);if(r[0].length<t)throw new e.Exception(n);return r}}},i=function(e){return function(){var t=null,i=[];if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),!t)return e.apply(null,arguments);for(var n=0,r=t.shift();n<r.length;n++)return t.unshift(r[n]),i.push(e.apply(null,t)),t.shift(),i}},n="optional not ignore cache".split(/\s/),o=0;o<n.length;o++)t[n[o]]=i(t[n[o]]);for(var s=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},a="each any all".split(/\s/),l=0;l<a.length;l++)t[a[l]]=s(t[a[l]])}(),function(){var e=Date,t=(e.prototype,e.CultureInfo),i=function(e){for(var t=[],n=0;n<e.length;n++)e[n]instanceof Array?t=t.concat(i(e[n])):e[n]&&t.push(e[n]);return t};e.Grammar={},e.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=3==e.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(e){return function(){var i=Number(e);this.year=e.length>2?i:i+(i+2e3<t.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];for(var i=0;i<t.length;i++)t[i]&&t[i].call(this);var n=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=n.getDate()),this.year||(this.year=n.getFullYear()),this.month||0===this.month||(this.month=n.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(t){if(t=t instanceof Array?i(t):[t],0===t.length)return null;for(var n=0;n<t.length;n++)"function"==typeof t[n]&&t[n].call(this);var r=e.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(r=new Date);var o,s,a,l=!!(this.days&&null!==this.days||this.orient||this.operator);if(a="past"==this.orient||"subtract"==this.operator?-1:1,this.now||"hour minute second".indexOf(this.unit)==-1||r.setTimeToNow(),(this.month||0===this.month)&&"year day hour minute second".indexOf(this.unit)!=-1&&(this.value=this.month+1,this.month=null,l=!0),!l&&this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),this.month||(this.month=c.getMonth()),this.year=c.getFullYear()}if(l&&this.weekday&&"month"!=this.unit&&(this.unit="day",o=e.getDayNumberFromName(this.weekday)-r.getDay(),s=7,this.days=o?(o+a*s)%s:a*s),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(r.set({day:1*this.value}),l||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,l=!0),l&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",o=this.month-r.getMonth(),s=12,this.months=o?(o+a*s)%s:a*s,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*a:null!=this[this.unit+"s"]&&null==this.operator||(this.value||(this.value=1),this[this.unit+"s"]=this.value*a),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),c.getMonth()!==r.getMonth()&&(this.month=c.getMonth());
}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(l&&this.timezone&&this.day&&this.days&&(this.day=this.days),l?r.add(this):r.set(this)):Date.today().setWeek(this.value)}};var n,r=e.Parsing.Operators,o=e.Grammar,s=e.Translator;o.datePartDelimiter=r.rtoken(/^([\s\-\.\,\/\x27]+)/),o.timePartDelimiter=r.stoken(":"),o.whiteSpace=r.rtoken(/^\s*/),o.generalDelimiter=r.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};o.ctoken=function(e){var i=a[e];if(!i){for(var n=t.regexPatterns,o=e.split(/\s+/),s=[],l=0;l<o.length;l++)s.push(r.replace(r.rtoken(n[o[l]]),o[l]));i=a[e]=r.any.apply(null,s)}return i},o.ctoken2=function(e){return r.rtoken(t.regexPatterns[e])},o.h=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),s.hour)),o.hh=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2])/),s.hour)),o.H=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),s.hour)),o.HH=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3])/),s.hour)),o.m=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),s.minute)),o.mm=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),s.minute)),o.s=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),s.second)),o.ss=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),s.second)),o.hms=r.cache(r.sequence([o.H,o.m,o.s],o.timePartDelimiter)),o.t=r.cache(r.process(o.ctoken2("shortMeridian"),s.meridian)),o.tt=r.cache(r.process(o.ctoken2("longMeridian"),s.meridian)),o.z=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),s.timezone)),o.zz=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),s.timezone)),o.zzz=r.cache(r.process(o.ctoken2("timezone"),s.timezone)),o.timeSuffix=r.each(r.ignore(o.whiteSpace),r.set([o.tt,o.zzz])),o.time=r.each(r.optional(r.ignore(r.stoken("T"))),o.hms,o.timeSuffix),o.d=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1]|\d)/),r.optional(o.ctoken2("ordinalSuffix"))),s.day)),o.dd=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1])/),r.optional(o.ctoken2("ordinalSuffix"))),s.day)),o.ddd=o.dddd=r.cache(r.process(o.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),o.M=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d|\d)/),s.month)),o.MM=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d)/),s.month)),o.MMM=o.MMMM=r.cache(r.process(o.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),s.month)),o.y=r.cache(r.process(r.rtoken(/^(\d\d?)/),s.year)),o.yy=r.cache(r.process(r.rtoken(/^(\d\d)/),s.year)),o.yyy=r.cache(r.process(r.rtoken(/^(\d\d?\d?\d?)/),s.year)),o.yyyy=r.cache(r.process(r.rtoken(/^(\d\d\d\d)/),s.year)),n=function(){return r.each(r.any.apply(null,arguments),r.not(o.ctoken2("timeContext")))},o.day=n(o.d,o.dd),o.month=n(o.M,o.MMM),o.year=n(o.yyyy,o.yy),o.orientation=r.process(o.ctoken("past future"),function(e){return function(){this.orient=e}}),o.operator=r.process(o.ctoken("add subtract"),function(e){return function(){this.operator=e}}),o.rday=r.process(o.ctoken("yesterday tomorrow today now"),s.rday),o.unit=r.process(o.ctoken("second minute hour day week month year"),function(e){return function(){this.unit=e}}),o.value=r.process(r.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),o.expression=r.set([o.rday,o.operator,o.value,o.unit,o.orientation,o.ddd,o.MMM]),n=function(){return r.set(arguments,o.datePartDelimiter)},o.mdy=n(o.ddd,o.month,o.day,o.year),o.ymd=n(o.ddd,o.year,o.month,o.day),o.dmy=n(o.ddd,o.day,o.month,o.year),o.date=function(e){return(o[t.dateElementOrder]||o.mdy).call(this,e)},o.format=r.process(r.many(r.any(r.process(r.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(o[t])return o[t];throw e.Parsing.Exception(t)}),r.process(r.rtoken(/^[^dMyhHmstz]+/),function(e){return r.ignore(r.stoken(e))}))),function(e){return r.process(r.each.apply(null,e),s.finishExact)});var l={},c=function(e){return l[e]=l[e]||o.format(e)[0]};o.formats=function(e){if(e instanceof Array){for(var t=[],i=0;i<e.length;i++)t.push(c(e[i]));return r.any.apply(null,t)}return c(e)},o._formats=o.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),o._start=r.process(r.set([o.date,o.time,o.expression],o.generalDelimiter,o.whiteSpace),s.finish),o.start=function(e){try{var t=o._formats.call({},e);if(0===t[1].length)return t}catch(e){}return o._start.call({},e)},e._parse=e.parse,e.parse=function(t){var i=null;if(!t)return null;if(t instanceof Date)return t;try{i=e.Grammar.start.call({},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(e){return null}return 0===i[1].length?i[0]:null},e.getParseFunction=function(t){var i=e.Grammar.formats(t);return function(e){var t=null;try{t=i.call({},e)}catch(e){return null}return 0===t[1].length?t[0]:null}},e.parseExact=function(t,i){return e.getParseFunction(i)(t)}}(),!function(e){var t=function(t,i,n){var r,o="object"==typeof i;this.startDate=Date.today(),this.endDate=Date.today(),this.minDate=!1,this.maxDate=!1,this.changed=!1,this.ranges={},this.opens="right",this.cb=function(){},this.format="MM/dd/yyyy",this.separator=" - ",this.showWeekNumbers=!1,this.buttonClasses=["btn-success"],this.locale={applyLabel:"Apply",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:Date.CultureInfo.shortestDayNames,monthNames:Date.CultureInfo.monthNames,firstDay:0},r=this.locale,this.leftCalendar={month:Date.today().set({day:1,month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),calendar:Array()},this.rightCalendar={month:Date.today().set({day:1,month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),calendar:Array()},this.parentEl="body",this.element=e(t),this.element.hasClass("pull-right")&&(this.opens="left"),this.element.is("input")?this.element.on({click:e.proxy(this.show,this),focus:e.proxy(this.show,this)}):this.element.on("click",e.proxy(this.show,this)),o&&"object"==typeof i.locale&&e.each(r,function(e,t){r[e]=i.locale[e]||t});var s='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div><label for="daterangepicker_start">'+this.locale.fromLabel+'</label><input class="m-wrap input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div><label for="daterangepicker_end">'+this.locale.toLabel+'</label><input class="m-wrap input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="btn " disabled="disabled">'+this.locale.applyLabel+"</button></div></div></div>";if(this.parentEl=o&&i.parentEl&&e(i.parentEl)||e(this.parentEl),this.container=e(s).appendTo(this.parentEl),o){if("string"==typeof i.format&&(this.format=i.format),"string"==typeof i.separator&&(this.separator=i.separator),"string"==typeof i.startDate&&(this.startDate=Date.parse(i.startDate,this.format)),"string"==typeof i.endDate&&(this.endDate=Date.parse(i.endDate,this.format)),"string"==typeof i.minDate&&(this.minDate=Date.parse(i.minDate,this.format)),"string"==typeof i.maxDate&&(this.maxDate=Date.parse(i.maxDate,this.format)),"object"==typeof i.startDate&&(this.startDate=i.startDate),"object"==typeof i.endDate&&(this.endDate=i.endDate),"object"==typeof i.minDate&&(this.minDate=i.minDate),"object"==typeof i.maxDate&&(this.maxDate=i.maxDate),"object"==typeof i.ranges){for(var a in i.ranges){var l=i.ranges[a][0],c=i.ranges[a][1];"string"==typeof l&&(l=Date.parse(l)),"string"==typeof c&&(c=Date.parse(c)),this.minDate&&l<this.minDate&&(l=this.minDate),this.maxDate&&c>this.maxDate&&(c=this.maxDate),this.minDate&&c<this.minDate||this.maxDate&&l>this.maxDate||(this.ranges[a]=[l,c])}var d="<ul>";for(var a in this.ranges)d+="<li>"+a+"</li>";d+="<li>"+this.locale.customRangeLabel+"</li>",d+="</ul>",this.container.find(".ranges").prepend(d)}if("object"==typeof i.locale&&"number"==typeof i.locale.firstDay){this.locale.firstDay=i.locale.firstDay;for(var u=i.locale.firstDay;u>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),u--}"string"==typeof i.opens&&(this.opens=i.opens),"boolean"==typeof i.showWeekNumbers&&(this.showWeekNumbers=i.showWeekNumbers),"string"==typeof i.buttonClasses&&(this.buttonClasses=[i.buttonClasses]),"object"==typeof i.buttonClasses&&(this.buttonClasses=i.buttonClasses)}var h=this.container;if(e.each(this.buttonClasses,function(e,t){h.find("button").addClass(t)}),"right"==this.opens){var p=this.container.find(".calendar.left"),f=this.container.find(".calendar.right");p.removeClass("left").addClass("right"),f.removeClass("right").addClass("left")}"undefined"!=typeof i&&"undefined"!=typeof i.ranges||this.container.find(".calendar").show(),"function"==typeof n&&(this.cb=n),this.container.addClass("opens"+this.opens),this.container.on("mousedown",e.proxy(this.mousedown,this)),this.container.find(".calendar").on("click",".prev",e.proxy(this.clickPrev,this)),this.container.find(".calendar").on("click",".next",e.proxy(this.clickNext,this)),this.container.find(".ranges").on("click","button",e.proxy(this.clickApply,this)),this.container.find(".calendar").on("click","td.available",e.proxy(this.clickDate,this)),this.container.find(".calendar").on("mouseenter","td.available",e.proxy(this.enterDate,this)),this.container.find(".calendar").on("mouseleave","td.available",e.proxy(this.updateView,this)),this.container.find(".ranges").on("click","li",e.proxy(this.clickRange,this)),this.container.find(".ranges").on("mouseenter","li",e.proxy(this.enterRange,this)),this.container.find(".ranges").on("mouseleave","li",e.proxy(this.updateView,this)),this.element.on("keyup",e.proxy(this.updateFromControl,this)),this.updateView(),this.updateCalendars()};t.prototype={constructor:t,mousedown:function(e){e.stopPropagation(),e.preventDefault()},updateView:function(){this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),this.container.find("input[name=daterangepicker_start]").val(this.startDate.toString(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.toString(this.format)),this.startDate.equals(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button").removeAttr("disabled"):this.container.find("button").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")){var e=this.element.val().split(this.separator),t=Date.parseExact(e[0],this.format),i=Date.parseExact(e[1],this.format);null!=t&&null!=i&&(i.isBefore(t)||(this.startDate=t,this.endDate=i,this.updateView(),this.cb(this.startDate,this.endDate),this.updateCalendars()))}},notify:function(){this.updateView(),this.element.is("input")&&this.element.val(this.startDate.toString(this.format)+this.separator+this.endDate.toString(this.format)),this.cb(this.startDate,this.endDate)},move:function(){var t={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()};"left"==this.opens?this.container.css({top:this.element.offset().top+this.element.outerHeight(),right:e(window).width()-this.element.offset().left-this.element.outerWidth()-t.left,left:"auto"}):this.container.css({top:this.element.offset().top+this.element.outerHeight(),left:this.element.offset().left-t.left,right:"auto"})},show:function(t){this.container.show(),this.move(),t&&(t.stopPropagation(),t.preventDefault()),this.changed=!1,e(document).on("mousedown",e.proxy(this.hide,this))},hide:function(t){this.container.hide(),e(document).off("mousedown",this.hide),this.changed&&(this.changed=!1,this.notify())},enterRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.updateView();else{var i=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(i[0].toString(this.format)),this.container.find("input[name=daterangepicker_end]").val(i[1].toString(this.format))}},clickRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.container.find(".calendar").show();else{var i=this.ranges[t];this.startDate=i[0],this.endDate=i[1],this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),this.updateCalendars(),this.changed=!0,this.container.find(".calendar").hide(),this.hide()}},clickPrev:function(t){var i=e(t.target).parents(".calendar");i.hasClass("left")?this.leftCalendar.month.add({months:-1}):this.rightCalendar.month.add({months:-1}),this.updateCalendars()},clickNext:function(t){var i=e(t.target).parents(".calendar");i.hasClass("left")?this.leftCalendar.month.add({months:1}):this.rightCalendar.month.add({months:1}),this.updateCalendars()},enterDate:function(t){var i=e(t.target).attr("title"),n=i.substr(1,1),r=i.substr(3,1),o=e(t.target).parents(".calendar");o.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[n][r].toString(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[n][r].toString(this.format))},clickDate:function(t){var i=e(t.target).attr("title"),n=i.substr(1,1),r=i.substr(3,1),o=e(t.target).parents(".calendar");o.hasClass("left")?(startDate=this.leftCalendar.calendar[n][r],endDate=this.endDate):(startDate=this.startDate,endDate=this.rightCalendar.calendar[n][r]),o.find("td").removeClass("active"),(startDate.equals(endDate)||startDate.isBefore(endDate))&&(e(t.target).addClass("active"),startDate.equals(this.startDate)&&endDate.equals(this.endDate)||(this.changed=!0),this.startDate=startDate,this.endDate=endDate),this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),this.updateCalendars()},clickApply:function(e){this.hide()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.getMonth(),this.leftCalendar.month.getFullYear()),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.getMonth(),this.rightCalendar.month.getFullYear()),this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.endDate)),this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate))},buildCalendar:function(e,t){for(var i=Date.today().set({day:1,month:e,year:t}),n=i.clone().add(-1).day().getMonth(),r=i.clone().add(-1).day().getFullYear(),o=(Date.getDaysInMonth(t,e),Date.getDaysInMonth(r,n)),s=i.getDay(),a=Array(),l=0;l<6;l++)a[l]=Array();var c=o-s+this.locale.firstDay+1;c>o&&(c-=7),s==this.locale.firstDay&&(c=o-6);for(var d=Date.today().set({day:c,month:n,year:r}),l=0,u=0,h=0;l<42;l++,u++,d=d.clone().add(1).day())l>0&&u%7==0&&(u=0,h++),a[h][u]=d;return a},renderCalendar:function(t,i,n,r){var o='<table class="table-condensed">';o+="<thead>",o+="<tr>",this.showWeekNumbers&&(o+="<th></th>"),o+=!n||n<t[1][1]?'<th class="prev available"><i class="icon-angle-left"></i></th>':"<th></th>",o+='<th colspan="5" style="width: auto">'+this.locale.monthNames[t[1][1].getMonth()]+t[1][1].toString(" yyyy")+"</th>",o+=!r||r>t[1][1]?'<th class="next available"><i class="icon-angle-right"></i></th>':"<th></th>",o+="</tr>",o+="<tr>",this.showWeekNumbers&&(o+='<th class="week">'+this.locale.weekLabel+"</th>"),e.each(this.locale.daysOfWeek,function(e,t){o+="<th>"+t+"</th>"}),o+="</tr>",o+="</thead>",o+="<tbody>";for(var s=0;s<6;s++){o+="<tr>",this.showWeekNumbers&&(o+='<td class="week">'+t[s][0].getWeek()+"</td>");for(var a=0;a<7;a++){var l="available ";l+=t[s][a].getMonth()==t[1][1].getMonth()?"":"off",i.setHours(0,0,0,0),n&&t[s][a]<n||r&&t[s][a]>r?l="off disabled":t[s][a].equals(i)&&(l+="active");var c="r"+s+"c"+a;o+='<td class="'+l+'" title="'+c+'">'+t[s][a].getDate()+"</td>"}o+="</tr>"}return o+="</tbody>",o+="</table>"}},e.fn.daterangepicker=function(i,n){return this.each(function(){var r=e(this);r.data("daterangepicker")||r.data("daterangepicker",new t(r,i,n))}),this}}(window.jQuery);var FormComponents=function(){var e=function(){jQuery().wysihtml5&&$(".wysihtml5").size()>0&&$(".wysihtml5").wysihtml5({stylesheets:["assets/plugins/bootstrap-wysihtml5/wysiwyg-color.css"]})},t=function(){jQuery().wysihtml5&&$(".wysihtml5").size()>0&&$(".wysihtml5").wysihtml5({stylesheets:["assets/plugins/bootstrap-wysihtml5/wysiwyg-color.css"]})},i=function(){jQuery().toggleButtons&&($(".basic-toggle-button").toggleButtons(),$(".text-toggle-button").toggleButtons({width:200,label:{enabled:"Lorem Ipsum",disabled:"Dolor Sit"}}),$(".danger-toggle-button").toggleButtons({style:{enabled:"danger",disabled:"info"}}),$(".info-toggle-button").toggleButtons({style:{enabled:"info",disabled:""}}),$(".success-toggle-button").toggleButtons({style:{enabled:"success",disabled:"info"}}),$(".warning-toggle-button").toggleButtons({style:{enabled:"warning",disabled:"info"}}),$(".height-toggle-button").toggleButtons({height:100,font:{"line-height":"100px","font-size":"20px","font-style":"italic"}}))},n=function(){jQuery().tagsInput&&($("#tags_1").tagsInput({width:"auto",onAddTag:function(){}}),$("#tags_2").tagsInput({width:240}))},r=function(){$(".ui-date-picker").datepicker()},o=function(){jQuery().datepicker&&$(".date-picker").datepicker({rtl:App.isRTL()})},s=function(){jQuery().timepicker&&($(".timepicker-default").timepicker(),$(".timepicker-24").timepicker({minuteStep:1,showSeconds:!0,showMeridian:!1}))},a=function(){jQuery().daterangepicker&&($(".date-range").daterangepicker({opens:App.isRTL()?"left":"right",format:"MM/dd/yyyy",separator:" to ",startDate:Date.today().add({days:-29}),endDate:Date.today(),minDate:"01/01/2012",maxDate:"12/31/2014"}),$("#form-date-range").daterangepicker({ranges:{Today:["today","today"],Yesterday:["yesterday","yesterday"],"Last 7 Days":[Date.today().add({days:-6}),"today"],"Last 29 Days":[Date.today().add({days:-29}),"today"],"This Month":[Date.today().moveToFirstDayOfMonth(),Date.today().moveToLastDayOfMonth()],"Last Month":[Date.today().moveToFirstDayOfMonth().add({months:-1}),Date.today().moveToFirstDayOfMonth().add({days:-1})]},opens:App.isRTL()?"left":"right",format:"MM/dd/yyyy",separator:" to ",startDate:Date.today().add({days:-29}),endDate:Date.today(),minDate:"01/01/2012",maxDate:"12/31/2014",locale:{applyLabel:"Submit",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom Range",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1},showWeekNumbers:!0,buttonClasses:["btn-danger"]},function(e,t){$("#form-date-range span").html(e.toString("MMMM d, yyyy")+" - "+t.toString("MMMM d, yyyy"))}),$("#form-date-range span").html(Date.today().add({days:-29}).toString("MMMM d, yyyy")+" - "+Date.today().toString("MMMM d, yyyy")),$("#form-date-range-modal").daterangepicker({ranges:{Today:["today","today"],Yesterday:["yesterday","yesterday"],"Last 7 Days":[Date.today().add({days:-6}),"today"],"Last 29 Days":[Date.today().add({days:-29}),"today"],"This Month":[Date.today().moveToFirstDayOfMonth(),Date.today().moveToLastDayOfMonth()],"Last Month":[Date.today().moveToFirstDayOfMonth().add({months:-1}),Date.today().moveToFirstDayOfMonth().add({days:-1})]},opens:App.isRTL()?"left":"right",format:"MM/dd/yyyy",separator:" to ",startDate:Date.today().add({days:-29}),endDate:Date.today(),minDate:"01/01/2012",maxDate:"12/31/2014",locale:{applyLabel:"Submit",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom Range",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1},showWeekNumbers:!0,buttonClasses:["btn-danger"]},function(e,t){$("#form-date-range-modal span").html(e.toString("MMMM d, yyyy")+" - "+t.toString("MMMM d, yyyy"))}),$("#form-date-range-modal span").html(Date.today().add({days:-29}).toString("MMMM d, yyyy")+" - "+Date.today().toString("MMMM d, yyyy")))},l=function(){$(".form_datetime").datetimepicker({format:"dd MM yyyy - hh:ii",pickerPosition:App.isRTL()?"bottom-right":"bottom-left"}),$(".form_advance_datetime").datetimepicker({format:"dd MM yyyy - hh:ii",autoclose:!0,todayBtn:!0,startDate:"2013-02-14 10:00",pickerPosition:App.isRTL()?"bottom-right":"bottom-left",minuteStep:10}),$(".form_meridian_datetime").datetimepicker({format:"dd MM yyyy - HH:ii P",showMeridian:!0,autoclose:!0,pickerPosition:App.isRTL()?"bottom-right":"bottom-left",todayBtn:!0})},c=function(){jQuery().clockface&&($(".clockface_1").clockface(),$("#clockface_2").clockface({format:"HH:mm",trigger:"manual"}),$("#clockface_2_toggle").click(function(e){e.stopPropagation(),$("#clockface_2").clockface("toggle")}),$("#clockface_2_modal").clockface({format:"HH:mm",trigger:"manual"}),$("#clockface_2_modal_toggle").click(function(e){e.stopPropagation(),$("#clockface_2_modal").clockface("toggle")}),$(".clockface_3").clockface({format:"H:mm"}).clockface("show","14:30"))},d=function(){jQuery().colorpicker&&($(".colorpicker-default").colorpicker({format:"hex"}),$(".colorpicker-rgba").colorpicker())},u=function(){function e(e){return e.id?"<img class='flag' src='assets/img/flags/"+e.id.toLowerCase()+".png'/>&nbsp;&nbsp;"+e.text:e.text}function t(e){var t="<table class='movie-result'><tr>";return void 0!==e.posters&&void 0!==e.posters.thumbnail&&(t+="<td valign='top'><img src='"+e.posters.thumbnail+"'/></td>"),t+="<td valign='top'><h5>"+e.title+"</h5>",void 0!==e.critics_consensus?t+="<div class='movie-synopsis'>"+e.critics_consensus+"</div>":void 0!==e.synopsis&&(t+="<div class='movie-synopsis'>"+e.synopsis+"</div>"),t+="</td></tr></table>"}function i(e){return e.title}$("#select2_sample1").select2({placeholder:"Select an option",allowClear:!0}),$("#select2_sample2").select2({placeholder:"Select a State",allowClear:!0}),$("#select2_sample3").select2({allowClear:!0,minimumInputLength:1,query:function(e){var t,i,n,r={results:[]};for(t=1;t<5;t++){for(n="",i=0;i<t;i++)n+=e.term;r.results.push({id:e.term+t,text:n})}e.callback(r)}}),$("#select2_sample4").select2({allowClear:!0,formatResult:e,formatSelection:e,escapeMarkup:function(e){return e}}),$("#select2_sample5").select2({tags:["red","green","blue","yellow","pink"]}),$("#select2_sample6").select2({placeholder:"Search for a movie",minimumInputLength:1,ajax:{url:"http://api.rottentomatoes.com/api/public/v1.0/movies.json",dataType:"jsonp",data:function(e,t){return{q:e,page_limit:10,apikey:"ju6z9mjyajq2djue3gbvv26t"}},results:function(e,t){return{results:e.movies}}},initSelection:function(e,t){var i=$(e).val();""!==i&&$.ajax("http://api.rottentomatoes.com/api/public/v1.0/movies/"+i+".json",{data:{apikey:"ju6z9mjyajq2djue3gbvv26t"},dataType:"jsonp"}).done(function(e){t(e)})},formatResult:t,formatSelection:i,dropdownCssClass:"bigdrop",escapeMarkup:function(e){return e}})},h=function(){$("#my_multi_select1").multiSelect(),$("#my_multi_select2").multiSelect({selectableOptgroup:!0})},p=function(){$.extend($.inputmask.defaults,{autounmask:!0}),$("#mask_date").inputmask("d/m/y",{autoUnmask:!0}),$("#mask_date1").inputmask("d/m/y",{placeholder:"*"}),$("#mask_date2").inputmask("d/m/y",{placeholder:"dd/mm/yyyy"}),$("#mask_phone").inputmask("mask",{mask:"(999) 999-9999"}),$("#mask_tin").inputmask({mask:"99-9999999"}),$("#mask_number").inputmask({mask:"9",repeat:10,greedy:!1}),$("#mask_decimal").inputmask("decimal",{rightAlignNumerics:!1}),$("#mask_currency").inputmask("€ 999.999.999,99",{numericInput:!0}),$("#mask_currency2").inputmask("€ 999,999,999.99",{numericInput:!0,rightAlignNumerics:!1,greedy:!1}),$("#mask_ssn").inputmask("999-99-9999",{placeholder:" ",clearMaskOnLostFocus:!0})},f=function(){$("#input_ipv4").ipAddress(),$("#input_ipv6").ipAddress({v:6})};return{init:function(){e(),i(),n(),r(),o(),s(),l(),a(),c(),d(),u(),p(),f(),h(),App.addResponsiveHandler(function(){t()})}}}(),Index=function(){return{init:function(){App.addResponsiveHandler(function(){Index.initCalendar(),jQuery(".vmaps").each(function(){var e=jQuery(this);e.width(e.parent().width())})})},initJQVMAP:function(){var e=function(e){jQuery(".vmaps").hide(),jQuery("#vmap_"+e).show()},t=function(e){var t={map:"world_en",backgroundColor:null,borderColor:"#333333",borderOpacity:.5,borderWidth:1,color:"#c6c6c6",enableZoom:!0,hoverColor:"#c9dfaf",hoverOpacity:null,values:sample_data,normalizeFunction:"linear",scaleColors:["#b6da93","#909cae"],selectedColor:"#c9dfaf",selectedRegion:null,showTooltip:!0,onLabelShow:function(e,t,i){},onRegionOver:function(e,t){"ca"==t&&e.preventDefault()},onRegionClick:function(e,t,i){var n='You clicked "'+i+'" which has the code: '+t.toUpperCase();alert(n)}};t.map=e+"_en";var i=jQuery("#vmap_"+e);i&&(i.width(i.parent().parent().width()),i.show(),i.vectorMap(t),i.hide())};t("world"),t("usa"),t("europe"),t("russia"),t("germany"),e("world"),jQuery("#regional_stat_world").click(function(){e("world")}),jQuery("#regional_stat_usa").click(function(){e("usa")}),jQuery("#regional_stat_europe").click(function(){e("europe")}),jQuery("#regional_stat_russia").click(function(){e("russia")}),jQuery("#regional_stat_germany").click(function(){e("germany")}),$("#region_statistics_loading").hide(),$("#region_statistics_content").show()},initCalendar:function(){if(jQuery().fullCalendar){var e=new Date,t=e.getDate(),i=e.getMonth(),n=e.getFullYear(),r={};$("#calendar").width()<=400?($("#calendar").addClass("mobile"),r={left:"title, prev, next",center:"",right:"today,month,agendaWeek,agendaDay"}):($("#calendar").removeClass("mobile"),r=App.isRTL()?{right:"title",center:"",left:"prev,next,today,month,agendaWeek,agendaDay"}:{left:"title",center:"",right:"prev,next,today,month,agendaWeek,agendaDay"}),$("#calendar").fullCalendar("destroy"),$("#calendar").fullCalendar({disableDragging:!1,header:r,editable:!0,events:[{title:"All Day Event",start:new Date(n,i,1),backgroundColor:App.getLayoutColorCode("yellow")},{title:"Long Event",start:new Date(n,i,t-5),end:new Date(n,i,t-2),backgroundColor:App.getLayoutColorCode("green")},{title:"Repeating Event",start:new Date(n,i,t-3,16,0),allDay:!1,backgroundColor:App.getLayoutColorCode("red")},{title:"Repeating Event",start:new Date(n,i,t+4,16,0),allDay:!1,backgroundColor:App.getLayoutColorCode("green")},{title:"Meeting",start:new Date(n,i,t,10,30),allDay:!1},{title:"Lunch",start:new Date(n,i,t,12,0),end:new Date(n,i,t,14,0),backgroundColor:App.getLayoutColorCode("grey"),allDay:!1},{title:"Birthday Party",start:new Date(n,i,t+1,19,0),end:new Date(n,i,t+1,22,30),backgroundColor:App.getLayoutColorCode("purple"),allDay:!1},{title:"Click for Google",start:new Date(n,i,28),end:new Date(n,i,29),backgroundColor:App.getLayoutColorCode("yellow"),url:"http://google.com/"}]})}},initCharts:function(){function e(){for(r.length>0&&(r=r.slice(1));r.length<o;){var e=r.length>0?r[r.length-1]:50,t=e+10*Math.random()-5;t<0&&(t=0),t>100&&(t=100),r.push(t)}for(var i=[],n=0;n<r.length;++n)i.push([n,r[n]]);return i}function t(e,t,i,n){$('<div id="tooltip" class="chart-tooltip"><div class="date">'+e+'</div><div class="label label-success">CTR: '+t/10+'%</div><div class="label label-important">Imp: '+12*t+"</div></div>").css({position:"absolute",display:"none",top:i-100,width:75,left:t-40,border:"0px solid #ccc",padding:"2px 6px","background-color":"#fff"}).appendTo("body").fadeIn(200)}function i(){return Math.floor(31*Math.random())+10}function n(){l.setData([e()]),l.draw(),setTimeout(n,d)}if(jQuery.plot){var r=[],o=250,s=[[1,i()],[2,i()],[3,2+i()],[4,3+i()],[5,5+i()],[6,10+i()],[7,15+i()],[8,20+i()],[9,25+i()],[10,30+i()],[11,35+i()],[12,25+i()],[13,15+i()],[14,20+i()],[15,45+i()],[16,50+i()],[17,65+i()],[18,70+i()],[19,85+i()],[20,80+i()],[21,75+i()],[22,80+i()],[23,75+i()],[24,70+i()],[25,65+i()],[26,75+i()],[27,80+i()],[28,85+i()],[29,90+i()],[30,95+i()]],a=[[1,i()-5],[2,i()-5],[3,i()-5],[4,6+i()],[5,5+i()],[6,20+i()],[7,25+i()],[8,36+i()],[9,26+i()],[10,38+i()],[11,39+i()],[12,50+i()],[13,51+i()],[14,12+i()],[15,13+i()],[16,14+i()],[17,15+i()],[18,15+i()],[19,16+i()],[20,17+i()],[21,18+i()],[22,19+i()],[23,20+i()],[24,21+i()],[25,14+i()],[26,24+i()],[27,25+i()],[28,26+i()],[29,27+i()],[30,31+i()]];if(0!=$("#site_statistics").size()){$("#site_statistics_loading").hide(),$("#site_statistics_content").show();var l=$.plot($("#site_statistics"),[{data:s,label:"Unique Visits"},{data:a,label:"Page Views"}],{series:{lines:{show:!0,lineWidth:2,fill:!0,fillColor:{colors:[{opacity:.05},{opacity:.01}]}},points:{show:!0},shadowSize:2},grid:{hoverable:!0,clickable:!0,tickColor:"#eee",borderWidth:0},colors:["#d12610","#37b7f3","#52e136"],xaxis:{ticks:11,tickDecimals:0},yaxis:{ticks:11,tickDecimals:0}}),c=null;$("#site_statistics").bind("plothover",function(e,i,n){if($("#x").text(i.x.toFixed(2)),$("#y").text(i.y.toFixed(2)),n){if(c!=n.dataIndex){c=n.dataIndex,$("#tooltip").remove();var r=n.datapoint[0].toFixed(2),o=n.datapoint[1].toFixed(2);t("24 Jan 2013",n.pageX,n.pageY,n.series.label+" of "+r+" = "+o)}}else $("#tooltip").remove(),c=null})}if(0!=$("#load_statistics").size()){$("#load_statistics_loading").hide(),$("#load_statistics_content").show();var d=30,l=$.plot($("#load_statistics"),[e()],{series:{shadowSize:1},lines:{show:!0,lineWidth:.2,fill:!0,fillColor:{colors:[{opacity:.1},{opacity:1}]}},yaxis:{min:0,max:100,tickFormatter:function(e){return e+"%"}},xaxis:{show:!1},colors:["#e14e3d"],grid:{tickColor:"#a8a3a3",borderWidth:0}});n(),$("#load_statistics").bind("mouseleave",function(){$("#tooltip").remove()})}if(0!=$("#site_activities").size()){var u=null;$("#site_activities_loading").hide(),$("#site_activities_content").show();var h=[[1,10],[2,9],[3,8],[4,6],[5,5],[6,3],[7,9],[8,10],[9,12],[10,14],[11,15],[12,13],[13,11],[14,10],[15,9],[16,8],[17,12],[18,14],[19,16],[20,19],[21,20],[22,20],[23,19],[24,17],[25,15],[25,14],[26,12],[27,10],[28,8],[29,10],[30,12],[31,10],[32,9],[33,8],[34,6],[35,5],[36,3],[37,9],[38,10],[39,12],[40,14],[41,15],[42,13],[43,11],[44,10],[45,9],[46,8],[47,12],[48,14],[49,16],[50,12],[51,10]];$.plot($("#site_activities"),[{data:h,color:"rgba(107,207,123, 0.9)",shadowSize:0,bars:{show:!0,lineWidth:0,fill:!0,fillColor:{colors:[{opacity:1},{opacity:1}]}}}],{series:{bars:{show:!0,barWidth:.9}},grid:{show:!1,hoverable:!0,clickable:!1,autoHighlight:!0,borderWidth:0},yaxis:{min:0,max:20}});$("#site_activities").bind("plothover",function(e,i,n){if($("#x").text(i.x.toFixed(2)),$("#y").text(i.y.toFixed(2)),n&&u!=n.dataIndex){u=n.dataIndex,$("#tooltip").remove();var r=n.datapoint[0].toFixed(2);n.datapoint[1].toFixed(2);t("24 Feb 2013",n.pageX,n.pageY,r)}}),$("#site_activities").bind("mouseleave",function(){$("#tooltip").remove()})}}},initMiniCharts:function(){$(".easy-pie-chart .number.transactions").easyPieChart({animate:1e3,size:75,lineWidth:3,barColor:App.getLayoutColorCode("yellow")}),$(".easy-pie-chart .number.visits").easyPieChart({animate:1e3,size:75,lineWidth:3,barColor:App.getLayoutColorCode("green")}),$(".easy-pie-chart .number.bounce").easyPieChart({animate:1e3,size:75,lineWidth:3,barColor:App.getLayoutColorCode("red")}),$(".easy-pie-chart-reload").click(function(){$(".easy-pie-chart .number").each(function(){var e=Math.floor(100*Math.random());$(this).data("easyPieChart").update(e),$("span",this).text(e)})}),$("#sparkline_bar").sparkline([8,9,10,11,10,10,12,10,10,11,9,12,11,10,9,11,13,13,12],{type:"bar",width:"100",barWidth:5,height:"55",barColor:"#35aa47",negBarColor:"#e02222"}),$("#sparkline_bar2").sparkline([9,11,12,13,12,13,10,14,13,11,11,12,11,11,10,12,11,10],{type:"bar",width:"100",barWidth:5,height:"55",barColor:"#ffb848",
negBarColor:"#e02222"}),$("#sparkline_line").sparkline([9,10,9,10,10,11,12,10,10,11,11,12,11,10,12,11,10,12],{type:"line",width:"100",height:"55",lineColor:"#ffb848"})},initChat:function(){var e=$("#chats"),t=$(".chats",e),i=$(".chat-form",e),n=$("input",i),r=$(".btn",i),o=function(i){i.preventDefault();var r=n.val();if(0!=r.length){var o=new Date,s=o.toString("MMM dd, yyyy hh:mm"),a="";a+='<li class="out">',a+='<img class="avatar" alt="" src="assets/img/avatar1.jpg"/>',a+='<div class="message">',a+='<span class="arrow"></span>',a+='<a href="#" class="name">Bob Nilson</a>&nbsp;',a+='<span class="datetime">at '+s+"</span>",a+='<span class="body">',a+=r,a+="</span>",a+="</div>",a+="</li>";t.append(a);n.val(""),$(".scroller",e).slimScroll({scrollTo:t.height()})}};r.click(o),n.keypress(function(e){if(13==e.which)return o(),!1})},initDashboardDaterange:function(){$("#dashboard-report-range").daterangepicker({ranges:{Today:["today","today"],Yesterday:["yesterday","yesterday"],"Last 7 Days":[Date.today().add({days:-6}),"today"],"Last 30 Days":[Date.today().add({days:-29}),"today"],"This Month":[Date.today().moveToFirstDayOfMonth(),Date.today().moveToLastDayOfMonth()],"Last Month":[Date.today().moveToFirstDayOfMonth().add({months:-1}),Date.today().moveToFirstDayOfMonth().add({days:-1})]},opens:App.isRTL()?"right":"left",format:"MM/dd/yyyy",separator:" to ",startDate:Date.today().add({days:-29}),endDate:Date.today(),minDate:"01/01/2012",maxDate:"12/31/2014",locale:{applyLabel:"Submit",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom Range",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1},showWeekNumbers:!0,buttonClasses:["btn-danger"]},function(e,t){App.blockUI(jQuery("#dashboard")),setTimeout(function(){App.unblockUI(jQuery("#dashboard")),$.gritter.add({title:"Dashboard",text:"Dashboard date range updated."}),App.scrollTo()},1e3),$("#dashboard-report-range span").html(e.toString("MMMM d, yyyy")+" - "+t.toString("MMMM d, yyyy"))}),$("#dashboard-report-range").show(),$("#dashboard-report-range span").html(Date.today().add({days:-29}).toString("MMMM d, yyyy")+" - "+Date.today().toString("MMMM d, yyyy"))},initIntro:function(){$.cookie("intro_show")||($.cookie("intro_show",1),setTimeout(function(){var e=$.gritter.add({title:"Meet Metronic!",text:"Metronic is a brand new Responsive Admin Dashboard Template you have always been looking for!",image:"./assets/img/avatar1.jpg",sticky:!0,time:"",class_name:"my-sticky-class"});setTimeout(function(){$.gritter.remove(e,{fade:!0,speed:"slow"})},12e3)},2e3),setTimeout(function(){var e=$.gritter.add({title:"Buy Metronic!",text:"Metronic comes with a huge collection of reusable and easy customizable UI components and plugins. Buy Metronic today!",image:"./assets/img/avatar1.jpg",sticky:!0,time:"",class_name:"my-sticky-class"});setTimeout(function(){$.gritter.remove(e,{fade:!0,speed:"slow"})},13e3)},8e3),setTimeout(function(){$("#styler").pulsate({color:"#bb3319",repeat:10}),$.extend($.gritter.options,{position:"top-left"});var e=$.gritter.add({position:"top-left",title:"Customize Metronic!",text:"Metronic allows you to easily customize the theme colors and layout settings.",image1:"./assets/img/avatar1.png",sticky:!0,time:"",class_name:"my-sticky-class"});$.extend($.gritter.options,{position:"top-right"}),setTimeout(function(){$.gritter.remove(e,{fade:!0,speed:"slow"})},15e3)},23e3),setTimeout(function(){$.extend($.gritter.options,{position:"top-left"});var e=$.gritter.add({title:"Notification",text:"You have 3 new notifications.",image1:"./assets/img/image1.jpg",sticky:!0,time:"",class_name:"my-sticky-class"});setTimeout(function(){$.gritter.remove(e,{fade:!0,speed:"slow"})},4e3),$.extend($.gritter.options,{position:"top-right"});var t=$("#header_notification_bar .badge").text();t=parseInt(t),t+=3,$("#header_notification_bar .badge").text(t),$("#header_notification_bar").pulsate({color:"#66bce6",repeat:5})},4e4),setTimeout(function(){$.extend($.gritter.options,{position:"top-left"});var e=$.gritter.add({title:"Inbox",text:"You have 2 new messages in your inbox.",image1:"./assets/img/avatar1.jpg",sticky:!0,time:"",class_name:"my-sticky-class"});$.extend($.gritter.options,{position:"top-right"}),setTimeout(function(){$.gritter.remove(e,{fade:!0,speed:"slow"})},4e3);var t=$("#header_inbox_bar .badge").text();t=parseInt(t),t+=2,$("#header_inbox_bar .badge").text(t),$("#header_inbox_bar").pulsate({color:"#dd5131",repeat:5})},6e4))}}}();void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(e,t,i){function n(i){var n=t.console;o[i]||(o[i]=!0,e.migrateWarnings.push(i),n&&n.warn&&!e.migrateMute&&(n.warn("JQMIGRATE: "+i),e.migrateTrace&&n.trace&&n.trace()))}function r(t,r,o,s){if(Object.defineProperty)try{return Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:function(){return n(s),o},set:function(e){n(s),o=e}}),i}catch(e){}e._definePropertyBroken=!0,t[r]=o}var o={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===i&&(e.migrateTrace=!0),e.migrateReset=function(){o={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&n("jQuery is not compatible with Quirks Mode");var s=e("<input/>",{size:1}).attr("size")&&e.attrFn,a=e.attr,l=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},c=e.attrHooks.value&&e.attrHooks.value.set||function(){return i},d=/^(?:input|button)$/i,u=/^[238]$/,h=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,p=/^(?:checked|selected)$/i;r(e,"attrFn",s||{},"jQuery.attrFn is deprecated"),e.attr=function(t,r,o,l){var c=r.toLowerCase(),f=t&&t.nodeType;return l&&(4>a.length&&n("jQuery.fn.attr( props, pass ) is deprecated"),t&&!u.test(f)&&(s?r in s:e.isFunction(e.fn[r])))?e(t)[r](o):("type"===r&&o!==i&&d.test(t.nodeName)&&t.parentNode&&n("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[c]&&h.test(c)&&(e.attrHooks[c]={get:function(t,n){var r,o=e.prop(t,n);return o===!0||"boolean"!=typeof o&&(r=t.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():i},set:function(t,i,n){var r;return i===!1?e.removeAttr(t,n):(r=e.propFix[n]||n,r in t&&(t[r]=!0),t.setAttribute(n,n.toLowerCase())),n}},p.test(c)&&n("jQuery.fn.attr('"+c+"') may use property instead of attribute")),a.call(e,t,r,o))},e.attrHooks.value={get:function(e,t){var i=(e.nodeName||"").toLowerCase();return"button"===i?l.apply(this,arguments):("input"!==i&&"option"!==i&&n("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var r=(e.nodeName||"").toLowerCase();return"button"===r?c.apply(this,arguments):("input"!==r&&"option"!==r&&n("jQuery.fn.attr('value', val) no longer sets properties"),e.value=t,i)}};var f,m,g=e.fn.init,v=e.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,i,r){var o;return t&&"string"==typeof t&&!e.isPlainObject(i)&&(o=y.exec(e.trim(t)))&&o[0]&&("<"!==t.charAt(0)&&n("$(html) HTML strings must start with '<' character"),o[3]&&n("$(html) HTML text after last tag is ignored"),"#"===o[0].charAt(0)&&(n("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),i&&i.context&&(i=i.context),e.parseHTML)?g.call(this,e.parseHTML(o[2],i,!0),i,r):g.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?v.apply(this,arguments):(n("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(f=e.uaMatch(navigator.userAgent),m={},f.browser&&(m[f.browser]=!0,m.version=f.version),m.chrome?m.webkit=!0:m.webkit&&(m.safari=!0),e.browser=m),r(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,i){return new t.fn.init(e,i)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(n,r){return r&&r instanceof e&&!(r instanceof t)&&(r=t(r)),e.fn.init.call(this,n,r,i)},t.fn.init.prototype=t.fn;var i=t(document);return n("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var _=e.fn.data;e.fn.data=function(t){var r,o,s=this[0];return!s||"events"!==t||1!==arguments.length||(r=e.data(s,t),o=e._data(s,t),r!==i&&r!==o||o===i)?_.apply(this,arguments):(n("Use of jQuery.fn.data('events') is deprecated"),o)};var b=/\/(java|ecma)script/i,w=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return n("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},e.clean||(e.clean=function(t,r,o,s){r=r||document,r=!r.nodeType&&r[0]||r,r=r.ownerDocument||r,n("jQuery.clean() is deprecated");var a,l,c,d,u=[];if(e.merge(u,e.buildFragment(t,r).childNodes),o)for(c=function(e){return!e.type||b.test(e.type)?s?s.push(e.parentNode?e.parentNode.removeChild(e):e):o.appendChild(e):i},a=0;null!=(l=u[a]);a++)e.nodeName(l,"script")&&c(l)||(o.appendChild(l),l.getElementsByTagName!==i&&(d=e.grep(e.merge([],l.getElementsByTagName("script")),c),u.splice.apply(u,[a+1,0].concat(d)),a+=d.length));return u});var k=e.event.add,x=e.event.remove,C=e.event.trigger,S=e.fn.toggle,T=e.fn.live,D=e.fn.die,M="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",A=RegExp("\\b(?:"+M+")\\b"),E=/(?:^|\s)hover(\.\S+|)\b/,I=function(t){return"string"!=typeof t||e.event.special.hover?t:(E.test(t)&&n("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(E,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&r(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,i,r,o){e!==document&&A.test(t)&&n("AJAX events should be attached to document: "+t),k.call(this,e,I(t||""),i,r,o)},e.event.remove=function(e,t,i,n,r){x.call(this,e,I(t)||"",i,n,r)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return n("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,i){if(!e.isFunction(t)||!e.isFunction(i))return S.apply(this,arguments);n("jQuery.fn.toggle(handler, handler...) is deprecated");var r=arguments,o=t.guid||e.guid++,s=0,a=function(i){var n=(e._data(this,"lastToggle"+t.guid)||0)%s;return e._data(this,"lastToggle"+t.guid,n+1),i.preventDefault(),r[n].apply(this,arguments)||!1};for(a.guid=o;r.length>s;)r[s++].guid=o;return this.click(a)},e.fn.live=function(t,i,r){return n("jQuery.fn.live() is deprecated"),T?T.apply(this,arguments):(e(this.context).on(t,this.selector,i,r),this)},e.fn.die=function(t,i){return n("jQuery.fn.die() is deprecated"),D?D.apply(this,arguments):(e(this.context).off(t,this.selector||"**",i),this)},e.event.trigger=function(e,t,i,r){return i||A.test(e)||n("Global events are undocumented and deprecated"),C.call(this,e,t,i||document,r)},e.each(M.split("|"),function(t,i){e.event.special[i]={setup:function(){var t=this;return t!==document&&(e.event.add(document,i+"."+e.guid,function(){e.event.trigger(i,null,t,!0)}),e._data(this,i,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,i+"."+e._data(this,i)),!1}}})}(jQuery,window),function(e,t){function i(t,i){var r,o,s,a=t.nodeName.toLowerCase();return"area"===a?(r=t.parentNode,o=r.name,!(!t.href||!o||"map"!==r.nodeName.toLowerCase())&&(s=e("img[usemap=#"+o+"]")[0],!!s&&n(s))):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.10.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,r,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function r(t,i,n,r){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(s,r(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var r,o=e.ui[t].prototype;for(r in n)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([i,n[r]])},call:function(e,t,i){var n,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<r.length;n++)e.options[r[n][0]]&&r[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return t[n]>0||(t[n]=1,r=t[n]>0,t[n]=0,r)}}))}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}r(t)},e.widget=function(t,i,n){var r,o,s,a,l={},c=t.split(".")[0];t=t.split(".")[1],r=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},o=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=n.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(l[t]=n)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete o._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(i){for(var r,o,s=n.call(arguments,1),a=0,l=s.length;a<l;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==t&&(e.isPlainObject(o)?i[r]=e.isPlainObject(i[r])?e.widget.extend({},i[r],o):e.widget.extend({},o):i[r]=o);return i},e.widget.bridge=function(i,r){var o=r.prototype.widgetFullName||i;e.fn[i]=function(s){var a="string"==typeof s,l=n.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var n,r=e.data(this,o);return r?e.isFunction(r[s])&&"_"!==s.charAt(0)?(n=r[s].apply(r,l),n!==r&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+s+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(s||{})._init():e.data(this,o,new r(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var r,o,s,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},r=i.split("."),i=r.shift(),r.length){for(o=a[i]=e.widget.extend({},this.options[i]),s=0;s<r.length-1;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(i=r.pop(),n===t)return o[i]===t?null:o[i];o[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var r,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,s){function a(){if(t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?o[s]:s).apply(o,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,d=l[2];d?r.delegate(d,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,o,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent,o)for(r in o)r in i||(i[r]=o[r]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?i:r.effect||i:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&n.delay(r.delay),s&&e.effects&&e.effects.effect[a]?n[t](r):a!==t&&n[a]?n[a](r.duration,r.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}})}(jQuery),function(e,t){var i=!1;e(document).mouseup(function(){i=!1}),e.widget("ui.mouse",{version:"1.10.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=1===t.which,o=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(r&&!o&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function r(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var i,n,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return e("body").append(r),i=s.offsetWidth,r.css("overflow","scroll"),n=s.offsetWidth,i===n&&(n=r[0].clientWidth),r.remove(),o=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,o="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var o,p,m,g,v,y,_=e(t.of),b=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(b),k=(t.collision||"flip").split(" "),x={};return y=r(_),_[0].preventDefault&&(t.at="left top"),p=y.width,m=y.height,g=y.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):d.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=d.test(n[1])?n[1]:"center",e=u.exec(n[0]),i=u.exec(n[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),o=i(x.at,p,m),v.left+=o[0],v.top+=o[1],this.each(function(){var r,c,d=e(this),u=d.outerWidth(),h=d.outerHeight(),f=n(this,"marginLeft"),y=n(this,"marginTop"),C=u+f+n(this,"marginRight")+w.width,S=h+y+n(this,"marginBottom")+w.height,T=e.extend({},v),D=i(x.my,d.outerWidth(),d.outerHeight());"right"===t.my[0]?T.left-=u:"center"===t.my[0]&&(T.left-=u/2),"bottom"===t.my[1]?T.top-=h:"center"===t.my[1]&&(T.top-=h/2),T.left+=D[0],T.top+=D[1],e.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),r={marginLeft:f,marginTop:y},e.each(["left","top"],function(i,n){e.ui.position[k[i]]&&e.ui.position[k[i]][n](T,{targetWidth:p,targetHeight:m,elemWidth:u,elemHeight:h,collisionPosition:r,collisionWidth:C,collisionHeight:S,offset:[o[0]+D[0],o[1]+D[1]],my:t.my,at:t.at,within:b,elem:d})}),t.using&&(c=function(e){var i=g.left-T.left,n=i+p-u,r=g.top-T.top,o=r+m-h,l={target:{element:_,left:g.left,top:g.top,width:p,height:m},element:{element:d,left:T.left,top:T.top,width:u,height:h},horizontal:n<0?"left":i>0?"right":"center",vertical:o<0?"top":r>0?"bottom":"middle"};p<u&&a(i+n)<p&&(l.horizontal="center"),m<h&&a(r+o)<m&&(l.vertical="middle"),s(a(i),a(n))>s(a(r),a(o))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),d.offset(e.extend(T,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,c=a+t.collisionWidth-o-r;t.collisionWidth>o?l>0&&c<=0?(i=e.left+l+t.collisionWidth-o-r,e.left+=l-i):c>0&&l<=0?e.left=r:l>c?e.left=r+o-t.collisionWidth:e.left=r:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-a,e.left)},top:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,c=a+t.collisionHeight-o-r;t.collisionHeight>o?l>0&&c<=0?(i=e.top+l+t.collisionHeight-o-r,e.top+=l-i):c>0&&l<=0?e.top=r:l>c?e.top=r+o-t.collisionHeight:e.top=r:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,r=t.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,u=c+t.collisionWidth-s-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];d<0?(i=e.left+h+p+f+t.collisionWidth-s-o,(i<0||i<a(d))&&(e.left+=h+p+f)):u>0&&(n=e.left-t.collisionPosition.marginLeft+h+p+f-l,(n>0||a(n)<u)&&(e.left+=h+p+f))},top:function(e,t){var i,n,r=t.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,u=c+t.collisionHeight-s-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];d<0?(n=e.top+p+f+m+t.collisionHeight-s-o,e.top+p+f+m>d&&(n<0||n<a(d))&&(e.top+=p+f+m)):u>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>u&&(i>0||a(i)<u)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,r,o,s=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(s?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)t.style[o]=n[o];t.appendChild(a),i=s||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=e(a).offset().left,e.support.offsetFractions=r>10&&r<11,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;
return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i,n=this,r=!1,o=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(o=e.ui.ddmanager.drop(this,t)),this.dropped&&(o=this.dropped,this.dropped=!1),i=this.element[0];i&&(i=i.parentNode);)i===document&&(r=!0);return!(!r&&"original"===this.options.helper)&&("invalid"===this.options.revert&&!o||"valid"===this.options.revert&&o||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,o)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!e(this.options.handle,this.element).length;return e(this.options.handle,this.element).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]!==this.element[0]&&!/(fixed|absolute)/.test(n.css("position"))&&n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;if("parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=["document"===r.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===r.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===r.containment?0:e(window).scrollLeft())+e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===r.containment?0:e(window).scrollTop())+(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||r.containment.constructor===Array)r.containment.constructor===Array&&(this.containment=r.containment);else{if(i=e(r.containment),n=i[0],!n)return;t="hidden"!==e(n).css("overflow"),this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r,o,s=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName),c=t.pageX,d=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(c=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(d=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(c=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(d=i[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,d=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((c-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,c=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-s.grid[0]:o+s.grid[0]:o)),{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),r=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(r.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("ui-draggable"),r=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,i){var n=e(this).data("ui-draggable"),r=this;e.each(n.sortables,function(){var o=!1,s=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),r=e(this).data("ui-draggable").options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,r=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,r,o,s,a,l,c,d,u,h,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,y=i.offset.top,_=y+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)a=p.snapElements[u].left,l=a+p.snapElements[u].width,c=p.snapElements[u].top,d=c+p.snapElements[u].height,a-m<g&&g<l+m&&c-m<y&&y<d+m||a-m<g&&g<l+m&&c-m<_&&_<d+m||a-m<v&&v<l+m&&c-m<y&&y<d+m||a-m<v&&v<l+m&&c-m<_&&_<d+m?("inner"!==f.snapMode&&(n=Math.abs(c-_)<=m,r=Math.abs(d-y)<=m,o=Math.abs(a-v)<=m,s=Math.abs(l-g)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),r&&(i.position.top=p._convertPositionTo("relative",{top:d,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=n||r||o||s,"outer"!==f.snapMode&&(n=Math.abs(c-y)<=m,r=Math.abs(d-_)<=m,o=Math.abs(a-g)<=m,s=Math.abs(l-v)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),r&&(i.position.top=p._convertPositionTo("relative",{top:d-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(n||r||o||s||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=n||r||o||s||h):(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),r=e(this).data("ui-draggable").options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e,t){function i(e,t,i){return e>t&&e<t+i}e.widget("ui.droppable",{version:"1.10.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,r=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return r=!0,!1}),!r&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,n){if(!t.offset)return!1;var r,o,s=(e.positionAbs||e.position.absolute).left,a=s+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,c=l+e.helperProportions.height,d=t.offset.left,u=d+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(n){case"fit":return d<=s&&a<=u&&h<=l&&c<=p;case"intersect":return d<s+e.helperProportions.width/2&&a-e.helperProportions.width/2<u&&h<l+e.helperProportions.height/2&&c-e.helperProportions.height/2<p;case"pointer":return r=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,o=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,i(o,h,t.proportions.height)&&i(r,d,t.proportions.width);case"touch":return(l>=h&&l<=p||c>=h&&c<=p||l<h&&c>p)&&(s>=d&&s<=u||a>=d&&a<=u||s<d&&a>u);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,r,o=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<o.length;n++)if(!(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element))){for(r=0;r<a.length;r++)if(a[r]===o[n].element[0]){o[n].proportions.height=0;continue e}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===s&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions={width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,r,o,s=e.ui.intersect(t,this,this.options.tolerance),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(r=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===r}),o.length&&(n=e.data(o[0],"ui-droppable"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e,t){function i(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,r,o,s=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),o="ui-resizable-"+n,r=e("<div class='ui-resizable-handle "+o+"'></div>"),r.css({zIndex:a.zIndex}),"se"===n&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(r);this._renderAxis=function(t){var i,n,r,o;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(r,o),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=r&&r[1]?r[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(e(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,r=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var n,r,o,s=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=i(this.helper.css("left")),r=i(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n=this.helper,r={},o=this.originalMousePosition,s=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,d=this.size.height,u=t.pageX-o.left||0,h=t.pageY-o.top||0,p=this._change[s];return!!p&&(i=p.apply(this,[t,u,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==a&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==c&&(r.width=this.size.width+"px"),this.size.height!==d&&(r.height=this.size.height+"px"),n.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,r,o,s,a,l,c=this.options,d=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),r=n&&e.ui.hasScroll(i[0],"left")?0:d.sizeDiff.height,o=n?0:d.sizeDiff.width,s={width:d.helper.width()-o,height:d.helper.height()-r},a=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:a})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,r,o,s,a=this.options;s={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),i<s.maxWidth&&(s.maxWidth=i),o<s.maxHeight&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,r=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,r=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=n(e.width)&&t.minWidth&&t.minWidth>e.width,a=n(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,d=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return s&&(e.width=t.minWidth),a&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),s&&d&&(e.left=l-t.minWidth),r&&d&&(e.left=l-t.maxWidth),a&&u&&(e.top=c-t.minHeight),o&&u&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?!e.width&&!e.height&&!e.top&&e.left&&(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,r,o=this.helper||this.element;
for(e=0;e<this._proportionallyResizeElements.length;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],n=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);r.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,r=i._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&e.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,o,s,a,l,c=e(this).data("ui-resizable"),d=c.options,u=c.element,h=d.containment,p=h instanceof e?h.get(0):/parent/.test(h)?u.parent().get(0):h;p&&(c.containerElement=e(p),/document/.test(h)||h===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=i(t.css("padding"+r))}),c.containerOffset=t.offset(),c.containerPosition=t.position(),c.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=c.containerOffset,o=c.containerSize.height,s=c.containerSize.width,a=e.ui.hasScroll(p,"left")?p.scrollWidth:s,l=e.ui.hasScroll(p)?p.scrollHeight:o,c.parentData={element:p,left:r.left,top:r.top,width:a,height:l}))},resize:function(t){var i,n,r,o,s=e(this).data("ui-resizable"),a=s.options,l=s.containerOffset,c=s.position,d=s._aspectRatio||t.shiftKey,u={top:0,left:0},h=s.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(u=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-u.left),d&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),d&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,i=Math.abs((s._helper?s.offset.left-u.left:s.offset.left-u.left)+s.sizeDiff.width),n=Math.abs((s._helper?s.offset.top-u.top:s.offset.top-l.top)+s.sizeDiff.height),r=s.containerElement.get(0)===s.element.parent().get(0),o=/relative|absolute/.test(s.containerElement.css("position")),r&&o&&(i-=s.parentData.left),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,d&&(s.size.height=s.size.width/s.aspectRatio)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,d&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,r=t.containerPosition,o=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-r.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-r.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),r=n.options,o=n.originalSize,s=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0},l=function(t,n){e(t).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),o={},s=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var i=(r[t]||0)+(a[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,r=t.originalSize,o=t.originalPosition,s=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,d=Math.round((n.width-r.width)/l)*l,u=Math.round((n.height-r.height)/c)*c,h=r.width+d,p=r.height+u,f=i.maxWidth&&i.maxWidth<h,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>p;i.grid=a,g&&(h+=l),v&&(p+=c),f&&(h-=l),m&&(p-=c),/^(se|s|e)$/.test(s)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(s)?(t.size.width=h,t.size.height=p,t.position.top=o.top-u):/^(sw)$/.test(s)?(t.size.width=h,t.size.height=p,t.position.left=o.left-d):(t.size.width=h,t.size.height=p,t.position.top=o.top-u,t.position.left=o.left-d)}})}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,!t.metaKey&&!t.ctrlKey&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,r=e.data(this,"selectable-item");if(r)return n=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),r.unselecting=!n,r.selecting=n,r.selected=n,n?i._trigger("selecting",t,{selecting:r.element}):i._trigger("unselecting",t,{unselecting:r.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,r=this.options,o=this.opos[0],s=this.opos[1],a=t.pageX,l=t.pageY;return o>a&&(i=a,a=o,o=i),s>l&&(i=l,l=s,s=i),this.helper.css({left:o,top:s,width:a-o,height:l-s}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===r.tolerance?c=!(i.left>a||i.right<o||i.top>l||i.bottom<s):"fit"===r.tolerance&&(c=i.left>o&&i.right<a&&i.top>s&&i.bottom<l),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&!t.metaKey&&!t.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){function i(e,t,i){return e>t&&e<t+i}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,r=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,o.widgetName+"-item")===o)return n=e(this),!1}),e.data(t.target,o.widgetName+"-item")===o&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(r=!0)}),!r))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var r,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,r,o,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-e(document).scrollTop()<s.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed)),t.pageX-e(document).scrollLeft()<s.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],r=n.item[0],o=this._intersectsWithPointer(n),o&&n.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===r||e.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],r))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,r=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,u=n+c>a&&n+c<l&&t+d>o&&t+d<s;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?u:o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||i(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||i(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return!!r&&(this.floating?s&&"right"===s||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(e){var t=i(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=i(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,r,o,s=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(r=e(l[i]),n=r.length-1;n>=0;n--)o=e.data(r[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){s.push(this)});return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,r,o,s,a,l,c,d=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(r=e(h[i]),n=r.length-1;n>=0;n--)o=e.data(r[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(s=u[i][1],a=u[i][0],n=0,c=a.length;n<c;n++)l=e(a[n]),l.data(this.widgetName+"-item",s),d.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,r,o;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=r.outerWidth(),n.height=r.outerHeight()),o=r.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(n.style.visibility="hidden"),n},update:function(e,r){i&&!n.forcePlaceholderSize||(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,n,r,o,s,a,l,c,d,u=null,h=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(u&&e.contains(this.containers[i].element[0],u.element[0]))continue;u=this.containers[i],h=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1;else{for(r=1e4,o=null,s=this.containers[h].floating?"left":"top",a=this.containers[h].floating?"width":"height",l=this.positionAbs[s]+this.offset.click[s],n=this.items.length-1;n>=0;n--)e.contains(this.containers[h].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(c=this.items[n].item.offset()[s],d=!1,Math.abs(c-l)>Math.abs(c+this.items[n][a]-l)&&(d=!0,c+=this.items[n][a]),Math.abs(c-l)<r&&(r=Math.abs(c-l),o=this.items[n],this.direction=d?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[h],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],i=e(r.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r=this.options,o=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"===this.cssPosition&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),r.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i,
n=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(t,i){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!i&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!i&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(i||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)i||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){for(this._trigger("beforeStop",t,this._uiHash()),n=0;n<r.length;n++)r[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(n=0;n<r.length;n++)r[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var i=0,n={},r={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(t.active===!1||null==t.active)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"===e&&!t&&this.options.active===!1&&this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,r=this.headers.index(t.target),o=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(r+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(r-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),(t.active===!1&&t.collapsible===!0||!this.headers.length)&&(t.active=!1,this.active=e()),t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,n=this.options,r=n.heightStyle,o=this.element.parent(),s=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),r=i.next(),o=r.attr("id");n||(n=s+"-header-"+t,i.attr("id",n)),o||(o=s+"-panel-"+t,r.attr("id",o)),i.attr("aria-controls",o),r.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===r?(t=o.height(),this.element.siblings(":visible").each(function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===r&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget),o=r[0]===n[0],s=o&&i.collapsible,a=s?e():r.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:s?e():r,newPanel:a};t.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=!s&&this.headers.index(r),this.active=o?e():r,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,i){var o,s,a,l=this,c=0,d=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},h=d&&u.down||u,p=function(){l._toggleComplete(i)};return"number"==typeof h&&(a=h),"string"==typeof h&&(s=h),s=s||h.easing||u.easing,a=a||h.duration||u.duration,t.length?e.length?(o=e.show().outerHeight(),t.animate(n,{duration:a,easing:s,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(r,{duration:a,easing:s,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(o-t.outerHeight()-c),c=0)}}),void 0):t.animate(n,a,s,p):e.animate(r,a,s,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e,t){var i=0;e.widget("ui.autocomplete",{version:"1.10.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,r=this.element[0].nodeName.toLowerCase(),o="textarea"===r,s="input"===r;this.isMultiLine=!!o||!s&&this.element.prop("isContentEditable"),this.valueMethod=this.element[o||s?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,n=!0,i=!0,void 0;t=!1,n=!1,i=!1;var o=e.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",r);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case o.UP:t=!0,this._keyEvent("previous",r);break;case o.DOWN:t=!0,this._keyEvent("next",r);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case o.TAB:this.menu.active&&this.menu.select(r);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:i=!0,this._searchTimeout(r)}},keypress:function(n){if(t)return t=!1,void n.preventDefault();if(!i){var r=e.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({input:e(),role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target!==t.element[0]&&n.target!==i&&!e.contains(i,n.target)&&t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,r){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++i;return function(n){t===i&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e,t){var i,n,r,o,s="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},d=function(t){var i=t.name,n=t.form,r=e([]);return i&&(i=i.replace(/'/g,"\\'"),r=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),r};e.widget("ui.button",{version:"1.10.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,c),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,a=this.options,l="checkbox"===this.type||"radio"===this.type,u=l?"":"ui-state-active",h="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===i&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(u)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),l&&(this.element.bind("change"+this.eventNamespace,function(){o||t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){a.disabled||(o=!1,n=e.pageX,r=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){a.disabled||n===e.pageX&&r===e.pageY||(o=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||o)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||o)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];d(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!a.disabled&&(e(this).addClass("ui-state-active"),i=this,t.document.one("mouseup",function(){i=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return!a.disabled&&void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return!a.disabled&&void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" "+a+" "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?d(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(l),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,r=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(r?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(o.inline?t.parent()[0]:o.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))})}function r(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.1"}});var o,s="datepicker",a=(new Date).getTime();e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,r,o;n=t.nodeName.toLowerCase(),r="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),o=this._newInst(e(t),r),o.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,o):r&&this._inlineDatepicker(t,o)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,s,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,r,o,s=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),s&&(i.append=e("<span class='"+this._appendClass+"'>"+s+"</span>"),t[a?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.focus(this._showDatepicker),"button"!==n&&"both"!==n||(r=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:r,title:r}):r)),t[a?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,r,o=new Date(2009,11,20),s=this._get(e,"dateFormat");s.match(/[DM]/)&&(t=function(e){for(i=0,n=0,r=0;r<e.length;r++)e[r].length>i&&(i=e[r].length,n=r);return n},o.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,s,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,o,a){var l,c,d,u,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),
this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],s,p)),r(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+u,d/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],s,p),this},_destroyDatepicker:function(t){var i,n=e(t),r=e.data(t,s);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,s),"input"===i?(r.append.remove(),r.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,r=e(t),o=e.data(t,s);r.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||(n=r.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,r=e(t),o=e.data(t,s);r.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||(n=r.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,s)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,o){var s,a,l,c,d=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):d?"all"===n?e.extend({},d.settings):this._get(d,n):null:(s=n||{},"string"==typeof n&&(s={},s[n]=o),d&&(this._curInst===d&&this._hideDatepicker(),a=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(d,"min"),c=this._getMinMaxDate(d,"max"),r(d.settings,s),null!==l&&s.dateFormat!==t&&s.minDate===t&&(d.settings.minDate=this._formatDate(d,l)),null!==c&&s.dateFormat!==t&&s.maxDate===t&&(d.settings.maxDate=this._formatDate(d,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),d),this._autoSize(d),this._setDate(d,a),this._updateAlternate(d),this._updateDatepicker(d)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,r,o=e.datepicker._getInst(t.target),s=!0,a=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),s=!1;break;case 13:return r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv),r[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,r[0]),i=e.datepicker._get(o,"onSelect"),i?(n=e.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),s=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),s=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),s=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),s=t.ctrlKey||t.metaKey;break;default:s=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):s=!1;s&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,r=e.datepicker._getInst(t.target);if(e.datepicker._get(r,"constrainInput"))return i=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(e){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,o,s,a,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),o=n?n.apply(t,[t,i]):{},o!==!1&&(r(i.settings,o),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|="fixed"===e(this).css("position"),!s}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),a=e.datepicker._checkOffset(i,a,s),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,o=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),r=n[1],s=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",s*r+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,i,n){var r=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?r-s:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+r>l&&l>r?Math.abs(i.left+r-l):0),i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+a):0),i},_findPos:function(t){for(var i,n=this._getInst(t),r=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,r,o,a=this._curInst;!a||t&&a!==e.data(t,s)||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),r=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[i]||e.effects[i])?a.dpDiv.hide(i,e.datepicker._get(a,"showOptions"),n,r):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,r),i||r(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var r=e(t),o=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(t){var i,n=e(t),r=this._getInst(n[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(i=new Date,r.selectedDay=i.getDate(),r.drawMonth=r.selectedMonth=i.getMonth(),r.drawYear=r.selectedYear=i.getFullYear()),this._notifyChange(r),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var r=e(t),o=this._getInst(r[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(r)},_selectDay:function(t,i,n,r){var o,s=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(o=this._getInst(s[0]),o.selectedDay=o.currentDay=e("a",r).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,r=e(t),o=this._getInst(r[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),n=this._get(o,"onSelect"),n?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,r,o=this._get(t,"altField");o&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),r=this.formatDate(i,n,this._getFormatConfig(t)),e(o).each(function(){e(this).val(r)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var r,o,s,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,h=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,_=!1,b=function(e){var i=r+1<t.length&&t.charAt(r+1)===e;return i&&r++,i},w=function(e){var t=b(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r=new RegExp("^\\d{1,"+n+"}"),o=i.substring(l).match(r);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},k=function(t,n,r){var o=-1,s=e.map(b(t)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(s,function(e,t){var n=t[1];if(i.substr(l,n.length).toLowerCase()===n.toLowerCase())return o=t[0],l+=n.length,!1}),o!==-1)return o+1;throw"Unknown name at position "+l},x=function(){if(i.charAt(l)!==t.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;r<t.length;r++)if(_)"'"!==t.charAt(r)||b("'")?x():_=!1;else switch(t.charAt(r)){case"d":v=w("d");break;case"D":k("D",u,h);break;case"o":y=w("o");break;case"m":g=w("m");break;case"M":g=k("M",p,f);break;case"y":m=w("y");break;case"@":a=new Date(w("@")),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"!":a=new Date((w("!")-this._ticksTo1970)/1e4),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"'":b("'")?x():_=!0;break;default:x()}if(l<i.length&&(s=i.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(m===-1?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=d?0:-100)),y>-1)for(g=1,v=y;;){if(o=this._getDaysInMonth(m,g-1),v<=o)break;g++,v-=o}if(a=this._daylightSavingAdjust(new Date(m,g-1,v)),a.getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},d=function(e,t,i,n){return l(e)?n[t]:i[t]},u="",h=!1;if(t)for(n=0;n<e.length;n++)if(h)"'"!==e.charAt(n)||l("'")?u+=e.charAt(n):h=!1;else switch(e.charAt(n)){case"d":u+=c("d",t.getDate(),2);break;case"D":u+=d("D",t.getDay(),r,o);break;case"o":u+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",t.getMonth()+1,2);break;case"M":u+=d("M",t.getMonth(),s,a);break;case"y":u+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":h=!0;break;default:u+=e.charAt(n)}return u},_possibleChars:function(e){var t,i="",n=!1,r=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||r("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":r("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,s=this._getFormatConfig(e);try{o=this.parseDate(i,n,s)||r}catch(e){n=t?"":n}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=n?o.getDate():0,e.currentMonth=n?o.getMonth():0,e.currentYear=n?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=n.getFullYear(),o=n.getMonth(),s=n.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(i);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(l[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(r,o))}l=a.exec(i)}return new Date(r,o,s)},s=null==i||""===i?n:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?n:r(i):new Date(i.getTime());return s=s&&"Invalid Date"===s.toString()?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,o=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),(r!==e.selectedMonth||o!==e.selectedYear)&&!i&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+a].datepicker._adjustDate(n,-i,"M")},next:function(){window["DP_jQuery_"+a].datepicker._adjustDate(n,+i,"M")},hide:function(){window["DP_jQuery_"+a].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+a].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+a].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+a].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+a].datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,r,o,s,a,l,c,d,u,h,p,f,m,g,v,y,_,b,w,k,x,C,S,T,D,M,A,E,I,P,F,z,H,R,N,$,O,L=new Date,B=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),U=this._get(e,"isRTL"),V=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),j=this._get(e,"navigationAsDateFormat"),q=this._getNumberOfMonths(e),G=this._get(e,"showCurrentAtPos"),Y=this._get(e,"stepMonths"),Q=1!==q[0]||1!==q[1],K=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),J=e.drawMonth-G,ee=e.drawYear;if(J<0&&(J+=12,ee--),Z)for(t=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-q[0]*q[1]+1,Z.getDate())),t=X&&t<X?X:t;this._daylightSavingAdjust(new Date(ee,J,1))>t;)J--,J<0&&(J=11,ee--);for(e.drawMonth=J,e.drawYear=ee,i=this._get(e,"prevText"),i=j?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,J-Y,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+i+"</span></a>",r=this._get(e,"nextText"),r=j?this.formatDate(r,this._daylightSavingAdjust(new Date(ee,J+Y,1)),this._getFormatConfig(e)):r,o=this._canAdjustMonth(e,1,ee,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+r+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+r+"</span></a>",s=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?K:B,s=j?this.formatDate(s,a,this._getFormatConfig(e)):s,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=V?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(U?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,u=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),_=this._getDefaultDate(e),b="",w,k=0;k<q[0];k++){for(x="",this.maxRows=4,C=0;C<q[1];C++){if(S=this._daylightSavingAdjust(new Date(ee,J,e.selectedDay)),T=" ui-corner-all",D="",Q){if(D+="<div class='ui-datepicker-group",q[1]>1)switch(C){case 0:D+=" ui-datepicker-group-first",T=" ui-corner-"+(U?"right":"left");break;case q[1]-1:D+=" ui-datepicker-group-last",T=" ui-corner-"+(U?"left":"right");break;default:D+=" ui-datepicker-group-middle",T=""}D+="'>"}for(D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===k?U?o:n:"")+(/all|right/.test(T)&&0===k?U?n:o:"")+this._generateMonthYearHeader(e,J,ee,X,Z,k>0||C>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",M=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;w<7;w++)A=(w+d)%7,M+="<th"+((w+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[A]+"'>"+p[A]+"</span></th>";for(D+=M+"</tr></thead><tbody>",E=this._getDaysInMonth(ee,J),ee===e.selectedYear&&J===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,E)),I=(this._getFirstDayOfMonth(ee,J)-d+7)%7,P=Math.ceil((I+E)/7),F=Q&&this.maxRows>P?this.maxRows:P,this.maxRows=F,z=this._daylightSavingAdjust(new Date(ee,J,1-I)),H=0;H<F;H++){for(D+="<tr>",R=u?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",w=0;w<7;w++)N=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],$=z.getMonth()!==J,O=$&&!y||!N[0]||X&&z<X||Z&&z>Z,R+="<td class='"+((w+d+6)%7>=5?" ui-datepicker-week-end":"")+($?" ui-datepicker-other-month":"")+(z.getTime()===S.getTime()&&J===e.selectedMonth&&e._keyEvent||_.getTime()===z.getTime()&&_.getTime()===S.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" ui-state-disabled":"")+($&&!v?"":" "+N[1]+(z.getTime()===K.getTime()?" "+this._currentClass:"")+(z.getTime()===B.getTime()?" ui-datepicker-today":""))+"'"+($&&!v||!N[2]?"":" title='"+N[2].replace(/'/g,"&#39;")+"'")+(O?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+($&&!v?"&#xa0;":O?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===B.getTime()?" ui-state-highlight":"")+(z.getTime()===K.getTime()?" ui-state-active":"")+($?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);D+=R+"</tr>"}J++,J>11&&(J=0,ee++),D+="</tbody></table>"+(Q?"</div>"+(q[0]>0&&C===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=D}b+=x}return b+=c,e._keyEvent=!1,b},_generateMonthYearHeader:function(e,t,i,n,r,o,s,a){var l,c,d,u,h,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",b="";if(o||!g)b+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=r&&r.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=n.getMonth())&&(!c||d<=r.getMonth())&&(b+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+a[d]+"</option>");b+="</select>"}if(y||(_+=b+(!o&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)_+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},f=p(u[0]),m=Math.max(f,p(u[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=r?Math.min(m,r.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",_+=e.yearshtml,e.yearshtml=null}return _+=this._get(e,"yearSuffix"),y&&(_+=(!o&&g&&v?"":"&#xa0;")+b),_+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),r=e.drawMonth+("M"===i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+("D"===i?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,o)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&t<i?i:t;return n&&r>n?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(t<0?t:r[0]*r[1]),1));return t<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i,n,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),s=null,a=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),s=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!s||t.getFullYear()>=s)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.1",window["DP_jQuery_"+a]=e}(jQuery),function(e,t){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.1",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),
e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),r=i.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?(t.target===n[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(r.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var r,o;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),r=n.click,n.click=function(){r.apply(t.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(o).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,r){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(r))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(r,o){n.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",r,t(o))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,r=n.resizable,o=this.uiDialog.css("position"),s="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(r))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(r,o){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",r,t(o))}}).css("position",o)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var r=this,o=!1,s={};e.each(t,function(e,t){r._setOption(e,t),e in i&&(o=!0),e in n&&(s[e]=t)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(e,t){var i,n,r=this.uiDialog;"dialogClass"===e&&r.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=r.is(":data(ui-draggable)"),i&&!t&&r.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=r.is(":data(ui-resizable)"),n&&!t&&r.resizable("destroy"),n&&"string"==typeof t&&r.resizable("option","handles",t),!n&&t!==!1&&this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_createOverlay:function(){this.options.modal&&(e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(t){!e(t.target).closest(".ui-dialog").length&&!e(t.target).closest(".ui-datepicker").length&&(t.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++)},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],r=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),i={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e,t){e.widget("ui.menu",{version:"1.10.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,o,s,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,r=this.previousFilter||"",o=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),o===r?s=!0:o=r+o,a=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(t.keyCode),a=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,r,o,s,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=t.height(),r<0?this.activeMenu.scrollTop(o+r):r+a>s&&this.activeMenu.scrollTop(o+r-s+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,r;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-r<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,r;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+r>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.1",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e,t){var i=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=[];for(i=n.values&&n.values.length||1,r.length>i&&(r.slice(i).remove(),r=r.slice(0,i)),t=r.length;t<i;t++)s.push(o);this.handles=r.add(e(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,r,o,s,a,l,c,d=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-d.values(t));(r>i||r===i&&(t===d._lastChangedValue||d.values(t)===u.min))&&(r=i,o=e(this),s=t)}),a=this._start(t,s),a!==!1&&(this._mouseSliding=!0,this._handleIndex=s,o.addClass("ui-state-active").focus(),l=o.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,r,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),o=this._valueMin()+n*r,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,r,o;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&i<n)&&(i=n),i!==this.values(t)&&(r=this.values(),r[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:r}),n=this.values(t?0:1),o!==!1&&this.values(t,i,!0))):i!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:i}),o!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,r,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,r=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var n,r=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<r;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,r,o,s=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](d,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),r=this._valueMin(),o=this._valueMax(),i=o!==r?(n-r)/(o-r)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](d,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(t){var n,r,o,s,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,a),n===!1))return}switch(s=this.options.step,r=o=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/i);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/i);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;o=this._trimAlignValue(r+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;o=this._trimAlignValue(r-s)}this._slide(t,a,o)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var r=i.attr(n);void 0!==r&&r.length&&(t[n]=r)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t)return!(!this.spinning&&!this._start(e))&&(this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault(),void 0)},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),
t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return this._start(t)!==!1&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&this._trigger("start",e)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++r}function n(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var r=0,o=/#.*$/;e.widget("ui.tabs",{version:"1.10.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(i.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,r){if(e(r).attr("aria-controls")===n)return t=i,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&t!==-1||(t=!!this.tabs.length&&0)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=!i&&0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(n),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(n!==this.options.active&&n),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,r),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>r&&(t=0),t<0&&(t=r),t}for(var r=this.tabs.length-1;e.inArray(n(),this.options.disabled)!==-1;)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,r){var o,s,a,l=e(r).uniqueId().attr("id"),c=e(r).closest("li"),d=c.attr("aria-controls");n(r)?(o=r.hash,s=t.element.find(t._sanitizeSelector(o))):(a=t._tabId(c),o="#"+a,s=t.element.find(o),s.length||(s=t._createPanel(a),s.insertAfter(t.panels[i-1]||t.tablist)),s.attr("aria-live","polite")),s.length&&(t.panels=t.panels.add(s)),d&&c.data("ui-tabs-aria-controls",d),c.attr({"aria-controls":o.substring(1),"aria-labelledby":l}),s.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget),o=r.closest("li"),s=o[0]===n[0],a=s&&i.collapsible,l=a?e():this._getPanelForTab(o),c=n.length?this._getPanelForTab(n):e(),d={oldTab:n,oldPanel:c,newTab:a?e():o,newPanel:l};t.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||s&&!i.collapsible||this._trigger("beforeActivate",t,d)===!1||(i.active=!a&&this.tabs.index(o),this.active=s?e():o,this.xhr&&this.xhr.abort(),!c.length&&!l.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),t),this._toggle(t,d))},_toggle:function(t,i){function n(){o.running=!1,o._trigger("activate",t,i)}function r(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&o.options.show?o._show(s,o.options.show,n):(s.show(),n())}var o=this,s=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),r()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),s.length&&a.length?i.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),e.inArray(i,n)!==-1)return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var r=this,o=this.tabs.eq(t),s=o.find(".ui-tabs-anchor"),a=this._getPanelForTab(o),l={tab:o,panel:a};n(s[0])||(this.xhr=e.ajax(this._ajaxSettings(s,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),r._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&r.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)})))},_ajaxSettings:function(t,i,n){var r=this;return{url:t.attr("href"),beforeSend:function(t,o){return r._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:o},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(i,n);r!==-1&&n.splice(r,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.10.1",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n[0],t.close(r,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,r=this,o=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&r._delay(function(){t&&(t.type=o),this._open(t,e,i)})}),void(i&&this._open(t,e,i)))},_open:function(i,n,r){function o(e){c.of=e,s.is(":hidden")||s.position(c)}var s,a,l,c=e.extend({},this.options.position);if(r){if(s=this._find(n),s.length)return void s.find(".ui-tooltip-content").html(r);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),s=this._tooltip(n),t(n,s.attr("id")),s.find(".ui-tooltip-content").html(r),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):s.position(e.extend({of:n},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){s.is(":visible")&&(o(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:s}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(s)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(t){var n=this,r=e(t?t.currentTarget:this.element),o=this._find(r);this.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&r.attr("title",r.data("ui-tooltip-title")),i(r),o.stop(!0),this._hide(o,this.options.hide,function(){n._removeTooltip(e(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,r=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(r),r.appendTo(this.document[0].body),this.tooltips[i]=t,r},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n[0],t.close(r,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),jQuery.effects||function(e,t){var i="ui-effects-";e.effects={effect:{}},function(e,t){function i(e,t,i){var n=u[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),f(l,function(e,r){var o,s=r.re.exec(t),a=s&&r.parse(s),l=r.space||"rgba";if(a)return o=i[l](a),i[d[l].cache]=o[d[l].cache],n=i._rgba=o._rgba,!1}),n.length?("0,0,0,0"===n.join()&&e.extend(n,o.transparent),i):o[t]}function r(e,t,i){return i=(i+1)%1,6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}var o,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,r){return new e.Color.fn.parse(t,i,n,r)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=c.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(r,s,a,l){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(s),s=t);var u=this,h=e.type(r),p=this._rgba=[];return s!==t&&(r=[r,s,a,l],h="array"),"string"===h?this.parse(n(r)||o._default):"array"===h?(f(d.rgba.props,function(e,t){p[t.idx]=i(r[t.idx],t)}),this):"object"===h?(r instanceof c?f(d,function(e,t){r[t.cache]&&(u[t.cache]=r[t.cache].slice())}):f(d,function(t,n){var o=n.cache;f(n.props,function(e,t){if(!u[o]&&n.to){if("alpha"===e||null==r[e])return;u[o]=n.to(u._rgba)}u[o][t.idx]=i(r[e],t,!0)}),u[o]&&e.inArray(null,u[o].slice(0,3))<0&&(u[o][3]=1,n.from&&(u._rgba=n.from(u[o])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return f(d,function(e,r){var o,s=t[r.cache];return s&&(o=n[r.cache]||r.to&&r.to(n._rgba)||[],f(r.props,function(e,t){if(null!=s[t.idx])return i=s[t.idx]===o[t.idx]})),i}),i},_space:function(){var e=[],t=this;return f(d,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),r=n._space(),o=d[r],s=0===this.alpha()?c("transparent"):this,a=s[o.cache]||o.to(s._rgba),l=a.slice();return n=n[o.cache],f(o.props,function(e,r){var o=r.idx,s=a[o],c=n[o],d=u[r.type]||{};null!==c&&(null===s?l[o]=c:(d.mod&&(c-s>d.mod/2?s+=d.mod:s-c>d.mod/2&&(s-=d.mod)),l[o]=i((c-s)*t+s,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),r=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*r[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,r=e[1]/255,o=e[2]/255,s=e[3],a=Math.max(n,r,o),l=Math.min(n,r,o),c=a-l,d=a+l,u=.5*d;return t=l===a?0:n===a?60*(r-o)/c+360:r===a?60*(o-n)/c+120:60*(n-r)/c+240,i=0===c?0:u<=.5?c/d:c/(2-d),[Math.round(t)%360,i,u,null==s?1:s]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],s=n<=.5?n*(1+i):n+i-n*i,a=2*n-s;return[Math.round(255*r(a,s,t+1/3)),Math.round(255*r(a,s,t)),Math.round(255*r(a,s,t-1/3)),o]},f(d,function(n,r){var o=r.props,s=r.cache,l=r.to,d=r.from;c.fn[n]=function(n){if(l&&!this[s]&&(this[s]=l(this._rgba)),n===t)return this[s].slice();var r,a=e.type(n),u="array"===a||"object"===a?n:arguments,h=this[s].slice();return f(o,function(e,t){var n=u["object"===a?e:t.idx];null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)}),d?(r=c(d(h)),r[s]=h,r):c(h)},f(o,function(t,i){c.fn[t]||(c.fn[t]=function(r){var o,s=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),d=c[i.idx];return"undefined"===s?d:("function"===s&&(r=r.call(this,d),s=e.type(r)),null==r&&i.empty?this:("string"===s&&(o=a.exec(r),o&&(r=d+parseFloat(o[2])*("+"===o[1]?1:-1))),c[i.idx]=r,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,r){var o,s,a="";if("transparent"!==r&&("string"!==e.type(r)||(o=n(r)))){if(r=c(o||r),!h.rgba&&1!==r._rgba[3]){for(s="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&s&&s.style;)try{a=e.css(s,"backgroundColor"),s=s.parentNode}catch(e){}r=r.blend(a&&"transparent"!==a?a:"_default")}r=r.toRgbaString()}try{t.style[i]=r}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(s),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var i,n,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(n=r.length;n--;)i=r[n],"string"==typeof r[i]&&(o[e.camelCase(i)]=r[i]);else for(i in r)"string"==typeof r[i]&&(o[i]=r[i]);return o}function n(t,i){var n,r,s={};for(n in i)r=i[n],t[n]!==r&&!o[n]&&(e.fx.step[n]||!isNaN(parseFloat(r)))&&(s[n]=r);return s}var r=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,s,a){var l=e.speed(o,s,a);return this.queue(function(){var o,s=e(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){var t=e(this);return{el:t,start:i(this)}}),o=function(){e.each(r,function(e,i){t[i]&&s[i+"Class"](t[i])})},o(),c=c.map(function(){return this.end=i(this.el[0]),this.diff=n(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(s[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,n,r){return i?e.effects.animateClass.call(this,{add:t},i,n,r):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,n,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:t},i,n,r):this._removeClass.apply(this,arguments)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,n,r,o,s){return"boolean"==typeof n||n===t?r?e.effects.animateClass.call(this,n?{add:i}:{remove:i},r,o,s):this._toggleClass(i,n):e.effects.animateClass.call(this,{toggle:i},n,r,o)},switchClass:function(t,i,n,r,o){return e.effects.animateClass.call(this,{add:i,remove:t},n,r,o)}})}(),function(){function n(t,i,n,r){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(r=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(r=n,n=i,i={}),e.isFunction(n)&&(r=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=r||i.complete,t}function r(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects.effect[t]}e.extend(e.effects,{version:"1.10.1",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var r,o;for(o=0;o<n.length;o++)null!==n[o]&&(r=e.data(i+n[o]),r===t&&(r=""),e.css(n[o],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}return t.wrap(n),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,r){return r=r||{},e.each(i,function(e,i){
var o=t.cssUnit(i);o[0]>0&&(r[i]=o[0]*n+o[1])}),r}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(o)&&o.call(r[0]),e.isFunction(t)&&t()}var r=e(this),o=i.complete,a=i.mode;(r.is(":hidden")?"hide"===a:"show"===a)?n():s.call(r[0],i,n)}var i=n.apply(this,arguments),r=i.mode,o=i.queue,s=e.effects.effect[i.effect];return e.fx.off||!s?r?this[r](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(t):this.queue(o||"fx",t)},_show:e.fn.show,show:function(e){if(r(e))return this._show.apply(this,arguments);var t=n.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(r(e))return this._hide.apply(this,arguments);var t=n.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(r(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:1-i(e*-2+2)/2}})}()}(jQuery),function(e,t){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,r){var o,s,a,l=e(this),c=["position","top","bottom","left","right","height","width"],d=e.effects.setMode(l,t.mode||"hide"),u=t.direction||"up",h=i.test(u),p=h?"height":"width",f=h?"top":"left",m=n.test(u),g={},v="show"===d;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),o=e.effects.createWrapper(l).css({overflow:"hidden"}),s=o[p](),a=parseFloat(o.css(f))||0,g[p]=v?s:0,m||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:s+a),v&&(o.css(p,0),m||o.css(f,a+s)),o.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===d&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),r()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,i){var n,r,o,s=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(s,t.mode||"effect"),c="hide"===l,d="show"===l,u=t.direction||"up",h=t.distance,p=t.times||5,f=2*p+(d||c?1:0),m=t.duration/f,g=t.easing,v="up"===u||"down"===u?"top":"left",y="up"===u||"left"===u,_=s.queue(),b=_.length;for((d||c)&&a.push("opacity"),e.effects.save(s,a),s.show(),e.effects.createWrapper(s),h||(h=s["top"===v?"outerHeight":"outerWidth"]()/3),d&&(o={opacity:1},o[v]=0,s.css("opacity",0).css(v,y?2*-h:2*h).animate(o,m,g)),c&&(h/=Math.pow(2,p-1)),o={},o[v]=0,n=0;n<p;n++)r={},r[v]=(y?"-=":"+=")+h,s.animate(r,m,g).animate(o,m,g),h=c?2*h:h/2;c&&(r={opacity:0},r[v]=(y?"-=":"+=")+h,s.animate(r,m,g)),s.queue(function(){c&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()}),b>1&&_.splice.apply(_,[1,0].concat(_.splice(b,f+1))),s.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,i){var n,r,o,s=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(s,t.mode||"hide"),c="show"===l,d=t.direction||"vertical",u="vertical"===d,h=u?"height":"width",p=u?"top":"left",f={};e.effects.save(s,a),s.show(),n=e.effects.createWrapper(s).css({overflow:"hidden"}),r="IMG"===s[0].tagName?n:s,o=r[h](),c&&(r.css(h,0),r.css(p,o/2)),f[h]=c?o:0,f[p]=c?0:o/2,r.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,i){var n,r=e(this),o=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l?"pos":"neg",u={opacity:a?1:0};e.effects.save(r,o),r.show(),e.effects.createWrapper(r),n=t.distance||r["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&r.css("opacity",0).css(c,"pos"===d?-n:n),u[c]=(a?"pos"===d?"+=":"-=":"pos"===d?"-=":"+=")+n,r.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,i){function n(){_.push(this),_.length===u*h&&r()}function r(){p.css({visibility:"visible"}),e(_).remove(),m||p.hide(),i()}var o,s,a,l,c,d,u=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=u,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/h),y=Math.ceil(p.outerHeight()/u),_=[];for(o=0;o<u;o++)for(l=g.top+o*y,d=o-(u-1)/2,s=0;s<h;s++)a=g.left+s*v,c=s-(h-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*v,top:-o*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(m?c*v:0),top:l+(m?d*y:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:d*y),opacity:m?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e,t){e.effects.effect.fade=function(t,i){var n=e(this),r=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,i){var n,r,o=e(this),s=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,t.mode||"hide"),l="show"===a,c="hide"===a,d=t.size||15,u=/([0-9]+)%/.exec(d),h=!!t.horizFirst,p=l!==h,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(o,s),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),r=p?[n.width(),n.height()]:[n.height(),n.width()],u&&(d=parseInt(u[1],10)/100*r[c?0:1]),l&&n.css(h?{height:0,width:d}:{height:d,width:0}),g[f[0]]=l?r[0]:d,v[f[1]]=l?r[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,i){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(n,t.mode||"show"),s={backgroundColor:n.css("backgroundColor")};"hide"===o&&(s.opacity=0),e.effects.save(n,r),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,r),i()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,i){var n,r=e(this),o=e.effects.setMode(r,t.mode||"show"),s="show"===o,a="hide"===o,l=s||"hide"===o,c=2*(t.times||5)+(l?1:0),d=t.duration/c,u=0,h=r.queue(),p=h.length;for(!s&&r.is(":visible")||(r.css("opacity",0).show(),u=1),n=1;n<c;n++)r.animate({opacity:u},d,t.easing),u=1-u;r.animate({opacity:u},d,t.easing),r.queue(function(){a&&r.hide(),i()}),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,i){var n=e(this),r=e.effects.setMode(n,t.mode||"hide"),o="hide"===r,s=parseInt(t.percent,10)||150,a=s/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:i,percent:o?s:100,from:o?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),r=e.extend(!0,{},t),o=e.effects.setMode(n,t.mode||"effect"),s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===o?0:100),a=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},d={y:"horizontal"!==a?s/100:1,x:"vertical"!==a?s/100:1};r.effect="size",r.queue=!1,r.complete=i,"effect"!==o&&(r.origin=l||["middle","center"],r.restore=!0),r.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:c),r.to={height:c.height*d.y,width:c.width*d.x,outerHeight:c.outerHeight*d.y,outerWidth:c.outerWidth*d.x},r.fade&&("show"===o&&(r.from.opacity=0,r.to.opacity=1),"hide"===o&&(r.from.opacity=1,r.to.opacity=0)),n.effect(r)},e.effects.effect.size=function(t,i){var n,r,o,s=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],d=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(s,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=s.css("position"),y=f?a:l,_={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&s.show(),n={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},"toggle"===t.mode&&"show"===p?(s.from=t.to||_,s.to=t.from||n):(s.from=t.from||("show"===p?_:n),s.to=t.to||("hide"===p?_:n)),o={from:{y:s.from.height/n.height,x:s.from.width/n.width},to:{y:s.to.height/n.height,x:s.to.width/n.width}},"box"!==m&&"both"!==m||(o.from.y!==o.to.y&&(y=y.concat(u),s.from=e.effects.setTransition(s,u,o.from.y,s.from),s.to=e.effects.setTransition(s,u,o.to.y,s.to)),o.from.x!==o.to.x&&(y=y.concat(h),s.from=e.effects.setTransition(s,h,o.from.x,s.from),s.to=e.effects.setTransition(s,h,o.to.x,s.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(y=y.concat(d).concat(c),s.from=e.effects.setTransition(s,d,o.from.y,s.from),s.to=e.effects.setTransition(s,d,o.to.y,s.to)),e.effects.save(s,y),s.show(),e.effects.createWrapper(s),s.css("overflow","hidden").css(s.from),g&&(r=e.effects.getBaseline(g,n),s.from.top=(n.outerHeight-s.outerHeight())*r.y,s.from.left=(n.outerWidth-s.outerWidth())*r.x,s.to.top=(n.outerHeight-s.to.outerHeight)*r.y,s.to.left=(n.outerWidth-s.to.outerWidth)*r.x),s.css(s.from),"content"!==m&&"both"!==m||(u=u.concat(["marginTop","marginBottom"]).concat(d),h=h.concat(["marginLeft","marginRight"]),c=a.concat(u).concat(h),s.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,c),i.from={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},i.to={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x},o.from.y!==o.to.y&&(i.from=e.effects.setTransition(i,u,o.from.y,i.from),i.to=e.effects.setTransition(i,u,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=e.effects.setTransition(i,h,o.from.x,i.from),i.to=e.effects.setTransition(i,h,o.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,c)})})),s.animate(s.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===s.to.opacity&&s.css("opacity",s.from.opacity),"hide"===p&&s.hide(),e.effects.restore(s,y),f||("static"===v?s.css({position:"relative",top:s.to.top,left:s.to.left}):e.each(["top","left"],function(e,t){s.css(t,function(t,i){var n=parseInt(i,10),r=e?s.to.left:s.to.top;return"auto"===i?r+"px":n+r+"px"})})),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,i){var n,r=e(this),o=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,d=2*c+1,u=Math.round(t.duration/d),h="up"===a||"down"===a?"top":"left",p="up"===a||"left"===a,f={},m={},g={},v=r.queue(),y=v.length;for(e.effects.save(r,o),r.show(),e.effects.createWrapper(r),f[h]=(p?"-=":"+=")+l,m[h]=(p?"+=":"-=")+2*l,g[h]=(p?"-=":"+=")+2*l,r.animate(f,u,t.easing),n=1;n<c;n++)r.animate(m,u,t.easing).animate(g,u,t.easing);r.animate(m,u,t.easing).animate(f,u/2,t.easing).queue(function(){"hide"===s&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,d+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,i){var n,r=e(this),o=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,u={};e.effects.save(r,o),r.show(),n=t.distance||r["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),a&&r.css(c,d?isNaN(n)?"-"+n:-n:n),u[c]=(a?d?"+=":"-=":d?"-=":"+=")+n,r.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,i){var n=e(this),r=e(t.to),o="fixed"===r.css("position"),s=e("body"),a=o?s.scrollTop():0,l=o?s.scrollLeft():0,c=r.offset(),d={top:c.top-a,left:c.left-l,height:r.innerHeight(),width:r.innerWidth()},u=n.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:u.top-a,left:u.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(d,t.duration,t.easing,function(){h.remove(),i()})}}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.propHooks.elements={get:function(t){return e.nodeName(t,"form")?e.grep(t.elements,function(t){return!e.nodeName(t,"input")||"file"!==t.type}):null}},e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(e){return e.serializeArray()},add:function(e,t){t.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date,this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:t.formData?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_onProgress:function(e,t){if(e.lengthComputable){var i,n,r=+new Date;if(t._time&&t.progressInterval&&r-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=r,i=t.total||this._getTotal(t.files),n=parseInt(e.loaded/e.total*(t.chunkSize||i),10)+(t.uploadedBytes||0),this._loaded+=n-(t.loaded||t.uploadedBytes||0),t.lengthComputable=!0,t.loaded=n,t.total=i,t.bitrate=t._bitrateTimer.getBitrate(r,n,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(r,this._loaded,t.bitrateInterval)})}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_initXHRData:function(t){var i,n=t.files[0],r=t.multipart||!e.support.xhrFileUpload,o=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),r?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:o,value:t.blob}):e.each(t.files,function(e,n){i.push({name:t.paramName[e]||o,value:n})})):(t.formData instanceof FormData?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"',i.append(o,t.blob,n.name)):e.each(t.files,function(e,n){(window.Blob&&n instanceof Blob||window.File&&n instanceof File)&&i.append(t.paramName[e]||o,n,n.name)})),t.data=i):(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"',t.contentType=n.type,t.data=t.blob||n),t.blob=null},_initIframeSettings:function(t){t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&e("<a></a>").prop("href",t.url).prop("host")!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e,"iframe")},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)n.push(i),r-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var r=e.Deferred(),o=r.promise();return i=i||this.options.context||o,t===!0?r.resolveWith(i,n):t===!1&&r.rejectWith(i,n),o.abort=r.promise,this._enhancePromise(o)},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){var n,r,o=this,s=t.files[0],a=s.size,l=t.uploadedBytes=t.uploadedBytes||0,c=t.maxChunkSize||a,d=s.slice||s.webkitSlice||s.mozSlice,u=e.Deferred(),h=u.promise();return!(!(this._isXHRUpload(t)&&d&&(l||c<a))||t.data)&&(!!i||(l>=a?(s.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,t.context,[null,"error",s.error])):(r=function(){var i=e.extend({},t);i.blob=d.call(s,l,l+c,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,o._initXHRData(i),o._initProgressListener(i),n=(o._trigger("chunksend",null,i)!==!1&&e.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(n,s,c){l=o._getUploadedBytes(c)||l+i.chunkSize,(!i.loaded||i.loaded<i.total)&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=s,i.jqXHR=c,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),l<a?r():u.resolveWith(i.context,[n,s,c])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),u.rejectWith(i.context,[e,t,n])})},this._enhancePromise(h),h.abort=function(){return n.abort()},r(),h)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer),this._active+=1,this._loaded+=t.uploadedBytes||0,this._total+=this._getTotal(t.files)},_onDone:function(t,i,n,r){if(!this._isXHRUpload(r)||!r.loaded||r.loaded<r.total){var o=this._getTotal(r.files)||1;this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r)}r.result=t,r.textStatus=i,r.jqXHR=n,this._trigger("done",null,r)},_onFail:function(e,t,i,n){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,this._trigger("fail",null,n),n.recalculateProgress&&(this._loaded-=n.loaded||n.uploadedBytes||0,this._total-=n.total||this._getTotal(n.files))},_onAlways:function(e,t,i,n){this._active-=1,this._trigger("always",null,n),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(t,i){var n,r,o,s,a=this,l=a._getAJAXSettings(i),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((r||a._trigger("send",t,l)===!1)&&a._getXHRPromise(!1,l.context,r)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._sending-=1,a._onAlways(e,t,i,l),l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n,r=a._slots.shift();r;){if(n=r.state?"pending"===r.state():!r.isRejected()){r.resolve();break}r=a._slots.shift()}})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),s=o.pipe(c)):s=this._sequence=this._sequence.pipe(c,c),s.abort=function(){return r=[void 0,"abort","abort"],n?n.abort():(o&&o.rejectWith(l.context,r),c())},this._enhancePromise(s)):c()},_onAdd:function(t,i){var n,r,o,s,a=this,l=!0,c=e.extend({},this.options,i),d=c.limitMultiFileUploads,u=this._getParamName(c);if((c.singleFileUploads||d)&&this._isXHRUpload(c))if(!c.singleFileUploads&&d)for(o=[],n=[],s=0;s<i.files.length;s+=d)o.push(i.files.slice(s,s+d)),r=u.slice(s,s+d),r.length||(r=u),n.push(r);else n=u;else o=[i.files],n=[u];return i.originalFiles=i.files,e.each(o||i.files,function(r,s){var c=e.extend({},i);return c.files=o?s:[s],c.paramName=n[r],c.submit=function(){return c.jqXHR=this.jqXHR=a._trigger("submit",t,this)!==!1&&a._onSend(t,this),this.jqXHR},l=a._trigger("add",t,c)}),l},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,n){return n===t[0]?i[0]:n}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var n,r=this,o=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,o.resolve(t._file)):t.file(function(e){e.relativePath=i,o.resolve(e)},s):t.isDirectory?(n=t.createReader(),n.readEntries(function(e){r._handleFileTreeEntries(e,i+t.name+"/").done(function(e){o.resolve(e)}).fail(s)},s)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,n,r=t.prop("webkitEntries")||t.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(n=t.prop("value"),!n)return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(e){n.files=e,i.options.replaceFileInput&&i._replaceFileInput(n.fileInput),i._trigger("change",t,n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent.clipboardData,n=i&&i.items||[],r={files:[]};if(e.each(n,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&r.files.push(i)}),this._trigger("paste",t,r)===!1||this._onAdd(t,r)===!1)return!1},_onDrop:function(e){var t=this,i=e.dataTransfer=e.originalEvent.dataTransfer,n={};i&&i.files&&i.files.length&&e.preventDefault(),this._getDroppedFiles(i).always(function(i){n.files=i,t._trigger("drop",e,n)!==!1&&t._onAdd(e,n)})},_onDragOver:function(t){var i=t.dataTransfer=t.originalEvent.dataTransfer;return this._trigger("dragover",t)!==!1&&void(i&&e.inArray("Files",i.types)!==-1&&(i.dropEffect="copy",t.preventDefault()))},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=e.inArray(t,this._refreshOptionsList)!==-1;n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_create:function(){var t=this.options;e.extend(t,e(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,r=this,o=e.Deferred(),s=o.promise();return s.abort=function(){return n=!0,i?i.abort():(o.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){n||(t.files=e,i=r._onSend(null,t).then(function(e,t,i){o.resolve(e,t,i)},function(e,t,i){o.reject(e,t,i)}))}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){void 0==e.fn.inputmask&&(e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:e.noop,onKeyDown:e.noop,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",numericInput:!1,radixPoint:"",rightAlignNumerics:!0,definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(e,t,i){var n=e.length;return!t&&1<i&&(n+=e.length*(i-1)),n}},val:e.fn.val,escapeRegex:function(e){return e.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","gim"),"\\$1")}},e.fn.inputmask=function(t,n){function r(t,i){var n=H.aliases[t];return!!n&&(n.alias&&r(n.alias),e.extend(!0,H,n),e.extend(!0,H,i),!0)}function o(t){var i=!1,n=0,r=H.greedy,o=H.repeat;1==t.length&&0==r&&(H.placeholder="");for(var t=e.map(t.split(""),function(e){var t=[];if(e==H.escapeChar)i=!0;else if(e!=H.optionalmarker.start&&e!=H.optionalmarker.end||i){var r=H.definitions[e];if(r&&!i)for(e=0;e<r.cardinality;e++)t.push(f(n+e));else t.push(e),i=!1;return n+=t.length,t}}),s=t.slice(),a=1;a<o&&r;a++)s=s.concat(t.slice());return{mask:s,repeat:o,greedy:r}}function s(t){var i=!1,n=!1,r=!1;return e.map(t.split(""),function(e){var t=[];if(e==H.escapeChar)n=!0;else if(e!=H.optionalmarker.start||n){if(e!=H.optionalmarker.end||n){var o=H.definitions[e];if(o&&!n){for(var s=o.prevalidator,a=s?s.length:0,l=1;l<o.cardinality;l++){var c=a>=l?s[l-1]:[],d=c.validator,c=c.cardinality;t.push({fn:d?"string"==typeof d?RegExp(d):new function(){this.test=d}:/./,cardinality:c?c:1,optionality:i,newBlockMarker:1==i&&r,offset:0,casing:o.casing,def:o.definitionSymbol|e}),1==i&&(r=!1)}t.push({fn:o.validator?"string"==typeof o.validator?RegExp(o.validator):new function(){this.test=o.validator}:/./,cardinality:o.cardinality,optionality:i,newBlockMarker:r,offset:0,casing:o.casing,def:o.definitionSymbol|e})}else t.push({fn:null,cardinality:0,optionality:i,newBlockMarker:r,offset:0,casing:null,def:e}),n=!1;return r=!1,t}i=!1,r=!0}else r=i=!0})}function a(){function t(e,r){var a=0,l=0,c=r.length;for(i=0;i<c&&(r.charAt(i)==H.optionalmarker.start&&a++,r.charAt(i)==H.optionalmarker.end&&l++,!(0<a&&a==l));i++);a=[r.substring(0,i)],i<c&&a.push(r.substring(i+1,c));var d,l=a[0];for(d=l.length,i=0;i<d&&l.charAt(i)!=H.optionalmarker.start;i++);c=[l.substring(0,i)],i<d&&c.push(l.substring(i+1,d)),1<c.length?(l=e+c[0]+(H.optionalmarker.start+c[1]+H.optionalmarker.end)+(1<a.length?a[1]:""),d=o(l),n.push({mask:l,_buffer:d.mask,tests:s(l),lastValidPosition:void 0,greedy:d.greedy,repeat:d.repeat}),l=e+c[0]+(1<a.length?a[1]:""),d=o(l),n.push({mask:l,_buffer:d.mask,tests:s(l),lastValidPosition:void 0,greedy:d.greedy,repeat:d.repeat}),1<a.length&&1<a[1].split(H.optionalmarker.start).length&&(t(e+c[0]+(H.optionalmarker.start+c[1]+H.optionalmarker.end),a[1]),t(e+c[0],a[1]))):(l=e+a,d=o(l),n.push({mask:l,_buffer:d.mask,tests:s(l),lastValidPosition:void 0,greedy:d.greedy,repeat:d.repeat}))}var n=[];return e.isArray(H.mask)?e.each(H.mask,function(e,i){t("",i.toString())}):t("",H.mask.toString()),n}function l(){return L[B].tests}function c(){return L[B]._buffer}function d(t,i,n,r,o){function s(e,t){for(var o=p(e),s=i?1:0,a="",l=t.tests[o].cardinality;l>s;l--)a+=_(n,o-(l-1));return i&&(a+=i),null!=t.tests[o].fn&&t.tests[o].fn.test(a,n,e,r,H)}if(r)return s(t,L[B]);var a=[],l=!1,c=B;return e.each(L,function(e){B=e;var r=t;if(c!=B&&!h(t)){if(i==this._buffer[r]||i==H.skipOptionalPartCharacter)return a[e]={refresh:!0},this.lastValidPosition=r,!1;r=o?v(n,t):g(n,t)}(void 0==this.lastValidPosition||o||H.numericInput?this.lastValidPosition<=H.numericInput?m(n):g(n,r):this.lastValidPosition>=v(n,r))&&0<=r&&r<m(n)&&(a[e]=s(r,this),!1!==a[e]?(!0===a[e]&&(a[e]={pos:r}),this.lastValidPosition=a[e].pos||r):this.lastValidPosition=o?t==m(n)?void 0:g(n,t):0==t?void 0:v(n,t))}),B=c,u(n,t,c,o),l=a[B]||l,setTimeout(function(){H.onKeyValidation.call(this,l,H);
},0),l}function u(t,i,n,r){e.each(L,function(e){if(this.lastValidPosition&&(r||H.numericInput)?this.lastValidPosition<=i:this.lastValidPosition>=i){if(B=e,B!=n){var e=m(t),o=c();(r||H.numericInput)&&(t.reverse(),o.reverse());for(var s=t.length=i;s<e;s++){var a=p(s);y(t,s,_(o,a))}r&&t.reverse()}return!1}})}function h(e){return e=p(e),e=l()[e],void 0!=e&&e.fn}function p(e){return e%l().length}function f(e){return H.placeholder.charAt(e%H.placeholder.length)}function m(e){return H.getMaskLength(c(),L[B].greedy,L[B].repeat,e,H)}function g(e,t){var i=m(e);if(t>=i)return i;for(var n=t;++n<i&&!h(n););return n}function v(e,t){var i=t;if(0>=i)return 0;for(;0<--i&&!h(i););return i}function y(e,t,i){var n=l()[p(t)],r=i;if(void 0!=r)switch(n.casing){case"upper":r=i.toUpperCase();break;case"lower":r=i.toLowerCase()}e[t]=r}function _(e,t,i){return i&&(t=b(e,t)),e[t]}function b(e,t,i){if(i)for(;0>t&&e.length<m(e);)for(i=c().length-1,t=c().length;void 0!==c()[i];)e.unshift(c()[i--]);else for(;void 0==e[t]&&e.length<m(e);)for(i=0;void 0!==c()[i];)e.push(c()[i++]);return t}function w(e,t,i){e._valueSet(t.join("")),void 0!=i&&A(e,i)}function k(e,t,i){for(var n=m(e);t<i&&t<n;t++)y(e,t,_(c().slice(),t))}function x(e,t){var i=p(t);y(e,t,_(c(),i))}function C(t,i,n,r){var o=e(t).data("inputmask").isRTL,s=T(t._valueGet(),o).split(""),a=m(i);if(o){var u=s.reverse();u.length=a;for(var v=0;v<a;v++){var b=p(a-(v+1));null==l()[b].fn&&u[v]!=_(c(),b)?(u.splice(v,0,_(c(),b)),u.length=a):u[v]=u[v]||_(c(),b)}s=u.reverse()}k(i,0,i.length),i.length=c().length;for(var C,S=u=-1,D=s.length,b=0==D?a:-1,v=0;v<D;v++)for(var M=S+1;M<a;M++){if(h(M)){var A=s[v];!1!==(C=d(M,A,i,!n,o))?(!0!==C&&(M=void 0!=C.pos?C.pos:M,A=void 0!=C.c?C.c:A),y(i,M,A),u=S=M):(x(i,M),A==f(M)&&(b=S=M));break}if(x(i,M),u==S&&(u=M),S=M,s[v]==_(i,M))break}if(0==L[B].greedy){for(v=T(i.join(""),o).split(""),s=v.length,S=0;S<s;S++)i[S]=v[S];i.length=v.length}return n&&w(t,i),o?H.numericInput?""!=H.radixPoint&&-1!=e.inArray(H.radixPoint,i)&&!0!==r?e.inArray(H.radixPoint,i):g(i,a):g(i,b):g(i,u)}function S(t){return e.inputmask.escapeRegex.call(this,t)}function T(e,t){return t?e.replace(RegExp("^("+S(c().join(""))+")*"),""):e.replace(RegExp("("+S(c().join(""))+")*$"),"")}function D(t,i){C(t,i,!1);var n,r,o=i.slice();if(e(t).data("inputmask").isRTL)for(r=0;r<=o.length-1&&(n=p(r),l()[n].optionality)&&(!h(r)||!d(r,i[r],i,!0));r++)o.splice(0,1);else for(r=o.length-1;0<=r&&(n=p(r),l()[n].optionality)&&(!h(r)||!d(r,i[r],i,!0));r--)o.pop();w(t,o)}function M(t,i){var n=t[0];if(l()&&(!0===i||!t.hasClass("hasDatepicker"))){var r=c().slice();return C(n,r),e.map(r,function(e,t){return h(t)&&d(t,e,r,!0)?e:null}).join("")}return n._valueGet()}function A(t,i,n){var r=t.jquery&&0<t.length?t[0]:t;return"number"!=typeof i?e(t).is(":visible")?(r.setSelectionRange?(i=r.selectionStart,n=r.selectionEnd):document.selection&&document.selection.createRange&&(range=document.selection.createRange(),i=0-range.duplicate().moveStart("character",-1e5),n=i+range.text.length),{begin:i,end:n}):{begin:0,end:0}:void(e(t).is(":visible")&&(n="number"==typeof n?n:i,0==H.insertMode&&i==n&&n++,r.setSelectionRange?$?(setTimeout(function(){r.selectionStart=i,r.selectionEnd=$?i:n},10),P=i,F=n):(r.selectionStart=i,r.selectionEnd=n):r.createTextRange&&(range=r.createTextRange(),range.collapse(!0),range.moveEnd("character",n),range.moveStart("character",i),range.select())))}function E(t){var i=!1,n=0,r=B;return e.each(L,function(e,r){B=e;var o=m(t);if(r.lastValidPosition&&r.lastValidPosition>=n&&r.lastValidPosition==o-1){for(var s=!0,a=0;a<o;a++){var l=h(a);if(l&&t[a]==f(a)||!l&&t[a]!=c()[a]){s=!1;break}}if(i=i||s)return!1}n=r.lastValidPosition}),B=r,i}function I(t){function i(t){t=e._data(t).events,e.each(t,function(t,i){e.each(i,function(e,t){if("inputmask"==t.namespace){var i=t.handler;t.handler=function(){return!this.readOnly&&!this.disabled&&i.apply(this,arguments)}}})})}function n(t){var i;Object.getOwnPropertyDescriptor&&(i=Object.getOwnPropertyDescriptor(t,"value")),i&&i.get?t._valueGet||(t._valueGet=i.get,t._valueSet=i.set,Object.defineProperty(t,"value",{get:function(){var t=e(this),i=e(this).data("inputmask"),n=i.masksets,r=i.activeMasksetIndex;return i&&i.autoUnmask?t.inputmask("unmaskedvalue"):this._valueGet()!=n[r]._buffer.join("")?this._valueGet():""},set:function(t){this._valueSet(t),e(this).triggerHandler("setvalue.inputmask")}})):document.__lookupGetter__&&t.__lookupGetter__("value")?t._valueGet||(t._valueGet=t.__lookupGetter__("value"),t._valueSet=t.__lookupSetter__("value"),t.__defineGetter__("value",function(){var t=e(this),i=e(this).data("inputmask"),n=i.masksets,r=i.activeMasksetIndex;return i&&i.autoUnmask?t.inputmask("unmaskedvalue"):this._valueGet()!=n[r]._buffer.join("")?this._valueGet():""}),t.__defineSetter__("value",function(t){this._valueSet(t),e(this).triggerHandler("setvalue.inputmask")})):(t._valueGet||(t._valueGet=function(){return this.value},t._valueSet=function(e){this.value=e}),1!=e.fn.val.inputmaskpatch&&(e.fn.val=function(){if(0==arguments.length){var t=e(this);if(t.data("inputmask")){if(t.data("inputmask").autoUnmask)return t.inputmask("unmaskedvalue");var t=e.inputmask.val.apply(t),i=e(this).data("inputmask");return t!=i.masksets[i.activeMasksetIndex]._buffer.join("")?t:""}return e.inputmask.val.apply(t)}var n=arguments;return this.each(function(){var t=e(this),i=e.inputmask.val.apply(t,n);return t.data("inputmask")&&t.triggerHandler("setvalue.inputmask"),i})},e.extend(e.fn.val,{inputmaskpatch:!0})))}function r(e,t){if(H.numericInput&&""!=H.radixPoint){var i=e._valueGet().indexOf(H.radixPoint);Y=t.begin<=i||t.end<=i||-1==i}}function o(e,t,i){for(;!h(e)&&0<=e-1;)e--;for(var n=e;n<t&&n<m(O);n++)if(h(n)){x(O,n);var r=g(O,n),o=_(O,r);if(o!=f(r)){if(r<m(O)&&!1!==d(n,o,O,!0,Y)&&l()[p(n)].def==l()[p(r)].def)y(O,n,_(O,r)),x(O,r);else if(h(n))break}else if(void 0==i)break}else x(O,n);return void 0!=i&&y(O,Y?t:v(O,t),i),O=T(O.join(""),Y).split(""),0==O.length&&(O=c().slice()),e}function s(e,t,i,n){for(;e<=t&&e<m(O);e++)if(h(e)){var r=_(O,e);if(y(O,e,i),r!=f(e)){if(i=g(O,e),!(i<m(O)))break;if(!1!==d(i,r,O,!0,Y)&&l()[p(e)].def==l()[p(i)].def)i=r;else{if(h(i))break;i=r}}else if(!0!==n)break}else x(O,e);return n=O.length,O=T(O.join(""),Y).split(""),0==O.length&&(O=c().slice()),t-(n-O.length)}function a(t){W=!1;var i=this,n=t.keyCode,a=A(i);if(r(i,a),n==H.keyCode.BACKSPACE||n==H.keyCode.DELETE||N&&127==n){var l=m(O);if(0==a.begin&&a.end==l)B=0,O=c().slice(),w(i,O),A(i,C(i,O,!1));else if(1<a.end-a.begin||1==a.end-a.begin&&H.insertMode)k(O,a.begin,a.end),u(O,a.begin,B),w(i,O,Y?C(i,O,!1):a.begin);else{var d=z?a.end:a.begin;n==H.keyCode.DELETE?(d<G&&(d=G),d<l&&(H.numericInput&&""!=H.radixPoint&&O[d]==H.radixPoint?(d=O.length-1==d?d:g(O,d),d=o(d,l)):Y?(d=s(G,d,f(d),!0),d=g(O,d)):d=o(d,l),u(O,d,B),w(i,O,d))):n==H.keyCode.BACKSPACE&&d>G&&(d-=1,H.numericInput&&""!=H.radixPoint&&O[d]==H.radixPoint?(d=s(G,O.length-1==d?d:d-1,f(d),!0),d++):Y?(d=s(G,d,f(d),!0),d=O[d+1]==H.radixPoint?d+1:g(O,d)):d=o(d,l),u(O,d,B),w(i,O,d))}i._valueGet()==c().join("")&&e(i).trigger("cleared"),t.preventDefault()}else n==H.keyCode.END||n==H.keyCode.PAGE_DOWN?setTimeout(function(){var e=C(i,O,!1,!0);!H.insertMode&&e==m(O)&&!t.shiftKey&&e--,A(i,t.shiftKey?a.begin:e,e)},0):n==H.keyCode.HOME&&!t.shiftKey||n==H.keyCode.PAGE_UP?A(i,0,t.shiftKey?a.begin:0):n==H.keyCode.ESCAPE?(i._valueSet(V),A(i,0,C(i,O))):n==H.keyCode.INSERT?(H.insertMode=!H.insertMode,A(i,H.insertMode||a.begin!=m(O)?a.begin:a.begin-1)):t.ctrlKey&&88==n?setTimeout(function(){A(i,C(i,O,!0))},0):H.insertMode||(n==H.keyCode.RIGHT?(l=a.begin==a.end?a.end+1:a.end,l=l<m(O)?l:a.end,A(i,t.shiftKey?a.begin:l,t.shiftKey?l+1:l)):n==H.keyCode.LEFT&&(l=a.begin-1,l=0<l?l:0,A(i,l,t.shiftKey?a.end:l)));H.onKeyDown.call(this,t,O,H),j=-1!=e.inArray(n,H.ignorables)}function S(t){if(W)return!1;W=!0;var i=e(this),t=t||window.event,n=t.which||t.charCode||t.keyCode,r=String.fromCharCode(n);if(H.numericInput&&r==H.radixPoint){var a=this._valueGet().indexOf(H.radixPoint);A(this,g(O,-1!=a?a:m(O)))}if(t.metaKey||j)return!0;if(n){var l=A(this),c=m(O),n=!0;if(k(O,l.begin,l.end),Y){var u,a=v(O,l.end);if(!1!==(u=d(a==c||_(O,a)==H.radixPoint?v(O,a):a,r,O,!1,Y))){var h=!1;if(!0!==u&&(h=u.refresh,a=void 0!=u.pos?u.pos:a,r=void 0!=u.c?u.c:r),!0!==h)if(c=m(O),u=G,1==H.insertMode){if(1==L[B].greedy)for(h=O.slice();_(h,u,!0)!=f(u)&&u<=a;)u=u==c?c+1:g(O,u);u<=a&&(L[B].greedy||O.length<c)?(O[G]!=f(G)&&O.length<c&&(h=b(O,-1,Y),0!=l.end&&(a+=h),c=O.length),o(u,a,r)):n=!1}else y(O,a,r);n&&(w(this,O,H.numericInput?a+1:a),setTimeout(function(){E(O)&&i.trigger("complete")},0))}}else if(a=g(O,l.begin-1),b(O,a,Y),!1!==(u=d(a,r,O,!1,Y))){if(h=!1,!0!==u&&(h=u.refresh,a=void 0!=u.pos?u.pos:a,r=void 0!=u.c?u.c:r),!0!==h)if(1==H.insertMode){for(l=m(O),h=O.slice();_(h,l,!0)!=f(l)&&l>=a;)l=0==l?-1:v(O,l);l>=a?s(a,O.length,r):n=!1}else y(O,a,r);n&&(r=g(O,a),w(this,O,r),setTimeout(function(){E(O)&&i.trigger("complete")},0))}$&&A(this,P,F),t.preventDefault()}}function M(t){var i=e(this),n=t.keyCode;H.onKeyUp.call(this,t,O,H),n==H.keyCode.TAB&&i.hasClass("focus.inputmask")&&0==this._valueGet().length&&H.showMaskOnFocus&&(O=c().slice(),w(this,O),Y||A(this,0),V=this._valueGet())}var I=e(t);if(I.is(":input")){var O=c().slice();L[B].greedy=L[B].greedy?L[B].greedy:0==L[B].repeat;var U=I.prop("maxLength");m(O)>U&&-1<U&&(U<c().length&&(c().length=U),0==L[B].greedy&&(L[B].repeat=Math.round(U/c().length)),I.prop("maxLength",2*m(O))),I.data("inputmask",{masksets:L,activeMasksetIndex:B,autoUnmask:H.autoUnmask,definitions:H.definitions,isRTL:!1}),n(t);var O=c().slice(),V=t._valueGet(),W=!1,j=!1,q=-1,G=g(O,-1);v(O,m(O));var Y=!1;("rtl"==t.dir||H.numericInput)&&(("rtl"==t.dir||H.numericInput&&H.rightAlignNumerics)&&I.css("text-align","right"),t.dir="ltr",I.removeAttr("dir"),U=I.data("inputmask"),U.isRTL=!0,I.data("inputmask",U),Y=!0),I.unbind(".inputmask"),I.removeClass("focus.inputmask"),I.bind("mouseenter.inputmask",function(){if(!e(this).hasClass("focus.inputmask")&&H.showMaskOnHover){var t=this._valueGet().length;t<O.length&&(0==t&&(O=c().slice()),w(this,O))}}).bind("blur.inputmask",function(){var t=e(this),i=this._valueGet();t.removeClass("focus.inputmask"),i!=V&&t.change(),H.clearMaskOnLostFocus&&""!=i&&(i==c().join("")?this._valueSet(""):D(this,O)),E(O)||(t.trigger("incomplete"),H.clearIncomplete&&(H.clearMaskOnLostFocus?this._valueSet(""):(O=c().slice(),w(this,O))))}).bind("focus.inputmask",function(){var t=e(this),i=this._valueGet();H.showMaskOnFocus&&!t.hasClass("focus.inputmask")&&(!H.showMaskOnHover||H.showMaskOnHover&&""==i)&&(i=i.length,i<O.length&&(0==i&&(O=c().slice()),A(this,C(this,O,!0)))),t.addClass("focus.inputmask"),V=this._valueGet()}).bind("mouseleave.inputmask",function(){var t=e(this);H.clearMaskOnLostFocus&&(t.hasClass("focus.inputmask")||(this._valueGet()==c().join("")||""==this._valueGet()?this._valueSet(""):D(this,O)))}).bind("click.inputmask",function(){var e=this;setTimeout(function(){var t=A(e);if(t.begin==t.end){var i=t.begin;q=C(e,O,!1),r(e,t),Y?A(e,i>q&&(d(i,O[i],O,!0,Y)!==!1||!h(i))?i:q):A(e,i<q&&(d(i,O[i],O,!0,Y)!==!1||!h(i))?i:q)}},0)}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){A(e,0,q)},0)}).bind("keydown.inputmask",a).bind("keypress.inputmask",S).bind("keyup.inputmask",M).bind(R+".inputmask dragdrop.inputmask drop.inputmask",function(){var e=this;setTimeout(function(){A(e,C(e,O,!0)),E(O)&&I.trigger("complete")},0)}).bind("setvalue.inputmask",function(){V=this._valueGet(),C(this,O,!0),this._valueGet()==c().join("")&&this._valueSet("")}).bind("complete.inputmask",H.oncomplete).bind("incomplete.inputmask",H.onincomplete).bind("cleared.inputmask",H.oncleared);var Q,q=C(t,O,!0);try{Q=document.activeElement}catch(e){}Q===t?(I.addClass("focus.inputmask"),A(t,q)):H.clearMaskOnLostFocus&&(t._valueGet()==c().join("")?t._valueSet(""):D(t,O)),i(t)}}var P,F,z,H=e.extend(!0,{},e.inputmask.defaults,n),R=function(e){var t=document.createElement("input"),e="on"+e,i=e in t;return i||(t.setAttribute(e,"return;"),i="function"==typeof t[e]),i}("paste")?"paste":"input",N=null!=navigator.userAgent.match(/iphone/i),$=null!=navigator.userAgent.match(/android.*safari.*/i);if($){var O=navigator.userAgent.match(/safari.*/i);z=533>=parseInt(RegExp(/[0-9]+/).exec(O))}var L,B=0;if("string"==typeof t)switch(t){case"mask":return r(H.alias,n),L=a(),this.each(function(){I(this)});case"unmaskedvalue":return L=this.data("inputmask").masksets,B=this.data("inputmask").activeMasksetIndex,H.definitions=this.data("inputmask").definitions,M(this);case"remove":return this.each(function(){var t=e(this),i=this;setTimeout(function(){if(t.data("inputmask")){L=t.data("inputmask").masksets,B=t.data("inputmask").activeMasksetIndex,H.definitions=t.data("inputmask").definitions,i._valueSet(M(t,!0)),t.removeData("inputmask"),t.unbind(".inputmask"),t.removeClass("focus.inputmask");var e;Object.getOwnPropertyDescriptor&&(e=Object.getOwnPropertyDescriptor(i,"value")),e&&e.get?i._valueGet&&Object.defineProperty(i,"value",{get:i._valueGet,set:i._valueSet}):document.__lookupGetter__&&i.__lookupGetter__("value")&&i._valueGet&&(i.__defineGetter__("value",i._valueGet),i.__defineSetter__("value",i._valueSet)),delete i._valueGet,delete i._valueSet}},0)});case"getemptymask":return this.data("inputmask")?(L=this.data("inputmask").masksets,B=this.data("inputmask").activeMasksetIndex,L[B]._buffer.join("")):"";case"hasMaskedValue":return!!this.data("inputmask")&&!this.data("inputmask").autoUnmask;case"isComplete":return L=this.data("inputmask").masksets,B=this.data("inputmask").activeMasksetIndex,H.definitions=this.data("inputmask").definitions,E(this[0].split(""));default:return r(t,n)||(H.mask=t),L=a(),this.each(function(){I(this)})}else{if("object"==typeof t)return H=e.extend(!0,{},e.inputmask.defaults,t),r(H.alias,t),L=a(),this.each(function(){I(this)});if(void 0==t)return this.each(function(){var t=e(this).attr("data-inputmask");if(t&&""!=t)try{var t=t.replace(RegExp("'","g"),'"'),i=e.parseJSON("{"+t+"}");H=e.extend(!0,{},e.inputmask.defaults,i),r(H.alias,i),H.alias=void 0,e(this).inputmask(H)}catch(e){}})}return this})}(jQuery),function(e){e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-z]",cardinality:1,casing:"upper"},"#":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:/[fh]/,urlpre2:/(ft|ht)/,urlpre3:/(ftp|htt)/,urlpre4:/(ftp:|http|ftps)/,urlpre5:/(ftp:\/|ftps:|http:|https)/,urlpre6:/(ftp:\/\/|ftps:\/|http:\/|https:)/,urlpre7:/(ftp:\/\/|ftps:\/\/|http:\/\/|https:\/)/,urlpre8:/(ftp:\/\/|ftps:\/\/|http:\/\/|https:\/\/)/},definitions:{i:{validator:function(){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=0;8>t;t++)e[t]=function(){var e=t;return{validator:function(t,i,n,r,o){if(o.regex["urlpre"+(e+1)]){var s=t;if(0<e+1-t.length&&(s=i.join("").substring(0,e+1-t.length)+""+s),t=o.regex["urlpre"+(e+1)].test(s),!r&&!t){for(n-=e,r=0;r<o.defaultPrefix.length;r++)i[n]=o.defaultPrefix[r],n++;for(r=0;r<s.length-1;r++)i[n]=s[r],n++;return{pos:n}}return t}return!1},cardinality:e}}();return e}()}},insertMode:!1,autoUnmask:!1},ip:{mask:"i.i.i.i",definitions:{i:{validator:"25[0-5]|2[0-4][0-9]|[01][0-9][0-9]",cardinality:3,prevalidator:[{validator:"[0-2]",cardinality:1},{validator:"2[0-5]|[01][0-9]",cardinality:2}]}}}})}(jQuery),function(e){e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:/[0-3]/,val1:/0[1-9]|[12][0-9]|3[01]/,val2pre:function(t){return t=e.inputmask.escapeRegex.call(this,t),RegExp("((0[1-9]|[12][0-9]|3[01])"+t+"[01])")},val2:function(t){return t=e.inputmask.escapeRegex.call(this,t),RegExp("((0[1-9]|[12][0-9])"+t+"(0[1-9]|1[012]))|(30"+t+"(0[13-9]|1[012]))|(31"+t+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,i){var n=parseInt(e.concat(t.toString().slice(e.length))),e=parseInt(e.concat(i.toString().slice(e.length)));return NaN!=n&&(t<=n&&n<=i)||NaN!=e&&(t<=e&&e<=i)},determinebaseyear:function(e,t){var i=(new Date).getFullYear();return e>i?e:t<i?t:i},onKeyUp:function(t,i,n){i=e(this),t.ctrlKey&&t.keyCode==n.keyCode.RIGHT&&(t=new Date,i.val(t.getDate().toString()+(t.getMonth()+1).toString()+t.getFullYear().toString()))},definitions:{1:{validator:function(e,t,i,n,r){var o=r.regex.val1.test(e);return n||o||e.charAt(1)!=r.separator&&-1=="-./".indexOf(e.charAt(1))||!(o=r.regex.val1.test("0"+e.charAt(0)))?o:(t[i-1]="0",{pos:i,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=r.regex.val1pre.test(e);return n||o||!(o=r.regex.val1.test("0"+e))?o:(t[i]="0",i++,{pos:i})},cardinality:1}]},2:{validator:function(e,t,i,n,r){var o=t.join("").substr(0,3),s=r.regex.val2(r.separator).test(o+e);return n||s||e.charAt(1)!=r.separator&&-1=="-./".indexOf(e.charAt(1))||!(s=r.regex.val2(r.separator).test(o+"0"+e.charAt(0)))?s:(t[i-1]="0",{pos:i,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=t.join("").substr(0,3),s=r.regex.val2pre(r.separator).test(o+e);return n||s||!(s=r.regex.val2(r.separator).test(o+"0"+e))?s:(t[i]="0",i++,{pos:i})},cardinality:1}]},y:{validator:function(e,t,i,n,r){return!!r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)&&(t.join("").substr(0,6)!=r.leapday||(e=parseInt(e,10),0===e%4&&(0!==e%100||0===e%400)))},cardinality:4,prevalidator:[{validator:function(e,t,i,n,r){var o=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!n&&!o){if(n=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear).toString().slice(0,1),o=r.isInYearRange(n+e,r.yearrange.minyear,r.yearrange.maxyear))return t[i++]=n[0],{pos:i};if(n=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear).toString().slice(0,2),o=r.isInYearRange(n+e,r.yearrange.minyear,r.yearrange.maxyear))return t[i++]=n[0],t[i++]=n[1],{pos:i}}return o},cardinality:1},{validator:function(e,t,i,n,r){var o=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!n&&!o){if(n=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear).toString().slice(0,2),o=r.isInYearRange(e[0]+n[1]+e[1],r.yearrange.minyear,r.yearrange.maxyear))return t[i++]=n[1],{pos:i};if(n=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear).toString().slice(0,2),r.isInYearRange(n+e,r.yearrange.minyear,r.yearrange.maxyear)?t.join("").substr(0,6)!=r.leapday?o=!0:(r=parseInt(e,10),o=0===r%4&&(0!==r%100||0===r%400)):o=!1,o)return t[i-1]=n[0],t[i++]=n[1],t[i++]=e[0],{pos:i}}return o},cardinality:2},{validator:function(e,t,i,n,r){return r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){return t=e.inputmask.escapeRegex.call(this,t),RegExp("((0[13-9]|1[012])"+t+"[0-3])|(02"+t+"[0-2])")},val2:function(t){return t=e.inputmask.escapeRegex.call(this,t),RegExp("((0[1-9]|1[012])"+t+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+t+"30)|((0[13578]|1[02])"+t+"31)")},val1pre:/[01]/,val1:/0[1-9]|1[012]/},leapday:"02/29/",onKeyUp:function(t,i,n){i=e(this),t.ctrlKey&&t.keyCode==n.keyCode.RIGHT&&(t=new Date,i.val((t.getMonth()+1).toString()+t.getDate().toString()+t.getFullYear().toString()))}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyUp:function(t,i,n){i=e(this),t.ctrlKey&&t.keyCode==n.keyCode.RIGHT&&(t=new Date,i.val(t.getFullYear().toString()+(t.getMonth()+1).toString()+t.getDate().toString()))},definitions:{2:{validator:function(e,t,i,n,r){var o=t.join("").substr(5,3),s=r.regex.val2(r.separator).test(o+e);return n||s||e.charAt(1)!=r.separator&&-1=="-./".indexOf(e.charAt(1))||!(s=r.regex.val2(r.separator).test(o+"0"+e.charAt(0)))?s?t.join("").substr(4,4)+e!=r.leapday||(e=parseInt(t.join("").substr(0,4),10),0===e%4&&(0!==e%100||0===e%400)):s:(t[i-1]="0",{pos:i,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=t.join("").substr(5,3),s=r.regex.val2pre(r.separator).test(o+e);return n||s||!(s=r.regex.val2(r.separator).test(o+"0"+e))?s:(t[i]="0",i++,{pos:i})},cardinality:1}]}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:/[012]/,hrs24:/2[0-9]|1[3-9]/,hrs:/[01][0-9]|2[0-3]/,ampmpre:/[apAP]/,ampm:/^[a|p|A|P][m|M]/},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,i,n,r){var o=r.regex.hrs.test(e);return n||o||e.charAt(1)!=r.timeseparator&&-1=="-.:".indexOf(e.charAt(1))||!(o=r.regex.hrs.test("0"+e.charAt(0)))?o&&"24"!==r.hourFormat&&r.regex.hrs24.test(e)?(e=parseInt(e,10),t[i+5]=24==e?"a":"p",t[i+6]="m",e-=12,10>e?(t[i]=e.toString(),t[i-1]="0"):(t[i]=e.toString().charAt(1),t[i-1]=e.toString().charAt(0)),{pos:i,c:t[i]}):o:(t[i-1]="0",t[i]=e.charAt(0),i++,{pos:i})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var o=r.regex.hrspre.test(e);return n||o||!(o=r.regex.hrs.test("0"+e))?o:(t[i]="0",i++,{pos:i})},cardinality:1}]},t:{validator:function(e,t,i,n,r){var o=r.regex.ampm.test(e);return n||o||!(o=r.regex.ampm.test(e+"m"))?o:(t[i-1]=e.charAt(0),t[i]="m",i++,i)},casing:"lower",cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){return(n=r.regex.ampmpre.test(e))&&(n=r.regex.ampm.test(e+"m"))?(t[i]=e,t[i+1]="m",i):n},cardinality:1}]}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",autoUnmask:!1},"hh:mm":{mask:"h:s",autoUnmask:!1},date:{alias:"dd/mm/yyyy"}})}(jQuery),function(e){e.extend(e.inputmask.defaults.aliases,{decimal:{mask:"~",placeholder:"",repeat:10,greedy:!1,numericInput:!0,digits:"*",groupSeparator:",",radixPoint:".",groupSize:3,autoGroup:!1,getMaskLength:function(t,i,n,r,o){var s=t.length;return!i&&1<n&&(s+=t.length*(n-1)),t=e.inputmask.escapeRegex.call(this,o.groupSeparator),o=e.inputmask.escapeRegex.call(this,o.radixPoint),r=r.join(""),o=r.replace(RegExp(t,"g"),"").replace(RegExp(o),""),s+(r.length-o.length)},postFormat:function(t,i,n,r){var o=t.slice();if(n||o.splice(i,0,"?"),o=o.join(""),r.autoGroup||n&&-1!=o.indexOf(r.groupSeparator)){for(var o=o.replace(RegExp("\\"+r.groupSeparator,"g"),""),s=o.split(r.radixPoint),o=s[0],a=RegExp("([-+]?[\\d?]+)([\\d?]{"+r.groupSize+"})");a.test(o);)o=o.replace(a,"$1"+r.groupSeparator+"$2"),o=o.replace(r.groupSeparator+r.groupSeparator,r.groupSeparator);1<s.length&&(o+=r.radixPoint+s[1])}for(t.length=o.length,r=0,s=o.length;r<s;r++)t[r]=o.charAt(r);return i=n?i:e.inArray("?",t),n||t.splice(i,1),i},regex:{number:function(t,i,n,r){return t=e.inputmask.escapeRegex.call(this,t),n=e.inputmask.escapeRegex.call(this,n),r=isNaN(r)?r:"{0,"+r+"}",RegExp("^[+-]?(\\d+|\\d{1,"+i+"}(("+t+"\\d{"+i+"})?)+)("+n+"\\d"+r+")?$")}},onKeyDown:function(t,i,n){var r=e(this);if(t.keyCode==n.keyCode.TAB){if(t=e.inArray(n.radixPoint,i),-1!=t){for(var o=r.data("inputmask").masksets,r=r.data("inputmask").activeMasksetIndex,s=1;s<=n.digits&&s<n.getMaskLength(o[r]._buffer,o[r].greedy,o[r].repeat,i,n);s++)void 0==i[t+s]&&(i[t+s]="0");this._valueSet(i.join(""))}}else t.keyCode!=n.keyCode.DELETE&&t.keyCode!=n.keyCode.BACKSPACE||(n.postFormat(i,0,!0,n),this._valueSet(i.join("")))},definitions:{"~":{validator:function(e,t,n,r,o){if(""==e)return!1;if(1==n&&"0"===t[0]&&/[\d-]/.test(e))return t[0]="",{pos:0};var s=r?t.slice(0,n):t.slice();s.splice(n+1,0,e),s=s.join(""),o.autoGroup&&!r&&(s=s.replace(RegExp("\\"+o.groupSeparator,"g"),""));var a=o.regex.number(o.groupSeparator,o.groupSize,o.radixPoint,o.digits).test(s);if(!a&&(s+="0",a=o.regex.number(o.groupSeparator,o.groupSize,o.radixPoint,o.digits).test(s),!a)){for(a=s.lastIndexOf(o.groupSeparator),i=s.length-a;3>=i;i++)s+="0";if(a=o.regex.number(o.groupSeparator,o.groupSize,o.radixPoint,o.digits).test(s),!a&&!r&&e==o.radixPoint&&(a=o.regex.number(o.groupSeparator,o.groupSize,o.radixPoint,o.digits).test("0"+s+"0")))return t[n]="0",n++,{pos:n}}return 0==a||r||e==o.radixPoint?a:{pos:o.postFormat(t,n+1,!1,o)}},cardinality:1,prevalidator:null}},insertMode:!0,autoUnmask:!1},"non-negative-decimal":{regex:{number:function(t,i,n,r){return t=e.inputmask.escapeRegex.call(this,t),n=e.inputmask.escapeRegex.call(this,n),r=isNaN(r)?r:"{0,"+r+"}",RegExp("^[+]?(\\d+|\\d{1,"+i+"}(("+t+"\\d{"+i+"})?)+)("+n+"\\d"+r+")?$")}},alias:"decimal"},integer:{regex:{number:function(t,i){var n=e.inputmask.escapeRegex.call(this,t);return RegExp("^[+-]?(\\d+|\\d{1,"+i+"}(("+n+"\\d{"+i+"})?)+)$")}},alias:"decimal"}})}(jQuery),!function(e){"use strict";var t=function(t,i){this.options=i,this.$element=e(t);var n=this.$element.attr("id");this.$container=e("<div/>",{id:"ms-"+n,class:"ms-container"}),this.$selectableContainer=e("<div/>",{class:"ms-selectable"}),this.$selectionContainer=e("<div/>",{class:"ms-selection"}),this.$selectableUl=e("<ul/>",{class:"ms-list"}),this.$selectionUl=e("<ul/>",{class:"ms-list"}),this.scrollTo=0,this.sanitizeRegexp=new RegExp("\\W+","gi")};t.prototype={constructor:t,init:function(){var t=this,i=this.$element;if(0===i.next(".ms-container").length){i.css({position:"absolute",left:"-9999px"}),i.attr("id",i.attr("id")?i.attr("id"):"ms-"+Math.ceil(1e3*Math.random()));var n=null,r=null,o=0,s='<li class="ms-optgroup-container"></li>',a='<ul class="ms-optgroup"></ul>',l='<li class="ms-optgroup-label"><span></span></li>';i.find("optgroup, option").each(function(){if(e(this).is("optgroup")){n="<span>"+e(this).attr("label")+"</span>",r="ms-"+i.attr("id")+"-optgroup-"+o;var c=e(this),d=e(s),u=e(s),h=e(l),p=e(l);t.options.selectableOptgroup&&(p.on("click",function(){var i=c.children(":not(:selected)").map(function(){return e(this).val()}).get();t.select(i)}),h.on("click",function(){var i=c.children(":selected").map(function(){return e(this).val()}).get();t.deselect(i)})),p.html(n),d.attr("id",r+"-selectable").append(e(a).append(p)),t.$selectableUl.append(d),h.html(n),u.attr("id",r+"-selection").append(e(a).append(h)),t.$selectionUl.append(u),o++}else{for(var f="",m=0;m<this.attributes.length;m++){var g=this.attributes[m];t.isDomNode(g.name)&&(f+=g.name+'="'+g.value+'" ')}var v=e("<li "+f+"><span>"+e(this).text()+"</span></li>"),y=v.clone(),_=e(this).val(),b=t.sanitize(_,t.sanitizeRegexp);v.data("ms-value",_).addClass("ms-elem-selectable").attr("id",b+"-selectable"),y.data("ms-value",_).addClass("ms-elem-selection").attr("id",b+"-selection").hide(),t.$selectionUl.find(".ms-optgroup-label").hide(),(e(this).prop("disabled")||i.prop("disabled"))&&(this.selected?(y.prop("disabled",!0),y.addClass(t.options.disabledClass)):(v.prop("disabled",!0),v.addClass(t.options.disabledClass))),r?(t.$selectableUl.children("#"+r+"-selectable").find("ul").first().append(v),t.$selectionUl.children("#"+r+"-selection").find("ul").first().append(y)):(t.$selectableUl.append(v),t.$selectionUl.append(y))}}),t.options.selectableHeader&&t.$selectableContainer.append(t.options.selectableHeader),t.$selectableContainer.append(t.$selectableUl),t.options.selectableFooter&&t.$selectableContainer.append(t.options.selectableFooter),t.options.selectionHeader&&t.$selectionContainer.append(t.options.selectionHeader),t.$selectionContainer.append(t.$selectionUl),t.options.selectionFooter&&t.$selectionContainer.append(t.options.selectionFooter),t.$container.append(t.$selectableContainer),t.$container.append(t.$selectionContainer),i.after(t.$container),t.$selectableUl.on("mouseenter",".ms-elem-selectable",function(){e("li",t.$container).removeClass("ms-hover"),e(this).addClass("ms-hover")}).on("mouseleave",function(){e("li",t.$container).removeClass("ms-hover")});var c=t.options.dblClick?"dblclick":"click";t.$selectableUl.on(c,".ms-elem-selectable",function(){t.select(e(this).data("ms-value"))}),t.$selectionUl.on(c,".ms-elem-selection",function(){t.deselect(e(this).data("ms-value"))}),t.$selectionUl.on("mouseenter",".ms-elem-selection",function(){e("li",t.$selectionUl).removeClass("ms-hover"),e(this).addClass("ms-hover")}).on("mouseleave",function(){e("li",t.$selectionUl).removeClass("ms-hover")}),t.$selectableUl.on("focusin",function(){e(this).addClass("ms-focus"),t.$selectionUl.focusout()}).on("focusout",function(){e(this).removeClass("ms-focus"),e("li",t.$container).removeClass("ms-hover")}),t.$selectionUl.on("focusin",function(){e(this).addClass("ms-focus")}).on("focusout",function(){e(this).removeClass("ms-focus"),e("li",t.$container).removeClass("ms-hover")}),i.on("focusin",function(){i.focusout(),t.$selectableUl.focusin()}).on("focusout",function(){t.$selectableUl.removeClass("ms-focus"),t.$selectionUl.removeClass("ms-focus")}),i.onKeyDown=function(e,i){var n=t.$container.find("."+i).find(".ms-list"),r=n.find("li:visible:not(.ms-optgroup-label, .ms-optgroup-container)"),o=r.length,s=n.find("li.ms-hover"),a=s.length>0?r.index(s):-1,l=n.innerHeight(),c=r.first().outerHeight(!0),d=Math.floor(l/c),u=null;if(32===e.keyCode)s.length>0&&("ms-selectable"===i?t.select(s.data("ms-value")):t.deselect(s.data("ms-value")),r.removeClass("ms-hover"),t.scrollTo=0,n.scrollTop(t.scrollTo));else if(40===e.keyCode){if(r.length>0){var h=a+1,p=o!==h?r.eq(h):r.first(),f=p.position().top;u=n.position().top,r.removeClass("ms-hover"),p.addClass("ms-hover"),o===h?t.scrollTo=0:f>=u+d*c&&(t.scrollTo+=c),n.scrollTop(t.scrollTo)}}else if(38===e.keyCode){if(r.length>0){var m=Math.max(a-1,-1),g=r.eq(m),v=g.position().top;u=n.position().top,r.removeClass("ms-hover"),g.addClass("ms-hover"),v<=u?t.scrollTo-=c:m<0&&(t.scrollTo=(o-d)*c),n.scrollTop(t.scrollTo)}}else 37!==e.keyCode&&39!==e.keyCode||(t.$selectableUl.hasClass("ms-focus")?(t.$selectableUl.focusout(),t.$selectionUl.focusin()):(t.$selectableUl.focusin(),t.$selectionUl.focusout()))},i.on("keydown",function(e){if(i.is(":focus")){var n=t.$selectableUl.hasClass("ms-focus")?"ms-selectable":"ms-selection";i.onKeyDown(e,n)}})}var d=i.find("option:selected").map(function(){return e(this).val()}).get();t.select(d,"init"),"function"==typeof t.options.afterInit&&t.options.afterInit.call(this,this.$container)},refresh:function(){e("#ms-"+this.$element.attr("id")).remove(),this.init(this.options)},select:function(t,i){"string"==typeof t&&(t=[t]);var n=this,r=this.$element,o=e.map(t,function(e){return n.sanitize(e,n.sanitizeRegexp)}),s=this.$selectableUl.find("#"+o.join("-selectable, #")+"-selectable").filter(":not(."+n.options.disabledClass+")"),a=this.$selectionUl.find("#"+o.join("-selection, #")+"-selection"),l=r.find("option").filter(function(){return e.inArray(this.value,t)>-1});if(s.length>0){s.addClass("ms-selected").hide(),a.addClass("ms-selected").show(),l.prop("selected",!0);
var c=n.$selectableUl.children(".ms-optgroup-container");if(c.length>0){c.each(function(){var t=e(this).find(".ms-elem-selectable");t.length===t.filter(".ms-selected").length&&e(this).find(".ms-optgroup-label").hide()});var d=n.$selectionUl.children(".ms-optgroup-container");d.each(function(){var t=e(this).find(".ms-elem-selection");t.filter(".ms-selected").length>0&&e(this).find(".ms-optgroup-label").show()})}"init"!==i&&(n.$selectionUl.focusout(),n.$selectableUl.focusin(),r.trigger("change"),"function"==typeof n.options.afterSelect&&n.options.afterSelect.call(this,t))}},deselect:function(t){"string"==typeof t&&(t=[t]);var i=this,n=this.$element,r=e.map(t,function(e){return i.sanitize(e,i.sanitizeRegexp)}),o=this.$selectableUl.find("#"+r.join("-selectable, #")+"-selectable"),s=this.$selectionUl.find("#"+r.join("-selection, #")+"-selection").filter(".ms-selected"),a=n.find("option").filter(function(){return e.inArray(this.value,t)>-1});if(s.length>0){o.removeClass("ms-selected").show(),s.removeClass("ms-selected").hide(),a.prop("selected",!1);var l=i.$selectableUl.children(".ms-optgroup-container");if(l.length>0){l.each(function(){var t=e(this).find(".ms-elem-selectable");t.filter(":not(.ms-selected)").length>0&&e(this).find(".ms-optgroup-label").show()});var c=i.$selectionUl.children(".ms-optgroup-container");c.each(function(){var t=e(this).find(".ms-elem-selection");0===t.filter(".ms-selected").length&&e(this).find(".ms-optgroup-label").hide()})}this.$selectableUl.focusout(),this.$selectionUl.focusin(),n.trigger("change"),"function"==typeof i.options.afterDeselect&&i.options.afterDeselect.call(this,t)}},select_all:function(){var t=this.$element,i=t.val();if(t.find("option").prop("selected",!0),this.$selectableUl.find(".ms-elem-selectable").addClass("ms-selected").hide(),this.$selectionUl.find(".ms-optgroup-label").show(),this.$selectableUl.find(".ms-optgroup-label").hide(),this.$selectionUl.find(".ms-elem-selection").addClass("ms-selected").show(),this.$selectionUl.focusin(),this.$selectableUl.focusout(),t.trigger("change"),"function"==typeof this.options.afterSelect){var n=e.grep(t.val(),function(t){return e.inArray(t,i)<0});this.options.afterSelect.call(this,n)}},deselect_all:function(){var e=this.$element,t=e.val();e.find("option").prop("selected",!1),this.$selectableUl.find(".ms-elem-selectable").removeClass("ms-selected").show(),this.$selectionUl.find(".ms-optgroup-label").hide(),this.$selectableUl.find(".ms-optgroup-label").show(),this.$selectionUl.find(".ms-elem-selection").removeClass("ms-selected").hide(),this.$selectableUl.focusin(),this.$selectionUl.focusout(),e.trigger("change"),"function"==typeof this.options.afterDeselect&&this.options.afterDeselect.call(this,t)},isDomNode:function(e){return e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},sanitize:function(e,t){return e.replace(t,"_")}},e.fn.multiSelect=function(){var i=arguments[0],n=arguments;return this.each(function(){var r=e(this),o=r.data("multiselect"),s=e.extend({},e.fn.multiSelect.defaults,r.data(),"object"==typeof i&&i);o||r.data("multiselect",o=new t(this,s)),"string"==typeof i?o[i](n[1]):o.init()})},e.fn.multiSelect.defaults={selectableOptgroup:!1,disabledClass:"disabled",dblClick:!1},e.fn.multiSelect.Constructor=t}(window.jQuery),function(e,t){"use strict";function i(e){var t=Array.prototype.slice.call(arguments,1);return e.prop?e.prop.apply(e,t):e.attr.apply(e,t)}function n(e,t,i){var n,r;for(n in i)i.hasOwnProperty(n)&&(r=n.replace(/ |$/g,t.eventNamespace),e.bind(r,i[n]))}function r(e,t,i){n(e,i,{focus:function(){t.addClass(i.focusClass)},blur:function(){t.removeClass(i.focusClass),t.removeClass(i.activeClass)},mouseenter:function(){t.addClass(i.hoverClass)},mouseleave:function(){t.removeClass(i.hoverClass),t.removeClass(i.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||t.addClass(i.activeClass)},"mouseup touchend":function(){t.removeClass(i.activeClass)}})}function o(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function s(e,t,i){i?e.addClass(t):e.removeClass(t)}function a(e,t,i){var n="checked",r=t.is(":"+n);t.prop?t.prop(n,r):r?t.attr(n,n):t.removeAttr(n),s(e,i.checkedClass,r)}function l(e,t,i){s(e,i.disabledClass,t.is(":disabled"))}function c(e,t,i){switch(i){case"after":return e.after(t),e.next();case"before":return e.before(t),e.prev();case"wrap":return e.wrap(t),e.parent()}return null}function d(t,n,r){var o,s,a;return r||(r={}),r=e.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},r),o=e("<div />"),s=e("<span />"),n.autoHide&&t.is(":hidden")&&"none"===t.css("display")&&o.hide(),r.divClass&&o.addClass(r.divClass),n.wrapperClass&&o.addClass(n.wrapperClass),r.spanClass&&s.addClass(r.spanClass),a=i(t,"id"),n.useID&&a&&i(o,"id",n.idPrefix+"-"+a),r.spanHtml&&s.html(r.spanHtml),o=c(t,o,r.divWrap),s=c(t,s,r.spanWrap),l(o,t,n),{div:o,span:s}}function u(t,i){var n;return i.wrapperClass?(n=e("<span />").addClass(i.wrapperClass),n=c(t,n,"wrap")):null}function h(){var t,i,n,r;return r="rgb(120,2,153)",i=e('<div style="width:0;height:0;color:'+r+'">'),e("body").append(i),n=i.get(0),t=window.getComputedStyle?window.getComputedStyle(n,"").color:(n.currentStyle||n.style||{}).color,i.remove(),t.replace(/ /g,"")!==r}function p(t){return t?e("<span />").text(t).html():""}function f(){return navigator.cpuClass&&!navigator.product}function m(){return void 0!==window.XMLHttpRequest}function g(e){var t;return!!e[0].multiple||(t=i(e,"size"),!(!t||1>=t))}function v(){return!1}function y(e,t){var i="none";n(e,t,{"selectstart dragstart mousedown":v}),e.css({MozUserSelect:i,msUserSelect:i,webkitUserSelect:i,userSelect:i})}function _(e,t,i){var n=e.val();""===n?n=i.fileDefaultHtml:(n=n.split(/[\/\\]+/),n=n[n.length-1]),t.text(n)}function b(e,t,i){var n,r;for(n=[],e.each(function(){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n.push({el:this,name:e,old:this.style[e]}),this.style[e]=t[e])}),i();n.length;)r=n.pop(),r.el.style[r.name]=r.old}function w(e,t){var i;i=e.parents(),i.push(e[0]),i=i.not(":visible"),b(i,{visibility:"hidden",display:"block",position:"absolute"},t)}function k(e,t){return function(){e.unwrap().unwrap().unbind(t.eventNamespace)}}var x=!0,C=!1,S=[{match:function(e){return e.is("a, button, :submit, :reset, input[type='button']")},apply:function(e,t){var s,a,c,u,h;return a=t.submitDefaultHtml,e.is(":reset")&&(a=t.resetDefaultHtml),u=e.is("a, button")?function(){return e.html()||a}:function(){return p(i(e,"value"))||a},c=d(e,t,{divClass:t.buttonClass,spanHtml:u()}),s=c.div,r(e,s,t),h=!1,n(s,t,{"click touchend":function(){var t,n,r,o;h||e.is(":disabled")||(h=!0,e[0].dispatchEvent?(t=document.createEvent("MouseEvents"),t.initEvent("click",!0,!0),n=e[0].dispatchEvent(t),e.is("a")&&n&&(r=i(e,"target"),o=i(e,"href"),r&&"_self"!==r?window.open(o,r):document.location.href=o)):e.click(),h=!1)}}),y(s,t),{remove:function(){return s.after(e),s.remove(),e.unbind(t.eventNamespace),e},update:function(){o(s,t),l(s,e,t),e.detach(),c.span.html(u()).append(e)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var i,s,c;return i=d(e,t,{divClass:t.checkboxClass}),s=i.div,c=i.span,r(e,s,t),n(e,t,{"click touchend":function(){a(c,e,t)}}),a(c,e,t),{remove:k(e,t),update:function(){o(s,t),c.removeClass(t.checkedClass),a(c,e,t),l(s,e,t)}}}},{match:function(e){return e.is(":file")},apply:function(t,s){function a(){_(t,p,s)}var u,h,p,m;return u=d(t,s,{divClass:s.fileClass,spanClass:s.fileButtonClass,spanHtml:s.fileButtonHtml,spanWrap:"after"}),h=u.div,m=u.span,p=e("<span />").html(s.fileDefaultHtml),p.addClass(s.filenameClass),p=c(t,p,"after"),i(t,"size")||i(t,"size",h.width()/10),r(t,h,s),a(),f()?n(t,s,{click:function(){t.trigger("change"),setTimeout(a,0)}}):n(t,s,{change:a}),y(p,s),y(m,s),{remove:function(){return p.remove(),m.remove(),t.unwrap().unbind(s.eventNamespace)},update:function(){o(h,s),_(t,p,s),l(h,t,s)}}}},{match:function(e){if(e.is("input")){var t=(" "+i(e,"type")+" ").toLowerCase(),n=" color date datetime datetime-local email month number password search tel text time url week ";return n.indexOf(t)>=0}return!1},apply:function(e,t){var n,o;return n=i(e,"type"),e.addClass(t.inputClass),o=u(e,t),r(e,e,t),t.inputAddTypeAsClass&&e.addClass(n),{remove:function(){e.removeClass(t.inputClass),t.inputAddTypeAsClass&&e.removeClass(n),o&&e.unwrap()},update:v}}},{match:function(e){return e.is(":radio")},apply:function(t,s){var c,u,h;return c=d(t,s,{divClass:s.radioClass}),u=c.div,h=c.span,r(t,u,s),n(t,s,{"click touchend":function(){e.uniform.update(e(':radio[name="'+i(t,"name")+'"]'))}}),a(h,t,s),{remove:k(t,s),update:function(){o(u,s),a(h,t,s),l(u,t,s)}}}},{match:function(e){return!(!e.is("select")||g(e))},apply:function(t,i){var s,a,c,u;return i.selectAutoWidth&&w(t,function(){u=t.width()}),s=d(t,i,{divClass:i.selectClass,spanHtml:(t.find(":selected:first")||t.find("option:first")).html(),spanWrap:"before"}),a=s.div,c=s.span,i.selectAutoWidth?w(t,function(){b(e([c[0],a[0]]),{display:"block"},function(){var e;e=c.outerWidth()-c.width(),a.width(u+e),c.width(u)})}):a.addClass("fixedWidth"),r(t,a,i),n(t,i,{change:function(){c.html(t.find(":selected").html()),a.removeClass(i.activeClass)},"click touchend":function(){var e=t.find(":selected").html();c.html()!==e&&t.trigger("change")},keyup:function(){c.html(t.find(":selected").html())}}),y(c,i),{remove:function(){return c.remove(),t.unwrap().unbind(i.eventNamespace),t},update:function(){i.selectAutoWidth?(e.uniform.restore(t),t.uniform(i)):(o(a,i),c.html(t.find(":selected").html()),l(a,t,i))}}}},{match:function(e){return!(!e.is("select")||!g(e))},apply:function(e,t){var i;return e.addClass(t.selectMultiClass),i=u(e,t),r(e,e,t),{remove:function(){e.removeClass(t.selectMultiClass),i&&e.unwrap()},update:v}}},{match:function(e){return e.is("textarea")},apply:function(e,t){var i;return e.addClass(t.textareaClass),i=u(e,t),r(e,e,t),{remove:function(){e.removeClass(t.textareaClass),i&&e.unwrap()},update:v}}}];f()&&!m()&&(x=!1),e.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},e.fn.uniform=function(t){var i=this;return t=e.extend({},e.uniform.defaults,t),C||(C=!0,h()&&(x=!1)),x?(t.resetSelector&&e(t.resetSelector).mouseup(function(){window.setTimeout(function(){e.uniform.update(i)},10)}),this.each(function(){var i,n,r,o=e(this);if(o.data("uniformed"))return void e.uniform.update(o);for(i=0;S.length>i;i+=1)if(n=S[i],n.match(o,t))return r=n.apply(o,t),o.data("uniformed",r),void e.uniform.elements.push(o.get(0))})):this},e.uniform.restore=e.fn.uniform.restore=function(i){i===t&&(i=e.uniform.elements),e(i).each(function(){var t,i,n=e(this);i=n.data("uniformed"),i&&(i.remove(),t=e.inArray(this,e.uniform.elements),t>=0&&e.uniform.elements.splice(t,1),n.removeData("uniformed"))})},e.uniform.update=e.fn.uniform.update=function(i){i===t&&(i=e.uniform.elements),e(i).each(function(){var t,i=e(this);t=i.data("uniformed"),t&&t.update(i,t.options)})}}(jQuery),function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=e.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(t.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function n(){var n;return!i.settings.submitHandler||(i.submitButton&&(n=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&n.remove(),!1)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t=t&&i.element(this)}),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),function(e,t){i[t]=n.attr(t),n.removeAttr(t)}),i},rules:function(t,i){var n=this[0];if(t){var r=e.data(n.form,"validator").settings,o=r.rules,s=e.validator.staticRules(n);switch(t){case"add":e.extend(s,e.validator.normalizeRule(i)),delete s.messages,o[n.name]=s,i.messages&&(r.messages[n.name]=e.extend(r.messages[n.name],i.messages));break;case"remove":if(!i)return delete o[n.name],s;var a={};return e.each(i.split(/\s/),function(e,t){a[t]=s[t],delete s[t]}),a}}var l=e.validator.normalizeRules(e.extend({},e.validator.classRules(n),e.validator.attributeRules(n),e.validator.dataRules(n),e.validator.staticRules(n)),n);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})});var n=this.settings.rules;e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var i=this.check(t)!==!1;return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!t.objectLength(e(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i=e(t).attr("type"),n=e(t).val();return"radio"===i||"checkbox"===i?e("input[name='"+e(t).attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n=e(t).rules(),r=!1,o=this.elementValue(t);for(var s in n){var a={method:s,parameters:n[s]};try{if(i=e.validator.methods[s].call(this,o,t,a.parameters),"dependency-mismatch"===i){r=!0;continue}if(r=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,a),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+a.method+"' method.",e),e}}return r?void 0:(this.objectLength(n)&&this.successList.push(t),!0)},customDataMessage:function(t,i){return e(t).data("msg-"+i.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;arguments.length>e;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var n=this.defaultMessage(t,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,t):r.test(n)&&(n=e.validator.format(n.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:n,element:t}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var i=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n=this.errorsFor(t);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(i)):(n=e("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,t)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===i})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},n=e(t),r=n[0].getAttribute("type");for(var o in e.validator.methods){var s;"required"===o?(s=n.get(0).getAttribute(o),""===s&&(s=!0),s=!!s):s=n.attr(o),/min|max/.test(o)&&(null===r||/number|range|text/.test(r))&&(s=Number(s)),s?i[o]=s:r===o&&"range"!==r&&(i[o]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var i,n,r={},o=e(t);for(i in e.validator.methods)n=o.data("rule-"+i.toLowerCase()),void 0!==n&&(r[i]=n);return r},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,r){if(r===!1)return void delete t[n];if(r.param||r.depends){var o=!0;switch(typeof r.depends){case"string":o=!!e(r.depends,i.form).length;break;case"function":o=r.depends.call(i,i)}o?t[n]=void 0===r.param||r.param:delete t[n]}}),e.each(t,function(n,r){t[n]=e.isFunction(r)?r(i):r}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],3>i.length&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=e(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(t,i)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(""+new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i=0,n=0,r=!1;e=e.replace(/\D/g,"");for(var o=e.length-1;o>=0;o--){var s=e.charAt(o);n=parseInt(s,10),r&&(n*=2)>9&&(n-=9),i+=n,r=!r}return 0===i%10},minlength:function(t,i,n){var r=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||r>=n},maxlength:function(t,i,n){var r=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||n>=r},rangelength:function(t,i,n){var r=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||r>=n[0]&&n[1]>=r},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&i[1]>=e},equalTo:function(t,i,n){var r=e(n);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()}),t===r.val()},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var r=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),r.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=r.message,n="string"==typeof n&&{url:n}||n,r.old===t)return r.valid;r.old=t;var o=this;this.startRequest(i);var s={};return s[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:s,success:function(n){o.settings.messages[i.name].remote=r.originalMessage;var s=n===!0||"true"===n;if(s){var a=o.formSubmitted;o.prepareElement(i),o.formSubmitted=a,o.successList.push(i),delete o.invalid[i.name],o.showErrors()}else{var l={},c=n||o.defaultMessage(i,"remote");l[i.name]=r.message=e.isFunction(c)?c(t):c,o.invalid[i.name]=!0,o.showErrors(l)}r.valid=s,o.stopRequest(i,s)}},n)),"pending"}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,n){
var r=e.port;"abort"===e.mode&&(t[r]&&t[r].abort(),t[r]=n)});else{var i=e.ajax;e.ajax=function(n){var r=("mode"in n?n:e.ajaxSettings).mode,o=("port"in n?n:e.ajaxSettings).port;return"abort"===r?(t[o]&&t[o].abort(),t[o]=i.apply(this,arguments),t[o]):i.apply(this,arguments)}}}(jQuery),function(e){e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,function(i){var r=e(i.target);return r.is(t)?n.apply(r,arguments):void 0})}})}(jQuery),!function(e,t){t([],e)}(function(){return function(e){var t=e.kendo||(e.kendo={cultures:{}});t.cultures["zh-CN"]={name:"zh-CN",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n%","n%"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["$-n","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"¥"}},calendars:{standard:{days:{names:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],namesAbbr:["周日","周一","周二","周三","周四","周五","周六"],namesShort:["日","一","二","三","四","五","六"]},months:{names:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],namesAbbr:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]},AM:["上午","上午","上午"],PM:["下午","下午","下午"],patterns:{d:"yyyy/M/d",D:"yyyy'年'M'月'd'日'",F:"yyyy'年'M'月'd'日' H:mm:ss",g:"yyyy/M/d H:mm",G:"yyyy/M/d H:mm:ss",m:"M'月'd'日'",M:"M'月'd'日'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"H:mm",T:"H:mm:ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"yyyy'年'M'月'",Y:"yyyy'年'M'月'"},"/":"/",":":":",firstDay:0}}}}(this),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()}),function(e,t){t([],e)}(function(){"bundle all";return!function(e,t,i){function n(){}function r(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=e.charAt(0),n=e.substring(1);return"="===i?"+("+n+")+":":"===i?"+e("+n+")+":";"+e+";o+="}function o(e,t,i){return e+="",t=t||2,i=t-e.length,i?L[t].substring(0,i)+e:e}function s(e){var t=e.css(me.support.transitions.css+"box-shadow")||e.css("box-shadow"),i=t?t.match(Te)||[0,0,0,0,0]:[0,0,0,0,0],n=we.max(+i[3],+(i[4]||0));return{left:-i[1]+n,right:+i[1]+n,bottom:+i[2]+n}}function a(t,i){var n,r,o,a,l,c,d,u,h=xe.browser,p="rtl"==t.css("direction");return t.parent().hasClass("k-animation-container")?(d=t.parent(".k-animation-container"),u=d[0].style,d.is(":hidden")&&d.show(),n=Ce.test(u.width)||Ce.test(u.height),n||d.css({width:t.outerWidth(),height:t.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})):(r=s(t),o=t[0].style.width,a=t[0].style.height,l=Ce.test(o),c=Ce.test(a),h.opera&&(r.left=r.right=r.bottom=5),n=l||c,!l&&(!i||i&&o)&&(o=t.outerWidth()),!c&&(!i||i&&a)&&(a=t.outerHeight()),t.wrap(e("<div/>").addClass("k-animation-container").css({width:o,height:a,marginLeft:r.left*(p?1:-1),paddingLeft:r.left,paddingRight:r.right,paddingBottom:r.bottom})),n&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})),h.msie&&we.floor(h.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()}function l(e){var t=1,i=arguments.length;for(t=1;i>t;t++)c(e,arguments[t]);return e}function c(e,t){var i,n,r,o,s,a=me.data.ObservableArray,l=me.data.LazyObservableArray,d=me.data.DataSource,u=me.data.HierarchicalDataSource;for(i in t)n=t[i],r=typeof n,o=r===Ie&&null!==n?n.constructor:null,o&&o!==Array&&o!==a&&o!==l&&o!==d&&o!==u?n instanceof Date?e[i]=new Date(n.getTime()):E(n.clone)?e[i]=n.clone():(s=e[i],e[i]=typeof s===Ie?s||{}:{},c(e[i],n)):r!==ze&&(e[i]=n);return e}function d(e,t,n){for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return r;return n!==i?n:e}function u(e){return e.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})}function h(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function p(t,i){var n,r={};return document.defaultView&&document.defaultView.getComputedStyle?(n=document.defaultView.getComputedStyle(t,""),i&&e.each(i,function(e,t){r[t]=n.getPropertyValue(t)})):(n=t.currentStyle,i&&e.each(i,function(e,t){r[t]=n[h(t)]})),me.size(r)||(r=n),r}function f(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&i++;return i}function m(e,i,n){i||(i="offset");var r=e[i]();return xe.browser.msie&&(xe.pointers||xe.msPointers)&&!n&&(r.top-=t.pageYOffset-document.documentElement.scrollTop,r.left-=t.pageXOffset-document.documentElement.scrollLeft),r}function g(e){var t={};return ve("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t}function v(e){return new me.effects.Element(e)}function y(e,t,i,n){return typeof e===Ae&&(E(t)&&(n=t,t=400,i=!1),E(i)&&(n=i,i=!1),typeof t===Fe&&(i=t,t=400),e={effects:e,duration:t,reverse:i,complete:n}),ge({effects:{},duration:400,reverse:!1,init:be,teardown:be,hide:!1},e,{completeCallback:e.complete,complete:be})}function _(t,i,n,r,o){for(var s,a=0,l=t.length;l>a;a++)s=e(t[a]),s.queue(function(){U.promise(s,y(i,n,r,o))});return t}function b(e,t,i,n){return t&&(t=t.split(" "),ve(t,function(t,i){e.toggleClass(i,n)})),e}function w(e){return(""+e).replace(V,"&amp;").replace(W,"&lt;").replace(G,"&gt;").replace(j,"&quot;").replace(q,"&#39;")}function k(e,t){var n;return 0===t.indexOf("data")&&(t=t.substring(4),t=t.charAt(0).toLowerCase()+t.substring(1)),t=t.replace(ie,"-$1"),n=e.getAttribute("data-"+me.ns+t),null===n?n=i:"null"===n?n=null:"true"===n?n=!0:"false"===n?n=!1:De.test(n)?n=parseFloat(n):ee.test(n)&&!te.test(n)&&(n=Function("return ("+n+")")()),n}function x(t,n){var r,o,s={};for(r in n)o=k(t,r),o!==i&&(J.test(r)&&(o=me.template(e("#"+o).html())),s[r]=o);return s}function C(t,i){return e.contains(t,i)?-1:1}function S(){var t=e(this);return e.inArray(t.attr("data-"+me.ns+"role"),["slider","rangeslider"])>-1||t.is(":visible")}function T(e,t){var i=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(i)?!e.disabled:"a"===i?e.href||t:t)&&D(e)}function D(t){return!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")||e.expr.filters.hidden(this)}).length}function M(e,t){return new M.fn.init(e,t)}var A,E,I,P,F,z,H,R,N,$,O,L,B,U,V,W,j,q,G,Y,Q,K,X,Z,J,ee,te,ie,ne,re,oe,se,ae,le,ce,de,ue,he,pe,fe,me=t.kendo=t.kendo||{cultures:{}},ge=e.extend,ve=e.each,ye=e.isArray,_e=e.proxy,be=e.noop,we=Math,ke=t.JSON||{},xe={},Ce=/%/,Se=/\{(\d+)(:[^\}]+)?\}/g,Te=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,De=/^(\+|-?)\d+(\.?)\d*$/,Me="function",Ae="string",Ee="number",Ie="object",Pe="null",Fe="boolean",ze="undefined",He={},Re={},Ne=[].slice,$e=t.Globalize;me.version="2014.3.1119",n.extend=function(e){var t,i,n=function(){},r=this,o=e&&e.init?e.init:function(){r.apply(this,arguments)};n.prototype=r.prototype,i=o.fn=o.prototype=new n;for(t in e)i[t]=null!=e[t]&&e[t].constructor===Object?ge(!0,{},n.prototype[t],e[t]):e[t];return i.constructor=o,o.extend=r.extend,o},n.prototype._initOptions=function(e){this.options=l({},this.options,e)},E=me.isFunction=function(e){return"function"==typeof e},I=function(){this._defaultPrevented=!0},P=function(){return this._defaultPrevented===!0},F=n.extend({init:function(){this._events={}},bind:function(e,t,n){var r,o,s,a,l,c=this,d=typeof e===Ae?[e]:e,u=typeof t===Me;if(t===i){for(r in e)c.bind(r,e[r]);return c}for(r=0,o=d.length;o>r;r++)e=d[r],a=u?t:t[e],a&&(n&&(s=a,a=function(){c.unbind(e,a),s.apply(c,arguments)},a.original=s),l=c._events[e]=c._events[e]||[],l.push(a));return c},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var i,n,r,o,s=this,a=typeof e===Ae?[e]:e,l=typeof t===Me;for(i=0,n=a.length;n>i;i++)e=a[i],r=l?t:t[e],r&&(o=s._events[e]=s._events[e]||[],o.unshift(r));return s},trigger:function(e,t){var i,n,r=this,o=r._events[e];if(o){for(t=t||{},t.sender=r,t._defaultPrevented=!1,t.preventDefault=I,t.isDefaultPrevented=P,o=o.slice(),i=0,n=o.length;n>i;i++)o[i].call(r,t);return t._defaultPrevented===!0}return!1},unbind:function(e,t){var n,r=this,o=r._events[e];if(e===i)r._events={};else if(o)if(t)for(n=o.length-1;n>=0;n--)(o[n]===t||o[n].original===t)&&o.splice(n,1);else r._events[e]=[];return r}}),z=/^\w+/,H=/\$\{([^}]*)\}/g,R=/\\\}/g,N=/__CURLY__/g,$=/\\#/g,O=/__SHARP__/g,L=["","0","00","000","0000"],A={paramName:"data",useWithBlock:!0,render:function(e,t){var i,n,r="";for(i=0,n=t.length;n>i;i++)r+=e(t[i]);return r},compile:function(e,t){var i,n,o,s=ge({},this,t),a=s.paramName,l=a.match(z)[0],c=s.useWithBlock,d="var o,e=kendo.htmlEncode;";if(E(e))return e;for(d+=c?"with("+a+"){":"",d+="o=",n=e.replace(R,"__CURLY__").replace(H,"#=e($1)#").replace(N,"}").replace($,"__SHARP__").split("#"),o=0;n.length>o;o++)d+=r(n[o],o%2===0);d+=c?";}":";",d+="return o;",d=d.replace(O,"#");try{return i=Function(l,d),i._slotCount=Math.floor(n.length/2),i}catch(t){throw Error(me.format("Invalid template:'{0}' Generated code:'{1}'",e,d))}}},function(){function e(e){return s.lastIndex=0,s.test(e)?'"'+e.replace(s,function(e){var t=a[e];return typeof t===Ae?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function t(o,s){var a,c,d,u,h,p,f=i,m=s[o];if(m&&typeof m===Ie&&typeof m.toJSON===Me&&(m=m.toJSON(o)),typeof r===Me&&(m=r.call(s,o,m)),p=typeof m,p===Ae)return e(m);if(p===Ee)return isFinite(m)?m+"":Pe;if(p===Fe||p===Pe)return m+"";if(p===Ie){if(!m)return Pe;if(i+=n,h=[],"[object Array]"===l.apply(m)){for(u=m.length,a=0;u>a;a++)h[a]=t(a,m)||Pe;return d=0===h.length?"[]":i?"[\n"+i+h.join(",\n"+i)+"\n"+f+"]":"["+h.join(",")+"]",i=f,d}if(r&&typeof r===Ie)for(u=r.length,a=0;u>a;a++)typeof r[a]===Ae&&(c=r[a],d=t(c,m),d&&h.push(e(c)+(i?": ":":")+d));else for(c in m)Object.hasOwnProperty.call(m,c)&&(d=t(c,m),d&&h.push(e(c)+(i?": ":":")+d));return d=0===h.length?"{}":i?"{\n"+i+h.join(",\n"+i)+"\n"+f+"}":"{"+h.join(",")+"}",i=f,d}}var i,n,r,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l={}.toString;typeof Date.prototype.toJSON!==Me&&(Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?o(e.getUTCFullYear(),4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof ke.stringify!==Me&&(ke.stringify=function(e,o,s){var a;if(i="",n="",typeof s===Ee)for(a=0;s>a;a+=1)n+=" ";else typeof s===Ae&&(n=s);if(r=o,o&&typeof o!==Me&&(typeof o!==Ie||typeof o.length!==Ee))throw Error("JSON.stringify");return t("",{"":e})})}(),function(){function t(e){if(e){if(e.numberFormat)return e;if(typeof e===Ae){var t=me.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function n(e){return e&&(e=t(e)),e||me.cultures.current}function r(e){e.groupSizes=e.groupSize,e.percent.groupSizes=e.percent.groupSize,e.currency.groupSizes=e.currency.groupSize}function s(e,t,r){r=n(r);var s=r.calendars.standard,a=s.days,l=s.months;return t=s.patterns[t]||t,t.replace(d,function(t){var n,r,c;return"d"===t?r=e.getDate():"dd"===t?r=o(e.getDate()):"ddd"===t?r=a.namesAbbr[e.getDay()]:"dddd"===t?r=a.names[e.getDay()]:"M"===t?r=e.getMonth()+1:"MM"===t?r=o(e.getMonth()+1):"MMM"===t?r=l.namesAbbr[e.getMonth()]:"MMMM"===t?r=l.names[e.getMonth()]:"yy"===t?r=o(e.getFullYear()%100):"yyyy"===t?r=o(e.getFullYear(),4):"h"===t?r=e.getHours()%12||12:"hh"===t?r=o(e.getHours()%12||12):"H"===t?r=e.getHours():"HH"===t?r=o(e.getHours()):"m"===t?r=e.getMinutes():"mm"===t?r=o(e.getMinutes()):"s"===t?r=e.getSeconds():"ss"===t?r=o(e.getSeconds()):"f"===t?r=we.floor(e.getMilliseconds()/100):"ff"===t?(r=e.getMilliseconds(),r>99&&(r=we.floor(r/10)),r=o(r)):"fff"===t?r=o(e.getMilliseconds(),3):"tt"===t?r=e.getHours()<12?s.AM[0]:s.PM[0]:"zzz"===t?(n=e.getTimezoneOffset(),c=0>n,r=(""+we.abs(n/60)).split(".")[0],n=we.abs(n)-60*r,r=(c?"+":"-")+o(r),r+=":"+o(n)):("zz"===t||"z"===t)&&(r=e.getTimezoneOffset()/60,c=0>r,r=(""+we.abs(r)).split(".")[0],r=(c?"+":"-")+("zz"===t?o(r):r)),r!==i?r:t.slice(1,t.length-1)})}function a(e,t,r){r=n(r);var o,s,a,c,d,b,w,k,x,C,S,T,D,M,A,E,I,P,F,z,H,R,N,$=r.numberFormat,O=$.groupSize[0],L=$[g],B=$[m],U=$.decimals,V=$.pattern[0],W=[],j=0>e,q=f,G=f,Y=-1;if(e===i)return f;if(!isFinite(e))return e;if(!t)return r.name.length?e.toLocaleString():""+e;if(d=u.exec(t)){if(t=d[1].toLowerCase(),s="c"===t,a="p"===t,(s||a)&&($=s?$.currency:$.percent,O=$.groupSize[0],L=$[g],B=$[m],U=$.decimals,o=$.symbol,V=$.pattern[j?0:1]),c=d[2],c&&(U=+c),"e"===t)return c?e.toExponential(U):e.toExponential();if(a&&(e*=100),e=l(e,U),j=0>e,e=e.split(m),b=e[0],w=e[1],j&&(b=b.substring(1)),G=b,k=b.length,k>=O)for(G=f,C=0;k>C;C++)C>0&&(k-C)%O===0&&(G+=L),G+=b.charAt(C);if(w&&(G+=B+w),"n"===t&&!j)return G;for(e=f,C=0,S=V.length;S>C;C++)T=V.charAt(C),e+="n"===T?G:"$"===T||"%"===T?o:T;return e}if(j&&(e=-e),(t.indexOf("'")>-1||t.indexOf('"')>-1||t.indexOf("\\")>-1)&&(t=t.replace(h,function(e){var t=e.charAt(0).replace("\\",""),i=e.slice(1).replace(t,"");return W.push(i),_})),t=t.split(";"),j&&t[1])t=t[1],M=!0;else if(0===e){if(t=t[2]||t[0],-1==t.indexOf(v)&&-1==t.indexOf(y))return t}else t=t[0];if(z=t.indexOf("%"),H=t.indexOf("$"),a=-1!=z,s=-1!=H,a&&(e*=100),s&&"\\"===t[H-1]&&(t=t.split("\\").join(""),s=!1),(s||a)&&($=s?$.currency:$.percent,O=$.groupSize[0],L=$[g],B=$[m],U=$.decimals,o=$.symbol),D=t.indexOf(g)>-1,D&&(t=t.replace(p,f)),A=t.indexOf(m),S=t.length,-1!=A?(w=(""+e).split("e"),w=w[1]?l(e,Math.abs(w[1])):w[0],w=w.split(m)[1]||f,I=t.lastIndexOf(y)-A,E=t.lastIndexOf(v)-A,P=I>-1,F=E>-1,C=w.length,P||F||(t=t.substring(0,A)+t.substring(A+1),S=t.length,A=-1,C=0),P&&I>E?C=I:E>I&&(F&&C>E?C=E:P&&I>C&&(C=I)),C>-1&&(e=l(e,C))):e=l(e),E=t.indexOf(v),R=I=t.indexOf(y),Y=-1==E&&-1!=I?I:-1!=E&&-1==I?E:E>I?I:E,E=t.lastIndexOf(v),I=t.lastIndexOf(y),N=-1==E&&-1!=I?I:-1!=E&&-1==I?E:E>I?E:I,Y==S&&(N=Y),-1!=Y){if(G=(""+e).split(m),b=G[0],w=G[1]||f,k=b.length,x=w.length,j&&-1*e>=0&&(j=!1),D)if(k===O&&A-R>k)b=L+b;else if(k>O){for(G=f,C=0;k>C;C++)C>0&&(k-C)%O===0&&(G+=L),G+=b.charAt(C);b=G}for(e=t.substring(0,Y),j&&!M&&(e+="-"),C=Y;S>C;C++){if(T=t.charAt(C),-1==A){if(k>N-C){e+=b;break}}else if(-1!=I&&C>I&&(q=f),k>=A-C&&A-C>-1&&(e+=b,C=A),A===C){e+=(w?B:f)+w,C+=N-A+1;continue}T===y?(e+=T,q=T):T===v&&(e+=q)}if(N>=Y&&(e+=t.substring(N+1)),s||a){for(G=f,C=0,S=e.length;S>C;C++)T=e.charAt(C),G+="$"===T||"%"===T?o:T;e=G}if(S=W.length)for(C=0;S>C;C++)e=e.replace(_,W[C])}return e}var l,c,d=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,u=/^(n|c|p|e)(\d*)$/i,h=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,p=/\,/g,f="",m=".",g=",",v="#",y="0",_="??",b="en-US",w={}.toString;me.cultures["en-US"]={name:b,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},me.culture=function(e){var n,o=me.cultures;return e===i?o.current:(n=t(e)||o[b],n.calendar=n.calendars.standard,o.current=n,$e&&!$e.load&&r(n.numberFormat),i)},me.findCulture=t,me.getCulture=n,me.culture(b),l=function(e,t){return t=t||0,e=(""+e).split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t))),e=(""+e).split("e"),e=+(e[0]+"e"+(e[1]?+e[1]-t:-t)),e.toFixed(t)},c=function(e,t,n){if(t){if("[object Date]"===w.call(e))return s(e,t,n);if(typeof e===Ee)return a(e,t,n)}return e!==i?e:""},$e&&!$e.load&&(c=function(t,i,n){return e.isPlainObject(n)&&(n=n.name),$e.format(t,i,n)}),me.format=function(e){var t=arguments;return e.replace(Se,function(e,i,n){var r=t[parseInt(i,10)+1];return c(r,n?n.substring(1):"")})},me._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},me._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},me._round=l,me.toString=c}(),function(){function t(e,t,i){return!(e>=t&&i>=e)}function n(e){return e.charAt(0)}function r(t){return e.map(t,n)}function o(e,t){t||23!==e.getHours()||e.setHours(e.getHours()+2)}function s(e){for(var t=0,i=e.length,n=[];i>t;t++)n[t]=(e[t]+"").toLowerCase();return n}function a(e){var t,i={};for(t in e)i[t]=s(e[t]);return i}function l(e,n,s){if(!e)return null;var l,c,d,u,f,m,g,y,_,b,w,k,x,C=function(e){for(var t=0;n[R]===e;)t++,R++;return t>0&&(R-=1),t},S=function(t){var i=v[t]||RegExp("^\\d{1,"+t+"}"),n=e.substr(N,t).match(i);return n?(n=n[0],N+=n.length,parseInt(n,10)):null},T=function(t,i){for(var n,r,o,s=0,a=t.length;a>s;s++)if(n=t[s],r=n.length,o=e.substr(N,r),i&&(o=o.toLowerCase()),o==n)return N+=r,s+1;return null},D=function(){var t=!1;return e.charAt(N)===n[R]&&(N++,t=!0),t},M=s.calendars.standard,A=null,E=null,I=null,P=null,F=null,z=null,H=null,R=0,N=0,$=!1,O=new Date,L=M.twoDigitYearMax||2029,B=O.getFullYear();for(n||(n="d"),u=M.patterns[n],u&&(n=u),n=n.split(""),d=n.length;d>R;R++)if(l=n[R],$)"'"===l?$=!1:D();else if("d"===l){if(c=C("d"),M._lowerDays||(M._lowerDays=a(M.days)),I=3>c?S(2):T(M._lowerDays[3==c?"namesAbbr":"names"],!0),null===I||t(I,1,31))return null}else if("M"===l){if(c=C("M"),M._lowerMonths||(M._lowerMonths=a(M.months)),E=3>c?S(2):T(M._lowerMonths[3==c?"namesAbbr":"names"],!0),null===E||t(E,1,12))return null;E-=1}else if("y"===l){if(c=C("y"),A=S(c),null===A)return null;2==c&&("string"==typeof L&&(L=B+parseInt(L,10)),A=B-B%100+A,A>L&&(A-=100))}else if("h"===l){if(C("h"),P=S(2),12==P&&(P=0),null===P||t(P,0,11))return null}else if("H"===l){if(C("H"),P=S(2),null===P||t(P,0,23))return null}else if("m"===l){if(C("m"),F=S(2),null===F||t(F,0,59))return null}else if("s"===l){if(C("s"),z=S(2),null===z||t(z,0,59))return null}else if("f"===l){if(c=C("f"),x=e.substr(N,c).match(v[3]),H=S(c),null!==H&&(x=x[0].length,3>x&&(H*=Math.pow(10,3-x)),c>3&&(H=parseInt((""+H).substring(0,3),10))),null===H||t(H,0,999))return null}else if("t"===l){if(c=C("t"),y=M.AM,_=M.PM,1===c&&(y=r(y),_=r(_)),f=T(_),!f&&!T(y))return null}else if("z"===l){if(m=!0,c=C("z"),"Z"===e.substr(N,1)){D();continue}if(g=e.substr(N,6).match(c>2?p:h),!g)return null;if(g=g[0].split(":"),b=g[0],w=g[1],!w&&b.length>3&&(N=b.length-2,w=b.substring(N),b=b.substring(0,N)),b=parseInt(b,10),t(b,-12,13))return null;if(c>2&&(w=parseInt(w,10),isNaN(w)||t(w,0,59)))return null}else if("'"===l)$=!0,D();else if(!D())return null;return k=null!==P||null!==F||z||null,null===A&&null===E&&null===I&&k?(A=B,E=O.getMonth(),I=O.getDate()):(null===A&&(A=B),null===I&&(I=1)),f&&12>P&&(P+=12),m?(b&&(P+=-b),w&&(F+=-w),e=new Date(Date.UTC(A,E,I,P,F,z,H))):(e=new Date(A,E,I,P,F,z,H),o(e,P)),100>A&&e.setFullYear(A),e.getDate()!==I&&m===i?null:e}function c(e){var t="-"===e.substr(0,1)?-1:1;return e=e.substring(1),e=60*parseInt(e.substr(0,2),10)+parseInt(e.substring(2),10),t*e}var d=/\u00A0/g,u=/[eE][\-+]?[0-9]+/,h=/[+|\-]\d{1,2}/,p=/[+|\-]\d{1,2}:?\d{2}/,f=/^\/Date\((.*?)\)\/$/,m=/[+-]\d*/,g=["G","g","d","F","D","y","m","T","t"],v={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},y={}.toString;me.parseDate=function(e,t,i){var n,r,o,s,a;if("[object Date]"===y.call(e))return e;if(n=0,r=null,e&&0===e.indexOf("/D")&&(r=f.exec(e)))return r=r[1],a=m.exec(r.substring(1)),r=new Date(parseInt(r,10)),a&&(a=c(a[0]),r=me.timezone.apply(r,0),r=me.timezone.convert(r,0,-1*a)),r;if(i=me.getCulture(i),!t){for(t=[],s=i.calendar.patterns,o=g.length;o>n;n++)t[n]=s[g[n]];n=0,t=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fff","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(t)}for(t=ye(t)?t:[t],o=t.length;o>n;n++)if(r=l(e,t[n],i))return r;return r},me.parseInt=function(e,t){var i=me.parseFloat(e,t);return i&&(i=0|i),i},me.parseFloat=function(e,t,i){if(!e&&0!==e)return null;if(typeof e===Ee)return e;e=""+e,t=me.getCulture(t);var n,r,o=t.numberFormat,s=o.percent,a=o.currency,l=a.symbol,c=s.symbol,h=e.indexOf("-");return u.test(e)?(e=parseFloat(e.replace(o["."],".")),isNaN(e)&&(e=null),e):h>0?null:(h=h>-1,e.indexOf(l)>-1||i&&i.toLowerCase().indexOf("c")>-1?(o=a,n=o.pattern[0].replace("$",l).split("n"),e.indexOf(n[0])>-1&&e.indexOf(n[1])>-1&&(e=e.replace(n[0],"").replace(n[1],""),h=!0)):e.indexOf(c)>-1&&(r=!0,o=s,l=c),e=e.replace("-","").replace(l,"").replace(d," ").split(o[","].replace(d," ")).join("").replace(o["."],"."),e=parseFloat(e),isNaN(e)?e=null:h&&(e*=-1),e&&r&&(e/=100),e)},$e&&!$e.load&&(me.parseDate=function(e,t,i){return"[object Date]"===y.call(e)?e:$e.parseDate(e,t,i)},me.parseFloat=function(t,n){return typeof t===Ee?t:t===i||null===t?null:(e.isPlainObject(n)&&(n=n.name),t=$e.parseFloat(t,n),isNaN(t)?null:t)})}(),function(){var n,r,o,s,a,l,c;xe._scrollbar=i,xe.scrollbar=function(e){if(isNaN(xe._scrollbar)||e){var t,i=document.createElement("div");return i.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",i.innerHTML="&nbsp;",document.body.appendChild(i),xe._scrollbar=t=i.offsetWidth-i.scrollWidth,document.body.removeChild(i),t}return xe._scrollbar},xe.isRtl=function(t){return e(t).closest(".k-rtl").length>0},n=document.createElement("table");try{n.innerHTML="<tr><td></td></tr>",xe.tbodyInnerHtml=!0}catch(e){xe.tbodyInnerHtml=!1}xe.touch="ontouchstart"in t,xe.msPointers=t.MSPointerEvent,xe.pointers=t.PointerEvent,r=xe.transitions=!1,o=xe.transforms=!1,s="HTMLElement"in t?HTMLElement.prototype:[],xe.hasHW3D="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,ve(["Moz","webkit","O","ms"],function(){var e,t=""+this,s=typeof n.style[t+"Transition"]===Ae;return s||typeof n.style[t+"Transform"]===Ae?(e=t.toLowerCase(),o={css:"ms"!=e?"-"+e+"-":"",prefix:t,event:"o"===e||"webkit"===e?e:""},s&&(r=o,r.event=r.event?r.event+"TransitionEnd":"transitionend"),!1):i}),n=null,xe.transforms=o,xe.transitions=r,xe.devicePixelRatio=t.devicePixelRatio===i?1:t.devicePixelRatio;try{xe.screenWidth=t.outerWidth||t.screen?t.screen.availWidth:t.innerWidth,xe.screenHeight=t.outerHeight||t.screen?t.screen.availHeight:t.innerHeight}catch(e){xe.screenWidth=t.screen.availWidth,xe.screenHeight=t.screen.availHeight}xe.detectOS=function(e){var i,n,r=!1,o=[],s=!/mobile safari/i.test(e),a={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},l={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},c={tablet:/playbook|ipad|fire/i},u={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(n in a)if(a.hasOwnProperty(n)&&(o=e.match(a[n]))){if("windows"==n&&"plugins"in navigator)return!1;r={},r.device=n,r.tablet=d(n,c,!1),r.browser=d(e,u,"default"),r.name=d(n,l),r[r.name]=!0,r.majorVersion=o[2],r.minorVersion=o[3].replace("_","."),i=r.minorVersion.replace(".","").substr(0,2),r.flatVersion=r.majorVersion+i+Array(3-(3>i.length?i.length:2)).join("0"),r.cordova=typeof t.PhoneGap!==ze||typeof t.cordova!==ze,r.appMode=t.navigator.standalone||/file|local|wmapp/.test(t.location.protocol)||r.cordova,r.android&&(1.5>xe.devicePixelRatio&&400>r.flatVersion||s)&&(xe.screenWidth>800||xe.screenHeight>800)&&(r.tablet=n);break}return r},a=xe.mobileOS=xe.detectOS(navigator.userAgent),xe.wpDevicePixelRatio=a.wp?screen.width/320:0,xe.kineticScrollNeeded=a&&(xe.touch||xe.msPointers||xe.pointers),xe.hasNativeScrolling=!1,(a.ios||a.android&&a.majorVersion>2||a.wp)&&(xe.hasNativeScrolling=a),xe.mouseAndTouchPresent=xe.touch&&!(xe.mobileOS.ios||xe.mobileOS.android),xe.detectBrowser=function(e){var t,i=!1,n=[],r={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(t in r)if(r.hasOwnProperty(t)&&(n=e.match(r[t]))){i={},i[t]=!0,i[n[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,i.version=parseInt(document.documentMode||n[2],10);break}return i},xe.browser=xe.detectBrowser(navigator.userAgent),xe.zoomLevel=function(){try{return xe.touch?document.documentElement.clientWidth/t.innerWidth:xe.browser.msie&&xe.browser.version>=10?(top||t).document.documentElement.offsetWidth/(top||t).innerWidth:1}catch(e){return 1}},xe.cssBorderSpacing=i!==document.documentElement.style.borderSpacing&&!(xe.browser.msie&&8>xe.browser.version),function(t){var i="",n=e(document.documentElement),r=parseInt(t.version,10);t.msie?i="ie":t.mozilla?i="ff":t.safari?i="safari":t.webkit?i="webkit":t.opera&&(i="opera"),i&&(i="k-"+i+" k-"+i+r),xe.mobileOS&&(i+=" k-mobile"),n.addClass(i)}(xe.browser),xe.eventCapture=document.documentElement.addEventListener,l=document.createElement("input"),xe.placeholder="placeholder"in l,xe.propertyChangeEvent="onpropertychange"in l,xe.input=function(){for(var e,t=["number","date","time","month","week","datetime","datetime-local"],i=t.length,n="test",r={},o=0;i>o;o++)e=t[o],l.setAttribute("type",e),l.value=n,r[e.replace("-","")]="text"!==l.type&&l.value!==n;return r}(),l.style.cssText="float:left;",xe.cssFloat=!!l.style.cssFloat,l=null,xe.stableSort=function(){var e,t=513,i=[{index:0,field:"b"}];for(e=1;t>e;e++)i.push({index:e,field:"a"});return i.sort(function(e,t){return e.field>t.field?1:t.field>e.field?-1:0}),1===i[0].index}(),xe.matchesSelector=s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.matchesSelector||s.matches||function(t){for(var i=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),n=i.length;n--;)if(i[n]==this)return!0;return!1},xe.pushState=t.history&&t.history.pushState,c=document.documentMode,xe.hashChange="onhashchange"in t&&!(xe.browser.msie&&(!c||8>=c))}(),B={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}},U={},e.extend(U,{enabled:!0,Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),U.promiseShim=U.promise,"kendoAnimate"in e.fn||ge(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,i,n){return _(this,e,t,i,n)},kendoAddClass:function(e,t){return me.toggleClass(this,e,t,!0)},kendoRemoveClass:function(e,t){return me.toggleClass(this,e,t,!1)},kendoToggleClass:function(e,t,i){return me.toggleClass(this,e,t,i)}}),V=/&/g,W=/</g,j=/"/g,q=/'/g,G=/>/g,Y=function(e){return e.target},xe.touch&&(Y=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target},ve(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,i){e.fn[i]=function(e){return this.bind(i,e)}})),xe.touch?xe.mobileOS?(xe.mousedown="touchstart",xe.mouseup="touchend",xe.mousemove="touchmove",xe.mousecancel="touchcancel",xe.click="touchend",xe.resize="orientationchange"):(xe.mousedown="mousedown touchstart",xe.mouseup="mouseup touchend",xe.mousemove="mousemove touchmove",xe.mousecancel="mouseleave touchcancel",xe.click="click",xe.resize="resize"):xe.pointers?(xe.mousemove="pointermove",xe.mousedown="pointerdown",xe.mouseup="pointerup",xe.mousecancel="pointercancel",xe.click="pointerup",xe.resize="orientationchange resize"):xe.msPointers?(xe.mousemove="MSPointerMove",xe.mousedown="MSPointerDown",xe.mouseup="MSPointerUp",xe.mousecancel="MSPointerCancel",xe.click="MSPointerUp",xe.resize="orientationchange resize"):(xe.mousemove="mousemove",xe.mousedown="mousedown",xe.mouseup="mouseup",xe.mousecancel="mouseleave",xe.click="click",xe.resize="resize"),Q=function(e,t){var i,n,r,o,s=t||"d",a=1;for(n=0,r=e.length;r>n;n++)o=e[n],""!==o&&(i=o.indexOf("["),0!==i&&(-1==i?o="."+o:(a++,o="."+o.substring(0,i)+" || {})"+o.substring(i))),a++,s+=o+(r-1>n?" || {})":")"));return Array(a).join("(")+s},K=/^([a-z]+:)?\/\//i,ge(me,{ui:me.ui||{},fx:me.fx||v,effects:me.effects||U,mobile:me.mobile||{},data:me.data||{},dataviz:me.dataviz||{},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:me.support||xe,animate:me.animate||_,ns:"",attr:function(e){return"data-"+me.ns+e},getShadows:s,wrap:a,deepExtend:l,getComputedStyles:p,size:f,toCamelCase:h,toHyphens:u,getOffset:me.getOffset||m,parseEffects:me.parseEffects||g,toggleClass:me.toggleClass||b,directions:me.directions||B,Observable:F,Class:n,Template:A,template:_e(A.compile,A),render:_e(A.render,A),stringify:_e(ke.stringify,ke),eventTarget:Y,htmlEncode:w,isLocalUrl:function(e){return e&&!K.test(e)},expr:function(e,t,i){return e=e||"",typeof t==Ae&&(i=t,t=!1),i=i||"d",e&&"["!==e.charAt(0)&&(e="."+e),e=t?Q(e.split("."),i):i+e},getter:function(e,t){var i=e+t;return He[i]=He[i]||Function("d","return "+me.expr(e,t))},setter:function(e){return Re[e]=Re[e]||Function("d,value",me.expr(e)+"=value")},accessor:function(e){return{get:me.getter(e),set:me.setter(e)}},guid:function(){var e,t,i="";for(e=0;32>e;e++)t=16*we.random()|0,(8==e||12==e||16==e||20==e)&&(i+="-"),i+=(12==e?4:16==e?3&t|8:t).toString(16);return i},roleSelector:function(e){return e.replace(/(\S+)/g,"["+me.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(e){var t,i=e.split(" ");if(i)for(t=0;i.length>t;t++)"view"!=i[t]&&(i[t]=i[t].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return i.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},logToConsole:function(e){var n=t.console;!me.suppressLog&&i!==n&&n.log&&n.log(e)}}),X=F.extend({init:function(e,t){var i,n=this;n.element=me.jQuery(e).handler(n),n.angular("init",t),F.fn.init.call(n),i=t?t.dataSource:null,i&&(t=ge({},t,{dataSource:{}})),t=n.options=ge(!0,{},n.options,t),i&&(t.dataSource=i),n.element.attr(me.attr("role"))||n.element.attr(me.attr("role"),(t.name||"").toLowerCase()),
n.element.data("kendo"+t.prefix+t.name,n),n.bind(n.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,i="tabindex",n=e.attr(i)||t.attr(i);t.removeAttr(i),e.attr(i,isNaN(n)?0:n)},setOptions:function(t){this._setEvents(t),e.extend(this.options,t)},_setEvents:function(e){for(var t,i=this,n=0,r=i.events.length;r>n;n++)t=i.events[n],i.options[t]&&e[t]&&i.unbind(t,i.options[t]);i.bind(i.events,e)},resize:function(e){var t=this.getSize(),i=this._size;(e||!i||t.width!==i.width||t.height!==i.height)&&(this._size=t,this._resize(t),this.trigger("resize",t))},getSize:function(){return me.dimensions(this.element)},size:function(e){return e?(this.setSize(e),i):this.getSize()},setSize:e.noop,_resize:e.noop,destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name),e.element.removeData("handler"),e.unbind()},angular:function(){}}),Z=X.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(t){var i=this;i.angular(t,function(){return{elements:i.items(),data:e.map(i.dataItems(),function(e){return{dataItem:e}})}})}}),me.dimensions=function(e,t){var i=e[0];return t&&e.css(t),{width:i.offsetWidth,height:i.offsetHeight}},me.notify=be,J=/template$/i,ee=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,te=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,ie=/([A-Z])/g,me.initWidget=function(n,r,o){var s,a,l,c,d,u,h,p,f,m,g,v,y;if(o?o.roles&&(o=o.roles):o=me.ui.roles,n=n.nodeType?n:n[0],u=n.getAttribute("data-"+me.ns+"role")){f=-1===u.indexOf("."),l=f?o[u]:me.getter(u)(t),g=e(n).data(),v=l?"kendo"+l.fn.options.prefix+l.fn.options.name:"",m=f?RegExp("^kendo.*"+u+"$","i"):RegExp("^"+v+"$","i");for(y in g)if(y.match(m)){if(y!==v)return g[y];s=g[y]}if(l){for(p=k(n,"dataSource"),r=e.extend({},x(n,l.fn.options),r),p&&(r.dataSource=typeof p===Ae?me.getter(p)(t):p),c=0,d=l.fn.events.length;d>c;c++)a=l.fn.events[c],h=k(n,a),h!==i&&(r[a]=me.getter(h)(t));return s?e.isEmptyObject(r)||s.setOptions(r):s=new l(n,r),s}}},me.rolesFromNamespaces=function(e){var t,i,n=[];for(e[0]||(e=[me.ui,me.dataviz.ui]),t=0,i=e.length;i>t;t++)n[t]=e[t].roles;return ge.apply(null,[{}].concat(n.reverse()))},me.init=function(t){var i=me.rolesFromNamespaces(Ne.call(arguments,1));e(t).find("[data-"+me.ns+"role]").addBack().each(function(){me.initWidget(this,{},i)})},me.destroy=function(t){e(t).find("[data-"+me.ns+"role]").addBack().each(function(){var t,i=e(this).data();for(t in i)0===t.indexOf("kendo")&&typeof i[t].destroy===Me&&i[t].destroy()})},me.resize=function(t,i){var n,r=e(t).find("[data-"+me.ns+"role]").addBack().filter(S);r.length&&(n=e.makeArray(r),n.sort(C),e.each(n,function(){var t=me.widgetInstance(e(this));t&&t.resize(i)}))},me.parseOptions=x,ge(me.ui,{Widget:X,DataBoundWidget:Z,roles:{},progress:function(t,i){var n,r,o,s,a=t.find(".k-loading-mask"),l=me.support,c=l.browser;i?a.length||(n=l.isRtl(t),r=n?"right":"left",s=t.scrollLeft(),o=c.webkit&&n?t[0].scrollWidth-t.width()-2*s:0,a=e("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",t.scrollTop()).css(r,Math.abs(s)+o).prependTo(t)):a&&a.remove()},plugin:function(t,n,r){var o,s=t.fn.options.name;n=n||me.ui,r=r||"",n[s]=t,n.roles[s.toLowerCase()]=t,o="getKendo"+r+s,s="kendo"+r+s,e.fn[s]=function(n){var r,o=this;return typeof n===Ae?(r=Ne.call(arguments,1),this.each(function(){var t,a,l=e.data(this,s);if(!l)throw Error(me.format("Cannot call method '{0}' of {1} before it is initialized",n,s));if(t=l[n],typeof t!==Me)throw Error(me.format("Cannot find method '{0}' of {1}",n,s));return a=t.apply(l,r),a!==i?(o=a,!1):i})):this.each(function(){new t(this,n)}),o},e.fn[s].widget=t,e.fn[o]=function(){return this.data(s)}}}),ne={bind:function(){return this},nullObject:!0,options:{}},re=X.extend({init:function(e,t){X.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){X.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(me.roleSelector("view splitview modalview drawer"));return me.widgetInstance(e,me.mobile.ui)||ne},viewHasNativeScrolling:function(){var e=this.view();return e&&e.options.useNativeScrolling},container:function(){var e=this.element.closest(me.roleSelector("view layout modalview drawer splitview"));return me.widgetInstance(e.eq(0),me.mobile.ui)||ne}}),ge(me.mobile,{init:function(e){me.init(e,me.mobile.ui,me.ui,me.dataviz.ui)},appLevelNativeScrolling:function(){return me.mobile.application&&me.mobile.application.options&&me.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:re,DataBoundWidget:Z.extend(re.prototype),roles:{},plugin:function(e){me.ui.plugin(e,me.mobile.ui,"Mobile")}}}),l(me.dataviz,{init:function(e){me.init(e,me.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){me.ui.plugin(e,me.dataviz.ui)}},roles:{}}),me.touchScroller=function(t,i){return e(t).map(function(t,n){return n=e(n),!(!xe.kineticScrollNeeded||!me.mobile.ui.Scroller||n.data("kendoMobileScroller"))&&(n.kendoMobileScroller(i),n.data("kendoMobileScroller"))})[0]},me.preventDefault=function(e){e.preventDefault()},me.widgetInstance=function(e,i){var n,r,o,s,a=e.data(me.ns+"role"),l=[];if(a){if("content"===a&&(a="scroller"),i)if(i[0])for(n=0,r=i.length;r>n;n++)l.push(i[n].roles[a]);else l.push(i.roles[a]);else l=[me.ui.roles[a],me.dataviz.ui.roles[a],me.mobile.ui.roles[a]];for(a.indexOf(".")>=0&&(l=[me.getter(a)(t)]),n=0,r=l.length;r>n;n++)if(o=l[n],o&&(s=e.data("kendo"+o.fn.options.prefix+o.fn.options.name)))return s}},me.onResize=function(i){var n=i;return xe.mobileOS.android&&(n=function(){setTimeout(i,600)}),e(t).on(xe.resize,n),n},me.unbindResize=function(i){e(t).off(xe.resize,i)},me.attrValue=function(e,t){return e.data(me.ns+t)},me.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr[":"],{kendoFocusable:function(t){var i=e.attr(t,"tabindex");return T(t,!isNaN(i)&&i>-1)}}),oe=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],se="label, input, [data-rel=external]",ae={setupMouseMute:function(){var t,i=0,n=oe.length,r=document.documentElement;if(!ae.mouseTrap&&xe.eventCapture)for(ae.mouseTrap=!0,ae.bustClick=!1,ae.captureMouse=!1,t=function(t){ae.captureMouse&&("click"===t.type?ae.bustClick&&!e(t.target).is(se)&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};n>i;i++)r.addEventListener(oe[i],t,!0)},muteMouse:function(e){ae.captureMouse=!0,e.data.bustClick&&(ae.bustClick=!0),clearTimeout(ae.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(ae.mouseTrapTimeoutID),ae.mouseTrapTimeoutID=setTimeout(function(){ae.captureMouse=!1,ae.bustClick=!1},400)}},le={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},xe.touch&&(xe.mobileOS.ios||xe.mobileOS.android)?le={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:xe.pointers?le={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:xe.msPointers&&(le={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!xe.msPointers||"onmspointerenter"in t||e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,i){e.event.special[t]={delegateType:i,bindType:i,handle:function(t){var n,r=this,o=t.relatedTarget,s=t.handleObj;return(!o||o!==r&&!e.contains(r,o))&&(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=i),n}}}),ce=function(e){return le[e]||e},de=/([^ ]+)/g,me.applyEventMap=function(e,t){return e=e.replace(de,ce),t&&(e=e.replace(de,"$1."+t)),e},ue=e.fn.on,ge(!0,M,e),M.fn=M.prototype=new e,M.fn.constructor=M,M.fn.init=function(t,i){return i&&i instanceof e&&!(i instanceof M)&&(i=M(i)),e.fn.init.call(this,t,i,he)},M.fn.init.prototype=M.fn,he=M(document),ge(M.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||me.guid()),this},on:function(){var e,t,i,n,r,o,s=this,a=s.data("kendoNS");return 1===arguments.length?ue.call(s,arguments[0]):(e=s,t=Ne.call(arguments),typeof t[t.length-1]===ze&&t.pop(),i=t[t.length-1],n=me.applyEventMap(t[0],a),xe.mouseAndTouchPresent&&n.search(/mouse|click/)>-1&&this[0]!==document.documentElement&&(ae.setupMouseMute(),r=2===t.length?null:t[1],o=n.indexOf("click")>-1&&n.indexOf("touchend")>-1,ue.call(this,{touchstart:ae.muteMouse,touchend:ae.unMuteMouse},r,{bustClick:o})),typeof i===Ae&&(e=s.data("handler"),i=e[i],t[t.length-1]=function(t){i.call(e,t)}),t[0]=n,ue.apply(s,t),s)},kendoDestroy:function(e){return e=e||this.data("kendoNS"),e&&this.off("."+e),this}}),me.jQuery=M,me.eventMap=le,me.timezone=function(){function e(e,t){var i,n,r,o=t[3],s=t[4],a=t[5],l=t[8];return l||(t[8]=l={}),l[e]?l[e]:(isNaN(s)?0===s.indexOf("last")?(i=new Date(Date.UTC(e,d[o]+1,1,a[0]-24,a[1],a[2],0)),n=u[s.substr(4,3)],r=i.getUTCDay(),i.setUTCDate(i.getUTCDate()+n-r-(n>r?7:0))):s.indexOf(">=")>=0&&(i=new Date(Date.UTC(e,d[o],s.substr(5),a[0],a[1],a[2],0)),n=u[s.substr(0,3)],r=i.getUTCDay(),i.setUTCDate(i.getUTCDate()+n-r+(r>n?7:0))):i=new Date(Date.UTC(e,d[o],s,a[0],a[1],a[2],0)),l[e]=i)}function t(t,i,n){var r,o,s,a;return(i=i[n])?(s=new Date(t).getUTCFullYear(),i=jQuery.grep(i,function(e){var t=e[0],i=e[1];return s>=t&&(i>=s||t==s&&"only"==i||"max"==i)}),i.push(t),i.sort(function(t,i){return"number"!=typeof t&&(t=+e(s,t)),"number"!=typeof i&&(i=+e(s,i)),t-i}),a=i[jQuery.inArray(t,i)-1]||i[i.length-1],isNaN(a)?a:null):(r=n.split(":"),o=0,r.length>1&&(o=60*r[0]+ +r[1]),[-1e6,"max","-","Jan",1,[0,0,0],o,"-"])}function i(e,t,i){var n,r,o,s=t[i];if("string"==typeof s&&(s=t[s]),!s)throw Error('Timezone "'+i+'" is either incorrect, or kendo.timezones.min.js is not included.');for(n=s.length-1;n>=0&&(r=s[n][3],!(r&&e>r));n--);if(o=s[n+1],!o)throw Error('Timezone "'+i+'" not found on '+e+".");return o}function n(e,n,r,o){typeof e!=Ee&&(e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));var s=i(e,n,o);return{zone:s,rule:t(e,r,s[1])}}function r(e,t){var i,r,o;return"Etc/UTC"==t||"Etc/GMT"==t?0:(i=n(e,this.zones,this.rules,t),r=i.zone,o=i.rule,me.parseFloat(o?r[0]-o[6]:r[0]))}function o(e,t){var i=n(e,this.zones,this.rules,t),r=i.zone,o=i.rule,s=r[2];return s.indexOf("/")>=0?s.split("/")[o&&+o[6]?1:0]:s.indexOf("%s")>=0?s.replace("%s",o&&"-"!=o[7]?o[7]:""):s}function s(e,t,i){var n,r;return typeof t==Ae&&(t=this.offset(e,t)),typeof i==Ae&&(i=this.offset(e,i)),n=e.getTimezoneOffset(),e=new Date(e.getTime()+6e4*(t-i)),r=e.getTimezoneOffset(),new Date(e.getTime()+6e4*(r-n))}function a(e,t){return this.convert(e,e.getTimezoneOffset(),t)}function l(e,t){return this.convert(e,t,e.getTimezoneOffset())}function c(e){return this.apply(new Date(e),"Etc/UTC")}var d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},u={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:r,convert:s,apply:a,remove:l,abbr:o,toLocalDate:c}}(),me.date=function(){function e(e,t){return 0===t&&23===e.getHours()&&(e.setHours(e.getHours()+2),!0)}function t(t,i,n){var r=t.getHours();n=n||1,i=(i-t.getDay()+7*n)%7,t.setDate(t.getDate()+i),e(t,r)}function i(e,i,n){return e=new Date(e),t(e,i,n),e}function n(e){return new Date(e.getFullYear(),e.getMonth(),1)}function r(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),i=n(e),r=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());return r&&t.setHours(i.getHours()+r/60),t}function o(t){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),e(t,0),t}function s(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function a(e){return e.getTime()-o(e)}function l(e,t,i){var n,r=a(t),o=a(i);return!e||r==o||(t>=i&&(i+=g),n=a(e),r>n&&(n+=g),r>o&&(o+=g),n>=r&&o>=n)}function c(e,t,i){var n,r=t.getTime(),o=i.getTime();return r>=o&&(o+=g),n=e.getTime(),n>=r&&o>=n}function d(t,i){var n=t.getHours();return t=new Date(t),u(t,i*g),e(t,n),t}function u(e,t,i){var n,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),i||(n=e.getTimezoneOffset()-r,e.setTime(e.getTime()+n*m))}function h(){return o(new Date)}function p(e){return o(e).getTime()==h().getTime()}function f(e){var t=new Date(1980,1,1,0,0,0);return e&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t}var m=6e4,g=864e5;return{adjustDST:e,dayOfWeek:i,setDayOfWeek:t,getDate:o,isInDateRange:c,isInTimeRange:l,isToday:p,nextDay:function(e){return d(e,1)},previousDay:function(e){return d(e,-1)},toUtcTime:s,MS_PER_DAY:g,MS_PER_HOUR:60*m,MS_PER_MINUTE:m,setTime:u,addDays:d,today:h,toInvariantTime:f,firstDayOfMonth:n,lastDayOfMonth:r,getMilliseconds:a}}(),me.stripWhitespace=function(e){var t,i,n;if(document.createNodeIterator)for(t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode);else for(i=0;e.childNodes.length>i;i++)n=e.childNodes[i],3!=n.nodeType||/\S/.test(n.nodeValue)||(e.removeChild(n),i--),1==n.nodeType&&me.stripWhitespace(n)},pe=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},me.animationFrame=function(e){pe.call(t,e)},fe=[],me.queueAnimation=function(e){fe[fe.length]=e,1===fe.length&&me.runNextAnimation()},me.runNextAnimation=function(){me.animationFrame(function(){fe[0]&&(fe.shift()(),fe[0]&&me.runNextAnimation())})},me.parseQueryStringParams=function(e){for(var t=e.split("?")[1]||"",i={},n=t.split(/&|=/),r=n.length,o=0;r>o;o+=2)""!==n[o]&&(i[decodeURIComponent(n[o])]=decodeURIComponent(n[o+1]));return i},me.elementUnderCursor=function(e){return document.elementFromPoint(e.x.client,e.y.client)},me.wheelDeltaY=function(e){var t,n=e.originalEvent,r=n.wheelDeltaY;return n.wheelDelta?(r===i||r)&&(t=n.wheelDelta):n.detail&&n.axis===n.VERTICAL_AXIS&&(t=10*-n.detail),t},me.throttle=function(e,t){var n,r=0;return!t||0>=t?e:function(){function o(){e.apply(s,l),r=+new Date}var s=this,a=+new Date-r,l=arguments;return r?(n&&clearTimeout(n),a>t?o():n=setTimeout(o,t-a),i):o()}},me.caret=function(t,n,r){var o,s,a,l,c=n!==i;if(r===i&&(r=n),t[0]&&(t=t[0]),!c||!t.disabled){try{t.selectionStart!==i?c?(t.focus(),t.setSelectionRange(n,r)):n=[t.selectionStart,t.selectionEnd]:document.selection&&(e(t).is(":visible")&&t.focus(),o=t.createTextRange(),c?(o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()):(s=o.duplicate(),o.moveToBookmark(document.selection.createRange().getBookmark()),s.setEndPoint("EndToStart",o),a=s.text.length,l=a+o.text.length,n=[a,l]))}catch(e){n=[]}return n}},me.compileMobileDirective=function(e,i){var n=t.angular;return e.attr("data-"+me.ns+"role",e[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),n.element(e).injector().invoke(["$compile",function(t){var r=n.element(e).scope();i&&i(r),t(e)(r),r.$digest()}]),me.widgetInstance(e,me.mobile.ui)},function(){function i(t,i,n){var r=e("<form>").attr({action:n,method:"POST"}),o=t.split(";base64,");e("<input>").attr({value:o[0].replace("data:",""),name:"contentType",type:"hidden"}).appendTo(r),e("<input>").attr({value:o[1],name:"base64",type:"hidden"}).appendTo(r),e("<input>").attr({value:i,name:"fileName",type:"hidden"}).appendTo(r),r.appendTo("body").submit().remove()}function n(e,t){var i,n,r,o,s,a=e;if("string"==typeof e){for(i=e.split(";base64,"),n=i[0],r=atob(i[1]),o=new Uint8Array(r.length),s=0;r.length>s;s++)o[s]=r.charCodeAt(s);a=new Blob([o.buffer],{type:n})}navigator.msSaveBlob(a,t)}function r(e,i){t.Blob&&e instanceof Blob&&(e=URL.createObjectURL(e)),o.download=i,o.href=e;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(n)}var o=document.createElement("a"),s="download"in o;me.saveAs=function(e){var t=i;e.forceProxy||(s?t=r:navigator.msSaveBlob&&(t=n)),t(e.dataURI,e.fileName,e.proxyURL)}}()}(jQuery,window),function(e,t){function i(e,t){if(!t)return e;e+"/"===t&&(e=t);var i=RegExp("^"+t,"i");return i.test(e)||(e=t+"/"+e),p.protocol+"//"+(p.host+"/"+e).replace(/\/\/+/g,"/")}function n(e){return e?"#!":"#"}function r(e){var t=p.href;return"#!"===e&&t.indexOf("#")>-1&&t.indexOf("#!")<0?null:t.split(e)[1]||""}function o(e,t){return 0===t.indexOf(e)?t.substr(e.length).replace(/\/\//g,"/"):t}function s(e){return e.replace(/^(#)?/,"#")}function a(e){return e.replace(/^(#(!)?)?/,"#!")}var l=window.kendo,c="change",d="back",u="same",h=l.support,p=window.location,f=window.history,m=50,g=l.support.browser.msie,v=/^#*/,y=window.document,_=l.Class.extend({back:function(){g?setTimeout(function(){f.back()}):f.back()},forward:function(){g?setTimeout(function(){f.forward()}):f.forward()},length:function(){return f.length},replaceLocation:function(e){p.replace(e)}}),b=_.extend({init:function(e){this.root=e},navigate:function(e){f.pushState({},y.title,i(e,this.root))},replace:function(e){f.replaceState({},y.title,i(e,this.root))},normalize:function(e){return o(this.root,e)},current:function(){var e=p.pathname;return p.search&&(e+=p.search),o(this.root,e)},change:function(t){e(window).bind("popstate.kendo",t)},stop:function(){e(window).unbind("popstate.kendo")},normalizeCurrent:function(e){var t,o=e.root,s=p.pathname,a=r(n(e.hashBang));o===s+"/"&&(t=o),o===s&&a&&(t=i(a.replace(v,""),o)),t&&f.pushState({},y.title,t)}}),w=_.extend({init:function(e){this._id=l.guid(),this.prefix=n(e),this.fix=e?a:s},navigate:function(e){p.hash=this.fix(e)},replace:function(e){this.replaceLocation(this.fix(e))},normalize:function(e){return e.indexOf(this.prefix)<0?e:e.split(this.prefix)[1]},change:function(t){h.hashChange?e(window).on("hashchange."+this._id,t):this._interval=setInterval(t,m)},stop:function(){e(window).off("hashchange."+this._id),clearInterval(this._interval)},current:function(){return r(this.prefix)},normalizeCurrent:function(e){var t=p.pathname,i=e.root;return!(!e.pushState||i===t)&&(this.replaceLocation(i+this.prefix+o(i,t)),!0)}}),k=l.Observable.extend({start:function(t){if(t=t||{},this.bind([c,d,u],t),!this._started){this._started=!0,t.root=t.root||"/";var i,n=this.createAdapter(t);n.normalizeCurrent(t)||(i=n.current(),e.extend(this,{adapter:n,root:t.root,historyLength:n.length(),current:i,locations:[i]}),n.change(e.proxy(this,"_checkUrl")))}},createAdapter:function(e){return h.pushState&&e.pushState?new b(e.root):new w(e.hashBang)},stop:function(){this._started&&(this.adapter.stop(),this.unbind(c),this._started=!1)},change:function(e){this.bind(c,e)},replace:function(e,t){this._navigate(e,t,function(t){t.replace(e),this.locations[this.locations.length-1]=this.current})},navigate:function(e,i){return"#:back"===e?(this.backCalled=!0,this.adapter.back(),t):(this._navigate(e,i,function(t){t.navigate(e),this.locations.push(this.current)}),t)},_navigate:function(e,i,n){var r=this.adapter;return e=r.normalize(e),this.current===e||this.current===decodeURIComponent(e)?(this.trigger(u),t):((i||!this.trigger(c,{url:e}))&&(this.current=e,n.call(this,r),this.historyLength=r.length()),t)},_checkUrl:function(){var e=this.adapter,i=e.current(),n=e.length(),r=this.historyLength===n,o=i===this.locations[this.locations.length-2]&&r,s=this.backCalled,a=this.current;return null===i||this.current===i||this.current===decodeURIComponent(i)||(this.historyLength=n,this.backCalled=!1,this.current=i,o&&this.trigger("back",{url:a,to:i})?(e.forward(),this.current=a,t):this.trigger(c,{url:i,backButtonPressed:!s})?(o?e.forward():(e.back(),this.historyLength--),this.current=a,t):(o?this.locations.pop():this.locations.push(i),t))}});l.History=k,l.History.HistoryAdapter=_,l.History.HashAdapter=w,l.History.PushStateAdapter=b,l.absoluteURL=i,l.history=new k}(window.kendo.jQuery),function(){function e(e,t){return t?e:"([^/]+)"}function t(t,i){return RegExp("^"+t.replace(f,"\\$&").replace(u,"(?:$1)?").replace(h,e).replace(p,"(.*?)")+"$",i?"i":"")}function i(e){return e.replace(/(\?.*)|(#.*)/g,"")}var n=window.kendo,r=n.history,o=n.Observable,s="init",a="routeMissing",l="change",c="back",d="same",u=/\((.*?)\)/g,h=/(\(\?)?:\w+/g,p=/\*\w+/g,f=/[\-{}\[\]+?.,\\\^$|#\s]/g,m=n.Class.extend({init:function(e,i,n){e instanceof RegExp||(e=t(e,n)),this.route=e,this._callback=i},callback:function(e){var t,r,o=0,s=n.parseQueryStringParams(e);for(e=i(e),t=this.route.exec(e).slice(1),r=t.length;r>o;o++)void 0!==t[o]&&(t[o]=decodeURIComponent(t[o]));t.push(s),this._callback.apply(null,t)},worksWith:function(e){return!!this.route.test(i(e))&&(this.callback(e),!0)}}),g=o.extend({init:function(e){e||(e={}),o.fn.init.call(this),this.routes=[],this.pushState=e.pushState,this.hashBang=e.hashBang,this.root=e.root,this.ignoreCase=e.ignoreCase!==!1,this.bind([s,a,l,d],e)},destroy:function(){r.unbind(l,this._urlChangedProxy),r.unbind(d,this._sameProxy),r.unbind(c,this._backProxy),this.unbind()},start:function(){var e,t=this,i=function(){t._same()},n=function(e){t._back(e)},o=function(e){t._urlChanged(e)};r.start({same:i,change:o,back:n,pushState:t.pushState,hashBang:t.hashBang,root:t.root}),e={url:r.current||"/",preventDefault:$.noop},t.trigger(s,e)||t._urlChanged(e),this._urlChangedProxy=o,this._backProxy=n},route:function(e,t){this.routes.push(new m(e,t,this.ignoreCase))},navigate:function(e,t){n.history.navigate(e,t)},replace:function(e,t){n.history.replace(e,t)},_back:function(e){this.trigger(c,{url:e.url,to:e.to})&&e.preventDefault()},_same:function(){this.trigger(d)},_urlChanged:function(e){var t,i,r,o,s=e.url;if(s||(s="/"),this.trigger(l,{url:e.url,params:n.parseQueryStringParams(e.url),backButtonPressed:e.backButtonPressed}))return void e.preventDefault();for(t=0,i=this.routes,o=i.length;o>t;t++)if(r=i[t],r.worksWith(s))return;this.trigger(a,{url:s,params:n.parseQueryStringParams(s),backButtonPressed:e.backButtonPressed})&&e.preventDefault()}});n.Router=g}(),function(e,t){function i(r,a){var l,c,d,u,h,p,f,m,g=[],v=r.logic||"and",y=r.filters;for(l=0,c=y.length;c>l;l++)r=y[l],d=r.field,f=r.value,p=r.operator,r.filters?r=i(r,a):(m=r.ignoreCase,d=d.replace(/\./g,"/"),r=o[p],a&&(r=s[p]),r&&f!==t&&(u=e.type(f),"string"===u?(h="'{1}'",f=f.replace(/'/g,"''"),m===!0&&(d="tolower("+d+")")):h="date"===u?a?"{1:yyyy-MM-ddTHH:mm:ss+00:00}":"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",r.length>3?"substringof"!==r?h="{0}({2},"+h+")":(h="{0}("+h+",{2})","doesnotcontain"===p&&(a?(h="{0}({2},'{1}') eq -1",r="indexof"):h+=" eq false")):h="{2} {0} "+h,r=n.format(h,r,f,d))),g.push(r);return r=g.join(" "+v+" "),g.length>1&&(r="("+r+")"),r}var n=window.kendo,r=e.extend,o={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},s=r({},o,{contains:"contains"}),a={pageSize:e.noop,page:e.noop,filter:function(e,t,n){t&&(e.$filter=i(t,n))},sort:function(t,i){var n=e.map(i,function(e){var t=e.field.replace(/\./g,"/");return"desc"===e.dir&&(t+=" desc"),t}).join(",");n&&(t.$orderby=n)},skip:function(e,t){t&&(e.$skip=t)},take:function(e,t){t&&(e.$top=t)}},l={read:{dataType:"jsonp"}};r(!0,n.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t,i){var r,o,s,c;if(e=e||{},t=t||"read",c=(this.options||l)[t],c=c?c.dataType:"json","read"===t){r={$inlinecount:"allpages"},"json"!=c&&(r.$format="json");for(s in e)a[s]?a[s](r,e[s],i):r[s]=e[s]}else{if("json"!==c)throw Error("Only json dataType can be used for "+t+" operation.");if("destroy"!==t){for(s in e)o=e[s],"number"==typeof o&&(e[s]=o+"");r=n.stringify(e)}}return r}}}}),r(!0,n.data,{schemas:{"odata-v4":{type:"json",data:function(e){return e.value?e.value:(delete e["odata.metadata"],[e])},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{read:{cache:!0,dataType:"json"},update:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var i=n.data.transports.odata.parameterMap(e,t,!0);return"read"==t&&(i.$count=!0,delete i.$inlinecount),i}}}})}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=e.isArray,r=e.isPlainObject,o=e.map,s=e.each,a=e.extend,l=i.getter,c=i.Class,d=c.extend({init:function(e){var t,l,c,d,u=this,h=e.total,p=e.model,f=e.parse,m=e.errors,g=e.serialize,v=e.data;p&&(r(p)&&(t=e.modelBase||i.data.Model,p.fields&&s(p.fields,function(e,t){t=r(t)&&t.field?a(t,{field:u.getter(t.field)}):{field:u.getter(t)},p.fields[e]=t}),l=p.id,l&&(c={},c[u.xpathToMember(l,!0)]={field:u.getter(l)},p.fields=a(c,p.fields),p.id=u.xpathToMember(l)),p=t.define(p)),u.model=p),h&&("string"==typeof h?(h=u.getter(h),u.total=function(e){return parseInt(h(e),10)}):"function"==typeof h&&(u.total=h)),m&&("string"==typeof m?(m=u.getter(m),u.errors=function(e){return m(e)||null}):"function"==typeof m&&(u.errors=m)),v&&("string"==typeof v?(v=u.xpathToMember(v),u.data=function(e){var t,i=u.evaluate(e,v);return i=n(i)?i:[i],u.model&&p.fields?(t=new u.model,o(i,function(e){if(e){var i,n={};for(i in p.fields)n[i]=t._parse(i,p.fields[i].field(e));return n}})):i}):"function"==typeof v&&(u.data=v)),"function"==typeof f&&(d=u.parse,u.parse=function(e){var t=f.call(u,e);return d.call(u,t)}),"function"==typeof g&&(u.serialize=g)},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var i,r,o,s,a,l,c,d={},u=e.attributes,h=u.length;for(c=0;h>c;c++)l=u[c],d["@"+l.nodeName]=l.nodeValue;for(r=e.firstChild;r;r=r.nextSibling)o=r.nodeType,3===o||4===o?d["#text"]=r.nodeValue:1===o&&(i=this.parseDOM(r),s=r.nodeName,a=d[s],n(a)?a.push(i):a=a!==t?[a,i]:i,d[s]=a);return d},evaluate:function(e,t){for(var i,r,o,s,a,l=t.split(".");i=l.shift();)if(e=e[i],n(e)){for(r=[],t=l.join("."),a=0,o=e.length;o>a;a++)s=this.evaluate(e[a],t),s=n(s)?s:[s],r.push.apply(r,s);return r}return e},parse:function(t){var i,n,r={};return i=t.documentElement||e.parseXML(t).documentElement,n=this.parseDOM(i),r[i.nodeName]=n,r},xpathToMember:function(e,t){return e?(e=e.replace(/^\//,"").replace(/\//g,"."),e.indexOf("@")>=0?e.replace(/\.?(@.*)/,t?"$1":'["$1"]'):e.indexOf("text()")>=0?e.replace(/(\.?text\(\))/,t?"#text":'["#text"]'):e):""},getter:function(e){return l(this.xpathToMember(e),!0)}});e.extend(!0,i.data,{XmlDataReader:d,readers:{xml:d}})}(window.kendo.jQuery),function(e,t){function i(e,t,i,n){return function(r){var o,s={};for(o in r)s[o]=r[o];s.field=n?i+"."+r.field:i,t==be&&e._notifyChange&&e._notifyChange(s),e.trigger(t,s)}}function n(t,i){if(t===i)return!0;var r,o=e.type(t),s=e.type(i);if(o!==s)return!1;if("date"===o)return t.getTime()===i.getTime();if("object"!==o&&"array"!==o)return!1;for(r in t)if(!n(t[r],i[r]))return!1;return!0}function r(e,t){var i,n;for(n in e){if(i=e[n],ne(i)&&i.field&&i.field===t)return i;if(i===t)return i}return null}function o(e){this.data=e||[]}function s(e,i){if(e){var n=typeof e===fe?{field:e,dir:i}:e,r=oe(n)?n:n!==t?[n]:[];return se(r,function(e){return!!e.dir})}}function a(e){var t,i,n,r,o=e.filters;if(o)for(t=0,i=o.length;i>t;t++)n=o[t],r=n.operator,r&&typeof r===fe&&(n.operator=V[r.toLowerCase()]||r),a(n)}function l(e){return e&&!re(e)?((oe(e)||!e.filters)&&(e={logic:"and",filters:oe(e)?e:[e]}),a(e),e):t}function c(e){return oe(e)?e:[e]}function d(e,i){var n=typeof e===fe?{field:e,dir:i}:e,r=oe(n)?n:n!==t?[n]:[];return O(r,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function u(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function h(e,t,i,n,r,o){var s,a,l,c,d;for(t=t||[],c=t.length,s=0;c>s;s++)a=t[s],l=a.aggregate,d=a.field,e[d]=e[d]||{},o[d]=o[d]||{},o[d][l]=o[d][l]||{},e[d][l]=W[l.toLowerCase()](e[d][l],i,de.accessor(d),n,r,o[d][l])}function p(e){return"number"==typeof e&&!isNaN(e)}function f(e){return e&&e.getTime}function m(e){var t,i=e.length,n=Array(i);for(t=0;i>t;t++)n[t]=e[t].toJSON();return n}function g(e,t,i,n,r){var o,s,a,l,c;for(l=0,c=e.length;c>l;l++){o=e[l];for(s in t)a=r[s],a&&a!==s&&(o[a]=t[s](o),delete o[s])}}function v(e,t,i,n,r){var o,s,a,l,c;for(l=0,c=e.length;c>l;l++){o=e[l];for(s in t)o[s]=i._parse(s,t[s](o)),a=r[s],a&&a!==s&&delete o[a]}}function y(e,t,i,n,r){var o,s,a,l;for(s=0,l=e.length;l>s;s++)o=e[s],a=n[o.field],a&&a!=o.field&&(o.field=a),o.value=i._parse(o.field,o.value),o.hasSubgroups?y(o.items,t,i,n,r):v(o.items,t,i,n,r)}function _(e,t,i,n,r,o){return function(s){return s=e(s),s&&!re(n)&&("[object Array]"===Oe.call(s)||s instanceof We||(s=[s]),i(s,n,new t,r,o)),s||[]}}function b(e,t,i,n){for(var r,o,s,a=0;t.length&&n&&(r=t[a],o=r.items,s=o.length,e&&e.field===r.field&&e.value===r.value?(e.hasSubgroups&&e.items.length?b(e.items[e.items.length-1],r.items,i,n):(o=o.slice(i,i+n),e.items=e.items.concat(o)),t.splice(a--,1)):r.hasSubgroups&&o.length?b(r,o,i,n):(o=o.slice(i,i+n),r.items=o,r.items.length||t.splice(a--,1)),0===o.length?i-=s:(i=0,n-=o.length),!(++a>=t.length)););t.length>a&&t.splice(a,t.length-a)}function w(e){var t,i,n,r,o,s=[];for(t=0,i=e.length;i>t;t++)if(o=e.at(t),o.hasSubgroups)s=s.concat(w(o.items));else for(n=o.items,r=0;n.length>r;r++)s.push(n.at(r));return s}function k(e,t){var i,n,r;if(t)for(i=0,n=e.length;n>i;i++)r=e.at(i),r.hasSubgroups?k(r.items,t):r.items=new je(r.items,t)}function x(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i].hasSubgroups){if(x(e[i].items,t))return!0}else if(t(e[i].items,e[i]))return!0}function C(e,t,i,n){for(var r=0;e.length>r&&e[r].data!==t&&!S(e[r].data,i,n);r++);}function S(e,t,i){for(var n=0,r=e.length;r>n;n++){if(e[n]&&e[n].hasSubgroups)return S(e[n].items,t,i);if(e[n]===t||e[n]===i)return e[n]=i,!0}}function T(e,i,n,r){var o,s,a,l;for(o=0,s=e.length;s>o;o++)if(a=e[o],a&&!(a instanceof r))if(a.hasSubgroups!==t)T(a.items,i,n,r);else for(l=0;i.length>l;l++)if(i[l]===a){e[o]=i.at(l),C(n,i,a,e[o]);break}}function D(e,t){var i,n,r;for(i=0,n=e.length;n>i;i++)if(r=e.at(i),r.uid==t.uid)return e.splice(i,1),r}function M(e,t){var i,n,r,o;for(r=e.length-1,o=0;r>=o;r--)n=e[r],i={value:t.get(n.field),field:n.field,items:i?[i]:[t],hasSubgroups:!!i,aggregates:{}};return i}function A(e,t){return t?I(e,function(e){return e.uid?e.uid==t.uid:e[t.idField]===t.id}):-1}function E(e,t){return t?I(e,function(e){return e.uid==t.uid}):-1}function I(e,t){var i,n;for(i=0,n=e.length;n>i;i++)if(t(e[i]))return i;return-1}function P(e,t){var i,n;return e&&!re(e)?(i=e[t],n=ne(i)?i.from||i.field||t:e[t]||t,ue(n)?t:n):t}function F(e,t){var i,n,r,o={};for(r in e)"filters"!==r&&(o[r]=e[r]);if(e.filters)for(o.filters=[],i=0,n=e.filters.length;n>i;i++)o.filters[i]=F(e.filters[i],t);else o.field=P(t.fields,o.field);return o}function z(e,t){var i,n,r,o,s,a=[];for(i=0,n=e.length;n>i;i++){r={},o=e[i];for(s in o)r[s]=o[s];r.field=P(t.fields,r.field),r.aggregates&&oe(r.aggregates)&&(r.aggregates=z(r.aggregates,t)),a.push(r)}return a}function H(t,i){var n,r,o,s,a,l=e(t)[0].children,c=[],d=i[0],u=i[1];for(n=0,r=l.length;r>n;n++)o={},a=l[n],a.disabled||(o[d.field]=a.text,s=a.attributes.value,s=s&&s.specified?a.value:a.text,o[u.field]=s,c.push(o));return c}function R(t,i){var n,r,o,s,a,l,c,d=e(t)[0].tBodies[0],u=d?d.rows:[],h=i.length,p=[];
for(n=0,r=u.length;r>n;n++){for(a={},c=!0,s=u[n].cells,o=0;h>o;o++)l=s[o],"th"!==l.nodeName.toLowerCase()&&(c=!1,a[i[o].field]=l.innerHTML);c||p.push(a)}return p}function N(e){return function(){var t=this._data,i=Q.fn[e].apply(this,Ne.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),i}}function $(t,i){function n(e,t){return e.filter(t).add(e.find(t))}var r,o,s,a,l,c,d,u,h=e(t).children(),p=[],f=i[0].field,m=i[1]&&i[1].field,g=i[2]&&i[2].field,v=i[3]&&i[3].field;for(r=0,o=h.length;o>r;r++)s={_loaded:!0},a=h.eq(r),c=a[0].firstChild,u=a.children(),t=u.filter("ul"),u=u.filter(":not(ul)"),l=a.attr("data-id"),l&&(s.id=l),c&&(s[f]=3==c.nodeType?c.nodeValue:u.text()),m&&(s[m]=n(u,"a").attr("href")),v&&(s[v]=n(u,"img").attr("src")),g&&(d=n(u,".k-sprite").prop("className"),s[g]=d&&e.trim(d.replace("k-sprite",""))),t.length&&(s.items=$(t.eq(0),i)),"true"==a.attr("data-hasChildren")&&(s.hasChildren=!0),p.push(s);return p}var O,L,B,U,V,W,j,q,G,Y,Q,K,X,Z,J,ee,te=e.extend,ie=e.proxy,ne=e.isPlainObject,re=e.isEmptyObject,oe=e.isArray,se=e.grep,ae=e.ajax,le=e.each,ce=e.noop,de=window.kendo,ue=de.isFunction,he=de.Observable,pe=de.Class,fe="string",me="function",ge="create",ve="read",ye="update",_e="destroy",be="change",we="sync",ke="get",xe="error",Ce="requestStart",Se="progress",Te="requestEnd",De=[ge,ve,ye,_e],Me=function(e){return e},Ae=de.getter,Ee=de.stringify,Ie=Math,Pe=[].push,Fe=[].join,ze=[].pop,He=[].splice,Re=[].shift,Ne=[].slice,$e=[].unshift,Oe={}.toString,Le=de.support.stableSort,Be=/^\/Date\((.*?)\)\/$/,Ue=/(\r+|\n+)/g,Ve=/(?=['\\])/g,We=he.extend({init:function(e,t){var i=this;i.type=t||qe,he.fn.init.call(i),i.length=e.length,i.wrapAll(e,i)},at:function(e){return this[e]},toJSON:function(){var e,t,i=this.length,n=Array(i);for(e=0;i>e;e++)t=this[e],t instanceof qe&&(t=t.toJSON()),n[e]=t;return n},parent:ce,wrapAll:function(e,t){var i,n,r=this,o=function(){return r};for(t=t||[],i=0,n=e.length;n>i;i++)t[i]=r.wrap(e[i],o);return t},wrap:function(e,t){var i,n=this;return null!==e&&"[object Object]"===Oe.call(e)&&(i=e instanceof n.type||e instanceof Qe,i||(e=e instanceof qe?e.toJSON():e,e=new n.type(e)),e.parent=t,e.bind(be,function(e){n.trigger(be,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemchange":"itemchange"})})),e},push:function(){var e,t=this.length,i=this.wrapAll(arguments);return e=Pe.apply(this,i),this.trigger(be,{action:"add",index:t,items:i}),e},slice:Ne,sort:[].sort,join:Fe,pop:function(){var e=this.length,t=ze.apply(this);return e&&this.trigger(be,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,i){var n,r,o,s=this.wrapAll(Ne.call(arguments,2));if(n=He.apply(this,[e,t].concat(s)),n.length)for(this.trigger(be,{action:"remove",index:e,items:n}),r=0,o=n.length;o>r;r++)n[r].children&&n[r].unbind(be);return i&&this.trigger(be,{action:"add",index:e,items:s}),n},shift:function(){var e=this.length,t=Re.apply(this);return e&&this.trigger(be,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=$e.apply(this,t),this.trigger(be,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,i,n=this;for(t=0,i=n.length;i>t;t++)if(n[t]===e)return t;return-1},forEach:function(e){for(var t=0,i=this.length;i>t;t++)e(this[t],t,this)},map:function(e){for(var t=0,i=[],n=this.length;n>t;t++)i[t]=e(this[t],t,this);return i},filter:function(e){for(var t,i=0,n=[],r=this.length;r>i;i++)t=this[i],e(t,i,this)&&(n[n.length]=t);return n},find:function(e){for(var t,i=0,n=this.length;n>i;i++)if(t=this[i],e(t,i,this))return t},every:function(e){for(var t,i=0,n=this.length;n>i;i++)if(t=this[i],!e(t,i,this))return!1;return!0},some:function(e){for(var t,i=0,n=this.length;n>i;i++)if(t=this[i],e(t,i,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}}),je=We.extend({init:function(e,t){he.fn.init.call(this),this.type=t||qe;for(var i=0;e.length>i;i++)this[i]=e[i];this.length=i,this._parent=ie(function(){return this},this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}}),qe=he.extend({init:function(e){var t,i,n=this,r=function(){return n};he.fn.init.call(this);for(i in e)t=e[i],"object"==typeof t&&t&&!t.getTime&&"_"!=i.charAt(0)&&(t=n.wrap(t,i,r)),n[i]=t;n.uid=de.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_events"!==e&&typeof this[e]!==me&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(){var e,t,i={};for(t in this)this.shouldSerialize(t)&&(e=this[t],(e instanceof qe||e instanceof We)&&(e=e.toJSON()),i[t]=e);return i},get:function(e){var t,i=this;return i.trigger(ke,{field:e}),t="this"===e?i:de.getter(e,!0)(i)},_set:function(e,t){var i,n,r,o=this,s=e.indexOf(".")>=0;if(s)for(i=e.split("."),n="";i.length>1;){if(n+=i.shift(),r=de.getter(n,!0)(o),r instanceof qe)return r.set(i.join("."),t),s;n+="."}return de.setter(e)(o,t),s},set:function(e,t){var i=this,n=e.indexOf(".")>=0,r=de.getter(e,!0)(i);r!==t&&(i.trigger("set",{field:e,value:t})||(n||(t=i.wrap(t,e,function(){return i})),(!i._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&i.trigger(be,{field:e})))},parent:ce,wrap:function(e,t,n){var r,o,s=this,a=Oe.call(e);return null==e||"[object Object]"!==a&&"[object Array]"!==a||(r=e instanceof We,o=e instanceof Q,"[object Object]"!==a||o||r?("[object Array]"===a||r||o)&&(r||o||(e=new We(e)),e.parent()!=n()&&e.bind(be,i(s,be,t,!1))):(e instanceof qe||(e=new qe(e)),e.parent()!=n()&&(e.bind(ke,i(s,ke,t,!0)),e.bind(be,i(s,be,t,!0)))),e.parent=n),e}}),Ge={number:function(e){return de.parseFloat(e)},date:function(e){return de.parseDate(e)},boolean:function(e){return typeof e===fe?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},default:function(e){return e}},Ye={string:"",number:0,date:new Date,boolean:!1,default:""},Qe=qe.extend({init:function(i){var n,r,o=this;if((!i||e.isEmptyObject(i))&&(i=e.extend({},o.defaults,i),o._initializers))for(n=0;o._initializers.length>n;n++)r=o._initializers[n],i[r]=o.defaults[r]();qe.fn.init.call(o,i),o.dirty=!1,o.idField&&(o.id=o.get(o.idField),o.id===t&&(o.id=o._defaultId))},shouldSerialize:function(e){return qe.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var i,n=this,o=e,s=n.fields||{};return e=s[e],e||(e=r(s,o)),e&&(i=e.parse,!i&&e.type&&(i=Ge[e.type.toLowerCase()])),i?i(t):t},_notifyChange:function(e){var t=e.action;("add"==t||"remove"==t)&&(this.dirty=!0)},editable:function(e){return e=(this.fields||{})[e],!e||e.editable!==!1},set:function(e,t,i){var r=this;r.editable(e)&&(t=r._parse(e,t),n(t,r.get(e))||(r.dirty=!0,qe.fn.set.call(r,e,t,i)))},accept:function(e){var t,i,n=this,r=function(){return n};for(t in e)i=e[t],"_"!=t.charAt(0)&&(i=n.wrap(e[t],t,r)),n._set(t,i);n.idField&&(n.id=n.get(n.idField)),n.dirty=!1},isNew:function(){return this.id===this._defaultId}});Qe.define=function(e,i){i===t&&(i=e,e=Qe);var n,r,o,s,a,l,c,d,u=te({defaults:{}},i),h={},p=u.id,f=[];if(p&&(u.idField=p),u.id&&delete u.id,p&&(u.defaults[p]=u._defaultId=""),"[object Array]"===Oe.call(u.fields)){for(l=0,c=u.fields.length;c>l;l++)o=u.fields[l],typeof o===fe?h[o]={}:o.field&&(h[o.field]=o);u.fields=h}for(r in u.fields)o=u.fields[r],s=o.type||"default",a=null,d=r,r=typeof o.field===fe?o.field:r,o.nullable||(a=u.defaults[d!==r?d:r]=o.defaultValue!==t?o.defaultValue:Ye[s.toLowerCase()],"function"==typeof a&&f.push(r)),i.id===r&&(u._defaultId=a),u.defaults[d!==r?d:r]=a,o.parse=o.parse||Ge[s];return f.length>0&&(u._initializers=f),n=e.extend(u),n.define=function(e){return Qe.define(n,e)},u.fields&&(n.fields=u.fields,n.idField=u.idField),n},L={selector:function(e){return ue(e)?e:Ae(e)},compare:function(e){var t=this.selector(e);return function(e,i){return e=t(e),i=t(i),null==e&&null==i?0:null==e?-1:null==i?1:e.localeCompare?e.localeCompare(i):e>i?1:i>e?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,i){return t(i,e,!0)}:t},combine:function(e){return function(t,i){var n,r,o=e[0](t,i);for(n=1,r=e.length;r>n;n++)o=o||e[n](t,i);return o}}},B=te({},L,{asc:function(e){var t=this.selector(e);return function(e,i){var n=t(e),r=t(i);return n&&n.getTime&&r&&r.getTime&&(n=n.getTime(),r=r.getTime()),n===r?e.__position-i.__position:null==n?-1:null==r?1:n.localeCompare?n.localeCompare(r):n>r?1:-1}},desc:function(e){var t=this.selector(e);return function(e,i){var n=t(e),r=t(i);return n&&n.getTime&&r&&r.getTime&&(n=n.getTime(),r=r.getTime()),n===r?e.__position-i.__position:null==n?1:null==r?-1:r.localeCompare?r.localeCompare(n):r>n?1:-1}},create:function(e){return this[e.dir](e.field)}}),O=function(e,t){var i,n=e.length,r=Array(n);for(i=0;n>i;i++)r[i]=t(e[i],i,e);return r},U=function(){function e(e){return e.replace(Ve,"\\").replace(Ue,"")}function t(t,i,n,r){var o;return null!=n&&(typeof n===fe&&(n=e(n),o=Be.exec(n),o?n=new Date((+o[1])):r?(n="'"+n.toLowerCase()+"'",i="("+i+" || '').toLowerCase()"):n="'"+n+"'"),n.getTime&&(i="("+i+"?"+i+".getTime():"+i+")",n=n.getTime())),i+" "+t+" "+n}return{eq:function(e,i,n){return t("==",e,i,n)},neq:function(e,i,n){return t("!=",e,i,n)},gt:function(e,i,n){return t(">",e,i,n)},gte:function(e,i,n){return t(">=",e,i,n)},lt:function(e,i,n){return t("<",e,i,n)},lte:function(e,i,n){return t("<=",e,i,n)},startswith:function(t,i,n){return n&&(t="("+t+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=e(i)),t+".lastIndexOf('"+i+"', 0) == 0"},endswith:function(t,i,n){return n&&(t="("+t+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=e(i)),t+".indexOf('"+i+"', "+t+".length - "+(i||"").length+") >= 0"},contains:function(t,i,n){return n&&(t="("+t+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=e(i)),t+".indexOf('"+i+"') >= 0"},doesnotcontain:function(t,i,n){return n&&(t="("+t+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=e(i)),t+".indexOf('"+i+"') == -1"}}}(),o.filterExpr=function(e){var i,n,r,s,a,l,c=[],d={and:" && ",or:" || "},u=[],h=[],p=e.filters;for(i=0,n=p.length;n>i;i++)r=p[i],a=r.field,l=r.operator,r.filters?(s=o.filterExpr(r),r=s.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(h.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(u.length+t)+"]"}),h.push.apply(h,s.operators),u.push.apply(u,s.fields)):(typeof a===me?(s="__f["+u.length+"](d)",u.push(a)):s=de.expr(a),typeof l===me?(r="__o["+h.length+"]("+s+", "+r.value+")",h.push(l)):r=U[(l||"eq").toLowerCase()](s,r.value,r.ignoreCase===t||r.ignoreCase)),c.push(r);return{expression:"("+c.join(d[e.logic])+")",fields:u,operators:h}},V={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"},o.normalizeFilter=l,o.prototype={toArray:function(){return this.data},range:function(e,t){return new o(this.data.slice(e,e+t))},skip:function(e){return new o(this.data.slice(e))},take:function(e){return new o(this.data.slice(0,e))},select:function(e){return new o(O(this.data,e))},order:function(e,t){var i={dir:t};return e&&(e.compare?i.compare=e.compare:i.field=e),new o(this.data.slice(0).sort(L.create(i)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,i){var n,r,o=s(e,t),a=[];if(i=i||L,o.length){for(n=0,r=o.length;r>n;n++)a.push(i.create(o[n]));return this.orderBy({compare:i.combine(a)})}return this},filter:function(e){var t,i,n,r,s,a,c,d,u=this.data,h=[];if(e=l(e),!e||0===e.filters.length)return this;for(r=o.filterExpr(e),a=r.fields,c=r.operators,s=d=Function("d, __f, __o","return "+r.expression),(a.length||c.length)&&(d=function(e){return s(e,a,c)}),t=0,n=u.length;n>t;t++)i=u[t],d(i)&&h.push(i);return new o(h)},group:function(e,t){e=d(e||[]),t=t||this.data;var i,n=this,r=new o(n.data);return e.length>0&&(i=e[0],r=r.groupBy(i).select(function(n){var r=new o(t).filter([{field:n.field,operator:"eq",value:n.value,ignoreCase:!1}]);return{field:n.field,value:n.value,items:e.length>1?new o(n.items).group(e.slice(1),r.toArray()).toArray():n.items,hasSubgroups:e.length>1,aggregates:r.aggregate(i.aggregates)}})),r},groupBy:function(e){if(re(e)||!this.data.length)return new o([]);var t,i,n,r,s=e.field,a=this._sortForGrouping(s,e.dir||"asc"),l=de.accessor(s),c=l.get(a[0],s),d={field:s,value:c,items:[]},h=[d];for(n=0,r=a.length;r>n;n++)t=a[n],i=l.get(t,s),u(c,i)||(c=i,d={field:s,value:c,items:[]},h.push(d)),d.items.push(t);return new o(h)},_sortForGrouping:function(e,t){var i,n,r=this.data;if(!Le){for(i=0,n=r.length;n>i;i++)r[i].__position=i;for(r=new o(r).sort(e,t,B).toArray(),i=0,n=r.length;n>i;i++)delete r[i].__position;return r}return this.sort(e,t).toArray()},aggregate:function(e){var t,i,n={},r={};if(e&&e.length)for(t=0,i=this.data.length;i>t;t++)h(n,e,this.data[t],t,i,r);return n}},W={sum:function(e,t,i){var n=i.get(t);return p(e)?p(n)&&(e+=n):e=n,e},count:function(e){return(e||0)+1},average:function(e,i,n,r,o,s){var a=n.get(i);return s.count===t&&(s.count=0),p(e)?p(a)&&(e+=a):e=a,p(a)&&s.count++,r==o-1&&p(e)&&(e/=s.count),e},max:function(e,t,i){var n=i.get(t);return p(e)||f(e)||(e=n),n>e&&(p(n)||f(n))&&(e=n),e},min:function(e,t,i){var n=i.get(t);return p(e)||f(e)||(e=n),e>n&&(p(n)||f(n))&&(e=n),e}},o.process=function(e,i){i=i||{};var n,r=new o(e),a=i.group,l=d(a||[]).concat(s(i.sort||[])),c=i.filterCallback,u=i.filter,h=i.skip,p=i.take;return u&&(r=r.filter(u),c&&(r=c(r)),n=r.toArray().length),l&&(r=r.sort(l),a&&(e=r.toArray())),h!==t&&p!==t&&(r=r.range(h,p)),a&&(r=r.group(a,e)),{total:n,data:r.toArray()}},j=pe.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),q=pe.extend({init:function(e){var t,i=this;e=i.options=te({},i.options,e),le(De,function(t,i){typeof e[i]===fe&&(e[i]={url:e[i]})}),i.cache=e.cache?G.create(e.cache):{find:ce,add:ce},t=e.parameterMap,ue(e.push)&&(i.push=e.push),i.push||(i.push=Me),i.parameterMap=ue(t)?t:function(e){var i={};return le(e,function(e,n){e in t&&(e=t[e],ne(e)&&(n=e.value(n),e=e.key)),i[e]=n}),i}},options:{parameterMap:Me},create:function(e){return ae(this.setup(e,ge))},read:function(i){var n,r,o,s=this,a=s.cache;i=s.setup(i,ve),n=i.success||ce,r=i.error||ce,o=a.find(i.data),o!==t?n(o):(i.success=function(e){a.add(i.data,e),n(e)},e.ajax(i))},update:function(e){return ae(this.setup(e,ye))},destroy:function(e){return ae(this.setup(e,_e))},setup:function(e,t){e=e||{};var i,n=this,r=n.options[t],o=ue(r.data)?r.data(e.data):r.data;return e=te(!0,{},r,e),i=te(!0,{},o,e.data),e.data=n.parameterMap(i,t),ue(e.url)&&(e.url=e.url(i)),e}}),G=pe.extend({init:function(){this._store={}},add:function(e,i){e!==t&&(this._store[Ee(e)]=i)},find:function(e){return this._store[Ee(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[Ee(e)]}}),G.create=function(e){var t={inmemory:function(){return new G}};return ne(e)&&ue(e.find)?e:e===!0?new G:t[e]()},Y=pe.extend({init:function(e){var t,i,n,r,o,s,a,l,c,d,u,h,p,f=this;e=e||{};for(t in e)i=e[t],f[t]=typeof i===fe?Ae(i):i;r=e.modelBase||Qe,ne(f.model)&&(f.model=n=r.define(f.model)),o=ie(f.data,f),f._dataAccessFunction=o,f.model&&(s=ie(f.groups,f),a=ie(f.serialize,f),l={},c={},d={},u={},h=!1,n=f.model,n.fields&&(le(n.fields,function(e,t){var i;p=e,ne(t)&&t.field?p=t.field:typeof t===fe&&(p=t),ne(t)&&t.from&&(i=t.from),h=h||i&&i!==e||p!==e,c[e]=Ae(i||p),d[e]=Ae(e),l[i||p]=e,u[e]=i||p}),!e.serialize&&h&&(f.serialize=_(a,n,g,d,l,u))),f._dataAccessFunction=o,f.data=_(o,n,v,c,l,u),f.groups=_(s,n,y,c,l,u))},errors:function(e){return e?e.errors:null},parse:Me,data:Me,total:function(e){return e.length},groups:Me,aggregates:function(){return{}},serialize:function(e){return e}}),Q=he.extend({init:function(e){var i,n,r,o=this;e&&(n=e.data),e=o.options=te({},o.options,e),o._map={},o._prefetch={},o._data=[],o._pristineData=[],o._ranges=[],o._view=[],o._pristineTotal=0,o._destroyed=[],o._pageSize=e.pageSize,o._page=e.page||(e.pageSize?1:t),o._sort=s(e.sort),o._filter=l(e.filter),o._group=d(e.group),o._aggregate=e.aggregate,o._total=e.total,o._shouldDetachObservableParents=!0,he.fn.init.call(o),o.transport=K.create(e,n),ue(o.transport.push)&&o.transport.push({pushCreate:ie(o._pushCreate,o),pushUpdate:ie(o._pushUpdate,o),pushDestroy:ie(o._pushDestroy,o)}),null!=e.offlineStorage&&("string"==typeof e.offlineStorage?(r=e.offlineStorage,o._storage={getItem:function(){return JSON.parse(localStorage.getItem(r))},setItem:function(e){localStorage.setItem(r,Ee(e))}}):o._storage=e.offlineStorage),o.reader=new de.data.readers[e.schema.type||"json"](e.schema),i=o.reader.model||{},o._detachObservableParents(),o._data=o._observe(o._data),o._online=!0,o.bind(["push",xe,be,Ce,we,Te,Se],e)},options:{data:null,schema:{modelBase:Qe},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},online:function(e){return e===t?this._online:(this._online!=e&&(this._online=e,e&&this.sync()),t)},offlineData:function(e){return null==this.options.offlineStorage?null:e!==t?this._storage.setItem(e):this._storage.getItem()||{}},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var i=this._readData(e);i||(i=e),this[t](i)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return w(e);if(!t)for(var i=0;e.length>i;i++)e.at(i)}return e},parent:ce,get:function(e){var t,i,n=this._flatData(this._data);for(t=0,i=n.length;i>t;t++)if(n[t].id==e)return n[t]},getByUid:function(e){var t,i,n=this._flatData(this._data);if(n)for(t=0,i=n.length;i>t;t++)if(n[t].uid==e)return n[t]},indexOf:function(e){return E(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var i,n=this;if(e===t){if(n._data)for(i=0;n._data.length>i;i++)n._data.at(i);return n._data}n._detachObservableParents(),n._data=this._observe(e),n._pristineData=e.slice(0),n._storeData(),n._ranges=[],n.trigger("reset"),n._addRange(n._data),n._total=n._data.length,n._pristineTotal=n._total,n._process(n._data)},view:function(e){return e===t?this._view:(this._view=this._observeView(e),t)},_observeView:function(e){return T(e,this._data,this._ranges,this.reader.model||qe),new je(e,this.reader.model)},flatView:function(){var e=this.group()||[];return e.length?w(this._view):this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof qe?e:new qe(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof Qe||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,M(this.group(),t)):this._data.splice(e,0,t),t},pushCreate:function(e){var t,i,n,r,o,s;oe(e)||(e=[e]),t=[],i=this.options.autoSync,this.options.autoSync=!1;try{for(n=0;e.length>n;n++)r=e[n],o=this.add(r),t.push(o),s=o.toJSON(),this._isServerGrouped()&&(s=M(this.group(),s)),this._pristineData.push(s)}finally{this.options.autoSync=i}t.length&&this.trigger("push",{type:"create",items:t})},pushUpdate:function(e){var t,i,n,r,o;for(oe(e)||(e=[e]),t=[],i=0;e.length>i;i++)n=e[i],r=this._createNewModel(n),o=this.get(r.id),o?(t.push(o),o.accept(n),o.trigger("change"),this._updatePristineForModel(o,n)):this.pushCreate(n);t.length&&this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e){var t,i,n,r,o,s;oe(e)||(e=[e]),t=[],i=this.options.autoSync,this.options.autoSync=!1;try{for(n=0;e.length>n;n++)r=e[n],o=this._createNewModel(r),s=!1,this._eachItem(this._data,function(e){var i,n;for(i=0;e.length>i;i++)if(n=e.at(i),n.id===o.id){t.push(n),e.splice(i,1),s=!0;break}}),s&&(this._removePristineForModel(o),this._destroyed.pop())}finally{this.options.autoSync=i}return t},remove:function(e){var i,n=this,r=n._isServerGrouped();return this._eachItem(n._data,function(o){return i=D(o,e),i&&r?(i.isNew&&i.isNew()||n._destroyed.push(i),!0):t}),this._removeModelFromRanges(e),this._updateRangesLength(),e},sync:function(){var t,i,n,r,o=this,s=[],a=[],l=o._destroyed,c=o._flatData(o._data);if(o.online()){if(!o.reader.model)return;for(t=0,i=c.length;i>t;t++)c[t].isNew()?s.push(c[t]):c[t].dirty&&a.push(c[t]);r=[],r.push.apply(r,o._send("create",s)),r.push.apply(r,o._send("update",a)),r.push.apply(r,o._send("destroy",l)),n=e.when.apply(null,r).then(function(){var e,t;for(e=0,t=arguments.length;t>e;e++)o._accept(arguments[e]);o._storeData(!0),o._change({action:"sync"}),o.trigger(we)})}else o._storeData(!0),o._change({action:"sync"}),n=e.Deferred().resolve().promise();return n},cancelChanges:function(e){var t=this;e instanceof de.data.Model?t._cancelModel(e):(t._destroyed=[],t._detachObservableParents(),t._data=t._observe(t._pristineData),t.options.serverPaging&&(t._total=t._pristineTotal),t._change())},hasChanges:function(){var e,t,i=this._data;if(this._destroyed.length)return!0;for(e=0,t=i.length;t>e;e++)if(i[e].isNew()||i[e].dirty)return!0;return!1},_accept:function(t){var i,n=this,r=t.models,o=t.response,s=0,a=n._isServerGrouped(),l=n._pristineData,c=t.type;if(n.trigger(Te,{response:o,type:c}),o&&!re(o)){if(o=n.reader.parse(o),n._handleCustomErrors(o))return;o=n.reader.data(o),oe(o)||(o=[o])}else o=e.map(r,function(e){return e.toJSON()});for("destroy"===c&&(n._destroyed=[]),s=0,i=r.length;i>s;s++)"destroy"!==c?(r[s].accept(o[s]),"create"===c?l.push(a?M(n.group(),r[s]):o[s]):"update"===c&&n._updatePristineForModel(r[s],o[s])):n._removePristineForModel(r[s])},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,i){de.deepExtend(i[e],t)})},_executeOnPristineForModel:function(e,i){this._eachPristineItem(function(n){var r=A(n,e);return r>-1?(i(r,n),!0):t})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=this._isServerGrouped()?this.reader.groups:this.reader.data;return t.call(this.reader,e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?x(e,t):t(e))},_pristineForModel:function(e){var i,n,r=function(r){return n=A(r,e),n>-1?(i=r[n],!0):t};return this._eachPristineItem(r),i},_cancelModel:function(e){var t=this._pristineForModel(e);this._eachItem(this._data,function(i){var n=E(i,e);n>=0&&(!t||e.isNew()&&!t.__state__?i.splice(n,1):i[n].accept(t))})},_promise:function(t,i,n){var r=this;return e.Deferred(function(e){r.trigger(Ce,{type:n}),r.transport[n].call(r.transport,te({success:function(t){e.resolve({response:t,models:i,type:n})},error:function(t,i,n){e.reject(t),r.error(t,i,n)}},t))}).promise()},_send:function(e,t){var i,n,r=this,o=[],s=r.reader.serialize(m(t));if(r.options.batch)t.length&&o.push(r._promise({data:{models:s}},t,e));else for(i=0,n=t.length;n>i;i++)o.push(r._promise({data:s[i]},[t[i]],e));return o},read:function(t){var i=this,n=i._params(t),r=e.Deferred();return i._queueRequest(n,function(){i.trigger(Ce,{type:"read"})?(i._dequeueRequest(),r.resolve()):(i.trigger(Se),i._ranges=[],i.trigger("reset"),i.online()?i.transport.read({data:n,success:function(e){i.success(e),r.resolve()},error:function(){var e=Ne.call(arguments);i.error.apply(i,e),r.reject.apply(r,e)}}):null!=i.options.offlineStorage&&(i.success(i.offlineData()),r.resolve()))}),r.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var i,n,r,o,s=this,a=s.options;if(s.trigger(Te,{response:e,type:"read"}),s.online()){if(e=s.reader.parse(e),s._handleCustomErrors(e))return s._dequeueRequest(),t;s._total=s.reader.total(e),s._aggregate&&a.serverAggregates&&(s._aggregateResult=s._readAggregates(e)),e=s._readData(e)}else{for(e=s._readData(e),i=[],n=0;e.length>n;n++)r=e[n],o=r.__state__,"destroy"==o?this._destroyed.push(this._createNewModel(r)):i.push(r);e=i,s._total=e.length}s._pristineTotal=s._total,s._pristineData=e.slice(0),s._detachObservableParents(),s._data=s._observe(e),null!=s.options.offlineStorage&&s._eachItem(s._data,function(e){var t,i;for(t=0;e.length>t;t++)i=e.at(t),"update"==i.__state__&&(i.dirty=!0)}),s._storeData(),s._addRange(s._data),s._process(s._data),s._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;this._data.length>e;e++)this._data[e].parent&&(this._data[e].parent=ce)},_storeData:function(e){function t(e){var i,n,r,a=[];for(i=0;e.length>i;i++)n=e.at(i),r=n.toJSON(),o&&n.items?r.items=t(n.items):(r.uid=n.uid,s&&(n.isNew()?r.__state__="create":n.dirty&&(r.__state__="update"))),a.push(r);return a}var i,n,r,o=this._isServerGrouped(),s=this.reader.model;if(null!=this.options.offlineStorage){for(i=t(this._data),n=0;this._destroyed.length>n;n++)r=this._destroyed[n].toJSON(),r.__state__="destroy",i.push(r);this.offlineData(i),e&&(this._pristineData=i)}},_addRange:function(e){var t=this,i=t._skip||0,n=i+t._flatData(e,!0).length;t._ranges.push({start:i,end:n,data:e}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,i){this._dequeueRequest(),this.trigger(Te,{}),this.trigger(xe,{xhr:e,status:t,errorThrown:i})},_params:function(e){var t=this,i=te({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete i.take,delete i.skip,delete i.page,delete i.pageSize),t.options.serverGrouping?t.reader.model&&i.group&&(i.group=z(i.group,t.reader.model)):delete i.group,t.options.serverFiltering?t.reader.model&&i.filter&&(i.filter=F(i.filter,t.reader.model)):delete i.filter,t.options.serverSorting?t.reader.model&&i.sort&&(i.sort=z(i.sort,t.reader.model)):delete i.sort,t.options.serverAggregates?t.reader.model&&i.aggregate&&(i.aggregate=z(i.aggregate,t.reader.model)):delete i.aggregate,i},_queueRequest:function(e,i){var n=this;n._requestInProgress?n._pending={callback:ie(i,n),options:e}:(n._requestInProgress=!0,n._pending=t,i())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(xe,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_observe:function(e){var t,i=this,n=i.reader.model,r=!1;return i._shouldDetachObservableParents=!0,n&&e.length&&(r=!(e[0]instanceof n)),e instanceof We?(i._shouldDetachObservableParents=!1,r&&(e.type=i.reader.model,e.wrapAll(e,e))):(t=i.pageSize()?je:We,e=new t(e,i.reader.model),e.parent=function(){return i.parent()}),i._isServerGrouped()&&k(e,n),i._changeHandler&&i._data&&i._data instanceof We?i._data.unbind(be,i._changeHandler):i._changeHandler=ie(i._change,i),e.bind(be,i._changeHandler)},_change:function(e){var t,i,n,r=this,o=e?e.action:"";if("remove"===o)for(t=0,i=e.items.length;i>t;t++)e.items[t].isNew&&e.items[t].isNew()||r._destroyed.push(e.items[t]);!r.options.autoSync||"add"!==o&&"remove"!==o&&"itemchange"!==o?(n=parseInt(r._total,10),p(r._total)||(n=parseInt(r._pristineTotal,10)),"add"===o?n+=e.items.length:"remove"===o?n-=e.items.length:"itemchange"===o||"sync"===o||r.options.serverPaging?"sync"===o&&(n=r._pristineTotal=parseInt(r._total,10)):n=r._pristineTotal,r._total=n,r._process(r._data,e)):r.sync()},_calculateAggregates:function(e,t){t=t||{};var i=new o(e),n=t.aggregate,r=t.filter;return r&&(i=i.filter(r)),i.aggregate(n)},_process:function(e,i){var n,r=this,o={};r.options.serverPaging!==!0&&(o.skip=r._skip,o.take=r._take||r._pageSize,o.skip===t&&r._page!==t&&r._pageSize!==t&&(o.skip=(r._page-1)*r._pageSize)),r.options.serverSorting!==!0&&(o.sort=r._sort),r.options.serverFiltering!==!0&&(o.filter=r._filter),r.options.serverGrouping!==!0&&(o.group=r._group),r.options.serverAggregates!==!0&&(o.aggregate=r._aggregate,r._aggregateResult=r._calculateAggregates(e,o)),n=r._queryProcess(e,o),r.view(n.data),n.total===t||r.options.serverFiltering||(r._total=n.total),i=i||{},i.items=i.items||r._view,r.trigger(be,i)},_queryProcess:function(e,t){return o.process(e,t)},_mergeState:function(e){var i=this;return e!==t&&(i._pageSize=e.pageSize,i._page=e.page,i._sort=e.sort,i._filter=e.filter,i._group=e.group,i._aggregate=e.aggregate,i._skip=e.skip,i._take=e.take,i._skip===t&&(i._skip=i.skip(),e.skip=i.skip()),i._take===t&&i._pageSize!==t&&(i._take=i._pageSize,e.take=i._take),e.sort&&(i._sort=e.sort=s(e.sort)),e.filter&&(i._filter=e.filter=l(e.filter)),e.group&&(i._group=e.group=d(e.group)),e.aggregate&&(i._aggregate=e.aggregate=c(e.aggregate))),e},query:function(i){var n,r=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;return r||(this._data===t||0===this._data.length)&&!this._destroyed.length?this.read(this._mergeState(i)):(this.trigger(Ce,{type:"read"})||(this.trigger(Se),n=this._queryProcess(this._data,this._mergeState(i)),this.options.serverFiltering||(this._total=n.total!==t?n.total:this._data.length),this._aggregateResult=this._calculateAggregates(this._data,i),this.view(n.data),this.trigger(Te,{}),this.trigger(be,{items:n.data})),e.Deferred().resolve().promise())},fetch:function(e){return this._query().then(ie(e,this))},_query:function(e){var t=this;return t.query(te({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var i=this,n=i.page(),r=i.total();return e=e||{},!n||r&&n+1>i.totalPages()?t:(i._skip=n*i.take(),n+=1,e.page=n,i._query(e),n)},prev:function(e){var i=this,n=i.page();return e=e||{},n&&1!==n?(i._skip=i._skip-i.take(),n-=1,e.page=n,i._query(e),n):t},page:function(e){var i,n=this;return e!==t?(e=Ie.max(Ie.min(Ie.max(e,1),n.totalPages()),1),n._query({page:e}),t):(i=n.skip(),i!==t?Ie.round((i||0)/(n.take()||1))+1:t)},pageSize:function(e){var i=this;return e!==t?(i._query({pageSize:e,page:1}),t):i.take()},sort:function(e){var i=this;return e!==t?(i._query({sort:e}),t):i._sort},filter:function(e){var i=this;return e===t?i._filter:(i._query({filter:e,page:1}),t)},group:function(e){var i=this;return e!==t?(i._query({group:e}),t):i._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(e){var i=this;return e!==t?(i._query({aggregate:e}),t):i._aggregate},aggregates:function(){return this._aggregateResult},totalPages:function(){var e=this,t=e.pageSize()||e.total();return Ie.ceil((e.total()||0)/t)},inRange:function(e,t){var i=this,n=Ie.min(e+t,i.total());return!i.options.serverPaging&&i._data.length>0||i._findRange(e,n).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},range:function(e,i){var n,r,o,s,a,l,c,d;if(e=Ie.min(e||0,this.total()),n=this,r=Ie.max(Ie.floor(e/i),0)*i,o=Ie.min(r+i,n.total()),n._skipRequestsInProgress=!1,s=n._findRange(e,Ie.min(e+i,n.total())),s.length){n._skipRequestsInProgress=!0,n._pending=t,n._skip=e>n.skip()?Ie.min(o,(n.totalPages()-1)*n.take()):r,n._take=i,a=n.options.serverPaging,l=n.options.serverSorting,c=n.options.serverFiltering,d=n.options.serverAggregates;try{n.options.serverPaging=!0,n._isServerGrouped()||n.group()&&n.group().length||(n.options.serverSorting=!0),
n.options.serverFiltering=!0,n.options.serverPaging=!0,n.options.serverAggregates=!0,a&&(n._detachObservableParents(),n._data=s=n._observe(s)),n._process(s)}finally{n.options.serverPaging=a,n.options.serverSorting=l,n.options.serverFiltering=c,n.options.serverAggregates=d}}else i!==t&&(n._rangeExists(r,o)?e>r&&n.prefetch(o,i,function(){n.range(e,i)}):n.prefetch(r,i,function(){e>r&&o<n.total()&&!n._rangeExists(o,Ie.min(o+i,n.total()))?n.prefetch(o,i,function(){n.range(e,i)}):n.range(e,i)}))},_findRange:function(e,i){var n,r,o,a,l,c,u,h,p,f,m,g,v=this,y=v._ranges,_=[],b=v.options,w=b.serverSorting||b.serverPaging||b.serverFiltering||b.serverGrouping||b.serverAggregates;for(r=0,m=y.length;m>r;r++)if(n=y[r],e>=n.start&&n.end>=e){for(f=0,o=r;m>o;o++)if(n=y[o],p=v._flatData(n.data,!0),p.length&&e+f>=n.start&&(c=n.data,u=n.end,w||(g=d(v.group()||[]).concat(s(v.sort()||[])),h=v._queryProcess(n.data,{sort:g,filter:v.filter()}),p=c=h.data,h.total!==t&&(u=h.total)),a=0,e+f>n.start&&(a=e+f-n.start),l=p.length,u>i&&(l-=u-i),f+=l-a,_=v._mergeGroups(_,c,a,l),n.end>=i&&f==i-e))return _;break}return[]},_mergeGroups:function(e,t,i,n){if(this._isServerGrouped()){var r,o=t.toJSON();return e.length&&(r=e[e.length-1]),b(r,o,i,n),e.concat(o)}return e.concat(t.slice(i,n))},skip:function(){var e=this;return e._skip===t?e._page!==t?(e._page-1)*(e.take()||1):t:e._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,i){var n=this;return function(r){var o,s,a,l=!1,c={start:e,end:t,data:[]};if(n._dequeueRequest(),n.trigger(Te,{response:r,type:"read"}),r=n.reader.parse(r),a=n._readData(r),a.length){for(o=0,s=n._ranges.length;s>o;o++)if(n._ranges[o].start===e){l=!0,c=n._ranges[o];break}l||n._ranges.push(c)}c.data=n._observe(a),c.end=c.start+n._flatData(c.data,!0).length,n._ranges.sort(function(e,t){return e.start-t.start}),n._total=n.reader.total(r),n._skipRequestsInProgress||(i&&a.length?i():n.trigger(be,{}))}},prefetch:function(e,t,i){var n=this,r=Ie.min(e+t,n.total()),o={take:t,skip:e,page:e/t+1,pageSize:t,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};n._rangeExists(e,r)?i&&i():(clearTimeout(n._timeout),n._timeout=setTimeout(function(){n._queueRequest(o,function(){n.trigger(Ce,{type:"read"})?n._dequeueRequest():n.transport.read({data:n._params(o),success:n._prefetchSuccessHandler(e,r,i)})})},100))},_rangeExists:function(e,t){var i,n,r=this,o=r._ranges;for(i=0,n=o.length;n>i;i++)if(e>=o[i].start&&o[i].end>=t)return!0;return!1},_removeModelFromRanges:function(e){var t,i,n,r,o;for(r=0,o=this._ranges.length;o>r&&(n=this._ranges[r],this._eachItem(n.data,function(n){t=D(n,e),t&&(i=!0)}),!i);r++);},_updateRangesLength:function(){var e,t,i,n,r=0;for(i=0,n=this._ranges.length;n>i;i++)e=this._ranges[i],e.start=e.start-r,t=this._flatData(e.data,!0).length,r=e.end-t,e.end=e.start+t}}),K={},K.create=function(e,t){var i,n=e.transport;return n?(n.read=typeof n.read===fe?{url:n.read}:n.read,e.type&&(de.data.transports=de.data.transports||{},de.data.schemas=de.data.schemas||{},de.data.transports[e.type]&&!ne(de.data.transports[e.type])?i=new de.data.transports[e.type](te(n,{data:t})):n=te(!0,{},de.data.transports[e.type],n),e.schema=te(!0,{},de.data.schemas[e.type],e.schema)),i||(i=ue(n.read)?n:new q(n))):i=new j({data:e.data||[]}),i},Q.create=function(e){(oe(e)||e instanceof We)&&(e={data:e});var t,i,n,r=e||{},o=r.data,s=r.fields,a=r.table,l=r.select,c={};if(o||!s||r.transport||(a?o=R(a,s):l&&(o=H(l,s))),de.data.Model&&s&&(!r.schema||!r.schema.model)){for(t=0,i=s.length;i>t;t++)n=s[t],n.type&&(c[n.field]=n);re(c)||(r.schema=te(!0,r.schema,{model:{fields:c}}))}return r.data=o,a=null,r.table=null,r instanceof Q?r:new Q(r)},X=Qe.define({id:"id",init:function(e){var t=this,i=t.hasChildren||e&&e.hasChildren,n="items",r={};de.data.Model.fn.init.call(t,e),typeof t.children===fe&&(n=t.children),r={schema:{data:n,model:{hasChildren:i,id:t.idField,fields:t.fields}}},typeof t.children!==fe&&te(r,t.children),r.data=e,i||(i=r.schema.data),typeof i===fe&&(i=de.getter(i)),ue(i)&&(t.hasChildren=!!i.call(t,t)),t._childrenOptions=r,t.hasChildren&&t._initChildren(),t._loaded=!(!e||!e[n]&&!e._loaded)},_initChildren:function(){var e,t,i,n=this;n.children instanceof Z||(e=n.children=new Z(n._childrenOptions),t=e.transport,i=t.parameterMap,t.parameterMap=function(e,t){return e[n.idField||"id"]=n.id,i&&(e=i(e,t)),e},e.parent=function(){return n},e.bind(be,function(e){e.node=e.node||n,n.trigger(be,e)}),e.bind(xe,function(e){var t=n.parent();t&&(e.node=e.node||n,t.trigger(xe,e))}),n._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){var e=this._childrenOptions.schema.data;this[e||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var e,i={},n="_query";this.hasChildren?(this._initChildren(),e=this.children,i[this.idField||"id"]=this.id,this._loaded||(e._data=t,n="read"),e.one(be,ie(this._childrenLoaded,this)),e[n](i)):this.loaded(!0)},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return Qe.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),Z=Q.extend({init:function(e){var t=X.define({children:e});Q.fn.init.call(this,te(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(xe,function(t){e.trigger(xe,t)})},remove:function(e){var t,i=e.parentNode(),n=this;return i&&i._initChildren&&(n=i.children),t=Q.fn.remove.call(n,e),i&&!n.data().length&&(i.hasChildren=!1),t},success:N("success"),data:N("data"),insert:function(e,t){var i=this.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),Q.fn.insert.call(this,e,t)},_find:function(e,t){var i,n,r,o,s;if(r=Q.fn[e].call(this,t))return r;if(o=this._flatData(this._data))for(i=0,n=o.length;n>i;i++)if(s=o[i].children,s instanceof Z&&(r=s[e](t)))return r},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}}),Z.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},i=t.data,n=t.fields,r=t.list;return i&&i._dataSource?i._dataSource:(i||!n||t.transport||r&&(i=$(r,n)),t.data=i,t instanceof Z?t:new Z(t))},J=de.Observable.extend({init:function(e,t,i){de.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!i;var n=this;e.bind("change",function(){n._change()}),e.bind("reset",function(){n._reset()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var i=this.pageSize,n=!0;return e>=this.total()?(this.trigger("endreached",{index:e}),t):this.useRanges?this.useRanges?((this.dataOffset>e||e>=this.skip+i)&&(n=this.range(Math.floor(e/i)*i)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange,!0):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&this.range(this.offset===this.skip?this.previousMidRange:this.previousFullRange),n?this.dataSource.at(e-this.dataOffset):(this.trigger("endreached",{index:e}),null)):t:this.dataSource.view()[e]},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,i=e.skip-e.viewSize+t,n=Ie.max(Ie.floor(i/t),0)*t;this.offset=i,this.dataSource.prefetch(n,t,function(){e._goToRange(i,!0)})},range:function(e,t){if(this.offset===e)return!0;var i=this,n=this.pageSize,r=Ie.max(Ie.floor(e/n),0)*n,o=this.dataSource;return t&&(r+=n),o.inRange(e,n)?(this.offset=e,this._recalculate(),this._goToRange(e),!0):!this.prefetch||(o.prefetch(r,n,function(){i.offset=e,i._recalculate(),i._goToRange(e,!0)}),!1)},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,i=this.skip+t,n=this.dataSource;n.inRange(i,t)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:i,take:t}),n.prefetch(i,t,function(){e._prefetching=!1,e.trigger("prefetched",{skip:i,take:t})}))},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip()||0,this.pageSize=e.pageSize(),this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,i=this.viewSize,n=Math.ceil(t/e)*e;this.skip=n,this.midPageThreshold=n+e-1,this.nextPageThreshold=n+i-1,this.prefetchThreshold=n+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=n+e-i,this.nextFullRange=n,this.previousMidRange=t-i,this.previousFullRange=n-e}}),ee=de.Observable.extend({init:function(e,t){var i=this;de.Observable.fn.init.call(i),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new J(e,3*t),this.buffer.bind({endreached:function(e){i.trigger("endreached",{index:e.index})},prefetching:function(e){i.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){i.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){i._total=0,i.trigger("reset")},resize:function(){i._total=Math.ceil(this.length/i.batchSize),i.trigger("resize",{total:i.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var i,n,r=this.buffer,o=e*this.batchSize,s=this.batchSize,a=[];for(r.offset>o&&r.at(r.offset-1),n=0;s>n&&(i=r.at(o+n),i!==t);n++)a.push(i);return a},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}}),te(!0,de.data,{readers:{json:Y},Query:o,DataSource:Q,HierarchicalDataSource:Z,Node:X,ObservableObject:qe,ObservableArray:We,LazyObservableArray:je,LocalTransport:j,RemoteTransport:q,Cache:G,DataReader:Y,Model:Qe,Buffer:J,BatchBuffer:ee})}(window.kendo.jQuery),function(e,t){function i(t,i,n){return v.extend({init:function(e,t,i){var n=this;v.fn.init.call(n,e.element[0],t,i),n.widget=e,n._dataBinding=E(n.dataBinding,n),n._dataBound=E(n.dataBound,n),n._itemChange=E(n.itemChange,n)},itemChange:function(e){s(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[t]._parents()))},dataBinding:function(e){var t,i,n=this.widget,r=e.removedItems||n.items();for(t=0,i=r.length;i>t;t++)c(r[t])},_ns:function(t){t=t||x.ui;var i=[x.ui,x.dataviz.ui,x.mobile.ui];return i.splice(e.inArray(t,i),1),i.unshift(t),x.rolesFromNamespaces(i)},dataBound:function(e){var n,r,o,a,l=this.widget,c=e.addedItems||l.items(),d=l[i];if(d.group()||[],c.length)for(o=e.addedDataItems||d.flatView(),a=this.bindings[t]._parents(),n=0,r=o.length;r>n;n++)s(c[n],o[n],this._ns(e.ns),[o[n]].concat(a))},refresh:function(e){var r,o=this,s=o.widget;e=e||{},e.action||(o.destroy(),s.bind("dataBinding",o._dataBinding),s.bind("dataBound",o._dataBound),s.bind("itemChange",o._itemChange),r=o.bindings[t].get(),s[i]instanceof x.data.DataSource&&s[i]!=r&&(r instanceof x.data.DataSource?s[n](r):r&&r._dataSource?s[n](r._dataSource):s[i].data(r)))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}})}function n(e,i){var n=x.initWidget(e,{},i);return n?new b(n):t}function r(e){var t,i,n,o,s,a,l,c={};for(l=e.match(w),t=0,i=l.length;i>t;t++)n=l[t],o=n.indexOf(":"),s=n.substring(0,o),a=n.substring(o+1),"{"==a.charAt(0)&&(a=r(a)),c[s]=a;return c}function o(e,t,i){var n,r={};for(n in e)r[n]=new i(t,e[n]);return r}function s(e,t,i,a){var c,d,u,h=e.getAttribute("data-"+x.ns+"role"),p=e.getAttribute("data-"+x.ns+"bind"),v=e.children,y=[],b=!0,w={};if(a=a||[t],(h||p)&&l(e),h&&(u=n(e,i)),p&&(p=r(p.replace(k,"")),u||(w=x.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:R,valuePrimitive:!1,autoBind:!0}),w.roles=i,u=new _(e,w)),u.source=t,d=o(p,a,f),w.template&&(d.template=new g(a,"",w.template)),d.click&&(p.events=p.events||{},p.events.click=p.click,d.click.destroy(),delete d.click),d.source&&(b=!1),p.attr&&(d.attr=o(p.attr,a,f)),p.style&&(d.style=o(p.style,a,f)),p.events&&(d.events=o(p.events,a,m)),u.bind(d)),u&&(e.kendoBindingTarget=u),b&&v){for(c=0;v.length>c;c++)y[c]=v[c];for(c=0;y.length>c;c++)s(y[c],t,i,a)}}function a(t,i){var n,r,o,a=x.rolesFromNamespaces([].slice.call(arguments,2));for(i=x.observable(i),t=e(t),n=0,r=t.length;r>n;n++)o=t[n],1===o.nodeType&&s(o,i,a)}function l(e){var t=e.kendoBindingTarget;t&&(t.destroy(),H?delete e.kendoBindingTarget:e.removeAttribute?e.removeAttribute("kendoBindingTarget"):e.kendoBindingTarget=null)}function c(e){l(e),d(e)}function d(e){var t,i,n=e.children;if(n)for(t=0,i=n.length;i>t;t++)c(n[t])}function u(t){var i,n;for(t=e(t),i=0,n=t.length;n>i;i++)c(t[i])}function h(e,t){var i=e.element,n=i[0].kendoBindingTarget;n&&a(i,n.source,t)}var p,f,m,g,v,y,_,b,w,k,x=window.kendo,C=x.Observable,S=x.data.ObservableObject,T=x.data.ObservableArray,D={}.toString,M={},A=x.Class,E=e.proxy,I="value",P="source",F="events",z="checked",H=!0,R="change";!function(){var e=document.createElement("a");e.innerText!==t?p="innerText":e.textContent!==t&&(p="textContent");try{delete e.test}catch(e){H=!1}}(),f=C.extend({init:function(e,t){var i=this;C.fn.init.call(i),i.source=e[0],i.parents=e,i.path=t,i.dependencies={},i.dependencies[t]=!0,i.observable=i.source instanceof C,i._access=function(e){i.dependencies[e.field]=!0},i.observable&&(i._change=function(e){i.change(e)},i.source.bind(R,i._change))},_parents:function(){var t,i=this.parents,n=this.get();return n&&"function"==typeof n.parent&&(t=n.parent(),e.inArray(t,i)<0&&(i=[t].concat(i))),i},change:function(e){var t,i,n=e.field,r=this;if("this"===r.path)r.trigger(R,e);else for(t in r.dependencies)if(0===t.indexOf(n)&&(i=t.charAt(n.length),!i||"."===i||"["===i)){r.trigger(R,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,i=e.source,n=0,r=e.path,o=i;if(!e.observable)return o;for(e.start(e.source),o=i.get(r);o===t&&i;)i=e.parents[++n],i instanceof S&&(o=i.get(r));if(o===t)for(i=e.source;o===t&&i;)i=i.parent(),i instanceof S&&(o=i.get(r));return"function"==typeof o&&(n=r.lastIndexOf("."),n>0&&(i=i.get(r.substring(0,n))),e.start(i),o=i!==e.source?o.call(i,e.source):o.call(i),e.stop(i)),i&&i!==e.source&&(e.currentSource=i,i.unbind(R,e._change).bind(R,e._change)),e.stop(e.source),o},set:function(e){var t=this.currentSource||this.source,i=x.getter(this.path)(t);"function"==typeof i?t!==this.source?i.call(t,this.source,e):i.call(t,e):t.set(this.path,e)},destroy:function(){this.observable&&(this.source.unbind(R,this._change),this.currentSource&&this.currentSource.unbind(R,this._change)),this.unbind()}}),m=f.extend({get:function(){var e,t=this.source,i=this.path,n=0;for(e=t.get(i);!e&&t;)t=this.parents[++n],t instanceof S&&(e=t.get(i));return E(e,t)}}),g=f.extend({init:function(e,t,i){var n=this;f.fn.init.call(n,e,t),n.template=i},render:function(e){var t;return this.start(this.source),t=x.render(this.template,e),this.stop(this.source),t}}),v=A.extend({init:function(e,t,i){this.element=e,this.bindings=t,this.options=i},bind:function(e,t){var i=this;e=t?e[t]:e,e.bind(R,function(e){i.refresh(t||e)}),i.refresh(t)},destroy:function(){}}),M.attr=v.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),M.style=v.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),M.enabled=v.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),M.readonly=v.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),M.disabled=v.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),M.events=v.extend({init:function(e,t,i){v.fn.init.call(this,e,t,i),this.handlers={}},refresh:function(t){var i=e(this.element),n=this.bindings.events[t],r=this.handlers[t];r&&i.off(t,r),r=this.handlers[t]=n.get(),i.on(t,n.source,r)},destroy:function(){var t,i=e(this.element);for(t in this.handlers)i.off(t,this.handlers[t])}}),M.text=v.extend({refresh:function(){var e=this.bindings.text.get();null==e&&(e=""),this.element[p]=e}}),M.visible=v.extend({refresh:function(){this.element.style.display=this.bindings.visible.get()?"":"none"}}),M.invisible=v.extend({refresh:function(){this.element.style.display=this.bindings.invisible.get()?"none":""}}),M.html=v.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),M.value=v.extend({init:function(t,i,n){v.fn.init.call(this,t,i,n),this._change=E(this.change,this),this.eventName=n.valueUpdate||R,e(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){var e,t;this._initChange=this.eventName!=R,e=this.element.value,t=this.element.type,"date"==t?e=x.parseDate(e,"yyyy-MM-dd"):"datetime-local"==t?e=x.parseDate(e,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==t&&(e=x.parseFloat(e)),this.bindings[I].set(e),this._initChange=!1},refresh:function(){var e,t;this._initChange||(e=this.bindings[I].get(),null==e&&(e=""),t=this.element.type,"date"==t?e=x.toString(e,"yyyy-MM-dd"):"datetime-local"==t&&(e=x.toString(e,"yyyy-MM-ddTHH:mm:ss")),this.element.value=e),this._initChange=!1},destroy:function(){e(this.element).off(this.eventName,this._change)}}),M.source=v.extend({init:function(e,t,i){v.fn.init.call(this,e,t,i);var n=this.bindings.source.get();n instanceof x.data.DataSource&&i.autoBind!==!1&&n.fetch()},refresh:function(e){var t=this,i=t.bindings.source.get();i instanceof T||i instanceof x.data.DataSource?(e=e||{},"add"==e.action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):"itemchange"!=e.action&&t.render()):t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,i=this.container().nodeName.toLowerCase();return t||(t="select"==i?e.valueField||e.textField?x.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==i?"<tr><td>#:data#</td></tr>":"ul"==i||"ol"==i?"<li>#:data#</li>":"#:data#",t=x.template(t)),t},add:function(t,i){var n,r,o,a,l=this.container(),c=l.cloneNode(!1),d=l.children[t];if(e(c).html(x.render(this.template(),i)),c.children.length)for(n=this.bindings.source._parents(),r=0,o=i.length;o>r;r++)a=c.children[0],l.insertBefore(a,d||null),s(a,i[r],this.options.roles,[i[r]].concat(n))},remove:function(e,t){var i,n,r=this.container();for(i=0;t.length>i;i++)n=r.children[e],c(n),r.removeChild(n)},render:function(){var t,i,n,r=this.bindings.source.get(),o=this.container(),a=this.template();if(r instanceof x.data.DataSource&&(r=r.view()),r instanceof T||"[object Array]"===D.call(r)||(r=[r]),this.bindings.template){if(d(o),e(o).html(this.bindings.template.render(r)),o.children.length)for(t=this.bindings.source._parents(),i=0,n=r.length;n>i;i++)s(o.children[i],r[i],this.options.roles,[r[i]].concat(t))}else e(o).html(x.render(a,r))}}),M.input={checked:v.extend({init:function(t,i,n){v.fn.init.call(this,t,i,n),this._change=E(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,i=this.element,n=this.value();"radio"==i.type?this.bindings[z].set(n):"checkbox"==i.type&&(e=this.bindings[z].get(),e instanceof T?(n=this.element.value,"on"!==n&&"off"!==n&&(t=e.indexOf(n),t>-1?e.splice(t,1):e.push(n))):this.bindings[z].set(n))},refresh:function(){var e=this.bindings[z].get(),t=e,i=this.element;"checkbox"==i.type?(t instanceof T&&(e=this.element.value,t.indexOf(e)>=0&&(e=!0)),i.checked=e===!0):"radio"==i.type&&null!=e&&i.value===""+e&&(i.checked=!0)},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){e(this.element).off(R,this._change)}})},M.select={value:v.extend({init:function(t,i,n){v.fn.init.call(this,t,i,n),this._change=E(this.change,this),e(this.element).change(this._change)},change:function(){var e,i,n,r,o,s,a=[],l=this.element,c=this.options.valueField||this.options.textField,d=this.options.valuePrimitive;for(o=0,s=l.options.length;s>o;o++)i=l.options[o],i.selected&&(r=i.attributes.value,r=r&&r.specified?i.value:i.text,a.push(r));if(c)for(e=this.bindings.source.get(),e instanceof x.data.DataSource&&(e=e.view()),n=0;a.length>n;n++)for(o=0,s=e.length;s>o;o++)if(e[o].get(c)==a[n]){a[n]=e[o];break}r=this.bindings[I].get(),r instanceof T?r.splice.apply(r,[0,r.length].concat(a)):this.bindings[I].set(d||!(r instanceof S||null===r||r===t)&&c?a[0].get(c):a[0])},refresh:function(){var e,t,i,n=this.element,r=n.options,o=this.bindings[I].get(),s=o,a=this.options.valueField||this.options.textField,l=!1;for(s instanceof T||(s=new T([o])),n.selectedIndex=-1,i=0;s.length>i;i++)for(o=s[i],a&&o instanceof S&&(o=o.get(a)),e=0;r.length>e;e++)t=r[e].value,""===t&&""!==o&&(t=r[e].text),t==o&&(r[e].selected=!0,l=!0)},destroy:function(){e(this.element).off(R,this._change)}})},M.widget={events:v.extend({init:function(e,t,i){v.fn.init.call(this,e.element[0],t,i),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],i=this.handlers[e];i&&this.widget.unbind(e,i),i=t.get(),this.handlers[e]=function(e){e.data=t.source,i(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:v.extend({init:function(e,t,i){v.fn.init.call(this,e.element[0],t,i),this.widget=e,this._change=E(this.change,this),this.widget.bind(R,this._change)},change:function(){this.bindings[z].set(this.value())},refresh:function(){this.widget.check(this.bindings[z].get()===!0)},value:function(){var e=this.element,t=e.value;return("on"==t||"off"==t)&&(t=e.checked),t},destroy:function(){this.widget.unbind(R,this._change)}}),visible:v.extend({init:function(e,t,i){v.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:v.extend({init:function(e,t,i){v.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:v.extend({init:function(e,t,i){v.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:v.extend({init:function(e,t,i){v.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:i("source","dataSource","setDataSource"),value:v.extend({init:function(t,i,n){v.fn.init.call(this,t.element[0],i,n),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(R,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=!n.valuePrimitive&&(null==r||r instanceof S),this._valueIsObservableArray=r instanceof T,this._initChange=!1},change:function(){var e,t,i,n,r,o,s,a=this.widget.value(),l=this.options.dataValueField||this.options.dataTextField,c="[object Array]"===D.call(a),d=this._valueIsObservableObject,u=[];if(this._initChange=!0,l)if(this.bindings.source&&(s=this.bindings.source.get()),""===a&&(d||this.options.valuePrimitive))a=null;else{for((!s||s instanceof x.data.DataSource)&&(s=this.widget.dataSource.view()),c&&(t=a.length,u=a.slice(0)),r=0,o=s.length;o>r;r++)if(i=s[r],n=i.get(l),c){for(e=0;t>e;e++)if(n==u[e]){u[e]=i;break}}else if(n==a){a=d?i:n;break}u[0]&&(a=this._valueIsObservableArray?u:d||!l?u[0]:u[0].get(l))}this.bindings.value.set(a),this._initChange=!1},refresh:function(){if(!this._initChange){var e,i=this.options.dataValueField||this.options.dataTextField,n=this.bindings.value.get(),r=0,o=[];if(n===t&&(n=null),i)if(n instanceof T){for(e=n.length;e>r;r++)o[r]=n[r].get(i);n=o}else n instanceof S&&(n=n.get(i));this.widget.value(n)}this._initChange=!1},destroy:function(){this.widget.unbind(R,this._change)}}),gantt:{dependencies:i("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:v.extend({init:function(t,i,n){v.fn.init.call(this,t.element[0],i,n),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(R,this._change),this._initChange=!1},change:function(){var e,t,i,n,r,o,s,a,l,c=this,d=c.bindings[I].get(),u=c.options.valuePrimitive,h=u?c.widget.value():c.widget.dataItems(),p=this.options.dataValueField||this.options.dataTextField;if(h=h.slice(0),c._initChange=!0,d instanceof T){for(e=[],t=h.length,i=0,n=0,r=d[i],o=!1;r;){for(l=!1,n=0;t>n;n++)if(u?o=h[n]==r:(a=h[n],a=a.get?a.get(p):a,o=a==(r.get?r.get(p):r)),o){h.splice(n,1),t-=1,l=!0;break}l?i+=1:(e.push(r),y(d,i,1),s=i),r=d[i]}y(d,d.length,0,h),e.length&&d.trigger("change",{action:"remove",items:e,index:s}),h.length&&d.trigger("change",{action:"add",items:h,index:d.length-1})}else c.bindings[I].set(h);c._initChange=!1},refresh:function(){if(!this._initChange){var e,i,n=this.options.dataValueField||this.options.dataTextField,r=this.bindings.value.get(),o=0,s=[];if(r===t&&(r=null),n)if(r instanceof T){for(e=r.length;e>o;o++)i=r[o],s[o]=i.get?i.get(n):i;r=s}else r instanceof S&&(r=r.get(n));this.widget.value(r)}},destroy:function(){this.widget.unbind(R,this._change)}})},scheduler:{source:i("source","dataSource","setDataSource").extend({dataBound:function(e){var t,i,n,r,o=this.widget,a=o.view(),l=e.addedItems||o.items(),c=o.dataSource;if(c.group()||[],l.length)for(n=e.addedDataItems||c.expand(a.startDate(),a.endDate()),r=this.bindings.source._parents(),t=0,i=n.length;i>t;t++)s(l[t],n[t],this._ns(e.ns),[n[t]].concat(r))}})}},y=function(e,t,i,n){var r,o,s,a,l;if(n=n||[],i=i||0,r=n.length,o=e.length,s=[].slice.call(e,t+i),a=s.length,r){for(r=t+r,l=0;r>t;t++)e[t]=n[l],l++;e.length=r}else if(i)for(e.length=t,i+=t;i>t;)delete e[--i];if(a){for(a=t+a,l=0;a>t;t++)e[t]=s[l],l++;e.length=a}for(t=e.length;o>t;)delete e[t],t++},_=A.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,i,n,r,o=this.target.nodeName.toLowerCase(),s=M[o]||{};for(t in e)t==I?i=!0:t==P?n=!0:t==F?r=!0:this.applyBinding(t,e,s);n&&this.applyBinding(P,e,s),i&&this.applyBinding(I,e,s),r&&this.applyBinding(F,e,s)},applyBinding:function(e,t,i){var n,r=i[e]||M[e],o=this.toDestroy,s=t[e];if(r)if(r=new r(this.target,t,this.options),o.push(r),s instanceof f)r.bind(s),o.push(s);else for(n in s)r.bind(s,n),o.push(s[n]);else if("template"!==e)throw Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,i=this.toDestroy;for(e=0,t=i.length;t>e;e++)i[e].destroy()}}),b=_.extend({bind:function(e){var t,i=this,n=!1,r=!1,o=M.widget[i.target.options.name.toLowerCase()]||{};for(t in e)t==I?n=!0:t==P?r=!0:i.applyBinding(t,e,o);r&&i.applyBinding(P,e,o),n&&i.applyBinding(I,e,o)},applyBinding:function(e,t,i){var n,r=i[e]||M.widget[e],o=this.toDestroy,s=t[e];if(!r)throw Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(r=new r(this.target,t,this.target.options),o.push(r),s instanceof f)r.bind(s),o.push(s);else for(n in s)r.bind(s,n),o.push(s[n])}}),w=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,k=/\s/g,x.unbind=u,x.bind=a,x.data.binders=M,x.data.Binder=v,x.notify=h,x.observable=function(e){return e instanceof S||(e=new S(e)),e},x.observableHierarchy=function(e){function t(e){var i,n;for(i=0;e.length>i;i++)e[i]._initChildren(),n=e[i].children,n.fetch(),e[i].items=n.data(),t(e[i].items)}var i=x.data.HierarchicalDataSource.create(e);return i.fetch(),t(i.data()),i._data._dataSource=i,i._data}}(window.kendo.jQuery),function(e,t){function i(e){return parseInt(e,10)}function n(e,t){return i(e.css(t))}function r(e){var t,i=[];for(t in e)i.push(t);return i}function o(e){for(var t in e)-1!=U.indexOf(t)&&-1==V.indexOf(t)&&delete e[t];return e}function s(e,t){var i,n,r,o,s=[],a={};for(n in t)i=n.toLowerCase(),o=I&&-1!=U.indexOf(i),!A.hasHW3D&&o&&-1==V.indexOf(i)?delete t[n]:(r=t[n],o?s.push(n+"("+r+")"):a[n]=r);return s.length&&(a[ae]=s.join(" ")),a}function a(e,t){var n,r,o;return I?(n=e.css(ae),n==Q?"scale"==t?1:0:(r=n.match(RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),o=0,r?o=i(r[1]):(r=n.match(R)||[0,0,0,0,0],t=t.toLowerCase(),$.test(t)?o=parseFloat(r[3]/r[2]):"translatey"==t?o=parseFloat(r[4]/r[2]):"scale"==t?o=parseFloat(r[2]):"rotate"==t&&(o=parseFloat(Math.atan2(r[2],r[1])))),o)):parseFloat(e.css(t))}function l(e){return e.charAt(0).toUpperCase()+e.substring(1)}function c(e,t){var i=f.extend(t),n=i.prototype.directions;S[l(e)]=i,S.Element.prototype[e]=function(e,t,n,r){return new i(this.element,e,t,n,r)},T(n,function(t,n){S.Element.prototype[e+l(n)]=function(e,t,r){return new i(this.element,n,e,t,r)}})}function d(e,i,n,r){c(e,{directions:g,startValue:function(e){return this._startValue=e,this},endValue:function(e){return this._endValue=e,this},shouldHide:function(){return this._shouldHide},prepare:function(e,o){var s,a,l=this,c="out"===this._direction,d=l.element.data(i),u=!(isNaN(d)||d==n);s=u?d:t!==this._startValue?this._startValue:c?n:r,a=t!==this._endValue?this._endValue:c?r:n,this._reverse?(e[i]=a,o[i]=s):(e[i]=s,o[i]=a),l._shouldHide=o[i]===r}})}function u(e,t){var i=C.directions[t].vertical,n=e[i?Z:X]()/2+"px";return y[t].replace("$size",n)}var h,p,f,m,g,v,y,_,b,w,k,x,C=window.kendo,S=C.effects,T=e.each,D=e.extend,M=e.proxy,A=C.support,E=A.browser,I=A.transforms,P=A.transitions,F={scale:0,scalex:0,scaley:0,scale3d:0},z={translate:0,translatex:0,translatey:0,translate3d:0},H=t!==document.documentElement.style.zoom&&!I,R=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,N=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,$=/translatex?$/i,O=/(zoom|fade|expand)(\w+)/,L=/(zoom|fade|expand)/,B=/[xy]$/i,U=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],V=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],W={rotate:"deg",scale:"",skew:"px",translate:"px"},j=I.css,q=Math.round,G="",Y="px",Q="none",K="auto",X="width",Z="height",J="hidden",ee="origin",te="abortId",ie="overflow",ne="translate",re="position",oe="completeCallback",se=j+"transition",ae=j+"transform",le=j+"backface-visibility",ce=j+"perspective",de="1500px",ue="perspective("+de+")",he={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"
}};C.directions=he,D(e.fn,{kendoStop:function(e,t){return P?S.stopQueue(this,e||!1,t||!1):this.stop(e,t)}}),I&&!P&&(T(V,function(i,n){e.fn[n]=function(i){if(t===i)return a(this,n);var r=e(this)[0],o=n+"("+i+W[n.replace(B,"")]+")";return-1==r.style.cssText.indexOf(ae)?e(this).css(ae,o):r.style.cssText=r.style.cssText.replace(RegExp(n+"\\(.*?\\)","i"),o),this},e.fx.step[n]=function(t){e(t.elem)[n](t.now)}}),h=e.fx.prototype.cur,e.fx.prototype.cur=function(){return-1!=V.indexOf(this.prop)?parseFloat(e(this.elem)[this.prop]()):h.apply(this,arguments)}),C.toggleClass=function(e,t,i,n){return t&&(t=t.split(" "),P&&(i=D({exclusive:"all",duration:400,ease:"ease-out"},i),e.css(se,i.exclusive+" "+i.duration+"ms "+i.ease),setTimeout(function(){e.css(se,"").css(Z)},i.duration)),T(t,function(t,i){e.toggleClass(i,n)})),e},C.parseEffects=function(e,t){var i={};return"string"==typeof e?T(e.split(" "),function(e,n){var r=!L.test(n),o=n.replace(O,function(e,t,i){return t+":"+i.toLowerCase()}),s=o.split(":"),a=s[1],l={};s.length>1&&(l.direction=t&&r?he[a].reverse:a),i[s[0]]=l}):T(e,function(e){var n=this.direction;n&&t&&!L.test(e)&&(this.direction=he[n].reverse),i[e]=this}),i},P&&D(S,{transition:function(t,i,n){var o,a,l,c,d=0,u=t.data("keys")||[];n=D({duration:200,ease:"ease-out",complete:null,exclusive:"all"},n),l=!1,c=function(){l||(l=!0,a&&(clearTimeout(a),a=null),t.removeData(te).dequeue().css(se,"").css(se),n.complete.call(t))},n.duration=e.fx?e.fx.speeds[n.duration]||n.duration:n.duration,o=s(t,i),e.merge(u,r(o)),t.data("keys",e.unique(u)).height(),t.css(se,n.exclusive+" "+n.duration+"ms "+n.ease).css(se),t.css(o).css(ae),P.event&&(t.one(P.event,c),0!==n.duration&&(d=500)),a=setTimeout(c,n.duration+d),t.data(te,a),t.data(oe,c)},stopQueue:function(e,t,i){var n,r=e.data("keys"),o=!i&&r,s=e.data(oe);return o&&(n=C.getComputedStyles(e[0],r)),s&&s(),o&&e.css(n),e.removeData("keys").stop(t)}}),p=C.Class.extend({init:function(e,t){var i=this;i.element=e,i.effects=[],i.options=t,i.restore=[]},run:function(t){var i,n,r,a,l,c,d,u=this,h=t.length,p=u.element,f=u.options,m=e.Deferred(),g={},v={};for(u.effects=t,m.then(e.proxy(u,"complete")),p.data("animating",!0),n=0;h>n;n++)for(i=t[n],i.setReverse(f.reverse),i.setOptions(f),u.addRestoreProperties(i.restore),i.prepare(g,v),l=i.children(),r=0,c=l.length;c>r;r++)l[r].duration(f.duration).run();for(d in f.effects)D(v,f.effects[d].properties);for(p.is(":visible")||D(g,{display:p.data("olddisplay")||"block"}),I&&!f.reset&&(a=p.data("targetTransform"),a&&(g=D(a,g))),g=s(p,g),I&&!P&&(g=o(g)),p.css(g).css(ae),n=0;h>n;n++)t[n].setup();return f.init&&f.init(),p.data("targetTransform",v),S.animate(p,v,D({},f,{complete:m.resolve})),m.promise()},stop:function(){e(this.element).kendoStop(!0,!0)},addRestoreProperties:function(e){for(var t,i=this.element,n=0,r=e.length;r>n;n++)t=e[n],this.restore.push(t),i.data(t)||i.data(t,i.css(t))},restoreCallback:function(){var e,t,i,n=this.element;for(e=0,t=this.restore.length;t>e;e++)i=this.restore[e],n.css(i,n.data(i))},complete:function(){var t=this,i=0,n=t.element,r=t.options,o=t.effects,s=o.length;for(n.removeData("animating").dequeue(),r.hide&&n.data("olddisplay",n.css("display")).hide(),this.restoreCallback(),H&&!I&&setTimeout(e.proxy(this,"restoreCallback"),0);s>i;i++)o[i].teardown();r.completeCallback&&r.completeCallback(n)}}),S.promise=function(e,t){var i,n,r,o=[],s=new p(e,t),a=C.parseEffects(t.effects);t.effects=a;for(r in a)i=S[l(r)],i&&(n=new i(e,a[r].direction),o.push(n));o[0]?s.run(o):(e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.init&&t.init(),e.dequeue(),s.complete())},D(S,{animate:function(i,r,s){var a=s.transition!==!1;delete s.transition,P&&"transition"in S&&a?S.transition(i,r,s):I?i.animate(o(r),{queue:!1,show:!1,hide:!1,duration:s.duration,complete:s.complete}):i.each(function(){var i=e(this),o={};T(U,function(e,s){var a,l,c,d,u,h,p,f=r?r[s]+" ":null;f&&(l=r,s in F&&r[s]!==t?(a=f.match(N),I&&D(l,{scale:+a[0]})):s in z&&r[s]!==t&&(c=i.css(re),d="absolute"==c||"fixed"==c,i.data(ne)||(d?i.data(ne,{top:n(i,"top")||0,left:n(i,"left")||0,bottom:n(i,"bottom"),right:n(i,"right")}):i.data(ne,{top:n(i,"marginTop")||0,left:n(i,"marginLeft")||0})),u=i.data(ne),a=f.match(N),a&&(h=s==ne+"y"?0:+a[1],p=s==ne+"y"?+a[1]:+a[2],d?(isNaN(u.right)?isNaN(h)||D(l,{left:u.left+h}):isNaN(h)||D(l,{right:u.right-h}),isNaN(u.bottom)?isNaN(p)||D(l,{top:u.top+p}):isNaN(p)||D(l,{bottom:u.bottom-p})):(isNaN(h)||D(l,{marginLeft:u.left+h}),isNaN(p)||D(l,{marginTop:u.top+p})))),!I&&"scale"!=s&&s in l&&delete l[s],l&&D(o,l))}),E.msie&&delete o.scale,i.animate(o,{queue:!1,show:!1,hide:!1,duration:s.duration,complete:s.complete})})}}),S.animatedPromise=S.promise,f=C.Class.extend({init:function(e,t){var i=this;i.element=e,i._direction=t,i.options={},i._additionalEffects=[],i.restore||(i.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(e){return this._additionalEffects.push(e),this},direction:function(e){return this._direction=e,this},duration:function(e){return this._duration=e,this},compositeRun:function(){var e=this,t=new p(e.element,{reverse:e._reverse,duration:e._duration}),i=e._additionalEffects.concat([e]);return t.run(i)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,i,n=this,r=n.element,a=0,l=n.restore,c=l.length,d=e.Deferred(),u={},h={},p=n.children(),f=p.length;for(d.then(e.proxy(n,"_complete")),r.data("animating",!0),a=0;c>a;a++)t=l[a],r.data(t)||r.data(t,r.css(t));for(a=0;f>a;a++)p[a].duration(n._duration).run();return n.prepare(u,h),r.is(":visible")||D(u,{display:r.data("olddisplay")||"block"}),I&&(i=r.data("targetTransform"),i&&(u=D(i,u))),u=s(r,u),I&&!P&&(u=o(u)),r.css(u).css(ae),n.setup(),r.data("targetTransform",h),S.animate(r,h,{duration:n._duration,complete:d.resolve}),d.promise()},stop:function(){var t=0,i=this.children(),n=i.length;for(t=0;n>t;t++)i[t].stop();return e(this.element).kendoStop(!0,!0),this},restoreCallback:function(){var e,t,i,n=this.element;for(e=0,t=this.restore.length;t>e;e++)i=this.restore[e],n.css(i,n.data(i))},_complete:function(){var t=this,i=t.element;i.removeData("animating").dequeue(),t.restoreCallback(),t.shouldHide()&&i.data("olddisplay",i.css("display")).hide(),H&&!I&&setTimeout(e.proxy(t,"restoreCallback"),0),t.teardown()},setOptions:function(e){D(!0,this.options,e)},children:function(){return[]},shouldHide:e.noop,setup:e.noop,prepare:e.noop,teardown:e.noop,directions:[],setReverse:function(e){return this._reverse=e,this}}),m=["left","right","up","down"],g=["in","out"],c("slideIn",{directions:m,divisor:function(e){return this.options.divisor=e,this},prepare:function(e,t){var i,n=this,r=n.element,o=he[n._direction],s=-o.modifier*(o.vertical?r.outerHeight():r.outerWidth()),a=s/(n.options&&n.options.divisor||1)+Y,l="0px";n._reverse&&(i=e,e=t,t=i),I?(e[o.transition]=a,t[o.transition]=l):(e[o.property]=a,t[o.property]=l)}}),c("tile",{directions:m,init:function(e,t,i){f.prototype.init.call(this,e,t),this.options={previous:i}},previousDivisor:function(e){return this.options.previousDivisor=e,this},children:function(){var e=this,t=e._reverse,i=e.options.previous,n=e.options.previousDivisor||1,r=e._direction,o=[C.fx(e.element).slideIn(r).setReverse(t)];return i&&o.push(C.fx(i).slideIn(he[r].reverse).divisor(n).setReverse(!t)),o}}),d("fade","opacity",1,0),d("zoom","scale",1,.01),c("slideMargin",{prepare:function(e,t){var i,n=this,r=n.element,o=n.options,s=r.data(ee),a=o.offset,l=n._reverse;l||null!==s||r.data(ee,parseFloat(r.css("margin-"+o.axis))),i=r.data(ee)||0,t["margin-"+o.axis]=l?i:i+a}}),c("slideTo",{prepare:function(e,t){var i=this,n=i.element,r=i.options,o=r.offset.split(","),s=i._reverse;I?(t.translatex=s?0:o[0],t.translatey=s?0:o[1]):(t.left=s?0:o[0],t.top=s?0:o[1]),n.css("left")}}),c("expand",{directions:["horizontal","vertical"],restore:[ie],prepare:function(e,i){var n=this,r=n.element,o=n.options,s=n._reverse,a="vertical"===n._direction?Z:X,l=r[0].style[a],c=r.data(a),d=parseFloat(c||l),u=q(r.css(a,K)[a]());e.overflow=J,d=o&&o.reset?u||d:d||u,i[a]=(s?0:d)+Y,e[a]=(s?d:0)+Y,c===t&&r.data(a,l)},shouldHide:function(){return this._reverse},teardown:function(){var e=this,t=e.element,i="vertical"===e._direction?Z:X,n=t.data(i);(n==K||n===G)&&setTimeout(function(){t.css(i,K).css(i)},0)}}),v={position:"absolute",marginLeft:0,marginTop:0,scale:1},c("transfer",{init:function(e,t){this.element=e,this.options={target:t},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var i=this,n=i.element,r=S.box(n),o=S.box(i.options.target),s=a(n,"scale"),l=S.fillScale(o,r),c=S.transformOrigin(o,r);D(e,v),t.scale=1,n.css(ae,"scale(1)").css(ae),n.css(ae,"scale("+s+")"),e.top=r.top,e.left=r.left,e.transformOrigin=c.x+Y+" "+c.y+Y,i._reverse?e.scale=l:t.scale=l}}),y={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},_={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}},c("turningPage",{directions:m,init:function(e,t,i){f.prototype.init.call(this,e,t),this._container=i},prepare:function(e,t){var i=this,n=i._reverse,r=n?he[i._direction].reverse:i._direction,o=_[r];e.zIndex=1,i._clipInHalf&&(e.clip=u(i._container,C.directions[r].reverse)),e[le]=J,t[ae]=ue+(n?o.start:o.end),e[ae]=ue+(n?o.end:o.start)},setup:function(){this._container.append(this.element)},face:function(e){return this._face=e,this},shouldHide:function(){var e=this,t=e._reverse,i=e._face;return t&&!i||!t&&i},clipInHalf:function(e){return this._clipInHalf=e,this},temporary:function(){return this.element.addClass("temp-page"),this}}),c("staticPage",{directions:m,init:function(e,t,i){f.prototype.init.call(this,e,t),this._container=i},restore:["clip"],prepare:function(e,t){var i=this,n=i._reverse?he[i._direction].reverse:i._direction;e.clip=u(i._container,n),e.opacity=.999,t.opacity=1},shouldHide:function(){var e=this,t=e._reverse,i=e._face;return t&&!i||!t&&i},face:function(e){return this._face=e,this}}),c("pageturn",{directions:["horizontal","vertical"],init:function(e,t,i,n){f.prototype.init.call(this,e,t),this.options={},this.options.face=i,this.options.back=n},children:function(){var e,t=this,i=t.options,n="horizontal"===t._direction?"left":"top",r=C.directions[n].reverse,o=t._reverse,s=i.face.clone(!0).removeAttr("id"),a=i.back.clone(!0).removeAttr("id"),l=t.element;return o&&(e=n,n=r,r=e),[C.fx(i.face).staticPage(n,l).face(!0).setReverse(o),C.fx(i.back).staticPage(r,l).setReverse(o),C.fx(s).turningPage(n,l).face(!0).clipInHalf(!0).temporary().setReverse(o),C.fx(a).turningPage(r,l).clipInHalf(!0).temporary().setReverse(o)]},prepare:function(e,t){e[ce]=de,e.transformStyle="preserve-3d",e.opacity=.999,t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),c("flip",{directions:["horizontal","vertical"],init:function(e,t,i,n){f.prototype.init.call(this,e,t),this.options={},this.options.face=i,this.options.back=n},children:function(){var e,t=this,i=t.options,n="horizontal"===t._direction?"left":"top",r=C.directions[n].reverse,o=t._reverse,s=t.element;return o&&(e=n,n=r,r=e),[C.fx(i.face).turningPage(n,s).face(!0).setReverse(o),C.fx(i.back).turningPage(r,s).setReverse(o)]},prepare:function(e){e[ce]=de,e.transformStyle="preserve-3d"}}),b=!A.mobileOS.android,w=".km-touch-scrollbar, .km-actionsheet-wrapper",c("replace",{_before:e.noop,_after:e.noop,init:function(t,i,n){f.prototype.init.call(this,t),this._previous=e(i),this._transitionClass=n},duration:function(){throw Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(e){return this._before=e,this},afterTransition:function(e){return this._after=e,this},_both:function(){return e().add(this._element).add(this._previous)},_containerClass:function(){var e=this._direction,t="k-fx k-fx-start k-fx-"+this._transitionClass;return e&&(t+=" k-fx-"+e),this._reverse&&(t+=" k-fx-reverse"),t},complete:function(t){if(!(!this.deferred||t&&e(t.target).is(w))){var i=this.container;i.removeClass("k-fx-end").removeClass(this._containerClass()).off(P.event,this.completeProxy),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),b&&i.css(ie,""),this.isAbsolute||this._both().css(re,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,i=this,n=i.element,r=i._previous,o=n.parents().filter(r.parents()).first(),s=i._both(),a=e.Deferred(),l=n.css(re);return o.length||(o=n.parent()),this.container=o,this.deferred=a,this.isAbsolute="absolute"==l,this.isAbsolute||s.css(re,"absolute"),b&&(t=o.css(ie),o.css(ie,"hidden")),P?(n.addClass("k-fx-hidden"),o.addClass(this._containerClass()),this.completeProxy=e.proxy(this,"complete"),o.on(P.event,this.completeProxy),C.animationFrame(function(){n.removeClass("k-fx-hidden").addClass("k-fx-next"),r.css("display","").addClass("k-fx-current"),i._before(r,n),C.animationFrame(function(){o.removeClass("k-fx-start").addClass("k-fx-end"),i._after(r,n)})})):this.complete(),a.promise()},stop:function(){this.complete()}}),k=C.Class.extend({init:function(){var e=this;e._tickProxy=M(e._tick,e),e._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,C.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var e=this;e._started&&(e.tick(),e.done()?(e._started=!1,e.onEnd()):C.animationFrame(e._tickProxy))}}),x=k.extend({init:function(e){var t=this;D(t,e),k.fn.init.call(t)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(e){var t=this,i=t.movable;t.initial=i[t.axis],t.delta=e.location-t.initial,t.duration="number"==typeof e.duration?e.duration:300,t.tick=t._easeProxy(e.ease),t.startDate=new Date,t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}}),D(x,{easeOutExpo:function(e,t,i,n){return e==n?t+i:i*(-Math.pow(2,-10*e/n)+1)+t},easeOutBack:function(e,t,i,n,r){return r=1.70158,i*((e=e/n-1)*e*((r+1)*e+r)+1)+t}}),S.Animation=k,S.Transition=x,S.createEffect=c,S.box=function(t){t=e(t);var i=t.offset();return i.width=t.outerWidth(),i.height=t.outerHeight(),i},S.transformOrigin=function(e,t){var i=(e.left-t.left)*t.width/(t.width-e.width),n=(e.top-t.top)*t.height/(t.height-e.height);return{x:isNaN(i)?0:i,y:isNaN(n)?0:n}},S.fillScale=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},S.fitScale=function(e,t){return Math.max(e.width/t.width,e.height/t.height)}}(window.kendo.jQuery),function(e){function t(e){if(!e)return{};var t=e.match(v)||[];return{type:t[1],direction:t[3],reverse:"reverse"===t[5]}}var i=window.kendo,n=i.Observable,r="SCRIPT",o="init",s="show",a="hide",l="transitionStart",c="transitionEnd",d="attach",u="detach",h=/unrecognized expression/,p=n.extend({init:function(e,t){var r=this;t=t||{},n.fn.init.call(r),r.content=e,r.id=i.guid(),r.tagName=t.tagName||"div",r.model=t.model,r._wrap=t.wrap!==!1,this._evalTemplate=t.evalTemplate||!1,r._fragments={},r.bind([o,s,a,l,c],t)},render:function(t){var n=this,r=!n.element;return r&&(n.element=n._createElement()),t&&e(t).append(n.element),r&&(i.bind(n.element,n.model),n.trigger(o)),t&&(n._eachFragment(d),n.trigger(s)),n.element},clone:function(){return new f(this)},triggerBeforeShow:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideStart:function(){},hideEnd:function(){this.hide()},beforeTransition:function(e){this.trigger(l,{type:e})},afterTransition:function(e){this.trigger(c,{type:e})},hide:function(){this._eachFragment(u),this.element.detach(),this.trigger(a)},destroy:function(){var e=this.element;e&&(i.unbind(e),i.destroy(e),e.remove())},fragments:function(t){e.extend(this._fragments,t)},_eachFragment:function(e){for(var t in this._fragments)this._fragments[t][e](this,t)},_createElement:function(){var t,n,o=this,s="<"+o.tagName+" />";try{n=e(document.getElementById(o.content)||o.content),n[0].tagName===r&&(n=n.html())}catch(e){h.test(e.message)&&(n=o.content)}return"string"==typeof n?(n=n.replace(/^\s+|\s+$/g,""),o._evalTemplate&&(n=i.template(n)(o.model||{})),t=e(s).append(n),o._wrap||(t=t.contents())):(t=n,o._wrap&&(t=t.wrapAll(s).parent())),t}}),f=i.Class.extend({init:function(t){e.extend(this,{element:t.element.clone(!0),transition:t.transition,id:t.id}),t.element.parent().append(this.element)},hideStart:e.noop,hideEnd:function(){this.element.remove()},beforeTransition:e.noop,afterTransition:e.noop}),m=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this.containers={}},container:function(e){var t=this.containers[e];return t||(t=this._createContainer(e),this.containers[e]=t),t},showIn:function(e,t,i){this.container(e).show(t,i)},_createContainer:function(e){var t,i=this.render(),n=i.find(e);if(!n.length&&i.is(e)){if(!i.is(e))throw Error("can't find a container with the specified "+e+" selector");n=i}return t=new y(n),t.bind("accepted",function(e){e.view.render(n)}),t}}),g=p.extend({attach:function(e,t){e.element.find(t).replaceWith(this.render())},detach:function(){}}),v=/^(\w+)(:(\w+))?( (\w+))?$/,y=n.extend({init:function(e){n.fn.init.call(this),this.container=e,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(e,n,r){if(!e.triggerBeforeShow())return this.trigger("after"),!1;r=r||e.id;var o=this,s=e===o.view?e.clone():o.view,a=o.history,l=a[a.length-2]||{},c=l.id===r,d=n||(c?a[a.length-1].transition:e.transition),u=t(d);return o.running&&o.effect.stop(),"none"===d&&(d=null),o.trigger("accepted",{view:e}),o.view=e,o.previous=s,o.running=!0,c?a.pop():a.push({id:r,transition:d}),s?(s.hideStart(),d&&i.effects.enabled?(e.element.addClass("k-fx-hidden"),e.showStart(),c&&!n&&(u.reverse=!u.reverse),o.effect=i.fx(e.element).replace(s.element,u.type).beforeTransition(function(){e.beforeTransition("show"),s.beforeTransition("hide")}).afterTransition(function(){e.afterTransition("show"),s.afterTransition("hide")}).direction(u.direction).setReverse(u.reverse),o.effect.run().then(function(){o.end()})):(e.showStart(),o.end()),!0):(e.showStart(),e.showEnd(),o.after(),!0)}});i.ViewContainer=y,i.Fragment=g,i.Layout=m,i.View=p,i.ViewClone=f}(window.kendo.jQuery),function(e){function t(){this.node=null}function i(e,t,i){this.nodeName=e,this.attr=t||{},this.cssText=null,this.children=i||[]}function n(e){this.nodeValue=e}function r(e){this.html=e}function o(e){return new r(e)}function s(e,t,n){return new i(e,t,n)}function a(e){return new n(e)}function l(e){this.root=e,this.children=[]}t.prototype={remove:function(){this.node.parentNode.removeChild(this.node)}},i.prototype=new t,i.prototype.render=function(e,t){var i,n,r,o,s,a,l,c,d=this.children,u=d.length;if(t&&t.nodeName===this.nodeName){if(i=t.node,r=t.children,Math.abs(r.length-u)>2)return void this.render({appendChild:function(i){e.replaceChild(i,t.node)}},null);for(n=0;u>n;n++)d[n].render(i,r[n]);for(n=u,u=r.length;u>n;n++)r[n].remove()}else{for(t&&(t.remove(),t=null),i=document.createElement(this.nodeName),n=0;u>n;n++)d[n].render(i,null);e.appendChild(i)}o=this.attr;for(s in o)if(!t||o[s]!==t.attr[s])if(void 0!==i[s])if("style"!==s)i[s]=o[s];else{a="",l=o[s];for(c in l)a+=c,a+=":",a+=l[c],a+=";";t&&t.cssText===a||(i.style.cssText=a),this.cssText=a}else i.setAttribute(s,o[s]);if(t)for(s in t.attr)void 0===o[s]&&(void 0!==i[s]?"style"===s?i.style.cssText="":"className"===s?i[s]="":i.removeAttribute(s):i.removeAttribute(s));this.node=i},n.prototype=new t,n.prototype.nodeName="#text",n.prototype.render=function(e,t){var i;t&&t.nodeName===this.nodeName?(i=t.node,this.nodeValue!==t.nodeValue&&(i.nodeValue=this.nodeValue)):(t&&t.remove(),i=document.createTextNode(this.nodeValue),e.appendChild(i)),this.node=i},r.prototype={nodeName:"#html",remove:function(){for(var e=0;this.nodes.length>e;e++)this.nodes[e].parentNode.removeChild(this.nodes[e])},render:function(e,t){var i,n;if(t&&t.nodeName===this.nodeName&&t.html===this.html)this.nodes=t.nodes.slice(0);else for(t&&t.remove(),i=e.lastChild,e.insertAdjacentHTML("beforeend",this.html),this.nodes=[],n=i?i.nextSibling:e.firstChild;n;n=n.nextSibling)this.nodes.push(n)}},l.prototype={html:o,element:s,text:a,render:function(e){var t,i,n=this.children;for(t=0,i=e.length;i>t;t++)e[t].render(this.root,n[t]);for(t=i;n.length>t;t++)n[t].remove();this.children=e}},e.dom={html:o,text:a,element:s,Tree:l}}(window.kendo),function(e){function t(e){var i=Math.floor(e/26)-1;return(i>=0?t(i):"")+String.fromCharCode(65+e%26)}function i(e,i){return t(i)+(e+1)}function n(e){return 6>e.length&&(e=e.replace(/(\w)/g,function(e,t){return t+t})),e=e.substring(1).toUpperCase(),8>e.length&&(e="FF"+e),e}var r='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',o=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>${creator}</dc:creator><cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${created}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${modified}</dcterms:modified></cp:coreProperties>'),s=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>${sheets.length}</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="${sheets.length}" baseType="lpstr"># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<vt:lpstr>${sheets[idx].options.title}</vt:lpstr># } else { #<vt:lpstr>Sheet${idx+1}</vt:lpstr># } ## } #</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>'),a=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/># for (var idx = 1; idx <= count; idx++) { #<Override PartName="/xl/worksheets/sheet${idx}.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /># } #<Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /></Types>'),l=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" /><workbookPr defaultThemeVersion="124226" /><bookViews><workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" /></bookViews><sheets># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<sheet name="${sheets[idx].options.title}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } else { #<sheet name="Sheet${idx+1}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } ## } #</sheets><calcPr calcId="145621" /></workbook>'),c=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac"><dimension ref="A1" /><sheetViews><sheetView tabSelected="1" workbookViewId="0"># if (freezePane) { #<pane state="frozen"# if (freezePane.colSplit) { # xSplit="${freezePane.colSplit}"# } ## if (freezePane.rowSplit) { # ySplit="${freezePane.rowSplit}"# } # topLeftCell="${String.fromCharCode(65 + (freezePane.colSplit || 0))}${(freezePane.rowSplit || 0)+1}"/># } #</sheetView></sheetViews><sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25" /># if (columns) { #<cols># for (var ci = 0; ci < columns.length; ci++) { ## var column = columns[ci]; ## if (column.width) { #<col min="${ci+1}" max="${ci+1}" customWidth="1"# if (column.autoWidth) { # width="${((column.width*7+5)/7*256)/256}" bestFit="1"# } else { # width="${(((column.width)/7)*100+0.5)/100}" # } #/># } ## } #</cols># } #<sheetData># for (var ri = 0; ri < data.length; ri++) { ## var row = data[ri]; #<row r="${ri + 1}"># for (var ci = 0; ci < row.data.length; ci++) { ## var cell = row.data[ci];#<c r="${cell.ref}"# if (cell.style) { # s="${cell.style}" # } ## if (cell.type) { # t="${cell.type}"# } #># if (cell.value != null) { #<v>${cell.value}</v># } #</c># } #</row># } #</sheetData># if (filter) { #<autoFilter ref="${filter.from}:${filter.to}"/># } ## if (mergeCells.length) { #<mergeCells count="${mergeCells.length}"># for (var ci = 0; ci < mergeCells.length; ci++) { #<mergeCell ref="${mergeCells[ci]}"/># } #</mergeCells># } #<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" /></worksheet>'),d=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var idx = 1; idx <= count; idx++) { #<Relationship Id="rId${idx}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet${idx}.xml" /># } #<Relationship Id="rId${count+1}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" /><Relationship Id="rId${count+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" /></Relationships>'),u=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${count}" uniqueCount="${uniqueCount}"># for (var index in indexes) { #<si><t>${index.substring(1)}</t></si># } #</sst>'),h=e.template('<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="${formats.length}"># for (var fi = 0; fi < formats.length; fi++) { ## var format = formats[fi]; #<numFmt formatCode="${format.format}" numFmtId="${165+fi}" /># } #</numFmts><fonts count="${fonts.length+1}" x14ac:knownFonts="1"><font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><scheme val="minor" /></font># for (var fi = 0; fi < fonts.length; fi++) { ## var font = fonts[fi]; #<font># if (font.bold) { #<b/># } ## if (font.italic) { #<i/># } ## if (font.underline) { #<u/># } ## if (font.color) { #<color rgb="${font.color}" /># } else { #<color theme="1" /># } ## if (font.fontSize) { #<sz val="${font.fontSize}" /># } else { #<sz val="11" /># } ## if (font.fontName) { #<name val="${font.fontName}" /># } else { #<name val="Calibri" /><scheme val="minor" /># } #<family val="2" /></font># } #</fonts><fills count="${fills.length+1}"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill># for (var fi = 0; fi < fills.length; fi++) { ## var fill = fills[fi]; ## if (fill.background) { #<fill><patternFill patternType="solid"><fgColor rgb="${fill.background}"/></patternFill></fill># } ## } #</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellXfs count="${styles.length+1}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/># for (var si = 0; si < styles.length; si++) { ## var style = styles[si]; #<xf xfid="0"# if (style.fontId) { # fontId="${style.fontId}" applyFont="1"# } ## if (style.fillId) { # fillId="${style.fillId}" applyFill="1"# } ## if (style.numFmtId) { # numFmtId="${style.numFmtId}" applyNumberFormat="1"# } ## if (style.hAlign || style.vAlign) { # applyAlignment="1"# } #># if (style.hAlign || style.vAlign) { #<alignment# if (style.hAlign) { # horizontal="${style.hAlign}"# } ## if (style.vAlign) { # vertical="${style.vAlign}"# } #/># } #</xf># } #</cellXfs><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" /></styleSheet>'),p=e.Class.extend({init:function(e,t,i){this.options=e,this._strings=t,this._styles=i,this._mergeCells=[]},toXML:function(){var e=this.options.rows||[],t=this.options.filter;return c({freezePane:this.options.freezePane,columns:this.options.columns,data:$.map(e,$.proxy(this._row,this,e)),mergeCells:this._mergeCells,filter:t?{from:i(0,t.from),to:i(0,t.to)}:null})},_row:function(e,t,i){return this._cellIndex=0,{data:$.map(t.cells,$.proxy(this._cell,this,e,i))}},_lookupString:function(e){var t="$"+e,i=this._strings.indexes[t];return void 0!==i?e=i:(e=this._strings.indexes[t]=this._strings.uniqueCount,this._strings.uniqueCount++),this._strings.count++,e},_lookupStyle:function(t){var i,n=e.stringify(t);return"{}"==n?0:(i=$.inArray(n,this._styles),0>i&&(i=this._styles.push(n)-1),i+1)},_cell:function(t,n,r){var o,s,a,l,c,d,u,h,p,f,m;if(!r)return void this._cellIndex++;if(o=r.value,s={bold:r.bold,color:r.color,background:r.background,italic:r.italic,underline:r.underline,fontName:r.fontName,fontSize:r.fontSize,format:r.format,hAlign:r.hAlign,vAlign:r.vAlign},a=this.options.columns||[],l=a[this._cellIndex],l&&l.autoWidth&&(l.width=Math.max(l.width||0,(""+o).length)),c=typeof o,"string"===c?(o=this._lookupString(o),c="s"):"number"===c?c="n":"boolean"===c?(c="b",o=+o):o&&o.getTime?(c="d",o=e.timezone.remove(o,"Etc/UTC").toJSON(),
s.format||(s.format="mm-dd-yy")):(c=null,o=""),s=this._lookupStyle(s),d={value:o,type:c,style:s,ref:i(n,this._cellIndex)},u=r.colSpan||1,h=r.rowSpan||1,u>1||h>1){for(p=[d],f=1;u>f;f++)this._cellIndex++,p[f]={ref:i(n,this._cellIndex)};for(m=1;h>m;m++)t[n+m]&&t[n+m].cells.splice(this._cellIndex,0,{});this._mergeCells.push(d.ref+":"+i(n+h-1,this._cellIndex)),d=p}return this._cellIndex++,d}}),f={General:0,0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70},m=e.Class.extend({init:function(e){this.options=e||{},this._strings={indexes:{},count:0,uniqueCount:0},this._styles=[],this._sheets=$.map(this.options.sheets||[],$.proxy(function(e){return new p(e,this._strings,this._styles)},this))},toDataURL:function(){var t,i,c,p,m,g,v,y,_,b,w,k,x;if("undefined"==typeof JSZip)throw Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.");for(t=new JSZip,i=t.folder("docProps"),i.file("core.xml",o({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||(new Date).toJSON(),modified:this.options.date||(new Date).toJSON()})),c=this._sheets.length,i.file("app.xml",s({sheets:this._sheets})),p=t.folder("_rels"),p.file(".rels",r),m=t.folder("xl"),g=m.folder("_rels"),g.file("workbook.xml.rels",d({count:c})),m.file("workbook.xml",l({sheets:this._sheets})),v=m.folder("worksheets"),y=0;c>y;y++)v.file(e.format("sheet{0}.xml",y+1),this._sheets[y].toXML());return _=$.map(this._styles,$.parseJSON),b=function(e){return e.underline||e.bold||e.italic||e.color||e.fontName||e.fontSize},w=$.map(_,function(e){return e.color&&(e.color=n(e.color)),b(e)?e:void 0}),k=$.map(_,function(e){return e.format&&void 0===f[e.format]?e:void 0}),x=$.map(_,function(e){return e.background?(e.background=n(e.background),e):void 0}),m.file("styles.xml",h({fonts:w,fills:x,formats:k,styles:$.map(_,function(e){var t={};return b(e)&&(t.fontId=$.inArray(e,w)+1),e.background&&(t.fillId=$.inArray(e,x)+2),t.hAlign=e.hAlign,t.vAlign=e.vAlign,e.format&&(t.numFmtId=void 0!==f[e.format]?f[e.format]:165+$.inArray(e,k)),t})})),m.file("sharedStrings.xml",u(this._strings)),t.file("[Content_Types].xml",a({count:c})),"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+t.generate({compression:"DEFLATE"})}});e.ooxml={Workbook:m,Worksheet:p}}(kendo),function(e,t){t.ExcelExporter=t.Class.extend({init:function(i){i.columns=this._trimColumns(i.columns||[]),this.columns=e.map(this._leafColumns(i.columns||[]),this._prepareColumn),this.options=i;var n=i.dataSource;this.dataSource=n instanceof t.data.DataSource?new n.constructor(e.extend({},n.options,{page:i.allPages?0:n.page(),filter:n.filter(),pageSize:i.allPages?n.total():n.pageSize(),sort:n.sort(),group:n.group(),aggregate:n.aggregate()})):t.data.DataSource.create(n),n instanceof t.data.TreeListDataSource&&this.dataSource.data(n.view().toJSON())},_trimColumns:function(t){var i=this;return e.grep(t,function(e){var t=!(!e.field||e.hidden);return!t&&e.columns&&(t=i._trimColumns(e.columns).length>0),t})},_leafColumns:function(e){var t,i=[];for(t=0;e.length>t;t++)e[t].columns?i=i.concat(this._leafColumns(e[t].columns)):i.push(e[t]);return i},workbook:function(){var t=this.dataSource.fetch();return t.then(e.proxy(function(){return{sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:this._filter()}]}},this))},_prepareColumn:function(i){return i.field&&!i.hidden?e.extend({},i,{groupHeaderTemplate:t.template(i.groupHeaderTemplate||"${title}: ${value}"),groupFooterTemplate:i.groupFooterTemplate?t.template(i.groupFooterTemplate):null,footerTemplate:i.footerTemplate?t.template(i.footerTemplate):null}):void 0},_filter:function(){if(!this.options.filterable)return null;var e=this._depth();return{from:e,to:e+this.columns.length-1}},_dataRows:function(t,i){var n=this._depth(),r=e.map(t,e.proxy(function(t){var r,o,s,a,l,c,d,u;return this._hierarchical()&&(i=this.dataSource.level(t)+1),r=e.map(Array(i),function(){return{background:"#dfdfdf",color:"#333"}}),n&&t.items?(o=e.grep(this.columns,function(e){return e.field==t.field})[0],s=o&&o.title?o.title:t.field,a=o?o.groupHeaderTemplate:null,l=s+": "+t.value,c=e.extend({title:s,field:t.field,value:t.value,aggregates:t.aggregates},t.aggregates[t.field]),a&&(l=a(c)),r.push({value:l,background:"#dfdfdf",color:"#333",colSpan:this.columns.length+n-i}),d=this._dataRows(t.items,i+1),d.unshift({type:"group-header",cells:r}),d.concat(this._footer(t,i+1))):(u=e.map(this.columns,e.proxy(this._cell,this,t)),this._hierarchical()&&(u[0].colSpan=n-i+1),{type:"data",cells:r.concat(u)})},this));return r},_footer:function(t,i){var n=[],r=!1,o=e.map(this.columns,function(e){return e.groupFooterTemplate?(r=!0,{background:"#dfdfdf",color:"#333",value:e.groupFooterTemplate(t.aggregates[e.field])}):{background:"#dfdfdf",color:"#333"}});return r&&n.push({type:"group-footer",cells:e.map(Array(i),function(){return{background:"#dfdfdf",color:"#333"}}).concat(o)}),n},_isColumnVisible:function(e){return this._visibleColumns([e]).length>0&&(e.field||e.columns)},_visibleColumns:function(t){var i=this;return e.grep(t,function(e){var t=!e.hidden;return t&&e.columns&&(t=i._visibleColumns(e.columns).length>0),t})},_headerRow:function(t,i){var n=e.map(t.cells,function(e){return{background:"#7a7a7a",color:"#fff",value:e.title,colSpan:e.colSpan>1?e.colSpan:1,rowSpan:t.rowSpan>1&&!e.colSpan?t.rowSpan:1}});return this._hierarchical()&&(n[0].colSpan=this._depth()+1),{type:"header",cells:e.map(Array(i.length),function(){return{background:"#7a7a7a",color:"#fff"}}).concat(n)}},_prependHeaderRows:function(e){var t,i=this.dataSource.group(),n=[{rowSpan:1,cells:[],index:0}];for(this._prepareHeaderRows(n,this.options.columns),t=n.length-1;t>=0;t--)e.unshift(this._headerRow(n[t],i))},_prepareHeaderRows:function(e,t,i,n){var r,o,s,a=n||e[e.length-1],l=e[a.index+1],c=0;for(s=0;t.length>s;s++)r=t[s],this._isColumnVisible(r)&&(o={title:r.title||r.field,colSpan:0},a.cells.push(o),r.columns&&r.columns.length&&(l||(l={rowSpan:0,cells:[],index:e.length},e.push(l)),o.colSpan=this._trimColumns(this._visibleColumns(r.columns)).length,this._prepareHeaderRows(e,r.columns,o,l),c+=o.colSpan-1,a.rowSpan=e.length-a.index));i&&(i.colSpan+=c)},_rows:function(){var t,i,n=this.dataSource.group(),r=this._dataRows(this.dataSource.view(),0);return this.columns.length&&(this._prependHeaderRows(r),t=!1,i=e.map(this.columns,e.proxy(function(e){return e.footerTemplate?(t=!0,{background:"#dfdfdf",color:"#333",value:e.footerTemplate(this.dataSource.aggregates()[e.field])}):{background:"#dfdfdf",color:"#333"}},this)),t&&r.push({type:"footer",cells:e.map(Array(n.length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(i)})),r},_headerDepth:function(e){var t,i,n=1,r=0;for(t=0;e.length>t;t++)e[t].columns&&(i=this._headerDepth(e[t].columns),i>r&&(r=i));return n+r},_freezePane:function(){var t=this._visibleColumns(this.options.columns||[]),i=this._trimColumns(this._leafColumns(e.grep(t,function(e){return e.locked}))).length;return{rowSplit:this._headerDepth(t),colSplit:i?i+this.dataSource.group().length:0}},_cell:function(e,t){return t.field?{value:e.get(t.field)}:void 0},_hierarchical:function(){return this.options.hierarchy&&this.dataSource.level},_depth:function(){var e,t,i,n=this.dataSource,r=0;if(this._hierarchical()){for(e=n.view(),t=0;e.length>t;t++)i=n.level(e[t]),i>r&&(r=i);r++}else r=n.group().length;return r},_columns:function(){var t=this._depth(),i=e.map(Array(t),function(){return{width:20}});return i.concat(e.map(this.columns,function(e){return{width:parseInt(e.width,10),autoWidth:!e.width}}))}}),t.ExcelMixin={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",allPages:!1,filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var i=this.options.excel||{},n=new t.ExcelExporter({columns:this.columns,dataSource:this.dataSource,allPages:i.allPages,filterable:i.filterable,hierarchy:i.hierarchy});n.workbook().then(e.proxy(function(e){if(!this.trigger("excelExport",{workbook:e})){var n=new t.ooxml.Workbook(e);t.saveAs({dataURI:n.toDataURL(),fileName:e.fileName||i.fileName,proxyURL:i.proxyURL,forceProxy:i.forceProxy})}},this))}}}(kendo.jQuery,kendo),function(){kendo.data.transports.signalr=kendo.data.RemoteTransport.extend({init:function(e){var t,i=e&&e.signalr?e.signalr:{},n=i.promise;if(!n)throw Error('The "promise" option must be set.');if("function"!=typeof n.done||"function"!=typeof n.fail)throw Error('The "promise" option must be a Promise.');if(this.promise=n,t=i.hub,!t)throw Error('The "hub" option must be set.');if("function"!=typeof t.on||"function"!=typeof t.invoke)throw Error('The "hub" option is not a valid SignalR hub proxy.');this.hub=t,kendo.data.RemoteTransport.fn.init.call(this,e)},push:function(e){var t=this.options.signalr.client||{};t.create&&this.hub.on(t.create,e.pushCreate),t.update&&this.hub.on(t.update,e.pushUpdate),t.destroy&&this.hub.on(t.destroy,e.pushDestroy)},_crud:function(e,t){var i,n,r=this.hub,o=this.options.signalr.server;if(!o||!o[t])throw Error(kendo.format('The "server.{0}" option must be set.',t));i=[o[t]],n=this.parameterMap(e.data,t),$.isEmptyObject(n)||i.push(n),this.promise.done(function(){r.invoke.apply(r,i).done(e.success).fail(e.error)})},read:function(e){this._crud(e,"read")},create:function(e){this._crud(e,"create")},update:function(e){this._crud(e,"update")},destroy:function(e){this._crud(e,"destroy")}})}(),function(e,t,i){function n(e,r){var s,d;if(null==e||"none"==e)return null;if(e instanceof a)return e;if(e=e.toLowerCase(),s=o.exec(e))return e="transparent"==s[1]?new l(1,1,1,0):n(u.namedColors[s[1]],r),e.match=[s[1]],e;if((s=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i.exec(e))?d=new c(i(s[1],16),i(s[2],16),i(s[3],16),1):(s=/^#?([0-9a-f])([0-9a-f])([0-9a-f])/i.exec(e))?d=new c(i(s[1]+s[1],16),i(s[2]+s[2],16),i(s[3]+s[3],16),1):(s=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(e))?d=new c(i(s[1],10),i(s[2],10),i(s[3],10),1):(s=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(e))?d=new c(i(s[1],10),i(s[2],10),i(s[3],10),t(s[4])):(s=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(e))?d=new l(t(s[1])/100,t(s[2])/100,t(s[3])/100,1):(s=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(e))&&(d=new l(t(s[1])/100,t(s[2])/100,t(s[3])/100,t(s[4]))),d)d.match=s;else if(!r)throw Error("Cannot parse color: "+e);return d}function r(e,t,i){for(i||(i="0"),e=e.toString(16);t>e.length;)e="0"+e;return e}var o,s,a,l,c,d,u=function(e){var t,i,n,r,o,s=this,a=u.formats;if(1===arguments.length)for(e=s.resolveColor(e),r=0;a.length>r;r++)t=a[r].re,i=a[r].process,n=t.exec(e),n&&(o=i(n),s.r=o[0],s.g=o[1],s.b=o[2]);else s.r=arguments[0],s.g=arguments[1],s.b=arguments[2];s.r=s.normalizeByte(s.r),s.g=s.normalizeByte(s.g),s.b=s.normalizeByte(s.b)};u.prototype={toHex:function(){var e=this,t=e.padDigit,i=e.r.toString(16),n=e.g.toString(16),r=e.b.toString(16);return"#"+t(i)+t(n)+t(r)},resolveColor:function(e){return e=e||"black","#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=u.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},padDigit:function(e){return 1===e.length?"0"+e:e},brightness:function(e){var t=this,i=Math.round;return t.r=i(t.normalizeByte(t.r*e)),t.g=i(t.normalizeByte(t.g*e)),t.b=i(t.normalizeByte(t.b*e)),t},percBrightness:function(){var e=this;return Math.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)}},u.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[i(e[1],10),i(e[2],10),i(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[i(e[1],16),i(e[2],16),i(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[i(e[1]+e[1],16),i(e[2]+e[2],16),i(e[3]+e[3],16)]}}],u.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},o=["transparent"];for(s in u.namedColors)u.namedColors.hasOwnProperty(s)&&o.push(s);o=RegExp("^("+o.join("|")+")(\\W|$)","i"),a=kendo.Class.extend({toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+t((+this.a).toFixed(3))+")"},toDisplay:function(){return kendo.support.browser.msie&&9>kendo.support.browser.version?this.toCss():this.toCssRgba()},equals:function(e){return e===this||null!==e&&this.toCssRgba()==n(e).toCssRgba()},diff:function(e){if(null==e)return NaN;var t=this.toBytes();return e=e.toBytes(),Math.sqrt(Math.pow(.3*(t.r-e.r),2)+Math.pow(.59*(t.g-e.g),2)+Math.pow(.11*(t.b-e.b),2))},clone:function(){var e=this.toBytes();return e===this&&(e=new c(e.r,e.g,e.b,e.a)),e}}),l=a.extend({init:function(e,t,i,n){this.r=e,this.g=t,this.b=i,this.a=n},toHSV:function(){var e,t,i=this.r,n=this.g,r=this.b,o=Math.min(i,n,r),s=Math.max(i,n,r),a=s,l=s-o;return 0===l?new d(0,0,a,this.a):(0!==s?(t=l/s,e=i==s?(n-r)/l:n==s?2+(r-i)/l:4+(i-n)/l,e*=60,0>e&&(e+=360)):(t=0,e=-1),new d(e,t,a,this.a))},toBytes:function(){return new c(255*this.r,255*this.g,255*this.b,this.a)}}),c=l.extend({init:function(e,t,i,n){this.r=Math.round(e),this.g=Math.round(t),this.b=Math.round(i),this.a=n},toRGB:function(){return new l(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHex:function(){return r(this.r,2)+r(this.g,2)+r(this.b,2)},toBytes:function(){return this}}),d=a.extend({init:function(e,t,i,n){this.h=e,this.s=t,this.v=i,this.a=n},toRGB:function(){var e,t,i,n,r,o,s,a,c=this.h,d=this.s,u=this.v;if(0===d)t=i=n=u;else switch(c/=60,e=Math.floor(c),r=c-e,o=u*(1-d),s=u*(1-d*r),a=u*(1-d*(1-r)),e){case 0:t=u,i=a,n=o;break;case 1:t=s,i=u,n=o;break;case 2:t=o,i=u,n=a;break;case 3:t=o,i=s,n=u;break;case 4:t=a,i=o,n=u;break;default:t=u,i=o,n=s}return new l(t,i,n,this.a)},toBytes:function(){return this.toRGB().toBytes()}}),u.fromBytes=function(e,t,i,n){return new c(e,t,i,null!=n?n:1)},u.fromRGB=function(e,t,i,n){return new l(e,t,i,null!=n?n:1)},u.fromHSV=function(e,t,i,n){return new d(e,t,i,null!=n?n:1)},kendo.Color=u,kendo.parseColor=n}(window.kendo.jQuery,parseFloat,parseInt),function(e){function t(e){return typeof e!==z}function i(e,t){var i=n(t);return M.round(e*i)/i}function n(e){return e?M.pow(10,e):1}function r(e,t,i){return M.max(M.min(e,i),t)}function o(e){return e*I}function s(e){return e/I}function a(e){return"number"==typeof e&&!isNaN(e)}function l(e,i){return t(e)?e:i}function c(e){return e*e}function d(e){var t,i=[];for(t in e)i.push(t+e[t]);return i.sort().join("")}function u(e){var t,i=2166136261;for(t=0;e.length>t;++t)i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24),i^=e.charCodeAt(t);return i>>>0}function h(e){return u(d(e))}function p(e){var t,i=e.length,n=P,r=F;for(t=0;i>t;t++)r=M.max(r,e[t]),n=M.min(n,e[t]);return{min:n,max:r}}function f(e){return p(e).min}function m(e){return p(e).max}function g(e){return y(e).min}function v(e){return y(e).max}function y(e){var t,i,n,r=P,o=F;for(t=0,i=e.length;i>t;t++)n=e[t],null!==n&&isFinite(n)&&(r=M.min(r,n),o=M.max(o,n));return{min:r===P?void 0:r,max:o===F?void 0:o}}function _(e){return e?e[e.length-1]:void 0}function b(e,t){return e.push.apply(e,t),e}function w(e){return A.template(e,{useWithBlock:!1,paramName:"d"})}function k(e,i){return t(i)&&null!==i?" "+e+"='"+i+"' ":""}function x(e){var t,i="";for(t=0;e.length>t;t++)i+=k(e[t][0],e[t][1]);return i}function C(e){var i,n,r="";for(i=0;e.length>i;i++)n=e[i][1],t(n)&&(r+=e[i][0]+":"+n+";");return""!==r?r:void 0}function S(e){return"string"!=typeof e&&(e+="px"),e}function T(e){var t,i,n=[];if(e)for(t=A.toHyphens(e).split("-"),i=0;t.length>i;i++)n.push("k-pos-"+t[i]);return n.join(" ")}function D(e){return""===e||null===e||"none"===e||"transparent"===e||!t(e)}var M=Math,A=window.kendo,E=A.deepExtend,I=M.PI/180,P=Number.MAX_VALUE,F=-Number.MAX_VALUE,z="undefined",H=Date.now;H||(H=function(){return(new Date).getTime()}),E(A,{util:{MAX_NUM:P,MIN_NUM:F,append:b,arrayLimits:p,arrayMin:f,arrayMax:m,defined:t,deg:s,hashKey:u,hashObject:h,isNumber:a,isTransparent:D,last:_,limitValue:r,now:H,objectKey:d,round:i,rad:o,renderAttr:k,renderAllAttr:x,renderPos:T,renderSize:S,renderStyle:C,renderTemplate:w,sparseArrayLimits:y,sparseArrayMin:g,sparseArrayMax:v,sqr:c,valueOrDefault:l}}),A.dataviz.util=A.util}(window.kendo.jQuery),function(){function e(e){var i,n,r,s,a,l,c,d="",u=0;for(e=t(e);e.length>u;)i=e.charCodeAt(u++),n=e.charCodeAt(u++),r=e.charCodeAt(u++),s=i>>2,a=(3&i)<<4|n>>4,l=(15&n)<<2|r>>6,c=63&r,isNaN(n)?l=c=64:isNaN(r)&&(c=64),d=d+o.charAt(s)+o.charAt(a)+o.charAt(l)+o.charAt(c);return d}function t(e){var t,i,n;for(e=e.replace(/\r\n/g,"\n"),t="",i=0;e.length>i;i++)n=e.charCodeAt(i),128>n?t+=r(n):2048>n?(t+=r(192|n>>>6),t+=r(128|63&n)):65536>n&&(t+=r(224|n>>>12),t+=r(128|n>>>6&63),t+=r(128|63&n));return t}var i=window.kendo,n=i.deepExtend,r=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n(i.util,{encodeBase64:e,encodeUTF8:t})}(window.kendo.jQuery),function(e){var t=Math,i=window.kendo,n=i.deepExtend,r=e.inArray,o={observers:function(){return this._observers=this._observers||[]},addObserver:function(e){return this._observers?this._observers.push(e):this._observers=[e],this},removeObserver:function(e){var t=this.observers(),i=r(e,t);return-1!=i&&t.splice(i,1),this},trigger:function(e,t){var i,n,r=this._observers;if(r&&!this._suspended)for(n=0;r.length>n;n++)i=r[n],i[e]&&i[e](t);return this},optionsChange:function(e){this.trigger("optionsChange",e)},geometryChange:function(e){this.trigger("geometryChange",e)},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=t.max((this._suspended||0)-1,0),this},_observerField:function(e,t){this[e]&&this[e].removeObserver(this),this[e]=t,t.addObserver(this)}};n(i,{mixins:{ObserversMixin:o}})}(window.kendo.jQuery),function(e){function t(e){return null===e?null:e instanceof g?e:new g(e)}function i(e){return e&&_.isFunction(e.matrix)?e.matrix():e}function n(e,t,i,n){var r=0,o=0;return n&&(r=v.atan2(n.c*i,n.a*t),0!==n.b&&(o=v.atan2(n.d*i,n.b*t))),{x:r,y:o}}function r(e,t){for(;t>e;)e+=90;return e}function o(e,t){var i,n,r;for(i=0;t.length>i;i++)n=t[i],r=n.charAt(0).toUpperCase()+n.substring(1,n.length),e["set"+r]=s(n),e["get"+r]=a(n)}function s(e){return function(t){return this[e]!==t&&(this[e]=t,this.geometryChange()),this}}function a(e){return function(){return this[e]}}function l(e,t,i){e>t&&(t+=360);var n=v.abs(t-e);return i||(n=360-n),n}function c(e,t,i,n,r,o){var s=D((r-e)/i,3),a=D((o-t)/n,3);return D(T(v.atan2(a,s)))}function d(e,t,i,n,r,o,s,a){var d,u,h,p,f,m,g,_,b,w,k,x,C,S,T,D,M,A;if(t!==n)b=i-e,w=n-t,k=y(r,2),x=y(o,2),C=(x*b*(e+i)+k*w*(t+n))/(2*k*w),S=C-n,T=-(b*x)/(k*w),f=1/k+y(T,2)/x,m=2*(T*S/x-i/k),g=y(i,2)/k+y(S,2)/x-1,_=v.sqrt(y(m,2)-4*f*g),d=(-m-_)/(2*f),u=C+T*d,h=(-m+_)/(2*f),p=C+T*h;else{if(e===i)return!1;m=-2*n,g=y((i-e)*o/(2*r),2)+y(n,2)-y(o,2),_=v.sqrt(y(m,2)-4*g),d=h=(e+i)/2,u=(-m-_)/2,p=(-m+_)/2}return D=c(d,u,r,o,e,t),M=c(d,u,r,o,i,n),A=l(D,M,a),(s&&180>=A||!s&&A>180)&&(d=h,u=p,D=c(d,u,r,o,e,t),M=c(d,u,r,o,i,n)),{center:new I(d,u),startAngle:D,endAngle:M}}var u,h,p,f,m,g,v=Math,y=v.pow,_=window.kendo,b=_.Class,w=_.deepExtend,k=_.mixins.ObserversMixin,x=_.util,C=x.defined,S=x.rad,T=x.deg,D=x.round,M=v.PI/2,A=x.MIN_NUM,E=x.MAX_NUM,I=b.extend({init:function(e,t){this.x=e||0,this.y=t||0},equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new I(this.x,this.y)},rotate:function(e,i){return this.transform(t().rotate(e,i))},translate:function(e,t){return this.x+=e,this.y+=t,this.geometryChange(),this},translateWith:function(e){return this.translate(e.x,e.y)},move:function(e,t){return this.x=this.y=0,this.translate(e,t)},scale:function(e,t){return C(t)||(t=e),this.x*=e,this.y*=t,this.geometryChange(),this},scaleCopy:function(e,t){return this.clone().scale(e,t)},transform:function(e){var t=i(e),n=this.x,r=this.y;return this.x=t.a*n+t.c*r+t.e,this.y=t.b*n+t.d*r+t.f,this.geometryChange(),this},transformCopy:function(e){var t=this.clone();return e&&t.transform(e),t},distanceTo:function(e){var t=this.x-e.x,i=this.y-e.y;return v.sqrt(t*t+i*i)},round:function(e){return this.x=D(this.x,e),this.y=D(this.y,e),this.geometryChange(),this},toArray:function(e){var t=C(e),i=t?D(this.x,e):this.x,n=t?D(this.y,e):this.y;return[i,n]}});o(I.fn,["x","y"]),w(I.fn,k),I.fn.toString=function(e,t){var i=this.x,n=this.y;return C(e)&&(i=D(i,e),n=D(n,e)),t=t||" ",i+t+n},I.create=function(e,t){return C(e)?e instanceof I?e:1===arguments.length&&2===e.length?new I(e[0],e[1]):new I(e,t):void 0},I.min=function(){var e,t,i=x.MAX_NUM,n=x.MAX_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],i=v.min(t.x,i),n=v.min(t.y,n);return new I(i,n)},I.max=function(){var e,t,i=x.MIN_NUM,n=x.MIN_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],i=v.max(t.x,i),n=v.max(t.y,n);return new I(i,n)},I.minPoint=function(){return new I(A,A)},I.maxPoint=function(){return new I(E,E)},I.ZERO=new I(0,0),u=b.extend({init:function(e,t){this.width=e||0,this.height=t||0},equals:function(e){return e&&e.width===this.width&&e.height===this.height},clone:function(){return new u(this.width,this.height)},toArray:function(e){var t=C(e),i=t?D(this.width,e):this.width,n=t?D(this.height,e):this.height;return[i,n]}}),o(u.fn,["width","height"]),w(u.fn,k),u.create=function(e,t){return C(e)?e instanceof u?e:1===arguments.length&&2===e.length?new u(e[0],e[1]):new u(e,t):void 0},u.ZERO=new u(0,0),h=b.extend({init:function(e,t){this.setOrigin(e||new I),this.setSize(t||new u)},clone:function(){return new h(this.origin.clone(),this.size.clone())},equals:function(e){return e&&e.origin.equals(this.origin)&&e.size.equals(this.size)},setOrigin:function(e){return this._observerField("origin",I.create(e)),this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(e){return this._observerField("size",u.create(e)),this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(e){var t=this.topLeft().transformCopy(e),i=this.topRight().transformCopy(e),n=this.bottomRight().transformCopy(e),r=this.bottomLeft().transformCopy(e);return h.fromPoints(t,i,n,r)}}),w(h.fn,k),h.fromPoints=function(){var e=I.min.apply(this,arguments),t=I.max.apply(this,arguments),i=new u(t.x-e.x,t.y-e.y);return new h(e,i)},h.union=function(e,t){return h.fromPoints(I.min(e.topLeft(),t.topLeft()),I.max(e.bottomRight(),t.bottomRight()))},h.intersect=function(e,t){return e={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y},t={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},t.right>=e.left&&e.right>=t.left&&t.bottom>=e.top&&e.bottom>=t.top?h.fromPoints(new I(v.max(e.left,t.left),v.max(e.top,t.top)),new I(v.min(e.right,t.right),v.min(e.bottom,t.bottom))):void 0},p=b.extend({init:function(e,t){this.setCenter(e||new I),this.setRadius(t||0)},setCenter:function(e){return this._observerField("center",I.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new p(this.center.clone(),this.radius)},pointAt:function(e){return this._pointAt(S(e))},bbox:function(e){var t,i,r,o,s=I.maxPoint(),a=I.minPoint(),l=n(this.center,this.radius,this.radius,e);for(t=0;4>t;t++)i=this._pointAt(l.x+t*M).transformCopy(e),r=this._pointAt(l.y+t*M).transformCopy(e),o=new I(i.x,r.y),s=I.min(s,o),a=I.max(a,o);return h.fromPoints(s,a)},_pointAt:function(e){var t=this.center,i=this.radius;return new I(t.x-i*v.cos(e),t.y-i*v.sin(e))}}),o(p.fn,["radius"]),w(p.fn,k),f=b.extend({init:function(e,t){this.setCenter(e||new I),t=t||{},this.radiusX=t.radiusX,this.radiusY=t.radiusY||t.radiusX,this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.anticlockwise=t.anticlockwise||!1},clone:function(){return new f(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(e){return this._observerField("center",I.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:45,pointAt:function(e){var t=this.center,i=S(e);return new I(t.x+this.radiusX*v.cos(i),t.y+this.radiusY*v.sin(i))},curvePoints:function(){var e,t,i,n=this.startAngle,r=this.anticlockwise?-1:1,o=[this.pointAt(n)],s=n,a=this._arcInterval(),l=a.endAngle-a.startAngle,c=v.ceil(l/this.MAX_INTERVAL),d=l/c;for(e=1;c>=e;e++)t=s+r*d,i=this._intervalCurvePoints(s,t),o.push(i.cp1,i.cp2,i.p2),s=t;return o},bbox:function(e){for(var t,i,o=this,s=o._arcInterval(),a=s.startAngle,l=s.endAngle,c=n(this.center,this.radiusX,this.radiusY,e),d=T(c.x),u=T(c.y),p=o.pointAt(a).transformCopy(e),f=o.pointAt(l).transformCopy(e),m=I.min(p,f),g=I.max(p,f),v=r(d,a),y=r(u,a);l>v||l>y;)l>v&&(t=o.pointAt(v).transformCopy(e),v+=90),l>y&&(i=o.pointAt(y).transformCopy(e),y+=90),p=new I(t.x,i.y),m=I.min(m,p),g=I.max(g,p);return h.fromPoints(m,g)},_arcInterval:function(){var e,t=this.startAngle,i=this.endAngle,n=this.anticlockwise;return n&&(e=t,t=i,i=e),(t>i||n&&t===i)&&(i+=360),{startAngle:t,endAngle:i}},_intervalCurvePoints:function(e,t){var i=this,n=i.pointAt(e),r=i.pointAt(t),o=i._derivativeAt(e),s=i._derivativeAt(t),a=(S(t)-S(e))/3,l=new I(n.x+a*o.x,n.y+a*o.y),c=new I(r.x-a*s.x,r.y-a*s.y);return{p1:n,cp1:l,cp2:c,p2:r}},_derivativeAt:function(e){var t=this,i=S(e);return new I(-t.radiusX*v.sin(i),t.radiusY*v.cos(i))}}),o(f.fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),w(f.fn,k),f.fromPoints=function(e,t,i,n,r,o){var s=d(e.x,e.y,t.x,t.y,i,n,r,o);return new f(s.center,{startAngle:s.startAngle,endAngle:s.endAngle,radiusX:i,radiusY:n,anticlockwise:0===o})},m=b.extend({init:function(e,t,i,n,r,o){this.a=e||0,this.b=t||0,this.c=i||0,this.d=n||0,this.e=r||0,this.f=o||0},multiplyCopy:function(e){return new m(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},clone:function(){return new m(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(e){return!!e&&(this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f)},round:function(e){return this.a=D(this.a,e),this.b=D(this.b,e),this.c=D(this.c,e),this.d=D(this.d,e),this.e=D(this.e,e),this.f=D(this.f,e),this},toArray:function(e){var t,i=[this.a,this.b,this.c,this.d,this.e,this.f];if(C(e))for(t=0;i.length>t;t++)i[t]=D(i[t],e);return i}}),m.fn.toString=function(e,t){return this.toArray(e).join(t||",")},m.translate=function(e,t){return new m(1,0,0,1,e,t)},m.unit=function(){return new m(1,0,0,1,0,0)},m.rotate=function(e,t,i){var n=new m;return n.a=v.cos(S(e)),n.b=v.sin(S(e)),n.c=-n.b,n.d=n.a,n.e=t-t*n.a+i*n.b||0,n.f=i-i*n.a-t*n.b||0,n},m.scale=function(e,t){return new m(e,0,0,t,0,0)},m.IDENTITY=m.unit(),g=b.extend({init:function(e){this._matrix=e||m.unit()},clone:function(){return new g(this._matrix.clone())},equals:function(e){return e&&e._matrix.equals(this._matrix)},_optionsChange:function(){this.optionsChange({field:"transform",value:this})},translate:function(e,t){return this._matrix=this._matrix.multiplyCopy(m.translate(e,t)),this._optionsChange(),this},scale:function(e,t,i){return C(t)||(t=e),i&&(i=I.create(i),this._matrix=this._matrix.multiplyCopy(m.translate(i.x,i.y))),this._matrix=this._matrix.multiplyCopy(m.scale(e,t)),i&&(this._matrix=this._matrix.multiplyCopy(m.translate(-i.x,-i.y))),this._optionsChange(),this},rotate:function(e,t){return t=I.create(t)||I.ZERO,this._matrix=this._matrix.multiplyCopy(m.rotate(e,t.x,t.y)),this._optionsChange(),this},multiply:function(e){var t=i(e);return this._matrix=this._matrix.multiplyCopy(t),this._optionsChange(),this},matrix:function(){return this._matrix}}),w(g.fn,k),w(_,{geometry:{Arc:f,Circle:p,Matrix:m,Point:I,Rect:h,Size:u,Transformation:g,transform:t,toMatrix:i}}),_.dataviz.geometry=_.geometry}(window.kendo.jQuery),function(e){var t,i,n,r=e.noop,o=Object.prototype.toString,s=window.kendo,a=s.Class,l=s.ui.Widget,c=s.deepExtend,d=s.util,u=d.defined,h=s.Observable.extend({init:function(t,i){s.Observable.fn.init.call(this),this.options=c({},this.options,i),this.bind(this.events,this.options),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this.element=e(t),this.options.width&&this.element.css("width",this.options.width),this.options.height&&this.element.css("height",this.options.height)},options:{},events:["click","mouseenter","mouseleave","resize"],draw:r,clear:r,destroy:r,resize:l.fn.resize,size:l.fn.size,getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(e){this.element.css({width:e.width,height:e.height}),this._size=e,this._resize()},eventTarget:function(t){for(var i,n=e(t.touch?t.touch.initialTouch:t.target);!i&&n.length>0&&(i=n[0]._kendoNode,!n.is(this.element)&&0!==n.length);)n=n.parent();return i?i.srcElement:void 0},_resize:r,_handler:function(e){var t=this;return function(i){var n=t.eventTarget(i);n&&t.trigger(e,{element:n,originalEvent:i})}}});h.create=function(e,t){return n.current.create(e,t)},t=a.extend({init:function(e){this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())},destroy:function(){var e,t;for(this.srcElement&&this.srcElement.removeObserver(this),e=this.childNodes,t=0;e.length>t;t++)this.childNodes[t].destroy();this.parent=null},load:r,observe:function(){this.srcElement&&this.srcElement.addObserver(this)},append:function(e){this.childNodes.push(e),e.parent=this},insertAt:function(e,t){this.childNodes.splice(t,0,e),e.parent=this},remove:function(e,t){var i,n=e+t;for(i=e;n>i;i++)this.childNodes[i].removeSelf();this.childNodes.splice(e,t)},removeSelf:function(){this.clear(),this.destroy();
},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(e){"add"===e.action?this.load(e.items,e.index):"remove"===e.action&&this.remove(e.index,e.items.length),this.invalidate()}}),i=a.extend({init:function(e,t){var i,n;this.prefix=t||"";for(i in e)n=e[i],n=this._wrap(n,i),this[i]=n},get:function(e){return s.getter(e,!0)(this)},set:function(e,t){var i,n=s.getter(e,!0)(this);n!==t&&(i=this._set(e,this._wrap(t,e)),i||this.optionsChange({field:this.prefix+e,value:t}))},_set:function(e,t){var n,r,o,a=e.indexOf(".")>=0;if(a)for(n=e.split("."),r="";n.length>1;){if(r+=n.shift(),o=s.getter(r,!0)(this),o||(o=new i({},r+"."),o.addObserver(this),this[r]=o),o instanceof i)return o.set(n.join("."),t),a;r+="."}return this._clear(e),s.setter(e)(this,t),a},_clear:function(e){var t=s.getter(e,!0)(this);t&&t.removeObserver&&t.removeObserver(this)},_wrap:function(e,t){var n=o.call(e);return null!==e&&u(e)&&"[object Object]"===n&&(e instanceof i||e instanceof a||(e=new i(e,this.prefix+t+".")),e.addObserver(this)),e}}),c(i.fn,s.mixins.ObserversMixin),n=function(){this._items=[]},n.prototype={register:function(e,t,i){var n=this._items,r=n[0],o={name:e,type:t,order:i};!r||r.order>i?n.unshift(o):n.push(o)},create:function(e,t){var i,n,r=this._items,o=r[0];if(t&&t.type)for(i=t.type.toLowerCase(),n=0;r.length>n;n++)if(r[n].name===i){o=r[n];break}return o?new o.type(e,t):void s.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The Kendo UI scripts are not fully loaded")}},n.current=new n,c(s,{drawing:{DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Color:s.Color,BaseNode:t,OptionsStore:i,Surface:h,SurfaceFactory:n}}),s.dataviz.drawing=s.drawing}(window.kendo.jQuery),function(){var e=window.kendo,t=e.deepExtend,i=e.util.defined,n="gradient",r={extend:function(e){e.fill=this.fill,e.stroke=this.stroke},fill:function(e,t){var r,o=this.options;return i(e)?(e&&e.nodeType!=n?(r={color:e},i(t)&&(r.opacity=t),o.set("fill",r)):o.set("fill",e),this):o.get("fill")},stroke:function(e,t,n){return i(e)?(this.options.set("stroke.color",e),i(t)&&this.options.set("stroke.width",t),i(n)&&this.options.set("stroke.opacity",n),this):this.options.get("stroke")}},o={extend:function(e,t){e.traverse=function(e){var i,n,r=this[t];for(i=0;r.length>i;i++)n=r[i],n.traverse?n.traverse(e):e(n);return this}}};t(e.drawing,{mixins:{Paintable:r,Traversable:o}})}(window.kendo.jQuery),function(e){function t(e,t){return d.current.measure(e,t)}var i=document,n=window.kendo,r=n.Class,o=n.deepExtend,s=n.util,a=s.defined,l=1,c=r.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var i=this,n=i._map,r={key:e,value:t};n[e]=r,i._head?(i._tail.newer=r,r.older=i._tail,i._tail=r):i._head=i._tail=r,i._length>=i._size?(n[i._head.key]=null,i._head=i._head.newer,i._head.older=null):i._length++},get:function(e){var t=this,i=t._map[e];return i?(i===t._head&&i!==t._tail&&(t._head=i.newer,t._head.older=null),i!==t._tail&&(i.older&&(i.older.newer=i.newer,i.newer.older=i.older),i.older=t._tail,i.newer=null,t._tail.newer=i,t._tail=i),i.value):void 0}}),d=r.extend({init:function(){this._cache=new c(1e3)},measure:function(e,t){var n,r,o,c,d,u=s.objectKey(t),h=s.hashKey(e+u),p=this._cache.get(h);if(p)return p;n={width:0,height:0,baseline:0},r=this._measureBox,o=this._baselineMarker.cloneNode(!1);for(c in t)d=t[c],a(d)&&(r.style[c]=d);return r.innerHTML=e,r.appendChild(o),i.body.appendChild(r),(e+"").length&&(n.width=r.offsetWidth-l,n.height=r.offsetHeight,n.baseline=o.offsetTop+l),this._cache.put(h,n),r.parentNode.removeChild(r),n}});d.fn._baselineMarker=e("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+l+"px; height: "+l+"px;overflow: hidden;' />")[0],d.fn._measureBox=e("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space:nowrap !important;' />")[0],d.current=new d,o(n.drawing,{util:{TextMetrics:d,LRUCache:c,measureText:t}})}(window.kendo.jQuery),function(e){function t(e,t,i){var n,r,o,s;for(r=0;e.length>r;r++)o=e[r],o.visible()&&(s=t?o.bbox(i):o.rawBBox(),s&&(n=n?E.union(n,s):s));return n}function i(e,t,i){var n,r,o,s;for(r=0;e.length>r;r++)o=e[r],o.visible()&&(s=t?o.clippedBBox(i):o.rawBBox(),s&&(n=n?E.union(n,s):s));return n}function n(e,t){e.origin.x-=t,e.origin.y-=t,e.size.width+=2*t,e.size.height+=2*t}function r(e,t){for(var i=0;t.length>i;i++)e[t[i]]=o(t[i])}function o(e){var t="_"+e;return function(e){return B(e)?(this._observerField(t,e),this.geometryChange(),this):this[t]}}function s(e,t){for(var i=0;t.length>i;i++)e[t[i]]=a(t[i])}function a(e){var t="_"+e;return function(e){return B(e)?(this._observerField(t,A.create(e)),this.geometryChange(),this):this[t]}}function l(e,t){for(var i=0;t.length>i;i++)e[t[i]]=c(t[i])}function c(e){return function(t){return B(t)?(this.options.set(e,t),this):this.options.get(e)}}var d,u,h,p,f,m,g,v,y,_,b,w,k,x,C,S=window.kendo,T=S.Class,D=S.deepExtend,M=S.geometry,A=M.Point,E=M.Rect,I=M.Size,P=M.Matrix,F=M.toMatrix,z=S.drawing,H=z.OptionsStore,R=Math,N=R.pow,$=S.util,O=$.append,L=$.arrayLimits,B=$.defined,U=$.last,V=$.valueOrDefault,W=S.mixins.ObserversMixin,j=e.inArray,q=[].push,G=[].pop,Y=[].splice,Q=[].shift,K=[].slice,X=[].unshift,Z=T.extend({nodeType:"Element",init:function(e){this._initOptions(e)},_initOptions:function(e){var t,i;e=e||{},t=e.transform,i=e.clip,t&&(e.transform=M.transform(t)),i&&!i.id&&(i.id=S.guid()),this.options=new H(e),this.options.addObserver(this)},transform:function(e){return B(e)?void this.options.set("transform",M.transform(e)):this.options.get("transform")},parentTransform:function(){for(var e,t,i=this;i.parent;)i=i.parent,e=i.transform(),e&&(t=e.matrix().multiplyCopy(t||P.unit()));return t?M.transform(t):void 0},currentTransform:function(e){var t,i,n=this.transform(),r=F(n);return B(e)||(e=this.parentTransform()),t=F(e),i=r&&t?t.multiplyCopy(r):r||t,i?M.transform(i):void 0},visible:function(e){return B(e)?(this.options.set("visible",e),this):this.options.get("visible")!==!1},clip:function(e){var t=this.options;return B(e)?(e&&!e.id&&(e.id=S.guid()),t.set("clip",e),this):t.get("clip")},opacity:function(e){return B(e)?(this.options.set("opacity",e),this):V(this.options.get("opacity"),1)},clippedBBox:function(e){var t,i=this._clippedBBox(e);return i?(t=this.clip(),t?E.intersect(i,t.bbox(e)):i):void 0},_clippedBBox:function(e){return this.bbox(e)}});D(Z.fn,W),d=T.extend({init:function(e){e=e||[],this.length=0,this._splice(0,e.length,e)},elements:function(e){return e?(this._splice(0,this.length,e),this._change(),this):this.slice(0)},push:function(){var e=arguments,t=q.apply(this,e);return this._add(e),t},slice:K,pop:function(){var e=this.length,t=G.apply(this);return e&&this._remove([t]),t},splice:function(e,t){var i=K.call(arguments,2),n=this._splice(e,t,i);return this._change(),n},shift:function(){var e=this.length,t=Q.apply(this);return e&&this._remove([t]),t},unshift:function(){var e=arguments,t=X.apply(this,e);return this._add(e),t},indexOf:function(e){var t,i,n=this;for(t=0,i=n.length;i>t;t++)if(n[t]===e)return t;return-1},_splice:function(e,t,i){var n=Y.apply(this,[e,t].concat(i));return this._clearObserver(n),this._setObserver(i),n},_add:function(e){this._setObserver(e),this._change()},_remove:function(e){this._clearObserver(e),this._change()},_setObserver:function(e){for(var t=0;e.length>t;t++)e[t].addObserver(this)},_clearObserver:function(e){for(var t=0;e.length>t;t++)e[t].removeObserver(this)},_change:function(){}}),D(d.fn,W),u=Z.extend({nodeType:"Group",init:function(e){Z.fn.init.call(this,e),this.children=[]},childrenChange:function(e,t,i){this.trigger("childrenChange",{action:e,items:t,index:i})},append:function(){return O(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},insertAt:function(e,t){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},remove:function(e){var t=j(e,this.children);return t>=0&&(this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)),this},removeAt:function(e){if(e>=0&&this.children.length>e){var t=this.children[e];this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)}return this},clear:function(){var e=this.children;return this.children=[],this._reparent(e,null),this.childrenChange("remove",e,0),this},bbox:function(e){return t(this.children,!0,this.currentTransform(e))},rawBBox:function(){return t(this.children,!1)},_clippedBBox:function(e){return i(this.children,this.currentTransform(e))},currentTransform:function(e){return Z.fn.currentTransform.call(this,e)||null},_reparent:function(e,t){var i,n,r;for(i=0;e.length>i;i++)n=e[i],r=n.parent,r&&r!=this&&r.remove&&r.remove(n),n.parent=t}}),z.mixins.Traversable.extend(u.fn,"children"),h=Z.extend({nodeType:"Text",init:function(e,t,i){Z.fn.init.call(this,i),this.content(e),this.position(t||new M.Point),this.options.font||(this.options.font="12px sans-serif"),B(this.options.fill)||this.fill("#000")},content:function(e){return B(e)?(this.options.set("content",e),this):this.options.get("content")},measure:function(){var e=z.util.measureText(this.content(),{font:this.options.get("font")});return e},rect:function(){var e=this.measure(),t=this.position().clone();return new M.Rect(t,[e.width,e.height])},bbox:function(e){var t=F(this.currentTransform(e));return this.rect().bbox(t)},rawBBox:function(){return this.rect().bbox()}}),z.mixins.Paintable.extend(h.fn),s(h.fn,["position"]),p=Z.extend({nodeType:"Circle",init:function(e,t){Z.fn.init.call(this,t),this.geometry(e||new M.Circle),B(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=F(this.currentTransform(e)),i=this._geometry.bbox(t),r=this.options.get("stroke.width");return r&&n(i,r/2),i},rawBBox:function(){return this._geometry.bbox()}}),z.mixins.Paintable.extend(p.fn),r(p.fn,["geometry"]),f=Z.extend({nodeType:"Arc",init:function(e,t){Z.fn.init.call(this,t),this.geometry(e||new M.Arc),B(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=F(this.currentTransform(e)),i=this.geometry().bbox(t),r=this.options.get("stroke.width");return r&&n(i,r/2),i},rawBBox:function(){return this.geometry().bbox()},toPath:function(){var e,t=new v,i=this.geometry().curvePoints();if(i.length>0)for(t.moveTo(i[0].x,i[0].y),e=1;i.length>e;e+=3)t.curveTo(i[e],i[e+1],i[e+2]);return t}}),z.mixins.Paintable.extend(f.fn),r(f.fn,["geometry"]),m=d.extend({_change:function(){this.geometryChange()}}),g=T.extend({init:function(e,t,i){this.anchor(e||new A),this.controlIn(t),this.controlOut(i)},bboxTo:function(e,t){var i,n=this.anchor().transformCopy(t),r=e.anchor().transformCopy(t);return i=this.controlOut()&&e.controlIn()?this._curveBoundingBox(n,this.controlOut().transformCopy(t),e.controlIn().transformCopy(t),r):this._lineBoundingBox(n,r)},_lineBoundingBox:function(e,t){return E.fromPoints(e,t)},_curveBoundingBox:function(e,t,i,n){var r=[e,t,i,n],o=this._curveExtremesFor(r,"x"),s=this._curveExtremesFor(r,"y"),a=L([o.min,o.max,e.x,n.x]),l=L([s.min,s.max,e.y,n.y]);return E.fromPoints(new A(a.min,l.min),new A(a.max,l.max))},_curveExtremesFor:function(e,t){var i=this._curveExtremes(e[0][t],e[1][t],e[2][t],e[3][t]);return{min:this._calculateCurveAt(i.min,t,e),max:this._calculateCurveAt(i.max,t,e)}},_calculateCurveAt:function(e,t,i){var n=1-e;return N(n,3)*i[0][t]+3*N(n,2)*e*i[1][t]+3*N(e,2)*n*i[2][t]+N(e,3)*i[3][t]},_curveExtremes:function(e,t,i,n){var r,o,s=e-3*t+3*i-n,a=-2*(e-2*t+i),l=e-t,c=R.sqrt(a*a-4*s*l),d=0,u=1;return 0===s?0!==a&&(d=u=-l/a):isNaN(c)||(d=(-a+c)/(2*s),u=(-a-c)/(2*s)),r=R.max(R.min(d,u),0),(0>r||r>1)&&(r=0),o=R.min(R.max(d,u),1),(o>1||0>o)&&(o=1),{min:r,max:o}}}),s(g.fn,["anchor","controlIn","controlOut"]),D(g.fn,W),v=Z.extend({nodeType:"Path",init:function(e){Z.fn.init.call(this,e),this.segments=new m,this.segments.addObserver(this),B(this.options.stroke)||(this.stroke("#000"),B(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))},moveTo:function(e,t){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(e,t),this},lineTo:function(e,t){var i=B(t)?new A(e,t):e,n=new g(i);return this.segments.push(n),this},curveTo:function(e,t,i){var n,r;return this.segments.length>0&&(n=U(this.segments),r=new g(i,t),this.suspend(),n.controlOut(e),this.resume(),this.segments.push(r)),this},arc:function(e,t,i,n,r){var o,s,a,l,c;return this.segments.length>0&&(o=U(this.segments),s=o.anchor(),a=$.rad(e),l=new A(s.x-i*R.cos(a),s.y-n*R.sin(a)),c=new M.Arc(l,{startAngle:e,endAngle:t,radiusX:i,radiusY:n,anticlockwise:r}),this._addArcSegments(c)),this},arcTo:function(e,t,i,n,r){var o,s,a;return this.segments.length>0&&(o=U(this.segments),s=o.anchor(),a=M.Arc.fromPoints(s,e,t,i,n,r),this._addArcSegments(a)),this},_addArcSegments:function(e){var t,i;for(this.suspend(),t=e.curvePoints(),i=1;t.length>i;i+=3)this.curveTo(t[i],t[i+1],t[i+2]);this.resume(),this.geometryChange()},close:function(){return this.options.closed=!0,this.geometryChange(),this},bbox:function(e){var t=F(this.currentTransform(e)),i=this._bbox(t),r=this.options.get("stroke.width");return r&&n(i,r/2),i},rawBBox:function(){return this._bbox()},_bbox:function(e){var t,i,n,r,o=this.segments,s=o.length;if(1===s)i=o[0].anchor().transformCopy(e),t=new E(i,I.ZERO);else if(s>0)for(n=1;s>n;n++)r=o[n-1].bboxTo(o[n],e),t=t?E.union(t,r):r;return t}}),z.mixins.Paintable.extend(v.fn),v.fromRect=function(e,t){return new v(t).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close()},v.fromPoints=function(e,t){var i,n,r;if(e){for(i=new v(t),n=0;e.length>n;n++)r=A.create(e[n]),r&&(0===n?i.moveTo(r):i.lineTo(r));return i}},v.fromArc=function(e,t){var i=new v(t),n=e.startAngle,r=e.pointAt(n);return i.moveTo(r.x,r.y),i.arc(n,e.endAngle,e.radiusX,e.radiusY,e.anticlockwise),i},y=Z.extend({nodeType:"MultiPath",init:function(e){Z.fn.init.call(this,e),this.paths=new m,this.paths.addObserver(this),B(this.options.stroke)||this.stroke("#000")},moveTo:function(e,t){var i=new v;return i.moveTo(e,t),this.paths.push(i),this},lineTo:function(e,t){return this.paths.length>0&&U(this.paths).lineTo(e,t),this},curveTo:function(e,t,i){return this.paths.length>0&&U(this.paths).curveTo(e,t,i),this},arc:function(e,t,i,n,r){return this.paths.length>0&&U(this.paths).arc(e,t,i,n,r),this},arcTo:function(e,t,i,n,r){return this.paths.length>0&&U(this.paths).arcTo(e,t,i,n,r),this},close:function(){return this.paths.length>0&&U(this.paths).close(),this},bbox:function(e){return t(this.paths,!0,this.currentTransform(e))},rawBBox:function(){return t(this.paths,!1)},_clippedBBox:function(e){return i(this.paths,this.currentTransform(e))}}),z.mixins.Paintable.extend(y.fn),_=Z.extend({nodeType:"Image",init:function(e,t,i){Z.fn.init.call(this,i),this.src(e),this.rect(t||new M.Rect)},src:function(e){return B(e)?(this.options.set("src",e),this):this.options.get("src")},bbox:function(e){var t=F(this.currentTransform(e));return this._rect.bbox(t)},rawBBox:function(){return this._rect.bbox()}}),r(_.fn,["rect"]),b=T.extend({init:function(e,t,i){this.options=new H({offset:e,color:t,opacity:B(i)?i:1}),this.options.addObserver(this)}}),l(b.fn,["offset","color","opacity"]),D(b.fn,W),b.create=function(e){if(B(e)){var t;return t=e instanceof b?e:e.length>1?new b(e[0],e[1],e[2]):new b(e.offset,e.color,e.opacity)}},w=d.extend({_change:function(){this.optionsChange({field:"stops"})}}),k=T.extend({nodeType:"gradient",init:function(e){this.stops=new w(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=S.guid()},userSpace:function(e){return B(e)?(this._userSpace=e,this.optionsChange(),this):this._userSpace},_createStops:function(e){var t,i=[];for(e=e||[],t=0;e.length>t;t++)i.push(b.create(e[t]));return i},addStop:function(e,t,i){this.stops.push(new b(e,t,i))},removeStop:function(e){var t=this.stops.indexOf(e);t>=0&&this.stops.splice(t,1)}}),D(k.fn,W,{optionsChange:function(e){this.trigger("optionsChange",{field:"gradient"+(e?"."+e.field:""),value:this})},geometryChange:function(){this.optionsChange()}}),x=k.extend({init:function(e){e=e||{},k.fn.init.call(this,e),this.start(e.start||new A),this.end(e.end||new A(1,0))}}),s(x.fn,["start","end"]),C=k.extend({init:function(e){e=e||{},k.fn.init.call(this,e),this.center(e.center||new A),this._radius=B(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill},radius:function(e){return B(e)?(this._radius=e,this.geometryChange(),this):this._radius},fallbackFill:function(e){return B(e)?(this._fallbackFill=e,this.optionsChange(),this):this._fallbackFill}}),s(C.fn,["center"]),D(z,{Arc:f,Circle:p,Element:Z,ElementsArray:d,Gradient:k,GradientStop:b,Group:u,Image:_,LinearGradient:x,MultiPath:y,Path:v,RadialGradient:C,Segment:g,Text:h})}(window.kendo.jQuery),function(e){function t(e){var t=[];return e.replace(m,function(e,i){t.push(parseFloat(i))}),t}function i(e,t,i){var n,r=t?0:1;for(n=0;e.length>n;n+=2)e.splice(n+r,0,i)}function n(e,t){return e&&t?t.scaleCopy(2).translate(-e.x,-e.y):void 0}function r(e,t,i){var n=1/3;return t=t.clone().scale(2/3),{controlOut:t.clone().translateWith(e.scaleCopy(n)),controlIn:t.translateWith(i.scaleCopy(n))}}var o=window.kendo,s=o.drawing,a=o.geometry,l=o.Class,c=a.Point,d=o.deepExtend,u=e.trim,h=o.util,p=h.last,f=/([a-z]{1})([^a-z]*)(z)?/gi,m=/[,\s]?(-?(?:\d+\.)?\d+)/g,g="m",v="z",y=l.extend({parse:function(e,i){var n,r=new s.MultiPath(i),o=new c;return e.replace(f,function(e,i,s,a){var l=i.toLowerCase(),c=l===i,d=t(u(s));if(l===g&&(c?(o.x+=d[0],o.y+=d[1]):(o.x=d[0],o.y=d[1]),r.moveTo(o.x,o.y),d.length>2&&(l="l",d.splice(0,2))),_[l])_[l](r,{parameters:d,position:o,isRelative:c,previousCommand:n}),a&&a.toLowerCase()===v&&r.close();else if(l!==g)throw Error("Error while parsing SVG path. Unsupported command: "+l);n=l}),r}}),_={l:function(e,t){var i,n,r=t.parameters,o=t.position;for(i=0;r.length>i;i+=2)n=new c(r[i],r[i+1]),t.isRelative&&n.translateWith(o),e.lineTo(n.x,n.y),o.x=n.x,o.y=n.y},c:function(e,t){var i,n,r,o,s=t.parameters,a=t.position;for(o=0;s.length>o;o+=6)i=new c(s[o],s[o+1]),n=new c(s[o+2],s[o+3]),r=new c(s[o+4],s[o+5]),t.isRelative&&(n.translateWith(a),i.translateWith(a),r.translateWith(a)),e.curveTo(i,n,r),a.x=r.x,a.y=r.y},v:function(e,t){var n=t.isRelative?0:t.position.x;i(t.parameters,!0,n),this.l(e,t)},h:function(e,t){var n=t.isRelative?0:t.position.y;i(t.parameters,!1,n),this.l(e,t)},a:function(e,t){var i,n,r,o,s,a,l=t.parameters,d=t.position;for(i=0;l.length>i;i+=7)n=l[i],r=l[i+1],o=l[i+3],s=l[i+4],a=new c(l[i+5],l[i+6]),t.isRelative&&a.translateWith(d),e.arcTo(a,n,r,o,s),d.x=a.x,d.y=a.y},s:function(e,t){var i,r,o,s,a,l=t.parameters,d=t.position,u=t.previousCommand;for(("s"==u||"c"==u)&&(s=p(p(e.paths).segments).controlIn()),a=0;l.length>a;a+=4)o=new c(l[a],l[a+1]),r=new c(l[a+2],l[a+3]),t.isRelative&&(o.translateWith(d),r.translateWith(d)),i=s?n(s,d):d.clone(),s=o,e.curveTo(i,o,r),d.x=r.x,d.y=r.y},q:function(e,t){var i,n,o,s,a=t.parameters,l=t.position;for(s=0;a.length>s;s+=4)o=new c(a[s],a[s+1]),n=new c(a[s+2],a[s+3]),t.isRelative&&(o.translateWith(l),n.translateWith(l)),i=r(l,o,n),e.curveTo(i.controlOut,i.controlIn,n),l.x=n.x,l.y=n.y},t:function(e,t){var i,o,s,a,l,d=t.parameters,u=t.position,h=t.previousCommand;for(("q"==h||"t"==h)&&(a=p(p(e.paths).segments),o=a.controlIn().clone().translateWith(u.scaleCopy(-1/3)).scale(1.5)),l=0;d.length>l;l+=2)s=new c(d[l],d[l+1]),t.isRelative&&s.translateWith(u),o=o?n(o,u):u.clone(),i=r(u,o,s),e.curveTo(i.controlOut,i.controlIn,s),u.x=s.x,u.y=s.y}};y.current=new y,s.Path.parse=function(e,t){return y.current.parse(e,t)},d(s,{PathParser:y})}(window.kendo.jQuery),function(e){function t(e){var t,i,n,r;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(e){}t&&(i=-t.e%1,n=-t.f%1,r=e.style,(0!==i||0!==n)&&(r.left=i+"px",r.top=n+"px"))}function i(){var e=document.getElementsByTagName("base")[0],t="",i=document.location.href,n=i.indexOf("#");return e&&!d.support.browser.msie&&(-1!==n&&(i=i.substring(0,n)),t=i),t}function n(e){return"url("+i()+"#"+e+")"}function r(e){var t,i,n,r=new z({encodeText:!0}),o=e.clippedBBox();return o&&(t=o.getOrigin(),i=new p.Group,i.transform(h.transform().translate(-t.x,-t.y)),i.children.push(e),e=i),r.load([e]),n="<?xml version='1.0' ?><svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+A+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+r.render()+"</svg>",r.destroy(),n}function o(t,i){var n=r(t);return i&&i.raw||(n="data:image/svg+xml;base64,"+m.encodeBase64(n)),e.Deferred().resolve(n).promise()}function s(e,t){return"clip"==e||"fill"==e&&(!t||t.nodeType==C)}function a(e){if(!e||!e.indexOf||e.indexOf("&")<0)return e;var t=a._element;return t.innerHTML=e,t.textContent||t.innerText}var l,c=document,d=window.kendo,u=d.deepExtend,h=d.geometry,p=d.drawing,f=p.BaseNode,m=d.util,g=m.defined,v=m.isTransparent,y=m.renderAttr,_=m.renderAllAttr,b=m.renderTemplate,w=e.inArray,k="butt",x=p.DASH_ARRAYS,C="gradient",S="none",T=".kendo",D="solid",M=" ",A="http://www.w3.org/2000/svg",E="transform",I="undefined",P=p.Surface.extend({init:function(e,i){p.Surface.fn.init.call(this,e,i),this._root=new z(this.options),Q(this.element[0],this._template(this)),this._rootElement=this.element[0].firstElementChild,t(this._rootElement),this._root.attachTo(this._rootElement),this.element.on("click"+T,this._click),this.element.on("mouseover"+T,this._mouseenter),this.element.on("mouseout"+T,this._mouseleave),this.resize()},type:"svg",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,this.element.off(T)),p.Surface.fn.destroy.call(this)},translate:function(e){var t=d.format("{0} {1} {2} {3}",Math.round(e.x),Math.round(e.y),this._size.width,this._size.height);this._offset=e,this._rootElement.setAttribute("viewBox",t)},draw:function(e){this._root.load([e])},clear:function(){this._root.clear()},svg:function(){return"<?xml version='1.0' ?>"+this._template(this)},_resize:function(){this._offset&&this.translate(this._offset)},_template:b("<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+A+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>#= d._root.render() #</svg>")}),F=f.extend({init:function(e){f.fn.init.call(this,e),this.definitions={}},destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),f.fn.destroy.call(this)},load:function(e,t){var i,n,r,o,s=this,a=s.element;for(o=0;e.length>o;o++)n=e[o],r=n.children,i=new Y[n.nodeType](n),g(t)?s.insertAt(i,t):s.append(i),i.createDefinitions(),r&&r.length>0&&i.load(r),a&&i.attachTo(a,t)},root:function(){for(var e=this;e.parent;)e=e.parent;return e},attachTo:function(e,t){var i,n=c.createElement("div");Q(n,"<svg xmlns='"+A+"' version='1.1'>"+this.render()+"</svg>"),i=n.firstChild.firstChild,i&&(g(t)?e.insertBefore(i,e.childNodes[t]):e.appendChild(i),this.setElement(i))},setElement:function(e){var t,i,n=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=e,this.element._kendoNode=this,i=0;n.length>i;i++)t=e.childNodes[i],n[i].setElement(t)},clear:function(){var e,t;for(this.clearDefinitions(),this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),f.fn.removeSelf.call(this)},template:b("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var e,t=this.childNodes,i="";for(e=0;t.length>e;e++)i+=t[e].render();return i},optionsChange:function(e){var t=e.field,i=e.value;"visible"===t?this.css("display",i?"":S):l[t]&&s(t,i)?this.updateDefinition(t,i):"opacity"===t&&this.attr("opacity",i),f.fn.optionsChange.call(this,e)},attr:function(e,t){this.element&&this.element.setAttribute(e,t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])},removeAttr:function(e){this.element&&this.element.removeAttribute(e)},mapTransform:function(e){var t=[];return e&&t.push([E,"matrix("+e.matrix().toString(6)+")"]),t},renderTransform:function(){return _(this.mapTransform(this.srcElement.transform()))},transformChange:function(e){e?this.allAttr(this.mapTransform(e)):this.removeAttr(E)},mapStyle:function(){var e=this.srcElement.options,t=[["cursor",e.cursor]];return e.visible===!1&&t.push(["display",S]),t},renderStyle:function(){return y("style",m.renderStyle(this.mapStyle()))},renderOpacity:function(){return y("opacity",this.srcElement.options.opacity)},createDefinitions:function(){var e,t,i,n,r=this.srcElement,o=this.definitions;if(r){i=r.options;for(t in l)e=i.get(t),e&&s(t,e)&&(o[t]=e,n=!0);n&&this.definitionChange({action:"add",definitions:o})}},definitionChange:function(e){this.parent&&this.parent.definitionChange(e)},updateDefinition:function(e,t){var i=this.definitions,r=i[e],o=l[e],s={};r&&(s[e]=r,this.definitionChange({action:"remove",definitions:s}),delete i[e]),t?(s[e]=t,this.definitionChange({action:"add",definitions:s}),i[e]=t,this.attr(o,n(t.id))):r&&this.removeAttr(o)},clearDefinitions:function(){var e,t=this.definitions;for(e in t){this.definitionChange({action:"remove",definitions:t}),this.definitions={};break}},renderDefinitions:function(){return _(this.mapDefinitions())},mapDefinitions:function(){var e,t=this.definitions,i=[];for(e in t)i.push([l[e],n(t[e].id)]);return i}}),z=F.extend({init:function(e){F.fn.init.call(this),this.options=e,this.defs=new H},attachTo:function(e){this.element=e,this.defs.attachTo(e.firstElementChild)},clear:function(){f.fn.clear.call(this)},template:b("#=d.defs.render()##= d.renderChildren() #"),definitionChange:function(e){this.defs.definitionChange(e)}}),H=F.extend({init:function(){F.fn.init.call(this),this.definitionMap={}},attachTo:function(e){this.element=e},template:b("<defs>#= d.renderChildren()#</defs>"),definitionChange:function(e){var t=e.definitions,i=e.action;"add"==i?this.addDefinitions(t):"remove"==i&&this.removeDefinitions(t)},createDefinition:function(e,t){var i;return"clip"==e?i=R:"fill"==e&&(t instanceof p.LinearGradient?i=q:t instanceof p.RadialGradient&&(i=G)),new i(t)},addDefinitions:function(e){for(var t in e)this.addDefinition(t,e[t])},addDefinition:function(e,t){var i,n=this.definitionMap,r=t.id,o=this.element,s=n[r];s?s.count++:(i=this.createDefinition(e,t),n[r]={element:i,count:1},this.append(i),o&&i.attachTo(this.element))},removeDefinitions:function(e){for(var t in e)this.removeDefinition(e[t])},removeDefinition:function(e){var t=this.definitionMap,i=e.id,n=t[i];n&&(n.count--,0===n.count&&(this.remove(w(n.element,this.childNodes),1),delete t[i]))}}),R=F.extend({init:function(e){F.fn.init.call(this),this.srcElement=e,this.id=e.id,this.load([e])},template:b("<clipPath id='#=d.id#'>#= d.renderChildren()#</clipPath>")}),N=F.extend({template:b("<g#= d.renderTransform() + d.renderStyle() + d.renderOpacity() + d.renderDefinitions()#>#= d.renderChildren() #</g>"),optionsChange:function(e){e.field==E&&this.transformChange(e.value),F.fn.optionsChange.call(this,e)}}),$=F.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case E:this.transformChange(e.value);break;default:var t=this.attributeMap[e.field];t&&this.attr(t,e.value)}F.fn.optionsChange.call(this,e)},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},content:function(){this.element&&(this.element.textContent=this.srcElement.content())},renderData:function(){return this.printPath(this.srcElement)},printPath:function(e){var t,i,n,r,o,s=e.segments,a=s.length;if(a>0){for(t=[],o=1;a>o;o++)n=this.segmentType(s[o-1],s[o]),n!==r&&(r=n,t.push(n)),t.push("L"===n?this.printPoints(s[o].anchor()):this.printPoints(s[o-1].controlOut(),s[o].controlIn(),s[o].anchor()));return i="M"+this.printPoints(s[0].anchor())+M+t.join(M),e.options.closed&&(i+="Z"),i}},printPoints:function(){var e,t=arguments,i=t.length,n=[];for(e=0;i>e;e++)n.push(t[e].toString(3));return n.join(M)},segmentType:function(e,t){return e.controlOut()&&t.controlIn()?"C":"L"},mapStroke:function(e){var t=[];return e&&!v(e.color)?(t.push(["stroke",e.color]),t.push(["stroke-width",e.width]),t.push(["stroke-linecap",this.renderLinecap(e)]),t.push(["stroke-linejoin",e.lineJoin]),g(e.opacity)&&t.push(["stroke-opacity",e.opacity]),g(e.dashType)&&t.push(["stroke-dasharray",this.renderDashType(e)])):t.push(["stroke",S]),t},renderStroke:function(){return _(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(e){var t,i,n,r=e.width||1,o=e.dashType;if(o&&o!=D){for(t=x[o.toLowerCase()],i=[],n=0;t.length>n;n++)i.push(t[n]*r);return i.join(" ")}},renderLinecap:function(e){var t=e.dashType,i=e.lineCap;return t&&t!=D?k:i},mapFill:function(e){var t=[];return e&&e.nodeType==C||(e&&!v(e.color)?(t.push(["fill",e.color]),g(e.opacity)&&t.push(["fill-opacity",e.opacity])):t.push(["fill",S])),t},renderFill:function(){return _(this.mapFill(this.srcElement.options.fill))},template:b("<path #= d.renderStyle() # #= d.renderOpacity() # #= kendo.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() #></path>")}),O=$.extend({renderData:function(){return this.printPath(this.srcElement.toPath())}}),L=$.extend({renderData:function(){var e,t,i=this.srcElement.paths;if(i.length>0){for(e=[],t=0;i.length>t;t++)e.push(this.printPath(i[t]));return e.join(" ")}}}),B=$.extend({geometryChange:function(){var e=this.center();this.attr("cx",e.x),this.attr("cy",e.y),this.attr("r",this.radius()),this.invalidate()},center:function(){return this.srcElement.geometry().center},radius:function(){return this.srcElement.geometry().radius},template:b("<circle #= d.renderStyle() # #= d.renderOpacity() # cx='#= d.center().x #' cy='#= d.center().y #' r='#= d.radius() #' #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() # ></circle>")}),U=$.extend({geometryChange:function(){var e=this.pos();this.attr("x",e.x),this.attr("y",e.y),this.invalidate()},optionsChange:function(e){"font"===e.field?(this.attr("style",m.renderStyle(this.mapStyle())),this.geometryChange()):"content"===e.field&&$.fn.content.call(this,this.srcElement.content()),$.fn.optionsChange.call(this,e)},mapStyle:function(){var e=$.fn.mapStyle.call(this),t=this.srcElement.options.font,i=this.root().options;return i&&i.encodeText&&(t=d.htmlEncode(t)),e.push(["font",t]),e},pos:function(){var e=this.srcElement.position(),t=this.srcElement.measure();return e.clone().setY(e.y+t.baseline)},content:function(){var e=this.srcElement.content(),t=this.root().options;return t&&t.encodeText&&(e=a(e),e=d.htmlEncode(e)),e},template:b("<text #= d.renderStyle() # #= d.renderOpacity() # x='#= this.pos().x #' y='#= this.pos().y #' #= d.renderStroke() # #= d.renderTransform() # #= d.renderDefinitions() # #= d.renderFill() #><tspan>#= d.content() #</tspan></text>")}),V=$.extend({geometryChange:function(){this.allAttr(this.mapPosition()),this.invalidate();
},optionsChange:function(e){"src"===e.field&&this.allAttr(this.mapSource()),$.fn.optionsChange.call(this,e)},mapPosition:function(){var e=this.srcElement.rect(),t=e.topLeft();return[["x",t.x],["y",t.y],["width",e.width()+"px"],["height",e.height()+"px"]]},renderPosition:function(){return _(this.mapPosition())},mapSource:function(){return[["xlink:href",this.srcElement.src()]]},renderSource:function(){return _(this.mapSource())},template:b("<image preserveAspectRatio='none' #= d.renderStyle() # #= d.renderTransform()# #= d.renderOpacity() # #= d.renderPosition() # #= d.renderSource() # #= d.renderDefinitions()#></image>")}),W=F.extend({template:b("<stop #=d.renderOffset()# #=d.renderStyle()# />"),renderOffset:function(){return y("offset",this.srcElement.offset())},mapStyle:function(){var e=this.srcElement;return[["stop-color",e.color()],["stop-opacity",e.opacity()]]},optionsChange:function(e){"offset"==e.field?this.attr(e.field,e.value):("color"==e.field||"opacity"==e.field)&&this.css("stop-"+e.field,e.value)}}),j=F.extend({init:function(e){F.fn.init.call(this,e),this.id=e.id,this.loadStops()},loadStops:function(){var e,t,i=this.srcElement,n=i.stops,r=this.element;for(t=0;n.length>t;t++)e=new W(n[t]),this.append(e),r&&e.attachTo(r)},optionsChange:function(e){"gradient.stops"==e.field?(f.fn.clear.call(this),this.loadStops()):e.field==C&&this.allAttr(this.mapCoordinates())},renderCoordinates:function(){return _(this.mapCoordinates())},mapSpace:function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}}),q=j.extend({template:b("<linearGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</linearGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.start(),i=e.end(),n=[["x1",t.x],["y1",t.y],["x2",i.x],["y2",i.y],this.mapSpace()];return n}}),G=j.extend({template:b("<radialGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</radialGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.center(),i=e.radius(),n=[["cx",t.x],["cy",t.y],["r",i],this.mapSpace()];return n}}),Y={Group:N,Text:U,Path:$,MultiPath:L,Circle:B,Arc:O,Image:V},Q=function(e,t){e.innerHTML=t};!function(){var e="<svg xmlns='"+A+"'></svg>",t=c.createElement("div"),i=typeof DOMParser!=I;t.innerHTML=e,i&&t.firstChild.namespaceURI!=A&&(Q=function(e,t){var i=new DOMParser,n=i.parseFromString(t,"text/xml"),r=c.adoptNode(n.documentElement);e.innerHTML="",e.appendChild(r)})}(),a._element=document.createElement("span"),l={clip:"clip-path",fill:"fill"},d.support.svg=function(){return c.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),d.support.svg&&p.SurfaceFactory.current.register("svg",P,10),u(p,{exportSVG:o,svg:{ArcNode:O,CircleNode:B,ClipNode:R,DefinitionNode:H,GradientStopNode:W,GroupNode:N,ImageNode:V,LinearGradientNode:q,MultiPathNode:L,Node:F,PathNode:$,RadialGradientNode:G,RootNode:z,Surface:P,TextNode:U,_exportGroup:r}})}(window.kendo.jQuery),function(e){function t(t,i){var n,r,o,s,a,l,c={width:"800px",height:"600px",cors:"Anonymous"},d=t.clippedBBox();return d&&(n=d.getOrigin(),r=new b.Group,r.transform(_.transform().translate(-n.x,-n.y)),r.children.push(t),t=r,o=d.getSize(),c.width=o.width+"px",c.height=o.height+"px"),i=p(c,i),s=e("<div />").css({display:"none",width:i.width,height:i.height}).appendTo(document.body),a=new T(s,i),a.draw(t),l=a.image(),l.always(function(){a.destroy(),s.remove()}),l}function i(e,t){var i,n,r;for(r=0;t.length>r;r++)n=t[r],i=h.parseColor(n.color()),i.a*=n.opacity(),e.addColorStop(n.offset(),i.toCssRgba())}var n,r,o,s,a,l,c,d,u=document,h=window.kendo,p=h.deepExtend,f=h.util,m=f.defined,g=f.isTransparent,v=f.renderTemplate,y=f.valueOrDefault,_=h.geometry,b=h.drawing,w=b.BaseNode,k="butt",x=b.DASH_ARRAYS,C=1e3/60,S="solid",T=b.Surface.extend({init:function(t,i){b.Surface.fn.init.call(this,t,i),this.element[0].innerHTML=this._template(this);var r=this.element[0].firstElementChild;r.width=e(t).width(),r.height=e(t).height(),this._rootElement=r,this._root=new n(r)},destroy:function(){b.Surface.fn.destroy.call(this),this._root&&(this._root.destroy(),this._root=null)},type:"canvas",draw:function(e){this._root.load([e],void 0,this.options.cors)},clear:function(){this._root.clear()},image:function(){var t,i=this._root,n=this._rootElement,r=[];return i.traverse(function(e){e.loading&&r.push(e.loading)}),t=e.Deferred(),e.when.apply(e,r).done(function(){i._invalidate();try{var e=n.toDataURL();t.resolve(e)}catch(e){t.reject(e)}}).fail(function(e){t.reject(e)}),t.promise()},_resize:function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.invalidate()},_template:v("<canvas style='width: 100%; height: 100%;'></canvas>")}),D=w.extend({init:function(e){w.fn.init.call(this,e),e&&this.initClip()},initClip:function(){var e=this.srcElement.clip();e&&(this.clip=e,e.addObserver(this))},clear:function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),w.fn.clear.call(this)},clearClip:function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},setClip:function(e){this.clip&&(e.beginPath(),r.fn.renderPoints(e,this.clip),e.clip())},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip()),w.fn.optionsChange.call(this,e)},setTransform:function(e){if(this.srcElement){var t=this.srcElement.transform();t&&e.transform.apply(e,t.matrix().toArray(6))}},load:function(e,t,i){var n,r,o,s,a=this;for(s=0;e.length>s;s++)r=e[s],o=r.children,n=new d[r.nodeType](r,i),o&&o.length>0&&n.load(o,t,i),m(t)?a.insertAt(n,t):a.append(n);a.invalidate()},setOpacity:function(e){if(this.srcElement){var t=this.srcElement.opacity();m(t)&&this.globalAlpha(e,t)}},globalAlpha:function(e,t){t&&e.globalAlpha&&(t*=e.globalAlpha),e.globalAlpha=t}}),M=D.extend({renderTo:function(e){var t,i=this.childNodes;for(e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),t=0;i.length>t;t++)i[t].renderTo(e);e.restore()}});b.mixins.Traversable.extend(M.fn,"childNodes"),n=M.extend({init:function(t){M.fn.init.call(this),this.canvas=t,this.ctx=t.getContext("2d"),this.invalidate=h.throttle(e.proxy(this._invalidate,this),C)},destroy:function(){M.fn.destroy.call(this),this.canvas=null,this.ctx=null},_invalidate:function(){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx))}}),b.mixins.Traversable.extend(n.fn,"childNodes"),r=D.extend({renderTo:function(e){e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),this.renderPoints(e,this.srcElement),this.setLineDash(e),this.setLineCap(e),this.setLineJoin(e),this.setFill(e),this.setStroke(e),e.restore()},setFill:function(e){var t=this.srcElement.options.fill,i=!1;return t&&("gradient"==t.nodeType?(this.setGradientFill(e,t),i=!0):g(t.color)||(e.fillStyle=t.color,e.save(),this.globalAlpha(e,t.opacity),e.fill(),e.restore(),i=!0)),i},setGradientFill:function(e,t){var n,r,o,s,a=this.srcElement.rawBBox();t instanceof b.LinearGradient?(r=t.start(),o=t.end(),n=e.createLinearGradient(r.x,r.y,o.x,o.y)):t instanceof b.RadialGradient&&(s=t.center(),n=e.createRadialGradient(s.x,s.y,0,s.x,s.y,t.radius())),i(n,t.stops),e.save(),t.userSpace()||e.transform(a.width(),0,0,a.height(),a.origin.x,a.origin.y),e.fillStyle=n,e.fill(),e.restore()},setStroke:function(e){var t=this.srcElement.options.stroke;return t&&!g(t.color)?(e.strokeStyle=t.color,e.lineWidth=y(t.width,1),e.save(),this.globalAlpha(e,t.opacity),e.stroke(),e.restore(),!0):void 0},dashType:function(){var e=this.srcElement.options.stroke;return e&&e.dashType?e.dashType.toLowerCase():void 0},setLineDash:function(e){var t,i=this.dashType();i&&i!=S&&(t=x[i],e.setLineDash?e.setLineDash(t):(e.mozDash=t,e.webkitLineDash=t))},setLineCap:function(e){var t=this.dashType(),i=this.srcElement.options.stroke;t&&t!==S?e.lineCap=k:i&&i.lineCap&&(e.lineCap=i.lineCap)},setLineJoin:function(e){var t=this.srcElement.options.stroke;t&&t.lineJoin&&(e.lineJoin=t.lineJoin)},renderPoints:function(e,t){var i,n,r,o,s,a,l=t.segments;if(0!==l.length){for(i=l[0],n=i.anchor(),e.moveTo(n.x,n.y),r=1;l.length>r;r++)i=l[r],n=i.anchor(),o=l[r-1],s=o.controlOut(),a=i.controlIn(),s&&a?e.bezierCurveTo(s.x,s.y,a.x,a.y,n.x,n.y):e.lineTo(n.x,n.y);t.options.closed&&e.closePath()}}}),o=r.extend({renderPoints:function(e){var t,i=this.srcElement.paths;for(t=0;i.length>t;t++)r.fn.renderPoints(e,i[t])}}),s=r.extend({renderPoints:function(e){var t=this.srcElement.geometry(),i=t.center,n=t.radius;e.arc(i.x,i.y,n,0,2*Math.PI)}}),a=r.extend({renderPoints:function(e){var t=this.srcElement.toPath();r.fn.renderPoints.call(this,e,t)}}),l=r.extend({renderTo:function(e){var t=this.srcElement,i=t.position(),n=t.measure();e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),e.font=t.options.font,this.setFill(e)&&e.fillText(t.content(),i.x,i.y+n.baseline),this.setStroke(e)&&(this.setLineDash(e),e.strokeText(t.content(),i.x,i.y+n.baseline)),e.restore()}}),c=r.extend({init:function(t,i){var n,o;r.fn.init.call(this,t),this.onLoad=e.proxy(this.onLoad,this),this.onError=e.proxy(this.onError,this),n=this.img=new Image,i&&(n.crossOrigin=i),n.onload=this.onLoad,n.onerror=this.onError,o=n.src=t.src(),(n.complete||void 0===n.complete)&&(n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",n.src=o),this.loading=e.Deferred()},renderTo:function(e){"resolved"===this.loading.state()&&(e.save(),this.setTransform(e),this.setClip(e),this.drawImage(e),e.restore())},optionsChange:function(t){"src"===t.field?(this.loading=e.Deferred(),this.img.src=this.srcElement.src()):r.fn.optionsChange.call(this,t)},onLoad:function(){this.loading.resolve(),this.invalidate()},onError:function(){this.loading.reject(Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},drawImage:function(e){var t=this.srcElement.rect(),i=t.topLeft();e.drawImage(this.img,i.x,i.y,t.width(),t.height())}}),d={Group:M,Text:l,Path:r,MultiPath:o,Circle:s,Arc:a,Image:c},h.support.canvas=function(){return!!u.createElement("canvas").getContext}(),h.support.canvas&&b.SurfaceFactory.current.register("canvas",T,20),p(h.drawing,{exportImage:t,canvas:{ArcNode:a,CircleNode:s,GroupNode:M,ImageNode:c,MultiPathNode:o,Node:D,PathNode:r,RootNode:n,Surface:T,TextNode:l}})}(window.kendo.jQuery),function(e){function t(){if(u.namespaces&&!u.namespaces.kvml){u.namespaces.add("kvml","urn:schemas-microsoft-com:vml");var e=u.styleSheets.length>30?u.styleSheets[0]:u.createStyleSheet();e.addRule(".kvml","behavior:url(#default#VML)")}}function i(e){var t=u.createElement("kvml:"+e);return t.className="kvml",t}function n(e){var t,i=e.length,n=[];for(t=0;i>t;t++)n.push(e[t].scaleCopy(I).toString(0,","));return n.join(" ")}function r(e,t){var i,r,s,a,l,c=e.segments,d=c.length;if(d>0){for(i=[],l=1;d>l;l++)s=o(c[l-1],c[l]),s!==a&&(a=s,i.push(s)),i.push(n("l"===s?[c[l].anchor()]:[c[l-1].controlOut(),c[l].controlIn(),c[l].anchor()]));return r="m "+n([c[0].anchor()])+" "+i.join(" "),e.options.closed&&(r+=" x"),t!==!0&&(r+=" e"),r}}function o(e,t){return e.controlOut()&&t.controlIn()?"c":"l"}function s(e){return 0===e.indexOf("fill")||0===e.indexOf(F)}function a(e,t){var i;return i=e?l(e,t.color(),t.opacity()):l(t.color(),"#fff",1-t.opacity())}function l(e,t,i){var n=new k(e),r=new k(t),o=c(n.r,r.r,i),s=c(n.g,r.g,i),a=c(n.b,r.b,i);return new k(o,s,a).toHex()}function c(e,t,i){return h.round(i*t+(1-i)*e)}var d,u=document,h=Math,p=h.atan2,f=h.sqrt,m=window.kendo,g=m.deepExtend,v=e.noop,y=m.drawing,_=y.BaseNode,b=m.geometry,w=b.toMatrix,k=m.Color,x=m.util,C=x.isTransparent,S=x.defined,T=x.deg,D=x.round,M=x.valueOrDefault,A="none",E=".kendo",I=100,P=I*I,F="gradient",z=4,H=y.Surface.extend({init:function(e,i){y.Surface.fn.init.call(this,e,i),t(),this.element.empty(),this._root=new N,this._root.attachTo(this.element[0]),this.element.on("click"+E,this._click),this.element.on("mouseover"+E,this._mouseenter),this.element.on("mouseout"+E,this._mouseleave)},type:"vml",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this.element.off(E)),y.Surface.fn.destroy.call(this)},draw:function(e){this._root.load([e],void 0,null)},clear:function(){this._root.clear()}}),R=_.extend({init:function(e){_.fn.init.call(this,e),this.createElement(),this.attachReference()},observe:v,destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),_.fn.destroy.call(this)},clear:function(){var e,t;for(this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),_.fn.removeSelf.call(this)},createElement:function(){this.element=u.createElement("div")},attachReference:function(){this.element._kendoNode=this},load:function(e,t,i,n){var r,o,s,a,l,c;for(n=M(n,1),this.srcElement&&(n*=M(this.srcElement.options.opacity,1)),r=0;e.length>r;r++)o=e[r],s=o.children,a=o.currentTransform(i),l=n*M(o.options.opacity,1),c=new oe[o.nodeType](o,a,l),s&&s.length>0&&c.load(s,t,a,n),S(t)?this.insertAt(c,t):this.append(c),c.attachTo(this.element,t)},attachTo:function(e,t){S(t)?e.insertBefore(this.element,e.children[t]||null):e.appendChild(this.element)},optionsChange:function(e){"visible"==e.field&&this.css("display",e.value!==!1?"":A)},setStyle:function(){this.allCss(this.mapStyle())},mapStyle:function(){var e=[];return this.srcElement&&this.srcElement.options.visible===!1&&e.push(["display",A]),e},mapOpacityTo:function(e,t){var i=M(this.opacity,1);i*=M(t,1),e.push(["opacity",i])},attr:function(e,t){this.element&&(this.element[e]=t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])}}),N=R.extend({createElement:function(){R.fn.createElement.call(this),this.allCss([["width","100%"],["height","100%"],["position","relative"],["visibility","visible"]])},attachReference:v}),$=m.Class.extend({init:function(e,t){this.srcElement=e,this.observer=t,e.addObserver(this)},geometryChange:function(){this.observer.optionsChange({field:"clip",value:this.srcElement})},clear:function(){this.srcElement.removeObserver(this)}}),O=R.extend({init:function(e){R.fn.init.call(this,e),e&&this.initClip()},observe:function(){_.fn.observe.call(this)},mapStyle:function(){var e=R.fn.mapStyle.call(this);return this.srcElement&&this.srcElement.clip()&&e.push(["clip",this.clipRect()]),e},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip(),this.setClip()),R.fn.optionsChange.call(this,e)},clear:function(){this.clearClip(),R.fn.clear.call(this)},initClip:function(){this.srcElement.clip()&&(this.clip=new $(this.srcElement.clip(),this),this.clip.observer=this)},clearClip:function(){this.clip&&(this.clip.clear(),this.clip=null,this.css("clip",this.clipRect()))},setClip:function(){this.clip&&this.css("clip",this.clipRect())},clipRect:function(){var e,t,i,n=d,r=this.srcElement.clip();return r&&(e=this.clipBBox(r),t=e.topLeft(),i=e.bottomRight(),n=m.format("rect({0}px {1}px {2}px {3}px)",t.y,i.x,i.y,t.x)),n},clipBBox:function(e){var t=this.srcElement.rawBBox().topLeft(),i=e.rawBBox();return i.origin.translate(-t.x,-t.y),i}}),L=O.extend({createElement:function(){R.fn.createElement.call(this),this.setStyle()},attachTo:function(e,t){this.css("display",A),R.fn.attachTo.call(this,e,t),this.srcElement.options.visible!==!1&&this.css("display","")},_attachTo:function(e){var t=document.createDocumentFragment();t.appendChild(this.element),e.appendChild(t)},mapStyle:function(){var e=O.fn.mapStyle.call(this);return e.push(["position","absolute"]),e.push(["white-space","nowrap"]),e},optionsChange:function(e){"transform"===e.field&&this.refreshTransform(),"opacity"===e.field&&this.refreshOpacity(),O.fn.optionsChange.call(this,e)},refreshTransform:function(e){var t,i=this.srcElement.currentTransform(e),n=this.childNodes,r=n.length;for(this.setClip(),t=0;r>t;t++)n[t].refreshTransform(i)},currentOpacity:function(){var e=M(this.srcElement.options.opacity,1);return this.parent&&this.parent.currentOpacity&&(e*=this.parent.currentOpacity()),e},refreshOpacity:function(){var e,t=this.childNodes,i=t.length,n=this.currentOpacity();for(e=0;i>e;e++)t[e].refreshOpacity(n)},initClip:function(){if(O.fn.initClip.call(this),this.clip){var e=this.clip.srcElement.bbox(this.srcElement.currentTransform());e&&(this.css("width",e.width()+e.origin.x),this.css("height",e.height()+e.origin.y))}},clipBBox:function(e){return e.bbox(this.srcElement.currentTransform())},clearClip:function(){O.fn.clearClip.call(this)}}),B=R.extend({init:function(e,t){this.opacity=t,R.fn.init.call(this,e)},createElement:function(){this.element=i("stroke"),this.setOpacity()},optionsChange:function(e){0===e.field.indexOf("stroke")&&this.setStroke()},refreshOpacity:function(e){this.opacity=e,this.setStroke()},setStroke:function(){this.allAttr(this.mapStroke())},setOpacity:function(){this.setStroke()},mapStroke:function(){var e,t=this.srcElement.options.stroke,i=[];return t&&!C(t.color)&&0!==t.width?(i.push(["on","true"]),i.push(["color",t.color]),i.push(["weight",(t.width||1)+"px"]),this.mapOpacityTo(i,t.opacity),S(t.dashType)&&i.push(["dashstyle",t.dashType]),S(t.lineJoin)&&i.push(["joinstyle",t.lineJoin]),S(t.lineCap)&&(e=t.lineCap.toLowerCase(),"butt"===e&&(e="butt"===e?"flat":e),i.push(["endcap",e]))):i.push(["on","false"]),i}}),U=R.extend({init:function(e,t,i){this.opacity=i,R.fn.init.call(this,e)},createElement:function(){this.element=i("fill"),this.setFill()},optionsChange:function(e){s(e.field)&&this.setFill()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setFill:function(){this.allAttr(this.mapFill())},setOpacity:function(){this.setFill()},attr:function(e,t){var i,n=this.element;if(n){for(i=e.split(".");i.length>1;)n=n[i.shift()];n[i[0]]=t}},mapFill:function(){var e=this.srcElement.fill(),t=[["on","false"]];return e&&(e.nodeType==F?t=this.mapGradient(e):C(e.color)||(t=this.mapFillColor(e))),t},mapFillColor:function(e){var t=[["on","true"],["color",e.color]];return this.mapOpacityTo(t,e.opacity),t},mapGradient:function(e){var t,i=this.srcElement.options,n=i.fallbackFill||e.fallbackFill&&e.fallbackFill();return t=e instanceof y.LinearGradient?this.mapLinearGradient(e):e instanceof y.RadialGradient&&e.supportVML?this.mapRadialGradient(e):n?this.mapFillColor(n):[["on","false"]]},mapLinearGradient:function(e){var t=e.start(),i=e.end(),n=x.deg(p(i.y-t.y,i.x-t.x)),r=[["on","true"],["type",F],["focus",0],["method","none"],["angle",270-n]];return this.addColors(r),r},mapRadialGradient:function(e){var t=this.srcElement.rawBBox(),i=e.center(),n=(i.x-t.origin.x)/t.width(),r=(i.y-t.origin.y)/t.height(),o=[["on","true"],["type","gradienttitle"],["focus","100%"],["focusposition",n+" "+r],["method","none"]];return this.addColors(o),o},addColors:function(e){var t,i,n=this.srcElement.options,r=[],o=n.fill.stops,s=n.baseColor,l=this.element.colors?"colors.value":"colors",c=a(s,o[0]),d=a(s,o[o.length-1]);for(i=0;o.length>i;i++)t=o[i],r.push(h.round(100*t.offset())+"% "+a(s,t));e.push([l,r.join(",")],["color",c],["color2",d])}}),V=R.extend({init:function(e,t){this.transform=t,R.fn.init.call(this,e)},createElement:function(){this.element=i("skew"),this.setTransform()},optionsChange:function(e){"transform"===e.field&&this.refresh(this.srcElement.currentTransform())},refresh:function(e){this.transform=e,this.setTransform()},transformOrigin:function(){return"-0.5,-0.5"},setTransform:function(){this.allAttr(this.mapTransform())},mapTransform:function(){var e=this.transform,t=[],i=w(e);return i?(i.round(z),t.push(["on","true"],["matrix",[i.a,i.c,i.b,i.d,0,0].join(",")],["offset",i.e+"px,"+i.f+"px"],["origin",this.transformOrigin()])):t.push(["on","false"]),t}}),W=O.extend({init:function(e,t,i){this.fill=this.createFillNode(e,t,i),this.stroke=new B(e,i),this.transform=this.createTransformNode(e,t),O.fn.init.call(this,e)},attachTo:function(e,t){this.fill.attachTo(this.element),this.stroke.attachTo(this.element),this.transform.attachTo(this.element),R.fn.attachTo.call(this,e,t)},createFillNode:function(e,t,i){return new U(e,t,i)},createTransformNode:function(e,t){return new V(e,t)},createElement:function(){this.element=i("shape"),this.setCoordsize(),this.setStyle()},optionsChange:function(e){s(e.field)?this.fill.optionsChange(e):0===e.field.indexOf("stroke")?this.stroke.optionsChange(e):"transform"===e.field?this.transform.optionsChange(e):"opacity"===e.field&&(this.fill.setOpacity(),this.stroke.setOpacity()),O.fn.optionsChange.call(this,e)},refreshTransform:function(e){this.transform.refresh(this.srcElement.currentTransform(e))},refreshOpacity:function(e){e*=M(this.srcElement.options.opacity,1),this.fill.refreshOpacity(e),this.stroke.refreshOpacity(e)},mapStyle:function(e,t){var i,n=O.fn.mapStyle.call(this);return e&&t||(e=t=I),n.push(["position","absolute"],["width",e+"px"],["height",t+"px"]),i=this.srcElement.options.cursor,i&&n.push(["cursor",i]),n},setCoordsize:function(){this.allAttr([["coordorigin","0 0"],["coordsize",P+" "+P]])}}),j=R.extend({createElement:function(){this.element=i("path"),this.setPathData()},geometryChange:function(){this.setPathData()},setPathData:function(){this.attr("v",this.renderData())},renderData:function(){return r(this.srcElement)}}),q=W.extend({init:function(e,t,i){this.pathData=this.createDataNode(e),W.fn.init.call(this,e,t,i)},attachTo:function(e,t){this.pathData.attachTo(this.element),W.fn.attachTo.call(this,e,t)},createDataNode:function(e){return new j(e)},geometryChange:function(){this.pathData.geometryChange(),W.fn.geometryChange.call(this)}}),G=j.extend({renderData:function(){var e,t,i,n=this.srcElement.paths;if(n.length>0){for(e=[],t=0;n.length>t;t++)i=n.length-1>t,e.push(r(n[t],i));return e.join(" ")}}}),Y=q.extend({createDataNode:function(e){return new G(e)}}),Q=V.extend({transformOrigin:function(){var e=this.srcElement.geometry().bbox(),t=e.center(),i=-t.x/e.width(),n=-t.y/e.height();return i+","+n}}),K=W.extend({createElement:function(){this.element=i("oval"),this.setStyle()},createTransformNode:function(e,t){return new Q(e,t)},geometryChange:function(){W.fn.geometryChange.call(this),this.setStyle(),this.refreshTransform()},mapStyle:function(){var e=this.srcElement.geometry(),t=e.radius,i=e.center,n=2*t,r=W.fn.mapStyle.call(this,n,n);return r.push(["left",i.x-t+"px"],["top",i.y-t+"px"]),r}}),X=j.extend({renderData:function(){return r(this.srcElement.toPath())}}),Z=q.extend({createDataNode:function(e){return new X(e)}}),J=j.extend({createElement:function(){j.fn.createElement.call(this),this.attr("textpathok",!0)},renderData:function(){var e=this.srcElement.rect(),t=e.center();return"m "+n([new b.Point(e.topLeft().x,t.y)])+" l "+n([new b.Point(e.bottomRight().x,t.y)])}}),ee=R.extend({createElement:function(){this.element=i("textpath"),this.attr("on",!0),this.attr("fitpath",!1),this.setStyle(),this.setString()},optionsChange:function(e){"content"===e.field?this.setString():this.setStyle(),R.fn.optionsChange.call(this,e)},mapStyle:function(){return[["font",this.srcElement.options.font]]},setString:function(){this.attr("string",this.srcElement.content())}}),te=q.extend({init:function(e,t,i){this.path=new ee(e),q.fn.init.call(this,e,t,i)},createDataNode:function(e){return new J(e)},attachTo:function(e,t){this.path.attachTo(this.element),q.fn.attachTo.call(this,e,t)},optionsChange:function(e){("font"===e.field||"content"===e.field)&&(this.path.optionsChange(e),this.pathData.geometryChange(e)),q.fn.optionsChange.call(this,e)}}),ie=j.extend({renderData:function(){var e=this.srcElement.rect(),t=(new y.Path).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close();return r(t)}}),ne=V.extend({init:function(e,t,i){this.opacity=i,V.fn.init.call(this,e,t)},createElement:function(){this.element=i("fill"),this.attr("type","frame"),this.attr("rotate",!0),this.setOpacity(),this.setSrc(),this.setTransform()},optionsChange:function(e){"src"===e.field&&this.setSrc(),V.fn.optionsChange.call(this,e)},geometryChange:function(){this.refresh()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setOpacity:function(){var e=[];this.mapOpacityTo(e,this.srcElement.options.opacity),this.allAttr(e)},setSrc:function(){this.attr("src",this.srcElement.src())},mapTransform:function(){var e,t,i,n,r,o,s,a,l=this.srcElement,c=l.rawBBox(),d=c.center(),u=I/2,h=I,m=c.width()/h,g=c.height()/h,v=0,y=this.transform;return y?(i=w(y),n=f(i.a*i.a+i.b*i.b),r=f(i.c*i.c+i.d*i.d),m*=n,g*=r,o=T(p(i.b,i.d)),s=T(p(-i.c,i.a)),v=(o+s)/2,0!==v?(a=l.bbox().center(),e=(a.x-u)/h,t=(a.y-u)/h):(e=(d.x*n+i.e-u)/h,t=(d.y*r+i.f-u)/h)):(e=(d.x-u)/h,t=(d.y-u)/h),m=D(m,z),g=D(g,z),e=D(e,z),t=D(t,z),v=D(v,z),[["size",m+","+g],["position",e+","+t],["angle",v]]}}),re=q.extend({createFillNode:function(e,t,i){return new ne(e,t,i)},createDataNode:function(e){return new ie(e)},optionsChange:function(e){("src"===e.field||"transform"===e.field)&&this.fill.optionsChange(e),q.fn.optionsChange.call(this,e)},geometryChange:function(){this.fill.geometryChange(),q.fn.geometryChange.call(this)},refreshTransform:function(e){q.fn.refreshTransform.call(this,e),this.fill.refresh(this.srcElement.currentTransform(e))}}),oe={Group:L,Text:te,Path:q,MultiPath:Y,Circle:K,Arc:Z,Image:re};m.support.vml=function(){var e=m.support.browser;return e.msie&&9>e.version}(),d="inherit",m.support.browser.msie&&8>m.support.browser.version&&(d="rect(auto auto auto auto)"),m.support.vml&&y.SurfaceFactory.current.register("vml",H,30),g(y,{vml:{ArcDataNode:X,ArcNode:Z,CircleTransformNode:Q,CircleNode:K,FillNode:U,GroupNode:L,ImageNode:re,ImageFillNode:ne,ImagePathDataNode:ie,MultiPathDataNode:G,MultiPathNode:Y,Node:R,PathDataNode:j,PathNode:q,RootNode:N,StrokeNode:B,Surface:H,TextNode:te,TextPathNode:ee,TextPathDataNode:J,TransformNode:V}})}(window.kendo.jQuery),function(e,t,i){"use strict";function n(){function e(){var t,r,o;for(t=0;arguments.length>t;++t){if(r=arguments[t],r===i)throw Error("Cannot output undefined to PDF");if(r instanceof b)r.beforeRender(e),r.render(e);else if(z(r))f(r,e);else if(p(r))m(r,e);else if("number"==typeof r){if(isNaN(r))throw Error("Cannot output NaN to PDF");o=r.toFixed(7),o.indexOf(".")>=0&&(o=o.replace(/\.?0+$/,"")),"-0"==o&&(o="0"),n.writeString(o)}else/string|boolean/.test(typeof r)?n.writeString(r+""):"function"==typeof r.get?n.write(r.get()):"object"==typeof r&&(r?e(new O(r)):n.writeString("null"))}}var t=0,n=D();return e.writeData=function(e){n.write(e)},e.withIndent=function(i){++t,i(e),--t},e.indent=function(){e(K,d("",2*t,"  ")),e.apply(null,arguments)},e.offset=function(){return n.offset()},e.toString=function(){throw Error("FIX CALLER")},e.get=function(){return n.get()},e.stream=function(){return n},e}function r(e,t){var i=e.beforeRender,n=e.render;e.beforeRender=function(){},e.render=function(e){e(t," 0 R")},e.renderFull=function(r){e._offset=r.offset(),r(t," 0 obj "),i.call(e,r),n.call(e,r),r(" endobj")}}function o(e){function t(t,i){return e&&null!=e[t]?e[t]:i}var i,o,s,a,l,c,d=this,h=n(),p=0,f=[];if(d.getOption=t,d.attach=function(e){return f.indexOf(e)<0&&(r(e,++p),f.push(e)),e},d.FONTS={},d.IMAGES={},i=t("paperSize",J.a4),"string"==typeof i&&(i=J[i.toLowerCase()],null==i))throw Error("Unknown paper size");i[0]=_(i[0]),i[1]=_(i[1]),t("landscape",!1)&&(i=[Math.max(i[0],i[1]),Math.min(i[0],i[1])]),o=t("margin"),o&&(o.left=_(o.left,0),o.top=_(o.top,0),o.right=_(o.right,0),o.bottom=_(o.bottom,0),t("addMargin")&&(i[0]+=o.left+o.right,i[1]+=o.top+o.bottom)),s=i[0],a=i[1],o&&(s-=o.left+o.right,a-=o.top+o.bottom),l=d.attach(new B),c=d.attach(new U([0,0,i[0],i[1]])),l.setPages(c),d.addPage=function(){var e=new L(n(),null,(!0)),t=new q(d,{Contents:d.attach(e),Parent:c});return t._content=e,c.addPage(d.attach(t)),t.transform(1,0,0,-1,0,i[1]),o&&(t.translate(o.left,o.top),t.rect(0,0,s,a),t.clip()),t},d.render=function(){var e,i;for(h("%PDF-1.4",K,"%脗脕脷脧脦",K,K),e=0;f.length>e;++e)f[e].renderFull(h),h(K,K);for(i=h.offset(),h("xref",K,0," ",f.length+1,K),h("0000000000 65535 f ",K),e=0;f.length>e;++e)h(u(f[e]._offset,10)," 00000 n ",K);return h(K),h("trailer",K),h(new O({Size:f.length+1,Root:l,Info:new O({Producer:new H("Kendo UI PDF Generator"),Title:new H(t("title","")),Author:new H(t("author","")),Subject:new H(t("subject","")),Keywords:new H(t("keywords","")),Creator:new H(t("creator","Kendo UI PDF Generator")),CreationDate:t("date",new Date)})}),K,K),h("startxref",K,i,K),h("%%EOF",K),h.stream().offset(0)}}function s(t,i){function n(){e.console&&(e.console.error?e.console.error("Cannot load URL: %s",t):e.console.log("Cannot load URL: %s",t)),i(null)}var r=new XMLHttpRequest;r.open("GET",t,!0),Q&&(r.responseType="arraybuffer"),r.onload=function(){200==r.status||304==r.status?i(Q?new Uint8Array(r.response):new VBArray(r.responseBody).toArray()):n()},r.onerror=n,r.send(null)}function a(e,t){var i=ee[e];i?t(i):s(e,function(i){if(null==i)throw Error("Cannot load font from "+e);var n=new Y.pdf.TTFFont(i);ee[e]=n,t(n)})}function l(e,t){var n=te[e];n?t(n):(n=new Image,n.onload=function(){var i,r,o,s,a,l,c,d,u,h,p=document.createElement("canvas");p.width=n.width,p.height=n.height,i=p.getContext("2d"),i.drawImage(n,0,0);try{r=i.getImageData(0,0,n.width,n.height)}catch(i){return t(te[e]="TAINTED")}for(o=!1,s=D(),a=D(),l=r.data,c=0;l.length>c;)s.writeByte(l[c++]),s.writeByte(l[c++]),s.writeByte(l[c++]),d=l[c++],255>d&&(o=!0),a.writeByte(d);o?n=new C(n.width,n.height,s,a):(u=p.toDataURL("image/jpeg"),u=u.substr(u.indexOf(";base64,")+8),h=D(),h.writeBase64(u),h.offset(0),n=new x(n.width,n.height,h)),t(te[e]=n)},n.onerror=function(){t(te[e]="TAINTED")},n.crossOrigin="Anonymous",n.src=e,(n.complete||n.complete===i)&&(n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",n.src=e))}function c(e){return function(t,i){var n=t.length,r=n;if(0===n)return i();for(;r-- >0;)e(t[r],function(){0===--n&&i()})}}function d(e,t,i){for(;t>e.length;)e=i+e;return e}function u(e,t){return d(e+"",t,"0")}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e){return e instanceof Date}function f(e,t){t("["),e.length>0&&t.withIndent(function(){for(var i=0;e.length>i;++i)i>0&&i%8===0?t.indent(e[i]):t(" ",e[i])}),t(" ]")}function m(e,t){t("(D:",u(e.getUTCFullYear(),4),u(e.getUTCMonth()+1,2),u(e.getUTCDate(),2),u(e.getUTCHours(),2),u(e.getUTCMinutes(),2),u(e.getUTCSeconds(),2),"Z)")}function g(e){return e*(72/25.4)}function v(e){return g(10*e)}function y(e){return 72*e}function _(e,i){var n,r;if("number"==typeof e)return e;if("string"==typeof e&&(n=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(e),n&&(r=t(n[1]),!isNaN(r))))return"pt"==n[2]?r:{mm:g,cm:v,in:y}[n[2]](r);if(null!=i)return i;throw Error("Can't parse unit: "+e)}function b(){}function w(e,t,i){i||(i=b),e.prototype=new i;for(var n in t)h(t,n)&&(e.prototype[n]=t[n]);return e}function k(e){return h($,e)?$[e]:$[e]=new N(e)}function x(e,t,i){this.asStream=function(){var n=new L(i,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceRGB"),Filter:k("DCTDecode")});return n._resourceName=k("I"+ ++X),n}}function C(e,t,i,n){this.asStream=function(r){var o=new L(n,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceGray")},(!0)),s=new L(i,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceRGB"),SMask:r.attach(o)},(!0));return s._resourceName=k("I"+ ++X),s}}function S(e){function t(e){return 1==e.length?e[0]:{FunctionType:3,Functions:e,Domain:[0,1],Bounds:d,Encode:u}}var i,n,r,o,s,a=!1,l=[],c=[],d=[],u=[];for(i=1;e.length>i;++i)n=e[i-1],r=e[i],o=n.color,s=r.color,c.push({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[o.r,o.g,o.b],C1:[s.r,s.g,s.b]}),l.push({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[o.a],C1:[s.a]}),(1>o.a||1>s.a)&&(a=!0),
d.push(r.offset),u.push(0,1);return d.pop(),{hasAlpha:a,colors:t(c),opacities:a?t(l):null}}function T(e,t,i){var n="radial"==t.type,r=S(t.stops),o=n?[t.start.x,t.start.y,t.start.r,t.end.x,t.end.y,t.end.r]:[t.start.x,t.start.y,t.end.x,t.end.y],s={Type:k("Shading"),ShadingType:n?3:2,ColorSpace:k("DeviceRGB"),Coords:o,Domain:[0,1],Function:r.colors,Extend:[!0,!0]},a=r.hasAlpha?{Type:k("ExtGState"),AIS:!1,CA:1,ca:1,SMask:{Type:k("Mask"),S:k("Luminosity"),G:e.attach(new L("/a0 gs /s0 sh",{Type:k("XObject"),Subtype:k("Form"),FormType:1,BBox:t.userSpace?[i.left,i.top+i.height,i.left+i.width,i.top]:[0,1,1,0],Group:{Type:k("Group"),S:k("Transparency"),CS:k("DeviceGray"),I:!0},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:k("DeviceGray"),Coords:o,Domain:[0,1],ShadingType:n?3:2,Function:r.opacities,Extend:[!0,!0]}}}}))}}:null;return{hasAlpha:r.hasAlpha,shading:new O(s),opacity:new O(a)}}function D(e){function t(){return S>=T}function i(){return T>S?e[S++]:0}function n(t){b(S),e[S++]=255&t,S>T&&(T=S)}function r(){return i()<<8|i()}function o(e){n(e>>8),n(e)}function s(){var e=r();return e>=32768?e-65536:e}function a(e){o(0>e?e+65536:e)}function l(){return 65536*r()+r()}function c(e){o(e>>>16&65535),o(65535&e)}function d(){var e=l();return e>=2147483648?e-4294967296:e}function u(e){c(0>e?e+4294967296:e)}function h(){return l()/65536}function p(e){c(Math.round(65536*e))}function f(){return d()/65536}function m(e){u(Math.round(65536*e))}function g(e){return _(e,i)}function v(e){return String.fromCharCode.apply(String,g(e))}function y(e){for(var t=0;e.length>t;++t)n(e.charCodeAt(t))}function _(e,t){for(var i=Array(e),n=0;e>n;++n)i[n]=t();return i}var b,w,k,x,C,S=0,T=0;return null==e?e=Q?new Uint8Array(256):[]:T=e.length,b=Q?function(t){if(t>=e.length){var i=new Uint8Array(Math.max(t+256,2*e.length));i.set(e,0),e=i}}:function(){},w=Q?function(){return new Uint8Array(e.buffer,0,T)}:function(){return e},k=Q?function(t){if("string"==typeof t)return y(t);var i=t.length;b(S+i),e.set(t,S),S+=i,S>T&&(T=S)}:function(e){if("string"==typeof e)return y(e);for(var t=0;e.length>t;++t)n(e[t])},x=Q?function(t,i){if(e.buffer.slice)return new Uint8Array(e.buffer.slice(t,t+i));var n=new Uint8Array(i);return n.set(new Uint8Array(e.buffer,t,i)),n}:function(t,i){return e.slice(t,t+i)},C={eof:t,readByte:i,writeByte:n,readShort:r,writeShort:o,readLong:l,writeLong:c,readFixed:h,writeFixed:p,readShort_:s,writeShort_:a,readLong_:d,writeLong_:u,readFixed_:f,writeFixed_:m,read:g,write:k,readString:v,writeString:y,times:_,get:w,slice:x,offset:function(e){return null!=e?(S=e,C):S},skip:function(e){S+=e},toString:function(){throw Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return T},saveExcursion:function(e){var t=S;try{return e()}finally{S=t}},writeBase64:function(e){window.atob?y(window.atob(e)):k(Z.decode(e))},base64:function(){return Z.encode(w())}}}function M(e){return e.replace(/^\s*(['"])(.*)\1\s*$/,"$2")}function A(e){var t,i=/^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i,n=i.exec(e);return n?(t=n[8]?parseInt(n[8],10):12,{italic:n[2]&&"italic"==n[2].toLowerCase(),variant:n[4],bold:n[6]&&/bold|700/i.test(n[6]),fontSize:t,lineHeight:n[12]?"normal"==n[12]?t:parseInt(n[12],10):null,fontFamily:n[14].split(/\s*,\s*/g).map(M)}):{fontSize:12,fontFamily:"sans-serif"}}function E(e){function t(t){return e.bold&&(t+="|bold"),e.italic&&(t+="|italic"),t.toLowerCase()}var i,n,r,o=e.fontFamily;if(o instanceof Array){for(r=0;o.length>r;++r)if(i=t(o[r]),n=G[i])return n}else n=G[o.toLowerCase()];return n||(n="Times-Roman"),n}function I(e,t){if(1==arguments.length)for(var i in e)I(i,e[i]);else e=e.toLowerCase(),G[e]=t}function P(e,t){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=t[0],c=t[1],d=t[2],u=t[3],h=t[4],p=t[5];return[i*l+n*d,i*c+n*u,r*l+o*d,r*c+o*u,s*l+a*d+h,s*c+a*u+p]}function F(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]}var z,H,R,N,$,O,L,B,U,V,W,j,q,G,Y=e.kendo,Q=!!e.Uint8Array,K="\n",X=0,Z=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(t){for(var i,n,r,o,s,a,l,c=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),d=0,u=c.length,h=[];u>d;)i=e.indexOf(c.charAt(d++)),n=e.indexOf(c.charAt(d++)),r=e.indexOf(c.charAt(d++)),o=e.indexOf(c.charAt(d++)),s=i<<2|n>>>4,a=(15&n)<<4|r>>>2,l=(3&r)<<6|o,h.push(s),64!=r&&h.push(a),64!=o&&h.push(l);return h},encode:function(t){for(var i,n,r,o,s,a,l,c=0,d=t.length,u="";d>c;)i=t[c++],n=t[c++],r=t[c++],o=i>>>2,s=(3&i)<<4|n>>>4,a=(15&n)<<2|r>>>6,l=63&r,c-d==2?a=l=64:c-d==1&&(l=64),u+=e.charAt(o)+e.charAt(s)+e.charAt(a)+e.charAt(l);return u}}}(),J={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]},ee={"Times-Roman":!0,"Times-Bold":!0,"Times-Italic":!0,"Times-BoldItalic":!0,Helvetica:!0,"Helvetica-Bold":!0,"Helvetica-Oblique":!0,"Helvetica-BoldOblique":!0,Courier:!0,"Courier-Bold":!0,"Courier-Oblique":!0,"Courier-BoldOblique":!0,Symbol:!0,ZapfDingbats:!0},te={},ie=c(a),ne=c(l);o.prototype={loadFonts:ie,loadImages:ne,getFont:function(e){var t=this.FONTS[e];if(!t){if(t=ee[e],!t)throw Error("Font "+e+" has not been loaded");t=this.attach(t===!0?new V(e):new W(this,t)),this.FONTS[e]=t}return t},getImage:function(e){var t=this.IMAGES[e];if(!t){if(t=te[e],!t)throw Error("Image "+e+" has not been loaded");if("TAINTED"===t)return null;t=this.IMAGES[e]=this.attach(t.asStream(this))}return t},getOpacityGS:function(e,i){var n,r,o,s=t(e).toFixed(3);return e=t(s),s+=i?"S":"F",n=this._opacityGSCache||(this._opacityGSCache={}),r=n[s],r||(o={Type:k("ExtGState")},i?o.CA=e:o.ca=e,r=this.attach(new O(o)),r._resourceName=k("GS"+ ++X),n[s]=r),r},dict:function(e){return new O(e)},name:function(e){return k(e)},stream:function(e,t){return new L(t,e)}},z=Array.isArray||function(e){return e instanceof Array},b.prototype.beforeRender=function(){},H=w(function(e){this.value=e},{render:function(e){var t,i="",n=this.escape();for(t=0;n.length>t;++t)i+=String.fromCharCode(255&n.charCodeAt(t));e("(",i,")")},escape:function(){return this.value.replace(/([\(\)\\])/g,"\\$1")},toString:function(){return this.value}}),R=w(function(e){this.value=e},{render:function(e){e("<");for(var t=0;this.value.length>t;++t)e(u(this.value.charCodeAt(t).toString(16),4));e(">")}},H),N=w(function(e){this.name=e},{render:function(e){e("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,function(e){return"#"+u(e.charCodeAt(0).toString(16),2)})},toString:function(){return this.name}}),$={},N.get=k,O=w(function(e){this.props=e},{render:function(e){var t=this.props,i=!0;e("<<"),e.withIndent(function(){for(var n in t)h(t,n)&&!/^_/.test(n)&&(i=!1,e.indent(k(n)," ",t[n]))}),i||e.indent(),e(">>")}}),L=w(function(e,t,i){if("string"==typeof e){var n=D();n.write(e),e=n}this.data=e,this.props=t||{},this.compress=i},{render:function(t){var i=this.data.get(),n=this.props;this.compress&&e.pako&&"function"==typeof e.pako.deflate&&(n.Filter?n.Filter instanceof Array||(n.Filter=[n.Filter]):n.Filter=[],n.Filter.unshift(k("FlateDecode")),i=e.pako.deflate(i)),n.Length=i.length,t(new O(n)," stream",K),t.writeData(i),t(K,"endstream")}}),B=w(function(e){e=this.props=e||{},e.Type=k("Catalog")},{setPages:function(e){this.props.Pages=e}},O),U=w(function(e){this.props={Type:k("Pages"),Kids:[],Count:0,MediaBox:e}},{addPage:function(e){this.props.Kids.push(e),this.props.Count++}},O),V=w(function(e){this.props={Type:k("Font"),Subtype:k("Type1"),BaseFont:k(e)},this._resourceName=k("F"+ ++X)},{encodeText:function(e){return new H(e+"")}},O),W=w(function(e,t,i){var n,r;i=this.props=i||{},i.Type=k("Font"),i.Subtype=k("Type0"),i.Encoding=k("Identity-H"),this._pdf=e,this._font=t,this._sub=t.makeSubset(),this._resourceName=k("F"+ ++X),n=t.head,this.name=t.psName,r=this.scale=t.scale,this.bbox=[n.xMin*r,n.yMin*r,n.xMax*r,n.yMax*r],this.italicAngle=t.post.italicAngle,this.ascent=t.ascent*r,this.descent=t.descent*r,this.lineGap=t.lineGap*r,this.capHeight=t.os2.capHeight||this.ascent,this.xHeight=t.os2.xHeight||0,this.stemV=0,this.familyClass=(t.os2.familyClass||0)>>8,this.isSerif=this.familyClass>=1&&7>=this.familyClass,this.isScript=10==this.familyClass,this.flags=(t.post.isFixedPitch?1:0)|(this.isSerif?2:0)|(this.isScript?8:0)|(0!==this.italicAngle?64:0)|32},{encodeText:function(e){return new R(this._sub.encodeText(e+""))},beforeRender:function(){var e,t,i,r,o=this,s=o._sub,a=s.render(),l=new L(D(a),{Length1:a.length},(!0)),c=o._pdf.attach(new O({Type:k("FontDescriptor"),FontName:k(o._sub.psName),FontBBox:o.bbox,Flags:o.flags,StemV:o.stemV,ItalicAngle:o.italicAngle,Ascent:o.ascent,Descent:o.descent,CapHeight:o.capHeight,XHeight:o.xHeight,FontFile2:o._pdf.attach(l)})),d=s.ncid2ogid,u=s.firstChar,h=s.lastChar,p=[];!function e(t,i){if(h>=t){var n=d[t];null==n?e(t+1):(i||p.push(t,i=[]),i.push(o._font.widthOfGlyph(n)),e(t+1,i))}}(u),e=new O({Type:k("Font"),Subtype:k("CIDFontType2"),BaseFont:k(o._sub.psName),CIDSystemInfo:new O({Registry:new H("Adobe"),Ordering:new H("Identity"),Supplement:0}),FontDescriptor:c,FirstChar:u,LastChar:h,DW:Math.round(o._font.widthOfGlyph(0)),W:p,CIDToGIDMap:o._pdf.attach(o._makeCidToGidMap())}),t=o.props,t.BaseFont=k(o._sub.psName),t.DescendantFonts=[o._pdf.attach(e)],i=new j(u,h,s.subset),r=new L(n(),null,(!0)),r.data(i),t.ToUnicode=o._pdf.attach(r)},_makeCidToGidMap:function(){return new L(D(this._sub.cidToGidMap()),null,(!0))}},O),j=w(function(e,t,i){this.firstChar=e,this.lastChar=t,this.map=i},{render:function(e){e.indent("/CIDInit /ProcSet findresource begin"),e.indent("12 dict begin"),e.indent("begincmap"),e.indent("/CIDSystemInfo <<"),e.indent("  /Registry (Adobe)"),e.indent("  /Ordering (UCS)"),e.indent("  /Supplement 0"),e.indent(">> def"),e.indent("/CMapName /Adobe-Identity-UCS def"),e.indent("/CMapType 2 def"),e.indent("1 begincodespacerange"),e.indent("  <0000><ffff>"),e.indent("endcodespacerange");var t=this;e.indent(t.lastChar-t.firstChar+1," beginbfchar"),e.withIndent(function(){var i,n;for(i=t.firstChar;t.lastChar>=i;++i)n=t.map[i],e.indent("<",u(i.toString(16),4),">","<",u(n.toString(16),4),">")}),e.indent("endbfchar"),e.indent("endcmap"),e.indent("CMapName currentdict /CMap defineresource pop"),e.indent("end"),e.indent("end")}}),q=w(function(e,t){this._pdf=e,this._rcount=0,this._textMode=!1,this._fontResources={},this._gsResources={},this._xResources={},this._patResources={},this._shResources={},this._opacity=1,this._matrix=[1,0,0,1,0,0],this._font=null,this._fontSize=null,this._contextStack=[],t=this.props=t||{},t.Type=k("Page"),t.ProcSet=[k("PDF"),k("Text"),k("ImageB"),k("ImageC"),k("ImageI")],t.Resources=new O({Font:new O(this._fontResources),ExtGState:new O(this._gsResources),XObject:new O(this._xResources),Pattern:new O(this._patResources),Shading:new O(this._shResources)})},{_out:function(){this._content.data.apply(null,arguments)},transform:function(e,t,i,n,r,o){F(arguments)||(this._matrix=P(this._matrix,arguments),this._out(e," ",t," ",i," ",n," ",r," ",o," cm"),this._out(K))},translate:function(e,t){this.transform(1,0,0,1,e,t)},scale:function(e,t){this.transform(e,0,0,t,0,0)},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);this.transform(t,i,-i,t,0,0)},beginText:function(){this._textMode=!0,this._out("BT",K)},endText:function(){this._textMode=!1,this._out("ET",K)},_requireTextMode:function(){if(!this._textMode)throw Error("Text mode required; call page.beginText() first")},_requireFont:function(){if(!this._font)throw Error("No font selected; call page.setFont() first")},setFont:function(e,t){this._requireTextMode(),null==e?e=this._font:e instanceof W||(e=this._pdf.getFont(e)),null==t&&(t=this._fontSize),this._fontResources[e._resourceName]=e,this._font=e,this._fontSize=t,this._out(e._resourceName," ",t," Tf",K)},setTextLeading:function(e){this._requireTextMode(),this._out(e," TL",K)},setTextRenderingMode:function(e){this._requireTextMode(),this._out(e," Tr",K)},showText:function(e){this._requireFont(),this._out(this._font.encodeText(e)," Tj",K)},showTextNL:function(e){this._requireFont(),this._out(this._font.encodeText(e)," '",K)},setStrokeColor:function(e,t,i){this._out(e," ",t," ",i," RG",K)},setOpacity:function(e){this.setFillOpacity(e),this.setStrokeOpacity(e),this._opacity*=e},setStrokeOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!0);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",K)}},setFillColor:function(e,t,i){this._out(e," ",t," ",i," rg",K)},setFillOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!1);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",K)}},gradient:function(e,t){var i,n,r;this.save(),this.rect(t.left,t.top,t.width,t.height),this.clip(),e.userSpace||this.transform(t.width,0,0,t.height,t.left,t.top),i=T(this._pdf,e,t),n="S"+ ++X,this._shResources[n]=this._pdf.attach(i.shading),i.hasAlpha&&(r="O"+ ++X,this._gsResources[r]=this._pdf.attach(i.opacity),this._out("/"+r+" gs ")),this._out("/"+n+" sh",K),this.restore()},setDashPattern:function(e,t){this._out(e," ",t," d",K)},setLineWidth:function(e){this._out(e," w",K)},setLineCap:function(e){this._out(e," J",K)},setLineJoin:function(e){this._out(e," j",K)},setMitterLimit:function(e){this._out(e," M",K)},save:function(){this._contextStack.push(this._context()),this._out("q",K)},restore:function(){this._out("Q",K),this._context(this._contextStack.pop())},moveTo:function(e,t){this._out(e," ",t," m",K)},lineTo:function(e,t){this._out(e," ",t," l",K)},bezier:function(e,t,i,n,r,o){this._out(e," ",t," ",i," ",n," ",r," ",o," c",K)},bezier1:function(e,t,i,n){this._out(e," ",t," ",i," ",n," y",K)},bezier2:function(e,t,i,n){this._out(e," ",t," ",i," ",n," v",K)},close:function(){this._out("h",K)},rect:function(e,t,i,n){this._out(e," ",t," ",i," ",n," re",K)},ellipse:function(e,t,i,n){function r(t){return e+t}function o(e){return t+e}var s=.5522847498307936;this.moveTo(r(0),o(n)),this.bezier(r(i*s),o(n),r(i),o(n*s),r(i),o(0)),this.bezier(r(i),o(-n*s),r(i*s),o(-n),r(0),o(-n)),this.bezier(r(-i*s),o(-n),r(-i),o(-n*s),r(-i),o(0)),this.bezier(r(-i),o(n*s),r(-i*s),o(n),r(0),o(n))},circle:function(e,t,i){this.ellipse(e,t,i,i)},stroke:function(){this._out("S",K)},nop:function(){this._out("n",K)},clip:function(){this._out("W n",K)},closeStroke:function(){this._out("s",K)},fill:function(){this._out("f",K)},fillStroke:function(){this._out("B",K)},drawImage:function(e){var t=this._pdf.getImage(e);t&&(this._xResources[t._resourceName]=t,this._out(t._resourceName," Do",K))},comment:function(e){var t=this;e.split(/\r?\n/g).forEach(function(e){t._out("% ",e,K)})},_context:function(e){return null==e?{opacity:this._opacity,matrix:this._matrix}:(this._opacity=e.opacity,this._matrix=e.matrix,i)}},O),G={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique"},Y.pdf={Document:o,BinaryStream:D,defineFont:I,parseFontDef:A,getFontURL:E,loadFonts:ie,loadImages:ne,TEXT_RENDERING_MODE:{fill:0,stroke:1,fillAndStroke:2,invisible:3,fillAndClip:4,strokeAndClip:5,fillStrokeClip:6,clip:7}}}(this,parseFloat),function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i(e){return Object.keys(e).sort(function(e,t){return e-t}).map(parseFloat)}function n(e){var t,i,n;for(this.raw=e,this.scalerType=e.readLong(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),t=this.tables={},i=0;this.tableCount>i;++i)n={tag:e.readString(4),checksum:e.readLong(),offset:e.readLong(),length:e.readLong()},t[n.tag]=n}function r(e){function i(e,t){this.definition=t,this.length=t.length,this.offset=t.offset,this.file=e,this.rawData=e.raw,this.parse(e.raw)}i.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)};for(var n in e)t(e,n)&&(i[n]=i.prototype[n]=e[n]);return i}function o(){var e,t="",i=y+"";for(e=0;i.length>e;++e)t+=String.fromCharCode(i.charCodeAt(e)-48+65);return++y,t}function s(e){this.font=e,this.subset={},this.unicodes={},this.ogid2ngid={0:0},this.ngid2ogid={0:0},this.ncid2ogid={},this.next=this.firstChar=1,this.nextGid=1,this.psName=o()+"+"+this.font.psName}function a(e,t){var i,n,r,o,s=this,a=s.contents=b(e);if("ttcf"==a.readString(4)){if(!t)throw Error("Must specify a name for TTC files");for(i=a.readLong(),n=a.readLong(),r=0;n>r;++r)if(o=a.readLong(),a.saveExcursion(function(){a.offset(o),s.parse()}),s.psName==t)return;throw Error("Font "+t+" not found in collection")}a.offset(0),s.parse()}var l,c,d,u,h,p,f,m,g,v,y,_=e.kendo.pdf,b=_.BinaryStream;n.prototype={readTable:function(e,t){var i=this.tables[e];if(!i)throw Error("Table "+e+" not found in directory");return this[e]=i.table=new t(this,i)},render:function(e){var i,n,r,o,s,a,l,c,d=Object.keys(e).length,u=Math.pow(2,Math.floor(Math.log(d)/Math.LN2)),h=16*u,p=Math.floor(Math.log(u)/Math.LN2),f=16*d-h,m=b();m.writeLong(this.scalerType),m.writeShort(d),m.writeShort(h),m.writeShort(p),m.writeShort(f),i=16*d,n=m.offset()+i,r=null,o=b();for(s in e)if(t(e,s))for(a=e[s],m.writeString(s),m.writeLong(this.checksum(a)),m.writeLong(n),m.writeLong(a.length),o.write(a),"head"==s&&(r=n),n+=a.length;n%4;)o.writeByte(0),n++;return m.write(o.get()),l=this.checksum(m.get()),c=2981146554-l,m.offset(r+8),m.writeLong(c),m.get()},checksum:function(e){e=b(e);for(var t=0;!e.eof();)t+=e.readLong();return 4294967295&t}},l=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.revision=e.readLong(),this.checkSumAdjustment=e.readLong(),this.magicNumber=e.readLong(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.read(8),this.modified=e.read(8),this.xMin=e.readShort_(),this.yMin=e.readShort_(),this.xMax=e.readShort_(),this.yMax=e.readShort_(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort_(),this.indexToLocFormat=e.readShort_(),this.glyphDataFormat=e.readShort_()},render:function(e){var t=b();return t.writeLong(this.version),t.writeLong(this.revision),t.writeLong(0),t.writeLong(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.write(this.created),t.write(this.modified),t.writeShort_(this.xMin),t.writeShort_(this.yMin),t.writeShort_(this.xMax),t.writeShort_(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort_(this.fontDirectionHint),t.writeShort_(e),t.writeShort_(this.glyphDataFormat),t.get()}}),c=r({parse:function(e){e.offset(this.offset);var t=this.file.head.indexToLocFormat;this.offsets=0===t?e.times(this.length/2,function(){return 2*e.readShort()}):e.times(this.length/4,e.readLong)},offsetOf:function(e){return this.offsets[e]},lengthOf:function(e){return this.offsets[e+1]-this.offsets[e]},render:function(e){var t,i=b(),n=e[e.length-1]>65535;for(t=0;e.length>t;++t)n?i.writeLong(e[t]):i.writeShort(e[t]/2);return{format:n?1:0,table:i.get()}}}),d=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort_(),this.minRightSideBearing=e.readShort_(),this.xMaxExtent=e.readShort_(),this.caretSlopeRise=e.readShort_(),this.caretSlopeRun=e.readShort_(),this.caretOffset=e.readShort_(),e.skip(8),this.metricDataFormat=e.readShort_(),this.numOfLongHorMetrics=e.readShort()},render:function(e){var t=b();return t.writeLong(this.version),t.writeShort_(this.ascent),t.writeShort_(this.descent),t.writeShort_(this.lineGap),t.writeShort(this.advanceWidthMax),t.writeShort_(this.minLeftSideBearing),t.writeShort_(this.minRightSideBearing),t.writeShort_(this.xMaxExtent),t.writeShort_(this.caretSlopeRise),t.writeShort_(this.caretSlopeRun),t.writeShort_(this.caretOffset),t.write([0,0,0,0,0,0,0,0]),t.writeShort_(this.metricDataFormat),t.writeShort(e.length),t.get()}}),u=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.numGlyphs=e.readShort(),this.maxPoints=e.readShort(),this.maxContours=e.readShort(),this.maxComponentPoints=e.readShort(),this.maxComponentContours=e.readShort(),this.maxZones=e.readShort(),this.maxTwilightPoints=e.readShort(),this.maxStorage=e.readShort(),this.maxFunctionDefs=e.readShort(),this.maxInstructionDefs=e.readShort(),this.maxStackElements=e.readShort(),this.maxSizeOfInstructions=e.readShort(),this.maxComponentElements=e.readShort(),this.maxComponentDepth=e.readShort()},render:function(e){var t=b();return t.writeLong(this.version),t.writeShort(e.length),t.writeShort(this.maxPoints),t.writeShort(this.maxContours),t.writeShort(this.maxComponentPoints),t.writeShort(this.maxComponentContours),t.writeShort(this.maxZones),t.writeShort(this.maxTwilightPoints),t.writeShort(this.maxStorage),t.writeShort(this.maxFunctionDefs),t.writeShort(this.maxInstructionDefs),t.writeShort(this.maxStackElements),t.writeShort(this.maxSizeOfInstructions),t.writeShort(this.maxComponentElements),t.writeShort(this.maxComponentDepth),t.get()}}),h=r({parse:function(e){var t,i,n;e.offset(this.offset),t=this.file,i=t.hhea,this.metrics=e.times(i.numOfLongHorMetrics,function(){return{advance:e.readShort(),lsb:e.readShort_()}}),n=t.maxp.numGlyphs-t.hhea.numOfLongHorMetrics,this.leftSideBearings=e.times(n,e.readShort_)},forGlyph:function(e){var t=this.metrics,i=t.length;return i>e?t[e]:{advance:t[i-1].advance,lsb:this.leftSideBearings[e-i]}},render:function(e){var t,i,n=b();for(t=0;e.length>t;++t)i=this.forGlyph(e[t]),n.writeShort(i.advance),n.writeShort_(i.lsb);return n.get()}}),p=function(){function e(e){this.raw=e}function i(e){var t,i,r;for(this.raw=e,t=this.glyphIds=[],i=this.idOffsets=[];r=e.readShort(),i.push(e.offset()),t.push(e.readShort()),r&s;)e.skip(r&n?4:2),r&l?e.skip(8):r&a?e.skip(4):r&o&&e.skip(2)}var n,o,s,a,l,c;return e.prototype={compound:!1,render:function(){return this.raw.get()}},n=1,o=8,s=32,a=64,l=128,c=256,i.prototype={compound:!0,render:function(e){var t,i,n=b(this.raw.get());for(t=0;this.glyphIds.length>t;++t)i=this.glyphIds[t],n.offset(this.idOffsets[t]),n.writeShort(e[i]);return n.get()}},r({parse:function(){this.cache={}},glyphFor:function(n){var r,o,s,a,l,c,d,u,h,p,f,m=this.cache;return t(m,n)?m[n]:(r=this.file.loca,o=r.lengthOf(n),0===o?m[n]=null:(s=this.rawData,a=this.offset+r.offsetOf(n),l=b(s.slice(a,o)),c=l.readShort_(),d=l.readShort_(),u=l.readShort_(),h=l.readShort_(),p=l.readShort_(),f=m[n]=-1==c?new i(l):new e(l),f.numberOfContours=c,f.xMin=d,f.yMin=u,f.xMax=h,f.yMax=p,f))},render:function(e,t,i){var n,r,o,s=b(),a=[];for(n=0;t.length>n;++n)r=t[n],o=e[r],a.push(s.offset()),o&&s.write(o.render(i));return a.push(s.offset()),{table:s.get(),offsets:a}}})}(),f=function(){function e(e,t){this.text=e,this.length=e.length,this.platformID=t.platformID,this.platformSpecificID=t.platformSpecificID,this.languageID=t.languageID,this.nameID=t.nameID}return r({parse:function(t){var i,n,r,o,s,a,l,c;for(t.offset(this.offset),i=t.readShort(),n=t.readShort(),r=this.offset+t.readShort(),o=t.times(n,function(){return{platformID:t.readShort(),platformSpecificID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:t.readShort()+r}}),s=this.strings={},a=0;o.length>a;++a)l=o[a],t.offset(l.offset),c=t.readString(l.length),s[l.nameID]||(s[l.nameID]=[]),s[l.nameID].push(new e(c,l));this.postscriptEntry=s[6][0],this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(i){var n,r,o,s,a,l,c=this.strings,d=0;for(n in c)t(c,n)&&(d+=c[n].length);r=b(),o=b(),r.writeShort(0),r.writeShort(d),r.writeShort(6+12*d);for(n in c)if(t(c,n))for(s=6==n?[new e(i,this.postscriptEntry)]:c[n],a=0;s.length>a;++a)l=s[a],r.writeShort(l.platformID),r.writeShort(l.platformSpecificID),r.writeShort(l.languageID),r.writeShort(l.nameID),r.writeShort(l.length),r.writeShort(o.offset()),o.writeString(l.text);return r.write(o.get()),r.get()}})}(),m=function(){var e=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g);return r({parse:function(e){var t,i;switch(e.offset(this.offset),this.format=e.readLong(),this.italicAngle=e.readFixed_(),this.underlinePosition=e.readShort_(),this.underlineThickness=e.readShort_(),this.isFixedPitch=e.readLong(),this.minMemType42=e.readLong(),this.maxMemType42=e.readLong(),this.minMemType1=e.readLong(),this.maxMemType1=e.readLong(),this.format){case 65536:case 196608:break;case 131072:for(t=e.readShort(),this.glyphNameIndex=e.times(t,e.readShort),this.names=[],i=this.offset+this.length;e.offset()<i;)this.names.push(e.readString(e.readByte()));break;case 151552:t=e.readShort(),this.offsets=e.read(t);break;case 262144:this.map=e.times(this.file.maxp.numGlyphs,e.readShort)}},glyphFor:function(t){switch(this.format){case 65536:return e[t]||".notdef";case 131072:var i=this.glyphNameIndex[t];return e.length>i?e[i]:this.names[i-e.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[t]||65535}},render:function(t){var i,n,r,o,s,a,l;if(196608==this.format)return this.raw();for(i=b(this.rawData.slice(this.offset,32)),i.writeLong(131072),i.offset(32),n=[],r=[],o=0;t.length>o;++o)s=t[o],a=this.glyphFor(s),l=e.indexOf(a),l>=0?n.push(l):(n.push(e.length+r.length),r.push(a));for(i.writeShort(t.length),o=0;n.length>o;++o)i.writeShort(n[o]);for(o=0;r.length>o;++o)i.writeByte(r[o].length),i.writeString(r[o]);return i.get()}})}(),g=function(){function e(e,t){var i=this;i.platformID=e.readShort(),i.platformSpecificID=e.readShort(),i.offset=t+e.readLong(),e.saveExcursion(function(){var t,n,r,o,s,a,l,c,d,u,h,p,f;switch(e.offset(i.offset),i.format=e.readShort(),i.length=e.readShort(),i.language=e.readShort(),i.isUnicode=3==i.platformID&&1==i.platformSpecificID&&4==i.format||0===i.platformID&&4==i.format,i.codeMap={},i.format){case 0:for(t=0;256>t;++t)i.codeMap[t]=e.readByte();break;case 4:for(n=e.readShort()/2,e.skip(6),r=e.times(n,e.readShort),e.skip(2),o=e.times(n,e.readShort),s=e.times(n,e.readShort_),a=e.times(n,e.readShort),l=(i.length+i.offset-e.offset())/2,c=e.times(l,e.readShort),t=0;n>t;++t)for(d=o[t],u=r[t],h=d;u>=h;++h)0===a[t]?p=h+s[t]:(f=a[t]/2-(n-t)+(h-d),p=c[f]||0,0!==p&&(p+=s[t])),i.codeMap[h]=65535&p}})}function t(e,t){function n(i){return t[e[i]]}var r,o,s,a,l,c,d,u,h,p,f,m,g,v,y,_,w,k=i(e),x=[],C=[],S=null,T=null;for(r=0;k.length>r;++r)o=k[r],s=n(o),a=s-o,(null==S||a!==T)&&(S&&C.push(S),x.push(o),T=a),S=o;for(S&&C.push(S),C.push(65535),x.push(65535),l=x.length,c=2*l,d=2*Math.pow(2,Math.floor(Math.log(l)/Math.LN2)),u=Math.log(d/2)/Math.LN2,h=c-d,p=[],f=[],m=[],r=0;l>r;++r){if(g=x[r],v=C[r],65535==g){p.push(0),f.push(0);break}if(y=n(g),g-y>=32768)for(p.push(0),f.push(2*(m.length+l-r)),_=g;v>=_;++_)m.push(n(_));else p.push(y-g),f.push(0)}return w=b(),w.writeShort(3),w.writeShort(1),w.writeLong(12),w.writeShort(4),w.writeShort(16+8*l+2*m.length),w.writeShort(0),w.writeShort(c),w.writeShort(d),w.writeShort(u),w.writeShort(h),C.forEach(w.writeShort),w.writeShort(0),x.forEach(w.writeShort),p.forEach(w.writeShort_),f.forEach(w.writeShort),m.forEach(w.writeShort),w.get()}return r({parse:function(t){var i,n=this,r=n.offset;t.offset(r),n.version=t.readShort(),i=t.readShort(),n.unicodeEntry=null,n.tables=t.times(i,function(){var i=new e(t,r);return i.isUnicode&&(n.unicodeEntry=i),i})},render:function(e,i){var n=b();return n.writeShort(0),n.writeShort(1),n.write(t(e,i)),n.get()},getUnicodeEntry:function(){if(!this.unicodeEntry)throw Error("Font doesn't have an Unicode encoding");return this.unicodeEntry}})}(),v=r({parse:function(e){e.offset(this.offset),this.version=e.readShort(),this.averageCharWidth=e.readShort_(),this.weightClass=e.readShort(),this.widthClass=e.readShort(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort_(),this.ySubscriptYSize=e.readShort_(),this.ySubscriptXOffset=e.readShort_(),this.ySubscriptYOffset=e.readShort_(),this.ySuperscriptXSize=e.readShort_(),this.ySuperscriptYSize=e.readShort_(),this.ySuperscriptXOffset=e.readShort_(),this.ySuperscriptYOffset=e.readShort_(),this.yStrikeoutSize=e.readShort_(),this.yStrikeoutPosition=e.readShort_(),this.familyClass=e.readShort_(),this.panose=e.times(10,e.readByte),this.charRange=e.times(4,e.readLong),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=e.times(2,e.readLong),this.version>1&&(this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()))},render:function(){return this.raw()}}),y=1e5,s.prototype={use:function(e){var t,i,n,r,o;if("string"==typeof e){for(i="",n=0;e.length>n;++n)t=this.use(e.charCodeAt(n)),i+=String.fromCharCode(t);return i}return t=this.unicodes[e],t||(t=this.next++,this.subset[t]=e,this.unicodes[e]=t,r=this.font.cmap.getUnicodeEntry().codeMap[e],r&&(this.ncid2ogid[t]=r,null==this.ogid2ngid[r]&&(o=this.nextGid++,this.ogid2ngid[r]=o,this.ngid2ogid[o]=r))),t},encodeText:function(e){return this.use(e)},glyphIds:function(){return i(this.ogid2ngid);
},glyphsFor:function(e,t){var i,n,r;for(t||(t={}),i=0;e.length>i;++i)n=e[i],t[n]||(r=t[n]=this.font.glyf.glyphFor(n),r&&r.compound&&this.glyphsFor(r.glyphIds,t));return t},render:function(){var e,n,r,o,s,a,l,c,d=this.glyphsFor(this.glyphIds());for(e in d)t(d,e)&&(e=parseInt(e,10),null==this.ogid2ngid[e]&&(n=this.nextGid++,this.ogid2ngid[e]=n,this.ngid2ogid[n]=e));return r=i(this.ngid2ogid),o=r.map(function(e){return this.ngid2ogid[e]},this),s=this.font,a=s.glyf.render(d,o,this.ogid2ngid),l=s.loca.render(a.offsets),this.lastChar=this.next-1,c={cmap:g.render(this.ncid2ogid,this.ogid2ngid),glyf:a.table,loca:l.table,hmtx:s.hmtx.render(o),hhea:s.hhea.render(o),maxp:s.maxp.render(o),post:s.post.render(o),name:s.name.render(this.psName),head:s.head.render(l.format),"OS/2":s.os2.render()},this.font.directory.render(c)},cidToGidMap:function(){var e,t,i,n=b(),r=0;for(e=this.firstChar;this.next>e;++e){for(;e>r;)n.writeShort(0),r++;t=this.ncid2ogid[e],t?(i=this.ogid2ngid[t],n.writeShort(i)):n.writeShort(0),r++}return n.get()}},a.prototype={parse:function(){var e=this.directory=new n(this.contents);this.head=e.readTable("head",l),this.loca=e.readTable("loca",c),this.hhea=e.readTable("hhea",d),this.maxp=e.readTable("maxp",u),this.hmtx=e.readTable("hmtx",h),this.glyf=e.readTable("glyf",p),this.name=e.readTable("name",f),this.post=e.readTable("post",m),this.cmap=e.readTable("cmap",g),this.os2=e.readTable("OS/2",v),this.psName=this.name.postscriptName,this.ascent=this.os2.ascent||this.hhea.ascent,this.descent=this.os2.descent||this.hhea.descent,this.lineGap=this.os2.lineGap||this.hhea.lineGap,this.scale=1e3/this.head.unitsPerEm},widthOfGlyph:function(e){return this.hmtx.forGlyph(e).advance*this.scale},makeSubset:function(){return new s(this)}},_.TTFFont=a}(this),function(e){e.PDFMixin={extend:function(e){e.events.push("pdfExport"),e.options.pdf=this.options,e.saveAsPDF=this.saveAsPDF},options:{fileName:"Export.pdf",proxyURL:"",paperSize:"auto",landscape:!1,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator",date:null},saveAsPDF:function(){if(!this.trigger("pdfExport")){var t=this.options.pdf;e.drawing.drawDOM(this.wrapper[0]).then(function(i){return e.drawing.exportPDF(i,t)}).done(function(i){e.saveAs({dataURI:i,fileName:t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy})})}}}}(kendo),function(e,t){"use strict";function i(){if(!e.pdf)throw Error("kendo.pdf.js is not loaded");return e.pdf}function n(e,t){function n(e,t){return d.pdf&&null!=d.pdf[e]?d.pdf[e]:t}function r(){var r,s,a,c,d,u,p;--o>0||(r=n("paperSize","auto"),s=!1,"auto"==r&&(h?(a=h.getSize(),r=[a.width,a.height],s=!0,c=h.getOrigin(),d=new D.Group,d.transform(new M.Matrix(1,0,0,1,(-c.x),(-c.y))),d.append(e),e=d):r="A4"),u=new(i().Document)({paperSize:r,landscape:n("landscape",!1),margin:n("margin"),addMargin:s,title:n("title"),author:n("author"),subject:n("subject"),keywords:n("keywords"),creator:n("creator"),date:n("date")}),p=u.addPage(),l(e,p,u),t(u.render(),u,p))}var o,s=[],c=[],d=e.options,u=T(e),h=u.bbox;e=u.root,e.traverse(function(e){a({Image:function(e){c.indexOf(e.src())<0&&c.push(e.src())},Text:function(e){var t=i().parseFontDef(e.options.font),n=i().getFontURL(t);s.indexOf(n)<0&&s.push(n)}},e)}),o=2,i().loadFonts(s,r),i().loadImages(c,r)}function r(e,t){n(e,function(e){t("data:application/pdf;base64,"+e.base64())})}function o(e,t){n(e,function(e){t(new Blob([e.get()],{type:"application/pdf"}))})}function s(t,i,n,s){window.Blob&&!e.support.browser.safari?o(t,function(t){e.saveAs({dataURI:t,fileName:i}),s&&s(t)}):r(t,function(t){e.saveAs({dataURI:t,fileName:i,proxyURL:n}),s&&s(t)})}function a(e,t){var i=e[t.nodeType];return i?i.call.apply(i,arguments):t}function l(e,t,i){var n,r,o;e.DEBUG&&t.comment(e.DEBUG),n=e.transform(),r=e.opacity(),t.save(),null!=r&&1>r&&t.setOpacity(r),c(e,t,i),d(e,t,i),u(e,t,i),n&&(o=n.matrix(),t.transform(o.a,o.b,o.c,o.d,o.e,o.f)),a({Path:v,MultiPath:y,Circle:_,Arc:b,Text:w,Image:x,Group:k},e,t,i),t.restore()}function c(e,t){var i,n,r,o,s,a,l=e.stroke&&e.stroke();if(l){if(i=l.color){if(i=S(i),null==i)return;t.setStrokeColor(i.r,i.g,i.b),1!=i.a&&t.setStrokeOpacity(i.a)}if(n=l.width,null!=n){if(0===n)return;t.setLineWidth(n)}r=l.dashType,r&&t.setDashPattern(A[r],0),o=l.lineCap,o&&t.setLineCap(E[o]),s=l.lineJoin,s&&t.setLineJoin(I[s]),a=l.opacity,null!=a&&t.setStrokeOpacity(a)}}function d(e,t){var i,n,r=e.fill&&e.fill();if(r&&!(r instanceof D.Gradient)){if(i=r.color){if(i=S(i),null==i)return;t.setFillColor(i.r,i.g,i.b),1!=i.a&&t.setFillOpacity(i.a)}n=r.opacity,null!=n&&t.setFillOpacity(n)}}function u(e,t,i){var n=e.clip();n&&(g(n,t,i),t.clip())}function h(e){return e&&(e instanceof D.Gradient||e.color&&!/^(none|transparent)$/i.test(e.color)&&(null==e.width||e.width>0)&&(null==e.opacity||e.opacity>0))}function p(e,t,i,n){var r,o,s,a,l,c,d=e.fill();return d instanceof D.Gradient?(n?t.stroke():t.nop(),d instanceof D.LinearGradient?(r={x:d.start().x,y:d.start().y},o={x:d.end().x,y:d.end().y},s={type:"linear",start:r,end:o,userSpace:d.userSpace(),stops:d.stops.elements().map(function(e){var t,i=e.offset();return i=/%$/.test(i)?parseFloat(i)/100:parseFloat(i),t=S(e.color()),t.a*=e.opacity(),{offset:i,color:t}})},a=e.rawBBox(),l=a.topLeft(),c=a.getSize(),a={left:l.x,top:l.y,width:c.width,height:c.height},t.gradient(s,a),!0):void(window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in PDF output."))):void 0}function f(e,t,i){h(e.fill())&&h(e.stroke())?p(e,t,i,!0)||t.fillStroke():h(e.fill())?p(e,t,i,!1)||t.fill():h(e.stroke())?t.stroke():t.nop()}function m(e,t){var i,n,r,o=e.segments;if(4==o.length&&e.options.closed){for(i=[],n=0;o.length>n;++n){if(o[n].controlIn())return!1;i[n]=o[n].anchor()}if(r=i[0].y==i[1].y&&i[1].x==i[2].x&&i[2].y==i[3].y&&i[3].x==i[0].x||i[0].x==i[1].x&&i[1].y==i[2].y&&i[2].x==i[3].x&&i[3].y==i[0].y)return t.rect(i[0].x,i[0].y,i[2].x-i[0].x,i[2].y-i[0].y),!0}}function g(e,t,i){var n,r,o,s,a,l,c=e.segments;if(0!==c.length&&!m(e,t,i)){for(r=0;c.length>r;++r)o=c[r],s=o.anchor(),n?(a=n.controlOut(),l=o.controlIn(),a&&l?t.bezier(a.x,a.y,l.x,l.y,s.x,s.y):t.lineTo(s.x,s.y)):t.moveTo(s.x,s.y),n=o;e.options.closed&&t.close()}}function v(e,t,i){g(e,t,i),f(e,t,i)}function y(e,t,i){var n,r=e.paths;for(n=0;r.length>n;++n)g(r[n],t,i);f(e,t,i)}function _(e,t,i){var n=e.geometry();t.circle(n.center.x,n.center.y,n.radius),f(e,t,i)}function b(e,t,i){var n,r=e.geometry().curvePoints();for(t.moveTo(r[0].x,r[0].y),n=1;r.length>n;)t.bezier(r[n].x,r[n++].y,r[n].x,r[n++].y,r[n].x,r[n++].y);f(e,t,i)}function w(e,t){var n,r=i().parseFontDef(e.options.font),o=e._position;e.fill()&&e.stroke()?n=i().TEXT_RENDERING_MODE.fillAndStroke:e.fill()?n=i().TEXT_RENDERING_MODE.fill:e.stroke()&&(n=i().TEXT_RENDERING_MODE.stroke),t.transform(1,0,0,-1,o.x,o.y+r.fontSize),t.beginText(),t.setFont(i().getFontURL(r),r.fontSize),t.setTextRenderingMode(n),t.showText(e.content()),t.endText()}function k(e,t,i){var n,r=e.children;for(n=0;r.length>n;++n)l(r[n],t,i)}function x(e,t){var i=e.src(),n=e.rect(),r=n.getOrigin(),o=n.getSize();t.transform(o.width,0,0,-o.height,r.x,r.y+o.height),t.drawImage(i)}function C(e,i){var n=t.Deferred();return e.options.set("pdf",i),D.pdf.toDataURL(e,n.resolve),n.promise()}function S(t){var i=e.parseColor(t,!0);return i?i.toRGB():null}function T(e){function t(e){return l=!0,e}function i(e){return e.visible()&&e.opacity()>0&&(h(e.fill())||h(e.stroke()))}function n(e){var t,i,n=[];for(t=0;e.length>t;++t)i=s(e[t]),null!=i&&n.push(i);return n}function r(e,t){var i,n=c,r=d;e.transform()&&(d=d.multiplyCopy(e.transform().matrix())),i=e.clip(),i&&(i=i.bbox(),i&&(i=i.bbox(d),c=c?M.Rect.intersect(c,i):i));try{return t()}finally{c=n,d=r}}function o(e){if(null==c)return!1;var t=e.rawBBox().bbox(d);return c&&t&&(t=M.Rect.intersect(t,c)),t}function s(s){if(!(s instanceof D.Group||s instanceof D.MultiPath)){var l=o(s);if(!l)return t(null);u=u?M.Rect.union(u,l):l}return a({Path:function(e){return 0!==e.segments.length&&i(e)?e:t(null)},MultiPath:function(e){if(!i(e))return t(null);var r=new D.MultiPath(e.options);return r.paths=n(e.paths),0===r.paths.length?t(null):r},Circle:function(e){return i(e)?e:t(null)},Arc:function(e){return i(e)?e:t(null)},Text:function(e){return/\S/.test(e.content())&&i(e)?e:t(null)},Image:function(e){return e.visible()&&e.opacity()>0?e:t(null)},Group:function(i){return r(i,function(){var r=new D.Group(i.options);return r.children=n(i.children),i!==e&&0===r.children.length?t(null):r})}},s)}var l,c=!1,d=M.Matrix.unit(),u=null;do l=!1,e=s(e);while(e&&l);return{root:e,bbox:u}}var D=e.drawing,M=e.geometry,A={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]},E={butt:0,round:1,square:2},I={miter:0,round:1,bevel:2};e.deepExtend(D,{exportPDF:C,pdf:{toDataURL:r,toBlob:o,saveAs:s,toStream:n}})}(window.kendo,window.kendo.jQuery),function(e,t,i){"use strict";function n(e){function t(t){return n=t.exec(e.substr(s))}function i(e){return e.replace(/^\s+|\s+$/g,"")}for(var n,r=[],o=0,s=0,a=0,l=!1;e.length>s;)t(/^\s+/)?s+=n[0].length:t(/^[\(\[\{]/)?(a++,s++):t(/^[\)\]\}]/)?(a--,s++):!l&&t(/^[\"\']/)?(l=n[0],s++):"'"==l&&t(/^\\\'/)?s+=2:'"'==l&&t(/^\\\"/)?s+=2:"'"==l&&t(/^\'/)?(l=!1,s++):'"'==l&&t(/^\"/)?(l=!1,s++):t(/^\s*,\s*/)?(!l&&!a&&s>o&&(r.push(i(e.substring(o,s))),o=s+n[0].length),s+=n[0].length):s++;return s>o&&r.push(i(e.substring(o,s))),r}function r(e,t){var i=kendo.parseColor(e);return i&&(i=i.toRGB(),t?i=i.toCssRgba():0===i.a&&(i=null)),i}function o(e,t){function i(e){W[e]||(W[e]=!0,o.push(e))}function n(){--r<=0&&t()}var r,o=[];!function e(t){var n,r=s(h(u(t),"background-image"));for(/^img$/i.test(t.tagName)&&i(t.src),r&&i(r),n=t.firstChild;n;n=n.nextSibling)1==n.nodeType&&e(n)}(e),r=o.length,0===r&&n(),o.forEach(function(e){var t=W[e]=new Image;t.onload=n,t.onerror=function(){W[e]=null,n()},t.src=e,(t.complete||void 0===t.complete)&&(t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t.src=e)})}function s(e){var t=/^\s*url\((['"]?)(.*?)\1\)\s*$/i.exec(e);return t?t[2]:void 0}function a(e,t,i){var n,r;$=Object.create($),$[e.tagName.toLowerCase()]={element:e,style:t},n=h(t,"text-decoration"),n&&"none"!=n&&(r=h(t,"color"),n.split(/\s+/g).forEach(function(e){$[e]||($[e]=r)})),d(e)&&($._stackingContext={element:e,group:i})}function l(){$=Object.getPrototypeOf($)}function c(e){if(null!=$._clipbox){var t=e.bbox($._matrix);$._clipbox=$._clipbox?B.Rect.intersect($._clipbox,t):t}}function d(e){function t(e){return h(i,e)}var i=u(e);return"none"!=t("transform")||"static"!=t("position")&&"auto"!=t("z-index")||t("opacity")<1||void 0}function u(e){return window.getComputedStyle(e)}function h(e,t){return e.getPropertyValue(t)||V.webkit&&e.getPropertyValue("-webkit-"+t)||V.firefox&&e.getPropertyValue("-moz-"+t)||V.opera&&e.getPropertyValue("-o-"+t)||V.msie&&e.getPropertyValue("-ms-"+t)}function p(e,t,i,n){e.setProperty(t,i,n),V.webkit?e.setProperty("-webkit-"+t,i,n):V.firefox?e.setProperty("-moz-"+t,i,n):V.opera?e.setProperty("-o-"+t,i,n):V.msie&&(e.setProperty("-ms-"+t,i,n),t="ms"+t.replace(/(^|-)([a-z])/g,function(e,t,i){return t+i.toUpperCase()}),e[t]=i)}function f(e,i){return i="border-"+i,{width:t(h(e,i+"-width")),style:h(e,i+"-style"),color:r(h(e,i+"-color"),!0)}}function m(e,t){var i=e.style.cssText,n=t();return e.style.cssText=i,n}function g(e,i){var n=h(e,"border-"+i+"-radius").split(/\s+/g).map(t);return 1==n.length&&n.push(n[0]),S({x:n[0],y:n[1]})}function v(e){var t=e.getBoundingClientRect();return t=y(t,"border-*-width",e),t=y(t,"padding-*",e)}function y(e,i,n){var r,o,s,a,l;return"string"==typeof i?(r=u(n),o=t(h(r,i.replace("*","top"))),s=t(h(r,i.replace("*","right"))),a=t(h(r,i.replace("*","bottom"))),l=t(h(r,i.replace("*","left")))):"number"==typeof i&&(o=s=a=l=i),{top:e.top+o,right:e.right-s,bottom:e.bottom-a,left:e.left+l,width:e.right-e.left-s-l,height:e.bottom-e.top-a-o}}function _(e){var i,n,r=h(e,"transform");return"none"==r?null:(i=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(r),i?(n=h(e,"transform-origin"),i=i[1].split(/\s*,\s*/g).map(t),n=n.split(/\s+/g).map(t),{matrix:i,origin:n}):void 0)}function b(e){return 180*e/i.PI%360}function w(e){var n=t(e);return/grad$/.test(e)?i.PI*n/200:/rad$/.test(e)?n:/turn$/.test(e)?i.PI*n*2:/deg$/.test(e)?i.PI*n/180:void 0}function k(e,t){return t=new B.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),e.transform(t),t}function x(e,t){e.clip(t)}function C(e,t,i,n){for(var r=new B.Arc([t,i],n).curvePoints(),o=1;r.length>o;)e.curveTo(r[o++],r[o++],r[o++])}function S(e){return(0>=e.x||0>=e.y)&&(e.x=e.y=0),e}function T(e,i,n){var r,o,s,a,l,c,d,p,m=u(e),v=g(m,"top-left"),y=g(m,"top-right"),_=g(m,"bottom-left"),b=g(m,"bottom-right");return("padding"==n||"content"==n)&&(r=f(m,"top"),o=f(m,"right"),s=f(m,"bottom"),a=f(m,"left"),v.x-=a.width,v.y-=r.width,y.x-=o.width,y.y-=r.width,b.x-=o.width,b.y-=s.width,_.x-=a.width,_.y-=s.width,"content"==n&&(l=t(h(m,"padding-top")),c=t(h(m,"padding-right")),d=t(h(m,"padding-bottom")),p=t(h(m,"padding-left")),v.x-=p,v.y-=l,y.x-=c,y.y-=l,b.x-=c,b.y-=d,_.x-=p,_.y-=d)),"number"==typeof n&&(v.x-=n,v.y-=n,y.x-=n,y.y-=n,b.x-=n,b.y-=n,_.x-=n,_.y-=n),D(i,v,y,b,_)}function D(e,t,i,n,r){var o=new L.Path({fill:null,stroke:null});return S(t),S(i),S(n),S(r),o.moveTo(e.left,e.top+t.y),t.x&&C(o,e.left+t.x,e.top+t.y,{startAngle:-180,endAngle:-90,radiusX:t.x,radiusY:t.y}),o.lineTo(e.right-i.x,e.top),i.x&&C(o,e.right-i.x,e.top+i.y,{startAngle:-90,endAngle:0,radiusX:i.x,radiusY:i.y}),o.lineTo(e.right,e.bottom-n.y),n.x&&C(o,e.right-n.x,e.bottom-n.y,{startAngle:0,endAngle:90,radiusX:n.x,radiusY:n.y}),o.lineTo(e.left+r.x,e.bottom),r.x&&C(o,e.left+r.x,e.bottom-r.y,{startAngle:90,endAngle:180,radiusX:r.x,radiusY:r.y}),o.close()}function M(e,o){function a(t){var i,n,r,o,s,a;if(/^td$/i.test(e.tagName)&&(i=$.table,i&&"collapse"==h(i.style,"border-collapse"))){if(n=f(i.style,"left").width,r=f(i.style,"top").width,0===n&&0===r)return t;if(o=i.element.getBoundingClientRect(),s=i.element.rows[0].cells[0],a=s.getBoundingClientRect(),a.top==o.top||a.left==o.left)return U.call(t).map(function(e){return{left:e.left+n,top:e.top+r,right:e.right+n,bottom:e.bottom+r,height:e.height,width:e.width}})}return t}function l(e,t,n,r,s,a,l,c){function d(t,r,o){var s=i.PI/2*t/(t+n),a={x:r.x-t,y:r.y-n},l=new L.Path({fill:{color:e},stroke:null}).moveTo(0,0);k(l,o),C(l,0,r.y,{startAngle:-90,endAngle:-b(s),radiusX:r.x,radiusY:r.y}),a.x>0&&a.y>0?(l.lineTo(a.x*i.cos(s),r.y-a.y*i.sin(s)),C(l,0,r.y,{startAngle:-b(s),endAngle:-90,radiusX:a.x,radiusY:a.y,anticlockwise:!0})):a.x>0?l.lineTo(a.x,n).lineTo(0,n):l.lineTo(a.x,n).lineTo(a.x,0),h.append(l.close())}if(!(0>=n)){var u,h=new L.Group;k(h,c),o.append(h),S(a),S(l),u=new L.Path({fill:{color:e},stroke:null}),h.append(u),u.moveTo(a.x?i.max(a.x,r):0,0).lineTo(t-(l.x?i.max(l.x,s):0),0).lineTo(t-i.max(l.x,s),n).lineTo(i.max(a.x,r),n).close(),a.x&&d(r,a,[-1,0,0,1,a.x,0]),l.x&&d(s,l,[1,0,0,1,t-l.x,0])}}function d(e){var t,i,n,r,s,a,l,c=new L.Group;for(x(c,D(e,Y,Q,X,K)),o.append(c),J&&(t=new L.Path({fill:{color:J.toCssRgba()},stroke:null}),t.moveTo(e.left,e.top).lineTo(e.right,e.top).lineTo(e.right,e.bottom).lineTo(e.left,e.bottom).close(),c.append(t)),l=v.length;--l>=0;)i=v[l],n=_[l]||_[_.length-1],r=w[l]||w[w.length-1],s=M[l]||M[M.length-1],a=I[l]||I[I.length-1],p(c,e,i,n,r,s,a)}function p(i,n,r,o,a,l,c){function d(i,n,r,s,d){function u(){for(;g.origin.x>n.left;)g.origin.x-=r}function h(){for(;g.origin.y>n.top;)g.origin.y-=s}function p(){for(;n.right>g.origin.x;)d(i,g.clone()),g.origin.x+=r}var f,m,g,v,_=r/s,b=n;if("content-box"==l?(b=y(b,"border-*-width",e),b=y(b,"padding-*",e)):"padding-box"==l&&(b=y(b,"border-*-width",e)),/^\s*auto(\s+auto)?\s*$/.test(c)||(f=c.split(/\s+/g),r=/%$/.test(f[0])?b.width*t(f[0])/100:t(f[0]),s=1==f.length||"auto"==f[1]?r/_:/%$/.test(f[1])?b.height*t(f[1])/100:t(f[1])),m=(a+"").split(/\s+/),1==m.length&&(m[1]="50%"),m[0]=/%$/.test(m[0])?t(m[0])/100*(b.width-r):t(m[0]),m[1]=/%$/.test(m[1])?t(m[1])/100*(b.height-s):t(m[1]),g=new B.Rect([b.left+m[0],b.top+m[1]],[r,s]),"no-repeat"==o)d(i,g);else if("repeat-x"==o)u(),p();else if("repeat-y"==o)for(h();n.bottom>g.origin.y;)d(i,g.clone()),g.origin.y+=s;else if("repeat"==o)for(u(),h(),v=g.origin.clone();n.bottom>g.origin.y;)g.origin.x=v.x,p(),g.origin.y+=s}var u,h,p;r&&"none"!=r&&(/^url\(\"data:image\/svg/i.test(r)||(u=s(r),u?(h=W[u],h&&h.width>0&&h.height>0&&d(i,n,h.width,h.height,function(e,t){e.append(new L.Image(u,t))})):(p=O(r),p&&d(i,n,n.width,n.height,A(p)))))}function m(t,i,n){function r(e){return{x:e.y,y:e.x}}var s,a,c;if(0!==t.width&&0!==t.height&&(d(t),s=G.width>0&&(i&&"ltr"==Z||n&&"rtl"==Z),a=j.width>0&&(n&&"ltr"==Z||i&&"rtl"==Z),0!==N.width||0!==G.width||0!==j.width||0!==q.width)){if(N.color==j.color&&N.color==q.color&&N.color==G.color&&N.width==j.width&&N.width==q.width&&N.width==G.width&&s&&a)return t=y(t,N.width/2),c=T(e,t,N.width/2),c.options.stroke={color:N.color,width:N.width},void o.append(c);if(0===Y.x&&0===Q.x&&0===X.x&&0===K.x&&2>N.width&&2>G.width&&2>j.width&&2>q.width)return N.width>0&&o.append(new L.Path({stroke:{width:N.width,color:N.color}}).moveTo(t.left,t.top+N.width/2).lineTo(t.right,t.top+N.width/2)),q.width>0&&o.append(new L.Path({stroke:{width:q.width,color:q.color}}).moveTo(t.left,t.bottom-q.width/2).lineTo(t.right,t.bottom-q.width/2)),s&&o.append(new L.Path({stroke:{width:G.width,color:G.color}}).moveTo(t.left+G.width/2,t.top).lineTo(t.left+G.width/2,t.bottom)),void(a&&o.append(new L.Path({stroke:{width:j.width,color:j.color}}).moveTo(t.right-j.width/2,t.top).lineTo(t.right-j.width/2,t.bottom)));l(N.color,t.width,N.width,G.width,j.width,Y,Q,[1,0,0,1,t.left,t.top]),l(q.color,t.width,q.width,j.width,G.width,X,K,[-1,0,0,-1,t.right,t.bottom]),l(G.color,t.height,G.width,q.width,N.width,r(K),r(Y),[0,-1,1,0,t.left,t.bottom]),l(j.color,t.height,j.width,N.width,q.width,r(Q),r(X),[0,1,-1,0,t.right,t.top])}}var v,_,w,M,I,P,z,H,R=u(e),N=f(R,"top"),j=f(R,"right"),q=f(R,"bottom"),G=f(R,"left"),Y=g(R,"top-left"),Q=g(R,"top-right"),K=g(R,"bottom-left"),X=g(R,"bottom-right"),Z=h(R,"direction"),J=h(R,"background-color");for(J=r(J),v=n(h(R,"background-image")),_=n(h(R,"background-repeat")),w=n(h(R,"background-position")),M=n(h(R,"background-origin")),I=n(h(R,"background-size")),V.msie&&10>V.version&&(w=n(e.currentStyle.backgroundPosition)),P=y(e.getBoundingClientRect(),"border-*-width",e),function(){var e,i,n,r,s,a,l,d=h(R,"clip"),u=/^\s*rect\((.*)\)\s*$/.exec(d);u&&(e=u[1].split(/[ ,]+/g),i="auto"==e[0]?P.top:t(e[0])+P.top,n="auto"==e[1]?P.right:t(e[1])+P.left,r="auto"==e[2]?P.bottom:t(e[2])+P.top,s="auto"==e[3]?P.left:t(e[3])+P.left,a=new L.Group,l=(new L.Path).moveTo(s,i).lineTo(n,i).lineTo(n,r).lineTo(s,r).close(),x(a,l),o.append(a),o=a,c(l))}(),z=e.getClientRects(),1==z.length&&(z=[e.getBoundingClientRect()]),z=a(z),H=0;z.length>H;++H)m(z[H],0===H,H==z.length-1);return function(){function t(){var t=T(e,P,"padding"),i=new L.Group;x(i,t),o.append(i),o=i,c(t)}/^(hidden|auto|scroll) /.test(h(R,"overflow"))?t():/^(hidden|auto|scroll)/.test(h(R,"overflow-x"))?t():/^(hidden|auto|scroll)/.test(h(R,"overflow-y"))&&t()}(),E(e,o)||F(e,o),o}function A(e){return function(n,r){var o,s,a,l,c,d,u,h,p,f,m,g,v,y=r.width(),_=r.height();switch(r.topLeft(),e.type){case"linear":switch(o=null!=e.angle?e.angle:i.PI,e.to){case"top":o=0;break;case"left":o=-i.PI/2;break;case"bottom":o=i.PI;break;case"right":o=i.PI/2;break;case"top left":case"left top":o=-i.atan2(_,y);break;case"top right":case"right top":o=i.atan2(_,y);break;case"bottom left":case"left bottom":o=i.PI+i.atan2(_,y);break;case"bottom right":case"right bottom":o=i.PI-i.atan2(_,y)}e.reverse&&(o-=i.PI),o%=2*i.PI,0>o&&(o+=2*i.PI),s=i.abs(y*i.sin(o))+i.abs(_*i.cos(o)),a=i.atan(y*i.tan(o)/_),l=i.sin(a),c=i.cos(a),d=i.abs(l)+i.abs(c),u=d/2*l,h=d/2*c,o>i.PI/2&&3*i.PI/2>=o&&(u=-u,h=-h),p=[],f=0,m=e.stops.map(function(i,n){var r,o=i.percent;return o?o=t(o)/100:i.length?o=t(i.length)/s:0===n?o=0:n==e.stops.length-1&&(o=1),r={color:i.color.toCssRgba(),offset:o},null!=o?(f=o,p.forEach(function(e,t){var i=e.stop;i.offset=e.left+(f-e.left)*(t+1)/(p.length+1)}),p=[]):p.push({left:f,stop:r}),r}),g=[.5-u,.5+h],v=[.5+u,.5-h],n.append(L.Path.fromRect(r).stroke(null).fill(new L.LinearGradient({start:g,end:v,stops:m,userSpace:!1})));break;case"radial":window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in HTML renderer")}}}function E(t,i){var n,r,o,s;return t.getAttribute(kendo.attr("role"))&&(n=kendo.widgetInstance(e(t)),n&&(n.exportDOMVisual||n.exportVisual))?(r=n.exportDOMVisual?n.exportDOMVisual():n.exportVisual(),o=new L.Group,o.children.push(r),s=t.getBoundingClientRect(),o.transform(B.transform().translate(s.left,s.top)),i.append(o),!0):void 0}function I(e,t,i){var n=v(e),r=new B.Rect([n.left,n.top],[n.width,n.height]),o=new L.Image(t,r);x(o,T(e,n,"content")),i.append(o)}function P(e,i){var n=u(e),r=u(i),o=t(h(n,"z-index")),s=t(h(r,"z-index")),a=h(n,"position"),l=h(r,"position");return isNaN(o)&&isNaN(s)?/static|absolute/.test(a)&&/static|absolute/.test(l)?0:"static"==a?-1:"static"==l?1:0:isNaN(o)?0===s?0:s>0?-1:1:isNaN(s)?0===o?0:o>0?1:-1:t(o)-t(s)}function F(e,t){var i,n,r,o,s,a,l,c,d;switch(e.tagName.toLowerCase()){case"img":I(e,e.src,t);break;case"canvas":try{I(e,e.toDataURL("image/jpeg"),t)}catch(e){}break;case"textarea":case"input":break;default:for(i=[],n=[],r=[],o=[],s=e.firstChild;s;s=s.nextSibling)switch(s.nodeType){case 3:/\S/.test(s.data)&&z(e,s,t);break;case 1:a=u(s),l=h(a,"display"),c=h(a,"float"),d=h(a,"position"),"static"!=d?o.push(s):"inline"!=l?"none"!=c?n.push(s):i.push(s):r.push(s)}i.sort(P).forEach(function(e){R(e,t)}),n.sort(P).forEach(function(e){R(e,t)}),r.sort(P).forEach(function(e){R(e,t)}),o.sort(P).forEach(function(e){R(e,t)})}}function z(e,i,n){function r(){for(var e,t,n;!/\S/.test(a.charAt(p));){if(p>=f)return!0;p++}for(l.setStart(i,p),e=0;++p<=f;)if(++e,l.setEnd(i,p),e>1&&(d&&/\s/.test(a.charAt(p-1))||l.getClientRects().length>1)){l.setEnd(i,--p);break}t=l.getClientRects()[0],n=(""+l).replace(/\s+$/,""),o(n,t)}function o(e,t){var i,r,o;e=e.replace(/[\r\n ]+/g," "),V.msie&&!isNaN(g)&&(i=L.util.measureText(e,{font:v}),r=(t.top+t.bottom-i.height)/2,t={top:r,right:t.right,bottom:r+i.height,left:t.left,height:i.height,width:t.right-t.left}),o=new L.Text(e,new B.Point(t.left,t.top),{font:v,fill:{color:y}}),n.append(o),s(t)}function s(e){function t(t,i){var r,o;t&&(r=m/12,o=new L.Path({stroke:{width:r,color:t}}),i-=r,o.moveTo(e.left,i).lineTo(e.right,i),n.append(o))}t($.underline,e.bottom),t($["line-through"],e.bottom-e.height/2.7),t($.overline,e.top)}var a,l,c,d,p,f,m,g,v,y,_=u(e);if(!(t(h(_,"text-indent"))<-500)&&(a=i.data,l=e.ownerDocument.createRange(),c=h(_,"text-align"),d="justify"==c,p=0,f=/\S\s*$/.exec(i.data).index+1,m=h(_,"font-size"),g=h(_,"line-height"),v=[h(_,"font-style"),h(_,"font-variant"),h(_,"font-weight"),m,h(_,"font-family")].join(" "),m=t(m),g=t(g),0!==m))for(y=h(_,"color");!r(););}function H(e,t){var i,n,r=$._stackingContext.group,o=r.children;for(i=0;o.length>i&&!(null!=o[i]._dom_zIndex&&o[i]._dom_zIndex>t);++i);return n=new L.Group,r.insertAt(n,i),n._dom_zIndex=t,$._clipbox&&n.clip(L.Path.fromRect($._clipbox)),n}function R(i,n){var r,o,s,c,d,f,g;/^(style|script|link|meta|iframe|svg)$/i.test(i.tagName)||null!=$._clipbox&&(r=u(i),o=t(h(r,"opacity")),s=h(r,"visibility"),c=h(r,"display"),0!==o&&"hidden"!=s&&"none"!=c&&(d=_(r),g=h(r,"z-index"),(d||1>o)&&"auto"==g&&(g=0),"auto"!=g?f=H(n,g):(f=new L.Group,n.append(f)),f.DEBUG=e(i).data("debug"),1>o&&f.opacity(o*f.opacity()),a(i,r,f),d?m(i,function(){var e,t,n,o;p(i.style,"transform","none","important"),p(i.style,"transition","none","important"),"static"==h(r,"position")&&p(i.style,"position","relative","important"),e=i.getBoundingClientRect(),t=e.left+d.origin[0],n=e.top+d.origin[1],o=[1,0,0,1,-t,-n],o=N(o,d.matrix),o=N(o,[1,0,0,1,t,n]),o=k(f,o),$._matrix=$._matrix.multiplyCopy(o),M(i,f)}):M(i,f),l()))}function N(e,t){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=t[0],c=t[1],d=t[2],u=t[3],h=t[4],p=t[5];return[i*l+n*d,i*c+n*u,r*l+o*d,r*c+o*u,s*l+a*d+h,s*c+a*u+p]}var $,O,L=kendo.drawing,B=kendo.geometry,U=Array.prototype.slice,V=kendo.support.browser,W={};L.drawDOM=function(t){var i=e.Deferred();return t=e(t)[0],t?o(t,function(){var e=new L.Group,n=t.getBoundingClientRect();k(e,[1,0,0,1,-n.left,-n.top]),$._clipbox=!1,$._matrix=B.Matrix.unit(),$._stackingContext={element:t,group:e},R(t,e),i.resolve(e)}):i.reject("No element to export"),i.promise()},$={},O=function(){var e=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/,t=/^([-0-9.]+%)/,i=/^([-0-9.]+px)/,n=/^(left|right|top|bottom|to|center)\W/,r=/^([-0-9.]+(deg|grad|rad|turn))/,o=/^(\s+)/,s=/^(\()/,a=/^(\))/,l=/^(,)/;return function(c){function d(){var e=o.exec(c);e&&(c=c.substr(e[1].length))}function u(e){d();var t=e.exec(c);return t?(c=c.substr(t[1].length),t[1]):void 0}function h(){var e,n,r=kendo.parseColor(c,!0);return r?(c=c.substr(r.match[0].length),r=r.toRGB(),(e=u(i))||(n=u(t)),{color:r,length:e,percent:n}):void 0}function p(e){var i,o,d,p,m,g,v=[],y=!1;if(u(s)){for(i=u(r),i?(i=w(i),u(l)):(o=u(n),"to"==o?o=u(n):o&&/^-/.test(e)&&(y=!0),d=u(n),u(l)),/-moz-/.test(e)&&null==i&&null==o&&(p=u(t),m=u(t),y=!0,"0%"==p?o="left":"100%"==p&&(o="right"),"0%"==m?d="top":"100%"==m&&(d="bottom"),u(l));c&&!u(a)&&(g=h());)v.push(g),u(l);return{type:"linear",angle:i,to:o&&d?o+" "+d:o?o:d?d:null,stops:v,reverse:y,orig:f}}}var f=c,m=u(e);return m?p(m):void 0}}()}(window.kendo.jQuery,parseFloat,Math),function(e){var t=e.noop,i=window.kendo,n=i.Class,r=i.util,o=i.animationFrame,s=i.deepExtend,a=n.extend({init:function(e,t){var i=this;i.options=s({},i.options,t),i.element=e},options:{duration:500,easing:"swing"},setup:t,step:t,play:function(){var t=this,i=t.options,n=e.easing[i.easing],s=i.duration,a=i.delay||0,l=r.now()+a,c=l+s;0===s?(t.step(1),t.abort()):setTimeout(function(){var e=function(){var i,a,d,u;t._stopped||(i=r.now(),a=r.limitValue(i-l,0,s),d=a/s,u=n(d,a,0,1,s),t.step(u),c>i?o(e):t.abort())};e()},a)},abort:function(){this._stopped=!0},destroy:function(){this.abort()}}),l=function(){this._items=[]};l.prototype={register:function(e,t){this._items.push({name:e,type:t})},create:function(e,t){var i,n,r,o=this._items;if(t&&t.type)for(n=t.type.toLowerCase(),r=0;o.length>r;r++)if(o[r].name.toLowerCase()===n){i=o[r];break}return i?new i.type(e,t):void 0}},l.current=new l,a.create=function(e,t,i){return l.current.create(e,t,i)},s(i.drawing,{Animation:a,AnimationFactory:l})}(window.kendo.jQuery,Math),function(e){function t(t){var i,n=a.ui.validator.ruleResolvers||{},r={};for(i in n)e.extend(!0,r,n[i].resolve(t));return r}function i(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function n(e){return e=(e+"").split("."),e.length>1?e[1].length:0}function r(t){return e(e.parseHTML?e.parseHTML(t):t)}function o(t,i){var n,r,o,s,l=e();for(o=0,s=t.length;s>o;o++)n=t[o],u.test(n.className)&&(r=n.getAttribute(a.attr("for")),r===i&&(l=l.add(n)));return l}var s,a=window.kendo,l=a.ui.Widget,c=".kendoValidator",d="k-invalid-msg",u=RegExp(d,"i"),h="k-invalid",p=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,f=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,m=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",g=":checkbox:not([disabled],[readonly])",v="[type=number],[type=range]",y="blur",_="name",b="form",w="novalidate",k=e.proxy,x=function(e,t){return"string"==typeof t&&(t=RegExp("^(?:"+t+")$")),t.test(e)},C=function(e,t,i){var n=e.val();return!e.filter(t).length||""===n||x(n,i)},S=function(e,t){return!!e.length&&null!=e[0].attributes[t]};a.ui.validator||(a.ui.validator={rules:{},messages:{}}),s=l.extend({init:function(i,n){var r=this,o=t(i),s="["+a.attr("validate")+"!=false]";n=n||{},n.rules=e.extend({},a.ui.validator.rules,o.rules,n.rules),n.messages=e.extend({},a.ui.validator.messages,o.messages,n.messages),l.fn.init.call(r,i,n),r._errorTemplate=a.template(r.options.errorTemplate),r.element.is(b)&&r.element.attr(w,w),r._inputSelector=m+s,r._checkboxSelector=g+s,r._errors={},r._attachEvents(),r._isValidated=!1},events:["validate","change"],options:{name:"Validator",errorTemplate:'<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date"},rules:{required:function(e){var t=e.filter("[type=checkbox]").length&&!e.is(":checked"),i=e.val();return!(S(e,"required")&&(""===i||!i||t))},pattern:function(e){return!e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length||""===e.val()||x(e.val(),e.attr("pattern"))},min:function(e){if(e.filter(v+",["+a.attr("type")+"=number]").filter("[min]").length&&""!==e.val()){var t=parseFloat(e.attr("min"))||0,i=a.parseFloat(e.val());return i>=t}return!0},max:function(e){if(e.filter(v+",["+a.attr("type")+"=number]").filter("[max]").length&&""!==e.val()){var t=parseFloat(e.attr("max"))||0,i=a.parseFloat(e.val());return t>=i}return!0},step:function(e){if(e.filter(v+",["+a.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var t,i=parseFloat(e.attr("min"))||0,r=parseFloat(e.attr("step"))||1,o=parseFloat(e.val()),s=n(r);return s?(t=Math.pow(10,s),(o-i)*t%(r*t)/Math.pow(100,s)===0):(o-i)%r===0}return!0},email:function(e){return C(e,"[type=email],["+a.attr("type")+"=email]",p)},url:function(e){return C(e,"[type=url],["+a.attr("type")+"=url]",f)},date:function(e){return!e.filter("[type^=date],["+a.attr("type")+"=date]").length||""===e.val()||null!==a.parseDate(e.val(),e.attr(a.attr("format")))}},validateOnBlur:!0},destroy:function(){l.fn.destroy.call(this),
this.element.off(c)},value:function(){return!!this._isValidated&&0===this.errors().length},_submit:function(e){return!!this.validate()||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_checkElement:function(e){var t=this.value();this.validateInput(e),this.value()!==t&&this.trigger("change")},_attachEvents:function(){var t=this;t.element.is(b)&&t.element.on("submit"+c,k(t._submit,t)),t.options.validateOnBlur&&(t.element.is(m)?(t.element.on(y+c,function(){t._checkElement(t.element)}),t.element.is(g)&&t.element.on("click"+c,function(){t._checkElement(t.element)})):(t.element.on(y+c,t._inputSelector,function(){t._checkElement(e(this))}),t.element.on("click"+c,t._checkboxSelector,function(){t._checkElement(e(this))})))},validate:function(){var e,t,i,n,r=!1,o=this.value();if(this._errors={},this.element.is(m))r=this.validateInput(this.element);else{for(n=!1,e=this.element.find(this._inputSelector),t=0,i=e.length;i>t;t++)this.validateInput(e.eq(t))||(n=!0);r=!n}return this.trigger("validate",{valid:r}),o!==r&&this.trigger("change"),r},validateInput:function(t){var n,o,s,l,c,u,p,f,m;return t=e(t),this._isValidated=!0,n=this,o=n._errorTemplate,s=n._checkValidity(t),l=s.valid,c="."+d,u=t.attr(_)||"",p=n._findMessageContainer(u).add(t.next(c).filter(function(){var t=e(this);return!t.filter("["+a.attr("for")+"]").length||t.attr(a.attr("for"))===u})).hide(),t.removeAttr("aria-invalid"),l?delete n._errors[u]:(f=n._extractMessage(t,s.key),n._errors[u]=f,m=r(o({message:i(f)})),n._decorateMessageContainer(m,u),p.replaceWith(m).length||m.insertAfter(t),m.show(),t.attr("aria-invalid",!0)),t.toggleClass(h,!l),l},hideMessages:function(){var e=this,t="."+d,i=e.element;i.is(m)?i.next(t).hide():i.find(t).hide()},_findMessageContainer:function(t){var i,n,r,s=a.ui.validator.messageLocators,l=e();for(n=0,r=this.element.length;r>n;n++)l=l.add(o(this.element[n].getElementsByTagName("*"),t));for(i in s)l=l.add(s[i].locate(this.element,t));return l},_decorateMessageContainer:function(e,t){var i,n=a.ui.validator.messageLocators;e.addClass(d).attr(a.attr("for"),t||"");for(i in n)n[i].decorate(e,t);e.attr("role","alert")},_extractMessage:function(e,t){var i=this,n=i.options.messages[t],r=e.attr(_);return n=a.isFunction(n)?n(e):n,a.format(e.attr(a.attr(t+"-msg"))||e.attr("validationMessage")||e.attr("title")||n||"",r,e.attr(t))},_checkValidity:function(e){var t,i=this.options.rules;for(t in i)if(!i[t].call(this,e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],i=this._errors;for(e in i)t.push(i[e]);return t}}),a.ui.plugin(s)}(window.kendo.jQuery),function(e){function t(e,t){var i=e.x.location,n=e.y.location,r=t.x.location,o=t.y.location,s=i-r,a=n-o;return{center:{x:(i+r)/2,y:(n+o)/2},distance:Math.sqrt(s*s+a*a)}}function i(e){var t,i,n,r=[],s=e.originalEvent,a=e.currentTarget,l=0;if(e.api)r.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(i=s?s.changedTouches:[],t=i.length;t>l;l++)n=i[l],r.push({location:n,event:e,target:n.target,currentTarget:a,id:n.identifier,type:"touch"});else r.push(o.pointers||o.msPointers?{location:s,event:e,target:e.target,currentTarget:a,id:s.pointerId,type:"pointer"}:{id:1,event:e,target:e.target,currentTarget:a,location:e,type:"mouse"});return r}function n(e){for(var t=r.eventMap.up.split(" "),i=0,n=t.length;n>i;i++)e(t[i])}var r=window.kendo,o=r.support,s=window.document,a=r.Class,l=r.Observable,c=e.now,d=e.extend,u=o.mobileOS,h=u&&u.android,p=800,f=o.browser.msie?5:0,m="press",g="hold",v="select",y="start",_="move",b="end",w="cancel",k="tap",x="release",C="gesturestart",S="gesturechange",T="gestureend",D="gesturetap",M={api:0,touch:0,mouse:9,pointer:9},A=a.extend({init:function(e,t){var i=this;i.axis=e,i._updateLocationData(t),i.startLocation=i.location,i.velocity=i.delta=0,i.timeStamp=c()},move:function(e){var t=this,i=e["page"+t.axis],n=c(),r=n-t.timeStamp||1;(i||!h)&&(t.delta=i-t.location,t._updateLocationData(e),t.initialDelta=i-t.startLocation,t.velocity=t.delta/r,t.timeStamp=n)},_updateLocationData:function(e){var t=this,i=t.axis;t.location=e["page"+i],t.client=e["client"+i],t.screen=e["screen"+i]}}),E=a.extend({init:function(e,t,i){d(this,{x:new A("X",i.location),y:new A("Y",i.location),type:i.type,threshold:e.threshold||M[i.type],userEvents:e,target:t,currentTarget:i.currentTarget,initialTouch:i.target,id:i.id,pressEvent:i,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(e.proxy(this,"_hold"),this.userEvents.minHold),this._trigger(m,this.pressEvent)},_hold:function(){this._trigger(g,this.pressEvent)},move:function(e){var t=this;if(!t._finished){if(t.x.move(e.location),t.y.move(e.location),!t._moved){if(t._withinIgnoreThreshold())return;if(I.current&&I.current!==t.userEvents)return t.dispose();t._start(e)}t._finished||t._trigger(_,e)}},end:function(e){var t=this;t.endTime=c(),t._finished||(t._finished=!0,t._trigger(x,e),t._moved?t._trigger(b,e):t._trigger(k,e),clearTimeout(t._holdTimeout),t.dispose())},dispose:function(){var t=this.userEvents,i=t.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),i.splice(e.inArray(this,i),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){clearTimeout(this._holdTimeout),this.startTime=c(),this._moved=!0,this._trigger(y,e)},_trigger:function(e,t){var i=this,n=t.event,r={touch:i,x:i.x,y:i.y,target:i.target,event:n};i.userEvents.notify(e,r)&&n.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}}),I=l.extend({init:function(t,i){var a,c,u,h=this,M=r.guid();i=i||{},a=h.filter=i.filter,h.threshold=i.threshold||f,h.minHold=i.minHold||p,h.touches=[],h._maxTouches=i.multiTouch?2:1,h.allowSelection=i.allowSelection,h.captureUpIfMoved=i.captureUpIfMoved,h.eventNS=M,t=e(t).handler(h),l.fn.init.call(h),d(h,{element:t,surface:e(i.global&&!o.touch?s.documentElement:i.surface||t),stopPropagation:i.stopPropagation,pressed:!1}),h.surface.handler(h).on(r.applyEventMap("move",M),"_move").on(r.applyEventMap("up cancel",M),"_end"),t.on(r.applyEventMap("down",M),a,"_start"),(o.pointers||o.msPointers)&&t.css("-ms-touch-action","pinch-zoom double-tap-zoom"),i.preventDragEvent&&t.on(r.applyEventMap("dragstart",M),r.preventDefault),t.on(r.applyEventMap("mousedown",M),a,{root:t},"_select"),h.captureUpIfMoved&&o.eventCapture&&(c=h.surface[0],u=e.proxy(h.preventIfMoving,h),n(function(e){c.addEventListener(e,u,!0)})),h.bind([m,g,k,y,_,b,x,w,C,S,T,D,v],i)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var e,t=this;t._destroyed||(t._destroyed=!0,t.captureUpIfMoved&&o.eventCapture&&(e=t.surface[0],n(function(i){e.removeEventListener(i,t.preventIfMoving)})),t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t.element.removeData("handler"),t.surface.removeData("handler"),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget)},capture:function(){I.current=this},cancel:function(){this._disposeAll(),this.trigger(w)},notify:function(e,i){var n=this,r=n.touches;if(this._isMultiTouch()){switch(e){case _:e=S;break;case b:e=T;break;case k:e=D}d(i,{touches:r},t(r[0],r[1]))}return this.trigger(e,d(i,{type:e}))},press:function(e,t,i){this._apiCall("_start",e,t,i)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var e=this.touches;e.length>0;)e.pop().dispose()},_isMoved:function(){return e.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){(!this.allowSelection||this.trigger(v,{event:e}))&&e.preventDefault()},_start:function(t){var n,r,o=this,s=0,a=o.filter,l=i(t),c=l.length,d=t.which;if(!(d&&d>1||o._maxTouchesReached()))for(I.current=null,o.currentTarget=t.currentTarget,o.stopPropagation&&t.stopPropagation();c>s&&!o._maxTouchesReached();s++)r=l[s],n=a?e(r.currentTarget):o.element,n.length&&(r=new E(o,n,r),o.touches.push(r),r.press(),o._isMultiTouch()&&o.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_eachTouch:function(e,t){var n,r,o,s,a=this,l={},c=i(t),d=a.touches;for(n=0;d.length>n;n++)r=d[n],l[r.id]=r;for(n=0;c.length>n;n++)o=c[n],s=l[o.id],s&&s[e](o)},_apiCall:function(t,i,n,r){this[t]({api:!0,pageX:i,pageY:n,clientX:i,clientY:n,target:e(r||this.element)[0],stopPropagation:e.noop,preventDefault:e.noop})}});I.defaultThreshold=function(e){f=e},I.minHold=function(e){p=e},r.getTouches=i,r.touchDelta=t,r.UserEvents=I}(window.kendo.jQuery),function(e,t){function i(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}}function n(e,t){return parseInt(e.css(t),10)||0}function r(e,t){return Math.min(Math.max(e,t.min),t.max)}function o(e,t){var i=k(e),r=i.left+n(e,"borderLeftWidth")+n(e,"paddingLeft"),o=i.top+n(e,"borderTopWidth")+n(e,"paddingTop"),s=r+e.width()-t.outerWidth(!0),a=o+e.height()-t.outerHeight(!0);return{x:{min:r,max:s},y:{min:o,max:a}}}function s(e,i,n){for(var r,o,s=0,a=i&&i.length,l=n&&n.length;e&&e.parentNode;){for(s=0;a>s;s++)if(r=i[s],r.element[0]===e)return{target:r,targetElement:e};for(s=0;l>s;s++)if(o=n[s],f.matchesSelector.call(e,o.options.filter))return{target:o,targetElement:e};e=e.parentNode}return t}var a,l,c,d,u,h,p=window.kendo,f=p.support,m=window.document,g=p.Class,v=p.ui.Widget,y=p.Observable,_=p.UserEvents,b=e.proxy,w=e.extend,k=p.getOffset,x={},C={},S={},T=p.elementUnderCursor,D="keyup",M="change",A="dragstart",E="hold",I="drag",P="dragend",F="dragcancel",z="dragenter",H="dragleave",R="drop",N=y.extend({init:function(t,i){var n=this,r=t[0];n.capture=!1,r.addEventListener?(e.each(p.eventMap.down.split(" "),function(){r.addEventListener(this,b(n._press,n),!0)}),e.each(p.eventMap.up.split(" "),function(){r.addEventListener(this,b(n._release,n),!0)})):(e.each(p.eventMap.down.split(" "),function(){r.attachEvent(this,b(n._press,n))}),e.each(p.eventMap.up.split(" "),function(){r.attachEvent(this,b(n._release,n))})),y.fn.init.call(n),n.bind(["press","release"],i||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){var t=this;t.trigger("press"),t.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}),$=y.extend({init:function(t){var i=this;y.fn.init.call(i),i.forcedEnabled=!1,e.extend(i,t),i.scale=1,i.horizontal?(i.measure="offsetWidth",i.scrollSize="scrollWidth",i.axis="x"):(i.measure="offsetHeight",i.scrollSize="scrollHeight",i.axis="y")},makeVirtual:function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){(this._virtualMin!==e||this._virtualMax!==t)&&(this._virtualMin=e,this._virtualMax=t,this.update())},outOfBounds:function(e){return e>this.max||this.min>e},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,i=t.virtual?t._virtualMax:t.getTotal(),n=i*t.scale,r=t.getSize();0!==i&&(t.max=t.virtual?-t._virtualMin:0,t.size=r,t.total=n,t.min=Math.min(t.max,r-n),t.minScale=r/i,t.centerOffset=(n-r)/2,t.enabled=t.forcedEnabled||n>r,e||t.trigger(M,t))}}),O=y.extend({init:function(e){var t=this;y.fn.init.call(t),t.x=new $(w({horizontal:!0},e)),t.y=new $(w({horizontal:!1},e)),t.container=e.container,t.forcedMinScale=e.minScale,t.maxScale=e.maxScale||100,t.bind(M,e)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale),e.fitScale=Math.max(e.x.minScale,e.y.minScale),e.trigger(M)}}),L=y.extend({init:function(e){var t=this;w(t,e),y.fn.init.call(t)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this,i=t.dimension,n=t.axis,r=t.movable,o=r[n]+e;i.enabled&&((i.min>o&&0>e||o>i.max&&e>0)&&(e*=t.resistance),r.translateAxis(n,e),t.trigger(M,t))}}),B=g.extend({init:function(e){var t,i,n,r,o=this;w(o,{elastic:!0},e),n=o.elastic?.5:0,r=o.movable,o.x=t=new L({axis:"x",dimension:o.dimensions.x,resistance:n,movable:r}),o.y=i=new L({axis:"y",dimension:o.dimensions.y,resistance:n,movable:r}),o.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(e){o.gesture=e,o.offset=o.dimensions.container.offset()},gesturechange:function(e){var n,s,a,l=o.gesture,c=l.center,d=e.center,u=e.distance/l.distance,h=o.dimensions.minScale,p=o.dimensions.maxScale;h>=r.scale&&1>u&&(u+=.8*(1-u)),r.scale*u>=p&&(u=p/r.scale),s=r.x+o.offset.left,a=r.y+o.offset.top,n={x:(s-c.x)*u+d.x-s,y:(a-c.y)*u+d.y-a},r.scaleWith(u),t.dragMove(n.x),i.dragMove(n.y),o.dimensions.rescale(r.scale),o.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(t.dimension.enabled||i.dimension.enabled?(t.dragMove(e.x.delta),i.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),U=f.transitions.prefix+"Transform";l=f.hasHW3D?function(e,t,i){return"translate3d("+e+"px,"+t+"px,0) scale("+i+")"}:function(e,t,i){return"translate("+e+"px,"+t+"px) scale("+i+")"},c=y.extend({init:function(t){var i=this;y.fn.init.call(i),i.element=e(t),i.element[0].style.webkitTransformOrigin="left top",i.x=0,i.y=0,i.scale=1,i._saveCoordinates(l(i.x,i.y,i.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){w(this,e),this.refresh()},refresh:function(){var e,t=this,i=t.x,n=t.y;t.round&&(i=Math.round(i),n=Math.round(n)),e=l(i,n,t.scale),e!=t.coordinates&&(p.support.browser.msie&&10>p.support.browser.version?(t.element[0].style.position="absolute",t.element[0].style.left=t.x+"px",t.element[0].style.top=t.y+"px"):t.element[0].style[U]=e,t._saveCoordinates(e),t.trigger(M))},_saveCoordinates:function(e){this.coordinates=e}}),d=v.extend({init:function(e,t){var i,n=this;v.fn.init.call(n,e,t),i=n.options.group,i in C?C[i].push(n):C[i]=[n]},events:[z,H,R],options:{name:"DropTarget",group:"default"},destroy:function(){var e,t=this.options.group,i=C[t]||S[t];if(i.length>1){for(v.fn.destroy.call(this),e=0;i.length>e;e++)if(i[e]==this){i.splice(e,1);break}}else d.destroyGroup(t)},_trigger:function(e,i){var n=this,r=x[n.options.group];return r?n.trigger(e,w({},i.event,{draggable:r,dropTarget:i.dropTarget})):t},_over:function(e){this._trigger(z,e)},_out:function(e){this._trigger(H,e)},_drop:function(e){var t=this,i=x[t.options.group];i&&(i.dropped=!t._trigger(R,e))}}),d.destroyGroup=function(e){var t,i=C[e]||S[e];if(i){for(t=0;i.length>t;t++)v.fn.destroy.call(i[t]);i.length=0,delete C[e],delete S[e]}},d._cache=C,u=d.extend({init:function(e,t){var i,n=this;v.fn.init.call(n,e,t),i=n.options.group,i in S?S[i].push(n):S[i]=[n]},options:{name:"DropTargetArea",group:"default",filter:null}}),h=v.extend({init:function(e,t){var i=this;v.fn.init.call(i,e,t),i._activated=!1,i.userEvents=new _(i.element,{global:!0,allowSelection:!0,filter:i.options.filter,threshold:i.options.distance,start:b(i._start,i),hold:b(i._hold,i),move:b(i._drag,i),end:b(i._end,i),cancel:b(i._cancel,i),select:b(i._select,i)}),i._afterEndHandler=b(i._afterEnd,i),i._captureEscape=b(i._captureEscape,i)},events:[E,A,I,P,F],options:{name:"Draggable",distance:p.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(e){var t=this;e.keyCode===p.keys.ESC&&(t._trigger(F,{event:e}),t.userEvents.cancel())},_updateHint:function(t){var i,n=this,o=n.options,s=n.boundaries,a=o.axis,l=n.options.cursorOffset;l?i={left:t.x.location+l.left,top:t.y.location+l.top}:(n.hintOffset.left+=t.x.delta,n.hintOffset.top+=t.y.delta,i=e.extend({},n.hintOffset)),s&&(i.top=r(i.top,s.y),i.left=r(i.left,s.x)),"x"===a?delete i.top:"y"===a&&delete i.left,n.hint.css(i)},_shouldIgnoreTarget:function(t){var i=this.options.ignore;return i&&e(t).is(i)},_select:function(e){this._shouldIgnoreTarget(e.event.target)||e.preventDefault()},_start:function(i){var n,r=this,s=r.options,a=s.container,l=s.hint;return this._shouldIgnoreTarget(i.touch.initialTouch)||s.holdToDrag&&!r._activated?(r.userEvents.cancel(),t):(r.currentTarget=i.target,r.currentTargetOffset=k(r.currentTarget),l&&(r.hint&&r.hint.stop(!0,!0).remove(),r.hint=p.isFunction(l)?e(l.call(r,r.currentTarget)):l,n=k(r.currentTarget),r.hintOffset=n,r.hint.css({position:"absolute",zIndex:2e4,left:n.left,top:n.top}).appendTo(m.body),r.angular("compile",function(){return r.hint.removeAttr("ng-repeat"),{elements:r.hint.get(),scopeFrom:i.target}})),x[s.group]=r,r.dropped=!1,a&&(r.boundaries=o(a,r.hint)),r._trigger(A,i)&&(r.userEvents.cancel(),r._afterEnd()),r.userEvents.capture(),e(m).on(D,r._captureEscape),t)},_hold:function(e){this.currentTarget=e.target,this._trigger(E,e)?this.userEvents.cancel():this._activated=!0},_drag:function(i){var n=this;i.preventDefault(),n._withDropTarget(i,function(n,r){if(!n)return a&&(a._trigger(H,w(i,{dropTarget:e(a.targetElement)})),a=null),t;if(a){if(r===a.targetElement)return;a._trigger(H,w(i,{dropTarget:e(a.targetElement)}))}n._trigger(z,w(i,{dropTarget:e(r)})),a=w(n,{targetElement:r})}),n._trigger(I,w(i,{dropTarget:a})),n.hint&&n._updateHint(i)},_end:function(t){var i=this;i._withDropTarget(t,function(i,n){i&&(i._drop(w({},t,{dropTarget:e(n)})),a=null)}),i._trigger(P,t),i._cancel(t.event)},_cancel:function(){var e=this;e._activated=!1,e.hint&&!e.dropped?setTimeout(function(){e.hint.stop(!0,!0).animate(e.currentTargetOffset,"fast",e._afterEndHandler)},0):e._afterEnd()},_trigger:function(e,t){var i=this;return i.trigger(e,w({},t.event,{x:t.x,y:t.y,currentTarget:i.currentTarget,dropTarget:t.dropTarget}))},_withDropTarget:function(e,t){var n,r,o=this,a=o.options,l=C[a.group],c=S[a.group];(l&&l.length||c&&c.length)&&(n=T(e),o.hint&&i(o.hint[0],n)&&(o.hint.hide(),n=T(e),n||(n=T(e)),o.hint.show()),r=s(n,l,c),r?t(r.target,r.targetElement):t())},destroy:function(){var e=this;v.fn.destroy.call(e),e._afterEnd(),e.userEvents.destroy(),e.currentTarget=null},_afterEnd:function(){var t=this;t.hint&&t.hint.remove(),delete x[t.options.group],t.trigger("destroy"),e(m).off(D,t._captureEscape)}}),p.ui.plugin(d),p.ui.plugin(u),p.ui.plugin(h),p.TapCapture=N,p.containerBoundaries=o,w(p.ui,{Pane:B,PaneDimensions:O,Movable:c})}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.mobile,r=i.effects,o=n.ui,s=e.proxy,a=e.extend,l=o.Widget,c=i.Class,d=i.ui.Movable,u=i.ui.Pane,h=i.ui.PaneDimensions,p=r.Transition,f=r.Animation,m=Math.abs,g=500,v=.7,y=.96,_=10,b=55,w=.5,k=5,x="km-scroller-release",C="km-scroller-refresh",S="pull",T="change",D="resize",M="scroll",A=2,E=f.extend({init:function(e){var t=this;f.fn.init.call(t),a(t,e),t.userEvents.bind("gestureend",s(t.start,t)),t.tapCapture.bind("press",s(t.cancel,t))},enabled:function(){return this.dimensions.minScale>this.movable.scale},done:function(){return.01>this.dimensions.minScale-this.movable.scale},tick:function(){var e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}),I=f.extend({init:function(e){var t=this;f.fn.init.call(t),a(t,e,{transition:new p({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})}),t.tapCapture.bind("press",function(){t.cancel()}),t.userEvents.bind("end",s(t.start,t)),t.userEvents.bind("gestureend",s(t.start,t)),t.userEvents.bind("tap",s(t.onEnd,t))},onCancel:function(){this.transition.cancel()},freeze:function(e){var t=this;t.cancel(),t._moveTo(e)},onEnd:function(){var e=this;e.paneAxis.outOfBounds()?e._snapBack():e._end()},done:function(){return m(this.velocity)<1},start:function(e){var t,i=this;i.dimension.enabled&&(i.paneAxis.outOfBounds()?i._snapBack():(t=e.touch.id===A?0:e.touch[i.axis].velocity,i.velocity=Math.max(Math.min(t*i.velocityMultiplier,b),-b),i.tapCapture.captureNext(),f.fn.start.call(i)))},tick:function(){var e=this,t=e.dimension,i=e.paneAxis.outOfBounds()?w:e.friction,n=e.velocity*=i,r=e.movable[e.axis]+n;!e.elastic&&t.outOfBounds(r)&&(r=Math.max(Math.min(r,t.max),t.min),e.velocity=0),e.movable.moveAxis(e.axis,r)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var e=this,t=e.dimension,i=e.movable[e.axis]>t.max?t.max:t.min;e._moveTo(i)},_moveTo:function(e){this.transition.moveTo({location:e,duration:g,ease:p.easeOutExpo})}}),P=f.extend({init:function(e){var t=this;i.effects.Animation.fn.init.call(this),a(t,e,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return m(this.offset.y)<k&&m(this.offset.x)<k},onEnd:function(){this.moveTo(this.destination),this.callback&&this.callback.call()},setCoordinates:function(e,t){this.offset={},this.origin=e,this.destination=t},setCallback:function(e){e&&i.isFunction(e)?this.callback=e:e=t},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),F=c.extend({init:function(t){var i=this,n="x"===t.axis,r=e('<div class="km-touch-scrollbar km-'+(n?"horizontal":"vertical")+'-scrollbar" />');a(i,t,{element:r,elementSize:0,movable:new d(r),scrollMovable:t.movable,alwaysVisible:t.alwaysVisible,size:n?"width":"height"}),i.scrollMovable.bind(T,s(i.refresh,i)),i.container.append(r),t.alwaysVisible&&i.show()},refresh:function(){var e=this,t=e.axis,i=e.dimension,n=i.size,r=e.scrollMovable,o=n/i.total,s=Math.round(-r[t]*o),a=Math.round(n*o);o>=1?this.element.css("display","none"):this.element.css("display",""),s+a>n?a=n-s:0>s&&(a+=s,s=0),e.elementSize!=a&&(e.element.css(e.size,a+"px"),e.elementSize=a),e.movable.moveAxis(t,s)},show:function(){this.element.css({opacity:v,visibility:"visible"})},hide:function(){this.alwaysVisible||this.element.css({opacity:0})}}),z=l.extend({init:function(n,r){var o,c,p,f,g,v,y,_,b,w=this;return l.fn.init.call(w,n,r),n=w.element,(w._native=w.options.useNative&&i.support.hasNativeScrolling)?(n.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),a(w,{scrollElement:n,fixedContainer:n.children().first()}),t):(n.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>'),o=n.children().eq(1),c=new i.TapCapture(n),p=new d(o),f=new h({element:o,container:n,forcedEnabled:w.options.zoom}),g=this.options.avoidScrolling,v=new i.UserEvents(n,{allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:w.options.zoom,start:function(t){f.refresh();var i=m(t.x.velocity),n=m(t.y.velocity),r=2*i>=n,o=e.contains(w.fixedContainer[0],t.event.target),s=2*n>=i;!o&&!g(t)&&w.enabled&&(f.x.enabled&&r||f.y.enabled&&s)?v.capture():v.cancel()}}),y=new u({movable:p,dimensions:f,userEvents:v,elastic:w.options.elastic}),_=new E({movable:p,dimensions:f,userEvents:v,tapCapture:c}),b=new P({moveTo:function(e){w.scrollTo(e.x,e.y)}}),p.bind(T,function(){w.scrollTop=-p.y,w.scrollLeft=-p.x,w.trigger(M,{scrollTop:w.scrollTop,scrollLeft:w.scrollLeft})}),w.options.mousewheelScrolling&&n.on("DOMMouseScroll mousewheel",s(this,"_wheelScroll")),a(w,{movable:p,dimensions:f,zoomSnapBack:_,animatedScroller:b,userEvents:v,pane:y,tapCapture:c,pulled:!1,enabled:!0,scrollElement:o,scrollTop:0,scrollLeft:0,fixedContainer:n.children().first()}),w._initAxis("x"),w._initAxis("y"),w._wheelEnd=function(){w._wheel=!1,w.userEvents.end(0,w._wheelY)},f.refresh(),w.options.pullToRefresh&&w._initPullToRefresh(),t)},_wheelScroll:function(e){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var t=i.wheelDeltaY(e);t&&(this._wheelY+=t,this.userEvents.move(0,this._wheelY)),e.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:[S,M,D],_resize:function(){this._native||this.contentResized()},setOptions:function(e){var t=this;l.fn.setOptions.call(t,e),e.pullToRefresh&&t._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var e=this.dimensions;e.refresh(),this._scale(e.fitScale),this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(e,t){this._native?(this.scrollElement.scrollLeft(m(e)),this.scrollElement.scrollTop(m(t))):(this.dimensions.refresh(),this.movable.moveTo({x:e,y:t}))},animatedScrollTo:function(e,t,i){var n,r;this._native?this.scrollTo(e,t):(n={x:this.movable.x,y:this.movable.y},r={x:e,y:t},this.animatedScroller.setCoordinates(n,r),this.animatedScroller.setCallback(i),this.animatedScroller.start())},pullHandled:function(){var e=this;e.refreshHint.removeClass(C),e.hintContainer.html(e.pullTemplate({})),e.yinertia.onEnd(),e.xinertia.onEnd(),e.userEvents.cancel()},destroy:function(){l.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(e){this.dimensions.rescale(e),this.movable.scaleTo(e)},_initPullToRefresh:function(){var e=this;e.dimensions.y.forceEnabled(),e.pullTemplate=i.template(e.options.messages.pullTemplate),e.releaseTemplate=i.template(e.options.messages.releaseTemplate),e.refreshTemplate=i.template(e.options.messages.refreshTemplate),e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>"),e.refreshHint=e.scrollElement.children().first(),e.hintContainer=e.refreshHint.children(".km-template"),e.pane.y.bind("change",s(e._paneChange,e)),e.userEvents.bind("end",s(e._dragEnd,e))},_dragEnd:function(){var e=this;e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(x).addClass(C),e.hintContainer.html(e.refreshTemplate({})),e.yinertia.freeze(e.options.pullOffset/2),e.trigger("pull"))},_paneChange:function(){var e=this;e.movable.y/w>e.options.pullOffset?e.pulled||(e.pulled=!0,e.refreshHint.removeClass(C).addClass(x),e.hintContainer.html(e.releaseTemplate({}))):e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(x),e.hintContainer.html(e.pullTemplate({})))},_initAxis:function(e){var t=this,i=t.movable,n=t.dimensions[e],r=t.tapCapture,o=t.pane[e],s=new F({axis:e,movable:i,dimension:n,container:t.element,alwaysVisible:t.options.visibleScrollHints});n.bind(T,function(){s.refresh()}),o.bind(T,function(){s.show()}),t[e+"inertia"]=new I({axis:e,paneAxis:o,movable:i,tapCapture:r,userEvents:t.userEvents,dimension:n,elastic:t.options.elastic,friction:t.options.friction||y,velocityMultiplier:t.options.velocityMultiplier||_,end:function(){s.hide(),t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}});o.plugin(z)}(window.kendo.jQuery),function(e,t){function i(e){return e.position().top+3}var n=window.kendo,r=n.ui.Widget,o=e.proxy,s=!1,a=".kendoGroupable",l="change",c=n.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',{useWithBlock:!1}),d=function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(n.attr("title"))||t.attr(n.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')},u=e('<div class="k-grouping-dropclue"/>'),h=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,p=r.extend({init:function(c,h){var p,f,m=this,g=n.guid(),v=o(m._intializePositions,m),y=m._dropCuePositions=[];r.fn.init.call(m,c,h),s=n.support.isRtl(c),f=s?"right":"left",m.draggable=p=m.options.draggable||new n.ui.Draggable(m.element,{filter:m.options.draggableElements,hint:d,group:g}),m.groupContainer=e(m.options.groupContainer,m.element).kendoDropTarget({group:p.options.group,dragenter:function(e){m._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add"),u.css("top",i(m.groupContainer)).css(f,0).appendTo(m.groupContainer))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"),u.remove()},drop:function(t){var i,r=t.draggable.currentTarget,o=r.attr(n.attr("field")),a=r.attr(n.attr("title")),l=m.indicator(o),c=m._dropCuePositions,d=c[c.length-1];(r.hasClass("k-group-indicator")||m._canDrag(r))&&(d?(i=m._dropCuePosition(n.getOffset(u).left+parseInt(d.element.css("marginLeft"),10)*(s?-1:1)+parseInt(d.element.css("marginRight"),10)),i&&m._canDrop(e(l),i.element,i.left)&&(i.before?i.element.before(l||m.buildIndicator(o,a)):i.element.after(l||m.buildIndicator(o,a)),m._change())):(m.groupContainer.append(m.buildIndicator(o,a)),m._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:d,group:p.options.group,dragcancel:o(m._dragCancel,m),dragstart:function(e){var t=e.currentTarget,n=parseInt(t.css("marginLeft"),10),r=t.position(),o=s?r.left-n:r.left+t.outerWidth();v(),u.css({top:i(m.groupContainer),left:o}).appendTo(m.groupContainer),this.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")},dragend:function(){m._dragEnd(this)},drag:o(m._drag,m)}).on("click"+a,".k-button",function(t){t.preventDefault(),m._removeIndicator(e(this).parent())}).on("click"+a,".k-link",function(t){var i=e(this).parent(),r=m.buildIndicator(i.attr(n.attr("field")),i.attr(n.attr("title")),"asc"==i.attr(n.attr("dir"))?"desc":"asc");i.before(r).remove(),m._change(),t.preventDefault()}),p.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){m._dragEnd(this)},dragcancel:o(m._dragCancel,m),dragstart:function(e){var i,n,r;return m.options.allowDrag||m._canDrag(e.currentTarget)?(v(),y.length?(i=y[y.length-1].element,n=parseInt(i.css("marginRight"),10),r=i.position().left+i.outerWidth()+n):r=0,t):(e.preventDefault(),t)},drag:o(m._drag,m)}),m.dataSource=m.options.dataSource,m.dataSource&&m._refreshHandler?m.dataSource.unbind(l,m._refreshHandler):m._refreshHandler=o(m.refresh,m),
m.dataSource&&(m.dataSource.bind("change",m._refreshHandler),m.refresh())},refresh:function(){var t=this,i=t.dataSource;t.groupContainer&&t.groupContainer.empty().append(e.map(i.group()||[],function(e){var i=e.field.replace(h,"\\$1"),r=t.element.find(t.options.filter).filter("["+n.attr("field")+"="+i+"]");return t.buildIndicator(e.field,r.attr(n.attr("title")),e.dir)}).join("")),t._invalidateGroupContainer()},destroy:function(){var e=this;r.fn.destroy.call(e),e.groupContainer.off(a),e.groupContainer.data("kendoDropTarget")&&e.groupContainer.data("kendoDropTarget").destroy(),e.groupContainer.data("kendoDraggable")&&e.groupContainer.data("kendoDraggable").destroy(),e.options.draggable||e.draggable.destroy(),e.dataSource&&e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=null),e.groupContainer=e.element=e.draggable=null},options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(t){var i=e(".k-group-indicator",this.groupContainer);return e.grep(i,function(i){return e(i).attr(n.attr("field"))===t})[0]},buildIndicator:function(e,t,i){return c({field:e.replace(/"/g,"'"),dir:i,title:t,ns:n.ns})},descriptors:function(){var t,i,r,o,s,a=this,l=e(".k-group-indicator",a.groupContainer);return t=a.element.find(a.options.filter).map(function(){var t=e(this),r=t.attr(n.attr("aggregates")),a=t.attr(n.attr("field"));if(r&&""!==r)for(i=r.split(","),r=[],o=0,s=i.length;s>o;o++)r.push({field:a,aggregate:i[o]});return r}).toArray(),e.map(l,function(i){return i=e(i),r=i.attr(n.attr("field")),{field:r,dir:i.attr(n.attr("dir")),aggregates:t||[]}})},_removeIndicator:function(e){var t=this;e.remove(),t._invalidateGroupContainer(),t._change()},_change:function(){var e=this;e.dataSource&&e.dataSource.group(e.descriptors())},_dropCuePosition:function(t){var i,n,r,o,a,l=this._dropCuePositions;if(u.is(":visible")&&0!==l.length)return t=Math.ceil(t),i=l[l.length-1],n=i.left,r=i.right,o=parseInt(i.element.css("marginLeft"),10),a=parseInt(i.element.css("marginRight"),10),t>=r&&!s||n>t&&s?t={left:i.element.position().left+(s?-o:i.element.outerWidth()+a),element:i.element,before:!1}:(t=e.grep(l,function(e){return t>=e.left&&e.right>=t||s&&t>e.right})[0],t&&(t={left:s?t.element.position().left+t.element.outerWidth()+a:t.element.position().left-o,element:t.element,before:!0})),t},_drag:function(e){var t=this._dropCuePosition(e.x.location);t&&u.css({left:t.left,right:"auto"})},_canDrag:function(e){var t=e.attr(n.attr("field"));return"false"!=e.attr(n.attr("groupable"))&&t&&(e.hasClass("k-group-indicator")||!this.indicator(t))},_canDrop:function(e,t,i){var n=e.next(),r=e[0]!==t[0]&&(!n[0]||t[0]!==n[0]||!s&&i>n.position().left||s&&i<n.position().left);return r},_dragEnd:function(t){var i=this,r=t.currentTarget.attr(n.attr("field")),o=i.indicator(r);t!==i.options.draggable&&!t.dropped&&o&&i._removeIndicator(e(o)),i._dragCancel()},_dragCancel:function(){u.remove(),this._dropCuePositions=[]},_intializePositions:function(){var t,i=this,r=e(".k-group-indicator",i.groupContainer);i._dropCuePositions=e.map(r,function(i){return i=e(i),t=n.getOffset(i).left,{left:parseInt(t,10),right:parseInt(t+i.outerWidth(),10),element:i}})},_invalidateGroupContainer:function(){var e=this.groupContainer;e&&e.is(":empty")&&e.html(this.options.messages.empty)}});n.ui.plugin(p)}(window.kendo.jQuery),function(e){function t(t,i){t=e(t),i?t.find(".k-drag-status").removeClass("k-add").addClass("k-denied"):t.find(".k-drag-status").removeClass("k-denied").addClass("k-add")}var i=window.kendo,n=i.getOffset,r=i.ui.Widget,o="change",s="k-reorderable",a=r.extend({init:function(a,l){var c,d=this,u=i.guid()+"-reorderable";r.fn.init.call(d,a,l),a=d.element.addClass(s),l=d.options,d.draggable=c=l.draggable||new i.ui.Draggable(a,{group:u,filter:l.filter,hint:l.hint}),d.reorderDropCue=e('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-s"></div><div class="k-icon k-i-arrow-n"></div></div>'),a.find(c.options.filter).kendoDropTarget({group:c.options.group,dragenter:function(e){var i,r,o,s;d._draggable&&(i=this.element,o=!d._dropTargetAllowed(i)||d._isLastDraggable(),t(e.draggable.hint,o),o||(r=n(i),s=r.left,l.inSameContainer&&!l.inSameContainer({source:i,target:d._draggable,sourceIndex:d._index(i),targetIndex:d._index(d._draggable)})?d._dropTarget=i:d._index(i)>d._index(d._draggable)&&(s+=i.outerWidth()),d.reorderDropCue.css({height:i.outerHeight(),top:r.top,left:s}).appendTo(document.body)))},dragleave:function(e){t(e.draggable.hint,!0),d.reorderDropCue.remove(),d._dropTarget=null},drop:function(){var e,t,i;d._dropTarget=null,d._draggable&&(e=this.element,t=d._draggable,i=!1,d._dropTargetAllowed(e)&&!d._isLastDraggable()&&d.trigger(o,{element:d._draggable,target:e,oldIndex:d._index(t),newIndex:d._index(e),position:n(d.reorderDropCue).left>n(e).left?"after":"before"}))}}),c.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){d.reorderDropCue.remove(),d._draggable=null,d._elements=null},dragend:function(){d.reorderDropCue.remove(),d._draggable=null,d._elements=null},dragstart:function(e){d._draggable=e.currentTarget,d._elements=d.element.find(d.draggable.options.filter)},drag:function(e){var t,i;d._dropTarget&&!this.hint.find(".k-drag-status").hasClass("k-denied")&&(t=n(d._dropTarget).left,i=d._dropTarget.outerWidth(),d.reorderDropCue.css(e.pageX>t+i/2?{left:t+i}:{left:t}))}})},options:{name:"Reorderable",filter:"*"},events:[o],_isLastDraggable:function(){var e,t=this.options.inSameContainer,i=this._draggable[0],n=this._elements.get(),r=!1;if(!t)return!1;for(;!r&&n.length>0;)e=n.pop(),r=i!==e&&t({source:i,target:e,sourceIndex:this._index(i),targetIndex:this._index(e)});return!r},_dropTargetAllowed:function(e){var t=this.options.inSameContainer,i=this.options.dragOverContainers,n=this._draggable;return n[0]!==e[0]&&(!t||!i||(!!t({source:n,target:e,sourceIndex:this._index(n),targetIndex:this._index(e)})||i(this._index(n),this._index(e))))},_index:function(e){return this._elements.index(e)},destroy:function(){var t=this;r.fn.destroy.call(t),t.element.find(t.draggable.options.filter).each(function(){var t=e(this);t.data("kendoDropTarget")&&t.data("kendoDropTarget").destroy()}),t.draggable&&(t.draggable.destroy(),t.draggable.element=t.draggable=null),t.elements=t.reorderDropCue=t._elements=t._draggable=null}});i.ui.plugin(a)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,r=n.Widget,o=e.proxy,s=i.isFunction,a=e.extend,l="horizontal",c="vertical",d="start",u="resize",h="resizeend",p=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t),i.orientation=i.options.orientation.toLowerCase()!=c?l:c,i._positionMouse=i.orientation==l?"x":"y",i._position=i.orientation==l?"left":"top",i._sizingDom=i.orientation==l?"outerWidth":"outerHeight",i.draggable=new n.Draggable(e,{distance:0,filter:t.handle,drag:o(i._resize,i),dragcancel:o(i._cancel,i),dragstart:o(i._start,i),dragend:o(i._stop,i)}),i.userEvents=i.draggable.userEvents},events:[u,h,d],options:{name:"Resizable",orientation:l},resize:function(){},_max:function(e){var i=this,n=i.hint?i.hint[i._sizingDom]():0,r=i.options.max;return s(r)?r(e):r!==t?i._initialElementPosition+r-n:r},_min:function(e){var i=this,n=i.options.min;return s(n)?n(e):n!==t?i._initialElementPosition+n:n},_start:function(t){var i=this,n=i.options.hint,r=e(t.currentTarget);i._initialElementPosition=r.position()[i._position],i._initialMousePosition=t[i._positionMouse].startLocation,n&&(i.hint=s(n)?e(n(r)):n,i.hint.css({position:"absolute"}).css(i._position,i._initialElementPosition).appendTo(i.element)),i.trigger(d,t),i._maxPosition=i._max(t),i._minPosition=i._min(t),e(document.body).css("cursor",r.css("cursor"))},_resize:function(e){var i,n=this,r=n._maxPosition,o=n._minPosition,s=n._initialElementPosition+(e[n._positionMouse].location-n._initialMousePosition);i=o!==t?Math.max(o,s):s,n.position=i=r!==t?Math.min(r,i):i,n.hint&&n.hint.toggleClass(n.options.invalidClass||"",i==r||i==o).css(n._position,i),n.resizing=!0,n.trigger(u,a(e,{position:i}))},_stop:function(t){var i=this;i.hint&&i.hint.remove(),i.resizing=!1,i.trigger(h,a(t,{position:i.position})),e(document.body).css("cursor","")},_cancel:function(e){var i=this;i.hint&&(i.position=t,i.hint.css(i._position,i._initialElementPosition),i._stop(e))},destroy:function(){var e=this;r.fn.destroy.call(e),e.draggable&&e.draggable.destroy()},press:function(e){if(e){var t=e.position(),i=this;i.userEvents.press(t.left,t.top,e[0]),i.targetPosition=t,i.target=e}},move:function(e){var i=this,n=i._position,r=i.targetPosition,o=i.position;o===t&&(o=r[n]),r[n]=o+e,i.userEvents.move(r.left,r.top)},end:function(){this.userEvents.end(),this.target=this.position=t}});i.ui.plugin(p)}(window.kendo.jQuery),function(e,t){function i(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}}function n(e){return e.clone()}function r(e){return e.clone().removeAttr("id").css("visibility","hidden")}var o=window.kendo,s=o.ui.Widget,a="start",l="beforeMove",c="move",d="end",u="change",h="cancel",p="sort",f="remove",m="receive",g=">*",v=-1,y=s.extend({init:function(e,t){var i=this;s.fn.init.call(i,e,t),i.options.placeholder||(i.options.placeholder=r),i.options.hint||(i.options.hint=n),i._draggable=i._createDraggable()},events:[a,l,c,d,u,h],options:{name:"Sortable",hint:null,placeholder:null,filter:g,holdToDrag:!1,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,cursor:"auto"},destroy:function(){this._draggable.destroy(),s.fn.destroy.call(this)},_createDraggable:function(){var t=this,i=t.element,n=t.options;return new o.ui.Draggable(i,{filter:n.filter,hint:o.isFunction(n.hint)?n.hint:e(n.hint),holdToDrag:n.holdToDrag,container:n.container?e(n.container):null,cursorOffset:n.cursorOffset,axis:n.axis,ignore:n.ignore,dragstart:e.proxy(t._dragstart,t),dragcancel:e.proxy(t._dragcancel,t),drag:e.proxy(t._drag,t),dragend:e.proxy(t._dragend,t)})},_dragstart:function(t){var i=this.draggedElement=t.currentTarget,n=t.target||o.elementUnderCursor(t),r=this.options.disabled,s=this.options.handler,l=this.options.placeholder,c=this.placeholder=e(o.isFunction(l)?l.call(this,i):l);r&&i.is(r)?t.preventDefault():s&&!e(n).is(s)?t.preventDefault():this.trigger(a,{item:i,draggableEvent:t})?t.preventDefault():(i.css("display","none"),i.before(c),this._setCursor())},_dragcancel:function(){this._cancel(),this.trigger(h,{item:this.draggedElement}),this._resetCursor()},_drag:function(i){var n,r,o,s,a,l=this.draggedElement,c=this._findTarget(i),d={left:i.x.location,top:i.y.location},u={x:i.x.delta,y:i.y.delta},h=this.options.axis,p={item:l,list:this,draggableEvent:i};if("x"===h||"y"===h)return this._movementByAxis(h,d,u[h],p),t;if(c){if(n=this._getElementCenter(c.element),r={left:Math.round(d.left-n.left),top:Math.round(d.top-n.top)},e.extend(p,{target:c.element}),c.appendToBottom)return this._movePlaceholder(c,null,p),t;if(c.appendAfterHidden&&this._movePlaceholder(c,"next",p),this._isFloating(c.element)?0>u.x&&0>r.left?o="prev":u.x>0&&r.left>0&&(o="next"):0>u.y&&0>r.top?o="prev":u.y>0&&r.top>0&&(o="next"),o){for(a="prev"===o?jQuery.fn.prev:jQuery.fn.next,s=a.call(c.element);s.length&&!s.is(":visible");)s=a.call(s);s[0]!=this.placeholder[0]&&this._movePlaceholder(c,o,p)}}},_dragend:function(i){var n,r,o,s,a=this.placeholder,l=this.draggedElement,c=this.indexOf(l),h=this.indexOf(a),g=this.options.connectWith;return this._resetCursor(),o={action:p,item:l,oldIndex:c,newIndex:h,draggableEvent:i},h>=0?r=this.trigger(d,o):(n=a.parents(g).getKendoSortable(),o.action=f,s=e.extend({},o,{action:m,oldIndex:v,newIndex:n.indexOf(a)}),r=!(!this.trigger(d,o)&&!n.trigger(d,s))),r||h===c?(this._cancel(),t):(a.replaceWith(l),l.show(),this._draggable.dropped=!0,o={action:this.indexOf(l)!=v?p:f,item:l,oldIndex:c,newIndex:this.indexOf(l),draggableEvent:i},this.trigger(u,o),n&&(s=e.extend({},o,{action:m,oldIndex:v,newIndex:n.indexOf(l)}),n.trigger(u,s)),t)},_findTarget:function(i){var n,r,o=this._findElementUnderCursor(i),s=this.options.connectWith;return e.contains(this.element[0],o)?(n=this.items(),r=n.filter(o)[0]||n.has(o)[0],r?{element:e(r),sortable:this}:null):this.element[0]==o&&this._isEmpty()?{element:this.element,sortable:this,appendToBottom:!0}:this.element[0]==o&&this._isLastHidden()?(r=this.items().eq(0),{element:r,sortable:this,appendAfterHidden:!0}):s?this._searchConnectedTargets(o,i):t},_findElementUnderCursor:function(e){var t=o.elementUnderCursor(e),n=e.sender;return this.items(),i(n.hint[0],t)&&(n.hint.hide(),t=o.elementUnderCursor(e),t||(t=o.elementUnderCursor(e)),n.hint.show()),t},_searchConnectedTargets:function(t,i){var n,r,o,s,a=e(this.options.connectWith);for(s=0;a.length>s;s++)if(n=a.eq(s).getKendoSortable(),e.contains(a[s],t)){if(n)return r=n.items(),o=r.filter(t)[0]||r.has(t)[0],o?(n.placeholder=this.placeholder,{element:e(o),sortable:n}):null}else if(a[s]==t){if(n&&n._isEmpty())return{element:a.eq(s),sortable:n,appendToBottom:!0};if(this._isCursorAfterLast(n,i))return o=n.items().last(),{element:o,sortable:n}}},_isCursorAfterLast:function(e,t){var i,n,r=e.items().last(),s={left:t.x.location,top:t.y.location};return i=o.getOffset(r),i.top+=r.outerHeight(),i.left+=r.outerWidth(),n=this._isFloating(r)?i.left-s.left:i.top-s.top,0>n},_movementByAxis:function(t,i,n,r){var o,s="x"===t?i.left:i.top,a=0>n?this.placeholder.prev():this.placeholder.next();a.length&&!a.is(":visible")&&(a=0>n?a.prev():a.next()),e.extend(r,{target:a}),o=this._getElementCenter(a),o&&(o="x"===t?o.left:o.top),a.length&&0>n&&0>s-o?this._movePlaceholder({element:a,sortable:this},"prev",r):a.length&&n>0&&s-o>0&&this._movePlaceholder({element:a,sortable:this},"next",r)},_movePlaceholder:function(e,t,i){var n=this.placeholder;e.sortable.trigger(l,i)||(t?"prev"===t?e.element.before(n):"next"===t&&e.element.after(n):e.element.append(n),e.sortable.trigger(c,i))},_setCursor:function(){var t,i=this.options.cursor;i&&"auto"!==i&&(t=e(document.body),this._originalCursorType=t.css("cursor"),t.css({cursor:i}),this._cursorStylesheet||(this._cursorStylesheet=e("<style>* { cursor: "+i+" !important; }</style>")),this._cursorStylesheet.appendTo(t))},_resetCursor:function(){this._originalCursorType&&(e(document.body).css("cursor",this._originalCursorType),this._originalCursorType=null,this._cursorStylesheet.remove())},_getElementCenter:function(e){var t=e.length?o.getOffset(e):null;return t&&(t.top+=e.outerHeight()/2,t.left+=e.outerWidth()/2),t},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_cancel:function(){this.draggedElement.show(),this.placeholder.remove()},_items:function(){var e,t=this.options.filter;return e=t?this.element.find(t):this.element.children()},indexOf:function(e){var t=this._items(),i=this.placeholder,n=this.draggedElement;return i&&e[0]==i[0]?t.not(n).index(e):t.not(i).index(e)},items:function(){var e=this.placeholder,t=this._items();return e&&(t=t.not(e)),t},_isEmpty:function(){return!this.items().length},_isLastHidden:function(){return 1===this.items().length&&this.items().is(":hidden")}});o.ui.plugin(y)}(window.kendo.jQuery),function(e,t){function i(e,t){var i=r.getOffset(e),n=t.left+t.width,o=t.top+t.height;return i.right=i.left+e.outerWidth(),i.bottom=i.top+e.outerHeight(),!(i.left>n||t.left>i.right||i.top>o||t.top>i.bottom)}var n,r=window.kendo,o=r.ui.Widget,s=e.proxy,a=Math.abs,l="aria-selected",c="k-state-selected",d="k-state-selecting",u="k-selectable",h="change",p=".kendoSelectable",f="k-state-unselecting",m="input,a,textarea,.k-multiselect-wrap,select,button",g=r.support.browser.msie,v=!1;!function(e){!function(){e('<div class="parent"><span /></div>').on("click",">*",function(){v=!0}).find("span").click().end().off()}()}(e),n=o.extend({init:function(t,i){var n,a=this;o.fn.init.call(a,t,i),a._marquee=e("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),a._lastActive=null,a.element.addClass(u),a.relatedTarget=a.options.relatedTarget,n=a.options.multiple,this.options.aria&&n&&a.element.attr("aria-multiselectable",!0),a.userEvents=new r.UserEvents(a.element,{global:!0,allowSelection:!0,filter:(v?"":"."+u+" ")+a.options.filter,tap:s(a._tap,a)}),n&&a.userEvents.bind("start",s(a._start,a)).bind("move",s(a._move,a)).bind("end",s(a._end,a)).bind("select",s(a._select,a))},events:[h],options:{name:"Selectable",filter:">*",multiple:!1,relatedTarget:e.noop},_isElement:function(e){var t,i=this.element,n=i.length,r=!1;for(e=e[0],t=0;n>t;t++)if(i[t]===e){r=!0;break}return r},_tap:function(t){var i,n=e(t.target),r=this,o=t.event.ctrlKey||t.event.metaKey,s=r.options.multiple,a=s&&t.event.shiftKey,l=t.event.which,d=t.event.button;!r._isElement(n.closest("."+u))||l&&3==l||d&&2==d||this._allowSelection(t.event.target)&&(i=n.hasClass(c),s&&o||r.clear(),n=n.add(r.relatedTarget(n)),a?r.selectRange(r._firstSelectee(),n):(i&&o?(r._unselect(n),r._notify(h)):r.value(n),r._lastActive=r._downTarget=n))},_start:function(i){var n,r=this,o=e(i.target),s=o.hasClass(c),a=i.event.ctrlKey||i.event.metaKey;if(this._allowSelection(i.event.target)){if(r._downTarget=o,!r._isElement(o.closest("."+u)))return r.userEvents.cancel(),t;r.options.useAllItems?r._items=r.element.find(r.options.filter):(n=o.closest(r.element),r._items=n.find(r.options.filter)),i.sender.capture(),r._marquee.appendTo(document.body).css({left:i.x.client+1,top:i.y.client+1,width:0,height:0}),a||r.clear(),o=o.add(r.relatedTarget(o)),s&&(r._selectElement(o,!0),a&&o.addClass(f))}},_move:function(e){var t=this,i={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:a(e.x.initialDelta),height:a(e.y.initialDelta)};t._marquee.css(i),t._invalidateSelectables(i,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(){var e,t=this;t._marquee.remove(),t._unselect(t.element.find(t.options.filter+"."+f)).removeClass(f),e=t.element.find(t.options.filter+"."+d),e=e.add(t.relatedTarget(e)),t.value(e),t._lastActive=t._downTarget,t._items=null},_invalidateSelectables:function(e,t){var n,r,o,s,a=this._downTarget[0],l=this._items;for(n=0,r=l.length;r>n;n++)s=l.eq(n),o=s.add(this.relatedTarget(s)),i(s,e)?s.hasClass(c)?t&&a!==s[0]&&o.removeClass(c).addClass(f):s.hasClass(d)||s.hasClass(f)||o.addClass(d):s.hasClass(d)?o.removeClass(d):t&&s.hasClass(f)&&o.removeClass(f).addClass(c)},value:function(e){var i=this,n=s(i._selectElement,i);return e?(e.each(function(){n(this)}),i._notify(h),t):i.element.find(i.options.filter+"."+c)},_firstSelectee:function(){var e,t=this;return null!==t._lastActive?t._lastActive:(e=t.value(),e.length>0?e[0]:t.element.find(t.options.filter)[0])},_selectElement:function(t,i){var n=e(t),r=!i&&this._notify("select",{element:t});n.removeClass(d),r||(n.addClass(c),this.options.aria&&n.attr(l,!0))},_notify:function(e,t){return t=t||{},this.trigger(e,t)},_unselect:function(e){return e.removeClass(c),this.options.aria&&e.attr(l,!1),e},_select:function(t){this._allowSelection(t.event.target)&&(!g||g&&!e(r._activeElement()).is(m))&&t.preventDefault()},_allowSelection:function(t){return!e(t).is(m)||(this.userEvents.cancel(),this._downTarget=null,!1)},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var e=this.element.find(this.options.filter+"."+c);this._unselect(e)},selectRange:function(t,i){var n,r,o,s=this;for(s.clear(),s.element.length>1&&(o=s.options.continuousItems()),o&&o.length||(o=s.element.find(s.options.filter)),t=e.inArray(e(t)[0],o),i=e.inArray(e(i)[0],o),t>i&&(r=t,t=i,i=r),s.options.useAllItems||(i+=s.element.length-1),n=t;i>=n;n++)s._selectElement(o[n]);s._notify(h)},destroy:function(){var e=this;o.fn.destroy.call(e),e.element.off(p),e.userEvents.destroy(),e._marquee=e._lastActive=e.element=e.userEvents=null}}),n.parseOptions=function(e){var t="string"==typeof e&&e.toLowerCase();return{multiple:t&&t.indexOf("multiple")>-1,cell:t&&t.indexOf("cell")>-1}},r.ui.plugin(n)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui.Widget,r=e.proxy,o=i.keys,s="click",a="k-button",l="k-button-icon",c="k-button-icontext",d=".kendoButton",u="disabled",h="k-state-disabled",p="k-state-focused",f="k-state-selected",m=n.extend({init:function(e,t){var o=this;n.fn.init.call(o,e,t),e=o.wrapper=o.element,t=o.options,e.addClass(a).attr("role","button"),t.enable=t.enable&&!e.attr(u),o.enable(t.enable),o._tabindex(),o._graphics(),e.on(s+d,r(o._click,o)).on("focus"+d,r(o._focus,o)).on("blur"+d,r(o._blur,o)).on("keydown"+d,r(o._keydown,o)).on("keyup"+d,r(o._keyup,o)),i.notify(o)},destroy:function(){var e=this;e.wrapper.off(d),n.fn.destroy.call(e)},events:[s],options:{name:"Button",icon:"",spriteCssClass:"",imageUrl:"",enable:!0},_isNativeButton:function(){return"button"==this.element.prop("tagName").toLowerCase()},_click:function(e){this.options.enable&&this.trigger(s,{event:e})},_focus:function(){this.options.enable&&this.element.addClass(p)},_blur:function(){this.element.removeClass(p)},_keydown:function(e){var t=this;t._isNativeButton()||(e.keyCode==o.ENTER||e.keyCode==o.SPACEBAR)&&(e.keyCode==o.SPACEBAR&&(e.preventDefault(),t.options.enable&&t.element.addClass(f)),t._click(e))},_keyup:function(){this.element.removeClass(f)},_graphics:function(){var t,i,n,r=this,o=r.element,s=r.options,a=s.icon,d=s.spriteCssClass,u=s.imageUrl;(d||u||a)&&(n=!0,o.contents().not("span.k-sprite").not("span.k-icon").not("img.k-image").each(function(t,i){(1==i.nodeType||3==i.nodeType&&e.trim(i.nodeValue).length>0)&&(n=!1)}),o.addClass(n?l:c)),a?(t=o.children("span.k-icon").first(),t[0]||(t=e('<span class="k-icon"></span>').prependTo(o)),t.addClass("k-i-"+a)):d?(t=o.children("span.k-sprite").first(),t[0]||(t=e('<span class="k-sprite"></span>').prependTo(o)),t.addClass(d)):u&&(i=o.children("img.k-image").first(),i[0]||(i=e('<img alt="icon" class="k-image" />').prependTo(o)),i.attr("src",u))},enable:function(e){var i=this,n=i.element;e===t&&(e=!0),e=!!e,i.options.enable=e,n.toggleClass(h,!e).attr("aria-disabled",!e).attr(u,!e);try{n.blur()}catch(e){}}});i.ui.plugin(m)}(window.kendo.jQuery),function(e,t){function i(e,t,i,n,r){return e({idx:t,text:i,ns:c.ns,numeric:n,title:r||""})}function n(e,t,i){return k({className:e.substring(1),text:t,wrapClassName:i||""})}function r(e,t,i,n){e.find(t).parent().attr(c.attr("page"),i).attr("tabindex",-1).toggleClass("k-state-disabled",n)}function o(e,t){r(e,p,1,1>=t)}function s(e,t){r(e,m,Math.max(1,t-1),1>=t)}function a(e,t,i){r(e,g,Math.min(i,t+1),t>=i)}function l(e,t,i){r(e,f,i,t>=i)}var c=window.kendo,d=c.ui,u=d.Widget,h=e.proxy,p=".k-i-seek-w",f=".k-i-seek-e",m=".k-i-arrow-w",g=".k-i-arrow-e",v="change",y=".kendoPager",_="click",b="keydown",w="disabled",k=c.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),x=u.extend({init:function(t,i){var r,d,w=this;u.fn.init.call(w,t,i),i=w.options,w.dataSource=c.data.DataSource.create(i.dataSource),w.linkTemplate=c.template(w.options.linkTemplate),w.selectTemplate=c.template(w.options.selectTemplate),r=w.page(),d=w.totalPages(),w._refreshHandler=h(w.refresh,w),w.dataSource.bind(v,w._refreshHandler),i.previousNext&&(w.element.find(p).length||(w.element.append(n(p,i.messages.first,"k-pager-first")),o(w.element,r,d)),w.element.find(m).length||(w.element.append(n(m,i.messages.previous)),s(w.element,r,d))),i.numeric&&(w.list=w.element.find(".k-pager-numbers"),w.list.length||(w.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(w.element))),i.input&&(w.element.find(".k-pager-input").length||w.element.append('<span class="k-pager-input k-label">'+i.messages.page+'<input class="k-textbox">'+c.format(i.messages.of,d)+"</span>"),w.element.on(b+y,".k-pager-input input",h(w._keydown,w))),i.previousNext&&(w.element.find(g).length||(w.element.append(n(g,i.messages.next)),a(w.element,r,d)),w.element.find(f).length||(w.element.append(n(f,i.messages.last,"k-pager-last")),l(w.element,r,d))),i.pageSizes&&(w.element.find(".k-pager-sizes").length||e('<span class="k-pager-sizes k-label"><select/>'+i.messages.itemsPerPage+"</span>").appendTo(w.element).find("select").html(e.map(e.isArray(i.pageSizes)?i.pageSizes:[5,10,20],function(e){return"<option>"+e+"</option>"}).join("")).end().appendTo(w.element),w.element.find(".k-pager-sizes select").val(w.pageSize()),c.ui.DropDownList&&w.element.find(".k-pager-sizes select").show().kendoDropDownList(),w.element.on(v+y,".k-pager-sizes select",h(w._change,w))),i.refresh&&(w.element.find(".k-pager-refresh").length||w.element.append('<a href="#" class="k-pager-refresh k-link" title="'+i.messages.refresh+'"><span class="k-icon k-i-refresh">'+i.messages.refresh+"</span></a>"),w.element.on(_+y,".k-pager-refresh",h(w._refreshClick,w))),i.info&&(w.element.find(".k-pager-info").length||w.element.append('<span class="k-pager-info k-label" />')),w.element.on(_+y,"a",h(w._click,w)).addClass("k-pager-wrap k-widget"),i.autoBind&&w.refresh(),c.notify(w)},destroy:function(){var e=this;u.fn.destroy.call(e),e.element.off(y),e.dataSource.unbind(v,e._refreshHandler),e._refreshHandler=null,c.destroy(e.element),e.element=e.list=null},events:[v],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){var t=this;t.dataSource.unbind(v,t._refreshHandler),t.dataSource=t.options.dataSource=e,e.bind(v,t._refreshHandler),t.options.autoBind&&e.fetch()},refresh:function(e){var t,n,r,d=this,u=1,h="",p=d.page(),f=d.options,m=d.pageSize(),g=d.dataSource.total(),v=d.totalPages(),y=d.linkTemplate,_=f.buttonCount;if(!e||"itemchange"!=e.action){if(f.numeric){for(p>_&&(r=p%_,u=0===r?p-_+1:p-r+1),n=Math.min(u+_-1,v),u>1&&(h+=i(y,u-1,"...",!1,f.messages.morePages)),t=u;n>=t;t++)h+=i(t==p?d.selectTemplate:y,t,t,!0);v>n&&(h+=i(y,t,"...",!1,f.messages.morePages)),""===h&&(h=d.selectTemplate({text:0})),d.list.html(h)}f.info&&(h=g>0?c.format(f.messages.display,(p-1)*m+1,Math.min(p*m,g),g):f.messages.empty,d.element.find(".k-pager-info").html(h)),f.input&&d.element.find(".k-pager-input").html(d.options.messages.page+'<input class="k-textbox">'+c.format(f.messages.of,v)).find("input").val(p).attr(w,1>g).toggleClass("k-state-disabled",1>g),f.previousNext&&(o(d.element,p,v),s(d.element,p,v),a(d.element,p,v),l(d.element,p,v)),f.pageSizes&&d.element.find(".k-pager-sizes select").val(m).filter("["+c.attr("role")+"=dropdownlist]").kendoDropDownList("value",m).kendoDropDownList("text",m)}},_keydown:function(e){if(e.keyCode===c.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),i=parseInt(t.val(),10);(isNaN(i)||1>i||i>this.totalPages())&&(i=this.page()),t.val(i),this.page(i)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=parseInt(e.currentTarget.value,10);isNaN(t)||this.dataSource.pageSize(t)},_click:function(t){var i=e(t.currentTarget);t.preventDefault(),i.is(".k-state-disabled")||this.page(i.attr(c.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/this.pageSize())},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){return e===t?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(e),this.trigger(v,{index:e}),t)}});d.plugin(x)}(window.kendo.jQuery),function(e){function t(t,i){return t===i||e.contains(t,i)}var i=window.kendo,n=i.ui,r=n.Widget,o=i.support,s=i.getOffset,a=i._activeElement,l="open",c="close",d="deactivate",u="activate",h="center",p="left",f="right",m="top",g="bottom",v="absolute",y="hidden",_="body",b="location",w="position",k="visible",x="effects",C="k-state-active",S="k-state-border",T=/k-state-border-(\w+)/,D=".k-picker-wrap, .k-dropdown-wrap, .k-link",M="down",A=e(document.documentElement),E=e(window),I="scroll",P="resize scroll",F=o.transitions.css,z=F+"transform",H=e.extend,R=".kendoPopup",N=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],$=r.extend({init:function(t,n){var o,s=this;n=n||{},n.isRtl&&(n.origin=n.origin||g+" "+f,n.position=n.position||m+" "+f),r.fn.init.call(s,t,n),t=s.element,n=s.options,s.collisions=n.collision?n.collision.split(" "):[],s.downEvent=i.applyEventMap(M,i.guid()),1===s.collisions.length&&s.collisions.push(s.collisions[0]),o=e(s.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),n.appendTo=e(e(n.appendTo)[0]||o[0]||_),s.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!n.isRtl).css({position:v}).appendTo(n.appendTo).on("mouseenter"+R,function(){s._hovered=!0}).on("mouseleave"+R,function(){s._hovered=!1}),s.wrapper=e(),n.animation===!1&&(n.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),H(n.animation.open,{complete:function(){s.wrapper.css({overflow:k}),s._trigger(u)}}),H(n.animation.close,{complete:function(){s._animationClose()}}),s._mousedownProxy=function(e){s._mousedown(e)},s._resizeProxy=function(e){s._resize(e)},n.toggleTarget&&e(n.toggleTarget).on(n.toggleEvent+R,e.proxy(s.toggle,s))},events:[l,u,c,d],options:{name:"Popup",toggleEvent:"click",origin:g+" "+p,position:m+" "+p,anchor:_,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var t,n,r,o,s=this,a=s.options;s.wrapper.hide(),t=s.wrapper.data(b),n=e(a.anchor),t&&s.wrapper.css(t),a.anchor!=_&&(r=((n.attr("class")||"").match(T)||["","down"])[1],o=S+"-"+r,n.removeClass(o).children(D).removeClass(C).removeClass(o),s.element.removeClass(S+"-"+i.directions[r].reverse)),s._closing=!1,s._trigger(d)},destroy:function(){var t,n=this,o=n.options,s=n.element.off(R);r.fn.destroy.call(n),o.toggleTarget&&e(o.toggleTarget).off(R),o.modal||(A.unbind(n.downEvent,n._mousedownProxy),n._scrollableParents().unbind(I,n._resizeProxy),E.unbind(P,n._resizeProxy)),i.destroy(n.element.children()),s.removeData(),o.appendTo[0]===document.body&&(t=s.parent(".k-animation-container"),t[0]?t.remove():s.remove())},open:function(t,n){var r,s,a,c=this,d={isFixed:!isNaN(parseInt(n,10)),x:t,y:n},u=c.element,h=c.options,p="down",f=e(h.anchor),g=u[0]&&u.hasClass("km-widget");if(!c.visible()){if(h.copyAnchorStyles&&(g&&"font-size"==N[0]&&N.shift(),u.css(i.getComputedStyles(f[0],N))),u.data("animating")||c._trigger(l))return;h.modal||(A.unbind(c.downEvent,c._mousedownProxy).bind(c.downEvent,c._mousedownProxy),o.mobileOS.ios||o.mobileOS.android||(c._scrollableParents().unbind(I,c._resizeProxy).bind(I,c._resizeProxy),E.unbind(P,c._resizeProxy).bind(P,c._resizeProxy))),c.wrapper=s=i.wrap(u,h.autosize).css({overflow:y,display:"block",position:v}),o.mobileOS.android&&s.css(z,"translatez(0)"),s.css(w),e(h.appendTo)[0]==document.body&&s.css(m,"-10000px"),r=H(!0,{},h.animation.open),c.flipped=c._position(d),r.effects=i.parseEffects(r.effects,c.flipped),p=r.effects.slideIn?r.effects.slideIn.direction:p,h.anchor!=_&&(a=S+"-"+p,u.addClass(S+"-"+i.directions[p].reverse),f.addClass(a).children(D).addClass(C).addClass(a)),u.data(x,r.effects).kendoStop(!0).kendoAnimate(r)}},toggle:function(){var e=this;e[e.visible()?c:l]()},visible:function(){return this.element.is(":"+k)},close:function(t){var n,r,o,s,a=this,l=a.options;if(a.visible()){if(n=a.wrapper[0]?a.wrapper:i.wrap(a.element).hide(),a._closing||a._trigger(c))return;a.element.find(".k-popup").each(function(){var i=e(this),n=i.data("kendoPopup");
n&&n.close(t)}),A.unbind(a.downEvent,a._mousedownProxy),a._scrollableParents().unbind(I,a._resizeProxy),E.unbind(P,a._resizeProxy),t?r={hide:!0,effects:{}}:(r=H(!0,{},l.animation.close),o=a.element.data(x),s=r.effects,!s&&!i.size(s)&&o&&i.size(o)&&(r.effects=o,r.reverse=!0),a._closing=!0),a.element.kendoStop(!0),n.css({overflow:y}),a.element.kendoAnimate(r)}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var i=this;"resize"===e.type?(clearTimeout(i._resizeTimeout),i._resizeTimeout=setTimeout(function(){i._position(),i._resizeTimeout=null},50)):i._hovered||t(i.element[0],a())||i.close()},_mousedown:function(n){var r=this,o=r.element[0],s=r.options,a=e(s.anchor)[0],l=s.toggleTarget,c=i.eventTarget(n),d=e(c).closest(".k-popup"),u=d.parent().parent(".km-shim").length;d=d[0],(u||!d||d===r.element[0])&&"popover"!==e(n.target).closest("a").data("rel")&&(t(o,c)||t(a,c)||l&&t(e(l)[0],c)||r.close())},_fit:function(e,t,i){var n=0;return e+t>i&&(n=i-(e+t)),0>e&&(n=-e),n},_flip:function(e,t,i,n,r,o,s){var a=0;return s=s||t,o!==r&&o!==h&&r!==h&&(e+s>n&&(a+=-(i+t)),0>e+a&&(a+=i+t)),a},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){var n=i.getComputedStyles(t,["overflow"]);return"visible"!=n.overflow})},_position:function(t){var i,n,r,a,l,c,d,u,h,p=this,f=p.element.css(w,""),m=p.wrapper,g=p.options,y=e(g.viewport),_=y.offset(),k=e(g.anchor),x=g.origin.toLowerCase().split(" "),C=g.position.toLowerCase().split(" "),S=p.collisions,T=o.zoomLevel(),D=10002,M=!!(y[0]==window&&window.innerWidth&&1.02>=T),A=0,E=M?window.innerWidth:y.width(),I=M?window.innerHeight:y.height(),P=k.parents().filter(m.siblings());if(P[0])if(n=Math.max(+P.css("zIndex"),0))D=n+10;else for(i=k.parentsUntil(P),r=i.length;r>A;A++)n=+e(i[A]).css("zIndex"),n&&n>D&&(D=n+10);return m.css("zIndex",D),m.css(t&&t.isFixed?{left:t.x,top:t.y}:p._align(x,C)),a=s(m,w,k[0]===m.offsetParent()[0]),l=s(m),c=k.offsetParent().parent(".k-animation-container,.k-popup,.k-group"),c.length&&(a=s(m,w,!0),l=s(m)),y[0]===window?(l.top-=window.pageYOffset||document.documentElement.scrollTop||0,l.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(l.top-=_.top,l.left-=_.left),p.wrapper.data(b)||m.data(b,H({},a)),d=H({},l),u=H({},a),"fit"===S[0]&&(u.top+=p._fit(d.top,m.outerHeight(),I/T)),"fit"===S[1]&&(u.left+=p._fit(d.left,m.outerWidth(),E/T)),h=H({},u),"flip"===S[0]&&(u.top+=p._flip(d.top,f.outerHeight(),k.outerHeight(),I/T,x[0],C[0],m.outerHeight())),"flip"===S[1]&&(u.left+=p._flip(d.left,f.outerWidth(),k.outerWidth(),E/T,x[1],C[1],m.outerWidth())),f.css(w,v),m.css(u),u.left!=h.left||u.top!=h.top},_align:function(t,i){var n,r=this,o=r.wrapper,a=e(r.options.anchor),l=t[0],c=t[1],d=i[0],u=i[1],p=s(a),m=e(r.options.appendTo),v=o.outerWidth(),y=o.outerHeight(),_=a.outerWidth(),b=a.outerHeight(),w=p.top,k=p.left,x=Math.round;return m[0]!=document.body&&(n=s(m),w-=n.top,k-=n.left),l===g&&(w+=b),l===h&&(w+=x(b/2)),d===g&&(w-=y),d===h&&(w-=x(y/2)),c===f&&(k+=_),c===h&&(k+=x(_/2)),u===f&&(k-=v),u===h&&(k-=x(v/2)),{top:w,left:k}}});n.plugin($)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui.Widget,r=e.proxy,o=e.extend,s=window.setTimeout,a="click",l="show",c="hide",d="k-notification",u=".k-notification-wrap .k-i-close",h="info",p="success",f="warning",m="error",g="top",v="left",y="bottom",_="right",b="up",w=".kendoNotification",k='<div class="k-widget k-notification"></div>',x='<div class="k-notification-wrap"><span class="k-icon k-i-note">#=typeIcon#</span>#=content#<span class="k-icon k-i-close">Hide</span></div>',C=n.extend({init:function(t,r){var o=this;n.fn.init.call(o,t,r),r=o.options,r.appendTo&&e(r.appendTo).is(t)||o.element.hide(),o._compileTemplates(r.templates),o._guid="_"+i.guid(),o._isRtl=i.support.isRtl(t),o._compileStacking(r.stacking,r.position.top),i.notify(o)},events:[l,c],options:{name:"Notification",position:{pinned:!0,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:!0,button:!1,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}}},_compileTemplates:function(t){var n=this,r=i.template;n._compiled={},e.each(t,function(t,i){n._compiled[i.type]=r(i.template||e("#"+i.templateId).html())}),n._defaultCompiled=r(x)},_getCompiled:function(e){var t=this,i=t._defaultCompiled;return e?t._compiled[e]||i:i},_compileStacking:function(e,t){var i,n,r=this,o={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0};switch(e){case"down":i=y+" "+v,n=g+" "+v,delete o.paddingBottom;break;case _:i=g+" "+_,n=g+" "+v,delete o.paddingRight;break;case v:i=g+" "+v,n=g+" "+_,delete o.paddingLeft;break;case b:i=g+" "+v,n=y+" "+v,delete o.paddingTop;break;default:null!==t?(i=y+" "+v,n=g+" "+v,delete o.paddingBottom):(i=g+" "+v,n=y+" "+v,delete o.paddingTop)}r._popupOrigin=i,r._popupPosition=n,r._popupPaddings=o},_attachPopupEvents:function(e,t){function i(e){e.on(a+w,function(){t.close()})}var n,r=e.allowHideAfter,o=!isNaN(r)&&r>0;e.hideOnClick?t.bind("activate",function(){o?s(function(){i(t.element)},r):i(t.element)}):e.button&&(n=t.element.find(u),o?s(function(){i(n)},r):i(n))},_showPopup:function(t,n){var r,a,l=this,c=n.autoHideAfter,d=n.position.left,h=n.position.top;a=e("."+l._guid).last(),r=new i.ui.Popup(t,{anchor:a[0]?a:document.body,origin:l._popupOrigin,position:l._popupPosition,animation:n.animation,modal:!0,collision:"",isRtl:l._isRtl,close:function(){l._triggerHide(this.element)},deactivate:function(e){e.sender.element.off(w),e.sender.element.find(u).off(w),e.sender.destroy()}}),l._attachPopupEvents(n,r),a[0]?r.open():(null===d&&(d=e(window).width()-t.width()-n.position.right),null===h&&(h=e(window).height()-t.height()-n.position.bottom),r.open(d,h)),r.wrapper.addClass(l._guid).css(o({margin:0},l._popupPaddings)),n.position.pinned?(r.wrapper.css("position","fixed"),a[0]&&l._togglePin(r.wrapper,!0)):a[0]||l._togglePin(r.wrapper,!1),c>0&&s(function(){r.close()},c)},_togglePin:function(t,i){var n=e(window),r=i?-1:1;t.css({top:parseInt(t.css(g),10)+r*n.scrollTop(),left:parseInt(t.css(v),10)+r*n.scrollLeft()})},_attachStaticEvents:function(e,t){function i(e){e.on(a+w,r(n._hideStatic,n,t))}var n=this,o=e.allowHideAfter,l=!isNaN(o)&&o>0;e.hideOnClick?l?s(function(){i(t)},o):i(t):e.button&&(l?s(function(){i(t.find(u))},o):i(t.find(u)))},_showStatic:function(e,t){var i=this,n=t.autoHideAfter,r=t.animation,o=t.stacking==b||t.stacking==v?"prependTo":"appendTo";e.addClass(i._guid)[o](t.appendTo).hide().kendoAnimate(r.open||!1),i._attachStaticEvents(t,e),n>0&&s(function(){i._hideStatic(e)},n)},_hideStatic:function(e){e.kendoAnimate(o(this.options.animation.close||!1,{complete:function(){e.off(w).find(u).off(w),e.remove()}})),this._triggerHide(e)},_triggerHide:function(e){this.trigger(c,{element:e}),this.angular("cleanup",function(){return{elements:e}})},show:function(n,r){var s,a,c=this,u=c.options,p=e(k);return r||(r=h),null!==n&&n!==t&&""!==n&&(i.isFunction(n)&&(n=n()),a={typeIcon:r,content:""},s=e.isPlainObject(n)?o(a,n):o(a,{content:n}),p.addClass(d+"-"+r).toggleClass(d+"-button",u.button).attr("data-role","alert").css({width:u.width,height:u.height}).append(c._getCompiled(r)(s)),c.angular("compile",function(){return{elements:p,data:[{dataItem:s}]}}),e(u.appendTo)[0]?c._showStatic(p,u):c._showPopup(p,u),c.trigger(l,{element:p})),c},info:function(e){return this.show(e,h)},success:function(e){return this.show(e,p)},warning:function(e){return this.show(e,f)},error:function(e){return this.show(e,m)},hide:function(){var t=this,i=t.getNotifications();return i.each(t.options.appendTo?function(i,n){t._hideStatic(e(n))}:function(t,i){var n=e(i).data("kendoPopup");n&&n.close()}),t},getNotifications:function(){var t=this,i=e("."+t._guid);return t.options.appendTo?i:i.children("."+d)},setOptions:function(e){var i,r=this;n.fn.setOptions.call(r,e),i=r.options,e.templates!==t&&r._compileTemplates(i.templates),(e.stacking!==t||e.position!==t)&&r._compileStacking(i.stacking,i.position.top)},destroy:function(){n.fn.destroy.call(this),this.getNotifications().off(w).find(u).off(w)}});i.ui.plugin(C)}(window.kendo.jQuery),function(e){function t(e){for(;e.length;)i(e),e=e.parent()}function i(e){var t=e.data(o.ns+"title");t&&(e.attr("title",t),e.removeData(o.ns+"title"))}function n(e){var t=e.attr("title");t&&(e.data(o.ns+"title",t),e.attr("title",""))}function r(e){for(;e.length&&!e.is("body");)n(e),e=e.parent()}var o=window.kendo,s=o.ui.Widget,a=o.ui.Popup,l=o.isFunction,c=e.isPlainObject,d=e.extend,u=e.proxy,h=e(document),p=o.isLocalUrl,f="_tt_active",m="aria-describedby",g="show",v="hide",y="error",_="contentLoad",b="requestStart",w="k-content-frame",k='<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>',x=o.template("<iframe frameborder='0' class='"+w+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),C=".kendoTooltip",S={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},T={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},D={bottom:"n",top:"s",left:"e",right:"w",center:"n"},M={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},A=function(e){return e.target.data(o.ns+"title")},E=s.extend({init:function(e,t){var i,n=this;s.fn.init.call(n,e,t),i=n.options.position.match(/left|right/)?"horizontal":"vertical",n.dimensions=M[i],n._documentKeyDownHandler=u(n._documentKeyDown,n),n.element.on(n.options.showOn+C,n.options.filter,u(n._showOn,n)).on("mouseenter"+C,n.options.filter,u(n._mouseenter,n)),this.options.autoHide&&n.element.on("mouseleave"+C,n.options.filter,u(n._mouseleave,n))},options:{name:"Tooltip",filter:"",content:A,showAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:!0}}},events:[g,v,_,y,b],_mouseenter:function(t){r(e(t.currentTarget))},_showOn:function(t){var i=this,n=e(t.currentTarget);i.options.showOn&&i.options.showOn.match(/click|focus/)?i._show(n):(clearTimeout(i.timeout),i.timeout=setTimeout(function(){i._show(n)},i.options.showAfter))},_appendContent:function(e){var t,i=this,n=i.options.content,r=i.content,s=i.options.iframe;c(n)&&n.url?("iframe"in i.options||(s=!p(n.url)),i.trigger(b,{options:n,target:e}),s?(r.hide(),t=r.find("."+w)[0],t?t.src=n.url||t.src:r.html(x({content:n})),r.find("."+w).off("load"+C).on("load"+C,function(){i.trigger(_),r.show()})):(r.empty(),o.ui.progress(r,!0),i._ajaxRequest(n))):n&&l(n)?(n=n({sender:this,target:e}),r.html(n||"")):r.html(n),i.angular("compile",function(){return{elements:r}})},_ajaxRequest:function(e){var t=this;jQuery.ajax(d({type:"GET",dataType:"html",cache:!1,error:function(e,i){o.ui.progress(t.content,!1),t.trigger(y,{status:i,xhr:e})},success:u(function(e){o.ui.progress(t.content,!1),t.content.html(e),t.trigger(_)},t)},e))},_documentKeyDown:function(e){e.keyCode===o.keys.ESC&&this.hide()},refresh:function(){var e=this,t=e.popup;t&&t.options.anchor&&e._appendContent(t.options.anchor)},hide:function(){this.popup&&this.popup.close()},show:function(e){e=e||this.element,r(e),this._show(e)},_show:function(e){var i=this,n=i.target();i.popup||i._initPopup(),n&&n[0]!=e[0]&&(i.popup.close(),i.popup.element.kendoStop(!0,!0)),n&&n[0]==e[0]||(i._appendContent(e),i.popup.options.anchor=e),i.popup.one("deactivate",function(){t(e),e.removeAttr(m),this.element.removeAttr("id").attr("aria-hidden",!0),h.off("keydown"+C,i._documentKeyDownHandler)}),i.popup.open()},_initPopup:function(){var t=this,i=t.options,n=e(o.template(k)({callout:i.callout&&"center"!==i.position,dir:D[i.position],autoHide:i.autoHide}));t.popup=new a(n,d({activate:function(){var e=this.options.anchor,n=e[0].id||t.element[0].id;n&&(e.attr(m,n+f),this.element.attr("id",n+f)),i.callout&&t._positionCallout(),this.element.removeAttr("aria-hidden"),h.on("keydown"+C,t._documentKeyDownHandler),t.trigger(g)},close:function(){t.trigger(v)},copyAnchorStyles:!1,animation:i.animation},S[i.position])),n.css({width:i.width,height:i.height}),t.content=n.find(".k-tooltip-content"),t.arrow=n.find(".k-callout"),i.autoHide?n.on("mouseleave"+C,u(t._mouseleave,t)):n.on("click"+C,".k-tooltip-button",u(t._closeButtonClick,t))},_closeButtonClick:function(e){e.preventDefault(),this.hide()},_mouseleave:function(i){if(this.popup){var n=e(i.currentTarget),r=n.offset(),o=i.pageX,s=i.pageY;if(r.right=r.left+n.outerWidth(),r.bottom=r.top+n.outerHeight(),o>r.left&&r.right>o&&s>r.top&&r.bottom>s)return;this.popup.close()}else t(e(i.currentTarget));clearTimeout(this.timeout)},_positionCallout:function(){var t=this,i=t.options.position,n=t.dimensions,r=n.offset,o=t.popup,s=o.options.anchor,a=e(s).offset(),l=parseInt(t.arrow.css("border-top-width"),10),c=e(o.element).offset(),d=D[o.flipped?T[i]:i],u=a[r]-c[r]+e(s)[n.size]()/2-l;t.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+d).css(r,u)},target:function(){return this.popup?this.popup.options.anchor:null},destroy:function(){var e=this.popup;e&&(e.element.off(C),e.destroy()),this.element.off(C),h.off("keydown"+C,this._documentKeyDownHandler),s.fn.destroy.call(this)}});o.ui.plugin(E)}(window.kendo.jQuery),function(e,t){function i(t,n){var r,o=!1;return t.filters&&(r=e.grep(t.filters,function(e){return o=i(e,n),e.filters?e.filters.length:e.field!=n}),o||t.filters.length===r.length||(o=!0),t.filters=r),o}var n=window.kendo,r=n.ui,o=r.Widget,s=n.keys,a=n.support,l=n.htmlEncode,c=n._activeElement,d="id",u="li",h="change",p="k-state-focused",f="k-state-hover",m="k-loading",g="open",v="close",y="select",_="selected",b="progress",w="requestEnd",k="width",x=e.extend,C=e.proxy,S=a.browser,T=S.msie&&9>S.version,D=/"/g,M={ComboBox:"DropDownList",DropDownList:"ComboBox"},A=n.ui.DataBoundWidget.extend({init:function(t,i){var n,r=this,s=r.ns;o.fn.init.call(r,t,i),t=r.element,r._isSelect=t.is(y),r._template(),r.ul=e('<ul unselectable="on" class="k-list k-reset"/>').css({overflow:a.kineticScrollNeeded?"":"auto"}).on("mouseenter"+s,u,function(){e(this).addClass(f)}).on("mouseleave"+s,u,function(){e(this).removeClass(f)}).on("click"+s,u,C(r._click,r)).attr({tabIndex:-1,role:"listbox","aria-hidden":!0}),r.list=e("<div class='k-list-container'/>").append(r.ul).on("mousedown"+s,C(r._listMousedown,r)),n=t.attr(d),n&&(r.list.attr(d,n+"-list"),r.ul.attr(d,n+"_listbox"),r._optionID=n+"_option_selected"),r._header(),r._accessors(),r._initValue()},options:{valuePrimitive:!1,headerTemplate:""},setOptions:function(e){o.fn.setOptions.call(this,e),e&&e.enable!==t&&(e.enabled=e.enable)},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_filterSource:function(e,t){var n=this,r=n.options,o=n.dataSource,s=x({},o.filter()||{}),a=i(s,r.dataTextField);(e||a)&&n.trigger("filtering",{filter:e})||(e&&(s=s.filters||[],s.push(e)),t?o.read(s):o.filter(s))},_header:function(){var t,i=this,n=i.options.headerTemplate;e.isFunction(n)&&(n=n({})),n&&(i.list.prepend(n),t=i.ul.prev(),i.header=t[0]?t:null,i.header&&i.angular("compile",function(){return{elements:i.header}}))},_initValue:function(){var e=this,t=e.options.value;null!==t?e.element.val(t):(t=e._accessor(),e.options.value=t),e._old=t},_ignoreCase:function(){var e,t=this,i=t.dataSource.reader.model;i&&i.fields&&(e=i.fields[t.options.dataTextField],e&&e.type&&"string"!==e.type&&(t.options.ignoreCase=!1))},items:function(){return this.ul[0].children},current:function(e){var i=this,n=i._focused.add(i.filterInput),r=i._optionID;return e===t?i._current:(i._current&&(i._current.removeClass(p).removeAttr("aria-selected").removeAttr(d),n.removeAttr("aria-activedescendant")),e&&(e.addClass(p),i._scroll(e),r&&(e.attr("id",r),n.attr("aria-activedescendant",r))),i._current=e,t)},destroy:function(){var e=this,t=e.ns;o.fn.destroy.call(e),e._unbindDataSource(),e.ul.off(t),e.list.off(t),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy(),e._form&&e._form.off("reset",e._resetHandler)},dataItem:function(i){var n=this;return i===t?i=n.selectedIndex:"number"!=typeof i&&(i=e(n.items()).index(i)),n._data()[i]},_accessors:function(){var e=this,t=e.element,i=e.options,r=n.getter,o=t.attr(n.attr("text-field")),s=t.attr(n.attr("value-field"));!i.dataTextField&&o&&(i.dataTextField=o),!i.dataValueField&&s&&(i.dataValueField=s),e._text=r(i.dataTextField),e._value=r(i.dataValueField)},_aria:function(e){var i=this,n=i.options,r=i._focused.add(i.filterInput);n.suggest!==t&&r.attr("aria-autocomplete",n.suggest?"both":"list"),e=e?e+" "+i.ul[0].id:i.ul[0].id,r.attr("aria-owns",e),i.ul.attr("aria-live",n.filter&&"none"!==n.filter?"polite":"off")},_blur:function(){var e=this;e._change(),e.close()},_change:function(){var e,i=this,n=i.selectedIndex,r=i.options.value,o=i.value();i._isSelect&&!i._bound&&r&&(o=r),o!==i._old?e=!0:n!==t&&n!==i._oldIndex&&(e=!0),e&&(i._old=o,i._oldIndex=n,i.element.trigger(h),i.trigger(h))},_click:function(t){t.isDefaultPrevented()||this._accept(e(t.currentTarget))},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,i=e.options,n=e.element.is("[disabled]");i.enable!==t&&(i.enabled=i.enable),!i.enabled||n?e.enable(!1):e.readonly(e.element.is("[readonly]"))},_focus:function(e){var i=this,n=!0;return i.popup.visible()&&e&&i.trigger(y,{item:e})?(i.close(),t):(i._select(e),i._triggerCascade(n),i._blur(),t)},_index:function(e){var t,i,n=this,r=n._data();for(t=0,i=r.length;i>t;t++)if(n._dataValue(r[t])==e)return t;return-1},_dataValue:function(e){var i=this._value(e);return i===t&&(i=this._text(e)),i},_height:function(e){if(e){var t,i,n=this,r=n.list,o=n.options.height,s=n.popup.visible();i=r.add(r.parent(".k-animation-container")).show(),o=n.ul[0].scrollHeight>o?o:"auto",i.height(o),"auto"!==o&&(t=n.ul[0].offsetTop,t&&(o=r.height()-t)),n.ul.height(o),s||i.hide()}},_adjustListWidth:function(){var e,t,i=this.list,n=i[0].style.width,r=this.wrapper;if(i.data(k)||!n)return e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&S.msie&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),n="border-box"!==i.css("box-sizing")?t-(i.outerWidth()-i.width()):t,i.css({fontFamily:r.css("font-family"),width:n}).data(k,n),!0},_openHandler:function(e){this._adjustListWidth(),this.trigger(g)?e.preventDefault():(this._focused.attr("aria-expanded",!0),this.ul.attr("aria-hidden",!1))},_closeHandler:function(e){this.trigger(v)?e.preventDefault():(this._focused.attr("aria-expanded",!1),this.ul.attr("aria-hidden",!0))},_firstOpen:function(){this._height(this._data().length)},_popup:function(){var e=this;e.popup=new r.Popup(e.list,x({},e.options.popup,{anchor:e.wrapper,open:C(e._openHandler,e),close:C(e._closeHandler,e),animation:e.options.animation,isRtl:a.isRtl(e.wrapper)})),e.popup.one(g,C(e._firstOpen,e)),e._touchScroller=n.touchScroller(e.popup.element)},_makeUnselectable:function(){T&&this.list.find("*").not(".k-textbox").attr("unselectable","on")},_toggleHover:function(t){e(t.currentTarget).toggleClass(f,"mouseenter"===t.type)},_toggle:function(e,i){var n=this,r=a.touch&&a.MSPointers&&a.pointers;e=e!==t?e:!n.popup.visible(),i||r||n._focused[0]===c()||n._focused.focus(),n[e?g:v]()},_scroll:function(e){if(e){e[0]&&(e=e[0]);var t,i,n=this.ul[0],r=e.offsetTop,o=e.offsetHeight,s=n.scrollTop,a=n.clientHeight,l=r+o,c=this._touchScroller;c?(t=c.dimensions.y,t.enabled&&r>t.size&&(r=r-t.size+o+4,c.scrollTo(0,-r))):(i=this.header?this.header.outerHeight():0,i+=this.filterInput?this.filterInput.outerHeight():0,n.scrollTop=s>r?r-i:l>s+a?l-a-i:s)}},_template:function(){var e=this,t=e.options,i=t.template,r=t.dataSource;e._isSelect&&e.element[0].length&&(r||(t.dataTextField=t.dataTextField||"text",t.dataValueField=t.dataValueField||"value")),i?(i=n.template(i),e.template=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+i(e)+"</li>"}):e.template=n.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+n.expr(t.dataTextField,"data")+"}</li>",{useWithBlock:!1})},_triggerCascade:function(e){var t=this,i=t.value();(!t._bound&&i||t._old!==i)&&t.trigger("cascade",{userTriggered:e})},_unbindDataSource:function(){var e=this;e.dataSource.unbind(h,e._refreshHandler).unbind(b,e._progressHandler).unbind(w,e._requestEndHandler).unbind("error",e._errorHandler)}});x(A,{inArray:function(e,t){var i,n,r=t.children;if(!e||e.parentNode!==t)return-1;for(i=0,n=r.length;n>i;i++)if(e===r[i])return i;return-1}}),n.ui.List=A,r.Select=A.extend({init:function(e,t){A.fn.init.call(this,e,t),this._initial=this.element.val()},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this._bound=!1,this.options.autoBind&&this.dataSource.fetch()},close:function(){this.popup.close()},select:function(e){var i=this;return e===t?i.selectedIndex:(i._select(e),i._triggerCascade(),i._old=i._accessor(),i._oldIndex=i.selectedIndex,t)},search:function(e){var t,i,n,r,o,s;e="string"==typeof e?e:this.text(),t=this,i=e.length,n=t.options,r=n.ignoreCase,o=n.filter,s=n.dataTextField,clearTimeout(t._typing),(!i||i>=n.minLength)&&(t._state="filter","none"===o?t._filter(e):(t._open=!0,t._filterSource({value:r?e.toLowerCase():e,field:s,operator:o,ignoreCase:r})))},_accessor:function(e,i){var n,r=this.element[0],o=this._isSelect,s=r.selectedIndex;return e===t?(o?s>-1&&(n=r.options[s],n&&(e=n.value)):e=r.value,e):(o?(s>-1&&r.options[s].removeAttribute(_),r.selectedIndex=i,n=r.options[i],n&&n.setAttribute(_,_)):r.value=e,t)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._arrow.removeClass(m),e._focused.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(function(){e._arrow&&(e._focused.attr("aria-busy",!0),e._arrow.addClass(m))},100))},_requestEnd:function(){this._request=!1},_dataSource:function(){var t,i=this,r=i.element,o=i.options,s=o.dataSource||{};s=e.isArray(s)?{data:s}:s,i._isSelect&&(t=r[0].selectedIndex,t>-1&&(o.index=t),s.select=r,s.fields=[{field:o.dataTextField},{field:o.dataValueField}]),i.dataSource&&i._refreshHandler?i._unbindDataSource():(i._refreshHandler=C(i.refresh,i),i._progressHandler=C(i._showBusy,i),i._requestEndHandler=C(i._requestEnd,i),i._errorHandler=C(i._hideBusy,i)),i.dataSource=n.data.DataSource.create(s).bind(h,i._refreshHandler).bind(b,i._progressHandler).bind(w,i._requestEndHandler).bind("error",i._errorHandler)},_get:function(t){var i,n,r=this,o=r._data();if("function"==typeof t)for(i=0,n=o.length;n>i;i++)if(t(o[i])){t=i;break}if("number"==typeof t){if(0>t)return e();t=e(r.ul[0].children[t])}return t&&t.nodeType&&(t=e(t)),t},_move:function(e){var t,i,n=this,r=e.keyCode,o=n.ul[0],a=n.popup.visible()?"_select":"_accept",l=n._current,c=r===s.DOWN;if(r===s.UP||c){if(e.altKey)n.toggle(c);else{if(t=o.firstChild,!t&&!n._accessor()&&"filter"!==n._state)return n._fetch||(n.dataSource.one(h,function(){n._move(e),n._fetch=!1}),n._fetch=!0,n._filterSource()),e.preventDefault(),!0;c?(!l||-1===n.selectedIndex&&!n.value()&&l[0]===t?l=t:(l=l[0].nextSibling,l||t!==o.lastChild||(l=t)),n[a](l)):(l=l?l[0].previousSibling:o.lastChild,l||t!==o.lastChild||(l=t),n[a](l))}e.preventDefault(),i=!0}else r===s.ENTER||r===s.TAB?(n.popup.visible()&&e.preventDefault(),n.popup.visible()||l&&l.hasClass("k-state-selected")||(l=null),n._accept(l,r),i=!0):r===s.ESC&&(n.popup.visible()&&e.preventDefault(),n.close(),i=!0);return i},_selectItem:function(){var e,i,n=this,r=n._bound===t,o=n.options;e=n._isSelect&&!n._initial&&!o.value&&o.index&&!n._bound,e||(i=n._selectedValue||r&&o.value||n._accessor()),i?n.value(i):r&&n.select(o.index)},_fetchItems:function(e){var i=this,n=i.ul[0].firstChild;return!!i._request||(i._bound||i._fetch||n?t:i.options.cascadeFrom?!n:(i.dataSource.one(h,function(){i._old=t,i.value(e),i._fetch=!1}),i._fetch=!0,i.dataSource.fetch(),!0))},_options:function(e,i){var n,r,o,s,a=this,c=a.element,d=e.length,u="",h=0;for(i&&(h=1,u=i);d>h;h++)n="<option",r=e[h],o=a._text(r),s=a._value(r),s!==t&&(s+="",-1!==s.indexOf('"')&&(s=s.replace(D,"&quot;")),n+=' value="'+s+'"'),n+=">",o!==t&&(n+=l(o)),n+="</option>",u+=n;c.html(u)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initial)})},t._form=r.on("reset",t._resetHandler))},_cascade:function(){var t,n,r,o,s,a=this,l=a.options,c=l.cascadeFrom;if(c){if(a._selectedValue=l.value||a._accessor(),n=e("#"+c),t=n.data("kendo"+l.name),t||(t=n.data("kendo"+M[l.name])),!t)return;l.autoBind=!1,o=l.cascadeFromField||t.options.dataValueField,s=function(){a.dataSource.unbind(h,s);var e=a._selectedValue||a.value();a._userTriggered?a._clearSelection(t,!0):e?(a.value(e),a.dataSource.view()[0]&&-1!==a.selectedIndex||a._clearSelection(t,!0)):a.select(l.index),a.enable(),a._triggerCascade(a._userTriggered),a._userTriggered=!1},r=function(){var e,n,r,l=t.dataItem(),c=l?t._value(l):null;c||0===c?(e=a.dataSource.filter()||{},i(e,o),n=e.filters||[],n.push({field:o,operator:"eq",value:c}),r=function(){a.unbind("dataBound",r),s.apply(a,arguments)},a.first("dataBound",r),a.dataSource.filter(n)):(a.enable(!1),a._clearSelection(t),a._triggerCascade(a._userTriggered),a._userTriggered=!1)},t.first("cascade",function(e){a._userTriggered=e.userTriggered,r()}),t._bound?r():t.value()||a.enable(!1)}}})}(window.kendo.jQuery),function(e,t){function i(e,t,i,n){var r,o=e.getFullYear(),s=t.getFullYear(),a=i.getFullYear();return o-=o%n,r=o+(n-1),s>o&&(o=s),r>a&&(r=a),o+"-"+r}function n(e){for(var t,i=0,n=e.min,r=e.max,o=e.start,s=e.setter,l=e.build,c=e.cells||12,d=e.perRow||4,u=e.content||I,h=e.empty||P,p=e.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';c>i;i++)i>0&&i%d===0&&(p+='</tr><tr role="row">'),t=l(o,i),p+=a(o,n,r)?u(t):h(t),s(o,1);return p+"</tr></tbody></table>"}function r(e,t,i){var n=e.getFullYear(),r=t.getFullYear(),o=r,s=0;return i&&(r-=r%i,o=r-r%i+i-1),n>o?s=1:r>n&&(s=-1),s}function o(){var e=new fe;return new fe(e.getFullYear(),e.getMonth(),e.getDate())}function s(e,t,i){var n=o();return e&&(n=new fe((+e))),t>n?n=new fe((+t)):n>i&&(n=new fe((+i))),n}function a(e,t,i){return+e>=+t&&+i>=+e}function l(e,t){return e.slice(t).concat(e.slice(0,t))}function c(e,t,i){t=t instanceof fe?t.getFullYear():e.getFullYear()+i*t,e.setFullYear(t)}function d(t){e(this).toggleClass(G,ne.indexOf(t.type)>-1||t.type==te)}function u(e){e.preventDefault()}function h(e){return M(e).calendars.standard}function p(e){var i=me[e.start],n=me[e.depth],r=M(e.culture);e.format=T(e.format||r.calendars.standard.patterns.d),isNaN(i)&&(i=0,e.start=U),(n===t||n>i)&&(e.depth=U),e.dates||(e.dates=[])}function f(e){z&&e.find("*").attr("unselectable","on")}function m(e,t){for(var i=0,n=t.length;n>i;i++)if(e===+t[i])return!0;return!1}function g(e,t){return!!e&&(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate())}function v(e,t){return!!e&&(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth())}var y,_=window.kendo,b=_.support,w=_.ui,k=w.Widget,x=_.keys,C=_.parseDate,S=_.date.adjustDST,T=_._extractFormat,D=_.template,M=_.getCulture,A=_.support.transitions,E=A?A.css+"transform-origin":"",I=D('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),P=D('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),F=_.support.browser,z=F.msie&&9>F.version,H=".kendoCalendar",R="click"+H,N="keydown"+H,$="id",O="min",L="left",B="slideIn",U="month",V="century",W="change",j="navigate",q="value",G="k-state-hover",Y="k-state-disabled",Q="k-state-focused",K="k-other-month",X=' class="'+K+'"',Z="k-nav-today",J="td:has(.k-link)",ee="blur"+H,te="focus",ie=te+H,ne=b.touch?"touchstart":"mouseenter",re=b.touch?"touchstart"+H:"mouseenter"+H,oe=b.touch?"touchend"+H+" touchmove"+H:"mouseleave"+H,se=6e4,ae=864e5,le="_prevArrow",ce="_nextArrow",de="aria-disabled",ue="aria-selected",he=e.proxy,pe=e.extend,fe=Date,me={month:0,year:1,decade:2,century:3},ge=k.extend({init:function(t,i){var n,r,o=this;k.fn.init.call(o,t,i),t=o.wrapper=o.element,i=o.options,i.url=window.unescape(i.url),o._templates(),o._header(),o._footer(o.footer),r=t.addClass("k-widget k-calendar").on(re+" "+oe,J,d).on(N,"table.k-content",he(o._move,o)).on(R,J,function(t){var i=t.currentTarget.firstChild;-1!=i.href.indexOf("#")&&t.preventDefault(),o._click(e(i))}).on("mouseup"+H,"table.k-content, .k-footer",function(){o._focusView(o.options.focusOnNav!==!1)}).attr($),r&&(o._cellID=r+"_cell_selected"),p(i),n=C(i.value,i.format,i.culture),o._index=me[i.start],o._current=new fe((+s(n,i.min,i.max))),o._addClassProxy=function(){o._active=!0,o._cell.addClass(Q)},o._removeClassProxy=function(){o._active=!1,o._cell.removeClass(Q)},o.value(n),_.notify(o)},options:{name:"Calendar",value:null,min:new fe(1900,0,1),max:new fe(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:U,depth:U,animation:{horizontal:{effects:B,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[W,j],setOptions:function(e){var t=this;p(e),e.dates[0]||(e.dates=t.options.dates),k.fn.setOptions.call(t,e),t._templates(),t._footer(t.footer),t._index=me[t.options.start],t.navigate()},destroy:function(){var e=this,t=e._today;e.element.off(H),e._title.off(H),e[le].off(H),e[ce].off(H),_.destroy(e._table),t&&_.destroy(t.off(H)),k.fn.destroy.call(e)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table,this._bindTable(e),e.focus()},min:function(e){return this._option(O,e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(le,-1)},navigateToFuture:function(){this._navigate(ce,1)},navigateUp:function(){var e=this,t=e._index;e._title.hasClass(Y)||e.navigate(e._current,++t)},navigateDown:function(e){var i=this,n=i._index,r=i.options.depth;if(e)return n===me[r]?(+i._value!=+e&&(i.value(e),i.trigger(W)),t):(i.navigate(e,--n),t)},navigate:function(i,n){n=isNaN(n)?me[n]:n;var r,o,a,l,c=this,d=c.options,u=d.culture,h=d.min,p=d.max,m=c._title,g=c._table,v=c._oldTable,_=c._value,b=c._current,w=i&&+i>+b,k=n!==t&&n!==c._index;i||(i=b),c._current=i=new fe((+s(i,h,p))),n===t?n=c._index:c._index=n,c._view=o=y.views[n],a=o.compare,l=n===me[V],m.toggleClass(Y,l).attr(de,l),l=a(i,h)<1,c[le].toggleClass(Y,l).attr(de,l),l=a(i,p)>-1,c[ce].toggleClass(Y,l).attr(de,l),g&&v&&v.data("animating")&&(v.kendoStop(!0,!0),g.kendoStop(!0,!0)),c._oldTable=g,(!g||c._changeView)&&(m.html(o.title(i,h,p,u)),c._table=r=e(o.content(pe({min:h,max:p,date:i,url:d.url,dates:d.dates,format:d.format,culture:u},c[o.name]))),f(r),c._animate({from:g,to:r,vertical:k,future:w}),c._focus(i),c.trigger(j)),n===me[d.depth]&&_&&c._class("k-state-selected",o.toDateString(_)),c._class(Q,o.toDateString(i)),!g&&c._cell&&c._cell.removeClass(Q),c._changeView=!0},value:function(e){var i=this,n=i._view,r=i.options,o=i._view,s=r.min,l=r.max;return e===t?i._value:(e=C(e,r.format,r.culture),null!==e&&(e=new fe((+e)),a(e,s,l)||(e=null)),i._value=e,o&&null===e&&i._cell?i._cell.removeClass("k-state-selected"):(i._changeView=!e||n&&0!==n.compare(e,i._current),
i.navigate(e)),t)},_move:function(t){var i,n,r,o,a=this,l=a.options,c=t.keyCode,d=a._view,u=a._index,h=new fe((+a._current)),p=_.support.isRtl(a.wrapper);return t.target===a._table[0]&&(a._active=!0),t.ctrlKey?c==x.RIGHT&&!p||c==x.LEFT&&p?(a.navigateToFuture(),n=!0):c==x.LEFT&&!p||c==x.RIGHT&&p?(a.navigateToPast(),n=!0):c==x.UP?(a.navigateUp(),n=!0):c==x.DOWN&&(a._click(e(a._cell[0].firstChild)),n=!0):(c==x.RIGHT&&!p||c==x.LEFT&&p?(i=1,n=!0):c==x.LEFT&&!p||c==x.RIGHT&&p?(i=-1,n=!0):c==x.UP?(i=0===u?-7:-4,n=!0):c==x.DOWN?(i=0===u?7:4,n=!0):c==x.ENTER?(a._click(e(a._cell[0].firstChild)),n=!0):c==x.HOME||c==x.END?(r=c==x.HOME?"first":"last",o=d[r](h),h=new fe(o.getFullYear(),o.getMonth(),o.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()),n=!0):c==x.PAGEUP?(n=!0,a.navigateToPast()):c==x.PAGEDOWN&&(n=!0,a.navigateToFuture()),(i||r)&&(r||d.setDate(h,i),a._focus(s(h,l.min,l.max)))),n&&t.preventDefault(),a._current},_animate:function(e){var t=this,i=e.from,n=e.to,r=t._active;i?i.parent().data("animating")?(i.off(H),i.parent().kendoStop(!0,!0).remove(),i.remove(),n.insertAfter(t.element[0].firstChild),t._focusView(r)):i.is(":visible")&&t.options.animation!==!1?t[e.vertical?"_vertical":"_horizontal"](i,n,e.future):(n.insertAfter(i),i.off(H).remove(),t._focusView(r)):(n.insertAfter(t.element[0].firstChild),t._bindTable(n))},_horizontal:function(e,t,i){var n=this,r=n._active,o=n.options.animation.horizontal,s=o.effects,a=e.outerWidth();s&&-1!=s.indexOf(B)&&(e.add(t).css({width:a}),e.wrap("<div/>"),n._focusView(r,e),e.parent().css({position:"relative",width:2*a,float:L,"margin-left":i?0:-a}),t[i?"insertAfter":"insertBefore"](e),pe(o,{effects:B+":"+(i?"right":L),complete:function(){e.off(H).remove(),n._oldTable=null,t.unwrap(),n._focusView(r)}}),e.parent().kendoStop(!0,!0).kendoAnimate(o))},_vertical:function(e,t){var i,n,r=this,o=r.options.animation.vertical,s=o.effects,a=r._active;s&&-1!=s.indexOf("zoom")&&(t.css({position:"absolute",top:e.prev().outerHeight(),left:0}).insertBefore(e),E&&(i=r._cellByDate(r._view.toDateString(r._current)),n=i.position(),n=n.left+parseInt(i.width()/2,10)+"px "+(n.top+parseInt(i.height()/2,10)+"px"),t.css(E,n)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.off(H).remove(),r._oldTable=null,t.css({position:"static",top:0,left:0}),r._focusView(a)}}),t.kendoStop(!0,!0).kendoAnimate(o))},_cellByDate:function(t){return this._table.find("td:not(."+K+")").filter(function(){return e(this.firstChild).attr(_.attr(q))===t})},_class:function(t,i){var n=this,r=n._cellID,o=n._cell;o&&o.removeAttr(ue).removeAttr("aria-label").removeAttr($),o=n._table.find("td:not(."+K+")").removeClass(t).filter(function(){return e(this.firstChild).attr(_.attr(q))===i}).attr(ue,!0),t!==Q||n._active||n.options.focusOnNav===!1||(t=""),o.addClass(t),o[0]&&(n._cell=o),r&&(o.attr($,r),n._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",r))},_bindTable:function(e){e.on(ie,this._addClassProxy).on(ee,this._removeClassProxy)},_click:function(e){var t=this,i=t.options,n=new Date((+t._current)),r=e.attr(_.attr(q)).split("/");r=new fe(r[0],r[1],r[2]),S(r,0),t._view.setDate(n,r),t.navigateDown(s(n,i.min,i.max))},_focus:function(e){var t=this,i=t._view;0!==i.compare(e,t._current)?t.navigate(e):(t._current=e,t._class(Q,i.toDateString(e)))},_focusView:function(e,t){e&&this.focus(t)},_footer:function(i){var n=this,r=o(),s=n.element,a=s.find(".k-footer");return i?(a[0]||(a=e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(s)),n._today=a.show().find(".k-link").html(i(r)).attr("title",_.toString(r,"D",n.options.culture)),n._toggle(),t):(n._toggle(!1),a.hide(),t)},_header:function(){var e,t=this,i=t.element;i.find(".k-header")[0]||i.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),e=i.find(".k-link").on(re+" "+oe+" "+ie+" "+ee,d).click(!1),t._title=e.eq(1).on(R,function(){t._active=t.options.focusOnNav!==!1,t.navigateUp()}),t[le]=e.eq(0).on(R,function(){t._active=t.options.focusOnNav!==!1,t.navigateToPast()}),t[ce]=e.eq(2).on(R,function(){t._active=t.options.focusOnNav!==!1,t.navigateToFuture()})},_navigate:function(e,t){var i=this,n=i._index+1,r=new fe((+i._current));e=i[e],e.hasClass(Y)||(n>3?r.setFullYear(r.getFullYear()+100*t):y.views[n].setDate(r,t),i.navigate(r))},_option:function(e,i){var n,r=this,o=r.options,s=r._value||r._current;return i===t?o[e]:(i=C(i,o.format,o.culture),i&&(o[e]=new fe((+i)),n=e===O?i>s:s>i,(n||v(s,i))&&(n&&(r._value=null),r._changeView=!0),r._changeView||(r._changeView=!(!o.month.content&&!o.month.empty)),r.navigate(r._value),r._toggle()),t)},_toggle:function(e){var i=this,n=i.options,r=i._today;e===t&&(e=a(o(),n.min,n.max)),r&&(r.off(R),e?r.addClass(Z).removeClass(Y).on(R,he(i._todayClick,i)):r.removeClass(Z).addClass(Y).on(R,u))},_todayClick:function(e){var t=this,i=me[t.options.depth],n=o();e.preventDefault(),0===t._view.compare(t._current,n)&&t._index==i&&(t._changeView=!1),t._value=n,t.navigate(n,i),t.trigger(W)},_templates:function(){var e=this,t=e.options,i=t.footer,n=t.month,r=n.content,o=n.empty;e.month={content:D('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+_.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:D('<td role="gridcell">'+(o||"&nbsp;")+"</td>",{useWithBlock:!!o})},e.footer=i!==!1?D(i||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}):null}});w.plugin(ge),y={firstDayOfMonth:function(e){return new fe(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){t=t||_.culture().calendar;for(var i=t.firstDay,n=new fe(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());n.getDay()!=i;)y.setTime(n,-1*ae);return n},setTime:function(e,t){var i=e.getTimezoneOffset(),n=new fe(e.getTime()+t),r=n.getTimezoneOffset()-i;e.setTime(n.getTime()+r*se)},views:[{name:U,title:function(e,t,i,n){return h(n).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){for(var t=this,i=0,r=e.min,o=e.max,s=e.date,a=e.dates,c=e.format,d=e.culture,u=e.url,p=u&&a[0],f=h(d),g=f.firstDay,v=f.days,b=l(v.names,g),w=l(v.namesShort,g),k=y.firstVisibleDay(s,f),x=t.first(s),C=t.last(s),T=t.toDateString,D=new fe,M='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>i;i++)M+='<th scope="col" title="'+b[i]+'">'+w[i]+"</th>";return D=new fe(D.getFullYear(),D.getMonth(),D.getDate()),S(D,0),D=+D,n({cells:42,perRow:7,html:M+='</tr></thead><tbody><tr role="row">',start:new fe(k.getFullYear(),k.getMonth(),k.getDate()),min:new fe(r.getFullYear(),r.getMonth(),r.getDate()),max:new fe(o.getFullYear(),o.getMonth(),o.getDate()),content:e.content,empty:e.empty,setter:t.setDate,build:function(e){var t=[],i=e.getDay(),n="",r="#";return(x>e||e>C)&&t.push(K),+e===D&&t.push("k-today"),(0===i||6===i)&&t.push("k-weekend"),p&&m(+e,a)&&(r=u.replace("{0}",_.toString(e,c,d)),n=" k-action-link"),{date:e,dates:a,ns:_.ns,title:_.toString(e,"D",d),value:e.getDate(),dateString:T(e),cssClass:t[0]?' class="'+t.join(" ")+'"':"",linkClass:n,url:r}}})},first:function(e){return y.firstDayOfMonth(e)},last:function(e){var t=new fe(e.getFullYear(),e.getMonth()+1,0),i=y.firstDayOfMonth(e),n=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());return n&&t.setHours(i.getHours()+n/60),t},compare:function(e,t){var i,n=e.getMonth(),r=e.getFullYear(),o=t.getMonth(),s=t.getFullYear();return i=r>s?1:s>r?-1:n==o?0:n>o?1:-1},setDate:function(e,t){var i=e.getHours();t instanceof fe?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):y.setTime(e,t*ae),S(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=h(e.culture).months.namesAbbr,i=this.toDateString,r=e.min,o=e.max;return n({min:new fe(r.getFullYear(),r.getMonth(),1),max:new fe(o.getFullYear(),o.getMonth(),1),start:new fe(e.date.getFullYear(),0,1),setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:_.ns,dateString:i(e),cssClass:""}}})},first:function(e){return new fe(e.getFullYear(),0,e.getDate())},last:function(e){return new fe(e.getFullYear(),11,e.getDate())},compare:function(e,t){return r(e,t)},setDate:function(e,t){var i,n=e.getHours();t instanceof fe?(i=t.getMonth(),e.setFullYear(t.getFullYear(),i,e.getDate()),i!==e.getMonth()&&e.setDate(0)):(i=e.getMonth()+t,e.setMonth(i),i>11&&(i-=12),i>0&&e.getMonth()!=i&&e.setDate(0)),S(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e,t,n){return i(e,t,n,10)},content:function(e){var t=e.date.getFullYear(),i=this.toDateString;return n({start:new fe(t-t%10-1,0,1),min:new fe(e.min.getFullYear(),0,1),max:new fe(e.max.getFullYear(),0,1),setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:_.ns,dateString:i(e),cssClass:0===t||11==t?X:""}}})},first:function(e){var t=e.getFullYear();return new fe(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new fe(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,10)},setDate:function(e,t){c(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:V,title:function(e,t,n){return i(e,t,n,100)},content:function(e){var t=e.date.getFullYear(),i=e.min.getFullYear(),r=e.max.getFullYear(),o=this.toDateString,s=i,a=r;return s-=s%10,a-=a%10,10>a-s&&(a=s+9),n({start:new fe(t-t%100-10,0,1),min:new fe(s,0,1),max:new fe(a,0,1),setter:this.setDate,build:function(e,t){var n=e.getFullYear(),s=n+9;return i>n&&(n=i),s>r&&(s=r),{ns:_.ns,value:n+" - "+s,dateString:o(e),cssClass:0===t||11==t?X:""}}})},first:function(e){var t=e.getFullYear();return new fe(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new fe(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,100)},setDate:function(e,t){c(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]},y.isEqualDatePart=g,y.makeUnselectable=f,y.restrictValue=s,y.isInRange=a,y.normalize=p,y.viewsEnum=me,_.calendar=y}(window.kendo.jQuery),function(e,t){function i(t){var i=t.parseFormats,n=t.format;R.normalize(t),i=e.isArray(i)?i:[i],-1===e.inArray(n,i)&&i.splice(0,0,t.format),t.parseFormats=i}function n(e){e.preventDefault()}var r,o=window.kendo,s=o.ui,a=s.Widget,l=o.parseDate,c=o.keys,d=o.template,u=o._activeElement,h="<div />",p="<span />",f=".kendoDatePicker",m="click"+f,g="open",v="close",y="change",_="disabled",b="readonly",w="k-state-default",k="k-state-focused",x="k-state-selected",C="k-state-disabled",S="k-state-hover",T="mouseenter"+f+" mouseleave"+f,D="mousedown"+f,M="id",A="min",E="max",I="month",P="aria-disabled",F="aria-expanded",z="aria-hidden",H="aria-readonly",R=o.calendar,N=R.isInRange,$=R.restrictValue,O=R.isEqualDatePart,L=e.extend,B=e.proxy,U=Date,V=function(t){var i,n=this,r=document.body,a=e(h).attr(z,"true").addClass("k-calendar-container").appendTo(r);n.options=t=t||{},i=t.id,i&&(i+="_dateview",a.attr(M,i),n._dateViewID=i),n.popup=new s.Popup(a,L(t.popup,t,{name:"Popup",isRtl:o.support.isRtl(t.anchor)})),n.div=a,n.value(t.value)};V.prototype={_calendar:function(){var t,i=this,r=i.calendar,a=i.options;r||(t=e(h).attr(M,o.guid()).appendTo(i.popup.element).on(D,n).on(m,"td:has(.k-link)",B(i._click,i)),i.calendar=r=new s.Calendar(t),i._setOptions(a),o.calendar.makeUnselectable(r.element),r.navigate(i._value||i._current,a.start),i.value(i._value))},_setOptions:function(e){this.calendar.setOptions({focusOnNav:!1,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,max:e.max,min:e.min,month:e.month,start:e.start})},setOptions:function(e){var t=this.options;this.options=L(t,e,{change:t.change,close:t.close,open:t.open}),this.calendar&&this._setOptions(this.options)},destroy:function(){this.popup.destroy()},open:function(){var e=this;e._calendar(),e.popup.open()},close:function(){this.popup.close()},min:function(e){this._option(A,e)},max:function(e){this._option(E,e)},toggle:function(){var e=this;e[e.popup.visible()?v:g]()},move:function(e){var i=this,n=e.keyCode,r=i.calendar,o=e.ctrlKey&&n==c.DOWN||n==c.ENTER;return n==c.ESC?(i.close(),t):e.altKey?(n==c.DOWN?(i.open(),e.preventDefault()):n==c.UP&&(i.close(),e.preventDefault()),t):i.popup.visible()?o&&r._cell.hasClass(x)?(i.close(),e.preventDefault(),t):(i._current=r._move(e),t):void 0},current:function(e){this._current=e,this.calendar._focus(e)},value:function(e){var t=this,i=t.calendar,n=t.options;t._value=e,t._current=new U((+$(e,n.min,n.max))),i&&i.value(e)},_click:function(e){-1!==e.currentTarget.className.indexOf(x)&&this.close()},_option:function(e,t){var i=this,n=i.calendar;i.options[e]=t,n&&n[e](t)}},V.normalize=i,o.DateView=V,r=a.extend({init:function(e,t){var n,r,s=this;a.fn.init.call(s,e,t),e=s.element,t=s.options,t.min=l(e.attr("min"))||l(t.min),t.max=l(e.attr("max"))||l(t.max),i(t),s._wrapper(),s.dateView=new V(L({},t,{id:e.attr(M),anchor:s.wrapper,change:function(){s._change(this.value()),s.close()},close:function(t){s.trigger(v)?t.preventDefault():(e.attr(F,!1),r.attr(z,!0))},open:function(t){var i,n=s.options;s.trigger(g)?t.preventDefault():(s.element.val()!==s._oldText&&(i=l(e.val(),n.parseFormats,n.culture),s.dateView[i?"current":"value"](i)),e.attr(F,!0),r.attr(z,!1),s._updateARIA(i))}})),r=s.dateView.div,s._icon();try{e[0].setAttribute("type","text")}catch(t){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":s.dateView._dateViewID}),s._reset(),s._template(),n=e.is("[disabled]"),n?s.enable(!1):s.readonly(e.is("[readonly]")),s._old=s._update(t.value||s.element.val()),s._oldText=e.val(),o.notify(s)},events:[g,v,y],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:I,depth:I,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(e){var t=this,n=t._value;a.fn.setOptions.call(t,e),e=t.options,e.min=l(e.min),e.max=l(e.max),i(e),t.dateView.setOptions(e),n&&(t.element.val(o.toString(n,e.format,e.culture)),t._updateARIA(n))},_editable:function(e){var t=this,i=t._dateIcon.off(f),r=t.element.off(f),o=t._inputWrapper.off(f),s=e.readonly,a=e.disable;s||a?(o.addClass(a?C:w).removeClass(a?w:C),r.attr(_,a).attr(b,s).attr(P,a).attr(H,s)):(o.addClass(w).removeClass(C).on(T,t._toggleHover),r.removeAttr(_).removeAttr(b).attr(P,!1).attr(H,!1).on("keydown"+f,B(t._keydown,t)).on("focusout"+f,B(t._blur,t)).on("focus"+f,function(){t._inputWrapper.addClass(k)}),i.on(m,B(t._click,t)).on(D,n))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;a.fn.destroy.call(e),e.dateView.destroy(),e.element.off(f),e._dateIcon.off(f),e._inputWrapper.off(f),e._form&&e._form.off("reset",e._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option(A,e)},max:function(e){return this._option(E,e)},value:function(e){var i=this;return e===t?i._value:(i._old=i._update(e),null===i._old&&i.element.val(""),i._oldText=i.element.val(),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(S,"mouseenter"===t.type)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(k)},_click:function(){var e=this,t=e.element;e.dateView.toggle(),o.support.touch||t[0]===u()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.element.trigger(y),t.trigger(y))},_keydown:function(e){var t=this,i=t.dateView,n=t.element.val();i.popup.visible()||e.keyCode!=c.ENTER||n===t._oldText?(i.move(e),t._updateARIA(i._current)):t._change(n)},_icon:function(){var t,i=this,n=i.element;t=n.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(n)),i._dateIcon=t.attr({role:"button","aria-controls":i.dateView._dateViewID})},_option:function(e,i){var n=this,r=n.options;return i===t?r[e]:(i=l(i,r.parseFormats,r.culture),i&&(r[e]=new U((+i)),n.dateView[e](i)),t)},_update:function(e){var t,i=this,n=i.options,r=n.min,s=n.max,a=i._value,c=l(e,n.parseFormats,n.culture),d=null===c&&null===a||c instanceof Date&&a instanceof Date;return+c===+a&&d?(t=o.toString(c,n.format,n.culture),t!==e&&i.element.val(null===c?e:t),c):(null!==c&&O(c,r)?c=$(c,r,s):N(c,r,s)||(c=null),i._value=c,i.dateView.value(c),i.element.val(c?o.toString(c,n.format,n.culture):e),i._updateARIA(c),c)},_wrapper:function(){var t,i=this,n=i.element;t=n.parents(".k-datepicker"),t[0]||(t=n.wrap(p).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(p).parent()),t[0].style.cssText=n[0].style.cssText,n.css({width:"100%",height:n[0].style.height}),i.wrapper=t.addClass("k-widget k-datepicker k-header").addClass(n[0].className),i._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){t.value(i[0].defaultValue)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=d(this.options.ARIATemplate)},_updateARIA:function(e){var t,i=this,n=i.dateView.calendar;i.element.removeAttr("aria-activedescendant"),n&&(t=n._cell,t.attr("aria-label",i._ariaTemplate({current:e||n.current()})),i.element.attr("aria-activedescendant",t.attr("id")))}}),s.plugin(r)}(window.kendo.jQuery),function(e,t){function i(e,t,i){return i?t.substring(0,e).split(i).length-1:0}function n(e,t,n){return t.split(n)[i(e,t,n)]}function r(e,t,n,r){var o=t.split(r);return o.splice(i(e,t,r),1,n),r&&""!==o[o.length-1]&&o.push(""),o.join(r)}var o=window.kendo,s=o.support,a=o.caret,l=o._activeElement,c=s.placeholder,d=o.ui,u=d.List,h=o.keys,p=o.data.DataSource,f="aria-disabled",m="aria-readonly",g="k-state-default",v="disabled",y="readonly",_="k-state-focused",b="k-state-selected",w="k-state-disabled",k="k-state-hover",x=".kendoAutoComplete",C="mouseenter"+x+" mouseleave"+x,S=e.proxy,T=u.extend({init:function(t,i){var n,r=this;r.ns=x,i=e.isArray(i)?{dataSource:i}:i,u.fn.init.call(r,t,i),t=r.element,i=r.options,i.placeholder=i.placeholder||t.attr("placeholder"),c&&t.attr("placeholder",i.placeholder),r._wrapper(),r._loader(),r._dataSource(),r._ignoreCase(),t[0].type="text",n=r.wrapper,r._popup(),t.addClass("k-input").on("keydown"+x,S(r._keydown,r)).on("paste"+x,S(r._search,r)).on("focus"+x,function(){r._prev=r._accessor(),r._placeholder(!1),n.addClass(_)}).on("focusout"+x,function(){r._change(),r._placeholder(),n.removeClass(_)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),r._enable(),r._old=r._accessor(),t[0].id&&t.attr("aria-owns",r.ul[0].id),r._aria(),r._placeholder(),o.notify(r)},options:{name:"AutoComplete",enabled:!0,suggest:!1,template:"",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{},value:null},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=S(e.refresh,e),e._progressHandler=S(e._showBusy,e)),e.dataSource=p.create(e.options.dataSource).bind("change",e._refreshHandler).bind("progress",e._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},events:["open","close","change","select","filtering","dataBinding","dataBound"],setOptions:function(e){u.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},_editable:function(e){var t=this,i=t.element,n=t.wrapper.off(x),r=e.readonly,o=e.disable;r||o?(n.addClass(o?w:g).removeClass(o?g:w),i.attr(v,o).attr(y,r).attr(f,o).attr(m,r)):(n.addClass(g).removeClass(w).on(C,t._toggleHover),i.removeAttr(v).removeAttr(y).attr(f,!1).attr(m,!1))},close:function(){var e=this,t=e._current;t&&t.removeClass(b),e.current(null),e.popup.close()},destroy:function(){var e=this;e.element.off(x),e.wrapper.off(x),u.fn.destroy.call(e)},refresh:function(){var i,n=this,r=n.ul[0],s=n.popup,a=n.options,c=n._data(),d=c.length,u=n.element[0]===l();n._angularItems("cleanup"),n.trigger("dataBinding"),r.innerHTML=o.render(n.template,c),n._height(d),s.visible()&&s._position(),d&&(a.highlightFirst&&n.current(e(r.firstChild)),a.suggest&&u&&n.suggest(e(r.firstChild))),n._open&&(n._open=!1,i=d?"open":"close",n._typing&&!u&&(i="close"),s[i](),n._typing=t),n._touchScroller&&n._touchScroller.reset(),n._makeUnselectable(),n._hideBusy(),n._angularItems("compile"),n.trigger("dataBound")},select:function(e){this._select(e)},search:function(e){var t,i=this,r=i.options,o=r.ignoreCase,s=r.separator;e=e||i._accessor(),i._current=null,clearTimeout(i._typing),s&&(e=n(a(i.element)[0],e,s)),t=e.length,(!t||t>=r.minLength)&&(i._open=!0,i._filterSource({value:o?e.toLowerCase():e,operator:r.filter,field:r.dataTextField,ignoreCase:o}))},suggest:function(e){var n,r=this,o=r._last,s=r._accessor(),c=r.element[0],d=a(c)[0],p=r.options.separator,f=s.split(p),m=i(d,s,p),g=d;return o==h.BACKSPACE||o==h.DELETE?(r._last=t,t):(e=e||"","string"!=typeof e&&(n=u.inArray(e[0],r.ul[0]),e=n>-1?r._text(r._data()[n]):""),0>=d&&(d=s.toLowerCase().indexOf(e.toLowerCase())+1),n=s.substring(0,d).lastIndexOf(p),n=n>-1?d-(n+p.length):d,s=f[m].substring(0,n),e&&(n=e.toLowerCase().indexOf(s.toLowerCase()),n>-1&&(e=e.substring(n+s.length),g=d+e.length,s+=e),p&&""!==f[f.length-1]&&f.push("")),f[m]=s,r._accessor(f.join(p||"")),c===l()&&a(c,d,g),t)},value:function(e){return e===t?this._accessor():(this._accessor(e),this._old=this._accessor(),t)},_accessor:function(e){var i=this,n=i.element[0];return e===t?(e=n.value,n.className.indexOf("k-readonly")>-1&&e===i.options.placeholder?"":e):(n.value=null===e?"":e,i._placeholder(),t)},_accept:function(e){var t=this.element;this._focus(e),a(t,t.val().length)},_keydown:function(t){var i=this,n=i.ul[0],r=t.keyCode,o=i._current,s=i.popup.visible();i._last=r,r===h.DOWN?(s&&i._move(o?o.next():e(n.firstChild)),t.preventDefault()):r===h.UP?(s&&i._move(o?o.prev():e(n.lastChild)),t.preventDefault()):r===h.ENTER||r===h.TAB?(r===h.ENTER&&i.popup.visible()&&t.preventDefault(),i._accept(o)):r===h.ESC?(i.popup.visible()&&t.preventDefault(),i.close()):i._search()},_move:function(e){var t=this;e=e[0]?e:null,t.current(e),t.options.suggest&&t.suggest(e)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._loading.hide(),e.element.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.element.attr("aria-busy",!0),e._loading.show()},100))},_placeholder:function(e){if(!c){var i,n=this,r=n.element,o=n.options.placeholder;if(o){if(i=r.val(),e===t&&(e=!i),e||(o=i!==o?i:""),i===n._old&&!e)return;r.toggleClass("k-readonly",e).val(o),o||r[0]!==document.activeElement||a(r[0],0,0)}}},_search:function(){var e=this;clearTimeout(e._typing),e._typing=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(t){var i,n,o=this,s=o.options.separator,l=o._data();t=e(t),t[0]&&!t.hasClass(b)&&(n=u.inArray(t[0],o.ul[0]),n>-1&&(l=l[n],i=o._text(l),s&&(i=r(a(o.element)[0],o._accessor(),i,s)),o._accessor(i),o._prev=o._accessor(),o.current(t.addClass(b))))},_loader:function(){this._loading=e('<span class="k-icon k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(t){e(t.currentTarget).toggleClass(k,"mouseenter"===t.type)},_wrapper:function(){var e,t=this,i=t.element,n=i[0];e=i.parent(),e.is("span.k-widget")||(e=i.wrap("<span />").parent()),e.attr("tabindex",-1),e.attr("role","presentation"),e[0].style.cssText=n.style.cssText,i.css({width:"100%",height:n.style.height}),t._focused=t.element,t.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(n.className)}});d.plugin(T)}(window.kendo.jQuery),function(e,t){function i(e,t,i){for(var n,r=0,o=t.length-1;o>r;++r)n=t[r],n in e||(e[n]={}),e=e[n];e[t[o]]=i}var n=window.kendo,r=n.ui,o=r.Select,s=n.support.mobileOS,a=n._activeElement,l=n.keys,c=".kendoDropDownList",d="disabled",u="readonly",h="change",p="k-state-focused",f="k-state-default",m="k-state-disabled",g="aria-disabled",v="aria-readonly",y="k-state-selected",_="mouseenter"+c+" mouseleave"+c,b="tabindex",w="filter",k="accept",x=e.proxy,C=o.extend({init:function(i,r){var s,a,l,d=this,u=r&&r.index;d.ns=c,r=e.isArray(r)?{dataSource:r}:r,o.fn.init.call(d,i,r),r=d.options,i=d.element.on("focus"+c,x(d._focusHandler,d)),d._inputTemplate(),d._reset(),d._prev="",d._word="",d._wrapper(),d._tabindex(),d.wrapper.data(b,d.wrapper.attr(b)),d._span(),d._popup(),d._mobile(),d._dataSource(),d._ignoreCase(),d._filterHeader(),d._aria(),d._enable(),d._oldIndex=d.selectedIndex=-1,d._cascade(),u!==t&&(r.index=u),r.autoBind?d.dataSource.fetch():-1===d.selectedIndex&&(l=r.text||"",l||(s=r.optionLabel,a=s&&0===r.index,d._isSelect?l=a?s:i.children(":selected").text():!i[0].value&&a&&(l=s)),d._textAccessor(l)),n.notify(d)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,template:"",valueTemplate:"",delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1},events:["open","close",h,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria()},destroy:function(){var e=this;e.wrapper.off(c),e.element.off(c),e._inputWrapper.off(c),e._arrow.off(),e._arrow=null,o.fn.destroy.call(e)},open:function(){var e=this;e.popup.visible()||(e.ul[0].firstChild&&e._state!==k?(e.popup.open(),e._focusElement(e.filterInput),e._scroll(e._current)):(e._open=!0,e._state="rebind",e.filterInput&&e.filterInput.val(""),e._filterSource()))},toggle:function(e){this._toggle(e,!0)},refresh:function(){var t,i,r=this,o=r._data(),s=o.length,a=r.options.optionLabel,l=r._state===w,c=r.element[0];r.trigger("dataBinding"),r._current&&r.current(null),r._angularItems("cleanup"),r.ul[0].innerHTML=n.render(r.template,o),r._angularItems("compile"),r._height(l?s||1:s),r.popup.visible()&&r.popup._position(),r._isSelect&&(t=c.selectedIndex,i=r.value(),s?a&&(a=r._option("",r._optionLabelText(a))):i&&(t=0,a=r._option(i,r.text())),r._options(o,a),c.selectedIndex=-1===t?0:t),r._hideBusy(),r._makeUnselectable(),l?r.current(e(r.ul[0].firstChild)):(r._open&&r.toggle(!!s),r._open=!1,r._fetch||(s?r._selectItem():r._textAccessor()!==a&&(r.element.val(""),r._textAccessor("")))),r._bound=!!s,r.trigger("dataBound")},text:function(e){var i,n,r=this,o=r.options.ignoreCase;return e=null===e?"":e,e===t?r._textAccessor():("string"==typeof e&&(n=o?e.toLowerCase():e,i=r._select(function(e){return e=r._text(e),o&&(e=(e+"").toLowerCase()),e===n}),i&&(e=i)),r._textAccessor(e),t)},value:function(e){var i,n,r=this;return e===t?r._accessor():(null!==e&&(e=""+e),r._selectedValue=e,n=e||r.options.optionLabel&&!r.element[0].disabled&&""===e,n&&r._fetchItems(e)||(i=r._index(e),r.select(i>-1?i:0)),t)},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(p),this._prevent=!1},_focusoutHandler:function(){var e=this,t=e._state===w,i=window.self!==window.top;e._prevent||(t&&e._select(e._current),(!t||e.dataItem())&&e._triggerCascade(),n.support.mobileOS.ios&&i?e._change():e._blur(),e._inputWrapper.removeClass(p),e._prevent=!0,e._open=!1,e.element.blur())},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this._focused=this.wrapper,this._toggle()},_editable:function(e){var t=this,i=t.element,n=e.disable,r=e.readonly,o=t.wrapper.add(t.filterInput).off(c),s=t._inputWrapper.off(_);r||n?n?(o.removeAttr(b),s.addClass(m).removeClass(f)):(s.addClass(f).removeClass(m),o.on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t))):(i.removeAttr(d).removeAttr(u),s.addClass(f).removeClass(m).on(_,t._toggleHover),o.attr(b,o.data(b)).attr(g,!1).attr(v,!1).on("keydown"+c,x(t._keydown,t)).on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t)).on("mousedown"+c,x(t._wrapperMousedown,t)),t.wrapper.on("click"+c,x(t._wrapperClick,t)),t.filterInput||o.on("keypress"+c,x(t._keypress,t))),i.attr(d,n).attr(u,r),o.attr(g,n).attr(v,r)},_accept:function(e,t){var i=this,n=i.filterInput&&i.filterInput[0]===a();i._focus(e),i._focusElement(i.wrapper),n&&t===l.TAB&&i.wrapper.focusout()},_option:function(e,t){return'<option value="'+e+'">'+t+"</option>"},_optionLabelText:function(){var e=this.options,t=e.dataTextField,i=e.optionLabel;return i&&t&&"object"==typeof i?this._text(i):i},_data:function(){var e=this,t=e.options,r=t.optionLabel,o=t.dataTextField,s=t.dataValueField,a=e.dataSource.view(),l=a.length,c=r,d=0;if(r&&l){for("object"==typeof r?c=r:o&&(c={},o=o.split("."),s=s.split("."),i(c,s,""),i(c,o,r)),c=new n.data.ObservableArray([c]);l>d;d++)c.push(a[d]);a=c}return a},_selectItem:function(){o.fn._selectItem.call(this),this.current()||this.select(0)},_keydown:function(e){var t,i=this,n=e.keyCode,r=e.altKey,o=i.ul[0];n===l.LEFT?n=l.UP:n===l.RIGHT&&(n=l.DOWN),e.keyCode=n,t=i._move(e),i.popup.visible()&&i.filterInput||(n===l.HOME?(t=!0,e.preventDefault(),i._select(o.firstChild)):n===l.END&&(t=!0,e.preventDefault(),i._select(o.lastChild))),r&&n===l.UP&&i._focusElement(i.wrapper),r||t||!i.filterInput||i._search()},_selectNext:function(e,i){for(var n,r=this,o=i,s=r._data(),a=s.length,l=r.options.ignoreCase,c=function(i,n){return i+="",l&&(i=i.toLowerCase()),0===i.indexOf(e)?(r._select(n),r._triggerEvents(),!0):t};a>i;i++)if(n=r._text(s[i]),n&&c(n,i))return!0;if(o>0&&a>o)for(i=0;o>=i;i++)if(n=r._text(s[i]),n&&c(n,i))return!0;return!1},_keypress:function(e){var t,i,r,o=this;0!==e.which&&e.keyCode!==n.keys.ENTER&&(t=String.fromCharCode(e.charCode||e.keyCode),i=o.selectedIndex,r=o._word,o.options.ignoreCase&&(t=t.toLowerCase())," "===t&&e.preventDefault(),o._last===t&&1>=r.length&&i>-1&&(r||(r=t),o._selectNext(r,i+1))||(o._word=r+t,o._last=t,o._search()))},_popupOpen:function(){var e=this.popup;e.wrapper=n.wrap(e.element),e.element.closest(".km-root")[0]&&(e.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){o.fn._popup.call(this),this.popup.one("open",x(this._popupOpen,this))},_focusElement:function(e){var t=a(),i=this.wrapper,n=this.filterInput,r=e===n?i:n;n&&r[0]===t&&(this._prevent=!0,this._focused=e.focus())},_filter:function(e){var i,n;e&&(i=this,n=i.options.ignoreCase,n&&(e=e.toLowerCase()),i._select(function(r){var o=i._text(r);return o!==t?(o+="",n&&(o=o.toLowerCase()),0===o.indexOf(e)):t}))},_search:function(){var e=this,i=e.dataSource,n=e.selectedIndex,r=e._word;if(clearTimeout(e._typing),"none"!==e.options.filter)e._typing=setTimeout(function(){var t=e.filterInput.val();e._prev!==t&&(e._prev=t,e.search(t)),e._typing=null},e.options.delay);else{if(e._typing=setTimeout(function(){e._word=""},e.options.delay),-1===n&&(n=0),!e.ul[0].firstChild)return i.one(h,function(){i.data()[0]&&n>-1&&e._selectNext(r,n)}).fetch(),t;e._selectNext(r,n),e._triggerEvents()}},_select:function(e){var i,n,o=this,s=o._current,a=null;return e=o._get(e),e&&e[0]&&!e.hasClass(y)&&(o._state===w&&(o._state=k),s&&s.removeClass(y),n=r.List.inArray(e[0],o.ul[0]),n>-1&&(o.selectedIndex=n,a=o._data()[n],i=o._value(a),null===i&&(i=""),o._textAccessor(a),o._accessor(i!==t?i:o._text(a),n),o._selectedValue=o._accessor(),
o.current(e.addClass(y)),o._optionID&&o._current.attr("aria-selected",!0))),a},_triggerEvents:function(){this.popup.visible()||(this._triggerCascade(),this._change())},_mobile:function(){var e=this,t=e.popup,i=t.element.parents(".km-root").eq(0);i.length&&s&&(t.options.animation.open.effects=s.android||s.meego?"fadeIn":s.ios||s.wp?"slideIn:up":t.options.animation.open.effects)},_filterHeader:function(){var t,i=this.options,n="none"!==i.filter;this.filterInput&&(this.filterInput.off(c).parent().remove(),this.filterInput=null),n&&(t='<span unselectable="on" class="k-icon k-i-search">select</span>',this.filterInput=e('<input class="k-textbox"/>').attr({role:"listbox","aria-haspopup":!0,"aria-expanded":!1}),this.list.prepend(e('<span class="k-list-filter" />').append(this.filterInput.add(t))))},_span:function(){var t,i=this,n=i.wrapper,r="span.k-input";t=n.find(r),t[0]||(n.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(i.element),t=n.find(r)),i.span=t,i._inputWrapper=e(n[0].firstChild),i._arrow=n.find(".k-icon")},_wrapper:function(){var e,t=this,i=t.element,n=i[0];e=i.parent(),e.is("span.k-widget")||(e=i.wrap("<span />").parent(),e[0].style.cssText=n.style.cssText),i.hide(),t._focused=t.wrapper=e.addClass("k-widget k-dropdown k-header").addClass(n.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(){var e=this,i=e.options.optionLabel;return e.options.value="",e._selectedValue="",e.dataSource.view()[0]&&(i||e._userTriggered)?(e.select(0),t):(e.selectedIndex=-1,e.element.val(""),e._textAccessor(e.options.optionLabel),t)},_inputTemplate:function(){var t=this,i=t.options.valueTemplate;i=i?n.template(i):e.proxy(n.template("#:this._text(data)#",{useWithBlock:!1}),t),t.valueTemplate=i},_textAccessor:function(r){var o,s=this.dataItem(),a=this.options,l=this.span;return r===t?l.text():(e.isPlainObject(r)||r instanceof n.data.ObservableObject?s=r:s&&this._text(s)===r||(a.dataTextField?(s={},i(s,a.dataTextField.split("."),r),i(s,a.dataValueField.split("."),this._accessor())):s=r),o=function(){return{elements:l.get(),data:[{dataItem:s}]}},this.angular("cleanup",o),l.html(this.valueTemplate(s)),this.angular("compile",o),t)}});r.plugin(C)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,r=n.List,o=n.Select,s=i.caret,a=i.support,l=a.placeholder,c=i._activeElement,d=i.keys,u=".kendoComboBox",h="click"+u,p="mousedown"+u,f="disabled",m="readonly",g="change",v="k-state-default",y="k-state-focused",_="k-state-disabled",b="aria-disabled",w="aria-readonly",k="k-state-selected",x="filter",C="accept",S="rebind",T="mouseenter"+u+" mouseleave"+u,D=null,M=e.proxy,A=o.extend({init:function(t,n){var r,s=this;s.ns=u,n=e.isArray(n)?{dataSource:n}:n,o.fn.init.call(s,t,n),n=s.options,t=s.element.on("focus"+u,M(s._focusHandler,s)),n.placeholder=n.placeholder||t.attr("placeholder"),s._reset(),s._wrapper(),s._input(),s._tabindex(s.input),s._popup(),s._dataSource(),s._ignoreCase(),s._enable(),s._oldIndex=s.selectedIndex=-1,s._cascade(),s._aria(),n.autoBind?s._filterSource():(r=n.text,!r&&s._isSelect&&(r=t.children(":selected").text()),r&&(s.input.val(r),s._prev=r)),r||s._placeholder(),i.notify(s)},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,template:"",filter:"none",placeholder:"",suggest:!1,cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{}},events:["open","close",g,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},current:function(e){var i=this,n=i._current;return e===t?n:(n&&n.removeClass(k),o.fn.current.call(i,e),t)},destroy:function(){var e=this;e.input.off(u),e.element.off(u),e._inputWrapper.off(u),o.fn.destroy.call(e)},_focusHandler:function(){this.input.focus()},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass(y),this._placeholder(!1)},_inputFocusout:function(){var e=this;e._inputWrapper.removeClass(y),clearTimeout(e._typing),e._typing=null,e.options.text!==e.input.val()&&e.text(e.text()),e._placeholder(),e._blur(),e.element.blur()},_editable:function(e){var t=this,i=e.disable,n=e.readonly,r=t._inputWrapper.off(u),o=t.element.add(t.input.off(u)),s=t._arrow.parent().off(h+" "+p);n||i?(r.addClass(i?_:v).removeClass(i?v:_),o.attr(f,i).attr(m,n).attr(b,i).attr(w,n)):(r.addClass(v).removeClass(_).on(T,t._toggleHover),o.removeAttr(f).removeAttr(m).attr(b,!1).attr(w,!1),s.on(h,M(t._arrowClick,t)).on(p,function(e){e.preventDefault()}),t.input.on("keydown"+u,M(t._keydown,t)).on("focus"+u,M(t._inputFocus,t)).on("focusout"+u,M(t._inputFocusout,t)))},open:function(){var e=this,t=e._state,i=e.dataSource.options.serverFiltering;e.popup.visible()||(!e.ul[0].firstChild&&t!==x||t===C&&!i?(e._open=!0,e._state=S,e._filterSource()):(e.popup.open(),e._scroll(e._current)))},refresh:function(){var n,r,o=this,s=o.ul[0],a=o.options,l=o._state,d=o._data(),u=d.length,h=!0;o._angularItems("cleanup"),o.trigger("dataBinding"),s.innerHTML=i.render(o.template,d),o._height(u),o.popup.visible()&&o.popup._position(),o._isSelect&&(n=o.element[0].children[0],l===S&&(o._state=""),r=o._option,o._option=t,o._options(d),r&&r[0].selected?o._custom(r.val(),h):o._bound||n||o._custom("",h)),u&&(a.highlightFirst&&o.current(e(s.firstChild)),a.suggest&&o.input.val()&&o._request!==t&&o.suggest(e(s.firstChild))),l===x||o._fetch||o._selectItem(),o._open&&(o._open=!1,o._typing&&o.input[0]!==c()?o.popup.close():o.toggle(!!u),o._typing=null),o._touchScroller&&o._touchScroller.reset(),o._makeUnselectable(),o._hideBusy(),o._bound=!0,o._angularItems("compile"),o.trigger("dataBound")},suggest:function(e){var i,n=this,o=n.input[0],a=n.text(),l=s(o)[0],u=n._last;return u==d.BACKSPACE||u==d.DELETE?(n._last=t,t):(e=e||"","string"!=typeof e&&(i=r.inArray(e[0],n.ul[0]),e=i>-1?n._text(n.dataSource.view()[i]):""),0>=l&&(l=a.toLowerCase().indexOf(e.toLowerCase())+1),e?(i=e.toLowerCase().indexOf(a.toLowerCase()),i>-1&&(a+=e.substring(i+a.length))):a=a.substring(0,l),a.length===l&&e||(o.value=a,o===c()&&s(o,l,a.length)),t)},text:function(e){var i,n,r,o,s,a;return e=null===e?"":e,i=this,n=i.input[0],r=i.options.ignoreCase,o=e,e===t?n.value:(s=i.dataItem(),s&&i._text(s)===e&&(a=i._value(s),null===a?a="":a+="",a===i._old)?(i._triggerCascade(),t):(r&&(o=o.toLowerCase()),i._select(function(e){return e=i._text(e),r&&(e=(e+"").toLowerCase()),e===o}),0>i.selectedIndex&&(i._custom(e),n.value=e),i._prev=n.value,i._triggerCascade(),t))},toggle:function(e){this._toggle(e,!0)},value:function(e){var i,n=this,r=n.options;return e===t?n._accessor():(null!==e&&(e=""+e),n._selectedValue=e,!n._open&&e&&n._fetchItems(e)||(i=n._index(e),i>-1?n.select(i):(n.current(D),n._custom(e),(r.value!==e||r.text!==n.input.val())&&(n.text(e),n._placeholder())),n._old=n._accessor(),n._oldIndex=n.selectedIndex),t)},_accept:function(e){var t=this;e?t._focus(e):(t.text(t.text()),t._change())},_custom:function(t,i){var n=this,r=n.element,o=n._option;n._state!==x||i||(n._state=C),n._isSelect?(o||(o=n._option=e("<option/>"),r.append(o)),o.text(t),o[0].selected=!0):r.val(t),n._selectedValue=t},_filter:function(e){var i=this,n=i.options,r=i.dataSource,o=n.ignoreCase,s=function(n){var r=i._text(n);return r!==t?(r+="",(""===r||""!==e)&&(o&&(r=r.toLowerCase()),0===r.indexOf(e))):t};return o&&(e=e.toLowerCase()),i.ul[0].firstChild?(-1!==i._highlight(s)&&(n.suggest&&i._current&&i.suggest(i._current),i.open()),i._hideBusy(),t):(r.one(g,function(){r.view()[0]&&i.search(e)}).fetch(),t)},_highlight:function(i){var n,o=this;return i===t||null===i?-1:(i=o._get(i),n=r.inArray(i[0],o.ul[0]),-1==n&&(o.options.highlightFirst&&!o.text()?(i=o.ul[0].firstChild,i&&(i=e(i))):i=D),o.current(i),n)},_input:function(){var t,i=this,n=i.element.removeClass("k-input")[0],r=n.accessKey,o=i.wrapper,s="input.k-input",a=n.name||"";a&&(a='name="'+a+'_input" '),t=o.find(s),t[0]||(o.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+a+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(i.element),t=o.find(s)),t[0].style.cssText=n.style.cssText,n.maxLength>-1&&(t[0].maxLength=n.maxLength),t.addClass(n.className).val(this.options.text||n.value).css({width:"100%",height:n.style.height}).attr({role:"combobox","aria-expanded":!1}).show(),l&&t.attr("placeholder",i.options.placeholder),r&&(n.accessKey="",t[0].accessKey=r),i._focused=i.input=t,i._inputWrapper=e(o[0].firstChild),i._arrow=o.find(".k-icon").attr({role:"button",tabIndex:-1}),n.id&&i._arrow.attr("aria-controls",i.ul[0].id)},_keydown:function(e){var t=this,i=e.keyCode;t._last=i,clearTimeout(t._typing),t._typing=null,i==d.TAB||t._move(e)||t._search()},_placeholder:function(e){if(!l){var i,n=this,r=n.input,o=n.options.placeholder;if(o){if(i=n.value(),e===t&&(e=!i),r.toggleClass("k-readonly",e),!e){if(i)return;o=""}r.val(o),o||r[0]!==c()||s(r[0],0,0)}}},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.text();e._prev!==t&&(e._prev=t,e.search(t)),e._typing=null},e.options.delay)},_select:function(e){var i,n,r=this,o=r._data(),s=r._highlight(e);r.selectedIndex=s,-1!==s&&(r._state===x&&(r._state=C),r._current.addClass(k),o=o[s],i=r._text(o),n=r._value(o),null===n&&(n=""),r._prev=r.input[0].value=i,r._accessor(n!==t?n:i,s),r._selectedValue=r._accessor(),r._placeholder(),r._optionID&&r._current.attr("aria-selected",!0))},_wrapper:function(){var e=this,t=e.element,i=t.parent();i.is("span.k-widget")||(i=t.hide().wrap("<span />").parent(),i[0].style.cssText=t[0].style.cssText),e.wrapper=i.addClass("k-widget k-combobox k-header").addClass(t[0].className).css("display","")},_clearSelection:function(e,t){var i=this,n=e._selectedValue||e.value(),r=n&&-1===e.selectedIndex;(t||!n||r)&&(i.value(""),i.options.value="")}});n.plugin(A)}(window.kendo.jQuery),function(e,t){function i(e,t){var i;if(null===e&&null!==t||null!==e&&null===t)return!1;if(i=e.length,i!==t.length)return!1;for(;i--;)if(e[i]!==t[i])return!1;return!0}function n(t){var i=t.firstChild;return i&&"none"===i.style.display&&(i=o(i,k)),i?e(i):i}function r(t){var i=t.lastChild;return i&&"none"===i.style.display&&(i=o(i,x)),i?e(i):i}function o(e,t){return e=e[t],e&&"none"===e.style.display&&(e=o(e,t)),e}var s=window.kendo,a=s.ui,l=a.List,c=s.keys,d=s._activeElement,u=s.data.ObservableArray,h=e.proxy,p="id",f="li",m="accept",g="filter",v="open",y="close",_="change",b="progress",w="select",k="nextSibling",x="previousSibling",C=' style="display:none"',S="aria-disabled",T="aria-readonly",D="k-state-focused",M="k-loading-hidden",A="k-state-hover",E="k-state-disabled",I="disabled",P="readonly",F=".kendoMultiSelect",z="click"+F,H="keydown"+F,R="mouseenter"+F,N="mouseleave"+F,$=R+" "+N,O=/"/g,L=e.isArray,B=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],U=l.extend({init:function(t,i){var n,r,o=this;o.ns=F,l.fn.init.call(o,t,i),o._wrapper(),o._tagList(),o._input(),o._textContainer(),o._loader(),o._tabindex(o.input),t=o.element.attr("multiple","multiple").hide(),i=o.options,r=i.value,i.placeholder||(i.placeholder=t.data("placeholder")),n=t.attr(p),n&&(o._tagID=n+"_tag_active",n+="_taglist",o.tagList.attr(p,n)),o._aria(n),o._dataSource(),o._ignoreCase(),o._popup(),o._values=[],o._dataItems=[],o._reset(),o._enable(),o._placeholder(),i.autoBind?o.dataSource.fetch():r&&(L(r)||(r=[r]),(e.isPlainObject(r[0])||!i.dataValueField)&&(o._retrieveData=!0,o.dataSource.data(r),o.value(o._initialValues))),s.notify(o)},options:{name:"MultiSelect",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,itemTemplate:"",tagTemplate:"",placeholder:"",height:200,animation:{}},events:[v,y,_,w,"filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){l.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria(this.tagList.attr(p))},current:function(e){return this.currentTag(null),l.fn.current.call(this,e)},currentTag:function(e){var i=this;return e===t?i._currentTag:(i._currentTag&&(i._currentTag.removeClass(D).removeAttr(p),i.input.removeAttr("aria-activedescendant")),e&&(e.addClass(D).attr(p,i._tagID),i.input.attr("aria-activedescendant",i._tagID)),i._currentTag=e,t)},dataItems:function(){return this._dataItems},destroy:function(){var e=this,t=e.ns;clearTimeout(e._busy),clearTimeout(e._typing),e.wrapper.off(t),e.tagList.off(t),e.input.off(t),l.fn.destroy.call(e)},_wrapperMousedown:function(e){var t=this,i="input"!==e.target.nodeName.toLowerCase();i&&e.preventDefault(),-1===e.target.className.indexOf("k-delete")&&(t.input[0]!==d()&&i&&t.input.focus(),0===t.options.minLength&&t.open())},_inputFocus:function(){this._placeholder(!1),this.wrapper.addClass(D)},_inputFocusout:function(){var e=this;clearTimeout(e._typing),e.wrapper.removeClass(D),e._placeholder(!e._dataItems[0],!0),e.close(),e._state===g&&(e._state=m),e.element.blur()},_tagListClick:function(t){this._unselect(e(t.target).closest(f)),this._change(),this.close()},_editable:function(t){var i=this,n=t.disable,r=t.readonly,o=i.wrapper.off(F),s=i.tagList.off(F),a=i.element.add(i.input.off(F));r||n?(n?o.addClass(E):o.removeClass(E),a.attr(I,n).attr(P,r).attr(S,n).attr(T,r)):(o.removeClass(E).on($,i._toggleHover).on("mousedown"+F,h(i._wrapperMousedown,i)),i.input.on(H,h(i._keydown,i)).on("paste"+F,h(i._search,i)).on("focus"+F,h(i._inputFocus,i)).on("focusout"+F,h(i._inputFocusout,i)),a.removeAttr(I).removeAttr(P).attr(S,!1).attr(T,!1),s.on(R,f,function(){e(this).addClass(A)}).on(N,f,function(){e(this).removeClass(A)}).on(z,".k-delete",h(i._tagListClick,i)))},_close:function(){var e=this;e.options.autoClose||!e._visibleItems?e.close():(e.current(e.options.highlightFirst?n(e.ul[0]):null),e.popup._position())},close:function(){this.popup.close(),this.current(null)},open:function(){var e=this;e._request&&(e._retrieveData=!1),!e.ul[0].firstChild||e._state===m||e._retrieveData?(e._state="",e._open=!0,e._retrieveData=!1,e._filterSource()):e._visibleItems&&e._allowSelection()&&(e.popup.open(),e.current(e.options.highlightFirst?n(e.ul[0]):null))},toggle:function(e){e=e!==t?e:!this.popup.visible(),this[e?v:y]()},refresh:function(){var e,t=this,i=null;t.trigger("dataBinding"),e=t._render(t.dataSource.view()),t._height(e),t._setInitialValues&&(t._setInitialValues=!1,t.value(t._initialValues)),t._open&&(t._open=!1,t.toggle(e)),t.popup.visible()&&(t.popup._position(),t.options.highlightFirst&&(i=n(t.ul[0]))),t.current(i),t._touchScroller&&t._touchScroller.reset(),t._makeUnselectable(),t._hideBusy(),t.trigger("dataBound")},search:function(e){var t,i,n=this,r=n.options,o=r.ignoreCase,s=r.filter,a=r.dataTextField,l=n.input.val();r.placeholder===l&&(l=""),clearTimeout(n._typing),e="string"==typeof e?e:l,i=e.length,(!i||i>=r.minLength)&&(n._state=g,n._open=!0,t={value:o?e.toLowerCase():e,field:a,operator:s,ignoreCase:o},n._filterSource(t,n._retrieveData),n._retrieveData=!1)},value:function(i){var n,r=this,o=e(r.tagList[0].children),s=o.length,a=0;if(i===t)return r._values;if(!r._fetchItems(i)){for(;s>a;a++)r._unselect(o.eq(a));if(null!==i){for(i=L(i)||i instanceof u?i:[i],a=0,s=i.length;s>a;a++)n=r._index(i[a]),n>-1&&r._select(n);r._old=r._values.slice()}}},_dataSource:function(){var e=this,t=e.element,i=e.options,n=i.dataSource||{};n=L(n)?{data:n}:n,n.select=t,n.fields=[{field:i.dataTextField},{field:i.dataValueField}],e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=h(e.refresh,e),e._progressHandler=h(e._showBusy,e)),e.dataSource=s.data.DataSource.create(n).bind(_,e._refreshHandler).bind(b,e._progressHandler)},_fetchItems:function(i){var n=this,r=e.isArray(i)&&0===i.length;if(!r&&i)return n._fetch||n.ul[0].firstChild?t:(n.dataSource.one(_,function(){n.value(i),n._fetch=!1}),n._fetch=!0,n.dataSource.fetch(),!0)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initialValues),t._placeholder()})},t._form=r.on("reset",t._resetHandler))},_initValue:function(){var e=this,i=e.options.value||e.element.val();null===i?i=[]:(L(i)||(i=[i]),i=e._mapValues(i)),e._old=e._initialValues=i,e._setInitialValues=i[0]!==t},_mapValues:function(t){var i=this;return t&&e.isPlainObject(t[0])&&(t=e.map(t,function(e){return i._value(e)})),t},_change:function(){var e=this,t=e.value();i(t,e._old)||(e._old=t.slice(),e.trigger(_),e.element.trigger(_))},_click:function(i){var n=this,r=e(i.currentTarget);if(!i.isDefaultPrevented()){if(n.trigger(w,{item:r}))return n._close(),t;n._select(r),n._change(),n._close()}},_item:function(e,t){return e=e[t](),e[0]&&!e.is(":visible")&&(e=this._item(e,t)),e},_keydown:function(i){var a=this,l=i.keyCode,d=a._currentTag,u=a._current,h=a.input.val(),p=s.support.isRtl(a.wrapper),f=a.popup.visible();if(l===c.DOWN){if(i.preventDefault(),!f)return a.open(),t;u=u?o(u[0],k):n(a.ul[0]),u&&a.current(e(u))}else if(l===c.UP)f&&(u=u?o(u[0],x):r(a.ul[0]),a.current(e(u)),a._current[0]||a.close()),i.preventDefault();else if(l===c.LEFT&&!p||l===c.RIGHT&&p)h||(d=d?d.prev():e(a.tagList[0].lastChild),d[0]&&a.currentTag(d));else if(l===c.RIGHT&&!p||l===c.LEFT&&p)!h&&d&&(d=d.next(),a.currentTag(d[0]?d:null));else if(l===c.ENTER&&f){if(u){if(a.trigger(w,{item:u}))return a._close(),t;a._select(u)}a._change(),a._close(),i.preventDefault()}else l===c.ESC?(f?i.preventDefault():a.currentTag(null),a.close()):l===c.HOME?f?a.current(n(a.ul[0])):h||(d=a.tagList[0].firstChild,d&&a.currentTag(e(d))):l===c.END?f?a.current(r(a.ul[0])):h||(d=a.tagList[0].lastChild,d&&a.currentTag(e(d))):l!==c.DELETE&&l!==c.BACKSPACE||h?(clearTimeout(a._typing),setTimeout(function(){a._scale()}),a._search()):(l!==c.BACKSPACE||d||(d=e(a.tagList[0].lastChild)),d&&d[0]&&(a._unselect(d),a._change(),a._close()))},_hideBusy:function(){var e=this;clearTimeout(e._busy),e.input.attr("aria-busy",!1),e._loading.addClass(M),e._request=!1,e._busy=null},_showBusyHandler:function(){this.input.attr("aria-busy",!0),this._loading.removeClass(M)},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(h(e._showBusyHandler,e),100))},_placeholder:function(e,i){var n=this,r=n.input,o=d();e===t&&(e=!1,r[0]!==o&&(e=!n._dataItems[0])),n._prev="",r.toggleClass("k-readonly",e).val(e?n.options.placeholder:""),r[0]!==o||i||s.caret(r[0],0,0),n._scale()},_scale:function(){var e,t=this,i=t.wrapper,n=i.width(),r=t._span.text(t.input.val());i.is(":visible")?e=r.width()+25:(r.appendTo(document.documentElement),n=e=r.width()+25,r.appendTo(i)),t.input.width(e>n?n:e)},_option:function(e,i){var n="<option",r=this._text(e),o=this._value(e);return o!==t&&(o+="",-1!==o.indexOf('"')&&(o=o.replace(O,"&quot;")),n+=' value="'+o+'"'),i&&(n+=' selected="selected"'),n+=">",r!==t&&(n+=s.htmlEncode(r)),n+="</option>"},_render:function(e){for(var t,i,n=this,r=e.length,o=n.itemTemplate,s=n._dataItems.slice(0),a=0,l=0,c="",d="";r>l;l++)t=e[l],i=n._selected(s,t),d+=o(t,l,i),c+=n._option(t,i),i||(a+=1);if(r=s.length)for(l=0;r>l;l++)c+=n._option(s[l],!0);return n.ul[0].innerHTML=d,n.element.html(c),n._visibleItems=a,a},_selected:function(e,i){var n,r=this,o=r._text,s=r._value,a=s(i),l=e.length,c=!1,d=0;for(a===t&&(a=o(i));l>d;d++)if(i=e[d],n=s(i),n===t&&(n=o(i)),n!==t&&n===a){c=!0;break}return c&&e.splice(d,1),c},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.input.val();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this._values.length},_select:function(e){var t,i,n=this,r=n._values;n._allowSelection()&&(isNaN(e)?i=e.hide().data("idx"):(i=e,n.ul[0].children[i].style.display="none"),n.element[0].children[i].selected=!0,t=n.dataSource.view()[i],n.tagList.append(n.tagTemplate(t)),n._dataItems.push(t),r.push(n._dataValue(t)),n._visibleItems-=1,n.currentTag(null),n._placeholder(),n._height(n._visibleItems),n._state===g&&(n._state=m))},_unselect:function(t){var i,n,r,o,s,a=this,l=t.index();if(t.remove(),a.currentTag(null),a._values.splice(l,1),i=a._dataItems.splice(l,1)[0],n=a._dataValue(i),l=a._index(n),-1!==l)e(a.ul[0].children[l]).show(),a.element[0].children[l].selected=!1,a._visibleItems+=1,a._height(a._visibleItems);else for(l=a.dataSource.view().length,r=a.element[0].children,s=r.length;s>l;l++)if(o=r[l],o.value==n){o.selected=!1;break}a._placeholder()},_template:function(){var e,t=this,i=t.options,n=i.itemTemplate,r=i.tagTemplate,o=i.dataSource;t.element[0].length&&!o&&(i.dataTextField=i.dataTextField||"text",i.dataValueField=i.dataValueField||"value"),e=s.template("#:"+s.expr(i.dataTextField,"data")+"#",{useWithBlock:!1}),n=n?s.template(n):e,r=r?s.template(r):e,t.itemTemplate=function(e,t,i){return'<li tabindex="-1" role="option" data-idx="'+t+'" unselectable="on" class="k-item"'+(i?C:"")+">"+n(e)+"</li>"},t.tagTemplate=function(e){return'<li class="k-button" unselectable="on"><span unselectable="on">'+r(e)+'</span><span unselectable="on" class="k-icon k-delete">delete</span></li>'}},_input:function(){var t=this,i=t.element[0].accessKey,n=t._innerWrapper.children("input.k-input");n[0]||(n=e('<input class="k-input" style="width: 25px" />').appendTo(t._innerWrapper)),t.element.removeAttr("accesskey"),t._focused=t.input=n.attr({accesskey:i,autocomplete:"off",role:"listbox","aria-expanded":!1})},_tagList:function(){var t=this,i=t._innerWrapper.children("ul");i[0]||(i=e('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(t._innerWrapper)),t.tagList=i},_loader:function(){this._loading=e('<span class="k-icon k-loading '+M+'"></span>').insertAfter(this.input)},_textContainer:function(){var t=s.getComputedStyles(this.input[0],B);t.position="absolute",t.visibility="hidden",t.top=-3333,t.left=-3333,this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var t=this,i=t.element,n=i.parent("span.k-multiselect");n[0]||(n=i.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent(),n[0].style.cssText=i[0].style.cssText,e('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(i)),t.wrapper=n.addClass(i[0].className).css("display",""),t._innerWrapper=e(n[0].firstChild)}});a.plugin(U)}(window.kendo.jQuery),function(e,t){function i(e,t,i){var n=i?" k-slider-horizontal":" k-slider-vertical",r=e.style?e.style:t.attr("style"),o=t.attr("class")?" "+t.attr("class"):"",s="";return"bottomRight"==e.tickPlacement?s=" k-slider-bottomright":"topLeft"==e.tickPlacement&&(s=" k-slider-topleft"),r=r?" style='"+r+"'":"","<div class='k-widget k-slider"+n+o+"'"+r+"><div class='k-slider-wrap"+(e.showButtons?" k-slider-buttons":"")+s+"'></div></div>"}function n(e,t,i){var n="";return n="increase"==t?i?"k-i-arrow-e":"k-i-arrow-n":i?"k-i-arrow-w":"k-i-arrow-s","<a class='k-button k-button-"+t+"'><span class='k-icon "+n+"' title='"+e[t+"ButtonTitle"]+"'>"+e[t+"ButtonTitle"]+"</span></a>"}function r(e,t){var i,n="<ul class='k-reset k-slider-items'>",r=k.floor(c(t/e.smallStep))+1;for(i=0;r>i;i++)n+="<li class='k-tick' role='presentation'>&nbsp;</li>";return n+="</ul>"}function o(e,t){var i=t.is("input")?1:2,n=2==i?e.leftDragHandleTitle:e.dragHandleTitle;return"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div><a href='#' class='k-draghandle' title='"+n+"' role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(i>1?e.selectionStart||e.min:e.value||e.min)+"'>Drag</a>"+(i>1?"<a href='#' class='k-draghandle' title='"+e.rightDragHandleTitle+"'role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(e.selectionEnd||e.max)+"'>Drag</a>":"")+"</div>"}function s(e){return function(t){return t+e}}function a(e){return function(){return e}}function l(e){return(e+"").replace(".",f.cultures.current.numberFormat["."])}function c(e){e=parseFloat(e,10);var t=k.pow(10,q||0);return k.round(e*t)/t}function d(e,i){var n=_(e.getAttribute(i));return null===n&&(n=t),n}function u(e){return typeof e!==Y}function h(e){return 1e4*e}var p,f=window.kendo,m=f.ui.Widget,g=f.ui.Draggable,v=e.extend,y=f.format,_=f.parseFloat,b=e.proxy,w=e.isArray,k=Math,x=f.support,C=x.pointers,S=x.msPointers,T="change",D="slide",M=".slider",A="touchstart"+M+" mousedown"+M,E=C?"pointerdown"+M:S?"MSPointerDown"+M:A,I="touchend"+M+" mouseup"+M,P=C?"pointerup":S?"MSPointerUp"+M:I,F="moveSelection",z="keydown"+M,H="click"+M,R="mouseover"+M,N="focus"+M,$="blur"+M,O=".k-draghandle",L=".k-slider-track",B=".k-tick",U="k-state-selected",V="k-state-focused",W="k-state-default",j="k-state-disabled",q=3,G="disabled",Y="undefined",Q="tabindex",K=f.getTouches,X=m.extend({init:function(e,t){var i,n=this;m.fn.init.call(n,e,t),t=n.options,n._distance=c(t.max-t.min),n._isHorizontal="horizontal"==t.orientation,n._isRtl=n._isHorizontal&&f.support.isRtl(e),n._position=n._isHorizontal?"left":"bottom",n._sizeFn=n._isHorizontal?"width":"height",n._outerSize=n._isHorizontal?"outerWidth":"outerHeight",t.tooltip.format=t.tooltip.enabled?t.tooltip.format||"{0}":"{0}",n._createHtml(),n.wrapper=n.element.closest(".k-slider"),n._trackDiv=n.wrapper.find(L),n._setTrackDivWidth(),n._maxSelection=n._trackDiv[n._sizeFn](),n._sliderItemsInit(),n._tabindex(n.wrapper.find(O)),n[t.enabled?"enable":"disable"](),i=f.support.isRtl(n.wrapper)?-1:1,n._keyMap={37:s(-1*i*t.smallStep),40:s(-t.smallStep),39:s(1*i*t.smallStep),38:s(+t.smallStep),35:a(t.max),36:a(t.min),33:s(+t.largeStep),34:s(-t.largeStep)},f.notify(n)},events:[T,D],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_resize:function(){this._setTrackDivWidth(),this.wrapper.find(".k-slider-items").remove(),this._maxSelection=this._trackDiv[this._sizeFn](),this._sliderItemsInit(),this._refresh()},_sliderItemsInit:function(){var e=this,t=e.options,i=e._maxSelection/((t.max-t.min)/t.smallStep),n=e._calculateItemsWidth(k.floor(e._distance/t.smallStep));"none"!=t.tickPlacement&&i>=2&&(e._trackDiv.before(r(t,e._distance)),e._setItemsWidth(n),e._setItemsTitle()),e._calculateSteps(n),"none"!=t.tickPlacement&&i>=2&&t.largeStep>=t.smallStep&&e._setItemsLargeTick()},getSize:function(){return f.dimensions(this.wrapper)},_setTrackDivWidth:function(){var e=this,t=2*parseFloat(e._trackDiv.css(e._isRtl?"right":e._position),10);e._trackDiv[e._sizeFn](e.wrapper[e._sizeFn]()-2-t)},_setItemsWidth:function(t){var i,n=this,r=n.options,o=0,s=t.length-1,a=n.wrapper.find(B),l=0,c=2,d=a.length,u=0;for(i=0;d-2>i;i++)e(a[i+1])[n._sizeFn](t[i]);if(n._isHorizontal?(e(a[o]).addClass("k-first")[n._sizeFn](t[s-1]),e(a[s]).addClass("k-last")[n._sizeFn](t[s])):(e(a[s]).addClass("k-first")[n._sizeFn](t[s]),e(a[o]).addClass("k-last")[n._sizeFn](t[s-1])),n._distance%r.smallStep!==0&&!n._isHorizontal){for(i=0;t.length>i;i++)u+=t[i];l=n._maxSelection-u,l+=parseFloat(n._trackDiv.css(n._position),10)+c,n.wrapper.find(".k-slider-items").css("padding-top",l)}},_setItemsTitle:function(){for(var t=this,i=t.options,n=t.wrapper.find(B),r=i.min,o=n.length,s=t._isHorizontal&&!t._isRtl?0:o-1,a=t._isHorizontal&&!t._isRtl?o:-1,l=t._isHorizontal&&!t._isRtl?1:-1;s-a!==0;s+=l)e(n[s]).attr("title",y(i.tooltip.format,c(r))),r+=i.smallStep},_setItemsLargeTick:function(){var t,i,n,r=this,o=r.options,s=r.wrapper.find(B),a=0;if(h(o.largeStep)%h(o.smallStep)===0||r._distance/o.largeStep>=3)for(r._isHorizontal||r._isRtl||(s=e.makeArray(s).reverse()),a=0;s.length>a;a++)t=e(s[a]),i=r._values[a],n=h(i-this.options.min),n%h(o.smallStep)===0&&n%h(o.largeStep)===0&&(t.addClass("k-tick-large").html("<span class='k-label'>"+t.attr("title")+"</span>"),0!==a&&a!==s.length-1&&t.css("line-height",t[r._sizeFn]()+"px"))},_calculateItemsWidth:function(e){var t,i,n,r=this,o=r.options,s=parseFloat(r._trackDiv.css(r._sizeFn))+1,a=s/r._distance;for(r._distance/o.smallStep-k.floor(r._distance/o.smallStep)>0&&(s-=r._distance%o.smallStep*a),t=s/e,i=[],n=0;e-1>n;n++)i[n]=t;return i[e-1]=i[e]=t/2,r._roundWidths(i)},_roundWidths:function(e){var t,i=0,n=e.length;for(t=0;n>t;t++)i+=e[t]-k.floor(e[t]),e[t]=k.floor(e[t]);return i=k.round(i),this._addAdditionalSize(i,e)},_addAdditionalSize:function(e,t){if(0===e)return t;var i,n=parseFloat(t.length-1)/parseFloat(1==e?e:e-1);for(i=0;e>i;i++)t[parseInt(k.round(n*i),10)]+=1;return t},_calculateSteps:function(e){var t,i=this,n=i.options,r=n.min,o=0,s=k.ceil(i._distance/n.smallStep),a=1;if(s+=i._distance/n.smallStep%1===0?1:0,e.splice(0,0,2*e[s-2]),e.splice(s-1,1,2*e.pop()),i._pixelSteps=[o],i._values=[r],0!==s){for(;s>a;)o+=(e[a-1]+e[a])/2,i._pixelSteps[a]=o,r+=n.smallStep,i._values[a]=c(r),a++;t=i._distance%n.smallStep===0?s-1:s,i._pixelSteps[t]=i._maxSelection,i._values[t]=n.max,i._isRtl&&(i._pixelSteps.reverse(),i._values.reverse())}},_getValueFromPosition:function(e,t){var i,n=this,r=n.options,o=k.max(r.smallStep*(n._maxSelection/n._distance),0),s=0,a=o/2;if(n._isHorizontal?(s=e-t.startPoint,n._isRtl&&(s=n._maxSelection-s)):s=t.startPoint-e,n._maxSelection-(parseInt(n._maxSelection%o,10)-3)/2<s)return r.max;for(i=0;n._pixelSteps.length>i;i++)if(k.abs(n._pixelSteps[i]-s)-1<=a)return c(n._values[i])},_getFormattedValue:function(e,t){var i,n,r,o=this,s="",a=o.options.tooltip;return w(e)?(n=e[0],r=e[1]):t&&t.type&&(n=t.selectionStart,r=t.selectionEnd),t&&(i=t.tooltipTemplate),!i&&a.template&&(i=f.template(a.template)),w(e)||t&&t.type?i?s=i({selectionStart:n,selectionEnd:r}):(n=y(a.format,n),r=y(a.format,r),s=n+" - "+r):(t&&(t.val=e),s=i?i({value:e}):y(a.format,e)),s},_getDraggableArea:function(){var e=this,t=f.getOffset(e._trackDiv);return{startPoint:e._isHorizontal?t.left:t.top+e._maxSelection,endPoint:e._isHorizontal?t.left+e._maxSelection:t.top}},_createHtml:function(){var e=this,t=e.element,r=e.options,s=t.find("input");2==s.length?(s.eq(0).prop("value",l(r.selectionStart)),s.eq(1).prop("value",l(r.selectionEnd))):t.prop("value",l(r.value)),t.wrap(i(r,t,e._isHorizontal)).hide(),r.showButtons&&t.before(n(r,"increase",e._isHorizontal)).before(n(r,"decrease",e._isHorizontal)),t.before(o(r,t))},_focus:function(t){var i=this,n=t.target,r=i.value(),o=i._drag;o||(n==i.wrapper.find(O).eq(0)[0]?(o=i._firstHandleDrag,i._activeHandle=0):(o=i._lastHandleDrag,i._activeHandle=1),r=r[i._activeHandle]),e(n).addClass(V+" "+U),o&&(i._activeHandleDrag=o,o.selectionStart=i.options.selectionStart,o.selectionEnd=i.options.selectionEnd,o._updateTooltip(r))},_focusWithMouse:function(t){t=e(t);var i=this,n=t.is(O)?t.index():0;window.setTimeout(function(){i.wrapper.find(O)[2==n?1:0].focus()},1),i._setTooltipTimeout()},_blur:function(t){var i=this,n=i._activeHandleDrag;e(t.target).removeClass(V+" "+U),n&&(n._removeTooltip(),delete i._activeHandleDrag,delete i._activeHandle)},_setTooltipTimeout:function(){var e=this;e._tooltipTimeout=window.setTimeout(function(){var t=e._drag||e._activeHandleDrag;t&&t._removeTooltip()},300)},_clearTooltipTimeout:function(){var e,t=this;window.clearTimeout(this._tooltipTimeout),e=t._drag||t._activeHandleDrag,e&&e.tooltipDiv&&e.tooltipDiv.stop(!0,!1).css("opacity",1)}}),Z=X.extend({init:function(i,n){var r,o=this;i.type="text",n=v({},{value:d(i,"value"),min:d(i,"min"),max:d(i,"max"),smallStep:d(i,"step")},n),i=e(i),n&&n.enabled===t&&(n.enabled=!i.is("[disabled]")),X.fn.init.call(o,i,n),n=o.options,u(n.value)&&null!==n.value||(n.value=n.min,i.prop("value",l(n.min))),n.value=k.max(k.min(n.value,n.max),n.min),
r=o.wrapper.find(O),new Z.Selection(r,o,n),o._drag=new Z.Drag(r,"",o,n)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},value:null},enable:function(i){var n,r,o,s=this,a=s.options;s.disable(),i!==!1&&(s.wrapper.removeClass(j).addClass(W),s.wrapper.find("input").removeAttr(G),n=function(i){var n,r,o,a=K(i)[0];if(a){if(n=s._isHorizontal?a.location.pageX:a.location.pageY,r=s._getDraggableArea(),o=e(i.target),o.hasClass("k-draghandle"))return o.addClass(V+" "+U),t;s._update(s._getValueFromPosition(n,r)),s._focusWithMouse(i.target),s._drag.dragstart(i),i.preventDefault()}},s.wrapper.find(B+", "+L).on(E,n).end().on(E,function(){e(document.documentElement).one("selectstart",f.preventDefault)}).on(P,function(){s._drag._end()}),s.wrapper.find(O).attr(Q,0).on(I,function(){s._setTooltipTimeout()}).on(H,function(e){s._focusWithMouse(e.target),e.preventDefault()}).on(N,b(s._focus,s)).on($,b(s._blur,s)),r=b(function(e){var t=s._nextValueByIndex(s._valueIndex+1*e);s._setValueInRange(t),s._drag._updateTooltip(t)},s),a.showButtons&&(o=b(function(e,t){this._clearTooltipTimeout(),(1===e.which||x.touch&&0===e.which)&&(r(t),this.timeout=setTimeout(b(function(){this.timer=setInterval(function(){r(t)},60)},this),200))},s),s.wrapper.find(".k-button").on(I,b(function(e){this._clearTimer(),s._focusWithMouse(e.target)},s)).on(R,function(t){e(t.currentTarget).addClass("k-state-hover")}).on("mouseout"+M,b(function(t){e(t.currentTarget).removeClass("k-state-hover"),this._clearTimer()},s)).eq(0).on(A,b(function(e){o(e,1)},s)).click(!1).end().eq(1).on(A,b(function(e){o(e,-1)},s)).click(f.preventDefault)),s.wrapper.find(O).off(z,!1).on(z,b(this._keydown,s)),a.enabled=!0)},disable:function(){var t=this;t.wrapper.removeClass(W).addClass(j),e(t.element).prop(G,G),t.wrapper.find(".k-button").off(A).on(A,f.preventDefault).off(I).on(I,f.preventDefault).off("mouseleave"+M).on("mouseleave"+M,f.preventDefault).off(R).on(R,f.preventDefault),t.wrapper.find(B+", "+L).off(E).off(P),t.wrapper.find(O).attr(Q,-1).off(I).off(z).off(H).off(N).off($),t.options.enabled=!1},_update:function(e){var t=this,i=t.value()!=e;t.value(e),i&&t.trigger(T,{value:t.options.value})},value:function(e){var i=this,n=i.options;return e=c(e),isNaN(e)?n.value:(e>=n.min&&n.max>=e&&n.value!=e&&(i.element.prop("value",l(e)),n.value=e,i._refreshAriaAttr(e),i._refresh()),t)},_refresh:function(){this.trigger(F,{value:this.options.value})},_refreshAriaAttr:function(e){var t,i=this,n=i._drag;t=n&&n._tooltipDiv?n._tooltipDiv.text():i._getFormattedValue(e,null),this.wrapper.find(O).attr("aria-valuenow",e).attr("aria-valuetext",t)},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(e){var t=this;e.keyCode in t._keyMap&&(t._clearTooltipTimeout(),t._setValueInRange(t._keyMap[e.keyCode](t.options.value)),t._drag._updateTooltip(t.value()),e.preventDefault())},_setValueInRange:function(e){var i=this,n=i.options;return e=c(e),isNaN(e)?(i._update(n.min),t):(e=k.max(k.min(e,n.max),n.min),i._update(e),t)},_nextValueByIndex:function(e){var t=this._values.length;return this._isRtl&&(e=t-1-e),this._values[k.max(0,k.min(e,t-1))]},destroy:function(){var e=this;m.fn.destroy.call(e),e.wrapper.off(M).find(".k-button").off(M).end().find(O).off(M).end().find(B+", "+L).off(M).end(),e._drag.draggable.destroy(),e._drag._removeTooltip(!0)}});Z.Selection=function(e,t,i){function n(n){var r=n-i.min,o=t._valueIndex=k.ceil(c(r/i.smallStep)),s=parseInt(t._pixelSteps[o],10),a=t._trackDiv.find(".k-slider-selection"),l=parseInt(e[t._outerSize]()/2,10),d=t._isRtl?2:0;a[t._sizeFn](t._isRtl?t._maxSelection-s:s),e.css(t._position,s-l-d)}n(i.value),t.bind([T,D,F],function(e){n(parseFloat(e.value,10))})},Z.Drag=function(e,t,i,n){var r=this;r.owner=i,r.options=n,r.element=e,r.type=t,r.draggable=new g(e,{distance:0,dragstart:b(r._dragstart,r),drag:b(r.drag,r),dragend:b(r.dragend,r),dragcancel:b(r.dragcancel,r)}),e.click(!1)},Z.Drag.prototype={dragstart:function(e){this.owner._activeDragHandle=this,this.draggable.userEvents.cancel(),this.draggable.userEvents._start(e)},_dragstart:function(i){var n=this,r=n.owner,o=n.options;return o.enabled?(this.owner._activeDragHandle=this,r.element.off(R),r.wrapper.find("."+V).removeClass(V+" "+U),n.element.addClass(V+" "+U),e(document.documentElement).css("cursor","pointer"),n.dragableArea=r._getDraggableArea(),n.step=k.max(o.smallStep*(r._maxSelection/r._distance),0),n.type?(n.selectionStart=o.selectionStart,n.selectionEnd=o.selectionEnd,r._setZIndex(n.type)):n.oldVal=n.val=o.value,n._removeTooltip(!0),n._createTooltip(),t):(i.preventDefault(),t)},_createTooltip:function(){var t,i,n=this,r=n.owner,o=n.options.tooltip,s="",a=e(window);o.enabled&&(o.template&&(t=n.tooltipTemplate=f.template(o.template)),e(".k-slider-tooltip").remove(),n.tooltipDiv=e("<div class='k-widget k-tooltip k-slider-tooltip'><!-- --></div>").appendTo(document.body),s=r._getFormattedValue(n.val||r.value(),n),n.type||(i="k-callout-"+(r._isHorizontal?"s":"e"),n.tooltipInnerDiv="<div class='k-callout "+i+"'><!-- --></div>",s+=n.tooltipInnerDiv),n.tooltipDiv.html(s),n._scrollOffset={top:a.scrollTop(),left:a.scrollLeft()},n.moveTooltip())},drag:function(e){var t,i=this,n=i.owner,r=e.x.location,o=e.y.location,s=i.dragableArea.startPoint,a=i.dragableArea.endPoint;e.preventDefault(),i.val=n._isHorizontal?n._isRtl?i.constrainValue(r,s,a,a>r):i.constrainValue(r,s,a,r>=a):i.constrainValue(o,a,s,a>=o),i.oldVal!=i.val&&(i.oldVal=i.val,i.type?("firstHandle"==i.type?i.selectionStart=i.selectionEnd>i.val?i.val:i.selectionEnd=i.val:i.val>i.selectionStart?i.selectionEnd=i.val:i.selectionStart=i.selectionEnd=i.val,t={values:[i.selectionStart,i.selectionEnd],value:[i.selectionStart,i.selectionEnd]}):t={value:i.val},n.trigger(D,t)),i._updateTooltip(i.val)},_updateTooltip:function(e){var t=this,i=t.options,n=i.tooltip,r="";n.enabled&&(t.tooltipDiv||t._createTooltip(),r=t.owner._getFormattedValue(c(e),t),t.type||(r+=t.tooltipInnerDiv),t.tooltipDiv.html(r),t.moveTooltip())},dragcancel:function(){return this.owner._refresh(),e(document.documentElement).css("cursor",""),this._end()},dragend:function(){var t=this,i=t.owner;return e(document.documentElement).css("cursor",""),t.type?i._update(t.selectionStart,t.selectionEnd):(i._update(t.val),t.draggable.userEvents._disposeAll()),t._end()},_end:function(){var e=this,t=e.owner;return t._focusWithMouse(e.element),t.element.on(R),!1},_removeTooltip:function(t){var i=this,n=i.owner;i.tooltipDiv&&n.options.tooltip.enabled&&n.options.enabled&&(t?(i.tooltipDiv.remove(),i.tooltipDiv=null):i.tooltipDiv.fadeOut("slow",function(){e(this).remove(),i.tooltipDiv=null}))},moveTooltip:function(){var t,i,n,r,o=this,s=o.owner,a=0,l=0,c=o.element,d=f.getOffset(c),u=8,h=e(window),p=o.tooltipDiv.find(".k-callout"),m=o.tooltipDiv.outerWidth(),g=o.tooltipDiv.outerHeight();o.type?(t=s.wrapper.find(O),d=f.getOffset(t.eq(0)),i=f.getOffset(t.eq(1)),s._isHorizontal?(a=i.top,l=d.left+(i.left-d.left)/2):(a=d.top+(i.top-d.top)/2,l=i.left),r=t.eq(0).outerWidth()+2*u):(a=d.top,l=d.left,r=c.outerWidth()+2*u),s._isHorizontal?(l-=parseInt((m-c[s._outerSize]())/2,10),a-=g+p.height()+u):(a-=parseInt((g-c[s._outerSize]())/2,10),l-=m+p.width()+u),s._isHorizontal?(n=o._flip(a,g,r,h.outerHeight()+o._scrollOffset.top),a+=n,l+=o._fit(l,m,h.outerWidth()+o._scrollOffset.left)):(n=o._flip(l,m,r,h.outerWidth()+o._scrollOffset.left),a+=o._fit(a,g,h.outerHeight()+o._scrollOffset.top),l+=n),n>0&&p&&(p.removeClass(),p.addClass("k-callout k-callout-"+(s._isHorizontal?"n":"w"))),o.tooltipDiv.css({top:a,left:l})},_fit:function(e,t,i){var n=0;return e+t>i&&(n=i-(e+t)),0>e&&(n=-e),n},_flip:function(e,t,i,n){var r=0;return e+t>n&&(r+=-(i+t)),0>e+r&&(r+=i+t),r},constrainValue:function(e,t,i,n){var r=this,o=0;return o=e>t&&i>e?r.owner._getValueFromPosition(e,r.dragableArea):n?r.options.max:r.options.min}},f.ui.plugin(Z),p=X.extend({init:function(i,n){var r,o=this,s=e(i).find("input"),a=s.eq(0)[0],c=s.eq(1)[0];a.type="text",c.type="text",n=v({},{selectionStart:d(a,"value"),min:d(a,"min"),max:d(a,"max"),smallStep:d(a,"step")},{selectionEnd:d(c,"value"),min:d(c,"min"),max:d(c,"max"),smallStep:d(c,"step")},n),n&&n.enabled===t&&(n.enabled=!s.is("[disabled]")),X.fn.init.call(o,i,n),n=o.options,u(n.selectionStart)&&null!==n.selectionStart||(n.selectionStart=n.min,s.eq(0).prop("value",l(n.min))),u(n.selectionEnd)&&null!==n.selectionEnd||(n.selectionEnd=n.max,s.eq(1).prop("value",l(n.max))),r=o.wrapper.find(O),new p.Selection(r,o,n),o._firstHandleDrag=new Z.Drag(r.eq(0),"firstHandle",o,n),o._lastHandleDrag=new Z.Drag(r.eq(1),"lastHandle",o,n)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},selectionStart:null,selectionEnd:null},enable:function(i){var n,r=this,o=r.options;r.disable(),i!==!1&&(r.wrapper.removeClass(j).addClass(W),r.wrapper.find("input").removeAttr(G),n=function(i){var n,s,a,l,c,d,u,h=K(i)[0];if(h){if(n=r._isHorizontal?h.location.pageX:h.location.pageY,s=r._getDraggableArea(),a=r._getValueFromPosition(n,s),l=e(i.target),l.hasClass("k-draghandle"))return r.wrapper.find("."+V).removeClass(V+" "+U),l.addClass(V+" "+U),t;o.selectionStart>a?(c=a,d=o.selectionEnd,u=r._firstHandleDrag):a>r.selectionEnd?(c=o.selectionStart,d=a,u=r._lastHandleDrag):o.selectionEnd-a>=a-o.selectionStart?(c=a,d=o.selectionEnd,u=r._firstHandleDrag):(c=o.selectionStart,d=a,u=r._lastHandleDrag),u.dragstart(i),r._setValueInRange(c,d),r._focusWithMouse(u.element)}},r.wrapper.find(B+", "+L).on(E,n).end().on(E,function(){e(document.documentElement).one("selectstart",f.preventDefault)}).on(P,function(){r._activeDragHandle&&r._activeDragHandle._end()}),r.wrapper.find(O).attr(Q,0).on(I,function(){r._setTooltipTimeout()}).on(H,function(e){r._focusWithMouse(e.target),e.preventDefault()}).on(N,b(r._focus,r)).on($,b(r._blur,r)),r.wrapper.find(O).off(z,f.preventDefault).eq(0).on(z,b(function(e){this._keydown(e,"firstHandle")},r)).end().eq(1).on(z,b(function(e){this._keydown(e,"lastHandle")},r)),r.options.enabled=!0)},disable:function(){var e=this;e.wrapper.removeClass(W).addClass(j),e.wrapper.find("input").prop(G,G),e.wrapper.find(B+", "+L).off(E).off(P),e.wrapper.find(O).attr(Q,-1).off(I).off(z).off(H).off(N).off($),e.options.enabled=!1},_keydown:function(e,t){var i,n,r,o=this,s=o.options.selectionStart,a=o.options.selectionEnd;e.keyCode in o._keyMap&&(o._clearTooltipTimeout(),"firstHandle"==t?(r=o._activeHandleDrag=o._firstHandleDrag,s=o._keyMap[e.keyCode](s),s>a&&(a=s)):(r=o._activeHandleDrag=o._lastHandleDrag,a=o._keyMap[e.keyCode](a),s>a&&(s=a)),o._setValueInRange(s,a),i=Math.max(s,o.options.selectionStart),n=Math.min(a,o.options.selectionEnd),r.selectionEnd=Math.max(n,o.options.selectionStart),r.selectionStart=Math.min(i,o.options.selectionEnd),r._updateTooltip(o.value()[o._activeHandle]),e.preventDefault())},_update:function(e,t){var i=this,n=i.value(),r=n[0]!=e||n[1]!=t;i.value([e,t]),r&&i.trigger(T,{values:[e,t],value:[e,t]})},value:function(e){return e&&e.length?this._value(e[0],e[1]):this._value()},_value:function(e,i){var n=this,r=n.options,o=r.selectionStart,s=r.selectionEnd;return isNaN(e)&&isNaN(i)?[o,s]:(e=c(e),i=c(i),e>=r.min&&r.max>=e&&i>=r.min&&r.max>=i&&i>=e&&(o!=e||s!=i)&&(n.element.find("input").eq(0).prop("value",l(e)).end().eq(1).prop("value",l(i)),r.selectionStart=e,r.selectionEnd=i,n._refresh(),n._refreshAriaAttr(e,i)),t)},values:function(e,t){return w(e)?this._value(e[0],e[1]):this._value(e,t)},_refresh:function(){var e=this,t=e.options;e.trigger(F,{values:[t.selectionStart,t.selectionEnd],value:[t.selectionStart,t.selectionEnd]}),t.selectionStart==t.max&&t.selectionEnd==t.max&&e._setZIndex("firstHandle")},_refreshAriaAttr:function(e,t){var i,n=this,r=n.wrapper.find(O),o=n._activeHandleDrag;i=n._getFormattedValue([e,t],o),r.eq(0).attr("aria-valuenow",e),r.eq(1).attr("aria-valuenow",t),r.attr("aria-valuetext",i)},_setValueInRange:function(e,t){var i=this.options;e=k.max(k.min(e,i.max),i.min),t=k.max(k.min(t,i.max),i.min),e==i.max&&t==i.max&&this._setZIndex("firstHandle"),this._update(k.min(e,t),k.max(e,t))},_setZIndex:function(t){this.wrapper.find(O).each(function(i){e(this).css("z-index","firstHandle"==t?1-i:i)})},destroy:function(){var e=this;m.fn.destroy.call(e),e.wrapper.off(M).find(B+", "+L).off(M).end().find(O).off(M),e._firstHandleDrag.draggable.destroy(),e._lastHandleDrag.draggable.destroy()}}),p.Selection=function(e,t,i){function n(n){n=n||[];var o=n[0]-i.min,s=n[1]-i.min,a=k.ceil(c(o/i.smallStep)),l=k.ceil(c(s/i.smallStep)),d=t._pixelSteps[a],u=t._pixelSteps[l],h=parseInt(e.eq(0)[t._outerSize]()/2,10),p=t._isRtl?2:0;e.eq(0).css(t._position,d-h-p).end().eq(1).css(t._position,u-h-p),r(d,u)}function r(e,i){var n,r,o=t._trackDiv.find(".k-slider-selection");n=k.abs(e-i),o[t._sizeFn](n),t._isRtl?(r=k.max(e,i),o.css("right",t._maxSelection-r-1)):(r=k.min(e,i),o.css(t._position,r-1))}n(t.value()),t.bind([T,D,F],function(e){n(e.values)})},f.ui.plugin(p)}(window.kendo.jQuery),function(e,t,i){function n(e,t,i){i=d(i),i&&!i.equals(e.color())&&("change"==t&&(e._value=i),i=1!=i.a?i.toCssRgba():i.toCss(),e.trigger(t,{value:i}))}function r(e,t,i){var n,r;return e=Array.prototype.slice.call(e),n=e.length,r=e.indexOf(t),0>r?0>i?e[n-1]:e[0]:(r+=i,0>r?r+=n:r%=n,e[r])}function o(e){e.preventDefault()}function s(e,t){return function(){return e.apply(t,arguments)}}var a=window.kendo,l=a.ui,c=l.Widget,d=a.parseColor,u=a.Color,h=a.keys,p="background-color",f="k-state-selected",m="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7",g="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",v={apply:"Apply",cancel:"Cancel"},y=".kendoColorTools",_="click"+y,b="keydown"+y,w=a.support.browser,k=w.msie&&9>w.version,x=c.extend({init:function(e,t){var i,n=this;c.fn.init.call(n,e,t),e=n.element,t=n.options,n._value=t.value=d(t.value),n._tabIndex=e.attr("tabIndex")||0,i=n._ariaId=t.ariaId,i&&e.attr("aria-labelledby",i),t._standalone&&(n._triggerSelect=n._triggerChange)},options:{name:"ColorSelector",value:null,_standalone:!0},events:["change","select","cancel"],color:function(e){return e!==i&&(this._value=d(e),this._updateUI(this._value)),this._value},value:function(e){return e=this.color(e),e&&(e=this.options.opacity?e.toCssRgba():e.toCss()),e||null},enable:function(t){0===arguments.length&&(t=!0),e(".k-disabled-overlay",this.wrapper).remove(),t||this.wrapper.append("<div class='k-disabled-overlay'></div>"),this._onEnable(t)},_select:function(e,t){var i=this._value;e=this.color(e),t||(this.element.trigger("change"),e.equals(i)?this._standalone||this.trigger("cancel"):this.trigger("change",{value:this.value()}))},_triggerSelect:function(e){n(this,"select",e)},_triggerChange:function(e){n(this,"change",e)},destroy:function(){this.element&&this.element.off(y),this.wrapper&&this.wrapper.off(y).find("*").off(y),this.wrapper=null,c.fn.destroy.call(this)},_updateUI:e.noop,_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}}),C=x.extend({init:function(t,i){var n,r,o,l,c=this;if(x.fn.init.call(c,t,i),t=c.wrapper=c.element,i=c.options,n=i.palette,"websafe"==n?(n=g,i.columns=18):"basic"==n&&(n=m),"string"==typeof n&&(n=n.split(",")),e.isArray(n)&&(n=e.map(n,function(e){return d(e)})),c._selectedID=(i.ariaId||a.guid())+"_selected",t.addClass("k-widget k-colorpalette").attr("role","grid").attr("aria-readonly","true").append(e(c._template({colors:n,columns:i.columns,tileSize:i.tileSize,value:c._value,id:i.ariaId}))).on(_,".k-item",function(t){c._select(e(t.currentTarget).css(p))}).attr("tabIndex",c._tabIndex).on(b,s(c._keydown,c)),r=i.tileSize){if(/number|string/.test(typeof r))o=l=parseFloat(r);else{if("object"!=typeof r)throw Error("Unsupported value for the 'tileSize' argument");o=parseFloat(r.width),l=parseFloat(r.height)}t.find(".k-item").css({width:o,height:l})}},focus:function(){this.wrapper.focus()},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_onEnable:function(e){e?this.wrapper.attr("tabIndex",this._tabIndex):this.wrapper.removeAttr("tabIndex")},_keydown:function(t){var i,n,s=this.wrapper,a=s.find(".k-item"),l=a.filter("."+f).get(0),c=t.keyCode;if(c==h.LEFT?i=r(a,l,-1):c==h.RIGHT?i=r(a,l,1):c==h.DOWN?i=r(a,l,this.options.columns):c==h.UP?i=r(a,l,-this.options.columns):c==h.ENTER?(o(t),l&&this._select(e(l).css(p))):c==h.ESC&&this._cancel(),i){o(t),this._current(i);try{n=d(i.css(p)),this._triggerSelect(n)}catch(e){}}},_current:function(t){this.wrapper.find("."+f).removeClass(f).attr("aria-selected",!1).removeAttr("id"),e(t).addClass(f).attr("aria-selected",!0).attr("id",this._selectedID),this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",this._selectedID)},_updateUI:function(t){var n=null;this.wrapper.find(".k-item").each(function(){var r=d(e(this).css(p));return r&&r.equals(t)?(n=this,!1):i}),this._current(n)},_template:a.template('<table class="k-palette k-reset" role="presentation"><tr role="row"># for (var i = 0; i < colors.length; ++i) { ## var selected = colors[i].equals(value); ## if (i && i % columns == 0) { # </tr><tr role="row"> # } #<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"#= selected ? " aria-selected=true" : "" # #=(id && i === 0) ? "id=\\""+id+"\\" " : "" # class="k-item#= selected ? " '+f+'" : "" #" aria-label="#= colors[i].toCss() #"></td># } #</tr></table>')}),S=x.extend({init:function(t,i){var n=this;x.fn.init.call(n,t,i),i=n.options,t=n.element,n.wrapper=t.addClass("k-widget k-flatcolorpicker").append(n._template(i)),n._hueElements=e(".k-hsv-rectangle, .k-transparency-slider .k-slider-track",t),n._selectedColor=e(".k-selected-color-display",t),n._colorAsText=e("input.k-color-value",t),n._sliders(),n._hsvArea(),n._updateUI(n._value||d("#f00")),t.find("input.k-color-value").on(b,function(t){var i,r,o=this;if(t.keyCode==h.ENTER)try{i=d(o.value),r=n.color(),n._select(i,i.equals(r))}catch(t){e(o).addClass("k-state-error")}else n.options.autoupdate&&setTimeout(function(){var e=d(o.value,!0);e&&n._updateUI(e,!0)},10)}).end().on(_,".k-controls button.apply",function(){n._select(n._getHSV())}).on(_,".k-controls button.cancel",function(){n._updateUI(n.color()),n._cancel()}),k&&n._applyIEFilter()},destroy:function(){this._hueSlider.destroy(),this._opacitySlider&&this._opacitySlider.destroy(),this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=null,x.fn.destroy.call(this)},options:{name:"FlatColorPicker",opacity:!1,buttons:!1,input:!0,preview:!0,autoupdate:!0,messages:v},_applyIEFilter:function(){var e=this.element.find(".k-hue-slider .k-slider-track")[0],t=e.currentStyle.backgroundImage;t=t.replace(/^url\([\'\"]?|[\'\"]?\)$/g,""),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')"},_sliders:function(){function e(e){i._updateUI(i._getHSV(e.value,null,null,null))}function t(e){i._updateUI(i._getHSV(null,null,null,e.value/100))}var i=this,n=i.element;i._hueSlider=n.find(".k-hue-slider").kendoSlider({min:0,max:359,tickPlacement:"none",showButtons:!1,slide:e,change:e}).data("kendoSlider"),i._opacitySlider=n.find(".k-transparency-slider").kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:!1,slide:t,change:t}).data("kendoSlider")},_hsvArea:function(){function e(e,i){var n=this.offset,r=e-n.left,o=i-n.top,s=this.width,a=this.height;r=0>r?0:r>s?s:r,o=0>o?0:o>a?a:o,t._svChange(r/s,1-o/a)}var t=this,i=t.element,n=i.find(".k-hsv-rectangle"),r=n.find(".k-draghandle").attr("tabIndex",0).on(b,s(t._keydown,t));t._hsvEvents=new a.UserEvents(n,{global:!0,press:function(t){this.offset=a.getOffset(n),this.width=n.width(),this.height=n.height(),r.focus(),e.call(this,t.x.location,t.y.location)},start:function(){n.addClass("k-dragging"),r.focus()},move:function(t){t.preventDefault(),e.call(this,t.x.location,t.y.location)},end:function(){n.removeClass("k-dragging")}}),t._hsvRect=n,t._hsvHandle=r},_onEnable:function(e){this._hueSlider.enable(e),this._opacitySlider&&this._opacitySlider.enable(e),this.wrapper.find("input").attr("disabled",!e);var t=this._hsvRect.find(".k-draghandle");e?t.attr("tabIndex",this._tabIndex):t.removeAttr("tabIndex")},_keydown:function(e){function t(t,i){var r=n._getHSV();r[t]+=i*(e.shiftKey?.01:.05),0>r[t]&&(r[t]=0),r[t]>1&&(r[t]=1),n._updateUI(r),o(e)}function i(t){var i=n._getHSV();i.h+=t*(e.shiftKey?1:5),0>i.h&&(i.h=0),i.h>359&&(i.h=359),n._updateUI(i),o(e)}var n=this;switch(e.keyCode){case h.LEFT:e.ctrlKey?i(-1):t("s",-1);break;case h.RIGHT:e.ctrlKey?i(1):t("s",1);break;case h.UP:t(e.ctrlKey&&n._opacitySlider?"a":"v",1);break;case h.DOWN:t(e.ctrlKey&&n._opacitySlider?"a":"v",-1);break;case h.ENTER:n._select(n._getHSV());break;case h.F2:n.wrapper.find("input.k-color-value").focus().select();break;case h.ESC:n._cancel()}},focus:function(){this._hsvHandle.focus()},_getHSV:function(e,t,i,n){var r=this._hsvRect,o=r.width(),s=r.height(),a=this._hsvHandle.position();return null==e&&(e=this._hueSlider.value()),null==t&&(t=a.left/o),null==i&&(i=1-a.top/s),null==n&&(n=this._opacitySlider?this._opacitySlider.value()/100:1),u.fromHSV(e,t,i,n)},_svChange:function(e,t){var i=this._getHSV(null,e,t,null);this._updateUI(i)},_updateUI:function(e,t){var i=this,n=i._hsvRect;e&&(this._colorAsText.removeClass("k-state-error"),i._selectedColor.css(p,e.toDisplay()),t||i._colorAsText.val(i._opacitySlider?e.toCssRgba():e.toCss()),i._triggerSelect(e),e=e.toHSV(),i._hsvHandle.css({left:e.s*n.width()+"px",top:(1-e.v)*n.height()+"px"}),i._hueElements.css(p,u.fromHSV(e.h,1,1,1).toCss()),i._hueSlider.value(e.h),i._opacitySlider&&i._opacitySlider.value(100*e.a))},_selectOnHide:function(){return this.options.buttons?null:this._getHSV()},_template:a.template('# if (preview) { #<div class="k-selected-color"><div class="k-selected-color-display"><input class="k-color-value" #= !data.input ? \'style="visibility: hidden;"\' : "" #></div></div># } #<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div><input class="k-hue-slider" /># if (opacity) { #<input class="k-transparency-slider" /># } ## if (buttons) { #<div unselectable="on" class="k-controls"><button class="k-button k-primary apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div># } #')}),T=c.extend({init:function(t,i){var n,r,o,s,a,l=this;c.fn.init.call(l,t,i),i=l.options,t=l.element,n=t.attr("value")||t.val(),n=n?d(n,!0):d(i.value,!0),l._value=i.value=n,r=l.wrapper=e(l._template(i)),t.hide().after(r),t.is("input")&&(t.appendTo(r),o=t.closest("label"),s=t.attr("id"),s&&(o=o.add('label[for="'+s+'"]')),o.click(function(e){l.open(),e.preventDefault()})),l._tabIndex=t.attr("tabIndex")||0,l.enable(!t.attr("disabled")),a=t.attr("accesskey"),a&&(t.attr("accesskey",null),r.attr("accesskey",a)),l.bind("activate",function(e){e.isDefaultPrevented()||l.toggle()}),l._updateUI(n)},destroy:function(){this.wrapper.off(y).find("*").off(y),this._popup&&(this._selector.destroy(),this._popup.destroy()),this._selector=this._popup=this.wrapper=null,c.fn.destroy.call(this)},enable:function(e){var t=this,i=t.wrapper,n=i.children(".k-picker-wrap"),r=n.find(".k-select");0===arguments.length&&(e=!0),t.element.attr("disabled",!e),i.attr("aria-disabled",!e),r.off(y).on("mousedown"+y,o),i.addClass("k-state-disabled").removeAttr("tabIndex").add("*",i).off(y),e&&i.removeClass("k-state-disabled").attr("tabIndex",t._tabIndex).on("mouseenter"+y,function(){n.addClass("k-state-hover")}).on("mouseleave"+y,function(){n.removeClass("k-state-hover")}).on("focus"+y,function(){n.addClass("k-state-focused")}).on("blur"+y,function(){n.removeClass("k-state-focused")}).on(b,s(t._keydown,t)).on(_,".k-icon",s(t.toggle,t)).on(_,t.options.toolIcon?".k-tool-icon":".k-selected-color",function(){t.trigger("activate")})},_template:a.template('<span role="textbox" aria-haspopup="true" class="k-widget k-colorpicker k-header"><span class="k-picker-wrap k-state-default"># if (toolIcon) { #<span class="k-tool-icon #= toolIcon #"><span class="k-selected-color"></span></span># } else { #<span class="k-selected-color"></span># } #<span class="k-select" unselectable="on"><span class="k-icon k-i-arrow-s" unselectable="on"></span></span></span></span>'),options:{name:"ColorPicker",palette:null,columns:10,toolIcon:null,value:null,messages:v,opacity:!1,buttons:!0,preview:!0,ARIATemplate:'Current selected color is #=data || ""#'},events:["activate","change","select","open","close"],open:function(){this._getPopup().open()},close:function(){this._getPopup().close()},toggle:function(){this._getPopup().toggle()},color:x.fn.color,value:x.fn.value,_select:x.fn._select,_triggerSelect:x.fn._triggerSelect,_isInputTypeColor:function(){var e=this.element[0];return/^input$/i.test(e.tagName)&&/^color$/i.test(e.type)},_updateUI:function(e){var t="";e&&(t=this._isInputTypeColor()||1==e.a?e.toCss():e.toCssRgba(),this.element.val(t)),this._ariaTemplate||(this._ariaTemplate=a.template(this.options.ARIATemplate)),this.wrapper.attr("aria-label",this._ariaTemplate(t)),this._triggerSelect(e),this.wrapper.find(".k-selected-color").css(p,e?e.toDisplay():"transparent")},_keydown:function(e){var t=e.keyCode;this._getPopup().visible()?(t==h.ESC?this._selector._cancel():this._selector._keydown(e),o(e)):(t==h.ENTER||t==h.DOWN)&&(this.open(),o(e))},_getPopup:function(){var t,n,r,o,s=this,l=s._popup;return l||(t=s.options,n=t.palette?C:S,t._standalone=!1,delete t.select,delete t.change,delete t.cancel,r=a.guid(),o=s._selector=new n(e('<div id="'+r+'"/>').appendTo(document.body),t),s.wrapper.attr("aria-owns",r),s._popup=l=o.wrapper.kendoPopup({anchor:s.wrapper}).data("kendoPopup"),o.bind({select:function(e){s._updateUI(d(e.value))},change:function(){s._select(o.color()),s.close()},cancel:function(){s.close()}}),l.bind({close:function(e){if(s.trigger("close"))return e.preventDefault(),i;s.wrapper.children(".k-picker-wrap").removeClass("k-state-focused");var t=o._selectOnHide();t?s._select(t):(s.wrapper.focus(),s._updateUI(s.color()))},open:function(e){s.trigger("open")?e.preventDefault():s.wrapper.children(".k-picker-wrap").addClass("k-state-focused")},activate:function(){o._select(s.color(),!0),o.focus(),s.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}})),l}});l.plugin(C),l.plugin(S),l.plugin(T)}(jQuery,parseInt),function(e,t){function i(e,t){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+e+'" title="'+t+'">'+t+"</span></span>"}var n=window.kendo,r=n.caret,o=n.keys,s=n.ui,a=s.Widget,l=n._activeElement,c=n._extractFormat,d=n.parseFloat,u=n.support.placeholder,h=n.getCulture,p=n._round,f="change",m="disabled",g="readonly",v="k-input",y="spin",_=".kendoNumericTextBox",b="touchend",w="mouseleave"+_,k="mouseenter"+_+" "+w,x="k-state-default",C="k-state-focused",S="k-state-hover",T="focus",D=".",M="k-state-selected",A="k-state-disabled",E="aria-disabled",I="aria-readonly",P=/^(-)?(\d*)$/,F=null,z=e.proxy,H=a.extend({init:function(e,i){var r,o,s,l,d,u=this,h=i&&i.step!==t;a.fn.init.call(u,e,i),i=u.options,e=u.element.on("focusout"+_,z(u._focusout,u)).attr("role","spinbutton"),i.placeholder=i.placeholder||e.attr("placeholder"),u._reset(),u._wrapper(),u._arrows(),u._input(),n.support.mobileOS?u._text.on(b+_+" "+T+_,function(t){u._toggleText(!1),t.type===T&&e.focus()}):u._text.on(T+_,z(u._click,u)),r=u.min(e.attr("min")),o=u.max(e.attr("max")),s=u._parse(e.attr("step")),i.min===F&&r!==F&&(i.min=r),i.max===F&&o!==F&&(i.max=o),h||s===F||(i.step=s),e.attr("aria-valuemin",i.min).attr("aria-valuemax",i.max),i.format=c(i.format),l=i.value,u.value(l!==F?l:e.val()),d=e.is("[disabled]"),d?u.enable(!1):u.readonly(e.is("[readonly]")),n.notify(u)},options:{name:"NumericTextBox",decimals:F,min:F,max:F,value:F,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[f,y],_editable:function(e){var t=this,i=t.element,n=e.disable,r=e.readonly,o=t._text.add(i),s=t._inputWrapper.off(k);t._toggleText(!0),t._upArrowEventHandler.unbind("press"),t._downArrowEventHandler.unbind("press"),i.off("keydown"+_).off("keypress"+_).off("paste"+_),r||n?(s.addClass(n?A:x).removeClass(n?x:A),o.attr(m,n).attr(g,r).attr(E,n).attr(I,r)):(s.addClass(x).removeClass(A).on(k,t._toggleHover),o.removeAttr(m).removeAttr(g).attr(E,!1).attr(I,!1),t._upArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(1),t._upArrow.addClass(M)}),t._downArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(-1),t._downArrow.addClass(M)}),t.element.on("keydown"+_,z(t._keydown,t)).on("keypress"+_,z(t._keypress,t)).on("paste"+_,z(t._paste,t)))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;e.element.add(e._text).add(e._upArrow).add(e._downArrow).add(e._inputWrapper).off(_),e._upArrowEventHandler.destroy(),e._downArrowEventHandler.destroy(),e._form&&e._form.off("reset",e._resetHandler),a.fn.destroy.call(e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var i,n=this;return e===t?n._value:(e=n._parse(e),i=n._adjust(e),e===i&&(n._update(e),n._old=n._value),t)},focus:function(){this._focusin()},_adjust:function(e){var t=this,i=t.options,n=i.min,r=i.max;return e===F?e:(n!==F&&n>e?e=n:r!==F&&e>r&&(e=r),e)},_arrows:function(){var t,r=this,o=function(){clearTimeout(r._spinning),t.removeClass(M)},s=r.options,a=s.spinners,l=r.element;t=l.siblings(".k-icon"),t[0]||(t=e(i("n",s.upArrowText)+i("s",s.downArrowText)).insertAfter(l),t.wrapAll('<span class="k-select"/>')),a||(t.parent().toggle(a),r._inputWrapper.addClass("k-expand-padding")),r._upArrow=t.eq(0),r._upArrowEventHandler=new n.UserEvents(r._upArrow,{release:o}),r._downArrow=t.eq(1),r._downArrowEventHandler=new n.UserEvents(r._downArrow,{release:o})},_blur:function(){var e=this;e._toggleText(!0),e._change(e.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var i,n,o,s=e.target,a=r(s)[0],l=s.value.substring(0,a),c=t._format(t.options.format),d=c[","],u=0;d&&(n=RegExp("\\"+d,"g"),o=RegExp("([\\d\\"+d+"]+)(\\"+c[D]+")?(\\d+)?")),o&&(i=o.exec(l)),i&&(u=i[0].replace(n,"").length,
-1!=l.indexOf("(")&&0>t._value&&u++),t._focusin(),r(t.element[0],u)})},_change:function(e){var t=this;t._update(e),e=t._value,t._old!=e&&(t._old=e,t.element.trigger(f),t.trigger(f))},_culture:function(e){return e||h(this.options.culture)},_focusin:function(){var e=this;e._inputWrapper.addClass(C),e._toggleText(!1),e.element[0].focus()},_focusout:function(){var e=this;clearTimeout(e._focusing),e._inputWrapper.removeClass(C).removeClass(S),e._blur()},_format:function(e,t){var i=this._culture(t).numberFormat;return e=e.toLowerCase(),e.indexOf("c")>-1?i=i.currency:e.indexOf("p")>-1&&(i=i.percent),i},_input:function(){var t,i=this,n="k-formatted-value",r=i.element.addClass(v).show()[0],o=r.accessKey,s=i.wrapper;t=s.find(D+n),t[0]||(t=e('<input type="text"/>').insertBefore(r).addClass(n));try{r.setAttribute("type","text")}catch(e){r.type="text"}t[0].tabIndex=r.tabIndex,t[0].style.cssText=r.style.cssText,t.prop("placeholder",i.options.placeholder),o&&(t.attr("accesskey",o),r.accessKey=""),i._text=t.addClass(r.className)},_keydown:function(e){var t=this,i=e.keyCode;t._key=i,i==o.DOWN?t._step(-1):i==o.UP?t._step(1):i==o.ENTER&&t._change(t.element.val())},_keypress:function(e){var t,i,n,s,a,l,c,d,u,h,p;0===e.which||e.ctrlKey||e.keyCode===o.BACKSPACE||e.keyCode===o.ENTER||(t=this,i=t.options.min,n=t.element,s=r(n),a=s[0],l=s[1],c=String.fromCharCode(e.which),d=t._format(t.options.format),u=t._key===o.NUMPAD_DOT,h=n.val(),u&&(c=d[D]),h=h.substring(0,a)+c+h.substring(l),p=t._numericRegex(d).test(h),p&&u?(n.val(h),r(n,a+c.length),e.preventDefault()):(null!==i&&i>=0&&"-"===h.charAt(0)||!p)&&e.preventDefault(),t._key=0)},_numericRegex:function(e){var t=this,i=e[D],n=t.options.decimals;return i===D&&(i="\\"+i),n===F&&(n=e.decimals),0===n?P:(t._separator!==i&&(t._separator=i,t._floatRegExp=RegExp("^(-)?(((\\d+("+i+"\\d*)?)|("+i+"\\d*)))?$")),t._floatRegExp)},_paste:function(e){var t=this,i=e.target,n=i.value;setTimeout(function(){t._parse(i.value)===F&&t._update(n)})},_option:function(e,i){var n=this,r=n.options;return i===t?r[e]:(i=n._parse(i),(i||"step"!==e)&&(r[e]=i,n.element.attr("aria-value"+e,i).attr(e,i)),t)},_spin:function(e,t){var i=this;t=t||500,clearTimeout(i._spinning),i._spinning=setTimeout(function(){i._spin(e,50)},t),i._step(e)},_step:function(e){var t=this,i=t.element,n=t._parse(i.val())||0;l()!=i[0]&&t._focusin(),n+=t.options.step*e,t._update(t._adjust(n)),t.trigger(y)},_toggleHover:function(t){e(t.currentTarget).toggleClass(S,"mouseenter"===t.type)},_toggleText:function(e){var t=this;t._text.toggle(e),t.element.toggle(!e)},_parse:function(e,t){return d(e,this._culture(t),this.options.format)},_update:function(e){var t,i=this,r=i.options,o=r.format,s=r.decimals,a=i._culture(),l=i._format(o,a);s===F&&(s=l.decimals),e=i._parse(e,a),t=e!==F,t&&(e=parseFloat(p(e,s))),i._value=e=i._adjust(e),i._placeholder(n.toString(e,o,a)),t?(e=""+e,-1!==e.indexOf("e")&&(e=p(+e,s)),e=e.replace(D,l[D])):e="",i.element.val(e).attr("aria-valuenow",e)},_placeholder:function(e){this._text.val(e),u||e||this._text.val(this.options.placeholder)},_wrapper:function(){var t,i=this,n=i.element,r=n[0];t=n.parents(".k-numerictextbox"),t.is("span.k-numerictextbox")||(t=n.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),t=t.wrap("<span/>").parent()),t[0].style.cssText=r.style.cssText,r.style.width="",i.wrapper=t.addClass("k-widget k-numerictextbox").addClass(r.className).css("display",""),i._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(i[0].value)})},t._form=r.on("reset",t._resetHandler))}});s.plugin(H)}(window.kendo.jQuery),function(e){function t(i,n){i.filters&&(i.filters=e.grep(i.filters,function(e){return t(e,n),e.filters?e.filters.length:e.field!=n}))}function i(e){var t,i,n,r,o,s;if(e&&e.length)for(s=[],t=0,i=e.length;i>t;t++)n=e[t],o=n.text||n.value||n,r=null==n.value?n.text||n:n.value,s[t]={text:o,value:r};return s}function n(t,i){return e.grep(t,function(t){return t.filters?(t.filters=e.grep(t.filters,function(e){return e.field!=i}),t.filters.length):t.field!=i})}var r=window.kendo,o=r.ui,s=e.proxy,a="kendoPopup",l="init",c=".kendoFilterMenu",d="Is equal to",u="Is not equal to",h={number:"numerictextbox",date:"datepicker"},p={string:"text",number:"number",date:"date"},f=r.isFunction,m=o.Widget,g='<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',v='<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',y='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>',_='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>',b=m.extend({init:function(t,i){var n,o,a,l,d=this,u="string";m.fn.init.call(d,t,i),n=d.operators=i.operators||{},t=d.element,i=d.options,i.appendToElement||(a=t.addClass("k-with-icon k-filterable").find(".k-grid-filter"),a[0]||(a=t.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),a.attr("tabindex",-1).on("click"+c,s(d._click,d))),d.link=a||e(),d.dataSource=i.dataSource,d.field=i.field||t.attr(r.attr("field")),d.model=d.dataSource.reader.model,d._parse=function(e){return e+""},d.model&&d.model.fields&&(l=d.model.fields[d.field],l&&(u=l.type||"string",l.parse&&(d._parse=s(l.parse,l)))),i.values&&(u="enums"),d.type=u,n=n[u]||i.operators[u];for(o in n)break;d._defaultFilter=function(){return{field:d.field,operator:o||"eq",value:""}},d._refreshHandler=s(d.refresh,d),d.dataSource.bind("change",d._refreshHandler),i.appendToElement?d._init():d.refresh()},_init:function(){var t,i=this,n=i.options.ui,o=f(n);i.pane=i.options.pane,i.pane&&(i._isMobile=!0),o||(t=n||h[i.type]),i._isMobile?i._createMobileForm(t):i._createForm(t),i.form.on("submit"+c,s(i._submit,i)).on("reset"+c,s(i._reset,i)),o&&i.form.find(".k-textbox").removeClass("k-textbox").each(function(){n(e(this))}),i.form.find("["+r.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+r.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+r.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+r.attr("role")+"=datepicker]").removeClass("k-textbox"),i.refresh(),i.trigger(l,{field:i.field,container:i.form})},_createForm:function(t){var n=this,o=n.options,l=n.operators||{},d=n.type;l=l[d]||o.operators[d],n.form=e('<form class="k-filter-menu"/>').html(r.template("boolean"===d?g:v)({field:n.field,format:o.format,ns:r.ns,messages:o.messages,extra:o.extra,operators:l,type:d,role:t,values:i(o.values)})),o.appendToElement?(n.element.append(n.form),n.popup=n.element.closest(".k-popup").data(a)):n.popup=n.form[a]({anchor:n.link,open:s(n._open,n),activate:s(n._activate,n),close:function(){n.options.closeCallback&&n.options.closeCallback(n.element)}}).data(a),n.form.on("keydown"+c,s(n._keydown,n))},_createMobileForm:function(t){var n=this,o=n.options,s=n.operators||{},a=n.type;s=s[a]||o.operators[a],n.form=e("<div />").html(r.template("boolean"===a?_:y)({field:n.field,format:o.format,ns:r.ns,messages:o.messages,extra:o.extra,operators:s,type:a,role:t,useRole:!r.support.input.date&&"date"===a||"number"===a,inputType:p[a],values:i(o.values)})),n.view=n.pane.append(n.form.html()),n.form=n.view.element.find("form"),n.view.element.on("click",".k-submit",function(e){n.form.submit(),e.preventDefault()}).on("click",".k-cancel",function(e){n._closeForm(),e.preventDefault()})},refresh:function(){var e=this,t=e.dataSource.filter()||{filters:[],logic:"and"};e.filterModel=r.observable({logic:"and",filters:[e._defaultFilter(),e._defaultFilter()]}),e.form&&r.bind(e.form.children().first(),e.filterModel),e._bind(t)?e.link.addClass("k-state-active"):e.link.removeClass("k-state-active")},destroy:function(){var e=this;m.fn.destroy.call(e),e.form&&(r.unbind(e.form),r.destroy(e.form),e.form.unbind(c),e.popup&&(e.popup.destroy(),e.popup=null),e.form=null),e.view&&(e.view.purge(),e.view=null),e.link.unbind(c),e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e.dataSource=null),e.element=e.link=e._refreshHandler=e.filterModel=null},_bind:function(e){var t,i,n,r,o=this,s=e.filters,a=!1,l=0,c=o.filterModel;for(t=0,i=s.length;i>t;t++)r=s[t],r.field==o.field?(c.set("logic",e.logic),n=c.filters[l],n||(c.filters.push({field:o.field}),n=c.filters[l]),n.set("value",o._parse(r.value)),n.set("operator",r.operator),l++,a=!0):r.filters&&(a=a||o._bind(r));return a},_merge:function(i){var n,r,o,s=this,a=i.logic||"and",l=i.filters,c=s.dataSource.filter()||{filters:[],logic:"and"};for(t(c,s.field),l=e.grep(l,function(e){return""!==e.value&&null!=e.value}),r=0,o=l.length;o>r;r++)n=l[r],n.value=s._parse(n.value);return l.length&&(c.filters.length?(i.filters=l,"and"!==c.logic&&(c.filters=[{logic:c.logic,filters:c.filters}],c.logic="and"),c.filters.push(l.length>1?i:l[0])):(c.filters=l,c.logic=a)),c},filter:function(e){e=this._merge(e),e.filters.length&&this.dataSource.filter(e)},clear:function(){var t=this,i=t.dataSource.filter()||{filters:[]};i.filters=e.grep(i.filters,function(e){return e.filters?(e.filters=n(e.filters,t.field),e.filters.length):e.field!=t.field}),i.filters.length||(i=null),t.dataSource.filter(i)},_submit:function(e){e.preventDefault(),e.stopPropagation(),this.filter(this.filterModel.toJSON()),this._closeForm()},_reset:function(){this.clear(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var t;e(".k-filter-menu").not(this.form).each(function(){t=e(this).data(a),t&&t.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(e){e.keyCode==r.keys.ESC&&this.popup.close()},events:[l],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:d,neq:u,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:d,neq:u,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:d,neq:u,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:d,neq:u}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}});o.plugin(b)}(window.kendo.jQuery),function(e,t){function i(e,t){return e=e.split(" ")[!t+0]||e,e.replace("top","up").replace("bottom","down")}function n(e,t,i){e=e.split(" ")[!t+0]||e;var n={origin:["bottom",i?"right":"left"],position:["top",i?"right":"left"]},r=/left|right/.test(e);return r?(n.origin=["top",e],n.position[1]=c.directions[e].reverse):(n.origin[0]=e,n.position[0]=c.directions[e].reverse),n.origin=n.origin.join(" "),n.position=n.position.join(" "),n}function r(t,i){try{return e.contains(t,i)}catch(e){return!1}}function o(t){t=e(t),t.addClass("k-item").children(x).addClass(I),t.children("a").addClass(T).children(x).addClass(I),t.filter(":not([disabled])").addClass(j),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(Y).removeAttr("disabled").attr("aria-disabled",!0),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+T).length||t.contents().filter(function(){return!(this.nodeName.match(w)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+T+"'/>"),s(t),a(t)}function s(t){t=e(t),t.find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove(),t.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var t=e(this),i=t.parent().parent();t.append("<span class='k-icon "+(i.hasClass(S+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function a(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(E),t.filter(".k-last:not(:last-child)").removeClass(D),t.filter(":first-child").addClass(E),t.filter(":last-child").addClass(D)}var l,c=window.kendo,d=c.ui,u=c._activeElement,h=c.support.touch&&c.support.mobileOS,p="mousedown",f="click",m=e.extend,g=e.proxy,v=e.each,y=c.template,_=c.keys,b=d.Widget,w=/^(ul|a|div)$/i,k=".kendoMenu",x="img",C="open",S="k-menu",T="k-link",D="k-last",M="close",A="timer",E="k-first",I="k-image",P="select",F="zIndex",z="activate",H="deactivate",R="touchstart"+k+" MSPointerDown"+k+" pointerdown"+k,N=c.support.pointers,$=c.support.msPointers,O=$||N,L=N?"pointerover":$?"MSPointerOver":"mouseenter",B=N?"pointerout":$?"MSPointerOut":"mouseleave",U=h||O,V=e(document.documentElement),W="kendoPopup",j="k-state-default",q="k-state-hover",G="k-state-focused",Y="k-state-disabled",Q=".k-menu",K=".k-menu-group",X=K+",.k-animation-container",Z=":not(.k-list) > .k-item",J=".k-item.k-state-disabled",ee=".k-item:not(.k-state-disabled)",te=".k-item:not(.k-state-disabled) > .k-link",ie=":not(.k-item.k-separator)",ne=ie+":eq(0)",re=ie+":last",oe="div:not(.k-animation-container,.k-list-container)",se={2:1,touch:1},ae={content:y("<div class='k-content #= groupCssClass() #' tabindex='-1'>#= content(item) #</div>"),group:y("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:y("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:y("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:y("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:y("<span class='#= arrowClass(item, group) #'></span>"),sprite:y("<span class='k-sprite #= spriteCssClass #'></span>"),empty:y("")},le={wrapperCssClass:function(e,t){var i="k-item",n=t.index;return i+=t.enabled===!1?" k-state-disabled":" k-state-default",e.firstLevel&&0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),t.cssClass&&(i+=" "+t.cssClass),i},textClass:function(){return T},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){var i="k-icon";return i+=t.horizontal?" k-i-arrow-s":" k-i-arrow-e"},text:function(e){return e.encoded===!1?e.text:c.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group"},content:function(e){return e.content?e.content:"&nbsp;"}},ce=b.extend({init:function(t,i){var n=this;b.fn.init.call(n,t,i),t=n.wrapper=n.element,i=n.options,n._initData(i),n._updateClasses(),n._animations(i),n.nextItemZIndex=100,n._tabindex(),n._focusProxy=g(n._focusHandler,n),t.on(R,n._focusProxy).on(f+k,J,!1).on(f+k,ee,g(n._click,n)).on("keydown"+k,g(n._keydown,n)).on("focus"+k,g(n._focus,n)).on("focus"+k,".k-content",g(n._focus,n)).on(R+" "+p+k,".k-content",g(n._preventClose,n)).on("blur"+k,g(n._removeHoverItem,n)).on("blur"+k,"[tabindex]",g(n._checkActiveElement,n)).on(L+k,ee,g(n._mouseenter,n)).on(B+k,ee,g(n._mouseleave,n)).on(L+k+" "+B+k+" "+p+k+" "+f+k,te,g(n._toggleHover,n)),i.openOnClick&&(n.clicked=!1,n._documentClickHandler=g(n._documentClick,n),e(document).click(n._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(n._ariaId=c.format("{0}_mn_active",t[0].id)),c.notify(n)},events:[C,M,z,H,P],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100,popupCollision:t},_initData:function(e){var t=this;e.dataSource&&(t.angular("cleanup",function(){return{elements:t.element.children()}}),t.element.empty(),t.append(e.dataSource,t.element),t.angular("compile",function(){return{elements:t.element.children()}}))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=m(!0,t,e.animation),"dataSource"in e&&this._initData(e),this._updateClasses(),b.fn.setOptions.call(this,e)},destroy:function(){var t=this;b.fn.destroy.call(t),t.element.off(k),t._documentClickHandler&&e(document).unbind("click",t._documentClickHandler),c.destroy(t.element)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.length?t.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);return v(i.items,function(){i.group.append(this),s(this)}),s(t),a(i.group.find(".k-first, .k-last").add(i.items)),this},insertBefore:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());return v(i.items,function(){t.before(this),s(this),a(this)}),a(t),this},insertAfter:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());return v(i.items,function(){t.after(this),s(this),a(this)}),a(t),this},_insert:function(t,i,n){var r,s,a,l,c=this;return i&&i.length||(n=c.element),a=e.isPlainObject(t),l={firstLevel:n.hasClass(S),horizontal:n.hasClass(S+"-horizontal"),expanded:!0,length:n.children().length},i&&!n.length&&(n=e(ce.renderGroup({group:l})).appendTo(i)),a||e.isArray(t)?r=e(e.map(a?[t]:t,function(t,i){return"string"==typeof t?e(t).get():e(ce.renderItem({group:l,item:m(t,{index:i})})).get()})):(r="string"==typeof t&&"<"!=t[0]?c.element.find(t):e(t),s=r.find("> ul").addClass("k-menu-group").attr("role","menu"),r=r.filter("li"),r.add(s.find("> li")).each(function(){o(this)})),{items:r,group:n}},remove:function(e){var t,i,n,r;return e=this.element.find(e),t=this,i=e.parentsUntil(t.element,Z),n=e.parent("ul:not(.k-menu)"),e.remove(),n&&!n.children(Z).length&&(r=n.parent(".k-animation-container"),r.length?r.remove():n.remove()),i.length&&(i=i.eq(0),s(i),a(i)),t},open:function(r){var o=this,s=o.options,a="horizontal"==s.orientation,l=s.direction,d=c.support.isRtl(o.wrapper);return r=o.element.find(r),/^(top|bottom|default)$/.test(l)&&(l=d?a?(l+" left").replace("default","bottom"):"left":a?(l+" right").replace("default","bottom"):"right"),r.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),r.each(function(){var r=e(this);clearTimeout(r.data(A)),r.data(A,setTimeout(function(){var u,h,p,f,g,v,y,_,b=r.find(".k-menu-group:first:hidden");b[0]&&o._triggerEvent({item:r[0],type:C})===!1&&(!b.find(".k-menu-group")[0]&&b.children(".k-item").length>1?(h=e(window).height(),p=function(){b.css({maxHeight:h-(b.outerHeight()-b.height())-c.getShadows(b).bottom,overflow:"auto"})},c.support.browser.msie&&7>=c.support.browser.version?setTimeout(p,0):p()):b.css({maxHeight:"",overflow:""}),r.data(F,r.css(F)),r.css(F,o.nextItemZIndex++),u=b.data(W),f=r.parent().hasClass(S),g=f&&a,v=n(l,f,d),y=s.animation.open.effects,_=y!==t?y:"slideIn:"+i(l,f),u?(u=b.data(W),u.options.origin=v.origin,u.options.position=v.position,u.options.animation.open.effects=_):u=b.kendoPopup({activate:function(){o._triggerEvent({item:this.wrapper.parent(),type:z})},deactivate:function(e){e.sender.element.removeData("targetTransform").css({opacity:""}),o._triggerEvent({item:this.wrapper.parent(),type:H})},origin:v.origin,position:v.position,collision:s.popupCollision!==t?s.popupCollision:g?"fit":"fit flip",anchor:r,appendTo:r,animation:{open:m(!0,{effects:_},s.animation.open),close:s.animation.close},close:function(e){var t=e.sender.wrapper.parent();o._triggerEvent({item:t[0],type:M})?e.preventDefault():(t.css(F,t.data(F)),t.removeData(F),U&&(t.removeClass(q),o._removeHoverItem()))}}).data(W),b.removeAttr("aria-hidden"),u.open())},o.options.hoverDelay))}),o},close:function(t,i){var n=this,r=n.element;return t=r.find(t),t.length||(t=r.find(">.k-item")),t.each(function(){var t=e(this);!i&&n._isRootItem(t)&&(n.clicked=!1),clearTimeout(t.data(A)),t.data(A,setTimeout(function(){var e=t.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(W);e&&(e.close(),e.element.attr("aria-hidden",!0))},n.options.hoverDelay))}),n},_toggleDisabled:function(t,i){this.element.find(t).each(function(){e(this).toggleClass(j,i).toggleClass(Y,!i).attr("aria-disabled",!i)})},_toggleHover:function(t){var i=e(c.eventTarget(t)||t.target).closest(Z),n=t.type==L||-1!==p.indexOf(t.type);i.parents("li."+Y).length||i.toggleClass(q,n||"mousedown"==t.type||"click"==t.type),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(t){var i=this,n=e(t?t.currentTarget:this._hoverItem()),o=i._findRootParent(n)[0];this._closurePrevented||setTimeout(function(){(!document.hasFocus()||!r(o,c._activeElement())&&t&&!r(o,t.currentTarget))&&i.close(o)},0),this._closurePrevented=!1},_removeHoverItem:function(){var e=this._hoverItem();e&&e.hasClass(G)&&(e.removeClass(G),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element,i=".k-menu-init div ul";t.removeClass("k-menu-horizontal k-menu-vertical"),t.addClass("k-widget k-reset k-header k-menu-init "+S).addClass(S+"-"+this.options.orientation),t.find("li > ul").filter(function(){return!c.support.matchesSelector.call(this,i)}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",t.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),e=t.find("> li,.k-menu-group > li"),t.removeClass("k-menu-init"),e.each(function(){o(this)})},_mouseenter:function(t){var i=this,n=e(t.currentTarget),o=n.children(".k-animation-container").length||n.children(K).length;t.delegateTarget==n.parents(Q)[0]&&(i.options.openOnClick&&!i.clicked||h||(N||$)&&t.originalEvent.pointerType in se&&i._isRootItem(n.closest(Z))||!r(t.currentTarget,t.relatedTarget)&&o&&i.open(n),(i.options.openOnClick&&i.clicked||U)&&n.siblings().each(g(function(e,t){i.close(t,!0)},i)))},_mouseleave:function(i){var n=this,o=e(i.currentTarget),s=o.children(".k-animation-container").length||o.children(K).length;return o.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?(i.stopImmediatePropagation(),t):(n.options.openOnClick||h||(N||$)&&i.originalEvent.pointerType in se||r(i.currentTarget,i.relatedTarget||i.target)||!s||r(i.currentTarget,c._activeElement())||n.close(o),t)},_click:function(i){var n,r,o,s=this,a=s.options,l=e(c.eventTarget(i)),d=l[0]?l[0].nodeName.toUpperCase():"",u="INPUT"==d||"SELECT"==d||"BUTTON"==d||"LABEL"==d,h=l.closest("."+T),p=l.closest(Z),f=h.attr("href"),m=l.attr("href"),g=e("<a href='#' />").attr("href"),v=!!f&&f!==g,y=v&&!!f.match(/^#/),_=!!m&&m!==g,b=a.openOnClick&&o&&s._isRootItem(p);if(a.openOnClick||!p.children(oe)[0]){if(p.hasClass(Y))return i.preventDefault(),t;if(i.handled||!s._triggerEvent({item:p[0],type:P})||u||i.preventDefault(),i.handled=!0,r=p.children(X),o=r.is(":visible"),a.closeOnClick&&(!v||y)&&(!r.length||b))return p.removeClass(q).css("height"),s._oldHoverItem=s._findRootParent(p),s.close(h.parentsUntil(s.element,Z)),s.clicked=!1,-1!="MSPointerUp".indexOf(i.type)&&i.preventDefault(),t;v&&i.enterKey&&h[0].click(),(s._isRootItem(p)&&a.openOnClick||c.support.touch||(N||$)&&s._isRootItem(p.closest(Z)))&&(v||u||_||i.preventDefault(),s.clicked=!0,n=r.is(":visible")?M:C,(a.closeOnClick||n!=M)&&s[n](p))}},_documentClick:function(e){r(this.element[0],e.target)||(this.clicked=!1)},_focus:function(i){var n=this,r=i.target,o=n._hoverItem(),s=u();return r==n.wrapper[0]||e(r).is(":kendoFocusable")?(s===i.currentTarget&&(o.length?n._moveHover([],o):n._oldHoverItem||n._moveHover([],n.wrapper.children().first())),t):(i.stopPropagation(),e(r).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass(G),n.wrapper.focus(),t)},_keydown:function(e){var i,n,r,o=this,s=e.keyCode,a=o._oldHoverItem,l=c.support.isRtl(o.wrapper);if(e.target==e.currentTarget||s==_.ESC){if(a||(a=o._oldHoverItem=o._hoverItem()),n=o._itemBelongsToVertival(a),r=o._itemHasChildren(a),s==_.RIGHT)i=o[l?"_itemLeft":"_itemRight"](a,n,r);else if(s==_.LEFT)i=o[l?"_itemRight":"_itemLeft"](a,n,r);else if(s==_.DOWN)i=o._itemDown(a,n,r);else if(s==_.UP)i=o._itemUp(a,n,r);else if(s==_.ESC)i=o._itemEsc(a,n);else if(s==_.ENTER||s==_.SPACEBAR)i=a.children(".k-link"),i.length>0&&(o._click({target:i[0],preventDefault:function(){},enterKey:!0}),o._moveHover(a,o._findRootParent(a)));else if(s==_.TAB)return i=o._findRootParent(a),o._moveHover(a,i),o._checkActiveElement(),t;i&&i[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length?e.parent().hasClass("k-menu-group")||t:t},_itemHasChildren:function(e){return!!e.length&&e.children("ul.k-menu-group, div.k-animation-container").length>0},_moveHover:function(t,i){var n=this,r=n._ariaId;t.length&&i.length&&t.removeClass(G),i.length&&(i[0].id&&(r=i[0].id),i.addClass(G),n._oldHoverItem=i,r&&(n.element.removeAttr("aria-activedescendant"),e("#"+r).removeAttr("id"),i.attr("id",r),n.element.attr("aria-activedescendant",r)))},_findRootParent:function(e){return this._isRootItem(e)?e:e.parentsUntil(Q,"li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass(S)},_itemRight:function(e,t,i){var n,r,o=this;if(!e.hasClass(Y))return t?i?(o.open(e),n=e.find(".k-menu-group").children().first()):"horizontal"==o.options.orientation&&(r=o._findRootParent(e),o.close(r),n=r.nextAll(ne)):(n=e.nextAll(ne),n.length||(n=e.prevAll(re))),n&&!n.length?n=o.wrapper.children(".k-item").first():n||(n=[]),o._moveHover(e,n),n},_itemLeft:function(e,t){var i,n=this;return t?(i=e.parent().closest(".k-item"),n.close(i),n._isRootItem(i)&&"horizontal"==n.options.orientation&&(i=i.prevAll(ne))):(i=e.prevAll(ne),i.length||(i=e.nextAll(re))),i.length||(i=n.wrapper.children(".k-item").last()),n._moveHover(e,i),i},_itemDown:function(e,t,i){var n,r=this;if(t)n=e.nextAll(ne);else{if(!i||e.hasClass(Y))return;r.open(e),n=e.find(".k-menu-group").children().first()}return!n.length&&e.length?n=e.parent().children().first():e.length||(n=r.wrapper.children(".k-item").first()),r._moveHover(e,n),n},_itemUp:function(e,t){var i,n=this;if(t)return i=e.prevAll(ne),!i.length&&e.length?i=e.parent().children().last():e.length||(i=n.wrapper.children(".k-item").last()),n._moveHover(e,i),i},_itemEsc:function(e,t){var i,n=this;return t?(i=e.parent().closest(".k-item"),n.close(i),n._moveHover(e,i),i):e},_triggerEvent:function(e){var t=this;return t.trigger(e.type,{type:e.type,item:e.item})},
_focusHandler:function(t){var i=this,n=e(c.eventTarget(t)).closest(Z);setTimeout(function(){i._moveHover([],n),n.children(".k-content")[0]&&n.parent().closest(".k-item").removeClass(G)},200)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}});m(ce,{renderItem:function(e){e=m({menu:{},group:{}},e);var t=ae.empty,i=e.item;return ae.item(m(e,{image:i.imageUrl?ae.image:t,sprite:i.spriteCssClass?ae.sprite:t,itemWrapper:ae.itemWrapper,renderContent:ce.renderContent,arrow:i.items||i.content?ae.arrow:t,subGroup:ce.renderGroup},le))},renderGroup:function(e){return ae.group(m({renderItems:function(e){for(var t="",i=0,n=e.items,r=n?n.length:0,o=m({length:r},e.group);r>i;i++)t+=ce.renderItem(m(e,{group:o,item:m({index:i},n[i])}));return t}},e,le))},renderContent:function(e){return ae.content(m(e,le))}}),l=ce.extend({init:function(t,i){var n=this;ce.fn.init.call(n,t,i),n.target=e(n.options.target),n._popup(),n._wire()},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:!1,target:"body"},events:[C,M,z,H,P],setOptions:function(t){var i=this;ce.fn.setOptions.call(i,t),i.target.off(i.showOn+k,i._showProxy),i.userEvents&&i.userEvents.destroy(),i.target=e(i.options.target),t.orientation&&i.popup.wrapper[0]&&i.popup.element.unwrap(),i._wire(),ce.fn.setOptions.call(this,t)},destroy:function(){var e=this;e.target.off(e.options.showOn+k),V.off(c.support.mousedown+k,e._closeProxy),e.userEvents&&e.userEvents.destroy(),ce.fn.destroy.call(e)},open:function(i,n){var o=this;return i=e(i)[0],r(o.element[0],e(i)[0])?ce.fn.open.call(o,i):o._triggerEvent({item:o.element,type:C})===!1&&(o.popup.visible()&&o.options.filter&&o.popup.close(!0),n!==t?(o.popup.wrapper.hide(),o.popup.open(i,n)):(o.popup.options.anchor=(i?i:o.popup.anchor)||o.target,o.popup.open()),V.off(o.popup.downEvent,o.popup._mousedownProxy),V.on(c.support.mousedown+k,o._closeProxy)),o},close:function(){var t=this;r(t.element[0],e(arguments[0])[0])?ce.fn.close.call(t,arguments[0]):t.popup.visible()&&t._triggerEvent({item:t.element,type:M})===!1&&(t.popup.close(),V.off(c.support.mousedown+k,t._closeProxy),t.unbind(P,t._closeTimeoutProxy))},_showHandler:function(e){var t,i=e,n=this,o=n.options;e.event&&(i=e.event,i.pageX=e.x.location,i.pageY=e.y.location),r(n.element[0],e.relatedTarget||e.target)||(n._eventOrigin=i,i.preventDefault(),i.stopImmediatePropagation(),n.element.find("."+G).removeClass(G),(o.filter&&c.support.matchesSelector.call(i.currentTarget,o.filter)||!o.filter)&&(o.alignToAnchor?n.open(i.currentTarget):(n.popup.options.anchor=i.currentTarget,n._targetChild?(t=n.target.offset(),n.open(i.pageX-t.left,i.pageY-t.top)):n.open(i.pageX,i.pageY))))},_closeHandler:function(t){var i=this,n=e(t.relatedTarget||t.target),o=n.closest(i.target.selector)[0]==i.target[0],s=n.closest(ee).children(X),a=r(i.element[0],n[0]);i._eventOrigin=t,!i.popup.visible()||(3===t.which||!o)&&o||(!i.options.closeOnClick||h||(N||$)&&t.originalEvent.pointerType in se||s[0]||!a)&&a||(a?(this.unbind(P,this._closeTimeoutProxy),i.bind(P,i._closeTimeoutProxy)):i.close())},_wire:function(){var e=this,t=e.options,i=e.target;e._showProxy=g(e._showHandler,e),e._closeProxy=g(e._closeHandler,e),e._closeTimeoutProxy=g(e.close,e),i[0]&&(c.support.mobileOS&&"contextmenu"==t.showOn?(e.userEvents=new c.UserEvents(i,{filter:t.filter,allowSelection:!1}),i.on(t.showOn+k,!1),e.userEvents.bind("hold",e._showProxy)):t.filter?i.on(t.showOn+k,t.filter,e._showProxy):i.on(t.showOn+k,e._showProxy))},_triggerEvent:function(i){var n=this,r=e(n.popup.options.anchor)[0],o=n._eventOrigin;return n._eventOrigin=t,n.trigger(i.type,m({type:i.type,item:i.item||this.element[0],target:r},o?{event:o}:{}))},_popup:function(){var e=this;e._triggerProxy=g(e._triggerEvent,e),e.popup=e.element.addClass("k-context-menu").kendoPopup({anchor:e.target||"body",copyAnchorStyles:e.options.copyAnchorStyles,collision:e.options.popupCollision||"fit",animation:e.options.animation,activate:e._triggerProxy,deactivate:e._triggerProxy}).data("kendoPopup"),e._targetChild=r(e.target[0],e.popup.element[0])}}),d.plugin(ce),d.plugin(l)}(window.kendo.jQuery),function(e,t){function i(t){return e.trim(t).replace(/&nbsp;/gi,"")}function n(e,t){var i,n,r,o={};for(i=0,n=e.length;n>i;i++)r=e[i],o[r[t]]=r;return o}function r(e){var t,i=[];for(t=0;e.length>t;t++)e[t].columns?i=i.concat(r(e[t].columns)):i.push(e[t]);return i}var o=window.kendo,s=o.ui,a=e.proxy,l=e.extend,c=e.grep,d=e.map,u=e.inArray,h="k-state-selected",p="asc",f="desc",m="change",g="init",v="select",y="kendoPopup",_="kendoFilterMenu",b="kendoMenu",w=".kendoColumnMenu",k=s.Widget,x=k.extend({init:function(t,i){var n,r=this;k.fn.init.call(r,t,i),t=r.element,i=r.options,r.owner=i.owner,r.dataSource=i.dataSource,r.field=t.attr(o.attr("field")),r.title=t.attr(o.attr("title")),n=t.find(".k-header-column-menu"),n[0]||(n=t.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s"/></a>').find(".k-header-column-menu")),r.link=n.attr("tabindex",-1).on("click"+w,a(r._click,r)),r.wrapper=e('<div class="k-column-menu"/>')},_init:function(){var e=this;e.pane=e.options.pane,e.pane&&(e._isMobile=!0),e._isMobile?e._createMobileMenu():e._createMenu(),e._angularItems("compile"),e._sort(),e._columns(),e._filter(),e._lockColumns(),e.trigger(g,{field:e.field,container:e.wrapper})},events:[g],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",done:"Done",settings:"Column Settings",lock:"Lock",unlock:"Unlock"},filter:"",columns:!0,sortable:!0,filterable:!0,animations:{left:"slide"}},_createMenu:function(){var e=this,t=e.options;e.wrapper.html(o.template(C)({ns:o.ns,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns})),e.popup=e.wrapper[y]({anchor:e.link,open:a(e._open,e),activate:a(e._activate,e),close:function(){e.options.closeCallback&&e.options.closeCallback(e.element)}}).data(y),e.menu=e.wrapper.children()[b]({orientation:"vertical",closeOnClick:!1}).data(b)},_createMobileMenu:function(){var e=this,t=e.options,i=o.template(S)({ns:o.ns,field:e.field,title:e.title||e.field,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns});e.view=e.pane.append(i),e.wrapper=e.view.element.find(".k-column-menu"),e.menu=new T(e.wrapper.children(),{pane:e.pane}),e.view.element.on("click",".k-done",function(t){e.close(),t.preventDefault()}),e.options.lockedColumns&&e.view.bind("show",function(){e._updateLockedColumns()})},_angularItems:function(t){var i=this;i.angular(t,function(){var t=i.wrapper.find(".k-columns-item input["+o.attr("field")+"]").map(function(){return e(this).closest("li")}),n=d(i._ownerColumns(),function(e){return{column:e._originalObject}});return{elements:t,data:n}})},destroy:function(){var e=this;e._angularItems("cleanup"),k.fn.destroy.call(e),e.filterMenu&&e.filterMenu.destroy(),e._refreshHandler&&e.dataSource.unbind(m,e._refreshHandler),e.options.columns&&e.owner&&e._updateColumnsMenuHandler&&(e.owner.unbind("columnShow",e._updateColumnsMenuHandler),e.owner.unbind("columnHide",e._updateColumnsMenuHandler)),e.menu&&(e.menu.element.off(w),e.menu.destroy()),e.wrapper.off(w),e.popup&&e.popup.destroy(),e.view&&e.view.purge(),e.link.off(w),e.owner=null,e.wrapper=null,e.element=null},close:function(){this.menu.close(),this.popup&&(this.popup.close(),this.popup.element.off("keydown"+w))},_click:function(e){e.preventDefault(),e.stopPropagation();var t=this.options;t.filter&&this.element.is(!t.filter)||(this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle())},_open:function(){var t=this;e(".k-column-menu").not(t.wrapper).each(function(){e(this).data(y).close()}),t.popup.element.on("keydown"+w,function(e){e.keyCode==o.keys.ESC&&t.close()}),t.options.lockedColumns&&t._updateLockedColumns()},_activate:function(){this.menu.element.focus()},_ownerColumns:function(){var e=r(this.owner.columns),t=c(e,function(e){var t=!0,n=i(e.title||"");return(e.menu===!1||!e.field&&!n.length)&&(t=!1),t});return d(t,function(t){return{originalField:t.field,field:t.field||t.title,title:t.title||t.field,hidden:t.hidden,index:u(t,e),locked:!!t.locked,_originalObject:t}})},_sort:function(){var t=this;t.options.sortable&&(t.refresh(),t._refreshHandler=a(t.refresh,t),t.dataSource.bind(m,t._refreshHandler),t.menu.bind(v,function(i){var n,r=e(i.item);r.hasClass("k-sort-asc")?n=p:r.hasClass("k-sort-desc")&&(n=f),n&&(r.parent().find(".k-sort-"+(n==p?f:p)).removeClass(h),t._sortDataSource(r,n),t.close())}))},_sortDataSource:function(e,i){var n,r,o=this,s=o.options.sortable,a=null===s.compare?t:s.compare,l=o.dataSource,c=l.sort()||[];if(e.hasClass(h)&&s&&s.allowUnsort!==!1?(e.removeClass(h),i=t):e.addClass(h),s===!0||"single"===s.mode)c=[{field:o.field,dir:i,compare:a}];else{for(n=0,r=c.length;r>n;n++)if(c[n].field===o.field){c.splice(n,1);break}c.push({field:o.field,dir:i,compare:a})}l.sort(c)},_columns:function(){var t=this;t.options.columns&&(t._updateColumnsMenu(),t._updateColumnsMenuHandler=a(t._updateColumnsMenu,t),t.owner.bind(["columnHide","columnShow"],t._updateColumnsMenuHandler),t.menu.bind(v,function(i){var n,s,a,l=e(i.item),d=r(t.owner.columns);t._isMobile&&i.preventDefault(),l.parent().closest("li.k-columns-item")[0]&&(n=l.find(":checkbox"),n.attr("disabled")||(a=n.attr(o.attr("field")),s=c(d,function(e){return e.field==a||e.title==a})[0],s.hidden===!0?t.owner.showColumn(s):t.owner.hideColumn(s)))}))},_updateColumnsMenu:function(){var e,t,i,n,r,s,a=o.attr("field"),l=o.attr("locked"),h=c(this._ownerColumns(),function(e){return!e.hidden}),p=c(h,function(e){return e.originalField}),f=c(p,function(e){return e.locked===!0}).length,m=c(p,function(e){return e.locked!==!0}).length;for(h=d(h,function(e){return e.field}),s=this.wrapper.find(".k-columns-item input["+a+"]").prop("disabled",!1).prop("checked",!1),e=0,t=s.length;t>e;e++)i=s.eq(e),r="true"===i.attr(l),n=!1,u(i.attr(a),h)>-1&&(n=!0,i.prop("checked",n)),n&&(1==f&&r&&i.prop("disabled",!0),1!=m||r||i.prop("disabled",!0))},_updateColumnsLockedState:function(){var e,t,i,r,s=o.attr("field"),a=o.attr("locked"),l=n(this._ownerColumns(),"field"),c=this.wrapper.find(".k-columns-item input[type=checkbox]");for(e=0,t=c.length;t>e;e++)i=c.eq(e),r=l[i.attr(s)],r&&i.attr(a,r.locked);this._updateColumnsMenu()},_filter:function(){var t=this,i=t.options;i.filterable!==!1&&(t.filterMenu=t.wrapper.find(".k-filterable")[_](l(!0,{},{appendToElement:!0,dataSource:i.dataSource,values:i.values,field:t.field},i.filterable)).data(_),t._isMobile&&t.menu.bind(v,function(i){var n=e(i.item);n.hasClass("k-filter-item")&&t.pane.navigate(t.filterMenu.view,t.options.animations.left)}))},_lockColumns:function(){var t=this;t.menu.bind(v,function(i){var n=e(i.item);n.hasClass("k-lock")?(t.owner.lockColumn(t.field),t.close()):n.hasClass("k-unlock")&&(t.owner.unlockColumn(t.field),t.close())})},_updateLockedColumns:function(){var e,t,i,n,r=this.field,o=this.owner.columns,s=c(o,function(e){return e.field==r||e.title==r})[0];s&&(e=s.locked===!0,t=c(o,function(t){return!t.hidden&&(t.locked&&e||!t.locked&&!e)}).length,i=this.wrapper.find(".k-lock").removeClass("k-state-disabled"),n=this.wrapper.find(".k-unlock").removeClass("k-state-disabled"),(e||1==t)&&i.addClass("k-state-disabled"),e&&1!=t||n.addClass("k-state-disabled"),this._updateColumnsLockedState())},refresh:function(){var e,t,i,n=this,r=n.options.dataSource.sort()||[],o=n.field;for(n.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(h),t=0,i=r.length;i>t;t++)e=r[t],o==e.field&&n.wrapper.find(".k-sort-"+e.dir).addClass(h)}}),C='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>',S='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-sprite k-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>',T=k.extend({init:function(e,t){k.fn.init.call(this,e,t),this.element.on("click"+w,"li:not(.k-separator):not(.k-state-disabled)","_click")},events:[v],_click:function(e){e.preventDefault(),this.trigger(v,{item:e.currentTarget})},close:function(){this.options.pane.navigate("")},destroy:function(){k.fn.destroy.call(this),this.element.off(w)}});s.plugin(x)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,r=n.Widget,o="dir",s="asc",a="single",l="field",c="desc",d=".kendoColumnSorter",u=".k-link",h="aria-sort",p=e.proxy,f=r.extend({init:function(e,t){var i,n=this;r.fn.init.call(n,e,t),n._refreshHandler=p(n.refresh,n),n.dataSource=n.options.dataSource.bind("change",n._refreshHandler),i=n.element.find(u),i[0]||(i=n.element.wrapInner('<a class="k-link" href="#"/>').find(u)),n.link=i,n.element.on("click"+d,p(n._click,n))},options:{name:"ColumnSorter",mode:a,allowUnsort:!0,compare:null,filter:""},destroy:function(){var e=this;r.fn.destroy.call(e),e.element.off(d),e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=e.element=e.link=e.dataSource=null},refresh:function(){var t,n,r,a,d=this,u=d.dataSource.sort()||[],p=d.element,f=p.attr(i.attr(l));for(p.removeAttr(i.attr(o)),p.removeAttr(h),t=0,n=u.length;n>t;t++)r=u[t],f==r.field&&p.attr(i.attr(o),r.dir);a=p.attr(i.attr(o)),p.find(".k-i-arrow-n,.k-i-arrow-s").remove(),a===s?(e('<span class="k-icon k-i-arrow-n" />').appendTo(d.link),p.attr(h,"ascending")):a===c&&(e('<span class="k-icon k-i-arrow-s" />').appendTo(d.link),p.attr(h,"descending"))},_click:function(e){var n,r,d=this,u=d.element,h=u.attr(i.attr(l)),p=u.attr(i.attr(o)),f=d.options,m=null===d.options.compare?t:d.options.compare,g=d.dataSource.sort()||[];if(e.preventDefault(),!f.filter||u.is(f.filter)){if(p=p===s?c:p===c&&f.allowUnsort?t:s,f.mode===a)g=[{field:h,dir:p,compare:m}];else if("multiple"===f.mode){for(n=0,r=g.length;r>n;n++)if(g[n].field===h){g.splice(n,1);break}g.push({field:h,dir:p,compare:m})}this.dataSource.sort(g)}}});n.plugin(f)}(window.kendo.jQuery),function(e,t){function i(t){return t=null!=t?t:"",t.type||e.type(t)||"string"}function n(t){t.find(":input:not(:button, ["+a.attr("role")+"=upload], ["+a.attr("skip")+"], [type=file]), select").each(function(){var t=a.attr("bind"),i=this.getAttribute(t)||"",n="checkbox"===this.type||"radio"===this.type?"checked:":"value:",r=this.name;-1===i.indexOf(n)&&r&&(i+=(i.length?",":"")+n+r,e(this).attr(t,i))})}function r(e){var t,n,r=(e.model.fields||e.model)[e.field],o=i(r),s=r?r.validation:{},l=a.attr("type"),c=a.attr("bind"),d={name:e.field};for(t in s)n=s[t],f(t,y)>=0?d[l]=t:h(n)||(d[t]=p(n)?n.value||t:n),d[a.attr(t+"-msg")]=n.message;return f(o,y)>=0&&(d[l]=o),d[c]=("boolean"===o?"checked:":"value:")+e.field,d}function o(e){var t,i,n,r,o,s;if(e&&e.length)for(s=[],t=0,i=e.length;i>t;t++)n=e[t],o=n.text||n.value||n,r=null==n.value?n.text||n:n.value,s[t]={text:o,value:r};return s}function s(e,t){var i,n,r=e?e.validation||{}:{};for(i in r)n=r[i],p(n)&&n.value&&(n=n.value),h(n)&&(t[i]=n)}var a=window.kendo,l=a.ui,c=l.Widget,d=e.extend,u=a.support.browser.msie&&9>a.support.browser.version,h=a.isFunction,p=e.isPlainObject,f=e.inArray,m=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,g='<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>',v="change",y=["url","email","number","date","boolean"],_={number:function(t,i){var n=r(i);e('<input type="text"/>').attr(n).appendTo(t).kendoNumericTextBox({format:i.format}),e("<span "+a.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},date:function(t,i){var n=r(i),o=i.format;o&&(o=a._extractFormat(o)),n[a.attr("format")]=o,e('<input type="text"/>').attr(n).appendTo(t).kendoDatePicker({format:i.format}),e("<span "+a.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},string:function(t,i){var n=r(i);e('<input type="text" class="k-input k-textbox"/>').attr(n).appendTo(t)},boolean:function(t,i){var n=r(i);e('<input type="checkbox" />').attr(n).appendTo(t)},values:function(t,i){var n=r(i);e("<select "+a.attr("text-field")+'="text"'+a.attr("value-field")+'="value"'+a.attr("source")+"='"+a.stringify(o(i.values)).replace(/\'/g,"&apos;")+"'"+a.attr("role")+'="dropdownlist"/>').attr(n).appendTo(t),e("<span "+a.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)}},b=c.extend({init:function(t,i){var n=this;i.target&&(i.$angular=i.target.options.$angular),c.fn.init.call(n,t,i),n._validateProxy=e.proxy(n._validate,n),n.refresh()},events:[v],options:{name:"Editable",editors:_,clearContainer:!0,errorTemplate:g},editor:function(e,t){var n=this,r=n.options.editors,o=p(e),s=o?e.field:e,l=n.options.model||{},c=o&&e.values,u=c?"values":i(t),h=o&&e.editor,f=h?e.editor:r[u],g=n.element.find("["+a.attr("container-for")+"="+s.replace(m,"\\$1")+"]");f=f?f:r.string,h&&"string"==typeof e.editor&&(f=function(t){t.append(e.editor)}),g=g.length?g:n.element,f(g,d(!0,{},o?e:{field:s},{model:l}))},_validate:function(t){var i,n=this,r=t.value,o=n._validationEventInProgress,s={},l=a.attr("bind"),c=t.field.replace(m,"\\$1"),d="checked:"+c,u="value:"+c;s[t.field]=t.value,i=e(":input["+l+'*="'+u+'"],:input['+l+'*="'+d+'"]',n.element).filter("["+a.attr("validate")+"!='false']"),i.length>1&&(i=i.filter(function(){var t=e(this),i=t.attr(l).split(","),n=f(u,i)>=0||f(d,i)>=0;return n&&(!t.is(":radio")||t.val()==r)}));try{n._validationEventInProgress=!0,(!n.validatable.validateInput(i)||!o&&n.trigger(v,{values:s}))&&t.preventDefault()}finally{n._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element}}),c.fn.destroy.call(e),e.options.model.unbind("set",e._validateProxy),a.unbind(e.element),e.validatable&&e.validatable.destroy(),a.destroy(e.element),e.element.removeData("kendoValidator")},refresh:function(){var i,r,o,l,c,d,h,f,m=this,g=m.options.fields||[],v=m.options.clearContainer?m.element.empty():m.element,y=m.options.model||{},_={};for(e.isArray(g)||(g=[g]),i=0,r=g.length;r>i;i++)o=g[i],l=p(o),c=l?o.field:o,d=(y.fields||y)[c],s(d,_),m.editor(o,d);if(m.options.target&&m.angular("compile",function(){return{elements:v,data:[{dataItem:y}]}}),!r){h=y.fields||y;for(c in h)s(h[c],_)}n(v),m.validatable&&m.validatable.destroy(),a.bind(v,m.options.model),m.options.model.unbind("set",m._validateProxy),m.options.model.bind("set",m._validateProxy),m.validatable=new a.ui.Validator(v,{validateOnBlur:!1,errorTemplate:m.options.errorTemplate||t,rules:_}),f=v.find(":kendoFocusable").eq(0).focus(),u&&f.focus()}});l.plugin(b)}(window.kendo.jQuery),function(e,t){function i(e){return t!==e}function n(e,t,i){return Math.max(Math.min(parseInt(e,10),1/0===i?i:parseInt(i,10)),parseInt(t,10))}function r(e,t){return function(){var i=this,n=i.wrapper,r=n[0].style,o=i.options;if(!o.isMaximized&&!o.isMinimized)return i.restoreOptions={width:r.width,height:r.height},n.children(x).hide().end().children(w).find(j).parent().hide().eq(0).before(J.action({name:"Restore"})),t.call(i),"maximize"==e?i.wrapper.children(w).find(Y).parent().hide():i.wrapper.children(w).find(Y).parent().show(),i}}function o(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function s(e){var t=this;t.owner=e,t._draggable=new d(e.wrapper,{filter:">"+x,group:e.wrapper.id+"-resizing",dragstart:p(t.dragstart,t),drag:p(t.drag,t),dragend:p(t.dragend,t)}),t._draggable.userEvents.bind("press",p(t.addOverlay,t)),t._draggable.userEvents.bind("release",p(t.removeOverlay,t))}function a(e,t){var i=this;i.owner=e,i._draggable=new d(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:p(i.dragstart,i),drag:p(i.drag,i),dragend:p(i.dragend,i),dragcancel:p(i.dragcancel,i)}),i._draggable.userEvents.stopPropagation=!1}var l=window.kendo,c=l.ui.Widget,d=l.ui.Draggable,u=e.isPlainObject,h=l._activeElement,p=e.proxy,f=e.extend,m=e.each,g=l.template,v="body",y=".kendoWindow",_=".k-window",b=".k-window-title",w=b+"bar",k=".k-window-content",x=".k-resize-handle",C=".k-overlay",S="k-content-frame",T="k-loading",D="k-state-hover",M="k-state-focused",A="k-window-maximized",E=":visible",I="hidden",P="cursor",F="open",z="activate",H="deactivate",R="close",N="refresh",$="resize",O="resizeEnd",L="dragstart",B="dragend",U="error",V="overflow",W="zIndex",j=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",q=".k-i-pin",G=".k-i-unpin",Y=q+","+G,Q=".k-window-titlebar .k-window-action",K=".k-window-titlebar .k-i-refresh",X=l.isLocalUrl,Z=c.extend({init:function(n,r){var s,a,d,h,f,m,g,v=this,x={},C=!1,S=r&&r.actions&&!r.actions.length;c.fn.init.call(v,n,r),r=v.options,h=r.position,n=v.element,f=r.content,S&&(r.actions=[]),v.appendTo=e(r.appendTo),v._animations(),f&&!u(f)&&(f=r.content={url:f}),n.find("script").filter(o).remove(),n.parent().is(v.appendTo)||h.top!==t&&h.left!==t||(n.is(E)?(x=n.offset(),C=!0):(a=n.css("visibility"),d=n.css("display"),n.css({visibility:I,display:""}),x=n.offset(),n.css({visibility:a,display:d})),h.top===t&&(h.top=x.top),h.left===t&&(h.left=x.left)),i(r.visible)&&null!==r.visible||(r.visible=n.is(E)),s=v.wrapper=n.closest(_),n.is(".k-content")&&s[0]||(n.addClass("k-window-content k-content"),v._createWindow(n,r),s=v.wrapper=n.closest(_),v._dimensions()),v._position(),r.pinned&&v.pin(!0),f&&v.refresh(f),r.visible&&v.toFront(),m=s.children(k),v._tabindex(m),r.visible&&r.modal&&v._overlay(s.is(E)).css({opacity:.5}),s.on("mouseenter"+y,Q,p(v._buttonEnter,v)).on("mouseleave"+y,Q,p(v._buttonLeave,v)).on("click"+y,"> "+Q,p(v._windowActionHandler,v)),m.on("keydown"+y,p(v._keydown,v)).on("focus"+y,p(v._focus,v)).on("blur"+y,p(v._blur,v)),this._resizable(),this._draggable(),g=n.attr("id"),g&&(g+="_wnd_title",s.children(w).children(b).attr("id",g),m.attr({role:"dialog","aria-labelledby":g})),s.add(s.children(".k-resize-handle,"+w)).on("mousedown"+y,p(v.toFront,v)),v.touchScroller=l.touchScroller(n),v._resizeHandler=p(v._onDocumentResize,v),v._marker=l.guid().substring(0,8),e(window).on("resize"+y+v._marker,v._resizeHandler),r.visible&&(v.trigger(F),v.trigger(z)),l.notify(v)},_buttonEnter:function(t){e(t.currentTarget).addClass(D)},_buttonLeave:function(t){e(t.currentTarget).removeClass(D)},_focus:function(){this.wrapper.addClass(M)},_blur:function(){this.wrapper.removeClass(M)},_dimensions:function(){var e,t,i=this.wrapper,r=this.options,o=r.width,s=r.height,a=r.maxHeight,l=["minWidth","minHeight","maxWidth","maxHeight"];for(this.title(r.title),e=0;l.length>e;e++)t=r[l[e]],t&&1/0!=t&&i.css(l[e],t);a&&1/0!=a&&this.element.css("maxHeight",a),o&&i.width((""+o).indexOf("%")>0?o:n(o,r.minWidth,r.maxWidth)),s&&i.height((""+s).indexOf("%")>0?s:n(s,r.minHeight,r.maxHeight)),r.visible||i.hide()},_position:function(){var e=this.wrapper,t=this.options.position;0===t.top&&(t.top=""+t.top),0===t.left&&(t.left=""+t.left),e.css({top:t.top||"",left:t.left||""})},_animations:function(){var e=this.options;e.animation===!1&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},_resize:function(){l.resize(this.element.children())},_resizable:function(){var t=this.options.resizable,i=this.wrapper;this.resizing&&(i.off("dblclick"+y).children(x).remove(),this.resizing.destroy(),this.resizing=null),t&&(i.on("dblclick"+y,w,p(function(t){e(t.target).closest(".k-window-action").length||this.toggleMaximization()},this)),m("n e s w se sw ne nw".split(" "),function(e,t){i.append(J.resizeHandle(t))}),this.resizing=new s(this)),i=null},_draggable:function(){var e=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),e&&(this.dragging=new a(this,e.dragHandle||w))},_actions:function(){var t=this.options.actions,i=this.wrapper.children(w),n=i.find(".k-window-actions");t=e.map(t,function(e){return{name:e}}),n.html(l.render(J.action,t))},setOptions:function(e){c.fn.setOptions.call(this,e),this._animations(),this._dimensions(),this._position(),this._resizable(),this._draggable(),this._actions()},events:[F,z,H,R,N,$,O,L,B,U],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,position:{},content:null,visible:null,height:null,width:null,appendTo:"body"},_closable:function(){return e.inArray("close",e.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydown:function(e){var t,i,r,o,s,a,c=this,d=c.options,u=l.keys,h=e.keyCode,p=c.wrapper,f=10,m=c.options.isMaximized;e.target!=e.currentTarget||c._closing||(h==u.ESC&&c._closable()&&c._close(!1),!d.draggable||e.ctrlKey||m||(t=l.getOffset(p),h==u.UP?i=p.css("top",t.top-f):h==u.DOWN?i=p.css("top",t.top+f):h==u.LEFT?i=p.css("left",t.left-f):h==u.RIGHT&&(i=p.css("left",t.left+f))),d.resizable&&e.ctrlKey&&!m&&(h==u.UP?(i=!0,o=p.height()-f):h==u.DOWN&&(i=!0,o=p.height()+f),h==u.LEFT?(i=!0,r=p.width()-f):h==u.RIGHT&&(i=!0,r=p.width()+f),i&&(s=n(r,d.minWidth,d.maxWidth),a=n(o,d.minHeight,d.maxHeight),isNaN(s)||(p.width(s),c.options.width=s+"px"),isNaN(a)||(p.height(a),c.options.height=a+"px"),c.resize())),i&&e.preventDefault())},_overlay:function(t){var i=this.appendTo.children(C),n=this.wrapper;return i.length||(i=e("<div class='k-overlay' />")),i.insertBefore(n[0]).toggle(t).css(W,parseInt(n.css(W),10)-1),i},_actionForIcon:function(e){var t=/\bk-i-\w+\b/.exec(e[0].className)[0];return{"k-i-close":"_close","k-i-maximize":"maximize","k-i-minimize":"minimize","k-i-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[t]},_windowActionHandler:function(i){var n,r;if(!this._closing)return n=e(i.target).closest(".k-window-action").find(".k-icon"),r=this._actionForIcon(n),r?(i.preventDefault(),this[r](),!1):t},_modals:function(){var t=this,i=e(_).filter(function(){var i=e(this),n=t._object(i),r=n&&n.options;return r&&r.modal&&r.visible&&i.is(E)}).sort(function(t,i){return+e(t).css("zIndex")-+e(i).css("zIndex")});return t=null,i},_object:function(e){var t=e.children(k);return t.data("kendoWindow")||t.data("kendo"+this.options.name)},center:function(){var t,i,n=this,r=n.options.position,o=n.wrapper,s=e(window),a=0,l=0;return n.options.isMaximized?n:(n.options.pinned||(a=s.scrollTop(),l=s.scrollLeft()),i=l+Math.max(0,(s.width()-o.width())/2),t=a+Math.max(0,(s.height()-o.height()-parseInt(o.css("paddingTop"),10))/2),o.css({left:i,top:t}),r.top=t,r.left=i,n)},title:function(e){var t,i=this,n=i.wrapper,r=i.options,o=n.children(w),s=o.children(b);return arguments.length?(e===!1?(n.addClass("k-window-titleless"),o.remove()):(o.length?s.html(e):(n.prepend(J.titlebar(r)),i._actions(),o=n.children(w)),t=o.outerHeight(),n.css("padding-top",t),o.css("margin-top",-t)),i.options.title=e,i):s.text()},content:function(e,t){var n=this.wrapper.children(k),r=n.children(".km-scroll-container");return n=r[0]?r:n,i(e)?(this.angular("cleanup",function(){return{elements:n.children()}}),l.destroy(this.element.children()),n.empty().html(e),this.angular("compile",function(){var e,i=[];for(e=n.length;--e>=0;)i.push({dataItem:t});return{elements:n.children(),data:i}}),this):n.html()},open:function(){var t,i,n=this,r=n.wrapper,o=n.options,s=o.animation.open,a=r.children(k);return n.trigger(F)||(n._closing&&r.kendoStop(!0,!0),n._closing=!1,n.toFront(),o.autoFocus&&n.element.focus(),o.visible=!0,o.modal&&(t=n._overlay(!1),t.kendoStop(!0,!0),s.duration&&l.effects.Fade?(i=l.fx(t).fadeIn(),i.duration(s.duration||0),i.endValue(.5),i.play()):t.css("opacity",.5),t.show()),r.is(E)||(a.css(V,I),r.show().kendoStop().kendoAnimate({effects:s.effects,duration:s.duration,complete:p(this._activate,this)}))),o.isMaximized&&(n._documentScrollTop=e(document).scrollTop(),e("html, body").css(V,I)),n},_activate:function(){this.options.autoFocus&&this.element.focus(),this.trigger(z),this.wrapper.children(k).css(V,"")},_removeOverlay:function(i){var n,r=this._modals(),o=this.options,s=o.modal&&!r.length,a=o.modal?this._overlay(!0):e(t),c=o.animation.close;s?!i&&c.duration&&l.effects.Fade?(n=l.fx(a).fadeOut(),n.duration(c.duration||0),n.startValue(.5),n.play()):this._overlay(!1).remove():r.length&&this._object(r.last())._overlay(!0)},_close:function(t){var i=this,n=i.wrapper,r=i.options,o=r.animation.open,s=r.animation.close;if(n.is(E)&&!i.trigger(R,{userTriggered:!t})){if(i._closing)return;i._closing=!0,r.visible=!1,e(_).each(function(t,i){var r=e(i).children(k);i!=n&&r.find("> ."+S).length>0&&r.children(C).remove()}),this._removeOverlay(),n.kendoStop().kendoAnimate({effects:s.effects||o.effects,reverse:s.reverse===!0,duration:s.duration,complete:p(this._deactivate,this)})}i.options.isMaximized&&(e("html, body").css(V,""),i._documentScrollTop&&i._documentScrollTop>0&&e(document).scrollTop(i._documentScrollTop))},_deactivate:function(){this.wrapper.hide().css("opacity",""),this.trigger(H);var e=this._object(this._modals().last());e&&e.toFront()},close:function(){return this._close(!0),this},_actionable:function(t){return e(t).is(Q+","+Q+" .k-icon,:input,a")},_shouldFocus:function(t){var i=h(),n=this.element;return!(!this.options.autoFocus||e(i).is(n)||this._actionable(t)||n.find(i).length&&n.find(t).length);
},toFront:function(t){var i,n,r=this,o=r.wrapper,s=o[0],a=+o.css(W),l=a,c=t&&t.target||null;return e(_).each(function(t,i){var n=e(i),r=n.css(W),o=n.children(k);isNaN(r)||(a=Math.max(+r,a)),i!=s&&o.find("> ."+S).length>0&&o.append(J.overlay)}),(!o[0].style.zIndex||a>l)&&o.css(W,a+2),r.element.find("> .k-overlay").remove(),r._shouldFocus(c)&&(r.element.focus(),i=e(window).scrollTop(),n=parseInt(o.position().top,10),n>0&&i>n&&(i>0?e(window).scrollTop(n):o.css("top",i))),o=null,r},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this,i=t.options,n=i.minHeight,r=t.restoreOptions;return i.isMaximized||i.isMinimized?(n&&1/0!=n&&t.wrapper.css("min-height",n),t.wrapper.css({position:i.pinned?"fixed":"absolute",left:r.left,top:r.top,width:r.width,height:r.height}).removeClass(A).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(j).parent().show().end().end().find(Y).parent().show(),t.options.width=r.width,t.options.height=r.height,e("html, body").css(V,""),this._documentScrollTop&&this._documentScrollTop>0&&e(document).scrollTop(this._documentScrollTop),i.isMaximized=i.isMinimized=!1,t.resize(),t):t},maximize:r("maximize",function(){var t=this,i=t.wrapper,n=i.position();f(t.restoreOptions,{left:n.left,top:n.top}),i.css({left:0,top:0,position:"fixed"}).addClass(A),this._documentScrollTop=e(document).scrollTop(),e("html, body").css(V,I),t.options.isMaximized=!0,t._onDocumentResize()}),minimize:r("minimize",function(){var e=this;e.wrapper.css({height:"",minHeight:""}),e.element.hide(),e.options.isMinimized=!0}),pin:function(t){var i=this,n=e(window),r=i.wrapper,o=parseInt(r.css("top"),10),s=parseInt(r.css("left"),10);(t||!i.options.pinned&&!i.options.isMaximized)&&(r.css({position:"fixed",top:o-n.scrollTop(),left:s-n.scrollLeft()}),r.children(w).find(q).addClass("k-i-unpin").removeClass("k-i-pin"),i.options.pinned=!0)},unpin:function(){var t=this,i=e(window),n=t.wrapper,r=parseInt(n.css("top"),10),o=parseInt(n.css("left"),10);t.options.pinned&&!t.options.isMaximized&&(n.css({position:"",top:r+i.scrollTop(),left:o+i.scrollLeft()}),n.children(w).find(G).addClass("k-i-pin").removeClass("k-i-unpin"),t.options.pinned=!1)},_onDocumentResize:function(){var t,i,n=this,r=n.wrapper,o=e(window);n.options.isMaximized&&(t=o.width(),i=o.height()-parseInt(r.css("padding-top"),10),r.css({width:t,height:i}),n.options.width=t,n.options.height=i,n.resize())},refresh:function(t){var n,r,o,s=this,a=s.options,l=e(s.element);return u(t)||(t={url:t}),t=f({},a.content,t),r=i(a.iframe)?a.iframe:t.iframe,o=t.url,o?(i(r)||(r=!X(o)),r?(n=l.find("."+S)[0],n?n.src=o||n.src:l.html(J.contentFrame(f({},a,{content:t}))),l.find("."+S).unbind("load"+y).on("load"+y,p(this._triggerRefresh,this))):s._ajaxRequest(t)):(t.template&&s.content(g(t.template)({})),s.trigger(N)),l.toggleClass("k-window-iframecontent",!!r),s},_triggerRefresh:function(){this.trigger(N)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(K).removeClass(T)},_ajaxError:function(e,t){this.trigger(U,{status:t,xhr:e})},_ajaxSuccess:function(e){return function(t){var i=t;e&&(i=g(e)(t||{})),this.content(i,t),this.element.prop("scrollTop",0),this.trigger(N)}},_showLoading:function(){this.wrapper.find(K).addClass(T)},_ajaxRequest:function(t){this._loadingIconTimeout=setTimeout(p(this._showLoading,this),100),e.ajax(f({type:"GET",dataType:"html",cache:!1,error:p(this._ajaxError,this),complete:p(this._ajaxComplete,this),success:p(this._ajaxSuccess(t.template),this)},t))},destroy:function(){var i=this;i.resizing&&i.resizing.destroy(),i.dragging&&i.dragging.destroy(),i.wrapper.off(y).children(k).off(y).end().find(".k-resize-handle,.k-window-titlebar").off(y),e(window).off("resize"+y+i._marker),clearTimeout(i._loadingIconTimeout),c.fn.destroy.call(i),i.unbind(t),l.destroy(i.wrapper),i._removeOverlay(!0),i.wrapper.empty().remove(),i.wrapper=i.appendTo=i.element=e()},_createWindow:function(){var t,i,n=this.element,r=this.options,o=l.support.isRtl(n);r.scrollable===!1&&n.attr("style","overflow:hidden;"),i=e(J.wrapper(r)),t=n.find("iframe:not(.k-content)").map(function(){var e=this.getAttribute("src");return this.src="",e}),i.toggleClass("k-rtl",o).appendTo(this.appendTo).append(n).find("iframe:not(.k-content)").each(function(e){this.src=t[e]}),i.find(".k-window-title").css(o?"left":"right",i.find(".k-window-actions").outerWidth()+10),n.css("visibility","").show(),n.find("[data-role=editor]").each(function(){var t=e(this).data("kendoEditor");t&&t.refresh()}),i=n=null}}),J={wrapper:g("<div class='k-widget k-window' />"),action:g("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:g("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions' /></div>"),overlay:"<div class='k-overlay' />",contentFrame:g("<iframe frameborder='0' title='#= title #' class='"+S+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:g("<div class='k-resize-handle k-resize-#= data #'></div>")};s.prototype={addOverlay:function(){this.owner.wrapper.append(J.overlay)},removeOverlay:function(){this.owner.wrapper.find(C).remove()},dragstart:function(t){var i=this,n=i.owner,r=n.wrapper;i.elementPadding=parseInt(r.css("padding-top"),10),i.initialPosition=l.getOffset(r,"position"),i.resizeDirection=t.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),i.initialSize={width:r.width(),height:r.height()},i.containerOffset=l.getOffset(n.appendTo,"position"),r.children(x).not(t.currentTarget).hide(),e(v).css(P,t.currentTarget.css(P))},drag:function(e){var t,i,r,o,s=this,a=s.owner,l=a.wrapper,c=a.options,d=s.resizeDirection,u=s.containerOffset,h=s.initialPosition,p=s.initialSize,f=Math.max(e.x.location,u.left),m=Math.max(e.y.location,u.top);d.indexOf("e")>=0?(t=f-h.left,l.width(n(t,c.minWidth,c.maxWidth))):d.indexOf("w")>=0&&(o=h.left+p.width,t=n(o-f,c.minWidth,c.maxWidth),l.css({left:o-t-u.left,width:t})),d.indexOf("s")>=0?(i=m-h.top-s.elementPadding,l.height(n(i,c.minHeight,c.maxHeight))):d.indexOf("n")>=0&&(r=h.top+p.height,i=n(r-m,c.minHeight,c.maxHeight),l.css({top:r-i-u.top,height:i})),t&&(a.options.width=t+"px"),i&&(a.options.height=i+"px"),a.resize()},dragend:function(t){var i=this,n=i.owner,r=n.wrapper;return r.children(x).not(t.currentTarget).show(),e(v).css(P,""),n.touchScroller&&n.touchScroller.reset(),27==t.keyCode&&r.css(i.initialPosition).css(i.initialSize),n.trigger(O),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},a.prototype={dragstart:function(t){var i=this.owner,n=i.element,r=n.find(".k-window-actions"),o=l.getOffset(i.appendTo);i.trigger(L),i.initialWindowPosition=l.getOffset(i.wrapper,"position"),i.startPosition={left:t.x.client-i.initialWindowPosition.left,top:t.y.client-i.initialWindowPosition.top},i.minLeftPosition=r.length>0?r.outerWidth()+parseInt(r.css("right"),10)-n.outerWidth():20-n.outerWidth(),i.minLeftPosition-=o.left,i.minTopPosition=-o.top,i.wrapper.append(J.overlay).children(x).hide(),e(v).css(P,t.currentTarget.css(P))},drag:function(t){var i=this.owner,n=i.options.position,r=Math.max(t.y.client-i.startPosition.top,i.minTopPosition),o=Math.max(t.x.client-i.startPosition.left,i.minLeftPosition),s={left:o,top:r};e(i.wrapper).css(s),n.top=r,n.left=o},_finishDrag:function(){var t=this.owner;t.wrapper.children(x).toggle(!t.options.isMinimized).end().find(C).remove(),e(v).css(P,"")},dragcancel:function(e){this._finishDrag(),e.currentTarget.closest(_).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(B),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},l.ui.plugin(Z)}(window.kendo.jQuery),function(e,t){function i(e){var t,i,n=e.find(k("popover")),r=a.roles;for(t=0,i=n.length;i>t;t++)o.initWidget(n[t],{},r)}function n(e){o.triggeredByInput(e)||e.preventDefault()}function r(t){t.each(function(){o.initWidget(e(this),{},a.roles)})}var o=window.kendo,s=o.mobile,a=s.ui,l=o.attr,c=a.Widget,d=o.ViewClone,u="init",h='<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />',p="beforeShow",f="show",m="afterShow",g="beforeHide",v="transitionEnd",y="transitionStart",_="hide",b="destroy",w=o.attrValue,k=o.roleSelector,x=o.directiveSelector,C=o.compileMobileDirective,S=c.extend({init:function(t,i){c.fn.init.call(this,t,i),this.params={},e.extend(this,i),this.transition=this.transition||this.defaultTransition,this._id(),this.options.$angular?this._overlay():(this._layout(),this._overlay(),this._scroller(),this._model())},events:[u,p,f,m,g,_,b,y,v],options:{name:"View",title:"",layout:null,getLayout:e.noop,reload:!1,transition:"",defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,modelScope:window,scroller:{},initWidgets:!0},enable:function(e){t===e&&(e=!0),e?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this),this.trigger(b),c.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),this.options.$angular&&this.element.scope().$destroy(),o.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},triggerBeforeShow:function(){return!this.trigger(p,{view:this})},showStart:function(){var e=this.element;e.css("display",""),this.inited?this._invokeNgController():(this.inited=!0,this.trigger(u,{view:this})),this.layout&&this.layout.attach(this),this._padIfNativeScrolling(),this.trigger(f,{view:this}),o.resize(e)},showEnd:function(){this.trigger(m,{view:this}),this._padIfNativeScrolling()},hideStart:function(){this.trigger(g,{view:this})},hideEnd:function(){var e=this;e.element.hide(),e.trigger(_,{view:e}),e.layout&&e.layout.trigger(_,{view:e,layout:e.layout})},beforeTransition:function(e){this.trigger(y,{type:e})},afterTransition:function(e){this.trigger(v,{type:e})},_padIfNativeScrolling:function(){if(s.appLevelNativeScrolling()){var e=o.support.mobileOS&&o.support.mobileOS.android,t=s.application.os.android||s.application.skin().indexOf("android")>-1,i=e||t?"footer":"header",n=e||t?"header":"footer";this.content.css({paddingTop:this[i].height(),paddingBottom:this[n].height()})}},contentElement:function(){var e=this;return e.options.stretch?e.content:e.scrollerContent},clone:function(){return new d(this)},_scroller:function(){var t=this;s.appLevelNativeScrolling()||(t.options.stretch?t.content.addClass("km-stretched-view"):(t.content.kendoMobileScroller(e.extend(t.options.scroller,{zoom:t.options.zoom,useNative:t.options.useNativeScrolling})),t.scroller=t.content.data("kendoMobileScroller"),t.scrollerContent=t.scroller.scrollElement),o.support.kineticScrollNeeded&&(e(t.element).on("touchmove",".km-header",n),t.options.useNativeScrolling||e(t.element).on("touchmove",".km-content",n)))},_model:function(){var e=this,t=e.element,n=e.options.model;"string"==typeof n&&(n=o.getter(n)(e.options.modelScope)),e.model=n,i(t),e.element.css("display",""),e.options.initWidgets&&(n?o.bind(t,n,a,o.ui,o.dataviz.ui):s.init(t.children())),e.element.css("display","none")},_id:function(){var e=this.element,t=e.attr("id")||"";this.id=w(e,"url")||"#"+t,"#"==this.id&&(this.id=o.guid(),e.attr("id",this.id))},_layout:function(){var e=k("content"),t=this.element;t.addClass("km-view"),this.header=t.children(k("header")).addClass("km-header"),this.footer=t.children(k("footer")).addClass("km-footer"),t.children(e)[0]||t.wrapInner("<div "+l("role")+'="content"></div>'),this.content=t.children(k("content")).addClass("km-content"),this.element.prepend(this.header).append(this.footer),this.layout=this.options.getLayout(this.layout),this.layout&&this.layout.setup(this)},_overlay:function(){this.overlay=e(h).appendTo(this.element)},_invokeNgController:function(){var e,t,i=this.element;this.options.$angular&&(e=i.controller(),t=i.scope(),e&&t.$apply(function(){i.injector().invoke(e.constructor,null,{$scope:t})}))}}),T=c.extend({init:function(e,t){c.fn.init.call(this,e,t),e=this.element,this.header=e.children(this._locate("header")).addClass("km-header"),this.footer=e.children(this._locate("footer")).addClass("km-footer"),this.elements=this.header.add(this.footer),i(e),this.options.$angular||o.mobile.init(this.element.children()),this.element.detach(),this.trigger(u,{layout:this})},_locate:function(e){return this.options.$angular?x(e):k(e)},options:{name:"Layout",id:null,platform:null},events:[u,f,_],setup:function(e){e.header[0]||(e.header=this.header),e.footer[0]||(e.footer=this.footer)},detach:function(e){var t=this;e.header===t.header&&t.header[0]&&e.element.prepend(t.header.detach()[0].cloneNode(!0)),e.footer===t.footer&&t.footer.length&&e.element.append(t.footer.detach()[0].cloneNode(!0))},attach:function(e){var t=this,i=t.currentView;i&&t.detach(i),e.header===t.header&&(t.header.detach(),e.element.children(k("header")).remove(),e.element.prepend(t.header)),e.footer===t.footer&&(t.footer.detach(),e.element.children(k("footer")).remove(),e.element.append(t.footer)),t.trigger(f,{layout:t,view:e}),t.currentView=e}}),D=o.Observable,M=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,A="loadStart",E="loadComplete",I="showStart",P="sameViewRequested",F="viewShow",z="viewTypeDetermined",H="after",R=D.extend({init:function(t){var i,n,s,a,l=this;if(D.fn.init.call(l),e.extend(l,t),l.sandbox=e("<div />"),s=l.container,i=l._hideViews(s),l.rootView=i.first(),!l.rootView[0]&&t.rootNeeded)throw n=s[0]==o.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',Error(n);l.layouts={},l.viewContainer=new o.ViewContainer(l.container),l.viewContainer.bind("accepted",function(e){e.view.params=l.params}),l.viewContainer.bind("complete",function(e){l.trigger(F,{view:e.view})}),l.viewContainer.bind(H,function(){l.trigger(H)}),this.getLayoutProxy=e.proxy(this,"_getLayout"),l._setupLayouts(s),a=s.children(l._locate("modalview drawer")),l.$angular?a.each(function(t,i){C(e(i),function(){})}):r(a),this.bind(this.events,t)},events:[I,H,F,A,E,P,z],destroy:function(){o.destroy(this.container);for(var e in this.layouts)this.layouts[e].destroy()},view:function(){return this.viewContainer.view},showView:function(e,t,i){if(e=e.replace(RegExp("^"+this.remoteViewURLPrefix),""),""===e&&this.remoteViewURLPrefix&&(e="/"),e===this.url)return this.trigger(P),!1;this.trigger(I);var n=this,r=function(i){return n.viewContainer.show(i,t,e)},s=n._findViewElement(e),a=o.widgetInstance(s);return n.url=e,n.params=i,a&&a.reload&&(a.purge(),s=[]),this.trigger(z,{remote:0===s.length,url:e}),s[0]?(a||(a=n._createView(s)),r(a)):(this.serverNavigation?location.href=e:n._loadView(e,r),!0)},append:function(e,t){var i,n,o,s=this.sandbox,a=(t||"").split("?")[0],c=this.container;return M.test(e)&&(e=RegExp.$1),s[0].innerHTML=e,c.append(s.children("script, style")),i=this._hideViews(s),o=i.first(),o.length||(i=o=s.wrapInner("<div data-role=view />").children()),a&&o.hide().attr(l("url"),a),this._setupLayouts(s),n=s.children(this._locate("modalview drawer")),c.append(s.children(this._locate("layout modalview drawer")).add(i)),r(n),this._createView(o)},_locate:function(e){return this.$angular?x(e):k(e)},_findViewElement:function(e){var t,i=e.split("?")[0];return i?(t=this.container.children("["+l("url")+"='"+i+"']"),t[0]||-1!==i.indexOf("/")||(t=this.container.children("#"===i.charAt(0)?i:"#"+i)),t):this.rootView},_createView:function(e){if(this.$angular){var t=this;return C(e,function(e){e.viewOptions={defaultTransition:t.transition,loader:t.loader,container:t.container,getLayout:t.getLayoutProxy}})}return o.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:w(e,"reload")},a.roles)},_getLayout:function(e){return""===e?null:e?this.layouts[e]:this.layouts[this.layout]},_loadView:function(t,i){this._xhr&&this._xhr.abort(),this.trigger(A),this._xhr=e.get(o.absoluteURL(t,this.remoteViewURLPrefix),"html").always(e.proxy(this,"_xhrComplete",i,t))},_xhrComplete:function(e,t,i){var n=!0;"object"==typeof i&&(n=0===i.status&&i.responseText.length>0,i=i.responseText),this.trigger(E),n&&e(this.append(i,t))},_hideViews:function(e){return e.children(this._locate("view splitview")).hide()},_setupLayouts:function(t){var i,n=this;t.children(n._locate("layout")).each(function(){i=n.$angular?C(e(this)):o.initWidget(e(this),{},a.roles);var t=i.options.platform;t&&t!==s.application.os.name?i.destroy():n.layouts[i.options.id]=i})}});o.mobile.ViewEngine=R,a.plugin(S),a.plugin(T)}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.mobile.ui,n=i.Widget,r=e.map(t.eventMap,function(e){return e}).join(" ").split(" "),o=n.extend({init:function(t,i){var r=this,o=e('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');n.fn.init.call(r,o,i),r.container=t,r.captureEvents=!1,r._attachCapture(),o.append(r.options.loading).hide().appendTo(t)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var e=this;clearTimeout(e._loading),e.options.loading!==!1&&(e.captureEvents=!0,e._loading=setTimeout(function(){e.element.show()},e.options.timeout))},hide:function(){this.captureEvents=!1,clearTimeout(this._loading),this.element.hide()},changeMessage:function(e){this.options.loading=e,this.element.find(">h1").html(e)},transition:function(){this.captureEvents=!0,this.container.css("pointer-events","none")},transitionDone:function(){this.captureEvents=!1,this.container.css("pointer-events","")},_attachCapture:function(){function e(e){i.captureEvents&&e.preventDefault()}var t,i=this;for(i.captureEvents=!1,t=0;r.length>t;t++)i.container[0].addEventListener(r[t],e,!0)}});i.plugin(o)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.mobile,r=i.roleSelector,o=n.ui,s=o.Widget,a=n.ViewEngine,l=o.View,c=n.ui.Loader,d="external",u="href",h="#!",p="navigate",f="viewShow",m="sameViewRequested",g=i.support.mobileOS,v=g.ios&&!g.appMode&&g.flatVersion>=700,y=/popover|actionsheet|modalview|drawer/,_="#:back",b=i.attrValue,w="button backbutton detailbutton listview-link",k="tab",x=s.extend({init:function(e,t){var n=this;s.fn.init.call(n,e,t),t=n.options,e=n.element,e.addClass("km-pane"),n.options.collapsible&&e.addClass("km-collapsible-pane"),this.history=[],this.historyCallback=function(e,t,i){var r=n.transition;return n.transition=null,v&&i&&(r="none"),n.viewEngine.showView(e,r,t)},this._historyNavigate=function(e){if(e===_){if(1===n.history.length)return;n.history.pop(),e=n.history[n.history.length-1]}else n.history.push(e);n.historyCallback(e,i.parseQueryStringParams(e))},this._historyReplace=function(e){var t=i.parseQueryStringParams(e);n.history[n.history.length-1]=e,n.historyCallback(e,t)},n.loader=new c(e,{loading:n.options.loading}),n.viewEngine=new a({container:e,transition:t.transition,modelScope:t.modelScope,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,$angular:t.$angular,loader:n.loader,showStart:function(){n.loader.transition(),n.closeActiveDialogs()},after:function(){n.loader.transitionDone()},viewShow:function(e){n.trigger(f,e)},loadStart:function(){n.loader.show()},loadComplete:function(){n.loader.hide()},sameViewRequested:function(){n.trigger(m)},viewTypeDetermined:function(e){e.remote&&n.options.serverNavigation||n.trigger(p,{url:e.url})}}),this._setPortraitWidth(),i.onResize(function(){n._setPortraitWidth()}),n._setupAppLinks()},closeActiveDialogs:function(){var t=this.element.find(r("actionsheet popover modalview")).filter(":visible");t.each(function(){i.widgetInstance(e(this),o).close()})},navigateToInitial:function(){var e=this.options.initial;e&&this.navigate(e)},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:!1,initial:null,modelScope:window,loading:"<h1>Loading...</h1>"},events:[p,f,m],append:function(e){return this.viewEngine.append(e)},destroy:function(){s.fn.destroy.call(this),this.viewEngine.destroy(),this.userEvents.destroy()},navigate:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyNavigate(e)},replace:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyReplace(e)},bindToRouter:function(e){var t=this,n=this.history,r=this.viewEngine;e.bind("init",function(t){var o,s=t.url,a=e.pushState?s:"/";r.rootView.attr(i.attr("url"),a),o=n.length,"/"===s&&o&&(e.navigate(n[o-1],!0),t.preventDefault())}),e.bind("routeMissing",function(e){t.historyCallback(e.url,e.params,e.backButtonPressed)||e.preventDefault()}),e.bind("same",function(){t.trigger(m)}),t._historyNavigate=function(t){e.navigate(t)},t._historyReplace=function(t){e.replace(t)}},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},changeLoadingMessage:function(e){this.loader.changeMessage(e)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var e,t=this.options.portraitWidth;t&&(e=i.mobile.application.element.is(".km-vertical")?t:"auto",this.element.css("width",e))},_setupAppLinks:function(){var e=this;this.element.handler(this).on("down",r(k),"_mouseup").on("click",r(k+" "+w),"_appLinkClick"),this.userEvents=new i.UserEvents(this.element,{filter:r(w),tap:function(t){t.event.currentTarget=t.touch.currentTarget,e._mouseup(t.event)}})},_appLinkClick:function(t){var i=e(t.currentTarget).attr("href"),n=i&&"#"!==i[0]&&this.options.serverNavigation;n||b(e(t.currentTarget),"rel")==d||t.preventDefault()},_mouseup:function(r){if(!(r.which>1||r.isDefaultPrevented())){var s=this,a=e(r.currentTarget),l=b(a,"transition"),c=b(a,"rel")||"",p=b(a,"target"),f=a.attr(u),m=v&&0===a[0].offsetHeight,g=f&&"#"!==f[0]&&this.options.serverNavigation;m||g||c===d||t===f||f===h||(a.attr(u,h),setTimeout(function(){a.attr(u,f)}),c.match(y)?(i.widgetInstance(e(f),o).openFor(a),("actionsheet"===c||"drawer"===c)&&r.stopPropagation()):("_top"===p?s=n.application.pane:p&&(s=e("#"+p).data("kendoMobilePane")),s.navigate(f,l)),r.preventDefault())}}});x.wrap=function(e){e.is(r("view"))||(e=e.wrap("<div data-"+i.ns+'role="view" data-stretch="true"></div>').parent());var t=e.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(),n=new x(t);return n.navigate(""),n},o.plugin(x)}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.mobile,n=i.ui,r="hide",o="open",s="close",a='<div class="km-popup-wrapper" />',l='<div class="km-popup-arrow" />',c='<div class="km-popup-overlay" />',d="km-up km-down km-left km-right",u=n.Widget,h={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},p={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},f={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},m={up:"down",down:"up",left:"right",right:"left"},g=u.extend({init:function(i,n){var o,s,d=this,m=i.closest(".km-modalview-wrapper"),g=i.closest(".km-root").children(".km-pane").first(),v=m[0]?m:g;n.viewport?g=n.viewport:g[0]||(g=window),n.container?v=n.container:v[0]||(v=document.body),o={viewport:g,copyAnchorStyles:!1,autosize:!0,open:function(){d.overlay.show()},activate:e.proxy(d._activate,d),deactivate:function(){d.overlay.hide(),d._apiCall||d.trigger(r),d._apiCall=!1}},u.fn.init.call(d,i,n),i=d.element,n=d.options,i.wrap(a).addClass("km-popup").show(),s=d.options.direction.match(/left|right/)?"horizontal":"vertical",d.dimensions=f[s],d.wrapper=i.parent().css({width:n.width,height:n.height}).addClass("km-popup-wrapper km-"+n.direction).hide(),d.arrow=e(l).prependTo(d.wrapper).hide(),d.overlay=e(c).appendTo(v).hide(),o.appendTo=d.overlay,n.className&&d.overlay.addClass(n.className),d.popup=new t.ui.Popup(d.wrapper,e.extend(!0,o,p,h[n.direction]))},options:{name:"Popup",width:240,height:"",direction:"down",container:null,viewport:null},events:[r],show:function(t){this.popup.options.anchor=e(t),this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){u.fn.destroy.call(this),this.popup.destroy(),this.overlay.remove()},target:function(){return this.popup.options.anchor},_activate:function(){var t=this,i=t.options.direction,n=t.dimensions,r=n.offset,o=t.popup,s=o.options.anchor,a=e(s).offset(),l=e(o.element).offset(),c=o.flipped?m[i]:i,u=2*t.arrow[n.size](),h=t.element[n.size]()-t.arrow[n.size](),p=e(s)[n.size](),f=a[r]-l[r]+p/2;u>f&&(f=u),f>h&&(f=h),t.wrapper.removeClass(d).addClass("km-"+c),t.arrow.css(r,f).show()}}),v=u.extend({init:function(i,r){var o,a=this;a.initialOpen=!1,u.fn.init.call(a,i,r),o=e.extend({className:"km-popover-root",hide:function(){a.trigger(s)}},this.options.popup),a.popup=new g(a.element,o),a.popup.overlay.on("move",function(e){e.target==a.popup.overlay[0]&&e.preventDefault()}),a.pane=new n.Pane(a.element,e.extend(this.options.pane,{$angular:this.options.$angular})),a.pane.navigateToInitial(),t.notify(a,n)},options:{name:"PopOver",popup:{},pane:{}},events:[o,s],open:function(e){this.popup.show(e),this.initialOpen?this.pane.view()._invokeNgController():(this.pane.navigate(""),this.popup.popup._position(),this.initialOpen=!0)},openFor:function(e){this.open(e),this.trigger(o,{target:this.popup.target()})},close:function(){this.popup.hide()},destroy:function(){u.fn.destroy.call(this),this.pane.destroy(),this.popup.destroy(),t.destroy(this.element)}});n.plugin(g),n.plugin(v)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.mobile.ui,r=i.ui.Popup,o='<div class="km-shim"/>',s="hide",a=n.Widget,l=a.extend({init:function(t,n){var l=this,c=i.mobile.application,d=i.support.mobileOS,u=c?c.os.name:d?d.name:"ios",h="ios"===u||"wp"===u||!!c&&c.os.skin,p="blackberry"===u,f=n.align||(h?"bottom center":p?"center right":"center center"),m=n.position||(h?"bottom center":p?"center right":"center center"),g=n.effect||(h?"slideIn:up":p?"slideIn:left":"fade:in"),v=e(o).handler(l).hide();a.fn.init.call(l,t,n),l.shim=v,t=l.element,n=l.options,n.className&&l.shim.addClass(n.className),n.modal||l.shim.on("up","_hide"),(c?c.element:e(document.body)).append(v),l.popup=new r(l.element,{anchor:v,modal:!0,appendTo:v,origin:f,position:m,animation:{open:{effects:g,duration:n.duration},close:{duration:n.duration}},close:function(e){var t=!1;l._apiCall||(t=l.trigger(s)),t&&e.preventDefault(),l._apiCall=!1},deactivate:function(){v.hide()},open:function(){v.show()}}),i.notify(l)},events:[s],options:{name:"Shim",modal:!1,align:t,position:t,effect:t,duration:200},show:function(){this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){a.fn.destroy.call(this),this.shim.kendoDestroy(),this.popup.destroy(),this.shim.remove()},_hide:function(t){t&&e.contains(this.shim.children().children(".k-popup")[0],t.target)||this.popup.close()}});n.plugin(l)}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.support,n=t.mobile.ui,r=n.Shim,o=n.Popup,s=n.Widget,a="open",l="close",c="command",d="li>a",u="actionsheetContext",h='<div class="km-actionsheet-wrapper" />',p=t.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>'),f=s.extend({init:function(a,l){var c,u,f,m=this,g=i.mobileOS;s.fn.init.call(m,a,l),l=m.options,f=l.type,a=m.element,u="auto"===f?g&&g.tablet:"tablet"===f,c=u?o:r,l.cancelTemplate&&(p=t.template(l.cancelTemplate)),a.addClass("km-actionsheet").append(p({cancel:m.options.cancel})).wrap(h).on("up",d,"_click").on("click",d,t.preventDefault),m.view().bind("destroy",function(){m.destroy()}),m.wrapper=a.parent().addClass(f?" km-actionsheet-"+f:""),m.shim=new c(m.wrapper,e.extend({modal:g.ios&&7>g.majorVersion,className:"km-actionsheet-root"},m.options.popup)),m._closeProxy=e.proxy(m,"_close"),m.shim.bind("hide",m._closeProxy),u&&t.onResize(m._closeProxy),t.notify(m,n)},events:[a,l,c],options:{name:"ActionSheet",cancel:"Cancel",type:"auto",popup:{height:"auto"}},open:function(t,i){var n=this;n.target=e(t),n.context=i,n.shim.show(t)},close:function(){this.context=this.target=null,this.shim.hide()},openFor:function(e){var t=this,i=e.data(u);t.open(e,i),t.trigger(a,{target:e,context:i})},destroy:function(){s.fn.destroy.call(this),t.unbindResize(this._closeProxy),this.shim.destroy()},_click:function(i){var n,r,o,s;i.isDefaultPrevented()||(n=e(i.currentTarget),r=n.data("action"),r&&(o={target:this.target,context:this.context},s=this.options.$angular,s?this.element.injector().get("$parse")(r)(s[0])(o):t.getter(r)(window)(o)),this.trigger(c,{target:this.target,context:this.context,currentTarget:n}),i.preventDefault(),this._close())},_close:function(e){this.trigger(l)?e.preventDefault():this.close()}});n.plugin(f)}(window.kendo.jQuery),function(e,t){function i(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function n(e){var t,i=" ";if(e){if(typeof e===lt)return e;for(t in e)i+=t+'="'+e[t]+'"'}return i}function r(t,i){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",i)}function o(e){var t,i,n={},r={};if(!Me(e))for(xe(e)||(e=[e]),t=0,i=e.length;i>t;t++)n[e[t].aggregate]=0,r[e[t].field]=n;return r}function s(t,i,n,r,o){var s,a=i;for(i=e(),o=o||1,s=0;o>s;s++)i=i.add(t.eq(a+s));"number"==typeof n?i[r?"insertBefore":"insertAfter"](t.eq(n)):i.appendTo(n)}function a(t,i,n){return e(t).add(i).find(n)}function l(e,t,i){var n,r,o,s;for(i=xe(i)?i:[i],n=0,r=i.length;r>n;n++)o=i[n],_e(o)&&o.click&&(s=o.name||o.text,t.on(rt+$e,"a.k-grid-"+(s||"").replace(/\s/g,""),{commandName:s},Te(o.click,e)))}function c(e,t,i){return we(e,function(e){e=typeof e===lt?{field:e}:e;var n;return(!p(e)||i)&&(e.attributes=U(e.attributes),e.footerAttributes=U(e.footerAttributes),e.headerAttributes=U(e.headerAttributes),n=!0),e.columns&&(e.columns=c(e.columns,t,n)),be({encoded:t,hidden:n},e)})}function d(e,t){var i=[];return u(e,t,i),i[i.length-1]}function u(e,t,i){var n,r;for(i=i||[],n=0;t.length>n;n++){if(e===t[n])return!0;if(t[n].columns){if(r=i.length,i.push(t[n]),u(e,t[n].columns,i))return!0;i.splice(r,i.length-r)}}return!1}function h(e,t){var i=t?V:U;e.hidden=!t,e.attributes=i(e.attributes),e.footerAttributes=i(e.footerAttributes),e.headerAttributes=i(e.headerAttributes)}function p(e){return f([e]).length>0}function f(e){return ke(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=f(e.columns).length>0),t})}function m(t){return e(t).map(function(){return this.toArray()})}function g(e,t,i){var n=_(P(t)),r=_(F(t)),o=e.rowSpan;e.rowSpan=i?n>r?o-(n-r)||1:o+(r-n):n>r?o+(n-r):o-(r-n)||1}function v(t,i,n,r,o,s,a){var l,c,d=_(t),u=_([i]);d>u&&(l=Array(a+1).join('<th class="k-group-cell k-header">&nbsp;</th>'),c=s.children(":not(.k-filter-row)"),e(Array(d-u+1).join("<tr>"+l+"</tr>")).insertAfter(c.last())),A(s,d-u),b(n,r,o,s)}function y(e,t,i){var n,r,o,s,a;for(i=i||0,o=t,t=N(t),s=0,a=t.length;a>s;s++)n=w(t[s],o),r=e.find(">tr:not(.k-filter-row)").eq(n.row).find(".k-header:not(.k-group-cell,.k-hierarchy-cell)").eq(n.cell),r.attr(ue.attr("index"),i+s);return t.length}function _(e){var t,i,n=1,r=0;for(t=0;e.length>t;t++)e[t].columns&&(i=_(e[t].columns),i>r&&(r=i));return n+r}function b(t,i,n,r){var o,s,a=x(t[0],i),l=n.find(">tr:not(.k-filter-row):eq("+a.row+")>th.k-header"),c=e(),d=a.cell;for(o=0;t.length>o;o++)c=c.add(l.eq(d+o));for(r.find(">tr:not(.k-filter-row)").eq(a.row).append(c),s=[],o=0;t.length>o;o++)t[o].columns&&(s=s.concat(t[o].columns));s.length&&b(s,i,n,r)}function w(e,t,i,n){
var r,o;for(i=i||0,n=n||{},n[i]=n[i]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:n[i],row:i};break}if(t[o].columns&&(r=w(e,t[o].columns,i+1,n)))break;n[i]++}return r}function k(e,t,i,n){var r,o,s;return t.columns?(t=t.columns,t[n?0:t.length-1]):(r=d(t,e),o=r?r.columns:e,s=Ce(t,o),0===s&&n?s++:s!=o.length-1||n?(s>0||0===s&&!n)&&(s+=n?-1:1):s--,t=o[Math.max(s,0)],t&&t!=i&&t.columns?k(e,t,i,n):null)}function x(e,t,i,n){var r,o;for(i=i||0,n=n||{},n[i]=n[i]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:n[i],row:i};break}if(t[o].columns&&(r=x(e,t[o].columns,i+1,n)))break;t[o].hidden||n[i]++}return r}function C(e){var t=S(P(e));return t.concat(S(F(e)))}function S(e){var t,i=[],n=[];for(t=0;e.length>t;t++)i.push(e[t]),e[t].columns&&(n=n.concat(e[t].columns));return n.length&&(i=i.concat(S(n))),i}function T(e){var t,i,n=0;for(i=0;e.length>i;i++)t=e[i],t.columns?n+=T(t.columns):t.hidden&&n++;return n}function D(e){var t,i,n,r=0;for(i=0,n=e.length;n>i;i++)t=e[i].style.width,t&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}function M(e,t){var i,n,r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;r.length>n;n++)i=r[n].rowSpan,i>1&&(r[n].rowSpan=i-t||1)}function A(e,t){var i,n=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(i=0;n.length>i;i++)n[i].rowSpan+=t}function E(t){var i,n=t.find("tr:not(.k-filter-row)"),r=n.filter(function(){return!e(this).children().length}).remove().length,o=n.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(i=0;o.length>i;i++)o[i].rowSpan>1&&(o[i].rowSpan-=r);return n.length-r}function I(e,t,i,n,r){var o,s,a,l=[];for(o=0,a=e.length;a>o;o++)s=i[n]||[],s.push(t.eq(r+o)),i[n]=s,e[o].columns&&(l=l.concat(e[o].columns));l.length&&I(l,t,i,n+1,r+e.length)}function P(e){return ke(e,function(e){return e.locked})}function F(e){return ke(e,function(e){return!e.locked})}function z(e){return ke(e,function(e){return!e.locked&&p(e)})}function H(e){return ke(e,function(e){return e.locked&&p(e)})}function R(e){var t,i=[];for(t=0;e.length>t;t++)e[t].hidden||(e[t].columns?i=i.concat(R(e[t].columns)):i.push(e[t]));return i}function N(e){var t,i=[];for(t=0;e.length>t;t++)e[t].columns?i=i.concat(N(e[t].columns)):i.push(e[t]);return i}function $(t){var i,n=t.find(">tr:not(.k-filter-row)"),r=e();return n.length>1&&(r=n.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.rowSpan>1})),r=r.add(n.last().find("th:not(.k-group-cell,.k-hierarchy-cell)")),i=ue.attr("index"),r.sort(function(t,n){return t=parseInt(e(t).attr(i),10),n=parseInt(e(n).attr(i),10),t>n?1:n>t?-1:0}),r}function O(t){var i,n,r,o,s,a,l,c=t.closest("table"),d=e().add(t),u=t.closest("tr"),h=c.find("tr:not(.k-filter-row)"),p=h.index(u);if(p>0){for(i=h.eq(p-1),n=i.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),r=0,o=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),s=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),a=0;s.length>a;a++)r+=s[a].colSpan||1;for(o+=Math.max(r-1,0),r=0,a=0;n.length>a;a++)if(l=n.eq(a),r+=l.attr("colSpan")?l[0].colSpan:1,o>=a&&r>o){d=O(l).add(d);break}}return d}function L(t){var i,n,r,o,s,a,l,c,d=t.closest("table"),u=e().add(t),h=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),f=p.index(h)+t[0].rowSpan,m=ue.attr("colspan");if(p.length-1>=f){for(i=h.next(),n=h.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),r=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),r=r.filter(function(){return!this.rowSpan||1===this.rowSpan}),s=0,o=0;r.length>o;o++)s+=parseInt(r.eq(o).attr(m),10)||1;for(a=i.find("th:not(.k-group-cell,.k-hierarchy-cell)"),l=parseInt(t.attr(m),10)||1,o=0;l>o;)i=a.eq(o+s),u=u.add(L(i)),c=parseInt(i.attr(m),10),c>1&&(l-=c-1),o++}return u}function B(t,i,n){var r,o=t;return me?t[0].innerHTML=n:(r=document.createElement("div"),r.innerHTML="<table><tbody>"+n+"</tbody></table>",t=r.firstChild.firstChild,i[0].replaceChild(t,o[0]),t=e(t)),t}function U(e){e=e||{};var t=e.style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),t===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",be({},e,{style:t})}function V(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function W(t,i,n,r){var o,s=t.find(">colgroup"),a=we(i,function(e){return o=e.width,o&&0!==parseInt(o,10)?ue.format('<col style="width:{0}"/>',typeof o===lt?o:o+"px"):"<col />"});(n||s.find(".k-hierarchy-col").length)&&a.splice(0,0,'<col class="k-hierarchy-col" />'),s.length&&s.remove(),s=e(Array(r+1).join('<col class="k-group-col">')+a.join("")),s.is("colgroup")||(s=e("<colgroup/>").append(s)),t.prepend(s),_t.msie&&8==_t.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function j(e,t){var i,n,r=0;for(i=0,n=t.length;n>i;i++)t[i].locked&&(e.eq(i).insertBefore(e.eq(r)),r++)}function q(e){var t,i,n,r={};for(i=0,n=e.length;n>i;i++)t=e[i],r[t.value]=t.text;return r}function G(e,t,i){var n=i&&i.length&&_e(i[0])&&"value"in i[0],r=n?q(i)[e]:e;return r=null!=r?r:"",t?ue.format(t,r):r}function Y(e,t,i){for(var n,r=0,o=e[r];o;){if(n=!!i||"none"!==o.style.display,n&&!mt.test(o.className)&&--t<0){o.style.display=i?"":"none";break}o=e[++r]}}function Q(t,i){for(var n,r,o=0,s=t.length;s>o;o+=1)r=t.eq(o),r.is(".k-grouping-row,.k-detail-row")?(n=r.children(":not(.k-group-cell):first,.k-detail-cell").last(),n.attr("colspan",parseInt(n.attr("colspan"),10)-1)):(r.hasClass("k-grid-edit-row")&&(n=r.children(".k-edit-container")[0])&&(n=e(n),n.attr("colspan",parseInt(n.attr("colspan"),10)-1),n.find("col").eq(i).remove(),r=n.find("tr:first")),Y(r[0].cells,i,!1))}function K(t,i){for(var n,r,o,s=0,a=t.length;a>s;s+=1)r=t.eq(s),r.is(".k-grouping-row,.k-detail-row")?(n=r.children(":not(.k-group-cell):first,.k-detail-cell").last(),n.attr("colspan",parseInt(n.attr("colspan"),10)+1)):(r.hasClass("k-grid-edit-row")&&(n=r.children(".k-edit-container")[0])&&(n=e(n),n.attr("colspan",parseInt(n.attr("colspan"),10)+1),W(n.find(">form>table"),f(o),!1,0),r=n.find("tr:first")),Y(r[0].cells,i,!0))}function X(e,t,i){i=i||1;var n,r,o;for(r=0,o=e.length;o>r;r++)n=e.eq(r).children().last(),n.attr("colspan",parseInt(n.attr("colspan"),10)+i),n=t.eq(r).children().last(),n.attr("colspan",parseInt(n.attr("colspan"),10)-i)}function Z(e){var t,i,n=0,r=e.find(">colgroup>col");for(t=0,i=r.length;i>t;t+=1)n+=parseInt(r[t].style.width,10);return n}function J(e,t){var i,n,r,o;e=e[0],t=t[0],e.rows.length!==t.rows.length&&(i=e.offsetHeight,n=t.offsetHeight,i>n?(r=t.rows[t.rows.length-1],gt.test(r.className)&&(r=t.rows[t.rows.length-2]),o=i-n):(r=e.rows[e.rows.length-1],gt.test(r.className)&&(r=e.rows[e.rows.length-2]),o=n-i),r.style.height=r.offsetHeight+o+"px")}function ee(e,t){var i,n=e.offsetHeight,r=t.offsetHeight;n>r?i=n+"px":r>n&&(i=r+"px"),i&&(e.style.height=t.style.height=i)}function te(e,t){var i,n,r;if(typeof e===lt&&e===t)return e;if(_e(e)&&e.name===t)return e;if(xe(e))for(i=0,n=e.length;n>i;i++)if(r=e[i],typeof r===lt&&r===t||r.name===t)return r;return null}function ie(t,i){var n,r,o,s=_t.msie;if(i===!0){if(t=e(t),n=!0,n&&(r=t.parent().scrollTop(),o=t.parent().scrollLeft()),s)try{t[0].setActive()}catch(e){t[0].focus()}else t[0].focus();n&&(t.parent().scrollTop(r),t.parent().scrollLeft(o))}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function ne(t){var i=e(t.currentTarget),n=i.is("th"),r=this.table.add(this.lockedTable),o=this.thead.parent().add(e(">table",this.lockedHeader)),s=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap"),a=i.closest("table")[0];ue.support.touch||s&&i.find(ue.roleSelector("filtercell")).length||(a===r[0]||a===r[1]||a===o[0]||a===o[1])&&(e(t.target).is("a.k-i-collapse, a.k-i-expand")||(this.current(i),(n||!s)&&setTimeout(function(){wt&&e(ue._activeElement()).hasClass("k-widget")||ie(a,!0)}),n&&t.preventDefault()))}function re(t,i,n,r){if(t=e(t),r){var o=i;i=n,n=o}return i.not(t).length!=i.length?t:i.eq(t[0]==n[0]?0:1)}function oe(e,i,n,r,o){var s,a,l,c=o?"prevAll":"nextAll";if(e){if(s=e.parent()[c](ze).first(),!s[0]&&(o||e.is("th"))||!o&&e[0].rowSpan>1){if(i=re(i,n,r,o),ie(i),o&&!e.is(".k-header"))return $(i.find("thead:first")).eq(e.index());s=i.find((o?">thead>":">tbody>")+ze).first()}!o&&e[0].colSpan>1&&e.is(".k-header")?e=L(e).eq(1):e.is(".k-header")&&o?(l=O(e),e=l.eq(l.length-2)):(a=e.attr(ue.attr("index")),(a===t||o)&&(a=e.index()),e=s.children().eq(a)),e[0]&&e.is(He)||(e=s.children(He).first())}else e=n.find(Re);return e}function se(e,t,i,n,r){var o=i.length>1;return e?e.prevAll(":visible")[0]?e=e.prevAll(Pe).first():o&&(t==i[1]?(ie(i[0]),e=r(e.parent()).children(Pe).last()):t==n[1]&&(ie(n[0]),e=n.eq(0).find("tr>"+Pe).last())):e=i.find(Re),e}function ae(e,t,i,n,r){var o=i.length>1;return e?e.nextAll(":visible")[0]?e=e.nextAll(Pe).first():o&&(t==i[0]?(ie(i[1]),e=r(e.parent()).children(Pe).first()):t==n[0]&&(ie(n[1]),e=n.eq(1).find("tr>"+Pe).first())):e=i.find(Re),e}function le(e,t,i,n,r){var o=2==i.length,s=!0,a=r?e.prevAll(Pe+":first"):e.nextAll(":visible:first");return a.length||(a=e.parent(),o&&(s=r&&t==i[0]||!r&&t==i[1],a=n(a)),s&&(a=a[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),a=a.children(Pe+(r?":last":":first"))),a}function ce(e,t,n){return'<tr class="k-grouping-row">'+i(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+n+"</p></td></tr>"}function de(e){return'<tr class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var ue=window.kendo,he=ue.ui,pe=ue.data.DataSource,fe=he.Groupable,me=ue.support.tbodyInnerHtml,ge=ue._activeElement,ve=he.Widget,ye=ue.keys,_e=e.isPlainObject,be=e.extend,we=e.map,ke=e.grep,xe=e.isArray,Ce=e.inArray,Se=Array.prototype.push,Te=e.proxy,De=ue.isFunction,Me=e.isEmptyObject,Ae=Math,Ee="progress",Ie="error",Pe=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Fe="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",ze="tr:not(.k-footer-template):visible",He=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Re=ze+":first>"+He+":first",Ne="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",$e=".kendoGrid",Oe="edit",Le="save",Be="remove",Ue="detailInit",Ve="filterMenuInit",We="columnMenuInit",je="change",qe="columnHide",Ge="columnShow",Ye="saveChanges",Qe="dataBound",Ke="detailExpand",Xe="detailCollapse",Ze="k-state-focused",Je="k-state-selected",et="columnResize",tt="columnReorder",it="columnLock",nt="columnUnlock",rt="click",ot="height",st="tabIndex",at="function",lt="string",ct="Are you sure you want to delete this record?",dt="Delete",ut="Cancel",ht=/(\}|\#)/gi,pt=/#/gi,ft="[\\x20\\t\\r\\n\\f]",mt=RegExp("(^|"+ft+")(k-group-cell|k-hierarchy-cell)("+ft+"|$)"),gt=RegExp("(^|"+ft+")(k-filter-row)("+ft+"|$)"),vt='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',yt=!1,_t=ue.support.browser,bt=_t.msie&&7==_t.version,wt=_t.msie&&8==_t.version,kt=ve.extend({init:function(e,t){var i=this;ve.fn.init.call(i,e,t),i._refreshHandler=Te(i.refresh,i),i.setDataSource(t.dataSource),i.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(je,t._refreshHandler),t.dataSource=e,t.dataSource.bind(je,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop},destroy:function(){var e=this;ve.fn.destroy.call(e),e.dataSource.unbind(je,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off($e),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,i=this,n=ue.support.scrollbar()+1,r=i.element;r.css({width:"auto",overflow:"hidden"}).css(yt?"padding-left":"padding-right",n),i.content=r.children().first(),t=i.wrapper=i.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+$e+" mousewheel"+$e,Te(i._wheelScroll,i)),ue.support.kineticScrollNeeded&&(i.drag=new ue.UserEvents(i.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){i.verticalScrollbar.scrollTop(i.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),i.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:n}).appendTo(r).bind("scroll"+$e,Te(i._scroll,i))},_wheelScroll:function(t){if(!t.ctrlKey){var i=this.verticalScrollbar.scrollTop(),n=ue.wheelDeltaY(t);n&&(t.preventDefault(),e(t.currentTarget).one("wheel"+$e,!1),this.verticalScrollbar.scrollTop(i+-n))}},_scroll:function(e){var t=this,i=e.currentTarget.scrollTop,n=t.dataSource,r=t.itemHeight,o=n.skip()||0,s=t._rangeStart||o,a=t.element.innerHeight(),l=!!(t._scrollbarTop&&t._scrollbarTop>i),c=Ae.max(Ae.floor(i/r),0),d=Ae.max(c+Ae.floor(a/r),0);t._scrollTop=i-s*r,t._scrollbarTop=i,t._fetch(c,d,l)||(t.wrapper[0].scrollTop=t._scrollTop)},_fetch:function(e,t,i){var n=this,r=n.dataSource,o=n.itemHeight,s=r.take(),a=n._rangeStart||r.skip()||0,l=Ae.floor(e/s)*s,c=!1,d=.33;return a>e?(c=!0,a=Ae.max(0,t-s),n._scrollTop=(e-a)*o,n._page(a,s)):t>=a+s&&!i?(c=!0,a=e,n._scrollTop=o,n._page(a,s)):n._fetching||(l+s-s*d>e&&e>s&&r.prefetch(l-s,s),t>l+s*d&&r.prefetch(l+s,s)),c},_page:function(e,t){var i=this,n=i.dataSource;clearTimeout(i._timeout),i._fetching=!0,i._rangeStart=e,n.inRange(e,t)?n.range(e,t):(ue.ui.progress(i.wrapper.parent(),!0),i._timeout=setTimeout(function(){n.range(e,t)},100))},refresh:function(){var e,t,i,n,r=this,o="",s=25e4,a=r.dataSource,l=r._rangeStart,c=ue.support.kineticScrollNeeded?0:ue.support.scrollbar(),d=r.wrapper[0];for(ue.ui.progress(r.wrapper.parent(),!1),clearTimeout(r._timeout),i=r.itemHeight=r.options.itemHeight()||0,n=d.scrollWidth>d.offsetWidth?c:0,e=a.total()*i+n,t=0;t<Ae.floor(e/s);t++)o+='<div style="width:1px;height:'+s+'px"></div>';e%s&&(o+='<div style="width:1px;height:'+e%s+'px"></div>'),r.verticalScrollbar.html(o),d.scrollTop=r._scrollTop,r.drag&&r.drag.cancel(),l&&!r._fetching&&(r._rangeStart=a.skip(),1===a.page()&&(r.verticalScrollbar[0].scrollTop=0)),r._fetching=!1}}),xt={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},Ct=ue.ui.DataBoundWidget.extend({init:function(t,i,n){var r=this;i=xe(i)?{dataSource:i}:i,ve.fn.init.call(r,t,i),n&&(r._events=n),yt=ue.support.isRtl(t),r._element(),r._aria(),r._columns(r.options.columns),r._dataSource(),r._tbody(),r._pageable(),r._thead(),r._groupable(),r._toolbar(),r._setContentHeight(),r._templates(),r._navigatable(),r._selectable(),r._details(),r._editable(),r._attachCustomCommandsEvent(),r.options.autoBind?r.dataSource.fetch():r._footer(),r.lockedContent&&(r.wrapper.addClass("k-grid-lockedcolumns"),r._resizeHandler=function(){r.resize()},e(window).on("resize"+$e,r._resizeHandler)),ue.notify(r)},events:[je,"dataBinding","cancel","pdfExport",Qe,Ke,Xe,Ue,Ve,We,Oe,Le,Be,Ye,et,tt,Ge,qe,it,nt],setDataSource:function(e){var t=this,i=t.options.scrollable;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),i&&(i.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0)),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:ut,confirmation:ct,confirmDelete:dt},commands:{create:xt.create.text,cancel:xt.cancel.text,save:xt.save.text,destroy:xt.destroy.text,edit:xt.edit.text,update:xt.update.text,canceledit:xt.canceledit.text,excel:xt.excel.text,pdf:xt.pdf.text}}},destroy:function(){var t,i=this;ve.fn.destroy.call(i),i._resizeHandler&&e(window).off("resize"+$e,i._resizeHandler),i.pager&&i.pager.element&&i.pager.destroy(),i.pager=null,i.groupable&&i.groupable.element&&i.groupable.element.kendoGroupable("destroy"),i.groupable=null,i.options.reorderable&&i.wrapper.data("kendoReorderable").destroy(),i.selectable&&i.selectable.element&&i.selectable.destroy(),i.selectable=null,i.resizable&&(i.resizable.destroy(),i._resizeUserEvents&&(i._resizeHandleDocumentClickHandler&&e(document).off("click",i._resizeHandleDocumentClickHandler),i._resizeUserEvents.destroy(),i._resizeUserEvents=null),i.resizable=null),i.virtualScrollable&&i.virtualScrollable.element&&i.virtualScrollable.destroy(),i.virtualScrollable=null,i._destroyColumnAttachments(),i._destroyEditable(),i.dataSource&&(i.dataSource.unbind(je,i._refreshHandler).unbind(Ee,i._progressHandler).unbind(Ie,i._errorHandler),i._refreshHandler=i._progressHandler=i._errorHandler=null),t=i.element.add(i.wrapper).add(i.table).add(i.thead).add(i.wrapper.find(">.k-grid-toolbar")),i.content&&(t=t.add(i.content).add(i.content.find(">.k-virtual-scrollable-wrap"))),i.lockedHeader&&i._removeLockedContainers(),i.pane&&i.pane.destroy(),i._draggableInstance&&i._draggableInstance.element&&i._draggableInstance.destroy(),i._draggableInstance=null,t.off($e),ue.destroy(i.wrapper),i.scrollables=i.thead=i.tbody=i.element=i.table=i.content=i.footer=i.wrapper=i._groupableClickHandler=i._setContentWidthHandler=null},getOptions:function(){var i,n=be(!0,{},this.options);return n.columns=ue.deepExtend([],this.columns),i=this.dataSource,n.dataSource=e.extend(!0,{},i.options),n.dataSource.page=i.page(),n.dataSource.filter=i.filter(),n.dataSource.pageSize=i.pageSize(),n.dataSource.sort=i.sort(),n.dataSource.group=i.group(),n.dataSource.aggregate=i.aggregate(),n.$angular=t,n},setOptions:function(e){var t,i,n,r=this.getOptions();ue.deepExtend(r,e),t=this.wrapper,i=this._events,n=this.element,this.destroy(),this.options=null,t[0]!==n[0]&&(t.before(n),t.remove()),n.empty(),this.init(n,r,i),this._setEvents(r)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,i,n=ue.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=n.length,t=Array(2*e),i=e;--i>=0;)t[i]=t[i+e]=n[i];n=t}return n},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.find("th").each(function(){var t=e(this),i=t.data("kendoFilterMenu"),n=t.data("kendoColumnSorter"),r=t.data("kendoColumnMenu");i&&i.destroy(),n&&n.destroy(),r&&r.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,i,n=this,r=N(n.columns||[]);for(t=0,i=r.length;i>t;t++)e=r[t].command,e&&l(n,n.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,i=t.element;i.is("table")||(i=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),i.length||(i=e("<table />").appendTo(t.element))),bt&&i.attr("cellspacing",0),t.table=i.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,i){var n,r,o,s,a,l,c,d=this,u=d.options.columnResizeHandleWidth,h=d.options.scrollable,p=d.resizeHandle,f=this._groups();if(p&&d.lockedContent&&p.data("th")[0]!==i[0]&&(p.remove(),p=null),p||(p=d.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(p)),yt)n=i.position().left,h&&(s=i.closest(".k-grid-header-wrap, .k-grid-header-locked"),a=_t.msie?s.scrollLeft():0,l=_t.webkit?s[0].scrollWidth-s[0].offsetWidth-s.scrollLeft():0,c=_t.mozilla?s[0].scrollWidth-s[0].offsetWidth-(s[0].scrollWidth-s[0].offsetWidth-s.scrollLeft()):0,n-=l-c+a);else{for(n=i[0].offsetWidth,r=$(i.closest("thead")),o=0;r.length>o&&r[o]!=i[0];o++)n+=r[o].offsetWidth;f>0&&(n+=t.find(".k-group-cell:first").outerWidth()*f)}p.css({top:i.position().top,left:n-u,height:i.outerHeight(),width:3*u}).data("th",i).show()},_positionColumnResizeHandle:function(){var t=this,i=t.options.columnResizeHandleWidth,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(n).on("mousemove"+$e,"th",function(n){var o,s,a,l=e(this);l.hasClass("k-group-cell")||l.hasClass("k-hierarchy-cell")||(o=n.clientX,s=e(window).scrollLeft(),a=l.offset().left+(yt?0:this.offsetWidth),o+s>a-i&&a+i>o+s?t._createResizeHandle(l.closest("div"),l):t.resizeHandle?t.resizeHandle.hide():r(t.wrapper,""))})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,i=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new ue.UserEvents(i.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(i){var n=e(i.target);i.preventDefault(),n.addClass("k-column-active"),t._createResizeHandle(n.closest("div"),n),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=Te(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,i,n,o,s,a,l,c=this,d=c.options,u=this._isMobile,h=ue.support.mobileOS?0:ue.support.scrollbar();d.resizable&&(t=d.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,u?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new he.Resizable(t.add(c.lockedHeader),{handle:".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+c.tbody.attr("clientHeight")})},start:function(t){var h,p,f,m;l=e(t.currentTarget).data("th"),u&&c._hideResizeHandle(),h=l.closest("table"),p=e.inArray(l[0],$(l.closest("thead")).filter(":visible")),s=h.parent().hasClass("k-grid-header-locked"),f=s?c.lockedTable:c.table,m=c.footer||e(),c.footer&&c.lockedContent&&(m=c.footer.children(s?".k-grid-footer-locked":".k-grid-footer-wrap")),r(c.wrapper,"col-resize"),a=d.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")").add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")):f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")"),i=t.x.location,n=l.outerWidth(),o=s?f.children("tbody").outerWidth():c.tbody.outerWidth()},resize:function(t){var r,u,p,f,m,g,v=yt?-1:1,y=n+t.x.location*v-i*v;d.scrollable?(s&&c.lockedFooter?r=c.lockedFooter.children("table"):c.footer&&(r=c.footer.find(">.k-grid-footer-wrap>table")),r&&r[0]||(r=e()),u=l.closest("table"),p=s?c.lockedTable:c.table,f=!1,m=c.wrapper.width()-h,g=y,s&&o-n+g>m&&(g=n+(m-o-2*h),0>g&&(g=y),f=!0),g>10&&(a.css("width",g),o&&(g=f?m-2*h:o+t.x.location*v-i*v,p.add(u).add(r).css("width",g),s||(c._footerWidth=g)))):y>10&&a.css("width",y)},resizeend:function(){var e,t,i,o=l.outerWidth();r(c.wrapper,""),n!=o&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):l.parent(),i=l.attr(ue.attr("index")),i||(i=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(l)),e=N(c.columns)[i],e.width=o,c.trigger(et,{column:e,oldWidth:n,newWidth:o}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight()),c._hideResizeHandle(),l=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:ue.guid(),filter:t.content?".k-grid-header:first "+Ne:"table:first>.k-grid-header "+Ne,drag:function(){t._hideResizeHandle()},hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(ue.attr("title"))||t.attr(ue.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t,i=this;i.options.reorderable&&(i.wrapper.data("kendoReorderable")&&i.wrapper.data("kendoReorderable").destroy(),t=function(e,t,n){var r=e[t],o=e[n],s=d(r,i.columns);return e=s?s.columns:i.columns,Ce(o,e)},i.wrapper.kendoReorderable({draggable:i._draggableInstance,dragOverContainers:function(e,n){var r=C(i.columns);return r[e].lockable!==!1&&t(r,e,n)>-1},inSameContainer:function(n){return e(n.source).parent()[0]===e(n.target).parent()[0]&&t(C(i.columns),n.sourceIndex,n.targetIndex)>-1},change:function(e){var n=C(i.columns),r=n[e.oldIndex],o=t(n,e.oldIndex,e.newIndex);i.trigger(tt,{newIndex:o,oldIndex:Ce(r,n),column:r}),i.reorderColumn(o,r,"before"===e.position)}}))},_reorderHeader:function(e,t,i){var n,r,o,l,c=this,d=x(e[0],c.columns),u=x(t,c.columns),h=[];for(n=0;e.length>n;n++)e[n].columns&&(h=h.concat(e[n].columns));r=a(c.lockedHeader,c.thead,"tr:eq("+d.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),o=P(e).length,l=P([t]).length,h.length?(o>0&&0===l?v(e,t,h,c.columns,c.lockedHeader.find("thead"),c.thead,this._groups()):0===o&&l>0&&v(e,t,h,c.columns,c.thead,c.lockedHeader.find("thead"),this._groups()),t=k(c.columns,t,e[0],i),t&&c._reorderHeader(h,t,i)):o!==l&&g(r[d.cell],c.columns,o),s(r,d.cell,u.cell,i,e.length)},_reorderContent:function(t,i,n){var r,o,l,c,d=this,u=e(),h=t[0],p=Ce(h,N(d.columns)),f=Ce(i,N(d.columns)),m=Ce(h,R(d.columns)),g=Ce(i,R(d.columns)),v=P(d.columns).length,y=!!i.locked,_=d.footer||d.wrapper.find(".k-grid-footer"),b=r=g;for(i.hidden&&(y?(g=d.lockedTable.find("colgroup"),b=d.lockedHeader.find("colgroup"),r=e(d.lockedFooter).find(">table>colgroup")):(g=d.tbody.prev(),b=d.thead.prev(),r=_.find(".k-grid-footer-wrap").find(">table>colgroup"))),d._hasFilterRow()&&s(d.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),p,f,n,t.length),s(a(d.lockedHeader,d.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),m,b,n,t.length),d.options.scrollable&&s(a(d.lockedTable,d.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),m,g,n,t.length),_&&_.length&&(s(a(d.lockedFooter,_.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),m,r,n,t.length),s(_.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),p,f,n,t.length)),o=d.tbody.children(":not(.k-grouping-row,.k-detail-row)"),d.lockedTable&&(v>f?p>=v&&X(d.lockedTable.find(">tbody>tr.k-grouping-row"),d.table.find(">tbody>tr.k-grouping-row"),t.length):v>p&&X(d.table.find(">tbody>tr.k-grouping-row"),d.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),u=d.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),l=0,c=o.length;c>l;l+=1)s(a(u[l],o[l],">td:not(.k-group-cell,.k-hierarchy-cell)"),p,f,n,t.length)},reorderColumn:function(e,i,n){var r,o,s=this,a=d(i,s.columns),l=a?a.columns:s.columns,c=Ce(i,l),u=l[e],h=!!u.locked,p=P(s.columns).length;c!==e&&(i.locked||!h||1!=F(s.columns).length)&&(!i.locked||h||1!=p)&&(s._hideResizeHandle(),n===t&&(n=c>e),o=[i],s._reorderHeader(o,u,n),s.lockedHeader&&(E(s.thead),E(s.lockedHeader)),u.columns&&(u=N(u.columns),u=u[n?0:u.length-1]),i.columns&&(o=N(i.columns)),s._reorderContent(o,u,n),r=!!i.locked,r=r!=h,i.locked=h,l.splice(n?e:e+1,0,i),l.splice(e>c?c:c+1,1),s._templates(),s._updateColumnCellIndex(),s._updateTablesWidth(),s._applyLockedContainersWidth(),s._syncLockedHeaderHeight(),s._syncLockedContentHeight(),s._updateFirstColumnClass(),r&&(h?s.trigger(it,{column:i}):s.trigger(nt,{column:i})))},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find("thead"),t=y(e,P(this.columns))),y(this.thead,F(this.columns),t)},lockColumn:function(e){var t,i=this.columns;e="number"==typeof e?i[e]:ke(i,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(t=P(i).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,i=this.columns;e="number"==typeof e?i[e]:ke(i,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=P(i).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var i=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(i=N(P(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+i},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var i=t.attr(ue.attr("uid"));return this.dataSource.getByUid(i)},_editable:function(){var t,i=this,n=i.selectable&&i.selectable.options.multiple,r=i.options.editable,o=function(){var t=ge(),n=i._editContainer;!n||e.contains(n[0],t)||n[0]===t||e(t).closest(".k-animation-container").length||i.editable.end()&&i.closeCell()};r&&(t=i._editMode(),"incell"===t?r.update!==!1&&i.wrapper.on(rt+$e,"tr:not(.k-grouping-row) > td",function(t){var r=e(this),o=i.lockedTable&&r.closest("table")[0]===i.lockedTable[0];r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==i.tbody[0]&&!o||e(t.target).is(":input")||(i.editable?i.editable.end()&&(n&&e(ge()).blur(),i.closeCell(),i.editCell(r)):i.editCell(r))}).on("focusin"+$e,function(){clearTimeout(i.timer),i.timer=null}).on("focusout"+$e,function(){i.timer=setTimeout(o,1)}):r.update!==!1&&i.wrapper.on(rt+$e,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){t.preventDefault(),i.editRow(e(this).closest("tr"))}),r.destroy!==!1?i.wrapper.on(rt+$e,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){t.preventDefault(),t.stopPropagation(),i.removeRow(e(this).closest("tr"))}):i.wrapper.on(rt+$e,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),i._confirmation()||e.preventDefault()}))},editCell:function(t){var i,n,r,o;t=e(t),i=this,n=N(i.columns)[i.cellIndex(t)],r=i._modelForContainer(t),i.closeCell(),!r||r.editable&&!r.editable(n.field)||n.command||!n.field||(i._attachModelChange(r),i._editContainer=t,i.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:n.field,format:n.format,editor:n.editor,values:n.values},model:r,target:i,change:function(e){i.trigger(Le,{values:e.values,container:t,model:r})&&e.preventDefault()}}).data("kendoEditable"),o=t.parent().addClass("k-grid-edit-row"),i.lockedContent&&ee(o[0],i._relatedRow(o).addClass("k-grid-edit-row")[0]),i.trigger(Oe,{container:t,model:r}))},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),i=e[0].offsetWidth>t[0].clientWidth?ue.support.scrollbar():0;
this.lockedContent.height(t.height()-i)},_syncLockedContentHeight:function(){this.lockedTable&&(this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),J(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(rt+$e,"a.k-grid-cancel",e._editCancelClickHandler),t.off(rt+$e,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,i=e._modelForContainer(t);i&&i.unbind(je,e._modelChangeHandler)},closeCell:function(t){var i,n,r,o,s=this,a=s._editContainer;a&&(i=a.closest("tr").attr(ue.attr("uid")),o=s.dataSource.getByUid(i),t&&s.trigger("cancel",{container:a,model:o})||(a.removeClass("k-edit-cell"),n=N(s.columns)[s.cellIndex(a)],r=a.parent().removeClass("k-grid-edit-row"),s._destroyEditable(),s._displayCell(a,n,o),a.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(a),s.lockedContent&&ee(r.css("height","")[0],s._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,i){var n=this,r={storage:{},count:0},o=be({},ue.Template,n.options.templateSettings),s=ue.template(n._cellTmpl(t,r),o);r.count>0&&(s=Te(s,r.storage)),e.empty().html(s(i)),n.angular("compile",function(){return{elements:e,data:[{dataItem:i}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var i,n=this,r=n._editMode();"incell"!==r&&n.cancelRow(),t=e(t).hide(),i=n._modelForContainer(t),i&&!n.trigger(Be,{row:t,model:i})?(n.dataSource.remove(i),("inline"===r||"popup"===r)&&n.dataSource.sync()):"incell"===r&&n._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(i){var n,r,o,s=this;i instanceof ue.data.ObservableObject?n=i:(i=e(i),n=s._modelForContainer(i)),r=s._editMode(),s.cancelRow(),n&&(s._attachModelChange(n),"popup"===r?s._createPopupEditor(n):"inline"===r?s._createInlineEditor(i,n):"incell"===r&&e(i).children(Pe).each(function(){var i=e(this),r=N(s.columns)[i.index()];return n=s._modelForContainer(i),n&&(!n.editable||n.editable(r.field))&&r.field?(s.editCell(i),!1):t}),o=s.editView?s.editView.element:s._editContainer,o&&(this._editCancelClickHandler||(this._editCancelClickHandler=Te(this._editCancelClick,this)),o.on(rt+$e,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=Te(this._editUpdateClick,this)),o.on(rt+$e,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var i,n=this,r=n.options.navigatable,o=n.editable.options.model,s=n.editView?n.editView.element:n._editContainer;t.preventDefault(),t.stopPropagation(),n.trigger("cancel",{container:s,model:o})||(i=n.items().index(e(n.current()).parent()),n.cancelRow(),r&&(n.current(n.items().eq(i).children().filter(He).first()),ie(n.table,!0)))},_createPopupEditor:function(i){var n,r,o,s,a,l,c,d,u,h,p,f=this,m="<div "+ue.attr("uid")+'="'+i.uid+'" class="k-popup-edit-form'+(f._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',g=[],v=N(f.columns),y=f.options.editable,_=y.template,b=_e(y)?y.window:{},w=be({},ue.Template,f.options.templateSettings);if(b=b||{},_)for(typeof _===lt&&(_=window.unescape(_)),m+=ue.template(_,w)(i),o=0,s=v.length;s>o;o++)n=v[o],n.command&&(d=te(n.command,"edit"),d&&(r=d));else for(o=0,s=v.length;s>o;o++)n=v[o],n.command?n.command&&(d=te(n.command,"edit"),d&&(r=d)):(m+='<div class="k-edit-label"><label for="'+n.field+'">'+(n.title||n.field||"")+"</label></div>",i.editable&&!i.editable(n.field)||!n.field?(h={storage:{},count:0},a=ue.template(f._cellTmpl(n,h),w),h.count>0&&(a=Te(a,h.storage)),m+='<div class="k-edit-field">'+a(i)+"</div>"):(g.push({field:n.field,format:n.format,editor:n.editor,values:n.values}),m+="<div "+ue.attr("container-for")+'="'+n.field+'" class="k-edit-field"></div>'));r&&_e(r)&&(r.text&&_e(r.text)&&(l=r.text.update,c=r.text.cancel),r.attr&&(u=r.attr)),f._isMobile?(m+="</div></div>",f.editView=f.pane.append("<div data-"+ue.ns+'role="view" data-'+ue.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+ue.ns+'role="header" class="k-header">'+f._createButton({name:"update",text:l,attr:u})+(b.title||"Edit")+f._createButton({name:"canceledit",text:c,attr:u})+"</div>"+m+"</div>"),p=f._editContainer=f.editView.element.find(".k-popup-edit-form")):(m+='<div class="k-edit-buttons k-state-default">',m+=f._createButton({name:"update",text:l,attr:u})+f._createButton({name:"canceledit",text:c,attr:u}),m+="</div></div></div>",p=f._editContainer=e(m).appendTo(f.wrapper).eq(0).kendoWindow(be({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(n){if(n.userTriggered){if(n.sender.element.focus(),f.trigger("cancel",{container:p,model:i}))return n.preventDefault(),t;var r=f.items().index(e(f.current()).parent());f.cancelRow(),f.options.navigatable&&(f.current(f.items().eq(r).children().filter(He).first()),ie(f.table,!0))}}},b))),f.editable=f._editContainer.kendoEditable({fields:g,model:i,clearContainer:!1,target:f}).data("kendoEditable"),f._isMobile&&p.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),f._openPopUpEditor(),f.trigger(Oe,{container:p,model:i})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,i){var n,r,o,s=this,a=[];s.lockedContent&&(t=t.add(s._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(r=e(this),n=N(s.columns)[s.cellIndex(r)],n.command||!n.field||i.editable&&!i.editable(n.field)){if(n.command&&(o=te(n.command,"edit"))){r.empty();var t,l,c;_e(o)&&(o.text&&_e(o.text)&&(t=o.text.update,l=o.text.cancel),o.attr&&(c=o.attr)),e(s._createButton({name:"update",text:t,attr:c})+s._createButton({name:"canceledit",text:l,attr:c})).appendTo(r)}}else a.push({field:n.field,format:n.format,editor:n.editor,values:n.values}),r.attr(ue.attr("container-for"),n.field),r.empty()}),s._editContainer=t,s.editable=new ue.ui.Editable(t.addClass("k-grid-edit-row"),{target:s,fields:a,model:i,clearContainer:!1}),t.length>1&&(ee(t[0],t[1]),s._applyLockedContainersWidth()),s.trigger(Oe,{container:t,model:i})},cancelRow:function(){var e,t=this,i=t._editContainer;i&&(e=t._modelForContainer(i),t._destroyEditable(),t.dataSource.cancelChanges(e),t._displayRow("popup"!==t._editMode()?i:t.tbody.find("["+ue.attr("uid")+"="+e.uid+"]")))},saveRow:function(){var e=this,t=e._editContainer,i=e._modelForContainer(t),n=e.editable;t&&n&&n.end()&&!e.trigger(Le,{container:t,model:i})&&e.dataSource.sync()},_displayRow:function(t){var i,n,r,o=this,s=o._modelForContainer(t),a=t.hasClass("k-state-selected"),l=t.hasClass("k-alt");s&&(o.lockedContent&&(i=e((l?o.lockedAltRowTemplate:o.lockedRowTemplate)(s)),o._relatedRow(t.last()).replaceWith(i)),o.angular("cleanup",function(){return{elements:t.get()}}),n=e((l?o.altRowTemplate:o.rowTemplate)(s)),t.replaceWith(n),o.angular("compile",function(){return{elements:n.get(),data:[{dataItem:s}]}}),a&&o.options.selectable&&o.select(n.add(i)),i&&ee(n[0],i[0]),r=n.next(),r.hasClass("k-detail-row")&&r.is(":visible")&&n.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus"))},_showMessage:function(t,i){var n,r,o,s=this;return s._isMobile?(n=ue.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),r=e(n(t)).appendTo(s.view.element),o=s._actionSheet=new ue.mobile.ui.ActionSheet(r,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){var n=e(t.currentTarget).parent();n.hasClass("km-actionsheet-cancel")||s._removeRow(i)},popup:s._actionSheetPopupOptions}),o.open(i),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,i=t.options.editable,n=i===!0||typeof i===lt?t.options.messages.editable.confirmation:i.confirmation;return n===!1||null==n||(typeof n===at&&(n=n(t._modelForContainer(e))),t._showMessage({confirmDelete:i.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:i.cancelDelete||t.options.messages.editable.cancelDelete,title:n===!0?t.options.messages.editable.confirmation:n},e))},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger(Ye)&&e.dataSource.sync()},addRow:function(){var e,t,i,n,r,o,s=this,a=s.dataSource,l=s._editMode(),c=s.options.editable.createAt||"",d=a.pageSize(),u=a.view()||[];(s.editable&&s.editable.end()||!s.editable)&&("incell"!=l&&s.cancelRow(),e=a.indexOf(u[0]),"bottom"==c.toLowerCase()&&(e+=u.length,d&&!a.options.serverPaging&&u.length>=d&&(e-=1)),0>e&&(e=a.page()>a.totalPages()?(a.page()-1)*d:0),t=a.insert(e,{}),i=t.uid,n=s.lockedContent?s.lockedTable:s.table,r=n.find("tr["+ue.attr("uid")+"="+i+"]"),o=r.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(s._firstEditableColumnIndex(r)),"inline"===l&&r.length?s.editRow(r):"popup"===l?s.editRow(t):o.length&&s.editCell(o),"bottom"==c.toLowerCase()&&s.lockedContent&&(s.lockedContent[0].scrollTop=s.content[0].scrollTop=s.content[0].offsetHeight))},_firstEditableColumnIndex:function(e){var t,i,n,r=this,o=N(r.columns),s=r._modelForContainer(e);for(i=0,n=o.length;n>i;i++)if(t=o[i],s&&(!s.editable||s.editable(t.field))&&!t.command&&t.field)return i;return-1},_toolbar:function(){var t,i=this,n=i.wrapper,r=i.options.toolbar,o=i.options.editable;r&&(t=i.wrapper.find(".k-grid-toolbar"),t.length||(De(r)||(r=typeof r===lt?r:i._toolbarTmpl(r).replace(pt,"\\#"),r=Te(ue.template(r),i)),t=e('<div class="k-header k-grid-toolbar" />').html(r({})).prependTo(n),i.angular("compile",function(){return{elements:t.get()}})),o&&o.create!==!1&&t.on(rt+$e,".k-grid-add",function(e){e.preventDefault(),i.addRow()}).on(rt+$e,".k-grid-cancel-changes",function(e){e.preventDefault(),i.cancelChanges()}).on(rt+$e,".k-grid-save-changes",function(e){e.preventDefault(),i.saveChanges()}),t.on(rt+$e,".k-grid-excel",function(e){e.preventDefault(),i.saveAsExcel()}),t.on(rt+$e,".k-grid-pdf",function(e){e.preventDefault(),i.saveAsPDF()}))},_toolbarTmpl:function(e){var t,i,n=this,r="";if(xe(e))for(t=0,i=e.length;i>t;t++)r+=n._createButton(e[t]);return r},_createButton:function(e){var i,r=e.template||vt,o=typeof e===lt?e:e.name||e.text,s=xt[o]?xt[o].className:"k-grid-"+(o||"").replace(/\s/g,""),a={className:s,text:o,imageClass:"",attr:"",iconClass:""},l=this.options.messages.commands;if(!(o||_e(e)&&e.template))throw Error("Custom commands should have name specified");return _e(e)?(e.className&&Ce(a.className,e.className.split(" "))<0?e.className+=" "+a.className:e.className===t&&(e.className=a.className),"edit"===o&&_e(e.text)&&(e=be(!0,{},e),e.text=e.text.edit),e.attr&&(_e(e.attr)&&(e.attr=n(e.attr)),typeof e.attr===lt&&(i=e.attr.match(/class="(.+?)"/),i&&Ce(i[1],e.className.split(" "))<0&&(e.className+=" "+i[1]))),a=be(!0,a,xt[o],{text:l[o]},e)):a=be(!0,a,xt[o],{text:l[o]}),ue.template(r)(a)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(rt+$e,t._groupableClickHandler):t._groupableClickHandler=function(i){var n=e(this),r=n.closest("tr");n.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),i.preventDefault(),i.stopPropagation()},t._isLocked()?t.lockedTable.on(rt+$e,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler):t.table.on(rt+$e,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,i=t.wrapper,n=t.options.groupable,r=Ne+"["+ue.attr("field")+"]",o=t.content?".k-grid-header:first "+r:"table:first>.k-grid-header "+r;n&&n.enabled!==!1&&(i.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(i),t.groupable&&t.groupable.destroy(),t.groupable=new fe(i,be({},n,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:o,filter:o,allowDrag:t.options.reorderable})))},_continuousItems:function(t,i){var n,r,o,s,a,l,c,d;if(this.lockedContent){for(n=this,r=n.table.add(n.lockedTable),o=e(t,r[0]),s=e(t,r[1]),a=i?P(n.columns).length:1,l=i?n.columns.length-a:1,c=[],d=0;o.length>d;d+=a)Se.apply(c,o.slice(d,d+a)),Se.apply(c,s.splice(0,l));return c}},_selectable:function(){var i,n,r,o,s=this,a=[],l=s._isLocked(),c=s.options.selectable;c&&(s.selectable&&s.selectable.destroy(),c=ue.ui.Selectable.parseOptions(c),i=c.multiple,n=c.cell,s._hasDetails()&&(a[a.length]=".k-detail-row"),(s.options.groupable||s._hasFooters())&&(a[a.length]=".k-grouping-row,.k-group-footer"),a=a.join(","),""!==a&&(a=":not("+a+")"),r=s.table,l&&(r=r.add(s.lockedTable)),o=">"+(n?Fe:"tbody>tr"+a),s.selectable=new ue.ui.Selectable(r,{filter:o,aria:!0,multiple:i,change:function(){s.trigger(je)},useAllItems:l&&i&&n,relatedTarget:function(t){var i,r,o,a;if(!n&&l){for(r=e(),o=0,a=t.length;a>o;o++)i=s._relatedRow(t[o]),Ce(i[0],t)<0&&(r=r.add(i));return r}},continuousItems:function(){return s._continuousItems(o,n)}}),s.options.navigatable&&r.on("keydown"+$e,function(o){var a=s.current(),c=o.target;if(o.keyCode===ye.SPACEBAR&&e.inArray(c,r)>-1&&!a.is(".k-edit-cell,.k-header")&&a.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),a=n?a:a.parent(),l&&!n&&(a=a.add(s._relatedRow(a))),i)if(o.ctrlKey){if(a.hasClass(Je))return a.removeClass(Je),s.trigger(je),t}else s.selectable.clear();else s.selectable.clear();s.selectable.value(a)}}))},_relatedRow:function(t){var i,n,r=this.lockedTable;return t=e(t),r?(i=t.closest(this.table.add(this.lockedTable)),n=i.find(">tbody>tr").index(t),i=i[0]===this.table[0]?r:this.table,i.find(">tbody>tr").eq(n)):t},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(je)},select:function(i){var n=this,r=n.selectable;return i=e(i),i.length?(r.options.multiple||(r.clear(),i=i.first()),n._isLocked()&&(i=i.add(i.map(function(){return n._relatedRow(this)}))),r.value(i),t):r.value()},current:function(e){var i,n=this,r=n.options.scrollable,o=n._current,s=n.table.add(n.thead.parent());return e!==t&&e.length&&(o&&o[0]===e[0]||(o&&(o.removeClass(Ze).removeAttr("id"),s.removeAttr("aria-activedescendant")),e.attr("id",n._cellId),n._current=e.addClass(Ze),s.attr("aria-activedescendant",n._cellId),e.length&&r&&(i=e.closest("table").parent(),i.is(".k-grid-content")?n._scrollTo(e.parent()[0],n.content[0]):i.is(".k-grid-content-locked")&&(n._scrollTo(n._relatedRow(e.parent())[0],n.content[0]),n.lockedContent[0].scrollTop=n.content[0].scrollTop),i.is(".k-grid-content-locked,.k-grid-header-locked")||(r.virtual?n._scrollTo(e[0],n.content.find(">.k-virtual-scrollable-wrap")[0]):n._scrollTo(e[0],n.content[0]))))),n._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Ze),this._current=null)},_scrollTo:function(e,t){var i=e.tagName.toLowerCase(),n="td"===i||"th"===i,r=e[n?"offsetLeft":"offsetTop"],o=e[n?"offsetWidth":"offsetHeight"],s=t[n?"scrollLeft":"scrollTop"],a=t[n?"clientWidth":"clientHeight"],l=r+o,c=0;c=s>r?r:l>s+a?a>=o?l-a:r:s,t[n?"scrollLeft":"scrollTop"]=c},_navigatable:function(){var t=this,i=Te(t.current,t),n=t.table.add(t.lockedTable),r=t.thead.parent().add(e(">table",t.lockedHeader)),o=(t._isLocked(),n),s=ue.support.isRtl(t.element);t.options.navigatable&&(t.options.scrollable&&(o=n.add(r),r.attr(st,-1)),o.off("mousedown"+$e+" focus"+$e+" focusout"+$e+" keydown"+$e),r.on("keydown"+$e,function(e){e.altKey&&e.keyCode==ye.DOWN&&(i().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())}).find("a.k-link").attr("tabIndex",-1),n.attr(st,Ae.max(n.attr(st)||0,0)).on("mousedown"+$e+" keydown"+$e,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),o.on(ue.support.touch?"touchstart"+$e:"mousedown"+$e,ze+">"+He,Te(ne,t)).on("focus"+$e,function(){if(!ue.support.touch){var t=i();t&&t.is(":visible")?t.addClass(Ze):i(e(this).find(Re)),n.attr(st,-1),r.attr(st,-1),e(this).attr(st,0)}}).on("focusout"+$e,function(){var e=i();e&&e.removeClass(Ze)}).on("keydown"+$e,function(o){var a,l,c,d,u,h=o.keyCode,p=!1,f=!o.isDefaultPrevented()&&!e(o.target).is(":button,a,:input,a>.k-icon"),m=t.options.pageable,g=t.dataSource,v="incell"==t._editMode(),y=o.shiftKey,_=Te(t._relatedRow,t),b=i();if(b&&b.is("th")&&(f=!0),f&&h==ye.UP)i(oe(b,o.currentTarget,n,r,!0)),p=!0;else if(f&&h==ye.DOWN)i(oe(b,o.currentTarget,n,r)),p=!0;else if(f&&h==(s?ye.RIGHT:ye.LEFT))i(se(b,o.currentTarget,n,r,_)),p=!0;else if(f&&h==(s?ye.LEFT:ye.RIGHT))i(ae(b,o.currentTarget,n,r,_)),p=!0;else if(f&&m&&ye.PAGEDOWN==h)g.page(g.page()+1),p=!0;else if(f&&m&&ye.PAGEUP==h)g.page(g.page()-1),p=!0;else if(h==ye.ENTER||ye.F2==h){if(b=b?b:n.find(Re),!b.length)return;e(o.target).is("table")||e.contains(b[0],o.target)||(b=e(o.target).closest("[role=gridcell]")),b.is("th")?(b.find(".k-link").click(),p=!0):b.parent().is(".k-master-row,.k-grouping-row")?(b.parent().find(".k-icon:first").click(),p=!0):(c=b.find(":kendoFocusable:first"),!b.hasClass("k-edit-cell")&&c[0]&&b.hasClass("k-state-focused")?(c.focus(),p=!0):t.options.editable&&!e(o.target).is(":button,.k-button,textarea")&&(d=e(o.target).closest("[role=gridcell]"),d[0]||(d=b),t._handleEditing(d,!1,v?o.currentTarget:n[0]),p=!0))}else ye.ESC==h?(a=ge(),b&&e.contains(b[0],a)&&!b.hasClass("k-edit-cell")&&!b.parent().hasClass("k-grid-edit-row")?(ie(o.currentTarget,!0),p=!0):!t._editContainer||b&&!t._editContainer.has(b[0])&&b[0]!==t._editContainer[0]||(v?t.closeCell(!0):(l=e(b).parent().index(),a&&a.blur(),t.cancelRow(),l>=0&&t.current(n.find(">tbody>tr").eq(l).children().filter(He).first())),_t.msie&&9>_t.version&&document.body.focus(),ie(v?o.currentTarget:n[0],!0),p=!0)):ye.TAB==h&&(b=e(b),t.options.editable&&v&&(u=e(ge()).closest(".k-edit-cell"),u[0]&&u[0]!==b[0]&&(b=u)),u=le(b,o.currentTarget,n,_,y),!b.is("th")&&u.length&&t.options.editable&&v&&(t._handleEditing(b,u,u.closest(n)),p=!0));p&&(o.preventDefault(),o.stopPropagation())}))},_handleEditing:function(i,n,r){var o,s,a=this,l=e(ge()),c=a._editMode(),d=_t.msie,u=d&&9>_t.version,h=a._editContainer;if(r=e(r),s="incell"==c?i.hasClass("k-edit-cell"):i.parent().hasClass("k-grid-edit-row"),a.editable){if(e.contains(h[0],l[0])&&(_t.opera||u?l.change().triggerHandler("blur"):(l.blur(),d&&l.blur())),!a.editable)return ie(r),t;if(!a.editable.end())return a.current("incell"==c?h:h.children().filter(Pe).first()),o=h.find(":kendoFocusable:first")[0],o&&o.focus(),t;"incell"==c?a.closeCell():(a.saveRow(),s=!0)}n&&a.current(n),u&&document.body.focus(),ie(r,!0),(!s&&!n||n)&&("incell"==c?a.editCell(a.current()):a.editRow(a.current().parent()))},_wrapper:function(){var e=this,t=e.table,i=e.options.height,n=e.element;n.is("div")||(n=n.wrap("<div/>").parent()),e.wrapper=n.addClass("k-grid k-widget"),i&&(e.wrapper.css(ot,i),t.css(ot,"auto")),e._initMobile()},_initMobile:function(){var t,i=this.options,n=this;this._isMobile=i.mobile===!0&&ue.support.mobileOS||"phone"===i.mobile||"tablet"===i.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+ue.ns+'role="view" data-'+ue.ns+'init-widgets="false"></div>').parent(),this.pane=ue.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},i.height&&this.pane.element.parent().css(ot,i.height),this._editAnimation="slide",this.view.bind("show",function(){n._isLocked()&&(n._updateTablesWidth(),n._applyLockedContainersWidth(),n._syncLockedContentHeight(),n._syncLockedHeaderHeight(),n._syncLockedFooterHeight())}))},_tbody:function(){var t,i=this,n=i.table;t=n.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(n)),i.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,i,n,r,o=this,s=o.options,a=s.scrollable,l=a!==!0&&a.virtual&&!o.virtualScrollable,c=!ue.support.kineticScrollNeeded||l?ue.support.scrollbar():0;a&&(t=o.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(o.table)),t.css(yt?"padding-left":"padding-right",a.virtual?c+1:c),i=e('<table role="grid" />'),bt&&i.attr("cellspacing",0),i.append(o.thead),t.empty().append(e('<div class="k-grid-header-wrap" />').append(i)),o.content=o.table.parent(),o.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(o.content=o.content.parent()),o.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(o.content=o.table.wrap('<div class="k-grid-content" />').parent()),l&&(o.virtualScrollable=new kt(o.content,{dataSource:o.dataSource,itemHeight:function(){return o._averageRowHeight()}})),o.scrollables=t.children(".k-grid-header-wrap"),n=o.wrapper.find(".k-grid-footer"),n.length&&(o.scrollables=o.scrollables.add(n.children(".k-grid-footer-wrap"))),a.virtual?o.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+$e).bind("scroll"+$e,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}):(o.content.unbind("scroll"+$e).bind("scroll"+$e,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}),r=o.content.data("kendoTouchScroller"),r&&r.destroy(),r=ue.touchScroller(o.content),r&&r.movable&&(o.touchScroller=r,r.movable.bind("change",function(e){o.scrollables.scrollLeft(-e.sender.x),o.lockedContent&&o.lockedContent.scrollTop(-e.sender.y)}),o.one(Qe,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_setContentWidth:function(){var t,i=this,n="k-grid-content-expander",r='<div class="'+n+'"></div>',o=i.resizable;i.options.scrollable&&i.wrapper.is(":visible")&&(t=i.table.parent().children("."+n),i._setContentWidthHandler=Te(i._setContentWidth,i),i.dataSource&&i.dataSource.view().length?t[0]&&(t.remove(),o&&o.unbind("resize",i._setContentWidthHandler)):(t[0]||(t=e(r).appendTo(i.table.parent()),o&&o.bind("resize",i._setContentWidthHandler)),i.thead&&t.width(i.thead.width())),i._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),i=t.parent(),n=this.wrapper[0].clientWidth,r=this._groups(),o=ue.support.scrollbar(),s=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),a=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),l=D(s),c=D(a);r>0&&(l+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*r),l>=n&&(l=n-3*o),this.lockedHeader.add(this.lockedContent).width(l),i[0].style.width=i.parent().width()-l-2+"px",t.add(this.table).width(c),this.virtualScrollable&&(n-=o),this.content[0].style.width=n-l-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(l),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=i[0].clientWidth+"px",e.children().first().width(c))}},_setContentHeight:function(){var e,t=this,i=t.options,n=t.wrapper.innerHeight(),r=t.wrapper.children(".k-grid-header"),o=ue.support.scrollbar();i.scrollable&&t.wrapper.is(":visible")&&(n-=r.outerHeight(),t.pager&&(n-=t.pager.element.outerHeight()),i.groupable&&(n-=t.wrapper.children(".k-grouping-header").outerHeight()),i.toolbar&&(n-=t.wrapper.children(".k-grid-toolbar").outerHeight()),t.footerTemplate&&(n-=t.wrapper.children(".k-grid-footer").outerHeight()),e=function(e){var t,i;return!!e[0].style.height||(t=e.height(),e.height("auto"),i=e.height(),t!=i?(e.height(""),!0):(e.height(""),!1))},e(t.wrapper)&&(n>2*o?(t.lockedContent&&(o=t.table[0].offsetWidth>t.table.parent()[0].clientWidth?o:0,t.lockedContent.height(n-o)),t.content.height(n)):t.content.height(2*o+1)))},_averageRowHeight:function(){var e,t=this,i=t._items(t.tbody).length,n=t._rowHeight;return 0===i?n:(t._rowHeight||(t._rowHeight=n=t.table.outerHeight()/i,t._sum=n,t._measures=1),e=t.table.outerHeight()/i,n!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),n)},_dataSource:function(){var e,i=this,n=i.options,r=n.dataSource;r=xe(r)?{data:r}:r,_e(r)&&(be(r,{table:i.table,fields:i.columns}),e=n.pageable,_e(e)&&e.pageSize!==t&&(r.pageSize=e.pageSize)),i.dataSource&&i._refreshHandler?i.dataSource.unbind(je,i._refreshHandler).unbind(Ee,i._progressHandler).unbind(Ie,i._errorHandler):(i._refreshHandler=Te(i.refresh,i),i._progressHandler=Te(i._requestStart,i),i._errorHandler=Te(i._error,i)),i.dataSource=pe.create(r).bind(je,i._refreshHandler).bind(Ee,i._progressHandler).bind(Ie,i._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var i,n,r,o,s,a,l,c,d,u=this,h=u.tbody,p=t.model,f=u.tbody.find("tr["+ue.attr("uid")+"="+p.uid+"]"),m=f.hasClass("k-alt"),g=u._items(h).index(f),v=u.lockedContent;if(v&&(i=u._relatedRow(f)),f.add(i).children(".k-edit-cell").length&&!u.options.rowTemplate)f.add(i).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){n=e(this),r=N(u.columns)[u.cellIndex(n)],r.field===t.field&&(n.hasClass("k-edit-cell")?n.addClass("k-dirty-cell"):(u._displayCell(n,r,p),e('<span class="k-dirty"/>').prependTo(n)))});else if(!f.hasClass("k-grid-edit-row")){for(a=e().add(f),v&&(o=(m?u.lockedAltRowTemplate:u.lockedRowTemplate)(p),a=a.add(i),i.replaceWith(o)),o=(m?u.altRowTemplate:u.rowTemplate)(p),f.replaceWith(o),o=u._items(h).eq(g),v&&(f=f.add(i),i=u._relatedRow(o)[0],ee(o[0],i),o=o.add(i)),s=u.options.selectable,s&&f.hasClass("k-state-selected")&&u.select(o),c=a.children(":not(.k-group-cell,.k-hierarchy-cell)"),l=o.children(":not(.k-group-cell,.k-hierarchy-cell)"),g=0,d=u.columns.length;d>g;g++)r=u.columns[g],n=l.eq(g),s&&c.eq(g).hasClass("k-state-selected")&&n.addClass("k-state-selected"),r.field===t.field&&e('<span class="k-dirty"/>').prependTo(n);u.trigger("itemChange",{item:o,data:p,ns:he})}},_pageable:function(){var t,i=this,n=i.options.pageable;n&&(t=i.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(i.wrapper)),i.pager&&i.pager.destroy(),i.pager="object"==typeof n&&n instanceof ue.ui.Pager?n:new ue.ui.Pager(t,be({},n,{dataSource:i.dataSource})))},_footer:function(){var t,i,n,r,s=this,a=s.dataSource.aggregates(),l="",c=s.footerTemplate,d=s.options,u=s.footer||s.wrapper.find(".k-grid-footer");c?(a=Me(a)?o(s.dataSource.aggregate()):a,l=e(s._wrapFooter(c(a))),u.length?(i=l,s.angular("cleanup",function(){return{elements:u.get()}}),u.replaceWith(i),u=s.footer=i):u=s.footer=d.scrollable?d.pageable?l.insertBefore(s.wrapper.children("div.k-grid-pager")):l.appendTo(s.wrapper):l.insertBefore(s.tbody),s.angular("compile",function(){return{elements:u.find("td").get(),data:we(s.columns,function(e){return{column:e,aggregate:a[e.field]}})}})):u&&!s.footer&&(s.footer=u),u.length&&(d.scrollable&&(t=u.attr("tabindex",-1).children(".k-grid-footer-wrap"),s.scrollables=s.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).add(t)),s._footerWidth&&u.find("table").css("width",s._footerWidth),t&&(n=s.content.scrollLeft(),r=d.scrollable!==!0&&d.scrollable.virtual&&!s.virtualScrollable,r&&(n=s.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(n))),s.lockedContent&&(s._appendLockedColumnFooter(),s._applyLockedContainersWidth(),s._syncLockedFooterHeight())},_wrapFooter:function(t){var i=this,n="",r=ue.support.mobileOS?0:ue.support.scrollbar();return i.options.scrollable?(n=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(bt?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),i._appendCols(n.find("table")),n.css(yt?"padding-left":"padding-right",r),n):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,i,n,r,o,s,a,l,c,d=this,u=N(d.columns),h=d.options,p=h.columnMenu,f=ke(d.columns,function(e){return e.columns!==t}).length>0,m=this._isMobile,g=function(e){d.trigger(We,{field:e.field,container:e.container})},v=function(e){ie(e.closest("table"),!0)},y=h.$angular;if(p)for("boolean"==typeof p&&(p={}),s=$(d.thead),a=0,l=s.length;l>a;a++)i=u[a],c=s.eq(a),i.command||!i.field&&!c.attr("data-"+ue.ns+"field")||(e=c.data("kendoColumnMenu"),e&&e.destroy(),r=i.sortable!==!1&&p.sortable!==!1&&h.sortable!==!1&&be({},h.sortable,{compare:(i.sortable||{}).compare}),o=!(!h.filterable||i.filterable===!1||p.filterable===!1)&&be({pane:d.pane},i.filterable,h.filterable),n={dataSource:d.dataSource,values:i.values,columns:p.columns,sortable:r,filterable:o,messages:p.messages,owner:d,closeCallback:v,init:g,pane:d.pane,filter:m?":not(.k-column-active)":"",lockedColumns:!f&&i.lockable!==!1&&P(u).length>0},y&&(n.$angular=y),c.kendoColumnMenu(n))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,i,n,r,o,s,a=this,l=N(a.columns),c=function(e){a.trigger(Ve,{field:e.field,container:e.container})},d=function(e){ie(e.closest("table"),!0)},u=a.options.filterable;if(u&&typeof u.mode==lt&&-1==u.mode.indexOf("menu")&&(u=!1),u&&!a.options.columnMenu)for(t=$(a.thead),n=0,r=t.length;r>n;n++)i=t.eq(n),l[n].filterable===!1||l[n].command||!l[n].field&&!i.attr("data-"+ue.ns+"field")||(e=i.data("kendoFilterMenu"),e&&e.destroy(),o=l[n].filterable,s=be({},u,o,{dataSource:a.dataSource,values:l[n].values,closeCallback:d,init:c,pane:a.pane}),o&&o.messages&&(s.messages=be(!0,{},u.messages,o.messages)),i.kendoFilterMenu(s))},_filterRow:function(){var t,i,n,r,o,s,a,l,c,d,u,h,p=this;if(p._hasFilterRow())for(t=N(p.columns),i=p.options.filterable,n=p.thead.find(".k-filter-row"),this._updateHeader(this.dataSource.group().length),r=0;t.length>r;r++)if(s=t[r],a=p.options.filterable.operators,l=!1,c=e("<th/>"),d=s.field,s.hidden&&c.hide(),n.append(c),d&&s.filterable!==!1){if(u=s.filterable&&s.filterable.cell||{},o=p.options.dataSource,o instanceof pe&&(o=p.options.dataSource.options),h=be(!0,{},i.messages),s.filterable&&be(!0,h,s.filterable.messages),u.enabled===!1){c.html("&nbsp;");continue}u.dataSource&&(o=u.dataSource,l=!0),s.filterable&&s.filterable.operators&&(a=s.filterable.operators),e("<span/>").attr(ue.attr("field"),d).kendoFilterCell({dataSource:p.dataSource,suggestDataSource:o,customDataSource:l,field:d,messages:h,values:s.values,template:u.template,delay:u.delay,inputWidth:u.inputWidth,suggestionOperator:u.suggestionOperator,minLength:u.minLength,dataTextField:u.dataTextField,operator:u.operator,operators:a,showOperators:u.showOperators}).appendTo(c)}else c.html("&nbsp;")},_sortable:function(){var e,t,i,n,r,o,s=this,a=N(s.columns),l=s.options.sortable;
if(l){for(n=$(s.thead),r=0,o=n.length;o>r;r++)e=a[r],e.sortable!==!1&&!e.command&&e.field&&(i=n.eq(r),t=i.data("kendoColumnSorter"),t&&t.destroy(),i.attr("data-"+ue.ns+"field",e.field).kendoColumnSorter(be({},l,e.sortable,{dataSource:s.dataSource,aria:!0,filter:":not(.k-column-active)"})));n=null}},_columns:function(t){var i,n,r,o=this,s=o.table,a=s.find("col"),l=o.options.dataSource;if(t=t.length?t:we(s.find("th"),function(t,i){t=e(t);var n=t.attr(ue.attr("sortable")),r=t.attr(ue.attr("filterable")),o=t.attr(ue.attr("type")),s=t.attr(ue.attr("groupable")),l=t.attr(ue.attr("field")),c=t.attr(ue.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:o,sortable:"false"!==n,filterable:"false"!==r,groupable:"false"!==s,menu:c,template:t.attr(ue.attr("template")),width:a.eq(i).css("width")}}),i=!(o.table.find("tbody tr").length>0&&(!l||!l.transport)),o.options.scrollable){if(r=t,n=P(t),t=F(t),n.length>0&&0===t.length)throw Error("There should be at least one non locked columns");j(o.element.find("tr:has(th):first").find("th:not(.k-group-cell)"),r),t=n.concat(t)}o.columns=c(t,i)},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,r,o){var s,a,l,c,d=this,u=be({},ue.Template,d.options.templateSettings),h=t.length,p={storage:{},count:0},f=d._hasDetails(),m=[],g=d._groups();if(!e){for(e="<tr",r&&m.push("k-alt"),f&&m.push("k-master-row"),m.length&&(e+=' class="'+m.join(" ")+'"'),h&&(e+=" "+ue.attr("uid")+'="#='+ue.expr("uid",u.paramName)+'#"'),e+=" role='row'>",g>0&&!o&&(e+=i(g)),f&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),s=0;h>s;s++)l=t[s],a=l.template,c=typeof a,e+="<td"+n(l.attributes)+" role='gridcell'>",e+=d._cellTmpl(l,p),e+="</td>";e+="</tr>"}return e=ue.template(e,u),p.count>0?Te(e,p.storage):e},_headerCellText:function(e){var t=this,i=be({},ue.Template,t.options.templateSettings),n=e.headerTemplate,r=typeof n,o=e.title||e.field||"";return r===at?o=ue.template(n,i)({}):r===lt&&(o=n),o},_cellTmpl:function(e,t){var i,n,r=this,o=be({},ue.Template,r.options.templateSettings),s=e.template,a=o.paramName,l=e.field,c="",d=e.format,u=typeof s,h=e.values;if(e.command){if(xe(e.command)){for(i=0,n=e.command.length;n>i;i++)c+=r._createButton(e.command[i]);return c.replace(pt,"\\#")}return r._createButton(e.command).replace(pt,"\\#")}return u===at?(t.storage["tmpl"+t.count]=s,c+="#=this.tmpl"+t.count+"("+a+")#",t.count++):u===lt?c+=s:h&&h.length&&_e(h[0])&&"value"in h[0]&&l?(c+="#var v ="+ue.stringify(q(h)).replace(pt,"\\#")+"#",c+="#var f = v[",o.useWithBlock||(c+=a+"."),c+=l+"]#",c+="${f != null ? f : ''}"):(c+=e.encoded?"#:":"#=",d&&(c+='kendo.format("'+d.replace(ht,"\\$1")+'",'),l?(l=ue.expr(l,a),c+=l+"==null?'':"+l):c+="''",d&&(c+=")"),c+="#"),c},_templates:function(){var t=this,i=t.options,n=t.dataSource,r=n.group(),o=t.footer||t.wrapper.find(".k-grid-footer"),s=n.aggregate(),a=N(t.columns),l=N(P(t.columns)),c=i.scrollable?N(F(t.columns)):a;if(i.scrollable&&l.length){if(i.rowTemplate||i.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(i.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(i.altRowTemplate||i.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(i.rowTemplate,l),t.lockedAltRowTemplate=t._tmpl(i.altRowTemplate||i.rowTemplate,l,!0)}else t.rowTemplate=t._tmpl(i.rowTemplate,c),t.altRowTemplate=t._tmpl(i.altRowTemplate||i.rowTemplate,c,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(i.detailTemplate||"")),(t._group&&!Me(s)||!Me(s)&&!o.length||ke(a,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(a,s,"footerTemplate","k-footer-template")),r&&ke(a,function(e){return e.groupFooterTemplate}).length&&(s=e.map(r,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(c,s,"groupFooterTemplate","k-group-footer",l.length),i.scrollable&&l.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(l,s,"groupFooterTemplate","k-group-footer")))},_footerTmpl:function(e,t,r,s,a){var l,c,d,u,h,p=this,f=be({},ue.Template,p.options.templateSettings),m=f.paramName,g="",v={},y=0,_={},b=p._groups(),w=o(t);for(g+='<tr class="'+s+'">',b>0&&!a&&(g+=i(b)),p._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),l=0,c=e.length;c>l;l++)h=e[l],d=h[r],u=typeof d,g+="<td"+n(h.footerAttributes)+">",d?(u!==at&&(_=w[h.field]?be({},f,{paramName:m+"['"+h.field+"']"}):{},d=ue.template(d,_)),v["tmpl"+y]=d,g+="#=this.tmpl"+y+"("+m+")#",y++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=ue.template(g,f),y>0?Te(g,v):g},_detailTmpl:function(e){var t=this,n="",r=be({},ue.Template,t.options.templateSettings),o=r.paramName,s={},a=0,l=t._groups(),c=f(N(t.columns)).length,d=typeof e;return n+='<tr class="k-detail-row">',l>0&&(n+=i(l)),n+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(c?' colspan="'+c+'"':"")+">",d===at?(s["tmpl"+a]=e,n+="#=this.tmpl"+a+"("+o+")#",a++):n+=e,n+="</td></tr>",n=ue.template(n,r),a>0?Te(n,s):n},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[Ue]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,i=t&&typeof t.mode==lt&&-1!=t.mode.indexOf("row"),n=this.columns,r=e.grep(n,function(e){return e.filterable===!1});return n.length&&r.length==n.length&&(i=!1),i},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&P(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(rt+$e,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(i){var n,r,o=e(this),s=o.hasClass("k-plus"),a=o.closest("tr.k-master-row"),l=t.detailTemplate,c=t._hasDetails();return o.toggleClass("k-plus",!s).toggleClass("k-minus",s),n=a.next(),c&&!n.hasClass("k-detail-row")&&(r=t.dataItem(a),n=e(l(r)).addClass(a.hasClass("k-alt")?"k-alt":"").insertAfter(a),t.angular("compile",function(){return{elements:n.get(),data:[{dataItem:r}]}}),t.trigger(Ue,{masterRow:a,detailRow:n,data:r,detailCell:n.find(".k-detail-cell")})),t.trigger(s?Ke:Xe,{masterRow:a,detailRow:n}),n.toggle(s),t._current&&t._current.attr("aria-expanded",s),i.preventDefault(),!1})},dataItem:function(t){if(t=e(t)[0],!t)return null;var i,n,r=this.tbody.children(),o=/k-grouping-row|k-detail-row|k-group-footer/,s=t.sectionRowIndex;for(n=s,i=0;s>i;i++)o.test(r[i].className)&&n--;return this._data[n]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(e,i){var r,o,s,a,l,c=this,d="",u=N(c.columns);for(r=0,a=e.length;a>r;r++)o=e[r].column||e[r],s=c._headerCellText(o),l=Ce(o,u),o.command?(d+="<th"+n(o.headerAttributes),i&&!e[r].colSpan&&(d+=" rowspan='"+i+"'"),l>-1&&(d+=ue.attr("index")+"='"+l+"'"),d+=">"+s+"</th>"):(d+="<th role='columnheader' "+ue.attr("field")+"='"+(o.field||"")+"' ",i&&!e[r].colSpan&&(d+=" rowspan='"+i+"'"),e[r].colSpan>1&&(d+='colspan="'+(e[r].colSpan-T(o.columns))+'" ',d+=ue.attr("colspan")+"='"+e[r].colSpan+"'"),o.title&&(d+=ue.attr("title")+'="'+o.title.replace(/'/g,"'")+'" '),o.groupable!==t&&(d+=ue.attr("groupable")+"='"+o.groupable+"' "),o.aggregates&&o.aggregates.length&&(d+=ue.attr("aggregates")+"='"+o.aggregates+"'"),l>-1&&(d+=ue.attr("index")+"='"+l+"'"),d+=n(o.headerAttributes),d+=">"+s+"</th>");return d},_appendLockedColumnContent:function(){var t,i,n,r,o,s=this.columns,a=this.table.find("colgroup"),l=a.find("col:not(.k-group-col,.k-hierarchy-col)"),c=e(),d=0,u=0;for(t=0,i=s.length;i>t;t++)if(s[t].locked)if(p(s[t])){for(r=1,s[t].columns&&(r=N(s[t].columns).length-T(s[t].columns)),r=r||1,o=0;r>o;o++)c=c.add(l.eq(t+u+o-d));u+=r-1}else d++;n=e('<div class="k-grid-content-locked"><table'+(bt?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),a.detach(),n.find("colgroup").append(c),a.insertBefore(this.table.find("tbody")),this.lockedContent=n.insertBefore(this.content),this.lockedTable=n.children("table")},_appendLockedColumnFooter:function(){var t,i,n=this,r=n.footer,o=r.find(".k-footer-template>td"),s=r.find(".k-grid-footer-wrap>table>colgroup>col"),a=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),l=n._groups(),c=e(),d=e();for(c=c.add(o.filter(".k-group-cell")),t=0,i=N(P(n.columns)).length;i>t;t++)c=c.add(o.eq(t+l));for(d=d.add(s.filter(".k-group-col")),t=0,i=N(H(n.columns)).length;i>t;t++)d=d.add(s.eq(t+l));c.appendTo(a.find("tr")),d.appendTo(a.find("colgroup")),n.lockedFooter=a.prependTo(r)},_appendLockedColumnHeader:function(t){var i,n,r,o,s,a,l,c,d,u,h,f=this,g=this.columns,v=[],y=0,_=e(),b=f._hasFilterRow(),w=0,k=e(),x=0,C=e(),S=f.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),D=f.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),A=f.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),P=0;for(i=0,r=g.length;r>i;i++){if(g[i].locked){if(l=D.eq(i),x=N(g[i].columns||[]).length,p(g[i])){for(g[i].columns&&(c=x-T(g[i].columns)),c=c||1,d=0;c>d;d++)_=_.add(S.eq(i+P+d-y));P+=c-1}for(I([g[i]],L(l),v,0,0),x=x||1,u=0;x>u;u++)k=k.add(A.eq(w+u));w+=x}g[i].columns&&(y+=T(g[i].columns)),p(g[i])||y++}if(v.length){for(n='<div class="k-grid-header-locked" style="width:1px"><table'+(bt?' cellspacing="0"':"")+"><colgroup/><thead>",n+=Array(v.length+1).join("<tr></tr>"),n+=(b?'<tr class="k-filter-row" />':"")+"</thead></table></div>",a=e(n),S=a.find("colgroup"),S.append(f.thead.prev().find("col.k-group-col").add(_)),o=a.find("thead tr:not(.k-filter-row)"),i=0,r=v.length;r>i;i++)C=m(v[i]),o.eq(i).append(f.thead.find("tr:eq("+i+") .k-group-cell").add(C));h=E(this.thead),h>v.length&&M(a,h),s=a.find(".k-filter-row"),s.append(f.thead.find(".k-filter-row .k-group-cell").add(k)),this.lockedHeader=a.prependTo(t),this._syncLockedHeaderHeight()}},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);ue.destroy(e),e.off($e).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,i,n,r,o=this,s=o.columns,a=o._hasDetails()&&s.length,l=o._hasFilterRow(),c="",d=o.table.find(">thead"),u=o.element.find("thead:first").length>0;if(d.length||(d=e("<thead/>").insertBefore(o.tbody)),o.lockedHeader&&o.thead?(i=o.thead.find("tr:has(th):not(.k-filter-row)").html(""),o._removeLockedContainers()):i=o.element.find(u?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),!i.length&&(i=d.children().first(),!i.length)){for(n=[{rowSpan:1,cells:[],index:0}],o._prepareColumns(n,s),t=0;n.length>t;t++)c+="<tr>",a&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),c+=o._createHeaderCells(n[t].cells,n[t].rowSpan),c+="</tr>";i=e(c)}l&&(r=e("<tr/>"),r.addClass("k-filter-row"),a&&r.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'),d.append(r)),i.children().length?a&&!i.find(".k-hierarchy-cell")[0]&&i.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'):(c="",a&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),c+=o._createHeaderCells(s),i.html(c)),i.attr("role","row").find("th").addClass("k-header"),o.options.scrollable||d.addClass("k-grid-header"),i.find("script").remove().end().prependTo(d),o.thead&&o._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:d.find("th").get()}}),this.angular("compile",function(){return{elements:d.find("th").get(),data:we(s,function(e){return{column:e}})}}),o.thead=d.attr("role","rowgroup"),o._sortable(),o._filterable(),o._filterRow(),o._scrollable(),o._updateCols(),o._columnMenu(),this.options.scrollable&&P(this.columns).length&&(o._appendLockedColumnHeader(o.thead.closest(".k-grid-header")),o._appendLockedColumnContent(),o.lockedContent.bind("DOMMouseScroll"+$e+" mousewheel"+$e,Te(o._wheelScroll,o)),o._applyLockedContainersWidth()),o._updateFirstColumnClass(),o._resizable(),o._draggable(),o._reorderable(),o.groupable&&o._attachGroupable()},_updateFirstColumnClass:function(){var t,i,n=this,r=n.columns||[],o=n._hasDetails()&&r.length;o||n._groups()||(t=e(),i=n.thead.find(">tr:not(.k-filter-row):not(:first)"),r=F(r),i.length&&r[0]&&!r[0].columns&&(t=t.add(i)),n._isLocked()&&(i=n.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),r=P(n.columns),i.length&&r[0]&&!r[0].columns&&(t=t.add(i))),t.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,i,n){var r,o,s=n||e[e.length-1],a=e[s.index+1],l=0;for(r=0;t.length>r;r++)o={column:t[r],colSpan:0},s.cells.push(o),t[r].columns&&t[r].columns.length&&(a||(a={rowSpan:0,cells:[],index:e.length},e.push(a)),o.colSpan=t[r].columns.length,this._prepareColumns(e,t[r].columns,o,a),l+=o.colSpan-1,s.rowSpan=e.length-s.index);i&&(i.colSpan+=l)},_wheelScroll:function(t){var i,n,r;t.ctrlKey||(i=this.content,this.options.scrollable.virtual&&(i=this.virtualScrollable.verticalScrollbar),n=i.scrollTop(),r=ue.wheelDeltaY(t),r&&(t.preventDefault(),e(t.currentTarget).one("wheel"+$e,!1),i.scrollTop(n+-r)))},_isLocked:function(){return null!=this.lockedHeader},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),W(e,R(H(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?W(e,R(z(this.columns)),this._hasDetails(),0):W(e,R(f(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,i=this;e=e.toJSON();for(t in e)i.columns.push({field:t});i._thead(),i._templates()}},_rowsHtml:function(e,t){var i,n,r=this,o="",s=t.rowTemplate,a=t.altRowTemplate;for(i=0,n=e.length;n>i;i++)o+=i%2?a(e[i]):s(e[i]),r._data.push(e[i]);return o},_groupRowHtml:function(e,t,i,n,r,o){var s,a,l=this,c="",d=e.field,u=ke(l.columns,function(e){return e.field==d})[0]||{},h=u.groupHeaderTemplate,p=(u.title||d)+": "+G(e.value,u.format,u.values),f=l._groupAggregatesDefaultObject||{},m=be(f,e.aggregates),g=be({},{field:e.field,value:e.value,aggregates:m},e.aggregates[e.field]),v=r.groupFooterTemplate,y=e.items;if(h&&(p=typeof h===at?h(g):ue.template(h)(g)),c+=n(t,i,p),e.hasSubgroups)for(s=0,a=y.length;a>s;s++)c+=l._groupRowHtml(y[s],o?t:t-1,i+1,n,r,o);else c+=l._rowsHtml(y,r);return v&&(c+=v(m)),c},collapseGroup:function(t){t=e(t);var i,n,r,o,s,a=this.options.groupable,l=a.showFooter,c=l?0:1,d=e();for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?d=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(d=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),i=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td:first").attr("aria-expanded",!1),t=t.nextAll("tr"),r=0,o=t.length;o>r&&(s=t.eq(r),n=s.find(".k-group-cell").length,s.hasClass("k-grouping-row")?c++:s.hasClass("k-group-footer")&&c--,!(i>=n||s.hasClass("k-group-footer")&&0>c));r++)s.hide(),d.eq(r).hide()},expandGroup:function(t){t=e(t);var i,n,r,o,s,a=this,l=e(),c=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),i=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td:first").attr("aria-expanded",!0),t=t.nextAll("tr"),o=0,s=t.length;s>o&&(n=t.eq(o),r=n.find(".k-group-cell").length,!(i>=r));o++)r!=i+1||n.hasClass("k-detail-row")||(n.show(),l.eq(o).show(),n.hasClass("k-grouping-row")&&n.find(".k-icon").hasClass("k-i-collapse")&&a.expandGroup(n),n.hasClass("k-master-row")&&n.find(".k-icon").hasClass("k-minus")&&(n.next().show(),l.eq(o+1).show())),n.hasClass("k-grouping-row")&&c++,n.hasClass("k-group-footer")&&(1==c?(n.show(),l.eq(o).show()):c--)},_updateHeader:function(t){var i=this,n=i._isLocked()?i.lockedHeader.find("thead"):i.thead,r=n.find("tr.k-filter-row").find("th.k-group-cell").length,o=n.find("tr:first").find("th.k-group-cell").length,s=n.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>o?(e(Array(t-o+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(n.children("tr:not(.k-filter-row)")),i.element.is(":visible")&&s.find("th.k-group-cell").hide()):o>t&&n.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>r&&e(Array(t-r+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(n.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,i=this;i._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",i.wrapper).add(i.thead.parent()).add(i.table),i._footerWidth=Z(t.eq(0)),t.width(i._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",i.wrapper).add(i.lockedHeader.find(">table")).add(i.lockedTable),t.width(Z(t.eq(0))))},hideColumn:function(i){var n,r,o,s,l,c,d,u,m,g,v=this,y=0,_=v.footer||v.wrapper.find(".k-grid-footer"),b=v.columns,w=v.lockedHeader?$(v.lockedHeader.find(">table>thead")).filter(":visible").length:0;if(i="number"==typeof i?b[i]:_e(i)?ke(S(b),function(e){return e===i})[0]:ke(S(b),function(e){return e.field===i})[0],i&&p(i)){if(i.columns&&i.columns.length){for(c=x(i,b),h(i,!1),Y(a(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+c.row+")>th"),c.cell,!1),o=0;i.columns.length>o;o++)this.hideColumn(i.columns[o]);return v.trigger(qe,{column:i}),t}if(m=Ce(i,f(N(b))),h(i,!1),v._setParentsVisibility(i,!1),v._templates(),v._updateCols(),v._updateLockedCols(),g=v.thead,d=m,v.lockedHeader&&w>m?g=v.lockedHeader.find(">table>thead"):d-=w,n=$(g).filter(":visible").eq(d),n[0].style.display="none",Y(a(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),m,!1),_[0]&&(v._updateCols(_.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(_.find(">.k-grid-footer-locked>table")),Y(_.find(".k-footer-template>td"),m,!1)),v.lockedTable&&w>m?Q(v.lockedTable.find(">tbody>tr"),m):Q(v.tbody.children(),m-w),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight(),v._syncLockedFooterHeight();else{for(s=v.thead.prev().find("col"),o=0,u=s.length;u>o;o+=1){if(l=s[o].style.width,!l||-1!=l.indexOf("%")){y=0;break}y+=parseInt(l,10)}r=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),v._footerWidth=null,y&&(r.width(y),v._footerWidth=y),_t.msie&&8==_t.version&&(r.css("display","inline-table"),setTimeout(function(){r.css("display","table")},1))}v._updateFirstColumnClass(),v.trigger(qe,{column:i})}},_setParentsVisibility:function(t,i){var n,r,o,s,l,c=this.columns,d=[],p=i?function(e){return f(e.columns).length&&e.hidden}:function(e){return!f(e.columns).length&&!e.hidden};if(u(t,c,d)&&d.length)for(n=d.length-1;n>=0;n--)r=d[n],o=w(r,c),s=a(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+o.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o.cell),p(r)&&(h(r,i),s[0].style.display=i?"":"none"),s.filter("["+ue.attr("colspan")+"]").length&&(l=parseInt(s.attr(ue.attr("colspan")),10),s[0].colSpan=l-T(r.columns)||1)},showColumn:function(i){var n,r,o,s,l,c,d,u,f,m,g,v=this,y=v.columns,_=v.footer||v.wrapper.find(".k-grid-footer"),b=v.lockedHeader?$(v.lockedHeader.find(">table>thead")).length:0;if(i="number"==typeof i?y[i]:_e(i)?ke(S(y),function(e){return e===i})[0]:ke(S(y),function(e){return e.field===i})[0],i&&!p(i)){if(i.columns&&i.columns.length){for(d=x(i,y),h(i,!0),Y(a(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+d.row+")>th"),d.cell,!0),n=0;i.columns.length>n;n++)this.showColumn(i.columns[n]);return v.trigger(Ge,{column:i}),t}if(m=Ce(i,N(y)),h(i,!0),v._setParentsVisibility(i,!0),v._templates(),v._updateCols(),v._updateLockedCols(),g=v.thead,c=m,v.lockedHeader&&b>m?g=v.lockedHeader.find(">table>thead"):c-=b,o=$(g).eq(c),o[0].style.display="",Y(a(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),m,!0),_[0]&&(v._updateCols(_.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(_.find(">.k-grid-footer-locked>table")),Y(_.find(".k-footer-template>td"),m,!0)),v.lockedTable&&b>m?K(v.lockedTable.find(">tbody>tr"),m):K(v.tbody.children(),m-b),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight();else if(s=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),i.width){for(l=0,f=v.thead.prev().find("col"),n=0,r=f.length;r>n;n+=1){if(u=f[n].style.width,u.indexOf("%")>-1){l=0;break}l+=parseInt(u,10)}v._footerWidth=null,l&&(s.width(l),v._footerWidth=l)}else s.width("");v._updateFirstColumnClass(),v.trigger(Ge,{column:i})}},_progress:function(e){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),ue.ui.progress(t,e)},_resize:function(){this.content&&(this._setContentHeight(),this._setContentWidth())},_isActiveInTable:function(){var t=ge();return this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t))},refresh:function(t){var i,n=this,r=n.dataSource.view(),o=n.options.navigatable,s=e(n.current()),a=!1,l=(n.dataSource.group()||[]).length,c=l+R(f(n.columns)).length;t&&"itemchange"===t.action&&n.editable||(t=t||{},n.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(n._angularItems("cleanup"),o&&(n._isActiveInTable()||n._editContainer&&n._editContainer.data("kendoWindow"))&&(a=s.is("th"),i=0,a&&(i=n.thead.find("th:not(.k-group-cell)").index(s))),n._destroyEditable(),n._progress(!1),n._hideResizeHandle(),n._data=[],n.columns.length||(n._autoColumns(n._firstDataItem(r[0],l)),c=l+n.columns.length),n._group=l>0||n._group,n._group&&(n._templates(),n._updateCols(),n._updateLockedCols(),n._updateHeader(l),n._group=l>0),n._renderContent(r,c,l),n._renderLockedContent(r,c,l),n._footer(),n._setContentHeight(),n._setContentWidth(),n.lockedTable&&(n.options.scrollable.virtual?n.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):n.content.trigger("scroll")),i>=0&&(n._removeCurrent(),n.current(a?n.thead.find("th:not(.k-group-cell)").eq(i):n.table.add(n.lockedTable).find(Re).first()),n._current&&ie(n._current.closest("table")[0],!0)),n.touchScroller&&n.touchScroller.contentResized(),n.selectable&&n.selectable.resetTouchEvents(),n._angularItems("compile"),n.trigger(Qe)))},_renderContent:function(e,t,i){var n,r,s=this,a="",l=null!=s.lockedContent,c={rowTemplate:s.rowTemplate,altRowTemplate:s.altRowTemplate,groupFooterTemplate:s.groupFooterTemplate};if(t=l?t-R(H(s.columns)).length:t,i>0)for(t=l?t-i:t,s.detailTemplate&&t++,s.groupFooterTemplate&&(s._groupAggregatesDefaultObject=o(s.dataSource.aggregate())),n=0,r=e.length;r>n;n++)a+=s._groupRowHtml(e[n],t,0,l?de:ce,c,l);else a+=s._rowsHtml(e,c);s.tbody=B(s.tbody,s.table,a)},_renderLockedContent:function(e,t,i){var n,r,o,s="",a={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){if(o=this.lockedTable,i>0)for(t-=f(N(F(this.columns))).length,n=0,r=e.length;r>n;n++)s+=this._groupRowHtml(e[n],t,0,ce,a);else s=this._rowsHtml(e,a);B(o.children("tbody"),o,s),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var i,n,r,o,s=e[0].rows,a=s.length,l=t[0].rows,c=e.add(t),d=c.length,u=[];for(i=0;a>i&&l[i];i++)s[i].style.height&&(s[i].style.height=l[i].style.height=""),n=s[i].offsetHeight,r=l[i].offsetHeight,o=0,n>r?o=n:r>n&&(o=r),u.push(o);for(i=0;d>i;i++)c[i].style.display="none";for(i=0;a>i;i++)u[i]&&(s[i].style.height=l[i].style.height=u[i]+"px");for(i=0;d>i;i++)c[i].style.display=""}});ue.ExcelMixin&&ue.ExcelMixin.extend(Ct.prototype),ue.PDFMixin&&ue.PDFMixin.extend(Ct.prototype),he.plugin(Ct),he.plugin(kt)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n="change",r="cancel",o="dataBound",s="dataBinding",a=i.ui.Widget,l=i.keys,c=">*",d="progress",u="error",h="k-state-focused",p="k-state-selected",f="k-edit-item",m="edit",g="remove",v="save",y="click",_=".kendoListView",b=e.proxy,w=i._activeElement,k=i.ui.progress,x=i.data.DataSource,C=i.ui.DataBoundWidget.extend({init:function(t,n){var r=this;n=e.isArray(n)?{dataSource:n}:n,a.fn.init.call(r,t,n),n=r.options,r.wrapper=t=r.element,t[0].id&&(r._itemId=t[0].id+"_lv_active"),r._element(),r._dataSource(),r._templates(),r._navigatable(),r._selectable(),r._pageable(),r._crudHandlers(),r.options.autoBind&&r.dataSource.fetch(),i.notify(r)},events:[n,r,s,o,m,g,v],options:{name:"ListView",autoBind:!0,selectable:!1,navigatable:!1,template:"",altTemplate:"",editTemplate:""},setOptions:function(e){a.fn.setOptions.call(this,e),this._templates()},_templates:function(){var e=this.options;this.template=i.template(e.template||""),this.altTemplate=i.template(e.altTemplate||e.template),this.editTemplate=i.template(e.editTemplate||"")},_item:function(e){return this.element.children()[e]()},items:function(){return this.element.children()},dataItem:function(t){var n=i.attr("uid"),r=e(t).closest("["+n+"]").attr(n);return this.dataSource.getByUid(r)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},_unbindDataSource:function(){var e=this;e.dataSource.unbind(n,e._refreshHandler).unbind(d,e._progressHandler).unbind(u,e._errorHandler)},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=b(e.refresh,e),e._progressHandler=b(e._progress,e),e._errorHandler=b(e._error,e)),e.dataSource=x.create(e.options.dataSource).bind(n,e._refreshHandler).bind(d,e._progressHandler).bind(u,e._errorHandler)},_progress:function(){k(this.element,!0)},_error:function(){k(this.element,!1)},_element:function(){this.element.addClass("k-widget k-listview").attr("role","listbox")},refresh:function(e){var n,r,a,l,c,d=this,u=d.dataSource.view(),h="",p=d.template,f=d.altTemplate,m=w();if(e=e||{},"itemchange"===e.action)return d._hasBindingTarget()||d.editable||(n=e.items[0],a=d.items().filter("["+i.attr("uid")+"="+n.uid+"]"),a.length>0&&(l=a.index(),d.angular("cleanup",function(){return{elements:[a]}}),a.replaceWith(p(n)),a=d.items().eq(l),a.attr(i.attr("uid"),n.uid),d.angular("compile",function(){return{elements:[a],data:[{dataItem:n}]}}),d.trigger("itemChange",{item:a,data:n}))),t;if(!d.trigger(s,{action:e.action||"rebind",items:e.items,index:e.index})){for(d._angularItems("cleanup"),d._destroyEditable(),l=0,c=u.length;c>l;l++)h+=l%2?f(u[l]):p(u[l]);for(d.element.html(h),r=d.items(),l=0,c=u.length;c>l;l++)r.eq(l).attr(i.attr("uid"),u[l].uid).attr("role","option").attr("aria-selected","false");d.element[0]===m&&d.options.navigatable&&d.current(r.eq(0)),d._angularItems("compile"),d.trigger(o)}},_pageable:function(){var t,n,r=this,o=r.options.pageable;e.isPlainObject(o)&&(n=o.pagerId,t=e.extend({},o,{dataSource:r.dataSource,pagerId:null}),r.pager=new i.ui.Pager(e("#"+n),t))},_selectable:function(){var e,r,o=this,s=o.options.selectable,a=o.options.navigatable;s&&(e=i.ui.Selectable.parseOptions(s).multiple,o.selectable=new i.ui.Selectable(o.element,{aria:!0,multiple:e,filter:c,change:function(){o.trigger(n)}}),a&&o.element.on("keydown"+_,function(i){if(i.keyCode===l.SPACEBAR){if(r=o.current(),i.target==i.currentTarget&&i.preventDefault(),e)if(i.ctrlKey){if(r&&r.hasClass(p))return r.removeClass(p),t}else o.selectable.clear();else o.selectable.clear();o.selectable.value(r)}}))},current:function(e){var i=this,n=i.element,r=i._current,o=i._itemId;return e===t?r:(r&&r[0]&&(r[0].id===o&&r.removeAttr("id"),r.removeClass(h),n.removeAttr("aria-activedescendant")),e&&e[0]&&(o=e[0].id||o,i._scrollTo(e[0]),n.attr("aria-activedescendant",o),e.addClass(h).attr("id",o)),i._current=e,t)},_scrollTo:function(t){var i,n,r=this,o=!1,s="scroll";"auto"==r.wrapper.css("overflow")||r.wrapper.css("overflow")==s?i=r.wrapper[0]:(i=window,o=!0),n=function(n,r){var a=o?e(t).offset()[n.toLowerCase()]:t["offset"+n],l=t["client"+r],c=e(i)[s+n](),d=e(i)[r.toLowerCase()]();a+l>c+d?e(i)[s+n](a+l-d):c>a&&e(i)[s+n](a)},n("Top","Height"),n("Left","Width")},_navigatable:function(){var t=this,n=t.options.navigatable,r=t.element,o=function(i){t.current(e(i.currentTarget)),e(i.target).is(":button,a,:input,a>.k-icon,textarea")||r.focus()};n&&(t._tabindex(),r.on("focus"+_,function(){var e=t._current;e&&e.is(":visible")||(e=t._item("first")),t.current(e)}).on("focusout"+_,function(){t._current&&t._current.removeClass(h)}).on("keydown"+_,function(n){var o,s,a=n.keyCode,c=t.current(),d=e(n.target),u=!d.is(":button,textarea,a,a>.t-icon,input"),h=d.is(":text"),p=i.preventDefault,m=r.find("."+f),g=w();if(!(!u&&!h&&l.ESC!=a||h&&l.ESC!=a&&l.ENTER!=a))if(l.UP===a||l.LEFT===a)c&&(c=c.prev()),t.current(c&&c[0]?c:t._item("last")),p(n);else if(l.DOWN===a||l.RIGHT===a)c&&(c=c.next()),t.current(c&&c[0]?c:t._item("first")),p(n);else if(l.PAGEUP===a)t.current(null),t.dataSource.page(t.dataSource.page()-1),p(n);else if(l.PAGEDOWN===a)t.current(null),t.dataSource.page(t.dataSource.page()+1),p(n);else if(l.HOME===a)t.current(t._item("first")),p(n);else if(l.END===a)t.current(t._item("last")),p(n);else if(l.ENTER===a)0!==m.length&&(u||h)?(o=t.items().index(m),g&&g.blur(),t.save(),s=function(){t.element.trigger("focus"),t.current(t.items().eq(o))},t.one("dataBound",s)):""!==t.options.editTemplate&&t.edit(c);else if(l.ESC===a){if(m=r.find("."+f),0===m.length)return;o=t.items().index(m),t.cancel(),t.element.trigger("focus"),t.current(t.items().eq(o))}}),r.on("mousedown"+_+" touchstart"+_,c,b(o,t)))},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(n)},select:function(i){var n=this,r=n.selectable;return i=e(i),i.length?(r.options.multiple||(r.clear(),i=i.first()),r.value(i),t):r.value()},_destroyEditable:function(){var e=this;e.editable&&(e.editable.destroy(),delete e.editable)},_modelFromElement:function(e){var t=e.attr(i.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(e){var t,n,r,o=this,s=o.editable,a=o.template,l=!0;return s&&(e&&(l=s.end()),l&&(s.element.index()%2&&(a=o.altTemplate),t=o._modelFromElement(s.element),o._destroyEditable(),r=s.element.index(),s.element.replaceWith(a(t)),n=o.items().eq(r),n.attr(i.attr("uid"),t.uid),o._hasBindingTarget()&&i.bind(n,t))),l},edit:function(e){var t,n,r=this,o=r._modelFromElement(e),s=o.uid;r.cancel(),e=r.items().filter("["+i.attr("uid")+"="+s+"]"),n=e.index(),e.replaceWith(r.editTemplate(o)),t=r.items().eq(n).addClass(f).attr(i.attr("uid"),o.uid),r.editable=t.kendoEditable({model:o,clearContainer:!1,errorTemplate:!1,target:r}).data("kendoEditable"),r.trigger(m,{model:o,item:t})},save:function(){var e,t=this,i=t.editable;i&&(i=i.element,e=t._modelFromElement(i),!t.trigger(v,{model:e,item:i})&&t._closeEditable(!0)&&t.dataSource.sync())},remove:function(e){var t=this,i=t.dataSource,n=t._modelFromElement(e);t.trigger(g,{model:n,item:e})||(e.hide(),i.remove(n),i.sync())},add:function(){var e=this,t=e.dataSource,i=t.indexOf((t.view()||[])[0]);0>i&&(i=0),e.cancel(),t.insert(i,{}),e.edit(e.element.children().first())},cancel:function(){var e,t,i=this,n=i.dataSource;i.editable&&(e=i.editable.element,t=i._modelFromElement(e),i.trigger(r,{model:t,container:e})||(n.cancelChanges(t),i._closeEditable(!1)))},_crudHandlers:function(){var t=this,n=y+_;t.element.on(n,".k-edit-button",function(n){var r=e(this).closest("["+i.attr("uid")+"]");t.edit(r),n.preventDefault()}),t.element.on(n,".k-delete-button",function(n){var r=e(this).closest("["+i.attr("uid")+"]");t.remove(r),n.preventDefault()}),t.element.on(n,".k-update-button",function(e){t.save(),e.preventDefault()}),t.element.on(n,".k-cancel-button",function(e){t.cancel(),e.preventDefault()})},destroy:function(){var e=this;a.fn.destroy.call(e),e._unbindDataSource(),e._destroyEditable(),e.element.off(_),e.pager&&e.pager.destroy(),
i.destroy(e.element)}});i.ui.plugin(C)}(window.kendo.jQuery),function(e,t){function i(t){return e.map(n(t),function(e){return e.name}).join(", ")}function n(e){var t=e[0];return t.files?r(t.files):[{name:a(t.value),extension:s(t.value),size:null}]}function r(t){return e.map(t,function(e){return o(e)})}function o(e){var t=e.name||e.fileName;return{name:_.htmlEncode(t),extension:s(t),size:e.size||e.fileSize,rawFile:e}}function s(e){var t=e.match(k);return t?t[0]:""}function a(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e}function l(t,i){var n=_.guid();return e.map(t,function(e){return e.uid=i?_.guid():n,e})}function c(t,i,n){var r,o;i._supportsRemove()&&(r=t.data("fileNames"),o=e.map(r,function(e){return e.name}),i._submitRemove(o,n,function(e,n,o){i._removeFileEntry(t),i.trigger(T,{operation:"remove",files:r,response:e,XMLHttpRequest:o})},function(e){i.trigger(D,{operation:"remove",files:r,XMLHttpRequest:e}),w("Server response: "+e.responseText)}))}function d(t,i,n){var r=!1,o="";try{o=e.parseJSON(u(t)),r=!0}catch(e){n()}r&&i(o)}function u(e){return(t===e||""===e)&&(e="{}"),e}function h(e){e.stopPropagation(),e.preventDefault()}function p(e,t,i,n){var r,o;e.on("dragenter"+t,function(){i(),o=new Date,r||(r=setInterval(function(){var e=new Date-o;e>100&&(n(),clearInterval(r),r=null)},100))}).on("dragover"+t,function(){o=new Date})}function f(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function m(t){return e(t.target).closest(".k-file")}function g(){var i={},n=e("meta[name=csrf-token]").attr("content"),r=e("meta[name=csrf-param]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){i[this.name]=this.value}),r!==t&&n!==t&&(i[r]=n),i}var v,y,_=window.kendo,b=_.ui.Widget,w=_.logToConsole,k=/\.([^\.]+)$/,x=".kendoUpload",C="select",S="upload",T="success",D="error",M="complete",A="cancel",E="progress",I="remove",P=b.extend({init:function(t,i){var n,r,o,s=this;b.fn.init.call(s,t,i),s.name=t.name,s.multiple=s.options.multiple,s.localization=s.options.localization,n=s.element,s.wrapper=n.closest(".k-upload"),0===s.wrapper.length&&(s.wrapper=s._wrapInput(n)),s._activeInput(n),s.toggle(s.options.enabled),r=s._ns=x+"-"+_.guid(),n.closest("form").on("submit"+r,e.proxy(s._onParentFormSubmit,s)).on("reset"+r,e.proxy(s._onParentFormReset,s)),s.options.async.saveUrl?(s._module=s._supportsFormData()?new y(s):new v(s),s._async=!0,o=s.options.files,o.length>0&&s._renderInitialFiles(o)):s._module=new F(s),s._supportsDrop()&&s._setupDropZone(),s.wrapper.on("click",".k-upload-action",e.proxy(s._onFileAction,s)).on("click",".k-upload-selected",e.proxy(s._onUploadSelected,s)),s.element.val()&&s._onInputChange({target:s.element})},events:[C,S,T,D,M,A,E,I],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,template:"",files:[],async:{removeVerb:"POST",autoUpload:!0,withCredentials:!0},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",uploadSelectedFiles:"Upload files",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done"}},setOptions:function(e){var t=this,i=t.element;b.fn.setOptions.call(t,e),t.multiple=t.options.multiple,i.attr("multiple",!!t._supportsMultiple()&&t.multiple),t.toggle(t.options.enabled)},enable:function(e){e=t===e||e,this.toggle(e)},disable:function(){this.toggle(!1)},toggle:function(e){e=t===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e),this.element.prop("disabled",e)},destroy:function(){var t=this;e(document).add(e(".k-dropzone",t.wrapper)).add(t.wrapper.closest("form")).off(t._ns),e(t.element).off(x),b.fn.destroy.call(t)},_addInput:function(t){if(t[0].nodeType){var i=this,n=t.clone().val("");n.insertAfter(i.element).data("kendoUpload",i),e(i.element).hide().attr("tabindex","-1").removeAttr("id").off(x),i._activeInput(n),i.element.focus()}},_activeInput:function(t){var i=this,n=i.wrapper;i.element=t,t.attr("multiple",!!i._supportsMultiple()&&i.multiple).attr("autocomplete","off").on("click"+x,function(e){n.hasClass("k-state-disabled")&&e.preventDefault()}).on("focus"+x,function(){e(this).parent().addClass("k-state-focused")}).on("blur"+x,function(){e(this).parent().removeClass("k-state-focused")}).on("change"+x,e.proxy(i._onInputChange,i)).on("keydown"+x,e.proxy(i._onInputKeyDown,i))},_onInputKeyDown:function(e){var t=this,i=t.wrapper.find(".k-upload-action:first");e.keyCode===_.keys.TAB&&i.length>0&&(e.preventDefault(),i.focus())},_onInputChange:function(t){var i=this,n=e(t.target),r=l(i._inputFiles(n),i._isAsyncNonBatch()),o=i.trigger(C,{files:r});o?(i._addInput(n),n.remove()):i._module.onSelect({target:n},r)},_onDrop:function(t){var i,n=t.originalEvent.dataTransfer,o=this,s=n.files,a=l(r(s),o._isAsyncNonBatch());h(t),s.length>0&&(i=o.trigger(C,{files:a}),i||o._module.onSelect({target:e(".k-dropzone",o.wrapper)},a))},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||!1},_renderInitialFiles:function(t){var i,n,r=this,o=0;for(t=l(t,!0),o=0;t.length>o;o++)i=t[o],n=r._enqueueFile(i.name,{fileNames:[i]}),n.addClass("k-file-success").data("files",[t[o]]),e(".k-progress",n).width("100%"),e(".k-upload-status",n).prepend("<span class='k-upload-pct'>100%</span>"),r._fileAction(n,I)},_prepareTemplateData:function(e,t){var i=t.fileNames,n={},r=0,o=0;for(o=0;i.length>o;o++)r+=i[o].size;return n.name=e,n.size=r,n.files=t.fileNames,n},_prepareDefaultFileEntryTemplate:function(t,i){var n="",r=e("<li class='k-file'><span class='k-progress'></span><span class='k-icon'></span><span class='k-filename' title='"+t+"'>"+t+"</span><strong class='k-upload-status'></strong></li>");return 1==i.fileNames.length&&i.fileNames[0].extension&&(n=i.fileNames[0].extension.substring(1),e(".k-icon",r).addClass("k-i-"+n)),r},_enqueueFile:function(t,i){var n,r,o,s=this,a=i.fileNames[0].uid,l=e(".k-upload-files",s.wrapper),c=s.options,d=c.template;return 0===l.length&&(l=e("<ul class='k-upload-files k-reset'></ul>").appendTo(s.wrapper),s.options.showFileList||l.hide(),s.wrapper.removeClass("k-upload-empty")),n=e(".k-file",l),d?(o=s._prepareTemplateData(t,i),d=_.template(d),r=e("<li class='k-file'>"+d(o)+"</li>"),r.find(".k-upload-action").addClass("k-button k-button-bare")):r=s._prepareDefaultFileEntryTemplate(t,i),r.attr(_.attr("uid"),a).appendTo(l).data(i),s._async||e(".k-progress",r).width("100%"),!s.multiple&&n.length>0&&s._module.onRemove({target:e(n,s.wrapper)}),r},_removeFileEntry:function(t){var i,n,r=this,o=t.closest(".k-upload-files");t.remove(),i=e(".k-file",o),n=e(".k-file-success, .k-file-error",o),n.length===i.length&&this._hideUploadButton(),0===i.length&&(o.remove(),r.wrapper.addClass("k-upload-empty"),r._hideHeaderUploadstatus())},_fileAction:function(e,t){var i={remove:"k-delete",cancel:"k-cancel",retry:"k-retry"},n={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-refresh"};i.hasOwnProperty(t)&&(this._clearFileAction(e),this.options.template?e.find(".k-upload-action").addClass("k-button k-button-bare").append("<span class='k-icon "+n[t]+" "+i[t]+"' title='"+this.localization[t]+"'></span>").show():(e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(i[t],this.localization[t],n[t]))))},_fileState:function(t,i){var n=this.localization,r={uploading:{text:n.statusUploading},uploaded:{text:n.statusUploaded},failed:{text:n.statusFailed}},o=r[i];o&&e(".k-icon:not(.k-delete, .k-cancel, .k-retry)",t).text(o.text)},_renderAction:function(t,i,n){return e(""!==t?"<button type='button' class='k-button k-button-bare k-upload-action'><span class='k-icon "+n+" "+t+"' title='"+i+"'></span></button>":"<button type='button' class='k-button'>"+i+"</button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){var i,n,r,o,s=this;return s.wrapper.hasClass("k-state-disabled")||(i=e(t.target).closest(".k-upload-action"),n=i.find(".k-icon"),r=i.closest(".k-file"),o={files:r.data("fileNames")},n.hasClass("k-delete")?s.trigger(I,o)||s._module.onRemove({target:e(r,s.wrapper)},o.data):n.hasClass("k-cancel")?(s.trigger(A,o),s._module.onCancel({target:e(r,s.wrapper)}),this._checkAllComplete(),s._updateHeaderUploadStatus()):n.hasClass("k-retry")&&(e(".k-warning",r).remove(),s._module.onRetry({target:e(r,s.wrapper)}))),!1},_onUploadSelected:function(){var e=this,t=e.wrapper;return t.hasClass("k-state-disabled")||this._module.onSaveSelected(),!1},_onFileProgress:function(t,i){var n;this.options.template?e(".k-progress",t.target).width(i+"%"):(n=e(".k-upload-pct",t.target),0===n.length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),e(".k-upload-pct",t.target).text(i+"%"),e(".k-progress",t.target).width(i+"%")),this.trigger(E,{files:m(t).data("fileNames"),percentComplete:i})},_onUploadSuccess:function(e,t,i){var n=m(e);this._fileState(n,"uploaded"),n.removeClass("k-file-progress").addClass("k-file-success"),this._updateHeaderUploadStatus(),this.trigger(T,{files:n.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:i}),this._supportsRemove()?this._fileAction(n,I):this._clearFileAction(n),this._checkAllComplete()},_onUploadError:function(t,i){var n=m(t),r=e(".k-upload-pct",n);this._fileState(n,"failed"),n.removeClass("k-file-progress").addClass("k-file-error"),e(".k-progress",n).width("100%"),r.length>0?r.empty().removeClass("k-upload-pct").addClass("k-icon k-warning"):e(".k-upload-status",n).prepend("<span class='k-icon k-warning'></span>"),this._updateHeaderUploadStatus(),this._fileAction(n,"retry"),this.trigger(D,{operation:"upload",files:n.data("fileNames"),XMLHttpRequest:i}),w("Server response: "+i.responseText),this._checkAllComplete()},_showUploadButton:function(){var t=e(".k-upload-selected",this.wrapper);0===t.length&&(t=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected")),this.wrapper.append(t)},_hideUploadButton:function(){e(".k-upload-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(){var t=this.localization,i=e(".k-dropzone",this.wrapper),n=e(".k-upload-status-total",this.wrapper);0!==n.length&&n.remove(),n='<strong class="k-upload-status k-upload-status-total">'+t.headerStatusUploading+'<span class="k-icon k-loading">'+t.statusUploading+"</span></strong>",i.length>0?i.append(n):e(".k-upload-button",this.wrapper).after(n)},_updateHeaderUploadStatus:function(){var t,i,n,r=this,o=r.localization,s=e(".k-file",r.wrapper).not(".k-file-success, .k-file-error");0===s.length&&(t=e(".k-file.k-file-error",r.wrapper),i=e(".k-upload-status-total",r.wrapper),n=e(".k-icon",i).removeClass("k-loading").addClass(0!==t.length?"k-warning":"k-i-tick").text(0!==t.length?o.statusWarning:o.statusUploaded),i.text(r.localization.headerStatusUploaded).append(n))},_hideHeaderUploadstatus:function(){e(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var i,n=this,r=n.element;t!==this._module.onAbort&&this._module.onAbort(),r.value||(i=e(r),i.attr("disabled","disabled"),window.setTimeout(function(){i.removeAttr("disabled")},0))},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(_.support.browser.opera||_.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase(),t=/chrome/.test(e),i=!t&&/safari/.test(e),n=i&&/windows/.test(e);return!n&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var t,i,n=this;e(".k-upload-button",this.wrapper).wrap("<div class='k-dropzone'></div>"),t=n._ns,i=e(".k-dropzone",n.wrapper).append(e("<em>"+n.localization.dropFilesHere+"</em>")).on("dragenter"+t,h).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(this._onDrop,this)),p(i,t,function(){i.addClass("k-dropzone-hovered")},function(){i.removeClass("k-dropzone-hovered")}),p(e(document),t,function(){i.addClass("k-dropzone-active"),i.closest(".k-upload").removeClass("k-upload-empty")},function(){i.removeClass("k-dropzone-active"),0===e("li.k-file",i.closest(".k-upload")).length&&i.closest(".k-upload").addClass("k-upload-empty")})},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,i,n,r){var o=this,s=o.options.async.removeField||"fileNames",a=e.extend(i,g());a[s]=t,jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:u,url:this.options.async.removeUrl,traditional:!0,data:a,success:n,error:r})},_wrapInput:function(e){var t=this,i=t.options;return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button'></div></div>"),i.async.saveUrl||e.closest(".k-upload").addClass("k-upload-sync"),e.closest(".k-upload").addClass("k-upload-empty"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(M)},_inputFiles:function(e){return n(e)}}),F=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};F.prototype={onSelect:function(t,n){var r,o=this.upload,s=e(t.target);o._addInput(s),r=o._enqueueFile(i(s),{relatedInput:s,fileNames:n}),o._fileAction(r,I)},onRemove:function(e){var t=m(e);t.data("relatedInput").remove(),this.upload._removeFileEntry(t)}},v=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]},P._frameId=0,v.prototype={onSelect:function(t,i){var n=this.upload,r=e(t.target),o=this.prepareUpload(r,i);n.options.async.autoUpload?this.performUpload(o):(n._supportsRemove()&&this.upload._fileAction(o,I),n._showUploadButton())},prepareUpload:function(t,n){var r,o,s,a=this.upload,l=e(a.element),c=a.options.async.saveField||t.attr("name");return a._addInput(t),t.attr("name",c),r=this.createFrame(a.name+"_"+P._frameId++),this.registerFrame(r),o=this.createForm(a.options.async.saveUrl,r.attr("name")).append(l),s=a._enqueueFile(i(t),{frame:r,relatedInput:l,fileNames:n}),r.data({form:o,file:s}),s},performUpload:function(t){var i,n,r,o={files:t.data("fileNames")},s=t.data("frame"),a=this.upload;if(a.trigger(S,o))a._removeFileEntry(s.data("file")),this.cleanupFrame(s),this.unregisterFrame(s);else{a._hideUploadButton(),a._showHeaderUploadStatus(),s.appendTo(document.body),i=s.data("form").attr("action",a.options.async.saveUrl).appendTo(document.body),o.data=e.extend({},o.data,g());for(n in o.data)r=i.find("input[name='"+n+"']"),0===r.length&&(r=e("<input>",{type:"hidden",name:n}).prependTo(i)),r.val(o.data[n]);a._fileAction(t,A),a._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),s.one("load",e.proxy(this.onIframeLoad,this)),i[0].submit()}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var i=e(this),n=f(i);n||t.performUpload(i)})},onIframeLoad:function(t){var i,n=e(t.target);try{i=n.contents().text()}catch(e){i="Error trying to get server response: "+e}this.processResponse(n,i)},processResponse:function(t,i){var n=t.data("file"),r=this,o={responseText:i};d(i,function(i){e.extend(o,{statusText:"OK",status:"200"}),r.upload._onFileProgress({target:e(n,r.upload.wrapper)},100),r.upload._onUploadSuccess({target:e(n,r.upload.wrapper)},i,o),r.cleanupFrame(t),r.unregisterFrame(t)},function(){e.extend(o,{statusText:"error",status:"500"}),r.upload._onUploadError({target:e(n,r.upload.wrapper)},o)})},onCancel:function(t){var i=e(t.target).data("frame");this.stopFrameSubmit(i),this.cleanupFrame(i),this.unregisterFrame(i),this.upload._removeFileEntry(i.data("file"))},onRetry:function(e){var t=m(e);this.performUpload(t)},onRemove:function(e,t){var i=m(e),n=i.data("frame");n?(this.unregisterFrame(n),this.upload._removeFileEntry(i),this.cleanupFrame(n)):c(i,this.upload,t)},onAbort:function(){var t=this.element,i=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),i.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' style='display:none;' />")},createForm:function(t,i){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+i+"'/>")},stopFrameSubmit:function(e){t!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}},y=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e},y.prototype={onSelect:function(t,i){var n=this.upload,r=this,o=e(t.target),s=this.prepareUpload(o,i);e.each(s,function(){n.options.async.autoUpload?r.performUpload(this):(n._supportsRemove()&&n._fileAction(this,I),n._showUploadButton())})},prepareUpload:function(t,i){var n=this.enqueueFiles(i);return t.is("input")&&(e.each(n,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",n),this.upload._addInput(t)),n},enqueueFiles:function(t){var i,n,r,o,s=this.upload,a=t.length,l=[];if(s.options.async.batch===!0)i=e.map(t,function(e){return e.name}).join(", "),o=s._enqueueFile(i,{fileNames:t}),o.data("files",t),l.push(o);else for(n=0;a>n;n++)r=t[n],i=r.name,o=s._enqueueFile(i,{fileNames:[r]}),o.data("files",[r]),l.push(o);return l},performUpload:function(t){var i,n=this.upload,r=this.createFormData(),o=this.createXHR(),s={files:t.data("fileNames"),XMLHttpRequest:o};if(n.trigger(S,s))this.removeFileEntry(t);else{n._fileAction(t,A),n._hideUploadButton(),n._showHeaderUploadStatus(),s.data=e.extend({},s.data,g());for(i in s.data)r.append(i,s.data[i]);this.populateFormData(r,t.data("files")),n._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),this.postFormData(n.options.async.saveUrl,r,t,o)}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var i=e(this),n=f(i);n||t.performUpload(i)})},onCancel:function(e){var t=m(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=m(e);this.performUpload(t)},onRemove:function(e,t){var i=m(e);i.hasClass("k-file-success")?c(i,this.upload,t):this.removeFileEntry(i)},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,i,n){var r=this;i.data("request",n),n.addEventListener("load",function(e){r.onRequestSuccess.call(r,e,i)},!1),n.addEventListener(D,function(e){r.onRequestError.call(r,e,i)},!1),n.upload.addEventListener("progress",function(e){r.onRequestProgress.call(r,e,i)},!1),n.open("POST",e,!0),n.withCredentials=this.upload.options.async.withCredentials,n.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var i,n=this.upload,r=t.length;for(i=0;r>i;i++)e.append(n.options.async.saveField||n.name,t[i].rawFile);return e},onRequestSuccess:function(t,i){function n(){o.upload._onUploadError({target:e(i,o.upload.wrapper)},r)}var r=t.target,o=this;r.status>=200&&299>=r.status?d(r.responseText,function(t){o.upload._onFileProgress({target:e(i,o.upload.wrapper)},100),o.upload._onUploadSuccess({target:e(i,o.upload.wrapper)},t,r),o.cleanupFileEntry(i)},n):n()},onRequestError:function(t,i){var n=t.target;this.upload._onUploadError({target:e(i,this.upload.wrapper)},n)},cleanupFileEntry:function(t){var i=t.data("relatedInput"),n=!0;i&&(e.each(i.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(n=n&&this.hasClass("k-file-success"))}),n&&i.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(t,i){var n=Math.round(100*t.loaded/t.total);this.upload._onFileProgress({target:e(i,this.upload.wrapper)},n)},stopUploadRequest:function(e){e.data("request").abort()}},_.ui.plugin(P)}(window.kendo.jQuery),function(e,t){function i(e,t,i){var n,r;e.on("dragenter"+x,function(){t(),r=new Date,n||(n=setInterval(function(){var e=new Date-r;e>100&&(i(),clearInterval(n),n=null)},100))}).on("dragover"+x,function(){r=new Date})}function n(e,i){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+i}function r(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}function o(e,t){var i=e[t];return h(i)?i.from||i.field||t:i}var s,a,l,c,d=window.kendo,u=d.ui.Widget,h=e.isPlainObject,p=e.proxy,f=e.extend,m=d.support.placeholder,g=d.support.browser,v=d.isFunction,y=/(^\/|\/$)/g,_="change",b="apply",w="error",k="click",x=".kendoFileBrowser",C=".kendoBreadcrumbs",S=".kendoSearchBox",T="name",D="size",M="type",A={field:M,dir:"asc"},E=d.template('<li class="k-tile-empty"><strong>${text}</strong></li>'),I='<div class="k-widget k-filebrowser-toolbar k-header k-floatwrap"><div class="k-toolbar-wrap"># if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-icontext k-upload-button"><span class="k-icon k-add"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div># } ## if (showCreate) { #<button type="button" class="k-button k-button-icon"><span class="k-icon k-addfolder" /></button># } ## if (showDelete) { #<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-delete" /></button>&nbsp;# } #</div><div class="k-tiles-arrange"><label>#=messages.orderBy#: <select /></label></a></div></div>';f(!0,d.data,{schemas:{filebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),f(!0,d.data,{transports:{filebrowser:d.data.RemoteTransport.extend({init:function(t){d.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,i){i.data=e.extend({},i.data,{path:this.options.path()}),v(this.options[t])?this.options[t].call(this,i):d.data.RemoteTransport.fn[t].call(this,i)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),s=g.msie&&8>g.version?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},a=u.extend({init:function(e,t){var i=this;t=t||{},u.fn.init.call(i,e,t),i.element.addClass("k-filebrowser"),i.element.on(k+x,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-delete)",p(i._deleteClick,i)).on(k+x,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-addfolder)",p(i._addClick,i)).on("keydown"+x,"li.k-state-selected input",p(i._directoryKeyDown,i)).on("blur"+x,"li.k-state-selected input",p(i._directoryBlur,i)),i._dataSource(),i.refresh(),i.path(i.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:[w,_,b],destroy:function(){var e=this;u.fn.destroy.call(e),e.dataSource.unbind(w,e._errorHandler),e.element.add(e.list).add(e.toolbar).off(x),d.destroy(e.element)},value:function(){var e,i=this,r=i._selectedItem(),o=i.options.transport.fileUrl;return r&&"f"===r.get(M)?(e=n(i.path(),r.get(T)).replace(y,""),o&&(e=v(o)?o(e):d.format(o,encodeURIComponent(e))),e):t},_selectedItem:function(){var e=this.listView,i=e.select();return i.length?this.dataSource.getByUid(i.attr(d.attr("uid"))):t},_toolbar:function(){var t=this,i=d.template(I),n=t.options.messages,r=[{text:n.orderByName,value:"name"},{text:n.orderBySize,value:"size"}];t.toolbar=e(i({messages:n,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:!1,localization:{dropFilesHere:n.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:!0},upload:p(t._fileUpload,t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end(),t.upload=t.toolbar.find(".k-upload input").data("kendoUpload"),t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList"),t._attachDropzoneEvents()},_attachDropzoneEvents:function(){var t=this;t.options.transport.uploadUrl&&(i(e(document.documentElement),e.proxy(t._dropEnter,t),e.proxy(t._dropLeave,t)),t._scrollHandler=p(t._positionDropzone,t))},_dropEnter:function(){this._positionDropzone(),e(document).on("scroll"+x,this._scrollHandler)},_dropLeave:function(){this._removeDropzone(),e(document).off("scroll"+x,this._scrollHandler)},_positionDropzone:function(){var e=this,t=e.element,i=t.offset();e.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(i).css({width:t[0].clientWidth,height:t[0].clientHeight,lineHeight:t[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this,t=e.listView.select(),i=d.format(e.options.messages.deleteFile,t.find("strong").text());t.length&&e._showMessage(i,"confirm")&&e.listView.remove(t)},_addClick:function(){this.createDirectory()},_getFieldName:function(e){return o(this.dataSource.reader.model.fields,e)},_fileUpload:function(e){var t,i=this,n=i.options,r=n.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),s=e.files[0].name,a=T,l=D;o.test(s)?(e.data={path:i.path()},t=i._createFile(s),t?i.upload.one("success",function(e){t.set(a,e.response[i._getFieldName(a)]),t.set(l,e.response[i._getFieldName(l)]),i._tiles=i.listView.items().filter("["+d.attr("type")+"=f]")}):e.preventDefault()):(e.preventDefault(),i._showMessage(d.format(n.messages.invalidFileType,s,r)))},_findFile:function(e){var t,i,n,r=this.dataSource.data(),o=M,s=T;for(e=e.toLowerCase(),t=0,n=r.length;n>t;t++)if("f"===r[t].get(o)&&r[t].get(s).toLowerCase()===e){i=r[t];break}return i},_createFile:function(e){var t,i,n=this,r=0,o={},s=M,a=n.dataSource.view(),l=n._findFile(e);if(l&&!n._showMessage(d.format(n.options.messages.overwriteFile,e),"confirm"))return null;if(l)return l;for(t=0,i=a.length;i>t;t++)if("f"===a[t].get(s)){r=t;break}return o[s]="f",o[T]=e,o[D]=0,n.dataSource.insert(++r,o)},createDirectory:function(){var e,t,i=this,n=0,r=M,o=T,s=i.dataSource.data(),a=i._nameDirectory(),l=new i.dataSource.reader.model;for(e=0,t=s.length;t>e;e++)"d"===s[e].get(r)&&(n=e);l.set(r,"d"),l.set(o,a),i.listView.one("dataBound",function(){var e=i.listView.items().filter("["+d.attr("uid")+"="+l.uid+"]"),t=e.find("input");e.length&&this.edit(e),this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight),setTimeout(function(){t.select()})}).one("save",function(e){var t=e.model.get(o);t?e.model.set(o,i._nameExists(t,l.uid)?i._nameDirectory():t):e.model.set(o,a)}),i.dataSource.insert(++n,l)},_directoryKeyDown:function(e){13==e.keyCode&&e.currentTarget.blur()},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var i,n,r=this.dataSource.data(),o=M,s=T;for(i=0,n=r.length;n>i;i++)if("d"===r[i].get(o)&&r[i].get(s).toLowerCase()===e.toLowerCase()&&r[i].uid!==t)return!0;return!1},_nameDirectory:function(){var t,i,n,r="New folder",o=this.dataSource.data(),s=[],a=M,l=T;for(i=0,n=o.length;n>i;i++)"d"===o[i].get(a)&&o[i].get(l).toLowerCase().indexOf(r.toLowerCase())>-1&&s.push(o[i].get(l));if(e.inArray(r,s)>-1){i=2;do t=r+" ("+i+")",i++;while(e.inArray(t,s)>-1);r=t}return r},orderBy:function(e){this.dataSource.sort([{field:M,dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:T,operator:"contains",value:e})},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("dblclick"+x,"li",p(t._dblClick,t)),t.listView=new d.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?t._tiles=this.items().filter("["+d.attr("type")+"=f]"):this.wrapper.append(E({text:t.options.messages.emptyFolder}))},change:p(t._listViewChange,t)})},_dblClick:function(t){var i,r=this,o=e(t.currentTarget);o.hasClass("k-edit-item")&&r._directoryBlur(),o.filter("["+d.attr("type")+"=d]").length?(i=r.dataSource.getByUid(o.attr(d.attr("uid"))),i&&(r.path(n(r.path(),i.get(T))),r.breadcrumbs.value(r.path()))):o.filter("["+d.attr("type")+"=f]").length&&r.trigger(b)},_listViewChange:function(){var e=this._selectedItem();e&&(this.toolbar.find(".k-delete").parent().removeClass("k-state-disabled"),"f"===e.get(M)&&this.trigger(_))},_dataSource:function(){var e,t=this,i=t.options,n=i.transport,r=f({},A),o={field:T,dir:"asc"},s={type:n.type||"filebrowser",sort:[r,o]};h(n)&&(n.path=p(t.path,t),s.transport=n),h(i.schema)?s.schema=i.schema:n.type&&h(d.data.schemas[n.type])&&(e=d.data.schemas[n.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(w,t._errorHandler):t._errorHandler=p(t._error,t),t.dataSource=d.data.DataSource.create(s).bind(w,t._errorHandler)},_navigation:function(){var t=this,i=e('<div class="k-floatwrap"><input/><input/></div>').appendTo(this.element);t.breadcrumbs=i.find("input:first").kendoBreadcrumbs({value:t.options.path,change:function(){t.path(this.value())}}).data("kendoBreadcrumbs"),t.searchBox=i.parent().find("input:last").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox")},_error:function(e){var t,i=this;i.trigger(w,e)||(t=e.xhr.status,"error"==e.status?"404"==t?i._showMessage(i.options.messages.directoryNotFound):"0"!=t&&i._showMessage("Error! The requested URL returned "+t+" - "+e.xhr.statusText):"timeout"==t&&i._showMessage("Error! Server timeout."))},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){var e=this;e._navigation(),e._toolbar(),e._content()},_editTmpl:function(){var e='<li class="k-tile k-state-selected" '+d.attr("uid")+'="#=uid#" ';return e+=d.attr("type")+'="${'+M+'}">',e+="#if("+M+' == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-loading"></span></div>',e+="#}#",e+="#if("+M+' == "d") { #',e+='<input class="k-input" '+d.attr("bind")+'="value:'+T+'"/>',e+="#}#",e+="</li>",p(d.template(e),{sizeFormatter:r})},_itemTmpl:function(){var e='<li class="k-tile" '+d.attr("uid")+'="#=uid#" ';return e+=d.attr("type")+'="${'+M+'}">',e+="#if("+M+' == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-file"></span></div>',e+="#}#",e+="<strong>${"+T+"}</strong>",e+="#if("+M+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+D+")}</span> #}#",e+="</li>",p(d.template(e),{sizeFormatter:r})},path:function(e){var i=this,n=i._path||"";return e!==t?(i._path=e.replace(y,"")+"/",i.dataSource.read({path:i._path}),t):(n&&(n=n.replace(y,"")),"/"===n||""===n?"":n+"/")}}),l=u.extend({init:function(e,t){var i=this;t=t||{},u.fn.init.call(i,e,t),
m&&i.element.attr("placeholder",i.options.label),i._wrapper(),i.element.on("keydown"+S,p(i._keydown,i)).on("change"+S,p(i._updateValue,i)),i.wrapper.on(k+S,"a",p(i._click,i)),m||i.element.on("focus"+S,p(i._focus,i)).on("blur"+S,p(i._blur,i))},options:{name:"SearchBox",label:"Search",value:""},events:[_],destroy:function(){var e=this;e.wrapper.add(e.element).add(e.label).off(S),u.fn.destroy.call(e)},_keydown:function(e){13===e.keyCode&&this._updateValue()},_click:function(e){e.preventDefault(),this._updateValue()},_updateValue:function(){var e=this,t=e.element.val();t!==e.value()&&(e.value(t),e.trigger(_))},_blur:function(){this._updateValue(),this._toggleLabel()},_toggleLabel:function(){m||this.label.toggle(!this.element.val())},_focus:function(){this.label.hide()},_wrapper:function(){var t=this.element,i=t.parents(".k-search-wrap");t[0].style.width="",t.addClass("k-input"),i.length||(i=t.wrap(e('<div class="k-widget k-search-wrap k-textbox"/>')).parent(),m||e('<label style="display:block">'+this.options.label+"</label>").insertBefore(t),e('<a href="#" class="k-icon k-i-search k-search"/>').appendTo(i)),this.wrapper=i,this.label=i.find(">label")},value:function(e){var i=this;return e!==t?(i.options.value=e,i.element.val(e),i._toggleLabel(),t):i.options.value}}),c=u.extend({init:function(e,t){var i=this;t=t||{},u.fn.init.call(i,e,t),i._wrapper(),i.wrapper.on("focus"+C,"input",p(i._focus,i)).on("blur"+C,"input",p(i._blur,i)).on("keydown"+C,"input",p(i._keydown,i)).on(k+C,"a.k-i-arrow-n:first",p(i._rootClick,i)).on(k+C,"a:not(.k-i-arrow-n)",p(i._click,i)),i.value(i.options.value)},options:{name:"Breadcrumbs",gap:50},events:[_],destroy:function(){var e=this;u.fn.destroy.call(e),e.wrapper.add(e.wrapper.find("input")).add(e.wrapper.find("a")).off(C)},_update:function(e){e="/"===(e||"").charAt(0)?e:"/"+(e||""),e!==this.value()&&(this.value(e),this.trigger(_))},_click:function(t){t.preventDefault(),this._update(this._path(e(t.target).prevAll("a:not(.k-i-arrow-n)").addBack()))},_rootClick:function(e){e.preventDefault(),this._update("")},_focus:function(){var e=this,t=e.element;e.overlay.hide(),e.element.val(e.value()),setTimeout(function(){t.select()})},_blur:function(){if(!this.overlay.is(":visible")){var e=this,t=e.element,i=t.val().replace(/\/{2,}/g,"/");e.overlay.show(),t.val(""),e._update(i)}},_keydown:function(e){var t=this;13===e.keyCode&&(t._blur(),setTimeout(function(){t.overlay.find("a:first").focus()}))},_wrapper:function(){var t,i=this.element,n=i.parents(".k-breadcrumbs");i[0].style.width="",i.addClass("k-input"),n.length||(n=i.wrap(e('<div class="k-widget k-breadcrumbs k-textbox"/>')).parent()),t=n.find(".k-breadcrumbs-wrap"),t.length||(t=e('<div class="k-breadcrumbs-wrap"/>').appendTo(n)),this.wrapper=n,this.overlay=t},refresh:function(){var i,n,r,o,s="",a=this.value();for(a!==t&&a.match(/^\//)||(a="/"+(a||"")),i=a.split("/"),r=0,o=i.length;o>r;r++)n=i[r],n&&(s||(s+='<a href="#" class="k-icon k-i-arrow-n">root</a>'),s+='<a class="k-link" href="#">'+i[r]+"</a>",s+='<span class="k-icon k-i-arrow-e">&gt;</span>');this.overlay.empty().append(e(s)),this._adjustSectionWidth()},_adjustSectionWidth:function(){var t,i=this,n=i.wrapper,r=n.width()-i.options.gap,o=i.overlay.find("a");o.each(function(i){t=e(this),t.parent().width()>r&&(i==o.length-1?t.width(r):t.prev().addBack().hide())})},value:function(e){return e!==t?(this._value=e.replace(/\/{2,}/g,"/"),this.refresh(),t):this._value},_path:function(t){return"/"+e.map(t,function(t){return e(t).text()}).join("/")}}),d.ui.plugin(a),d.ui.plugin(c),d.ui.plugin(l)}(window.kendo.jQuery),function(e,t){function i(e,i){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+i}function n(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var r,o,s=window.kendo,a=s.ui.FileBrowser,l=e.isPlainObject,c=e.proxy,d=e.extend,u=s.support.browser,h=s.isFunction,p=/(^\/|\/$)/g,f="error",m=".kendoImageBrowser",g="name",v="size",y="type",_={field:y,dir:"asc"},b=s.template('<li class="k-tile-empty"><strong>${text}</strong></li>');d(!0,s.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),d(!0,s.data,{transports:{imagebrowser:s.data.RemoteTransport.extend({init:function(t){s.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,i){i.data=e.extend({},i.data,{path:this.options.path()}),h(this.options[t])?this.options[t].call(this,i):s.data.RemoteTransport.fn[t].call(this,i)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),r=u.msie&&8>u.version?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},o=a.extend({init:function(e,t){var i=this;t=t||{},a.fn.init.call(i,e,t),i.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e,n=this,r=n._selectedItem(),o=n.options.transport.imageUrl;return r&&"f"===r.get(y)?(e=i(n.path(),r.get(g)).replace(p,""),o&&(e=h(o)?o(e):s.format(o,encodeURIComponent(e))),e):t},_fileUpload:function(e){var t,i=this,n=i.options,r=n.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name,l=g,c=v;o.test(a)?(e.data={path:i.path()},t=i._createFile(a),t?(t._uploading=!0,i.upload.one("success",function(e){delete t._uploading,t.set(l,e.response[i._getFieldName(l)]),t.set(c,e.response[i._getFieldName(c)]),i._tiles=i.listView.items().filter("["+s.attr("type")+"=f]"),i._scroll()})):e.preventDefault()):(e.preventDefault(),i._showMessage(s.format(n.messages.invalidFileType,a,r)))},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("scroll"+m,c(t._scroll,t)).on("dblclick"+m,"li",c(t._dblClick,t)),t.listView=new s.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?(t._tiles=this.items().filter("["+s.attr("type")+"=f]"),t._scroll()):this.wrapper.append(b({text:t.options.messages.emptyFolder}))},change:c(t._listViewChange,t)})},_dataSource:function(){var e,t=this,i=t.options,n=i.transport,r=d({},_),o={field:g,dir:"asc"},a={type:n.type||"imagebrowser",sort:[r,o]};l(n)&&(n.path=c(t.path,t),a.transport=n),l(i.schema)?a.schema=i.schema:n.type&&l(s.data.schemas[n.type])&&(e=s.data.schemas[n.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(f,t._errorHandler):t._errorHandler=c(t._error,t),t.dataSource=s.data.DataSource.create(a).bind(f,t._errorHandler)},_loadImage:function(t){var i=this,n=e(t),r=i.dataSource.getByUid(n.attr(s.attr("uid"))),o=r.get(g),a=i.options.transport.thumbnailUrl,l=e("<img />",{alt:o}),c="?";r._uploading||(l.hide().on("load"+m,function(){e(this).prev().remove().end().addClass("k-image").fadeIn()}),n.find(".k-loading").after(l),h(a)?a=a(i.path(),encodeURIComponent(o)):(a.indexOf("?")>=0&&(c="&"),a=a+c+"path="+i.path()+encodeURIComponent(o)),l.attr("src",a),t.loaded=!0)},_scroll:function(){var e=this;e.options.transport&&e.options.transport.thumbnailUrl&&(clearTimeout(e._timeout),e._timeout=setTimeout(function(){var i=e.list.outerHeight(),n=e.list.scrollTop(),o=n+i;e._tiles.each(function(){var i=r(this),s=i+this.offsetHeight;return(i>=n&&o>i||s>=n&&o>s)&&e._loadImage(this),!(i>o)&&t}),e._tiles=e._tiles.filter(function(){return!this.loaded})},250))},_itemTmpl:function(){var e=this,t='<li class="k-tile" '+s.attr("uid")+'="#=uid#" ';return t+=s.attr("type")+'="${'+y+'}">',t+="#if("+y+' == "d") { #',t+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',t+="#}else{#",t+=e.options.transport&&e.options.transport.thumbnailUrl?'<div class="k-thumb"><span class="k-icon k-loading"></span></div>':'<div class="k-thumb"><span class="k-icon k-file"></span></div>',t+="#}#",t+="<strong>${"+g+"}</strong>",t+="#if("+y+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+v+")}</span> #}#",t+="</li>",c(s.template(t),{sizeFormatter:n})}}),s.ui.plugin(o)}(window.kendo.jQuery),function(e,t){var i,n,r,o,s=window.kendo,a=s.Class,l=s.ui.Widget,c=s.support.mobileOS,d=s.support.browser,u=e.extend,h=e.proxy,p=s.deepExtend,f=".kendoEditor",m=s.keys,g=a.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return s.template(e.template,{useWithBlock:!1})(e)}}),v={editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>',buttonTemplate:'<a href="" role="button" class="k-tool"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #"><span unselectable="on" class="k-tool-icon #= data.cssClass #">#= data.title #</span></a>',colorPickerTemplate:'<div class="k-colorpicker #= data.cssClass #" />',comboBoxTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" class="#= data.cssClass #" /></span>',separatorTemplate:'<span class="k-separator" />',formatByName:function(t,i){for(var n=0;i.length>n;n++)if(e.inArray(t,i[n].tags)>=0)return i[n]},registerTool:function(e,t){var i=t.options;i&&i.template&&(i.template.options.cssClass="k-"+e),t.name||(t.options.name=e,t.name=e.toLowerCase()),w.defaultTools[e]=t},registerFormat:function(e,t){w.fn.options.formats[e]=t}},y={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",createTable:"Create table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column"},_=!c||c.ios&&c.flatVersion>=500||!c.ios&&t!==document.documentElement.contentEditable,b={basic:["bold","italic","underline"],alignment:["justifyLeft","justifyCenter","justifyRight"],lists:["insertUnorderedList","insertOrderedList"],indenting:["indent","outdent"],links:["createLink","unlink"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"]},w=l.extend({init:function(t,i){var n,r,o,a,c=this,d=s.ui.editor;_&&(l.fn.init.call(c,t,i),c.options=p({},c.options,i),t=c.element,a=d.Dom.name(t[0]),t.closest("form").on("submit"+f,function(){c.update()}),o=u({},c.options),o.editor=c,"textarea"==a?(c._wrapTextarea(),r=c.wrapper.find(".k-editor-toolbar"),t[0].id&&r.attr("aria-controls",t[0].id)):(c.element.attr("contenteditable",!0).addClass("k-widget k-editor k-editor-inline"),o.popup=!0,r=e('<ul class="k-editor-toolbar" role="toolbar" />').insertBefore(t)),c.toolbar=new d.Toolbar(r[0],o),c.toolbar.bindTo(c),"textarea"==a&&setTimeout(function(){var e=c.wrapper[0].style.height,t=parseInt(e,10),i=c.wrapper.height();e.indexOf("px")>0&&!isNaN(t)&&i>t&&c.wrapper.height(t-(i-t))}),c._initializeContentElement(c),c.keyboard=new d.Keyboard([new d.TypingHandler(c),new d.BackspaceHandler(c),new d.SystemHandler(c)]),c.clipboard=new d.Clipboard(this),c.undoRedoStack=new d.UndoRedoStack,n=i&&i.value?i.value:c.textarea?t.val().replace(/[\r\n\v\f\t ]+/gi," "):t[0].innerHTML,c.value(n),e(document).on("mousedown",h(c._endTyping,c)).on("mouseup",h(c._mouseup,c)),s.notify(c))},_endTyping:function(){var e=this.keyboard;try{e.isTypingInProgress()&&(e.endTyping(!0),this.saveSelection())}catch(e){}},_selectionChange:function(){d.msie||s.ui.editor.Dom.ensureTrailingBreaks(this.body),this._selectionStarted=!1,this.saveSelection(),this.trigger("select",{})},_wrapTextarea:function(){var t=this,i=t.element,n=i[0].style.width,r=i[0].style.height,o=v.editorWrapperTemplate,s=e(o).insertBefore(i).width(n).height(r),a=s.find(".k-editable-area");i.attr("autocomplete","off").appendTo(a).addClass("k-content k-raw-content").css("display","none"),t.textarea=i,t.wrapper=s},_createContentElement:function(t){var i,n,r,o=this,a=o.textarea,l=o.options.domain,c=l||document.domain,d="",u='javascript:""';return(l||c!=location.hostname)&&(d='<script>document.domain="'+c+'"</script>',u="javascript:document.write('"+d+"')"),a.hide(),i=e("<iframe />",{frameBorder:"0"})[0],e(i).css("display","").addClass("k-content").insertBefore(a),i.src=u,n=i.contentWindow||i,r=n.document||i.contentDocument,e(i).one("load",function(){o.toolbar.decorateFrom(r.body)}),r.open(),r.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;height:100%;min-height:100%;}body{font-size:12px;font-family:Verdana,Geneva,sans-serif;padding-top:1px;margin-top:-1px;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(s.support.isRtl(a)?"direction:rtl;":"")+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;padding:0 .2em}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table p{margin:0;padding:0;}</style>"+d+"<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');</script>"+e.map(t,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>"),r.close(),n},_blur:function(){var e=this.textarea,t=e?e.val():this._oldValue,i=this.options.encoded?this.encodedValue():this.value();this.update(),e&&e.trigger("blur"),i!=t&&this.trigger("change")},_initializeContentElement:function(){var i,n,r=this;r.textarea?(r.window=r._createContentElement(r.options.stylesheets),i=r.document=r.window.contentDocument||r.window.document,r.body=i.body,n=r.window,e(i).on("mouseup"+f,h(r._mouseup,r))):(r.window=window,i=r.document=document,r.body=r.element[0],n=r.body,r.toolbar.decorateFrom(r.body)),e(n).on("blur"+f,h(this._blur,this));try{i.execCommand("enableInlineTableEditing",null,!1)}catch(e){}s.support.touch&&e(i).on("selectionchange"+f,h(this._selectionChange,this)).on("keydown"+f,function(){s._activeElement()!=i.body&&r.window.focus()}),e(r.body).on("keydown"+f,function(e){var i,n,o,s,a,l;return e.keyCode===m.F10?(setTimeout(h(r.toolbar.focus,r.toolbar),100),e.preventDefault(),t):((e.keyCode==m.LEFT||e.keyCode==m.RIGHT)&&(i=r.getRange(),n=e.keyCode==m.LEFT,o=i[n?"startContainer":"endContainer"],s=i[n?"startOffset":"endOffset"],a=n?-1:1,n&&(s-=1),s+a>0&&3==o.nodeType&&"锘�"==o.nodeValue[s]&&(i.setStart(o,s+a),i.collapse(!0),r.selectRange(i))),(l=r.keyboard.toolFromShortcut(r.toolbar.tools,e))?(e.preventDefault(),/^(undo|redo)$/.test(l)||r.keyboard.endTyping(!0),r.trigger("keydown",e),r.exec(l),!1):(r.keyboard.clearTimeout(),r.keyboard.keydown(e),t))}).on("keyup"+f,function(t){var i=[8,9,33,34,35,36,37,38,39,40,40,45,46];(e.inArray(t.keyCode,i)>-1||65==t.keyCode&&t.ctrlKey&&!t.altKey&&!t.shiftKey)&&r._selectionChange(),r.keyboard.keyup(t)}).on("mousedown"+f,function(t){if(r._selectionStarted=!0,!d.gecko){var i=e(t.target);(2==t.which||1==t.which&&t.ctrlKey)&&i.is("a[href]")&&window.open(i.attr("href"),"_new")}}).on("click"+f,function(e){var t,i=s.ui.editor.Dom;"img"===i.name(e.target)&&(t=r.createRange(),t.selectNode(e.target),r.selectRange(t))}).on("cut"+f+" paste"+f,function(e){r.clipboard["on"+e.type](e)}).on("focusin"+f,function(){e(this).addClass("k-state-active"),r.toolbar.show(),r.textarea&&r.selectRange(r.getRange())}).on("focusout"+f,function(){setTimeout(function(){var t=s._activeElement(),i=r.body,n=r.toolbar;t==i||e.contains(i,t)||e(t).is(".k-editortoolbar-dragHandle")||n.focused()||(e(i).removeClass("k-state-active"),n.hide())},10)})},_mouseup:function(){var e=this;e._selectionStarted&&setTimeout(function(){e._selectionChange()},1)},refresh:function(){var e=this;e.textarea&&(e.textarea.val(e.value()),e.wrapper.find("iframe").remove(),e._initializeContentElement(e),e.value(e.textarea.val()))},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:y,formats:{},encoded:!0,domain:null,serialization:{entities:!0,scripts:!1},stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],b.basic,b.alignment,b.lists,b.indenting,b.links,["insertImage"],b.tables)},destroy:function(){var t=this;l.fn.destroy.call(t),e(t.window).add(t.document).add(t.body).add(t.wrapper).add(t.element.closest("form")).off(f),e(document).off("mousedown",h(t._endTyping,t)).off("mouseup",h(t._mouseup,t)),t._focusOutside(),t.toolbar.destroy(),s.destroy(t.wrapper)},_focusOutside:function(){if(s.support.browser.msie&&this.textarea){var t=e("<input style='position:absolute;left:-10px;top:-10px;width:1px;height:1px;font-size:0;border:0;' />").appendTo(document.body).focus();t.blur().remove()}},state:function(e){var t,i,n=w.defaultTools[e],r=n&&(n.options.finder||n.finder),o=s.ui.editor.RangeUtils;return!!r&&(t=this.getRange(),i=o.textNodes(t),!i.length&&t.collapsed&&(i=[t.startContainer]),r.getFormat?r.getFormat(i):r.isFormatted(i))},value:function(e){var i=this.body,n=s.ui.editor,r=n.Serializer.domToXhtml(i,this.options.serialization);return e===t?r:(e!=r&&(n.Serializer.htmlToDom(e,i),d.msie||s.ui.editor.Dom.ensureTrailingBreaks(this.body),this.selectionRestorePoint=null,this.update(),this.toolbar.refreshTools()),t)},saveSelection:function(t){t=t||this.getRange();var i=t.commonAncestorContainer,n=this.body;(i==n||e.contains(n,i))&&(this.selectionRestorePoint=new s.ui.editor.RestorePoint(t))},_focusBody:function(){var e,t=this.body,i=this.wrapper&&this.wrapper.find("iframe")[0],n=this.document.documentElement,r=s._activeElement();r!=t&&r!=i&&(e=n.scrollTop,t.focus(),n.scrollTop=e)},restoreSelection:function(){this._focusBody(),this.selectionRestorePoint&&this.selectRange(this.selectionRestorePoint.toRange())},focus:function(){this.restoreSelection()},update:function(e){e=e||this.options.encoded?this.encodedValue():this.value(),this.textarea?this.textarea.val(e):this._oldValue=e},encodedValue:function(){return s.ui.editor.Dom.encode(this.value())},createRange:function(e){return s.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return s.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this._focusBody();var t=this.getSelection();t.removeAllRanges(),t.addRange(e),this.saveSelection(e)},getRange:function(){var e=this.getSelection(),t=e&&e.rangeCount>0?e.getRangeAt(0):this.createRange(),i=this.document;return t.startContainer!=i||t.endContainer!=i||t.startOffset||t.endOffset||(t.setStart(this.body,0),t.collapse(!0)),t},selectedHtml:function(){return s.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(e,t){this.clipboard.paste(e,t)},exec:function(e,i){var n,r,o,s=this,a=null;if(!e)throw Error("kendoEditor.exec(): `name` parameter cannot be empty");if(e=e.toLowerCase(),s.keyboard.isTypingInProgress()||s.restoreSelection(),r=s.toolbar.toolById(e),!r)for(o in w.defaultTools)if(o.toLowerCase()==e){r=w.defaultTools[o];break}if(r){if(n=s.getRange(),r.command&&(a=r.command(u({range:n},i))),s.trigger("execute",{name:e,command:a}),/^(undo|redo)$/i.test(e))s.undoRedoStack[e]();else if(a&&(a.managesUndoRedo||s.undoRedoStack.push(a),a.editor=s,a.exec(),a.async))return a.change=h(s._selectionChange,s),t;s._selectionChange()}}});w.defaultTools={undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},s.ui.plugin(w),i=a.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title})},command:function(e){return new this.options.command(e)},update:e.noop}),i.exec=function(e,t,i){e.exec(t,{value:i})},n=i.extend({init:function(e){i.fn.init.call(this,e)},command:function(e){var t=this;return new s.ui.editor.FormatCommand(u(e,{formatter:t.options.formatter}))},update:function(e,t){var i=this.options.finder.isFormatted(t);e.toggleClass("k-state-selected",i),e.attr("aria-pressed",i)}}),v.registerTool("separator",new i({template:new g({template:v.separatorTemplate})})),r=d.msie&&9>d.version?"锘�":"",o='<br class="k-br" />',d.msie&&(10>d.version?o="锘�":11>d.version&&(o=" ")),u(s.ui,{editor:{ToolTemplate:g,EditorUtils:v,Tool:i,FormatTool:n,_bomFill:r,emptyElementContent:o}})}(window.jQuery),function(e){function t(e){var t,i,n={};for(t=0,i=e.length;i>t;t++)n[e[t]]=!0;return n}var i,n,r,o,s,a,l,c,d,u,h=window.kendo,p=e.map,f=e.extend,m=h.support.browser,g="style",v="float",y="cssFloat",_="styleFloat",b="class",w="k-marker",k=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),x="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),C=x.concat(["ul","ol","li"]),S=t(C),T="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),D=t(T),M=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),A=function(e){1==e.nodeType&&e.normalize()};m.msie&&m.version>=8&&(A=function(e){if(1==e.nodeType&&e.firstChild)for(var t=e.firstChild,i=t;i=i.nextSibling,i;)3==i.nodeType&&3==t.nodeType&&(i.nodeValue=t.nodeValue+i.nodeValue,u.remove(t)),t=i}),i=/^\s+$/,n=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,r=/\ufeff/g,o=/^(\s+|\ufeff)$/,a="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),l=/[<>\&]/g,c=/[\u00A0-\u2666<>\&]/g,d={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"},u={block:S,inline:D,findNodeIndex:function(e,t){var i=0;if(!e)return-1;for(;e=e.previousSibling,e;)t&&3==e.nodeType||i++;return i},isDataNode:function(e){return e&&null!==e.nodeValue&&null!==e.data},isAncestorOf:function(t,i){try{return!u.isDataNode(t)&&(e.contains(t,u.isDataNode(i)?i.parentNode:i)||i.parentNode==t)}catch(e){return!1}},isAncestorOrSelf:function(e,t){return u.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(u.isAncestorOf(e,t))for(;t&&t.parentNode!=e;)t=t.parentNode;return t},getNodeLength:function(e){return u.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){for(var i=e.cloneNode(!1),n="",r=e;r.nextSibling&&3==r.nextSibling.nodeType&&r.nextSibling.nodeValue;)n+=r.nextSibling.nodeValue,r=r.nextSibling;e.deleteData(t,e.length),i.deleteData(0,t),i.nodeValue+=n,u.insertAfter(i,e)},attrEquals:function(e,t){var i,n;for(i in t)if(n=e[i],i==v&&(n=e[h.support.cssFloat?y:_]),"object"==typeof n){if(!u.attrEquals(n,t[i]))return!1}else if(n!=t[i])return!1;return!0},blockParentOrBody:function(e){return u.parentOfType(e,C)||e.ownerDocument.body},blockParents:function(t){var i,n,r,o=[];for(i=0,n=t.length;n>i;i++)r=u.parentOfType(t[i],u.blockElements),r&&e.inArray(r,o)<0&&o.push(r);return o},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:A,blockElements:C,nonListBlockElements:x,inlineElements:T,empty:k,fillAttrs:M,toHex:function(e){var t=n.exec(e);return t?"#"+p(t.slice(1),function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}).join(""):e},encode:function(e,t){var i=!t||t.entities?c:l;return e.replace(i,function(e){var t=e.charCodeAt(0),i=d[t];return i?"&"+i+";":e})},stripBom:function(e){return(e||"").replace(r,"")},insignificant:function(e){var t=e.attributes;return"k-marker"==e.className||u.is(e,"br")&&("k-br"==e.className||t._moz_dirty||t._moz_editor_bogus_node)},emptyNode:function(t){var i=e.grep(t.childNodes,function(e){return!u.is(e,"br")&&(!u.insignificant(e)&&((3!=e.nodeType||!o.test(e.nodeValue))&&(!u.is(e,"p")||!u.emptyNode(e))))});return!i.length},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return 3!=e.nodeType||!u.isWhitespace(e)})},lastTextNode:function(e){var t,i=null;if(3==e.nodeType)return e;for(t=e.lastChild;t;t=t.previousSibling)if(i=u.lastTextNode(t))return i;return i},is:function(e,t){return u.name(e)==t},isMarker:function(e){return e.className==w},isWhitespace:function(e){return i.test(e.nodeValue)},isBlock:function(e){return S[u.name(e)]},isEmpty:function(e){return k[u.name(e)]},isInline:function(e){return D[u.name(e)]},scrollContainer:function(e){var t=u.windowFromDocument(e),i=(t.contentWindow||t).document||t.ownerDocument||t;return i=h.support.browser.webkit||"BackCompat"==i.compatMode?i.body:i.documentElement},scrollTo:function(t){var i,n,r=e(u.isDataNode(t)?t.parentNode:t),o=u.windowFromDocument(t.ownerDocument),s=o.innerHeight,a=u.scrollContainer(t.ownerDocument);"br"==u.name(r[0])&&(r=r.parent()),i=r.offset().top,n=r[0].offsetHeight,n+i>a.scrollTop+s&&(a.scrollTop=n+i-s)},persistScrollTop:function(e){s=u.scrollContainer(e).scrollTop},restoreScrollTop:function(e){u.scrollContainer(e).scrollTop=s},insertAt:function(e,t,i){e.insertBefore(t,e.childNodes[i]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode.removeChild(e)},removeTextSiblings:function(e){for(var t=e.parentNode;e.nextSibling&&3==e.nextSibling.nodeType;)t.removeChild(e.nextSibling);
for(;e.previousSibling&&3==e.previousSibling.nodeType;)t.removeChild(e.previousSibling)},trim:function(e){var t,i;for(t=e.childNodes.length-1;t>=0;t--)i=e.childNodes[t],u.isDataNode(i)?(u.stripBom(i.nodeValue).length||u.remove(i),u.isWhitespace(i)&&u.insertBefore(i,e)):i.className!=w&&(u.trim(i),i.childNodes.length||u.isEmpty(i)||u.remove(i));return e},closest:function(e,t){for(;e&&u.name(e)!=t;)e=e.parentNode;return e},sibling:function(e,t){do e=e[t];while(e&&1!=e.nodeType);return e},next:function(e){return u.sibling(e,"nextSibling")},prev:function(e){return u.sibling(e,"previousSibling")},parentOfType:function(e,t){do e=e.parentNode;while(e&&!u.ofType(e,t));return e},ofType:function(t,i){return e.inArray(u.name(t),i)>=0},changeTag:function(e,t,i){var n,r,o,s,a,l=u.create(e.ownerDocument,t),c=e.attributes;if(!i)for(n=0,r=c.length;r>n;n++)a=c[n],a.specified&&(o=a.nodeName,s=a.nodeValue,o==b?l.className=s:o==g?l.style.cssText=e.style.cssText:l.setAttribute(o,s));for(;e.firstChild;)l.appendChild(e.firstChild);return u.insertBefore(l,e),u.remove(e),l},editableParent:function(e){for(;e&&(3==e.nodeType||"true"!==e.contentEditable);)e=e.parentNode;return e},wrap:function(e,t){return u.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},create:function(e,t,i){return u.attr(e.createElement(t),i)},attr:function(e,t){t=f({},t),t&&g in t&&(u.style(e,t.style),delete t.style);for(var i in t)null===t[i]?(e.removeAttribute(i),delete t[i]):"className"==i&&(e[i]=t[i]);return f(e,t)},style:function(t,i){e(t).css(i||{})},unstyle:function(e,t){for(var i in t)i==v&&(i=h.support.cssFloat?y:_),e.style[i]="";""===e.style.cssText&&e.removeAttribute(g)},inlineStyle:function(t,i,n){var r,o=e(u.create(t.ownerDocument,i,n));return t.appendChild(o[0]),r=p(a,function(e){return m.msie&&"line-height"==e&&"1px"==o.css(e)?"line-height:1.5":e+":"+o.css(e)}).join(";"),o.remove(),r},getEffectiveBackground:function(e){var t=e.css("background-color");return t.indexOf("rgba(0, 0, 0, 0")<0&&"transparent"!==t?t:"html"===e[0].tagName.toLowerCase()?"Window":u.getEffectiveBackground(e.parent())},removeClass:function(t,i){var n,r,o=" "+t.className+" ",s=i.split(" ");for(n=0,r=s.length;r>n;n++)o=o.replace(" "+s[n]+" "," ");o=e.trim(o),o.length?t.className=o:t.removeAttribute(b)},commonAncestor:function(){var e,t,i,n,r,o=arguments.length,s=[],a=1/0,l=null;if(!o)return null;if(1==o)return arguments[0];for(e=0;o>e;e++){for(t=[],i=arguments[e];i;)t.push(i),i=i.parentNode;s.push(t.reverse()),a=Math.min(a,t.length)}if(1==o)return s[0][0];for(e=0;a>e;e++){for(n=s[0][e],r=1;o>r;r++)if(n!=s[r][e])return l;l=n}return l},closestSplittableParent:function(t){var i,n,r;return i=1==t.length?u.parentOfType(t[0],["ul","ol"]):u.commonAncestor.apply(null,t),i||(i=u.parentOfType(t[0],["p","td"])||t[0].ownerDocument.body),u.isInline(i)&&(i=u.blockParentOrBody(i)),n=p(t,u.editableParent),r=u.commonAncestor(n)[0],e.contains(i,r)&&(i=r),i},closestEditable:function(t,i){var n=u.parentOfType(t,i),r=u.editableParent(t);return n&&r&&e.contains(n,r)?n=r:!n&&r&&(n=r),n},closestEditableOfType:function(e,t){var i=u.closestEditable(e,t);return i&&u.ofType(i,t)?i:void 0},filter:function(e,t,i){for(var n,r=0,o=t.length,s=[];o>r;r++)n=u.name(t[r]),(!i&&n==e||i&&n!=e)&&s.push(t[r]);return s},ensureTrailingBreaks:function(t){var i=e(t).find("p,td,th"),n=i.length,r=0;if(n)for(;n>r;r++)u.ensureTrailingBreak(i[r]);else u.ensureTrailingBreak(t)},ensureTrailingBreak:function(e){var t,i=e.lastChild,n=i&&u.name(i);(!n||"br"!=n&&"img"!=n||"br"==n&&"k-br"!=i.className)&&(t=e.ownerDocument.createElement("br"),t.className="k-br",e.appendChild(t))}},h.ui.editor.Dom=u}(window.kendo.jQuery),function(e,t){var i,n,r=window.kendo,o=r.ui.editor,s=o.Dom,a=e.extend,l="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),c=/"/g,d=/<br[^>]*>/i,u=/^\d+(\.\d*)?(px)?$/i,h=/<p><\/p>/i,p=/([\w|\-]+)\s*:\s*([^;]+);?/i,f=/^sizzle-\d+/i,m=/^k-script-/i,g=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i,v=document.createElement("div");v.innerHTML=" <hr>",i=3===v.firstChild.nodeType,v=null,n={toEditableHtml:function(e){var t='<br class="k-br">';return e=e||"",e.replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->").replace(/<script([^>]*)>(.*)?<\/script>/gi,"<telerik:script$1>$2</telerik:script>").replace(/<img([^>]*)>/gi,function(e){return e.replace(g,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,t+"<$1").replace(/<\/(table|blockquote)>$/i,"</$1>"+t)},_fillEmptyElements:function(t){e(t).find("p").each(function(){var t,i=e(this);if(/^\s*$/g.test(i.text())&&!i.find("img,input").length){for(t=this;t.firstChild&&3!=t.firstChild.nodeType;)t=t.firstChild;1!=t.nodeType||s.empty[s.name(t)]||(t.innerHTML=r.ui.editor.emptyElementContent)}})},_removeSystemElements:function(t){e(".k-paste-container",t).remove()},_resetOrderedLists:function(e){var t,i,n,r=e.getElementsByTagName("ol");for(t=0;r.length>t;t++)i=r[t],n=i.getAttribute("start"),i.setAttribute("start",1),n?i.setAttribute("start",n):i.removeAttribute(n)},_preventScriptExecution:function(t){e(t).find("*").each(function(){var e,t,i,n,r=this.attributes;for(t=0,i=r.length;i>t;t++)e=r[t],n=e.nodeName,e.specified&&/^on/i.test(n)&&(this.removeAttribute(n),this.setAttribute("k-script-"+n,e.nodeValue))})},htmlToDom:function(t,i){var o,a,l=r.support.browser,c=l.msie,d=c&&9>l.version;return t=n.toEditableHtml(t),d&&(t="<br/>"+t,o="originalsrc",a="originalhref",t=t.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,a+'="$1"'),t=t.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,o+'="$1"')),i.innerHTML=t,d?(s.remove(i.firstChild),e(i).find("telerik\\:script,script,link,img,a").each(function(){var e=this;e[a]&&(e.setAttribute("href",e[a]),e.removeAttribute(a)),e[o]&&(e.setAttribute("src",e[o]),e.removeAttribute(o))})):c&&(s.normalize(i),n._resetOrderedLists(i)),n._preventScriptExecution(i),n._fillEmptyElements(i),n._removeSystemElements(i),e("table",i).addClass("k-table"),i},domToXhtml:function(n,o){function a(t){var i,n,r,o,a=e.trim,l=a(t).split(";"),d=l.length;for(i=0,d=l.length;d>i;i++)l[i].length&&(n=p.exec(l[i]),n&&(r=a(n[1].toLowerCase()),o=a(n[2]),"font-size-adjust"!=r&&"font-stretch"!=r&&(r.indexOf("color")>=0?o=s.toHex(o):r.indexOf("font")>=0?o=o.replace(c,"'"):/\burl\(/g.test(o)&&(o=o.replace(c,"")),w.push(r),w.push(":"),w.push(o),w.push(";"))))}function g(i){var n,l,c,d,h,p,g,v,y,_=[],b=i.attributes;for(s.is(i,"img")&&(g=i.style.width,v=i.style.height,y=e(i),g&&u.test(g)&&(y.attr("width",parseInt(g,10)),s.unstyle(i,{width:t})),v&&u.test(v)&&(y.attr("height",parseInt(v,10)),s.unstyle(i,{height:t}))),l=0,c=b.length;c>l;l++)n=b[l],d=n.nodeName,h=n.nodeValue,p=n.specified,"value"==d&&"value"in i&&i.value?p=!0:"type"==d&&"text"==h?p=!0:"class"!=d||h?f.test(d)?p=!1:"complete"==d?p=!1:"altHtml"==d?p=!1:"start"==d&&(s.is(i,"ul")||s.is(i,"ol"))?p=!1:d.indexOf("_moz")>=0?p=!1:m.test(d)&&(p=!!o.scripts):p=!1,p&&_.push(n);if(_.length)for(_.sort(function(e,t){return e.nodeName>t.nodeName?1:t.nodeName>e.nodeName?-1:0}),l=0,c=_.length;c>l;l++)n=_[l],d=n.nodeName,h=n.nodeValue,("class"!=d||"k-table"!=h)&&(d=d.replace(m,""),w.push(" "),w.push(d),w.push('="'),"style"==d?a(h||i.style.cssText):w.push("src"==d||"href"==d?r.htmlEncode(i.getAttribute(d,2)):s.fillAttrs[d]?d:h),w.push('"'))}function v(e,t,i){for(var n=e.firstChild;n;n=n.nextSibling)_(n,t,i)}function y(e){return e.nodeValue.replace(/\ufeff/g,"")}function _(e,n,r){var a,l,c,d,u,h=e.nodeType;if(1==h){if(a=s.name(e),!a||s.insignificant(e))return;if(s.isInline(e)&&1==e.childNodes.length&&3==e.firstChild.nodeType&&!y(e.firstChild))return;if(!o.scripts&&"telerik:script"==a)return;if(l=k[a])return l.start(e),v(e,!1,l.skipEncoding),l.end(e),t;w.push("<"),w.push(a),g(e),s.empty[a]?w.push(" />"):(w.push(">"),v(e,n||s.is(e,"pre")),w.push("</"),w.push(a),w.push(">"))}else 3==h?(d=y(e),!n&&i&&(c=e.parentNode,u=e.previousSibling,u||(u=(s.isInline(c)?c:e).previousSibling),(!u||""===u.innerHTML||s.isBlock(u))&&(d=d.replace(/^[\r\n\v\f\t ]+/,"")),d=d.replace(/ +/," ")),w.push(r?d:s.encode(d,o))):4==h?(w.push("<![CDATA["),w.push(e.data),w.push("]]>")):8==h&&(e.data.indexOf("[CDATA[")<0?(w.push("<!--"),w.push(e.data),w.push("-->")):(w.push("<!"),w.push(e.data),w.push(">")))}function b(e){var t=e.childNodes.length,i=t&&3==e.firstChild.nodeType;return i&&(1==t||2==t&&s.insignificant(e.lastChild))}var w=[],k={"telerik:script":{start:function(e){w.push("<script"),g(e),w.push(">")},end:function(){w.push("</script>")},skipEncoding:!0},b:{start:function(){w.push("<strong>")},end:function(){w.push("</strong>")}},i:{start:function(){w.push("<em>")},end:function(){w.push("</em>")}},u:{start:function(){w.push('<span style="text-decoration:underline;">')},end:function(){w.push("</span>")}},iframe:{start:function(e){w.push("<iframe"),g(e),w.push(">")},end:function(){w.push("</iframe>")}},font:{start:function(e){var t,i,n;w.push('<span style="'),t=e.getAttribute("color"),i=l[e.getAttribute("size")],n=e.getAttribute("face"),t&&(w.push("color:"),w.push(s.toHex(t)),w.push(";")),n&&(w.push("font-face:"),w.push(n),w.push(";")),i&&(w.push("font-size:"),w.push(i),w.push(";")),w.push('">')},end:function(){w.push("</span>")}}};return o=o||{},b(n)?s.encode(y(n.firstChild).replace(/[\r\n\v\f\t ]+/," "),o):(v(n),w=w.join(""),""===w.replace(d,"").replace(h,"")?"":w)}},a(o,{Serializer:n})}(window.kendo.jQuery),function(e){function t(e,t,i,n){var r,o,s,a;if(e==t)return n-i;for(r=t;r&&r.parentNode!=e;)r=r.parentNode;if(r)return p(r)-i;for(r=e;r&&r.parentNode!=t;)r=r.parentNode;if(r)return n-p(r)-1;for(o=h.commonAncestor(e,t),s=e;s&&s.parentNode!=o;)s=s.parentNode;for(s||(s=o),a=t;a&&a.parentNode!=o;)a=a.parentNode;return a||(a=o),s==a?0:p(a)-p(s)}function i(e,i){function n(e){try{return t(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(e){return!0}}n(e)&&(i?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function n(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;for(var t=e.startContainer;t&&t!=e.endContainer&&!h.isAncestorOf(t,e.endContainer);)t=t.parentNode;e.commonAncestorContainer=t}function r(e){var t=e.duplicate(),i=e.duplicate();return t.collapse(!0),i.collapse(!1),h.commonAncestor(e.parentElement(),t.parentElement(),i.parentElement())}function o(e,t,i){var n,r=t[i?"startContainer":"endContainer"],o=t[i?"startOffset":"endOffset"],s=0,a=f(r),l=a?r:r.childNodes[o]||null,c=a?r.parentNode:r,d=t.ownerDocument,u=d.body.createTextRange();(3==r.nodeType||4==r.nodeType)&&(s=o),c||(c=d.body),"img"==c.nodeName.toLowerCase()?(u.moveToElementText(c),u.collapse(!1),e.setEndPoint(i?"StartToStart":"EndToStart",u)):(n=c.insertBefore(h.create(d,"a"),l),u.moveToElementText(n),h.remove(n),u[i?"moveStart":"moveEnd"]("character",s),u.collapse(!1),e.setEndPoint(i?"StartToStart":"EndToStart",u))}function s(e,t,i,n){var r,o,s,a,l,c,d,u=h.create(t.ownerDocument,"a"),m=e.duplicate(),g=n?"StartToStart":"StartToEnd",v=!1;u.innerHTML="锘�",m.collapse(n),o=m.parentElement(),h.isAncestorOrSelf(i,o)||(o=i);do v?o.insertBefore(u,u.previousSibling):(o.appendChild(u),v=!0),m.moveToElementText(u);while((r=m.compareEndPoints(g,e))>0&&u.previousSibling);s=u.nextSibling,-1==r&&f(s)?(m.setEndPoint(n?"EndToStart":"EndToEnd",e),h.remove(u),c=[s,m.text.length]):(a=!n&&u.previousSibling,l=n&&u.nextSibling,f(l)?c=[l,0]:f(a)?c=[a,a.length]:(d=p(u),c=o.nextSibling&&d==o.childNodes.length-1?[o.nextSibling,0]:[o,d]),h.remove(u)),t[n?"setStart":"setEnd"].apply(t,c)}var a=window.kendo,l=a.Class,c=e.extend,d=a.ui.editor,u=a.support.browser,h=d.Dom,p=h.findNodeIndex,f=h.isDataNode,m=h.findClosestAncestor,g=h.getNodeLength,v=h.normalize,y={selectionFromWindow:function(e){return"getSelection"in e?e.getSelection():new w(e.document)},selectionFromRange:function(e){var t=T.documentFromRange(e);return y.selectionFromDocument(t)},selectionFromDocument:function(e){return y.selectionFromWindow(h.windowFromDocument(e))}},_=l.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,t){this.startContainer=e,this.startOffset=t,n(this),i(this,!0)},setEnd:function(e,t){this.endContainer=e,this.endOffset=t,n(this),i(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,p(e))},setStartAfter:function(e){this.setStart(e.parentNode,p(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,p(e))},setEndAfter:function(e){this.setEnd(e.parentNode,p(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[1===e.nodeType?"childNodes":"nodeValue"].length)},collapse:function(e){var t=this;e?t.setEnd(t.startContainer,t.startOffset):t.setStart(t.endContainer,t.endOffset)},deleteContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(m(e.commonAncestorContainer,e.startContainer)),e.collapse(!0),function e(t){for(;t.next();)t.hasPartialSubtree()?e(t.getSubtreeIterator()):t.remove()}(new b(t))},cloneContents:function(){var e=T.documentFromRange(this);return function t(i){for(var n,r=e.createDocumentFragment();n=i.next();)n=n.cloneNode(!i.hasPartialSubtree()),i.hasPartialSubtree()&&n.appendChild(t(i.getSubtreeIterator())),r.appendChild(n);return r}(new b(this))},extractContents:function(){var e,t=this,i=t.cloneRange();return t.startContainer!=t.commonAncestorContainer&&t.setStartAfter(m(t.commonAncestorContainer,t.startContainer)),t.collapse(!0),e=T.documentFromRange(t),function i(n){for(var r,o=e.createDocumentFragment();r=n.next();)n.hasPartialSubtree()?(r=r.cloneNode(!1),r.appendChild(i(n.getSubtreeIterator()))):n.remove(t.originalRange),o.appendChild(r);return o}(new b(i))},insertNode:function(e){var t=this;f(t.startContainer)?(t.startOffset!=t.startContainer.nodeValue.length&&h.splitDataNode(t.startContainer,t.startOffset),h.insertAfter(e,t.startContainer)):h.insertAt(t.startContainer,e,t.startOffset),t.setStart(t.startContainer,t.startOffset)},cloneRange:function(){return e.extend(new _(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return("#text"==e?this.startContainer.nodeValue:e)+"("+this.startOffset+") : "+("#text"==t?this.endContainer.nodeValue:t)+"("+this.endOffset+")"}}),b=l.extend({init:function(t){if(e.extend(this,{range:t,_current:null,_next:null,_end:null}),!t.collapsed){var i=t.commonAncestorContainer;this._next=t.startContainer!=i||f(t.startContainer)?m(i,t.startContainer):t.startContainer.childNodes[t.startOffset],this._end=t.endContainer!=i||f(t.endContainer)?m(i,t.endContainer).nextSibling:t.endContainer.childNodes[t.endOffset]}},hasNext:function(){return!!this._next},next:function(){var e=this,t=e._current=e._next;return e._next=e._current&&e._current.nextSibling!=e._end?e._current.nextSibling:null,f(e._current)&&(e.range.endContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(e.range.endOffset,t.length-e.range.endOffset)),e.range.startContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(0,e.range.startOffset))),t},traverse:function(e){function t(){return n._current=n._next,n._next=n._current&&n._current.nextSibling!=n._end?n._current.nextSibling:null,n._current}for(var i,n=this;i=t();)n.hasPartialSubtree()?n.getSubtreeIterator().traverse(e):e(i);return i},remove:function(e){var t,i,n,r,o,s=this,a=s.range.startContainer==s._current,l=s.range.endContainer==s._current;f(s._current)&&(a||l)?(t=a?s.range.startOffset:0,i=l?s.range.endOffset:s._current.length,n=i-t,e&&(a||l)&&(s._current==e.startContainer&&e.startOffset>=t&&(e.startOffset-=n),s._current==e.endContainer&&e.endOffset>=i&&(e.endOffset-=n)),s._current.deleteData(t,n)):(r=s._current.parentNode,!e||s.range.startContainer!=r&&s.range.endContainer!=r||(o=p(s._current),r==e.startContainer&&e.startOffset>=o&&(e.startOffset-=1),r==e.endContainer&&e.endOffset>o&&(e.endOffset-=1)),h.remove(s._current))},hasPartialSubtree:function(){return!f(this._current)&&(h.isAncestorOrSelf(this._current,this.range.startContainer)||h.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var e=this,t=e.range.cloneRange();return t.selectNodeContents(e._current),h.isAncestorOrSelf(e._current,e.range.startContainer)&&t.setStart(e.range.startContainer,e.range.startOffset),h.isAncestorOrSelf(e._current,e.range.endContainer)&&t.setEnd(e.range.endContainer,e.range.endOffset),new b(t)}}),w=l.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();o(t,e,!1),o(t,e,!0),t.select()},removeAllRanges:function(){var e=this.ownerDocument.selection;"None"!=e.type&&e.empty()},getRangeAt:function(){var e,t,i,n,o,a,l,c,d=new _(this.ownerDocument),u=this.ownerDocument.selection;try{if(e=u.createRange(),t=e.item?e.item(0):e.parentElement(),t.ownerDocument!=this.ownerDocument)return d}catch(e){return d}if("Control"==u.type)d.selectNode(e.item(0));else if(i=r(e),s(e,d,i,!0),s(e,d,i,!1),9==d.startContainer.nodeType&&d.setStart(d.endContainer,d.startOffset),9==d.endContainer.nodeType&&d.setEnd(d.startContainer,d.endOffset),0===e.compareEndPoints("StartToEnd",e)&&d.collapse(!1),n=d.startContainer,o=d.endContainer,a=this.ownerDocument.body,!(d.collapsed||0!==d.startOffset||d.endOffset!=g(d.endContainer)||n==o&&f(n)&&n.parentNode==a)){for(l=!1,c=!1;0===p(n)&&n==n.parentNode.firstChild&&n!=a;)n=n.parentNode,l=!0;for(;p(o)==g(o.parentNode)-1&&o==o.parentNode.lastChild&&o!=a;)o=o.parentNode,c=!0;n==a&&o==a&&l&&c&&(d.setStart(n,0),d.setEnd(o,g(a)))}return d}}),k=l.extend({init:function(e){this.enumerate=function(){function t(e){if(h.is(e,"img")||3==e.nodeType&&(!h.isWhitespace(e)||"锘�"==e.nodeValue))i.push(e);else for(e=e.firstChild;e;)t(e),e=e.nextSibling}var i=[];return new b(e).traverse(t),i}}}),x=l.extend({init:function(e,t){var i=this;i.range=e,i.rootNode=T.documentFromRange(e),i.body=t||i.getEditable(e),"body"!=h.name(i.body)&&(i.rootNode=i.body),i.html=i.body.innerHTML,i.startContainer=i.nodeToPath(e.startContainer),i.endContainer=i.nodeToPath(e.endContainer),i.startOffset=i.offset(e.startContainer,e.startOffset),i.endOffset=i.offset(e.endContainer,e.endOffset)},index:function(e){for(var t,i=0,n=e.nodeType;e=e.previousSibling;)t=e.nodeType,(3!=t||n!=t)&&i++,n=t;return i},getEditable:function(e){for(var t=e.commonAncestorContainer;t&&(3==t.nodeType||t.attributes&&!t.attributes.contentEditable);)t=t.parentNode;return t},restoreHtml:function(){this.body.innerHTML=this.html},offset:function(e,t){if(3==e.nodeType)for(;(e=e.previousSibling)&&3==e.nodeType;)t+=e.nodeValue.length;return t},nodeToPath:function(e){for(var t=[];e!=this.rootNode;)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,i,n){for(var r=this.rootNode,o=i.length,s=n;o--;)r=r.childNodes[i[o]];for(;r&&3==r.nodeType&&s>r.nodeValue.length;)s-=r.nodeValue.length,r=r.nextSibling;r&&s>=0&&e[t?"setStart":"setEnd"](r,s)},toRange:function(){var e=this,t=e.range.cloneRange();return e.toRangePoint(t,!0,e.startContainer,e.startOffset),e.toRangePoint(t,!1,e.endContainer,e.endOffset),t}}),C=l.extend({init:function(){this.caret=null},addCaret:function(e){var t=this;return t.caret=h.create(T.documentFromRange(e),"span",{className:"k-marker"}),e.insertNode(t.caret),e.selectNode(t.caret),t.caret},removeCaret:function(e){var t,i,n,r,o=this,s=o.caret.previousSibling,a=0;s&&(a=f(s)?s.nodeValue.length:p(s)),t=o.caret.parentNode,i=s?p(s):0,h.remove(o.caret),v(t),n=t.childNodes[i],f(n)?e.setStart(n,a):n?(r=h.lastTextNode(n),r?e.setStart(r,r.nodeValue.length):e[s?"setStartAfter":"setStartBefore"](n)):(u.msie||t.innerHTML||(t.innerHTML='<br _moz_dirty="" />'),e.selectNodeContents(t)),e.collapse(!0)},add:function(e,t){var i,n,r=this,o=e.collapsed&&!T.isExpandable(e),s=T.documentFromRange(e);return t&&e.collapsed&&(r.addCaret(e),e=T.expand(e)),i=e.cloneRange(),i.collapse(!1),r.end=h.create(s,"span",{className:"k-marker"}),i.insertNode(r.end),i=e.cloneRange(),i.collapse(!0),r.start=r.end.cloneNode(!0),i.insertNode(r.start),r._removeDeadMarkers(r.start,r.end),o&&(n=s.createTextNode("锘�"),h.insertAfter(n.cloneNode(),r.start),h.insertBefore(n,r.end)),e.setStartBefore(r.start),e.setEndAfter(r.end),v(e.commonAncestorContainer),e},_removeDeadMarkers:function(e,t){e.previousSibling&&"锘�"==e.previousSibling.nodeValue&&h.remove(e.previousSibling),t.nextSibling&&"锘�"==t.nextSibling.nodeValue&&h.remove(t.nextSibling)},remove:function(e){var t,i,n,r,o,s,a,l,c,d,u,m,g,y=this,_=y.start,b=y.end;for(v(e.commonAncestorContainer);!_.nextSibling&&_.parentNode;)_=_.parentNode;for(;!b.previousSibling&&b.parentNode;)b=b.parentNode;if(t=_.previousSibling&&3==_.previousSibling.nodeType&&_.nextSibling&&3==_.nextSibling.nodeType,i=b.previousSibling&&3==b.previousSibling.nodeType&&b.nextSibling&&3==b.nextSibling.nodeType,n=t&&i,_=_.nextSibling,b=b.previousSibling,r=!1,o=!1,_==y.end&&(o=!!y.start.previousSibling,_=b=y.start.previousSibling||y.end.nextSibling,r=!0),h.remove(y.start),h.remove(y.end),!_||!b)return e.selectNodeContents(e.commonAncestorContainer),void e.collapse(!0);if(s=r?f(_)?_.nodeValue.length:_.childNodes.length:0,a=f(b)?b.nodeValue.length:b.childNodes.length,3==_.nodeType)for(;_.previousSibling&&3==_.previousSibling.nodeType;)_=_.previousSibling,s+=_.nodeValue.length;if(3==b.nodeType)for(;b.previousSibling&&3==b.previousSibling.nodeType;)b=b.previousSibling,a+=b.nodeValue.length;for(l=p(_),c=_.parentNode,d=p(b),u=b.parentNode,m=_;m.previousSibling;m=m.previousSibling)3==m.nodeType&&3==m.previousSibling.nodeType&&l--;for(g=b;g.previousSibling;g=g.previousSibling)3==g.nodeType&&3==g.previousSibling.nodeType&&d--;v(c),3==_.nodeType&&(_=c.childNodes[l]),v(u),3==b.nodeType&&(b=u.childNodes[d]),r?(3==_.nodeType?e.setStart(_,s):e[o?"setStartAfter":"setStartBefore"](_),e.collapse(!0)):(3==_.nodeType?e.setStart(_,s):e.setStartBefore(_),3==b.nodeType?e.setEnd(b,a):e.setEndAfter(b)),y.caret&&y.removeCaret(e)}}),S=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,T={nodes:function(e){var t=T.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),t=T.textNodes(e),t.length||(t=h.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return new k(e).enumerate()},documentFromRange:function(e){var t=e.startContainer;return 9==t.nodeType?t:t.ownerDocument},createRange:function(e){return u.msie&&9>u.version?new _(e):e.createRange()},selectRange:function(e){var t,i=T.image(e);i&&(e.setStartAfter(i),e.setEndAfter(i)),t=y.selectionFromRange(e),t.removeAllRanges(),t.addRange(e)},stringify:function(e){return a.format("{0}:{1} - {2}:{3}",h.name(e.startContainer),e.startOffset,h.name(e.endContainer),e.endOffset)},split:function(e,t,i){function n(n){var r,o=e.cloneRange();o.collapse(n),o[n?"setStartBefore":"setEndAfter"](t),r=o.extractContents(),i&&(r=h.trim(r)),h[n?"insertBefore":"insertAfter"](r,t)}n(!0),n(!1)},mapAll:function(t,i){var n=[];return new b(t).traverse(function(t){var r=i(t);r&&e.inArray(r,n)<0&&n.push(r)}),n},getAll:function(e,t){var i=t;return"string"==typeof t&&(t=function(e){return h.is(e,i)}),T.mapAll(e,function(e){return t(e)?e:void 0})},getMarkers:function(e){return T.getAll(e,function(e){return"k-marker"==e.className})},image:function(e){var t=T.getAll(e,"img");return 1==t.length?t[0]:void 0},wrapSelectedElements:function(e){function t(e,t){var i,n=h.getNodeLength(t);if(e==n)return!0;for(i=e;n>i;i++)if(!h.insignificant(t.childNodes[i]))return!1;return!0}for(var i=h.editableParent(e.startContainer),n=h.editableParent(e.endContainer);0===e.startOffset&&e.startContainer!=i;)e.setStart(e.startContainer.parentNode,h.findNodeIndex(e.startContainer));for(;t(e.endOffset,e.endContainer)&&e.endContainer!=n;)e.setEnd(e.endContainer.parentNode,h.findNodeIndex(e.endContainer)+1);return e},expand:function(e){var t,i,n,r,o=e.cloneRange(),s=o.startContainer.childNodes[0===o.startOffset?0:o.startOffset-1],a=o.endContainer.childNodes[o.endOffset];return f(s)&&f(a)?(t=s.nodeValue,i=a.nodeValue,t&&i?(n=t.split("").reverse().join("").search(S),r=i.search(S),n&&r?(r=-1==r?i.length:r,n=-1==n?0:t.length-n,o.setStart(s,n),o.setEnd(a,r),o):o):o):o},isExpandable:function(e){var t,i,n,r,o,s,a=e.startContainer,l=T.documentFromRange(e);return a!=l&&a!=l.body&&(t=e.cloneRange(),!!(i=a.nodeValue)&&(n=i.substring(0,t.startOffset),r=i.substring(t.startOffset),o=0,s=0,n&&(o=n.split("").reverse().join("").search(S)),r&&(s=r.search(S)),o&&s))}};c(d,{SelectionUtils:y,W3CRange:_,RangeIterator:b,W3CSelection:w,RangeEnumerator:k,RestorePoint:x,Marker:C,RangeUtils:T})}(window.kendo.jQuery),function(e){function t(e,t){var i=e.selectionRestorePoint=new d(e.getRange()),n=new f(t,i);return n.editor=e,e.undoRedoStack.push(n),i}var i=window.kendo,n=i.Class,r=i.ui.editor,o=r.EditorUtils,s=o.registerTool,a=r.Dom,l=r.Tool,c=r.ToolTemplate,d=r.RestorePoint,u=r.Marker,h=e.extend,p=n.extend({init:function(e){this.options=e,this.restorePoint=new d(e.range),this.marker=new u,this.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),this.editor.selectRange(e)},undo:function(){var e=this.restorePoint;e.restoreHtml(),this.editor.selectRange(e.toRange())},redo:function(){this.exec()},createDialog:function(t,n){var r=this.editor;return e(t).appendTo(document.body).kendoWindow(h({},r.options.dialogOptions,n)).closest(".k-window").toggleClass("k-rtl",i.support.isRtl(r.wrapper)).end()},exec:function(){var e=this.lockRange(!0);this.formatter.editor=this.editor,this.formatter.toggle(e),this.releaseRange(e)}}),f=n.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){this.body.innerHTML=this.endRestorePoint.html,this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,this.editor.selectRange(this.startRestorePoint.toRange())}}),m=p.extend({init:function(e){p.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e,t=this.editor,i=this.options,n=i.range,r=t.body,o=new d(n,r),s=i.html||i.value||"";t.selectRange(n),t.clipboard.paste(s,i),i.postProcess&&i.postProcess(t,t.getRange()),e=new f(o,new d(t.getRange(),r)),e.editor=t,t.undoRedoStack.push(e),t.focus()}}),g=l.extend({initialize:function(e,t){var i=t.editor,n=this.options,o=n.items?n.items:i.options.insertHtml;new r.SelectBox(e,{dataSource:o,dataTextField:"text",dataValueField:"value",change:function(){l.exec(i,"insertHtml",this.value())},title:i.options.messages.insertHtml,highlightFirst:!1})},command:function(e){return new m(e)},update:function(e){var t=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");t.close(),t.value(t.options.title)}}),v=n.extend({init:function(){this.stack=[],this.currentCommandIndex=-1},push:function(e){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(e)-1},undo:function(){this.canUndo()&&this.stack[this.currentCommandIndex--].undo()},redo:function(){this.canRedo()&&this.stack[++this.currentCommandIndex].redo()},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}}),y=n.extend({init:function(e){this.editor=e},keydown:function(i){var n,r=this,o=r.editor,s=o.keyboard,a=s.isTypingKey(i),l=h(e.Event(),i);return r.editor.trigger("keydown",l),l.isDefaultPrevented()?(i.preventDefault(),!0):!(l.isDefaultPrevented()||!a||s.isTypingInProgress())&&(n=o.getRange(),r.startRestorePoint=new d(n),s.startTyping(function(){r.endRestorePoint=t(o,r.startRestorePoint)}),!0)},keyup:function(e){var t=this.editor.keyboard;return this.editor.trigger("keyup",e),!!t.isTypingInProgress()&&(t.endTyping(),!0)}}),_=n.extend({init:function(e){this.editor=e},keydown:function(e){var n,r,o,s,l;if(e.keyCode===i.keys.BACKSPACE){if(n=this.editor,r=n.getRange(),o=i.support.browser.msie?"":'<br _moz_dirty="" />',r.collapsed)return;e.preventDefault(),s=new d(r),l=r.commonAncestorContainer,/t(able|body|r)/i.test(a.name(l))&&r.selectNode(a.closest(l,"table")),r.deleteContents(),l=r.commonAncestorContainer,"p"===a.name(l)&&""===l.innerHTML&&(l.innerHTML=o,r.setStart(l,0),r.collapse(!0),n.selectRange(r)),t(n,s)}},keyup:function(){}}),b=n.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=t(this.editor,this.startRestorePoint)},changed:function(){return!!this.startRestorePoint&&this.startRestorePoint.html!=this.editor.body.innerHTML},keydown:function(e){var t=this,i=t.editor,n=i.keyboard;return n.isModifierKey(e)?(n.isTypingInProgress()&&n.endTyping(!0),t.startRestorePoint=new d(i.getRange()),!0):!!n.isSystem(e)&&(t.systemCommandIsInProgress=!0,t.changed()&&(t.systemCommandIsInProgress=!1,t.createUndoCommand()),!0)},keyup:function(){var e=this;return!(!e.systemCommandIsInProgress||!e.changed())&&(e.systemCommandIsInProgress=!1,e.createUndoCommand(),!0)}}),w=n.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&90>=e||e>=96&&111>=e||e>=186&&192>=e||e>=219&&222>=e||229==e},toolFromShortcut:function(t,i){var n,r,o=String.fromCharCode(i.keyCode);for(n in t)if(r=e.extend({ctrl:!1,alt:!1,shift:!1},t[n].options),(r.key==o||r.key==i.keyCode)&&r.ctrl==i.ctrlKey&&r.alt==i.altKey&&r.shift==i.shiftKey)return n},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||32==t||13==t||8==t||46==t&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return 17==t&&!e.shiftKey&&!e.altKey||16==t&&!e.ctrlKey&&!e.altKey||18==t&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return 46==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress&&this.onEndTyping&&this.onEndTyping(),this.typingInProgress=!1},endTyping:function(t){var i=this;i.clearTimeout(),t?i.stopTyping():i.timeout=window.setTimeout(e.proxy(i.stopTyping,i),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var i,n=this.handlers;for(i=0;n.length>i&&!n[i][t](e);i++);},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}}),k=n.extend({init:function(e){this.editor=e,this.cleaners=[new C,new S,new T]},htmlToFragment:function(e){var t=this.editor,i=t.document,n=a.create(i,"div"),r=i.createDocumentFragment();for(n.innerHTML=e;n.firstChild;)r.appendChild(n.firstChild);return r},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},_startModification:function(){var e,t,i=this.editor;if(!this._inProgress)return this._inProgress=!0,e=i.getRange(),t=new d(e),a.persistScrollTop(i.document),{range:e,restorePoint:t}},_endModification:function(e){t(this.editor,e.restorePoint),this.editor._selectionChange(),this._inProgress=!1},_contentModification:function(e,t){var i=this,n=i.editor,r=i._startModification();r&&(e.call(i,n,r.range),setTimeout(function(){t.call(i,n,r.range),i._endModification(r)}))},oncut:function(){this._contentModification(e.noop,e.noop)},_fileToDataURL:function(t,i){var n=t.getAsFile(),r=new FileReader;r.onload=i||e.noop,r.readAsDataURL(n)},_triggerPaste:function(e,t){var i={html:e||""};i.html=i.html.replace(/\ufeff/g,""),this.editor.trigger("paste",i),this.paste(i.html,t||{})},_handleImagePaste:function(e){
var t,i,n,r;if("FileReader"in window&&(t=this,i=e.clipboardData||e.originalEvent.clipboardData,n=i&&(i.items||i.files),n&&n.length&&/^image\//i.test(n[0].type)&&(r=t._startModification())))return this._fileToDataURL(n[0],function(e){t._triggerPaste('<img src="'+e.target.result+'" />'),t._endModification(r)}),!0},onpaste:function(t){this._handleImagePaste(t)||this._contentModification(function(n,r){var o,s,l,c=a.create(n.document,"div",{className:"k-paste-container",innerHTML:"锘�"}),d=i.support.browser;n.body.appendChild(c),d.msie&&11>d.version?(t.preventDefault(),o=n.createRange(),o.selectNodeContents(c),n.selectRange(o),s=n.document.body.createTextRange(),s.moveToElementText(c),e(n.body).unbind("paste"),s.execCommand("Paste"),e(n.body).bind("paste",e.proxy(this.onpaste,this))):(l=n.createRange(),l.selectNodeContents(c),n.selectRange(l)),r.deleteContents()},function(t,i){var n,r="";t.selectRange(i),n=e(t.body).children(".k-paste-container"),n.each(function(){var e=this.lastChild;e&&a.is(e,"br")&&a.remove(e),r+=this.innerHTML}),n.remove(),this._triggerPaste(r,{clean:!0})})},splittableParent:function(e,t){var i,n;if(e)return a.closestEditableOfType(t,["p","ul","ol"])||t.parentNode;if(i=t.parentNode,n=t.ownerDocument.body,a.isInline(i))for(;i.parentNode!=n&&!a.isBlock(i.parentNode);)i=i.parentNode;return i},paste:function(t,i){var n,o,s,l,c,d,p,f,m,g,v,y=this.editor;for(i=h({clean:!1,split:!0},i),n=0,o=this.cleaners.length;o>n;n++)this.cleaners[n].applicable(t)&&(t=this.cleaners[n].clean(t));if(i.clean&&(t=t.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3"),t=t.replace(/<(a|span)[^>]*><\/\1>/gi,"")),t=t.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>"),s=this.isBlock(t),y.focus(),l=y.getRange(),l.deleteContents(),l.startContainer==y.document&&l.selectNodeContents(y.body),c=new u,d=c.addCaret(l),p=this.splittableParent(s,d),f=!1,m=p!=y.body&&!a.is(p,"td"),i.split&&m&&(s||a.isInline(p))&&(l.selectNode(d),r.RangeUtils.split(l,p,!0),f=!0),g=this.htmlToFragment(t),g.firstChild&&"k-paste-container"===g.firstChild.className){for(v=[],n=0,o=g.childNodes.length;o>n;n++)v.push(g.childNodes[n].innerHTML);g=this.htmlToFragment(v.join("<br />"))}if(e(g.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table"),l.insertNode(g),p=this.splittableParent(s,d),f){for(;d.parentNode!=p;)a.unwrap(d.parentNode);a.unwrap(d.parentNode)}a.normalize(l.commonAncestorContainer),d.style.display="inline",a.restoreScrollTop(y.document),a.scrollTo(d),c.removeCaret(l),y.selectRange(l)}}),x=n.extend({clean:function(e){var t,i,n=this,r=n.replacements;for(t=0,i=r.length;i>t;t+=2)e=e.replace(r[t],r[t+1]);return e}}),C=x.extend({init:function(){this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(e){return/<script[^>]*>/i.test(e)}}),S=x.extend({init:function(){this.replacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,"",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(e,t){return t?e:" "}]},applicable:function(e){return/class="?Mso|style="[^"]*mso-/i.test(e)||/urn:schemas-microsoft-com:office/.test(e)},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){return!t||t.indexOf("href")<0?"":e})},listType:function(e){var t;return/^(<span [^>]*texhtml[^>]*>)?<span [^>]*(Symbol|Wingdings)[^>]*>/i.test(e)&&(t=!0),e=e.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,"聽"),!t&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(e)||t&&/^.\u00a0+/.test(e)?"ul":/^\s*\w+[\.\)]\u00a0{2,}/.test(e)?"ol":void 0},_convertToLi:function(e){var t;return 1==e.childNodes.length?t=e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(a.remove(e.firstChild),3==e.firstChild.nodeType&&/^[ivx]+\.$/i.test(e.firstChild.nodeValue)&&a.remove(e.firstChild),/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)&&a.remove(e.firstChild),t=e.innerHTML),a.remove(e),a.create(document,"li",{innerHTML:t})},lists:function(t){var i,n,r,o,s,l,c,d,u,h=e(a.blockElements.join(","),t),p=-1,f={ul:{},ol:{}},m=t;for(r=0;h.length>r;r++)if(o=h[r],s=this.listType(o.innerHTML),n=a.name(o),"td"!=n)if(s&&"p"==n){if(l=parseFloat(o.style.marginLeft||0),c=f[s][l],(l>p||!c)&&(c=a.create(document,s),m==t?a.insertBefore(c,o):m.appendChild(c),f[s][l]=c),i!=s)for(d in f)for(u in f[d])e.contains(c,f[d][u])&&delete f[d][u];m=this._convertToLi(o),c.appendChild(m),p=l,i=s}else o.innerHTML?(f={ul:{},ol:{}},m=t,p=-1):a.remove(o)},removeAttributes:function(e){for(var t=e.attributes,i=t.length;i--;)"colspan"!=a.name(t[i])&&e.removeAttributeNode(t[i])},createColGroup:function(t){var n=t.cells,r=e(t).closest("table"),o=r.children("colgroup");2>n.length||(o.length&&(n=o.children(),o[0].parentNode.removeChild(o[0])),o=e(e.map(n,function(e){var t=e.width;return t&&0!==parseInt(t,10)?i.format('<col style="width:{0}px;"/>',t):"<col />"}).join("")),o.is("colgroup")||(o=e("<colgroup/>").append(o)),o.prependTo(r))},convertHeaders:function(t){var i,n=t.cells,r=e.map(n,function(t){var i=e(t).children("p").children("strong")[0];return i&&"strong"==a.name(i)?i:void 0});if(r.length==n.length){for(i=0;r.length>i;i++)a.unwrap(r[i]);for(e(t).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(t),i=0;n.length>i;i++)a.changeTag(n[i],"th")}},removeParagraphs:function(t){var i,n,r,o,s;for(i=0;t.length>i;i++)for(this.removeAttributes(t[i]),o=e(t[i]),s=o.children("p"),n=0,r=s.length;r>n;n++)r-1>n&&a.insertAfter(a.create(document,"br"),s[n]),a.unwrap(s[n])},removeDefaultColors:function(e){for(var t=0;e.length>t;t++)/^\s*color: \s*[^;]*; ?$/i.test(e[t].style.cssText)&&a.unwrap(e[t])},tables:function(t){var i,n,r,o,s,a=e(t).find("table"),l=this;for(o=0;a.length>o;o++){for(i=a[o].rows,r=n=i[0],s=1;i.length>s;s++)i[s].cells.length>r.cells.length&&(r=i[s]);l.createColGroup(r),l.convertHeaders(n),l.removeAttributes(a[o]),l.removeParagraphs(a.eq(o).find("td,th")),l.removeDefaultColors(a.eq(o).find("span"))}},headers:function(t){var i,n=e(t).find("p.MsoTitle");for(i=0;n.length>i;i++)a.changeTag(n[i],"h1")},clean:function(e){var t,i=this;return e=x.fn.clean.call(i,e),e=i.stripEmptyAnchors(e),t=a.create(document,"div",{innerHTML:e}),i.headers(t),i.lists(t),i.tables(t),e=t.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")}}),T=x.extend({init:function(){this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(e){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e)}});h(r,{Command:p,GenericCommand:f,InsertHtmlCommand:m,InsertHtmlTool:g,UndoRedoStack:v,TypingHandler:y,SystemHandler:b,BackspaceHandler:_,Keyboard:w,Clipboard:k,Cleaner:x,MSWordFormatCleaner:S,WebkitFormatCleaner:T}),s("insertHtml",new g({template:new c({template:o.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.Class,n=t.ui.editor,r=t.ui.Editor.fn.options.formats,o=n.EditorUtils,s=n.Tool,a=n.ToolTemplate,l=n.FormatTool,c=n.Dom,d=n.RangeUtils,u=e.extend,h=n.EditorUtils.registerTool,p=n.EditorUtils.registerFormat,f="k-marker",m=i.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t,i=0,n=0,r=0,o=e.parentNode;for(t=o.firstChild;t;t=t.nextSibling)t!=e&&(t.className==f?r++:3==t.nodeType?i++:n++);return r>1&&o.firstChild.className==f&&o.lastChild.className==f?0:n+i},findSuitable:function(e,t){return!t&&this.numberOfSiblings(e)>0?null:c.parentOfType(e,this.format[0].tags)},findFormat:function(e){var t,i,n,r,o,s=this.format,a=c.attrEquals;for(t=0,i=s.length;i>t;t++){if(n=e,r=s[t].tags,o=s[t].attr,n&&c.ofType(n,r)&&a(n,o))return n;for(;n;)if(n=c.parentOfType(n,r),n&&a(n,o))return n}return null},isFormatted:function(e){var t,i;for(t=0,i=e.length;i>t;t++)if(this.findFormat(e[t]))return!0;return!1}}),g=i.extend({init:function(e,t){this.finder=new m(e),this.attributes=u({},e[0].attr,t),this.tag=e[0].tags[0]},wrap:function(e){return c.wrap(e,c.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){this.finder.isFormatted(t)?(this.split(e),this.remove(t)):this.apply(t)},toggle:function(e){var t=d.textNodes(e);t.length>0&&this.activate(e,t)},apply:function(e){var t,i,n,r,o=[];for(t=0,i=e.length;i>t;t++)n=e[t],r=this.finder.findSuitable(n),r?c.attr(r,this.attributes):r=this.wrap(n),o.push(r);this.consolidate(o)},remove:function(e){var t,i,n;for(t=0,i=e.length;i>t;t++)n=this.finder.findFormat(e[t]),n&&(this.attributes&&this.attributes.style?(c.unstyle(n,this.attributes.style),n.style.cssText||n.attributes.class||c.unwrap(n)):c.unwrap(n))},split:function(e){var t,i,n=d.textNodes(e),r=n.length;if(r>0)for(t=0;r>t;t++)i=this.finder.findFormat(n[t]),i&&d.split(e,i,!0)},consolidate:function(e){for(var t,i;e.length>1;)if(t=e.pop(),i=e[e.length-1],t.previousSibling&&t.previousSibling.className==f&&i.appendChild(t.previousSibling),t.tagName==i.tagName&&t.previousSibling==i&&t.style.cssText==i.style.cssText){for(;t.firstChild;)i.appendChild(t.firstChild);c.remove(t)}}}),v=m.extend({init:function(e,t){this.format=e,this.greedyProperty=t,m.fn.init.call(this,e)},getInlineCssValue:function(t){var i,n,r,o,s,a,l,d,u,h,p,f,m=t.attributes,g=e.trim;if(m)for(i=0,n=m.length;n>i;i++)if(r=m[i],o=r.nodeName,s=r.nodeValue,r.specified&&"style"==o)for(a=g(s||t.style.cssText).split(";"),d=0,u=a.length;u>d;d++)if(l=a[d],l.length){if(h=l.split(":"),p=g(h[0].toLowerCase()),f=g(h[1]),p!=this.greedyProperty)continue;return p.indexOf("color")>=0?c.toHex(f):f}},getFormatInner:function(t){var i,n,r,o=e(c.isDataNode(t)?t.parentNode:t),s=o.parentsUntil("[contentEditable]").addBack().toArray().reverse();for(i=0,n=s.length;n>i;i++)if(r="className"==this.greedyProperty?s[i].className:this.getInlineCssValue(s[i]))return r;return"inherit"},getFormat:function(e){var t,i,n=this.getFormatInner(e[0]);for(t=1,i=e.length;i>t;t++)if(n!=this.getFormatInner(e[t]))return"";return n},isFormatted:function(e){return""!==this.getFormat(e)}}),y=g.extend({init:function(e,i,n){g.fn.init.call(this,e,i),this.values=i,this.finder=new v(e,n),n&&(this.greedyProperty=t.toCamelCase(n))},activate:function(e,t){var i=this.greedyProperty,n="apply";this.split(e),i&&"inherit"==this.values.style[i]&&(n="remove"),this[n](t)}}),_=l.extend({init:function(e){l.fn.init.call(this,u(e,{finder:new m(e.format),formatter:function(){return new g(e.format)}}))}}),b=s.extend({update:function(e,t){var i=e.data(this.type);i.close(),i.value(this.finder.getFormat(t))}}),w=b.extend({init:function(e){s.fn.init.call(this,e),this.type=t.support.browser.msie||t.support.touch?"kendoDropDownList":"kendoComboBox",this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},command:function(e){var t=this.options,i=this.format,r={};return new n.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new y(i,{style:r},t.cssAttr)}}))},initialize:function(e,t){var i,n=t.editor,r=this.options,o=r.name,a=[];r.defaultValue&&(a=[{text:n.options.messages[r.defaultValue[0].text],value:r.defaultValue[0].value}]),i=a.concat(r.items?r.items:n.options[o]||[]),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:i,change:function(){s.exec(n,o,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+o).find("*").addBack().attr("unselectable","on"),e.data(this.type).value("inherit")}}),k=s.extend({init:function(e){s.fn.init.call(this,e),this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(e){var t=this.options,i=this.format,r={};return new n.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new y(i,{style:r},t.cssAttr)}}))},initialize:function(i,n){var r=n.editor,o=this.name,a=u({},k.fn.options,this.options),l=a.palette;i=this._widget=new t.ui.ColorPicker(i,{value:e.isArray(l)?l[0]:"#000",toolIcon:"k-"+a.name,palette:l,change:function(){var e=i.value();e&&s.exec(r,o,e),r.focus()},activate:function(e){e.preventDefault(),i.trigger("change")}}),i.wrapper.attr({title:n.title,unselectable:"on"}).find("*").attr("unselectable","on")}});u(n,{InlineFormatFinder:m,InlineFormatter:g,DelayedExecutionTool:b,GreedyInlineFormatFinder:v,GreedyInlineFormatter:y,InlineFormatTool:_,FontTool:w,ColorTool:k}),p("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),h("bold",new _({key:"B",ctrl:!0,format:r.bold,template:new a({template:o.buttonTemplate,title:"Bold"})})),p("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),h("italic",new _({key:"I",ctrl:!0,format:r.italic,template:new a({template:o.buttonTemplate,title:"Italic"})})),p("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]),h("underline",new _({key:"U",ctrl:!0,format:r.underline,template:new a({template:o.buttonTemplate,title:"Underline"})})),p("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),h("strikethrough",new _({format:r.strikethrough,template:new a({template:o.buttonTemplate,title:"Strikethrough"})})),p("superscript",[{tags:["sup"]}]),h("superscript",new _({format:r.superscript,template:new a({template:o.buttonTemplate,title:"Superscript"})})),p("subscript",[{tags:["sub"]}]),h("subscript",new _({format:r.subscript,template:new a({template:o.buttonTemplate,title:"Subscript"})})),h("foreColor",new k({cssAttr:"color",domAttr:"color",name:"foreColor",template:new a({template:o.colorPickerTemplate,title:"Color"})})),h("backColor",new k({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new a({template:o.colorPickerTemplate,title:"Background Color"})})),h("fontName",new w({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new a({template:o.comboBoxTemplate,title:"Font Name"})})),h("fontSize",new w({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new a({template:o.comboBoxTemplate,title:"Font Size"})}))}(window.kendo.jQuery),function(e){var t,i=window.kendo,n=i.Class,r=e.extend,o=i.ui.editor,s=i.ui.Editor.fn.options.formats,a=o.Dom,l=o.Command,c=o.ToolTemplate,d=o.FormatTool,u=o.EditorUtils,h=u.registerTool,p=u.registerFormat,f=o.RangeUtils,m=n.extend({init:function(e){this.format=e},contains:function(e,t){var i,n,r;for(i=0,n=t.length;n>i;i++)if(r=t[i],!r||!a.isAncestorOrSelf(e,r))return!1;return!0},findSuitable:function(t){var i,n,r,o,s=this.format,l=[];for(i=0,n=t.length;n>i;i++){for(o=s.length-1;o>=0&&!(r=a.ofType(t[i],s[o].tags)?t[i]:a.parentOfType(t[i],s[o].tags));o--);if(!r||"true"===r.contentEditable)return[];e.inArray(r,l)<0&&l.push(r)}for(i=0,n=l.length;n>i;i++)if(this.contains(l[i],l))return[l[i]];return l},findFormat:function(e){var t,i,n,r,o,s=this.format,l=a.editableParent(e);for(t=0,i=s.length;i>t;t++)for(n=e,r=s[t].tags,o=s[t].attr;n&&a.isAncestorOf(l,n);){if(a.ofType(n,r)&&a.attrEquals(n,o))return n;n=n.parentNode}return null},getFormat:function(e){var t,i,n=this,r=function(e){return n.findFormat(a.isDataNode(e)?e.parentNode:e)},o=r(e[0]);if(!o)return"";for(t=1,i=e.length;i>t;t++)if(o!=r(e[t]))return"";return o.nodeName.toLowerCase()},isFormatted:function(e){for(var t=0,i=e.length;i>t;t++)if(!this.findFormat(e[t]))return!1;return!0}}),g=n.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new m(e)},wrap:function(e,t,i){var n,r,o,s,l,c=1==i.length?a.blockParentOrBody(i[0]):a.commonAncestor.apply(null,i);for(a.isInline(c)&&(c=a.blockParentOrBody(c)),n=a.significantChildNodes(c),r=a.findNodeIndex(n[0]),o=a.create(c.ownerDocument,e,t),s=0;n.length>s;s++)l=n[s],a.isBlock(l)?(a.attr(l,t),o.childNodes.length&&(a.insertBefore(o,l),o=o.cloneNode(!1)),r=a.findNodeIndex(l)+1):o.appendChild(l);o.firstChild&&a.insertAt(c,o,r)},apply:function(t){function i(e){return r({},e&&e.attr,d)}var n,o,s,l,c,d=this.values,h=a.filter("img",t),p=u.formatByName("img",this.format),f=i(p);if(e.each(h,function(){a.attr(this,f)}),h.length!=t.length)if(o=a.filter("img",t,!0),s=this.finder.findSuitable(o),s.length)for(l=0,c=s.length;c>l;l++)n=u.formatByName(a.name(s[l]),this.format),a.attr(s[l],i(n));else n=this.format[0],this.wrap(n.tags[0],i(n),o)},remove:function(e){var t,i,n,r,o;for(t=0,i=e.length;i>t;t++)n=this.finder.findFormat(e[t]),n&&(o=a.name(n),"div"!=o||n.getAttribute("class")?(r=u.formatByName(o,this.format),r.attr.style&&a.unstyle(n,r.attr.style),r.attr.className&&a.removeClass(n,r.attr.className)):a.unwrap(n))},toggle:function(e){var t=this,i=f.nodes(e);t.finder.isFormatted(i)?t.remove(i):t.apply(i)}}),v=n.extend({init:function(e,t){var i=this;i.format=e,i.values=t,i.finder=new m(e)},apply:function(e){var t,i,n,r,s,l,c,d=this.format,u=a.blockParents(e),h=d[0].tags[0];if(u.length)for(t=0,i=u.length;i>t;t++)c=a.name(u[t]),"li"==c?(n=u[t].parentNode,r=new o.ListFormatter(n.nodeName.toLowerCase(),h),s=this.editor.createRange(),s.selectNode(u[t]),r.toggle(s)):h&&("td"==c||u[t].attributes.contentEditable)?new g(d,this.values).apply(u[t].childNodes):(l=a.changeTag(u[t],h),a.attr(l,d[0].attr));else new g(d,this.values).apply(e)},toggle:function(e){var t=f.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),t=f.textNodes(e),t.length||(t=a.significantChildNodes(e.commonAncestorContainer))),this.apply(t)}}),y=l.extend({init:function(e){e.formatter=e.formatter(),l.fn.init.call(this,e)}}),_=d.extend({init:function(e){d.fn.init.call(this,r(e,{finder:new m(e.format),formatter:function(){return new g(e.format)}}))}});r(o,{BlockFormatFinder:m,BlockFormatter:g,GreedyBlockFormatter:v,FormatCommand:y,BlockFormatTool:_}),t=["ul","ol","li"],p("justifyLeft",[{tags:a.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{float:"left",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"left",listStylePosition:""}}}]),h("justifyLeft",new _({format:s.justifyLeft,template:new c({template:u.buttonTemplate,title:"Justify Left"})})),p("justifyCenter",[{tags:a.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:t,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]),h("justifyCenter",new _({format:s.justifyCenter,template:new c({template:u.buttonTemplate,title:"Justify Center"})})),p("justifyRight",[{tags:a.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{float:"right",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]),h("justifyRight",new _({format:s.justifyRight,template:new c({template:u.buttonTemplate,title:"Justify Right"})})),p("justifyFull",[{tags:a.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:t,attr:{style:{textAlign:"justify",listStylePosition:""}}}]),h("justifyFull",new _({format:s.justifyFull,template:new c({template:u.buttonTemplate,title:"Justify Full"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,i=e.extend,n=t.ui.editor,r=n.Dom,o=n.Command,s=n.Tool,a=n.BlockFormatter,l=r.normalize,c=n.RangeUtils,d=n.EditorUtils.registerTool,u=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},_insertMarker:function(e,t){var i,n=r.create(e,"a");return n.className="k-marker",t.insertNode(n),n.parentNode||(i=t.commonAncestorContainer,i.innerHTML="",i.appendChild(n)),l(n.parentNode),n},_moveFocus:function(e,t){if(r.is(t,"img"))e.setStartBefore(t);else{e.selectNodeContents(t);var i=c.textNodes(e)[0];if(i)r.is(i,"img")?e.setStartBefore(i):e.selectNodeContents(i);else{for(;t.childNodes.length&&!r.is(t.firstChild,"br");)t=t.firstChild;e.selectNodeContents(t)}}},shouldTrim:function(e){var t="p,h1,h2,h3,h4,h5,h6".split(","),i=r.parentOfType(e.startContainer,t),n=r.parentOfType(e.endContainer,t);return i&&!n||!i&&n},_blankAfter:function(e){for(;e&&(r.isMarker(e)||""===r.stripBom(e.nodeValue));)e=e.nextSibling;return!e},exec:function(){var e,t,i,o,s,d,u,h,p=this.getRange(),f=c.documentFromRange(p),m=n.emptyElementContent,g=this.shouldTrim(p);p.deleteContents(),s=this._insertMarker(f,p),d=r.closestEditableOfType(s,["li"]),u=r.closestEditableOfType(s,"h1,h2,h3,h4,h5,h6".split(",")),d?r.emptyNode(d)&&(o=r.create(f,"p"),d.nextSibling&&(h=p.cloneRange(),h.selectNode(d),c.split(h,d.parentNode)),r.insertAfter(o,d.parentNode),r.remove(1==d.parentNode.childNodes.length?d.parentNode:d),o.innerHTML=m,i=o):u&&this._blankAfter(s)&&(o=r.create(f,"p"),r.insertAfter(o,u),o.innerHTML=m,r.remove(s),i=o),i||(d||u||new a([{tags:["p"]}]).apply([s]),p.selectNode(s),e=r.parentOfType(s,[d?"li":u?r.name(u):"p"]),c.split(p,e,g),t=e.previousSibling,r.is(t,"li")&&t.firstChild&&!r.is(t.firstChild,"br")&&(t=t.firstChild),i=e.nextSibling,r.is(i,"li")&&i.firstChild&&!r.is(i.firstChild,"br")&&(i=i.firstChild),r.remove(e),this.clean(t),this.clean(i,{links:!0}),l(t)),l(i),this._moveFocus(p,i),p.collapse(!0),r.scrollTo(i),c.selectRange(p)},clean:function(e,t){var i=e;if(e.firstChild&&r.is(e.firstChild,"br")&&r.remove(e.firstChild),r.isDataNode(e)&&!e.nodeValue&&(e=e.parentNode),e){for(;e.firstChild&&1==e.firstChild.nodeType;)e=e.firstChild;if(!r.isEmpty(e)&&/^\s*$/.test(e.innerHTML)&&(e.innerHTML=n.emptyElementContent),t&&t.links)for(;e!=i;){if(r.is(e,"a")&&r.emptyNode(e)){r.unwrap(e);break}e=e.parentNode}}}}),h=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},exec:function(){var e,i=this.getRange(),n=r.create(c.documentFromRange(i),"br"),o=t.support.browser,s=o.msie&&11>o.version;i.deleteContents(),i.insertNode(n),l(n.parentNode),s||n.nextSibling&&!r.isWhitespace(n.nextSibling)||(e=n.cloneNode(!0),e.className="k-br",r.insertAfter(e,n)),i.setStartAfter(n),i.collapse(!0),r.scrollTo(n.nextSibling||n),c.selectRange(i)}});i(n,{ParagraphCommand:u,NewLineCommand:h}),d("insertLineBreak",new s({key:13,shift:!0,command:h})),d("insertParagraph",new s({key:13,command:u}))}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.Class,n=e.extend,r=t.ui.editor,o=r.Dom,s=r.RangeUtils,a=r.EditorUtils,l=r.Command,c=r.ToolTemplate,d=r.FormatTool,u=r.BlockFormatFinder,h=s.textNodes,p=r.EditorUtils.registerTool,f=u.extend({init:function(e){this.tag=e;var t=this.tags=["ul"==e?"ol":"ul",e];u.fn.init.call(this,[{tags:t}])},isFormatted:function(e){var t,i,n=[];for(i=0;e.length>i;i++)(t=this.findFormat(e[i]))&&o.name(t)==this.tag&&n.push(t);if(1>n.length)return!1;if(n.length!=e.length)return!1;for(i=0;n.length>i&&n[i].parentNode==t.parentNode;i++)if(n[i]!=t)return!1;return!0},findSuitable:function(e){var t=o.parentOfType(e[0],this.tags);return t&&o.name(t)==this.tag?t:null}}),m=i.extend({init:function(e,t){var i=this;i.finder=new f(e),i.tag=e,i.unwrapTag=t},isList:function(e){var t=o.name(e);return"ul"==t||"ol"==t||"dl"==t},wrap:function(e,t){var i,n,r=o.create(e.ownerDocument,"li");for(i=0;t.length>i;i++)if(n=t[i],o.is(n,"li"))e.appendChild(n);else if(this.isList(n))for(;n.firstChild;)e.appendChild(n.firstChild);else if(o.is(n,"td")){for(;n.firstChild;)r.appendChild(n.firstChild);e.appendChild(r),n.appendChild(e),e=e.cloneNode(!1),r=r.cloneNode(!1)}else r.appendChild(n),o.isBlock(n)&&(e.appendChild(r),o.unwrap(n),r=r.cloneNode(!1));r.firstChild&&e.appendChild(r)},containsAny:function(e,t){for(var i=0;t.length>i;i++)if(o.isAncestorOrSelf(e,t[i]))return!0;return!1},suitable:function(e,t){if("k-marker"==e.className){var i=e.nextSibling;if(i&&o.isBlock(i))return!1;if(i=e.previousSibling,i&&o.isBlock(i))return!1}return this.containsAny(e,t)||o.isInline(e)||3==e.nodeType},split:function(t){var i,n,r,a,l,c,d=h(t);if(d.length)for(i=o.parentOfType(d[0],["li"]),n=o.parentOfType(d[d.length-1],["li"]),t.setStartBefore(i),t.setEndAfter(n),r=0,a=d.length;a>r;r++)l=this.finder.findFormat(d[r]),l&&(c=e(l).parents("ul,ol"),c[0]?s.split(t,c.last()[0],!0):s.split(t,l,!0))},merge:function(e,t){for(var i,n=t.previousSibling;n&&("k-marker"==n.className||3==n.nodeType&&o.isWhitespace(n));)n=n.previousSibling;if(n&&o.name(n)==e){for(;t.firstChild;)n.appendChild(t.firstChild);o.remove(t),t=n}for(i=t.nextSibling;i&&("k-marker"==i.className||3==i.nodeType&&o.isWhitespace(i));)i=i.nextSibling;if(i&&o.name(i)==e){for(;t.lastChild;)i.insertBefore(t.lastChild,i.firstChild);o.remove(t)}},breakable:function(e){return e!=e.ownerDocument.body&&!/table|tbody|tr|td/.test(o.name(e))&&!e.attributes.contentEditable},applyOnSection:function(t,i){function n(){u.push(this)}var r,s,a,l,c=this.tag,d=o.closestSplittableParent(i),u=[],h=this.finder.findSuitable(i);for(h||(h=new f("ul"==c?"ol":"ul").findSuitable(i)),/table|tbody/.test(o.name(d))?r=e.map(i,function(e){return o.parentOfType(e,["td"])}):(r=o.significantChildNodes(d),e.grep(r,o.isBlock).length&&(r=e.grep(r,e.proxy(function(e){return this.containsAny(e,i)},this))),r.length||(r=i)),s=0;r.length>s;s++)a=r[s],l=(!h||!o.isAncestorOrSelf(h,a))&&this.suitable(a,i),l&&(h&&this.isList(a)?(e.each(a.childNodes,n),o.remove(a)):u.push(a));u.length==r.length&&this.breakable(d)&&(u=[d]),h||(h=o.create(d.ownerDocument,c),o.insertBefore(h,u[0])),this.wrap(h,u),o.is(h,c)||o.changeTag(h,c),this.merge(c,h)},apply:function(e){var t,i,n,r=0,s=[];do n=o.closestEditable(e[r],["td","body"]),t&&n==t?i.push(e[r]):(t&&s.push({section:t,nodes:i}),i=[e[r]],t=n),r++;while(e.length>r);for(s.push({section:t,nodes:i}),r=0;s.length>r;r++)this.applyOnSection(s[r].section,s[r].nodes)},unwrap:function(t){var i,n,r,s,a=t.ownerDocument.createDocumentFragment(),l=this.unwrapTag;for(n=t.firstChild;n;n=n.nextSibling){for(r=o.create(t.ownerDocument,l||"p");n.firstChild;)s=n.firstChild,o.isBlock(s)?(r.firstChild&&(a.appendChild(r),r=o.create(t.ownerDocument,l||"p")),a.appendChild(s)):r.appendChild(s);r.firstChild&&a.appendChild(r)}i=e(t).parents("ul,ol"),i[0]?(o.insertAfter(a,i.last()[0]),i.last().remove()):o.insertAfter(a,t),o.remove(t)},remove:function(e){var t,i,n;for(i=0,n=e.length;n>i;i++)t=this.finder.findFormat(e[i]),t&&this.unwrap(t)},toggle:function(e){var t,i=this,n=h(e),r=e.commonAncestorContainer;n.length||(e.selectNodeContents(r),n=h(e),n.length||(t=r.ownerDocument.createTextNode(""),e.startContainer.appendChild(t),n=[t],e.selectNode(t.parentNode))),i.finder.isFormatted(n)?(i.split(e),i.remove(n)):i.apply(n)}}),g=l.extend({init:function(e){e.formatter=new m(e.tag),l.fn.init.call(this,e)}}),v=d.extend({init:function(e){this.options=e,d.fn.init.call(this,n(e,{finder:new f(e.tag)}))},command:function(e){return new g(n(e,{tag:this.options.tag}))}});n(r,{ListFormatFinder:f,ListFormatter:m,ListCommand:g,ListTool:v}),p("insertUnorderedList",new v({tag:"ul",template:new c({template:a.buttonTemplate,title:"Insert unordered list"})})),p("insertOrderedList",new v({tag:"ol",template:new c({template:a.buttonTemplate,title:"Insert ordered list"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.Class,n=e.extend,r=e.proxy,o=t.ui.editor,s=o.Dom,a=o.RangeUtils,l=o.EditorUtils,c=o.Command,d=o.Tool,u=o.ToolTemplate,h=o.InlineFormatter,p=o.InlineFormatFinder,f=a.textNodes,m=o.EditorUtils.registerTool,g=i.extend({findSuitable:function(e){return s.parentOfType(e,["a"])}}),v=i.extend({init:function(){this.finder=new g},apply:function(e,t){var i,n,r,o,l,c=f(e);t.innerHTML?(i=a.getMarkers(e),n=a.documentFromRange(e),e.deleteContents(),o=s.create(n,"a",t),e.insertNode(o),l=o.parentNode,"a"==s.name(l)&&s.insertAfter(o,l),s.emptyNode(l)&&s.remove(l),i.length>1&&(s.insertAfter(i[i.length-1],o),s.insertAfter(i[1],o),s[c.length>0?"insertBefore":"insertAfter"](i[0],o))):(r=new h([{tags:["a"]}],t),r.finder=this.finder,r.apply(c))}}),y=c.extend({init:function(e){e.formatter={toggle:function(e){new h([{tags:["a"]}]).remove(f(e))}},this.options=e,c.fn.init.call(this,e)}}),_=c.extend({init:function(e){var t=this;t.options=e,c.fn.init.call(t,e),t.formatter=new v,e.url?this.exec=function(){this.formatter.apply(e.range,{href:e.url,innerHTML:e.text||e.url,target:e.target})}:(t.attributes=null,t.async=!0)},_dialogTemplate:function(){return t.template("<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button></div></div>")({messages:this.editor.options.messages})},exec:function(){var t,i,n,o,a=this.getRange().collapsed,l=this.editor.options.messages;this._initialText="",this._range=this.lockRange(!0),t=f(this._range),i=t.length?this.formatter.finder.findSuitable(t[0]):null,n=t.length&&"img"==s.name(t[0]),o=this.createDialog(this._dialogTemplate(),{title:l.createLink,close:r(this._close,this),visible:!1}),o.find(".k-dialog-insert").click(r(this._apply,this)).end().find(".k-dialog-close").click(r(this._close,this)).end().find(".k-edit-field input").keydown(r(this._keydown,this)).end().find("#k-editor-link-url").val(this.linkUrl(i)).end().find("#k-editor-link-text").val(this.linkText(t)).end().find("#k-editor-link-title").val(i?i.title:"").end().find("#k-editor-link-target").attr("checked",!!i&&"_blank"==i.target).end().find(".k-editor-link-text-row").toggle(!n),t.length>0&&!a&&(this._initialText=e("#k-editor-link-text",o).val()),this._dialog=o.data("kendoWindow").center().open(),e("#k-editor-link-url",o).focus().select()},_keydown:function(e){var i=t.keys;e.keyCode==i.ENTER?this._apply(e):e.keyCode==i.ESC&&this._close(e)},_apply:function(t){var i,n,r,o=this._dialog.element,a=e("#k-editor-link-url",o).val(),l=e("#k-editor-link-text",o);a&&"http://"!=a&&(a.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(a)&&(a="mailto:"+a),this.attributes={href:a},i=e("#k-editor-link-title",o).val(),i&&(this.attributes.title=i),l.is(":visible")&&(n=l.val(),n||this._initialText?n&&n!==this._initialText&&(this.attributes.innerHTML=s.stripBom(n)):this.attributes.innerHTML=a),r=e("#k-editor-link-target",o).is(":checked"),this.attributes.target=r?"_blank":null,this.formatter.apply(this._range,this.attributes)),this._close(t),this.change&&this.change()},_close:function(e){e.preventDefault(),this._dialog.destroy(),s.windowFromDocument(a.documentFromRange(this._range)).focus(),this.releaseRange(this._range)},linkUrl:function(e){return e?e.getAttribute("href",2):"http://"},linkText:function(e){var t="";return 1==e.length?t=e[0].nodeValue:e.length&&(t=e[0].nodeValue+e[1].nodeValue),s.stripBom(t||"")},redo:function(){
var e=this.lockRange(!0);this.formatter.apply(e,this.attributes),this.releaseRange(e)}}),b=d.extend({init:function(t){this.options=t,this.finder=new p([{tags:["a"]}]),d.fn.init.call(this,e.extend(t,{command:y}))},initialize:function(e,t){d.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}});n(t.ui.editor,{LinkFormatFinder:g,LinkFormatter:v,UnlinkCommand:y,LinkCommand:_,UnlinkTool:b}),m("createLink",new d({key:"K",ctrl:!0,command:_,template:new u({template:l.buttonTemplate,title:"Create Link"})})),m("unlink",new b({key:"K",ctrl:!0,shift:!0,template:new u({template:l.buttonTemplate,title:"Remove Link"})}))}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=e.extend,r=i.ui.editor,o=r.EditorUtils,s=r.Dom,a=o.registerTool,l=r.ToolTemplate,c=r.RangeUtils,d=r.Command,u=r.LinkFormatter,h=c.textNodes,p=i.keys,f="#k-editor-file-url",m="#k-editor-file-title",g=d.extend({init:function(e){var t=this;d.fn.init.call(t,e),t.formatter=new u,t.async=!0,t.attributes={}},insertFile:function(e,t){var i=this.attributes,n=c.documentFromRange(t);if(i.href&&"http://"!=i.href){if(!e)return e=s.create(n,"a",{href:i.href}),e.innerHTML=i.innerHTML,t.deleteContents(),t.insertNode(e),e.nextSibling||s.insertAfter(n.createTextNode("锘�"),e),t.setStartAfter(e),t.setEndAfter(e),c.selectRange(t),!0;s.attr(e,i)}return!1},_dialogTemplate:function(e){return i.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-url"></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();this.formatter.apply(t,this.attributes),e.releaseRange(t)},exec:function(){function e(e){var t=a.element,i=t.find(f).val().replace(/ /g,"%20"),n=t.find(m).val();l.attributes={href:i,innerHTML:""!==n?n:i},g=l.insertFile(v,d),r(e),l.change&&l.change()}function r(e){e.preventDefault(),a.destroy(),s.windowFromDocument(c.documentFromRange(d)).focus(),g||l.releaseRange(d)}function o(t){t.keyCode==p.ENTER?e(t):t.keyCode==p.ESC&&r(t)}var a,l=this,d=l.lockRange(),u=h(d),g=!1,v=u.length?this.formatter.finder.findSuitable(u[0]):null,y=l.editor.options,_=y.messages,b=y.fileBrowser,w=!!(i.ui.FileBrowser&&b&&b.transport&&b.transport.read!==t),k={title:_.insertFile,visible:!1,resizable:w};k.close=r,w&&(k.width=750),a=this.createDialog(l._dialogTemplate(w),k).toggleClass("k-filebrowser-dialog",w).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(r).end().find(".k-edit-field input").keydown(o).end().find(f).val(v?v.getAttribute("href",2):"http://").end().find(m).val(v?v.title:"").end().data("kendoWindow"),w&&new i.ui.FileBrowser(a.element.find(".k-filebrowser"),n({},b,{change:function(){a.element.find(f).val(this.value())},apply:e})),a.center().open(),a.element.find(f).focus().select()}});i.ui.editor.FileCommand=g,a("insertFile",new r.Tool({command:g,template:new l({template:o.buttonTemplate,title:"Insert File"})}))}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=e.extend,r=i.ui.editor,o=r.EditorUtils,s=r.Dom,a=o.registerTool,l=r.ToolTemplate,c=r.RangeUtils,d=r.Command,u=i.keys,h="#k-editor-image-url",p="#k-editor-image-title",f="#k-editor-image-width",m="#k-editor-image-height",g=d.extend({init:function(e){var t=this;d.fn.init.call(t,e),t.async=!0,t.attributes={}},insertImage:function(e,t){var i,n=this.attributes,r=c.documentFromRange(t);if(n.src&&"http://"!=n.src){if(i=function(){setTimeout(function(){n.width||e.removeAttribute("width"),n.height||e.removeAttribute("height"),e.removeAttribute("complete")})},!e)return e=s.create(r,"img",n),e.onload=e.onerror=function(){i()},t.deleteContents(),t.insertNode(e),e.nextSibling||s.insertAfter(r.createTextNode("锘�"),e),i(),t.setStartAfter(e),t.setEndAfter(e),c.selectRange(t),!0;s.attr(e,n),i()}return!1},_dialogTemplate:function(e){return i.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-width"></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-height"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();e.insertImage(c.image(t),t)||e.releaseRange(t)},exec:function(){function e(e){var t=a.element,i=parseInt(t.find(f).val(),10),n=parseInt(t.find(m).val(),10);l.attributes={src:t.find(h).val().replace(/ /g,"%20"),alt:t.find(p).val()},l.attributes.width=null,l.attributes.height=null,!isNaN(i)&&i>0&&(l.attributes.width=i),!isNaN(n)&&n>0&&(l.attributes.height=n),g=l.insertImage(v,d),r(e),l.change&&l.change()}function r(e){e.preventDefault(),a.destroy(),s.windowFromDocument(c.documentFromRange(d)).focus(),g||l.releaseRange(d)}function o(t){t.keyCode==u.ENTER?e(t):t.keyCode==u.ESC&&r(t)}var a,l=this,d=l.lockRange(),g=!1,v=c.image(d),y=v&&v.getAttribute("width")||"",_=v&&v.getAttribute("height")||"",b=l.editor.options,w=b.messages,k=b.imageBrowser,x=!!(i.ui.ImageBrowser&&k&&k.transport&&k.transport.read!==t),C={title:w.insertImage,visible:!1,resizable:x};C.close=r,x&&(C.width=750),a=this.createDialog(l._dialogTemplate(x),C).toggleClass("k-filebrowser-dialog",x).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(r).end().find(".k-edit-field input").keydown(o).end().find(h).val(v?v.getAttribute("src",2):"http://").end().find(p).val(v?v.alt:"").end().find(f).val(y).end().find(m).val(_).end().data("kendoWindow"),x&&new i.ui.ImageBrowser(a.element.find(".k-imagebrowser"),n({},k,{change:function(){a.element.find(h).val(this.value())},apply:e})),a.center().open(),a.element.find(h).focus().select()}});i.ui.editor.ImageCommand=g,a("insertImage",new r.Tool({command:g,template:new l({template:o.buttonTemplate,title:"Insert Image"})}))}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui.DropDownList,r=i.ui.editor.Dom,o=n.extend({init:function(t,r){var o=this;n.fn.init.call(o,t,r),i.support.mobileOS.ios&&(this._initSelectOverlay(),this.bind("dataBound",e.proxy(this._initSelectOverlay,this))),o.value(o.options.title),o.bind("open",function(){if(o.options.autoSize){var e,t=o.list;t.css({whiteSpace:"nowrap",width:"auto"}),e=t.width(),e?e+=20:e=o._listWidth,t.css("width",e+i.support.scrollbar()),o._listWidth=e}})},options:{name:"SelectBox"},_initSelectOverlay:function(){var t,n,r,o,s=this,a=s.value(),l=this.dataSource.view(),c="",d=i.htmlEncode;for(n=0;l.length>n;n++)t=l[n],c+="<option value='"+d(t.value)+"'",t.value==a&&(c+=" selected"),c+=">"+d(t.text)+"</option>";r=e("<select class='k-select-overlay'>"+c+"</select>"),o=e(this.element).closest(".k-widget"),o.next(".k-select-overlay").remove(),r.insertAfter(o),r.on("change",function(){s.value(this.value),s.trigger("change")})},value:function(e){var i=this,r=n.fn.value.call(i,e);return e===t?r:(e!==n.fn.value.call(i)&&(i.text(i.options.title),i._current&&i._current.removeClass("k-state-selected"),i.current(null),i._oldIndex=i.selectedIndex=-1),t)},decorate:function(t){var i,n,o,s,a=this,l=a.dataSource,c=l.data();for(t&&a.list.css("background-color",r.getEffectiveBackground(e(t))),i=0;c.length>i;i++)n=c[i].tag||"span",o=c[i].className,s=r.inlineStyle(t,n,{className:o}),s=s.replace(/"/g,"'"),c[i].style=s+";display:inline-block";l.trigger("change")}});i.ui.plugin(o),i.ui.editor.SelectBox=o}(window.kendo.jQuery),function(e,t){function i(i,n){var r="rtl"==e(i).css("direction"),o=r?"Right":"Left",s="td"!=a.name(i)?"margin"+o:"padding"+o;return n===t?i.style[s]||0:(n>0?i.style[s]=n+"px":(i.style[s]="",i.style.cssText||i.removeAttribute("style")),t)}var n=window.kendo,r=n.Class,o=e.extend,s=n.ui.editor,a=s.Dom,l=s.EditorUtils,c=l.registerTool,d=s.Command,u=s.Tool,h=s.ToolTemplate,p=s.RangeUtils,f=a.blockElements,m=s.BlockFormatFinder,g=s.BlockFormatter,v=r.extend({init:function(){this.finder=new m([{tags:a.blockElements}])},apply:function(t){var n,r,o,s,l,c,d,u,h,p,f=this.finder.findSuitable(t),m=[];if(f.length){for(n=0,r=f.length;r>n;n++)a.is(f[n],"li")?e(f[n]).index()?e.inArray(f[n].parentNode,m)<0&&m.push(f[n]):m.push(f[n].parentNode):m.push(f[n]);for(;m.length;)if(o=m.shift(),a.is(o,"li"))if(s=o.parentNode,l=e(o).prev("li"),c=l.find("ul,ol").last(),d=e(o).children("ul,ol")[0],d&&l[0])c[0]?(c.append(o),c.append(e(d).children()),a.remove(d)):(l.append(d),d.insertBefore(o,d.firstChild));else for(d=l.children("ul,ol")[0],d||(d=a.create(o.ownerDocument,a.name(s)),l.append(d));o&&o.parentNode==s;)d.appendChild(o),o=m.shift();else for(u=parseInt(i(o),10)+30,i(o,u),h=0;m.length>h;h++)e.contains(o,m[h])&&m.splice(h,1)}else p=new g([{tags:["p"]}],{style:{marginLeft:30}}),p.apply(t)},remove:function(t){var n,r,o,s,a,l,c,d,u=this.finder.findSuitable(t);for(r=0,o=u.length;o>r;r++){if(c=e(u[r]),c.is("li")){if(s=c.parent(),a=s.parent(),a.is("li,ul,ol")&&!i(s[0])){if(n&&e.contains(n,a[0]))continue;l=c.nextAll("li"),l.length&&e(s[0].cloneNode(!1)).appendTo(c).append(l),a.is("li")?c.insertAfter(a):c.appendTo(a),s.children("li").length||s.remove();continue}if(n==s[0])continue;n=s[0]}else n=u[r];d=parseInt(i(n),10)-30,i(n,d)}}}),y=d.extend({init:function(e){e.formatter={toggle:function(e){(new v).apply(p.nodes(e))}},d.fn.init.call(this,e)}}),_=d.extend({init:function(e){e.formatter={toggle:function(e){(new v).remove(p.nodes(e))}},d.fn.init.call(this,e)}}),b=u.extend({init:function(e){u.fn.init.call(this,e),this.finder=new m([{tags:f}])},initialize:function(e,t){u.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(n,r){var o,s,l,c,d=this.finder.findSuitable(r);for(l=0,c=d.length;c>l;l++)if(o=i(d[l]),o||(s=e(d[l]).parents("ul,ol").length,o=a.is(d[l],"li")&&(s>1||i(d[l].parentNode))||a.ofType(d[l],["ul","ol"])&&s>0),o)return n.removeClass("k-state-disabled"),t;n.addClass("k-state-disabled").removeClass("k-state-hover")}});o(s,{IndentFormatter:v,IndentCommand:y,OutdentCommand:_,OutdentTool:b}),c("indent",new u({command:y,template:new h({template:l.buttonTemplate,title:"Indent"})})),c("outdent",new b({command:_,template:new h({template:l.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,i=e.extend,n=t.ui.editor,r=n.EditorUtils,o=n.Command,s=n.Tool,a=n.ToolTemplate,l=o.extend({init:function(e){var t=this;t.options=e,o.fn.init.call(t,e),t.attributes=null,t.async=!0},exec:function(){function i(e){o.value(a.find(d).val()),n(e),r.change&&r.change(),o.trigger("change")}function n(e){e.preventDefault(),a.data("kendoWindow").destroy(),o.focus()}var r=this,o=r.editor,s=o.options.messages,a=e(t.template(l.template)(s)).appendTo(document.body),c=l.indent(o.value()),d=".k-editor-textarea";this.createDialog(a,{title:s.viewHtml,close:n,visible:!1}).find(d).val(c).end().find(".k-dialog-update").click(i).end().find(".k-dialog-close").click(n).end().data("kendoWindow").center().open(),a.find(d).focus()}});i(l,{template:"<div class='k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-edit-buttons k-state-default'><button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button><button class='k-dialog-close k-button'>#: dialogCancel #</button></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),t.ui.editor.ViewHtmlCommand=l,n.EditorUtils.registerTool("viewHtml",new s({command:l,template:new a({template:r.buttonTemplate,title:"View HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.ui.editor,n=i.Tool,r=i.ToolTemplate,o=i.DelayedExecutionTool,s=i.Command,a=i.Dom,l=i.EditorUtils,c=i.RangeUtils,d=l.registerTool,u=o.extend({init:function(e){var i=this;n.fn.init.call(i,t.deepExtend({},i.options,e)),i.type="kendoSelectBox",i.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(e){var t,i=e.value;return i?e.tag||e.className?e:(t=i.indexOf("."),0===t?e.className=i.substring(1):-1==t?e.tag=i:(e.tag=i.substring(0,t),e.className=i.substring(t+1)),e):e},command:function(t){var n=t.value;return n=this.toFormattingItem(n),new i.FormatCommand({range:t.range,formatter:function(){var t,r=(n.tag||n.context||"span").split(","),o=[{tags:r,attr:{className:n.className||""}}];return t=e.inArray(r[0],a.inlineElements)>=0?new i.GreedyInlineFormatter(o):new i.GreedyBlockFormatter(o)}})},initialize:function(e,i){var r=i.editor,o=this.options,s=o.name,a=this;e.width(o.width),e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:o.items||r.options[s],title:r.options.messages[s],autoSize:!0,change:function(){n.exec(r,s,this.dataItem().toJSON())},dataBound:function(){var e,t=this.dataSource.data();for(e=0;t.length>e;e++)t[e]=a.toFormattingItem(t[e])},highlightFirst:!1,template:t.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')}),e.addClass("k-decorated").closest(".k-widget").removeClass("k-"+s).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(t,i){var n,r,o,s,a,l,c;for(n=0;t.length>n;n++)if(r=t[n],o=r.tag||r.context||"",s=r.className?"."+r.className:"",a=o+s,l=e(i[0]).closest(a)[0]){if(1==i.length)return r.value;for(c=1;i.length>c&&e(i[c]).closest(a)[0];c++)if(c==i.length-1)return r.value}return""},update:function(t,i){var n,r,s,l,c,d=e(t).data(this.type);if(d){for(n=d.dataSource,r=n.data(),c=a.commonAncestor.apply(null,i),s=0;r.length>s;s++)l=r[s].context,r[s].visible=!l||!!e(c).closest(l).length;n.filter([{field:"visible",operator:"eq",value:!0}]),o.fn.update.call(this,t,i),d.value(this.getFormattingValue(n.view(),i)),d.wrapper.toggleClass("k-state-disabled",!n.view().length)}}}),h=s.extend({exec:function(){var e,t=this.lockRange(!0),n=this.options.remove||"strong,em,span".split(",");c.wrapSelectedElements(t),e=new i.RangeIterator(t),e.traverse(function e(t){if(t&&!a.isMarker(t)){if(1==t.nodeType&&!a.insignificant(t)){for(var i=t.childNodes.length-1;i>=0;i--)e(t.childNodes[i]);t.removeAttribute("style"),t.removeAttribute("class")}n.indexOf(a.name(t))>-1&&a.unwrap(t)}}),this.releaseRange(t)}});e.extend(i,{FormattingTool:u,CleanFormatCommand:h}),d("formatting",new u({template:new r({template:l.dropDownListTemplate,title:"Format"})})),d("cleanFormatting",new n({command:h,template:new r({template:l.buttonTemplate,title:"Clean formatting"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.ui,n=i.editor,r=i.Widget,o=e.extend,s=e.proxy,a=t.keys,l=".kendoEditor",c="a.k-tool:not(.k-state-disabled),.k-widget.k-colorpicker,.k-selectbox,.k-dropdown,.k-combobox .k-input",d=r.extend({init:function(e,t){var i=this;t=o({},t,{name:"EditorToolbar"}),r.fn.init.call(i,e,t),t.popup&&i._initPopup()},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","indent","outdent"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],advanced:["viewHtml","cleanFormatting"]},_initPopup:function(){this.window=e(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-button-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-move' /></button>").kendoWindow({title:!1,resizable:!1,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:!1,autoFocus:!1,actions:[],dragend:function(){this._moved=!0}}).on("mousedown",function(t){e(t.target).is(".k-icon")||t.preventDefault()}).data("kendoWindow")},items:function(){return this.element.children().find("> *, select")},focused:function(){return this.element.find(".k-state-focused").length>0},toolById:function(e){var t,i=this.tools;for(t in i)if(t.toLowerCase()==e)return i[t]},toolGroupFor:function(t){var i,n=this.groups;if(this.isCustomTool(t))return"custom";for(i in n)if(e.inArray(t,n[i])>=0)return i},bindTo:function(t){var i=this,n=i.window;i._editor&&i._editor.unbind("select",s(i.refreshTools,i)),i._editor=t,i.tools=i.expandTools(t.options.tools),i.render(),i.element.find(".k-combobox .k-input").keydown(function(t){var i=e(this).closest(".k-combobox").data("kendoComboBox"),n=t.keyCode;n==a.RIGHT||n==a.LEFT?i.close():n==a.DOWN&&(i.dropDown.isOpened()||(t.stopImmediatePropagation(),i.open()))}),i._attachEvents(),i.items().each(function(){var n,r=i._toolName(this),o=i.tools[r],s=o&&o.options,a=t.options.messages,l=s&&s.tooltip||a[r],c=e(this);o&&o.initialize&&(("fontSize"==r||"fontName"==r)&&(n=a[r+"Inherit"],c.find("input").val(n).end().find("span.k-input").text(n).end()),o.initialize(c,{title:i._appendShortcutSequence(l,o),editor:i._editor}),c.closest(".k-widget",i.element).addClass("k-editor-widget"),c.closest(".k-colorpicker",i.element).next(".k-colorpicker").addClass("k-editor-widget"))}),t.bind("select",s(i.refreshTools,i)),i.update(),n&&n.wrapper.css({top:"",left:"",width:""})},show:function(){var e,t,i,n=this,r=n.window,o=n.options.editor;r&&(e=r.wrapper,t=o.element,e.is(":visible")&&n.window.options.visible||(e[0].style.width||e.width(t.outerWidth()-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10)),r._moved||(i=t.offset(),e.css({top:Math.max(0,parseInt(i.top,10)-e.outerHeight()-parseInt(n.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(i.left,10))})),r.open()))},hide:function(){this.window&&this.window.close()},focus:function(){var e="tabIndex",t=this.element,i=this._editor.element.attr(e);t.attr(e,i||0).focus().find(c).first().focus(),i||0===i||t.removeAttr(e)},_appendShortcutSequence:function(e,t){if(!t.key)return e;var i=e+" (";return t.ctrl&&(i+="Ctrl + "),t.shift&&(i+="Shift + "),t.alt&&(i+="Alt + "),i+=t.key+")"},_nativeTools:["insertLineBreak","insertParagraph","redo","undo"],tools:{},isCustomTool:function(e){return!(e in t.ui.Editor.defaultTools)},expandTools:function(i){var r,s,a,l,c=this._nativeTools,d=t.deepExtend({},t.ui.Editor.defaultTools),u={};for(s=0;i.length>s;s++)r=i[s],l=r.name,e.isPlainObject(r)?l&&d[l]?(u[l]=o({},d[l]),o(u[l].options,r)):(a=o({cssClass:"k-i-custom",type:"button",title:""},r),a.name||(a.name="custom"),a.cssClass="k-"+("custom"==a.name?"i-custom":a.name),a.template||"button"!=a.type||(a.template=n.EditorUtils.buttonTemplate,a.title=a.title||a.tooltip),u[l]={options:a}):d[r]&&(u[r]=d[r]);for(s=0;c.length>s;s++)u[c[s]]||(u[c[s]]=d[c[s]]);return u},render:function(){function i(i){var n;return i.getHtml?n=i.getHtml():(e.isFunction(i)||(i=t.template(i)),n=i(o)),e.trim(n)}function n(){h.children().length&&h.appendTo(v)}function r(){h=e("<li class='k-tool-group' role='presentation' />")}var o,a,l,c,d,u,h,p,f=this,m=f.tools,g=f._editor.element,v=f.element.empty(),y=f._editor.options.tools,_=t.support.browser;for(v.empty(),r(),p=0;y.length>p;p++)c=y[p].name||y[p],o=m[c]&&m[c].options,!o&&e.isPlainObject(c)&&(o=c),a=o&&o.template,"break"==c&&(n(),e("<li class='k-row-break' />").appendTo(f.element),r()),a&&(u=f.toolGroupFor(c),d!=u&&(n(),r(),d=u),a=i(a),l=e(a).appendTo(h),"custom"==u&&(n(),r()),o.exec&&l.hasClass("k-tool")&&l.click(s(o.exec,g[0])));n(),e(f.element).children(":has(> .k-tool)").addClass("k-button-group"),f.options.popup&&_.msie&&9>_.version&&f.window.wrapper.find("*").attr("unselectable","on"),f.updateGroups(),f.angular("compile",function(){return{elements:f.element}})},updateGroups:function(){e(this.element).children().each(function(){e(this).children().filter(function(){return"none"!==this.style.display}).removeClass("k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(t){this.items().filter(".k-decorated").each(function(){var i=e(this).data("kendoSelectBox");i&&i.decorate(t)})},destroy:function(){r.fn.destroy.call(this);var e,t=this.tools;for(e in t)t[e].destroy&&t[e].destroy();this.window&&this.window.destroy()},_attachEvents:function(){var t=this,i="[role=button].k-tool",n=i+":not(.k-state-disabled)",r=i+".k-state-disabled";t.element.off(l).on("mouseenter"+l,n,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+l,n,function(){e(this).removeClass("k-state-hover")}).on("mousedown"+l,i,function(e){e.preventDefault()}).on("keydown"+l,c,function(i){function n(e,i){var n=t.element.find(c),r=n.index(o)+e;return i&&(r=Math.max(0,Math.min(n.length-1,r))),n[r]}var r,o=this,s=i.keyCode;s==a.RIGHT||s==a.LEFT?e(o).hasClass(".k-dropdown")||(r=n(s==a.RIGHT?1:-1,!0)):s==a.ESC?r=t._editor:s!=a.TAB||i.ctrlKey||i.altKey||(i.shiftKey?r=n(-1):(r=n(1),r||(r=t._editor))),r&&(i.preventDefault(),r.focus())}).on("click"+l,n,function(i){var n=e(this);i.preventDefault(),i.stopPropagation(),n.removeClass("k-state-hover"),n.is("[data-popup]")||t._editor.exec(t._toolName(this))}).on("click"+l,r,function(e){e.preventDefault()})},_toolName:function(t){var i,n;if(t)return i=t.className,/k-tool\b/i.test(i)&&(i=t.firstChild.className),n=e.grep(i.split(" "),function(e){return!/^k-(widget|tool|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)}),n[0]?n[0].substring(n[0].lastIndexOf("-")+1):"custom"},refreshTools:function(){var i=this,n=i._editor,r=n.getRange(),o=t.ui.editor.RangeUtils.textNodes(r);o.length||(o=[r.startContainer]),i.items().each(function(){var t=i.tools[i._toolName(this)];t&&t.update&&t.update(e(this),o)}),this.update()},update:function(){this.element.children().children().each(function(){var t=e(this);t.css("display",t.hasClass("k-state-disabled")?"none":"")}),this.updateGroups()}});e.extend(n,{Toolbar:d})}(window.jQuery),function(e){var t=window.kendo,i=e.extend,n=e.proxy,r=t.ui.editor,o=r.Dom,s=r.EditorUtils,a=r.RangeUtils,l=r.Command,c=".kendoEditor",d="k-state-active",u="k-state-selected",h=r.Tool,p=r.ToolTemplate,f=r.InsertHtmlCommand,m=r.BlockFormatFinder,g=r.EditorUtils.registerTool,v="<td>"+r.emptyElementContent+"</td>",y=new m([{tags:["table"]}]),_=f.extend({_tableHtml:function(e,t){return e=e||1,t=t||1,"<table class='k-table' data-last>"+Array(e+1).join("<tr>"+Array(t+1).join(v)+"</tr>")+"</table>"},postProcess:function(t,i){var n=e("table[data-last]",t.document).removeAttr("data-last");i.selectNodeContents(n.find("td")[0]),t.selectRange(i)},exec:function(){var e=this.options;e.html=this._tableHtml(e.rows,e.columns),e.postProcess=this.postProcess,f.fn.exec.call(this)}}),b=h.extend({initialize:function(t,i){h.fn.initialize.call(this,t,i);var r=e(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:t,copyAnchorStyles:!1,open:n(this._open,this),activate:n(this._activate,this),close:n(this._close,this)}).data("kendoPopup");t.click(n(this._toggle,this)).keydown(n(this._keydown,this)),this._editor=i.editor,this._popup=r},popup:function(){return this._popup},_activate:e.noop,_open:function(){this._popup.options.anchor.addClass(d)},_close:function(){this._popup.options.anchor.removeClass(d)},_keydown:function(e){var i=t.keys,n=e.keyCode;n==i.DOWN&&e.altKey?this._popup.open():n==i.ESC&&this._popup.close()},_toggle:function(t){var i=e(t.target).closest(".k-tool");i.hasClass("k-state-disabled")||this.popup().toggle()},update:function(e){this.popup().close(),e.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}}),w=b.extend({init:function(t){this.cols=8,this.rows=6,b.fn.init.call(this,e.extend(t,{command:_,popupTemplate:"<div class='k-ct-popup'>"+Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled' />")+"<div class='k-status'></div></div>"}))},_activate:function(){function i(t){var i=e(window);return{row:Math.floor((t.clientY+i.scrollTop()-u.top)/r)+1,col:Math.floor((t.clientX+i.scrollLeft()-u.left)/n)+1}}var n,r,o=this,s=o._popup.element,a=s.find(".k-ct-cell"),l=a.eq(0),d=a.eq(a.length-1),u=t.getOffset(l),h=t.getOffset(d),p=o.cols,f=o.rows;h.left+=d[0].offsetWidth,h.top+=d[0].offsetHeight,n=(h.left-u.left)/p,r=(h.top-u.top)/f,s.on("mousemove"+c,function(e){o._setTableSize(i(e))}).on("mouseleave"+c,function(){o._setTableSize()}).on("mouseup"+c,function(e){o._exec(i(e))})},_valid:function(e){return e&&e.row>0&&e.col>0&&this.rows>=e.row&&this.cols>=e.col},_exec:function(e){this._valid(e)&&(this._editor.exec("createTable",{rows:e.row,columns:e.col}),this._popup.close())},_setTableSize:function(i){var n=this._popup.element,r=n.find(".k-status"),o=n.find(".k-ct-cell"),s=this.cols,a=this._editor.options.messages;this._valid(i)?(r.text(t.format(a.createTableHint,i.row,i.col)),o.each(function(t){e(this).toggleClass(u,i.col>t%s&&i.row>t/s)})):(r.text(a.dialogCancel),o.removeClass(u))},_keydown:function(e){var i,n,r,o,s,a,l,c;b.fn._keydown.call(this,e),i=t.keys,n=e.keyCode,r=this._popup.element.find(".k-ct-cell"),o=Math.max(r.filter(".k-state-selected").last().index(),0),s=Math.floor(o/this.cols),a=o%this.cols,l=!1,n!=i.DOWN||e.altKey?n==i.UP?(l=!0,s--):n==i.RIGHT?(l=!0,a++):n==i.LEFT&&(l=!0,a--):(l=!0,s++),c={row:Math.max(1,Math.min(this.rows,s+1)),col:Math.max(1,Math.min(this.cols,a+1))},n==i.ENTER?this._exec(c):this._setTableSize(c),l&&(e.preventDefault(),e.stopImmediatePropagation())},_open:function(){var e=this._editor.options.messages;b.fn._open.call(this),this.popup().element.find(".k-status").text(e.dialogCancel).end().find(".k-ct-cell").removeClass(u)},_close:function(){b.fn._close.call(this),this.popup().element.off(c)},update:function(e,t){var i;b.fn.update.call(this,e),i=y.isFormatted(t),e.toggleClass("k-state-disabled",i)}}),k=l.extend({exec:function(){for(var e,t,i,n,s=this.lockRange(!0),a=s.endContainer;"td"!=o.name(a);)a=a.parentNode;for(t=a.parentNode,e=t.children.length,i=t.cloneNode(!0),n=0;t.cells.length>n;n++)i.cells[n].innerHTML=r.emptyElementContent;"before"==this.options.position?o.insertBefore(i,t):o.insertAfter(i,t),this.releaseRange(s)}}),x=l.extend({exec:function(){var e,t,i,n,s=this.lockRange(!0),a=o.closest(s.endContainer,"td"),l=o.closest(a,"table"),c=l.rows,d=this.options.position;for(e=o.findNodeIndex(a),t=0;c.length>t;t++)i=c[t].cells[e],n=i.cloneNode(),n.innerHTML=r.emptyElementContent,"before"==d?o.insertBefore(n,i):o.insertAfter(n,i);this.releaseRange(s)}}),C=l.extend({exec:function(){var t,i,n,r=this.lockRange(),s=a.mapAll(r,function(t){return e(t).closest("tr")[0]}),l=o.closest(s[0],"table");if(s.length>=l.rows.length)t=o.next(l),(!t||o.insignificant(t))&&(t=o.prev(l)),o.remove(l);else for(i=0;s.length>i;i++)n=s[i],o.removeTextSiblings(n),t=o.next(n)||o.prev(n),t=t.cells[0],o.remove(n);t&&(r.setStart(t,0),r.collapse(!0),this.editor.selectRange(r))}}),S=l.extend({exec:function(){var e,t,i=this.lockRange(),n=o.closest(i.endContainer,"td"),r=o.closest(n,"table"),s=r.rows,a=o.findNodeIndex(n,!0),l=s[0].cells.length;if(1==l)e=o.next(r),(!e||o.insignificant(e))&&(e=o.prev(r)),o.remove(r);else for(o.removeTextSiblings(n),e=o.next(n)||o.prev(n),t=0;s.length>t;t++)o.remove(s[t].cells[a]);e&&(i.setStart(e,0),i.collapse(!0),this.editor.selectRange(i))}}),T=h.extend({command:function(e){return e=i(e,this.options),"delete"==e.action?"row"==e.type?new C(e):new S(e):"row"==e.type?new k(e):new x(e)},initialize:function(e,t){h.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){var i=!y.isFormatted(t);e.toggleClass("k-state-disabled",i)}});i(t.ui.editor,{PopupTool:b,TableCommand:_,InsertTableTool:w,TableModificationTool:T,InsertRowCommand:k,InsertColumnCommand:x,DeleteRowCommand:C,DeleteColumnCommand:S}),g("createTable",new w({template:new p({template:s.buttonTemplate,popup:!0,title:"Create table"})})),g("addColumnLeft",new T({type:"column",position:"before",template:new p({template:s.buttonTemplate,title:"Add column on the left"})})),g("addColumnRight",new T({type:"column",template:new p({template:s.buttonTemplate,title:"Add column on the right"})})),g("addRowAbove",new T({type:"row",position:"before",template:new p({template:s.buttonTemplate,title:"Add row above"})})),g("addRowBelow",new T({type:"row",template:new p({template:s.buttonTemplate,title:"Add row below"})})),g("deleteRow",new T({type:"row",action:"delete",template:new p({template:s.buttonTemplate,title:"Delete row"})})),g("deleteColumn",new T({type:"column",action:"delete",template:new p({template:s.buttonTemplate,title:"Delete column"})}))}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.caret,r=i.keys,o=i.ui,s=o.Widget,a=".kendoMaskedTextBox",l=e.proxy,c=(i.support.propertyChangeEvent?"propertychange":"input")+a,d="k-state-disabled",u="disabled",h="readonly",p="change",f=s.extend({init:function(t,r){var o,l,c=this;s.fn.init.call(c,t,r),c._rules=e.extend({},c.rules,c.options.rules),t=c.element,o=t[0],c.wrapper=t,c._tokenize(),c._reset(),c.element.addClass("k-textbox").attr("autocomplete","off").on("focus"+a,function(){var e=o.value;e?c._togglePrompt(!0):o.value=c._old=c._emptyMask,c._oldValue=e,c._timeoutId=setTimeout(function(){n(t,0,e?c._maskLength:0)})}).on("focusout"+a,function(){var e=t.val();clearTimeout(c._timeoutId),o.value=c._old="",e!==c._emptyMask&&(o.value=c._old=e),c._change(),c._togglePrompt()}),l=t.is("[disabled]"),l?c.enable(!1):c.readonly(t.is("[readonly]")),c.value(c.options.value||t.val()),i.notify(c)},options:{name:"MaskedTextBox",promptChar:"_",clearPromptChar:!1,culture:"",rules:{},value:"",mask:""},events:[p],rules:{0:/\d/,9:/\d|\s/,"#":/\d|\s|\+|\-/,L:/[a-zA-Z]/,"?":/[a-zA-Z]|\s/,"&":/\S/,C:/./,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9]|\s/},setOptions:function(t){var i=this;s.fn.setOptions.call(i,t),i._rules=e.extend({},i.rules,i.options.rules),i._tokenize(),this._unbindInput(),this._bindInput(),i.value(i.element.val())},destroy:function(){var e=this;e.element.off(a),e._form&&e._form.off("reset",e._resetHandler),s.fn.destroy.call(e)},value:function(e){var n=this.element,r=this._emptyMask;return e===t?this.element.val():(null===e&&(e=""),r?(e=this._unmask(e+""),n.val(e?r:""),this._mask(0,this._maskLength,e),e=n.val(),this._oldValue=e,i._activeElement()!==n&&(e===r?n.val(""):this._togglePrompt()),t):(n.val(e),t))},_togglePrompt:function(e){
var t=this.element[0],i=t.value;this.options.clearPromptChar&&(i=e?this._oldValue:i.replace(RegExp(this.options.promptChar,"g")," "),t.value=this._old=i)},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},_bindInput:function(){var e=this;e._maskLength&&e.element.on("keydown"+a,l(e._keydown,e)).on("keypress"+a,l(e._keypress,e)).on("paste"+a,l(e._paste,e)).on(c,l(e._propertyChange,e))},_unbindInput:function(){this.element.off("keydown"+a).off("keypress"+a).off("paste"+a).off(c)},_editable:function(e){var t=this,i=t.element,n=e.disable,r=e.readonly;t._unbindInput(),r||n?i.attr(u,n).attr(h,r).toggleClass(d,n):(i.removeAttr(u).removeAttr(h).removeClass(d),t._bindInput())},_change:function(){var e=this,t=e.value();t!==e._oldValue&&(e._oldValue=t,e.trigger(p),e.element.trigger(p))},_propertyChange:function(){var e,t,i=this,r=i.element[0],o=r.value;o===i._old||i._pasting||(t=n(r)[0],e=i._unmask(o.substring(t),t),r.value=i._old=o.substring(0,t)+i._emptyMask.substring(t),i._mask(t,t,e),n(r,t))},_paste:function(e){var t=this,i=e.target,r=n(i),o=r[0],s=r[1],a=t._unmask(i.value.substring(s),s);t._pasting=!0,setTimeout(function(){var e=i.value,r=e.substring(o,n(i)[0]);i.value=t._old=e.substring(0,o)+t._emptyMask.substring(o),t._mask(o,o,r),o=n(i)[0],t._mask(o,o,a),n(i,o),t._pasting=!1})},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(i[0].value)})},t._form=r.on("reset",t._resetHandler))},_keydown:function(e){var i,o=e.keyCode,s=this.element[0],a=n(s),l=a[0],c=a[1],d=o===r.BACKSPACE;d||o===r.DELETE?(l===c&&(d?l-=1:c+=1,i=this._find(l,d)),i!==t&&i!==l?(d&&(i+=1),n(s,i)):l>-1&&this._mask(l,c,"",d),e.preventDefault()):o===r.ENTER&&this._change()},_keypress:function(e){var t,i;0===e.which||e.ctrlKey||e.keyCode===r.ENTER||(t=String.fromCharCode(e.which),i=n(this.element),this._mask(i[0],i[1],t),(e.keyCode===r.BACKSPACE||t)&&e.preventDefault())},_find:function(e,t){var i=this.element.val()||this._emptyMask,n=1;for(t===!0&&(n=-1);e>-1||this._maskLength>=e;){if(i.charAt(e)!==this.tokens[e])return e;e+=n}return-1},_mask:function(e,r,o,s){var a,l,c,d,u=this.element[0],h=u.value||this._emptyMask,p=this.options.promptChar,f=0;for(e=this._find(e,s),e>r&&(r=e),l=this._unmask(h.substring(r),r),o=this._unmask(o,e),a=o.length,o&&(l=l.replace(RegExp("^_{0,"+a+"}"),"")),o+=l,h=h.split(""),c=o.charAt(f);this._maskLength>e;)h[e]=c||p,c=o.charAt(++f),d===t&&f>a&&(d=e),e=this._find(e+1);u.value=this._old=h.join(""),i._activeElement()===u&&(d===t&&(d=this._maskLength),n(u,d))},_unmask:function(t,i){var n,r,o,s,a,l,c,d;if(!t)return"";for(t=(t+"").split(""),o=0,s=i||0,a=this.options.promptChar,l=t.length,c=this.tokens.length,d="";c>s&&(n=t[o],r=this.tokens[s],n===r||n===a?(d+=n===a?a:"",o+=1,s+=1):"string"!=typeof r?((r.test&&r.test(n)||e.isFunction(r)&&r(n))&&(d+=n,s+=1),o+=1):s+=1,!(o>=l)););return d},_tokenize:function(){for(var e,t,n,r,o=[],s=0,a=this.options.mask||"",l=a.split(""),c=l.length,d=0,u="",h=this.options.promptChar,p=i.getCulture(this.options.culture).numberFormat,f=this._rules;c>d;d++)if(e=l[d],t=f[e])o[s]=t,u+=h,s+=1;else for("."===e||","===e?e=p[e]:"$"===e?e=p.currency.symbol:"\\"===e&&(d+=1,e=l[d]),e=e.split(""),n=0,r=e.length;r>n;n++)o[s]=e[n],u+=e[n],s+=1;this.tokens=o,this._emptyMask=u,this._maskLength=u.length}});o.plugin(f)}(window.kendo.jQuery),function(e,t){function i(e){var i="string"==typeof e?[{name:e}]:e,n="[object Array]"===ye.call(i)?i:i!==t?[i]:[];return be(n,function(e){return"string"==typeof e?{name:e}:{name:e.name,type:e.type}})}function n(e){var i="string"==typeof e?[{name:[e],expand:!1}]:e,n="[object Array]"===ye.call(i)?i:i!==t?[i]:[];return be(n,function(e){return"string"==typeof e?{name:[e],expand:!1}:{name:"[object Array]"===ye.call(e.name)?e.name.slice():[e.name],expand:e.expand}})}function r(e,t,i,n){var o,s,a,l;if(i||(i=t),n||(n=0),l=i.members[n],l&&!l.measure){if(a=l.children,s=a.length,i===t?e[pe.stringify([l.name])]=!!s:s&&(e[pe.stringify(le(i,n))]=!0),s)for(o=0;s>o;o++)r(e,t,a[o],n);r(e,t,i,n+1)}}function o(t){var i,n,o={};t.length&&r(o,t[0]),i=[];for(n in o)i.push({name:e.parseJSON(n),expand:o[n]});return i}function s(e,t){var i,n,r,o,s=t.tuples||[],a=s[0];if(a&&a.members.length>e.length)for(i=a.members,n=0;i.length>n;n++)if(!i[n].measure){for(r=!1,o=0;e.length>o;o++)if(0===$(e[o]).indexOf(i[n].hierarchy)){r=!0;break}r||e.push({name:[i[n].name],expand:!1})}}function a(e){var t,i=[],n=e.members;for(t=0;n.length>t;t++)n[t].measure||i.push({name:[n[t].name],expand:n[t].children.length>0});return i}function l(e,t,i){var r,o;return e=e||{},s(t,e),i.length>1&&t.push({name:"Measures",measure:!0,children:n(i)}),r={members:t},e.tuples&&(o=x(e.tuples,r),o.tuple&&(t=a(o.tuple))),t}function c(e,t,i,n,r,o,s){var a,l,c,d,u,h,p,f=0,m=t;for(l in i[n].aggregates)a=i[n].aggregates[l],d=r[l],u=o[l],a=d?d(a):a.accumulator,e[m]={ordinal:m,value:a,fmtValue:u?pe.format(u,a):a},++f,m+=s;h=i[n].items;for(c in h){p=h[c].index*f,p=m+p*s;for(l in h[c].aggregates)a=h[c].aggregates[l],d=r[l],u=o[l],a=d?d(a):a.accumulator,e[p]={ordinal:p,value:a,fmtValue:u?pe.format(u,a):a},p+=s}}function d(e,t,i,n,r,o){var s,a,l,c,d,u,h,p=0;for(a in i[n].aggregates)s=i[n].aggregates[a],c=r[a],d=o[a],s=c?c(s):s.accumulator,e[e.length]={ordinal:t++,value:s,fmtValue:d?pe.format(d,s):s},++p;u=i[n].items;for(l in u){h=u[l].index*p;for(a in u[l].aggregates)s=u[l].aggregates[a],c=r[a],d=o[a],s=c?c(s):s.accumulator,e[e.length]={ordinal:t+h++,value:s,fmtValue:d?pe.format(d,s):s}}}function u(e){var t=pe.getter(e.field,!0);return function(i,n){return e.aggregate(t(i.dataItem),n,i)}}function h(e){return"number"==typeof e&&!isNaN(e)}function p(e){return e&&e.getTime}function f(e,i,n){return e.tuples.length<y(i.tuples,n)?i:t}function m(e,t,i,n,r){var o,s,a,l=e.length,c=y(t,n),d=n.length||1;for(s=0;i>s;s++)for(o=0;l>o;o++)a=v(e[o],t)*d,a+=o%d,r[s*l+o].ordinal=s*c+a}function g(e,t,i,n,r){var o,s,a,l=e.length,c=(y(t,n),n.length||1);for(s=0;l>s;s++)for(a=v(e[s],t),a*=c,a+=s%c,o=0;i>o;o++)r[s*i+o].ordinal=a*i+o}function v(e,t){return x(t,e).index}function y(e,t){var i,n,r;if(!e.length)return 0;for(i=e.slice(),n=i.shift(),r=1;n;)n.members?[].push.apply(i,n.members):n.children&&(n.measure||(r+=n.children.length),[].push.apply(i,n.children)),n=i.shift();return t.length&&(r*=t.length),r}function _(e){return e||(e={tuples:[]}),e.tuples||(e.tuples=[]),e}function b(e,t,i){var n,r,o;if(!e)return 0;for(n=Math.max(i.length,1),r=e.members.slice(0,t),o=r.shift();o;)o.children?[].push.apply(r,o.children):(n++,[].push.apply(r,o.members)),o=r.shift();return n}function w(e,t,i){var n,r,o,s,a,l;if(!t[0])return{parsedRoot:null,tuples:e,memberIndex:0,index:0};if(n=x(e,t[0]),!n.tuple)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};if(r=n.tuple.members,o=t[0].members,s=-1,r.length!==o.length)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};for(a=0,l=r.length;l>a;a++)!r[a].measure&&o[a].children[0]&&(-1==s&&o[a].children.length&&(s=a),r[a].children=o[a].children);return i=Math.max(i.length,1),{parsedRoot:n.tuple,index:n.index*i,memberIndex:s,tuples:e}}function k(e,t){var i,n,r=!0;for(e=e.members,t=t.members,i=0,n=e.length;n>i;i++)e[i].measure||t[i].measure||(r=r&&$(e[i])===$(t[i]));return r}function x(e,t){var i,n,r,o,s,a,l,c=0;for(i=0,n=e.length;n>i;i++){if(r=e[i],k(r,t))return{tuple:r,index:c};for(c++,s=0,a=r.members.length;a>s;s++)if(l=r.members[s],!l.measure&&(o=x(l.children,t),c+=o.index,o.tuple))return{tuple:o.tuple,index:c}}return{index:c}}function C(e,t){var i,n,r,o="";for(n=0,r=e.length;r>n;n++)i=e[n],o+=i.name,t[o]||(t[o]=i)}function S(e,t){var i,n,r,o,s=e.members,a="",l="";for(i=0,n=s.length;n>i;i++){if(r=s[i],o){if(t[a+r.name]){a+=r.name,o=t[a];continue}return t[a+r.parentName]?t[a+r.parentName]:(r.parentName&&(l+=r.parentName),t[l])}if(a+=r.name,o=t[r.parentName],!o&&(o=t[a],!o))return null;o&&(l+=o.name)}return o}function T(e,t){var i,n,r,o;if(0===t.length)return-1;for(i=t[0],n=e.members,r=0,o=n.length;o>r;r++)if(n[r].name==i.name)return r}function D(i,n){if(!(0>n)){var r={name:"Measures",measure:!0,children:[e.extend({members:[],dataIndex:i.dataIndex},i.members[n])]};i.members.splice(n,1,r),i.dataIndex=t}}function M(e,t){var i,n,r,o,s,a;if(1>e.length)return[];for(i=[],n={},r=T(e[0],t),o=0;e.length>o;o++)s=e[o],s.dataIndex=o,D(s,r),a=S(s,n),a?a.children.push(0>r||!a.measure?s:s.members[r].children[0]):i.push(s),C(s.members,n);return i}function A(e,t){var i,n,r,o,s,a,l,c,d;if(!e||!e.length)return t;for(i=[],n=I(e),r=n.length,o=Math.max(t.length/r,1),s=0;r>s;s++)for(l=o*s,c=o*n[s],a=0;o>a;a++)d=parseInt(c+a,10),i[parseInt(l+a,10)]=t[d]||{value:"",fmtValue:"",ordinal:d};return i}function E(e,t){var i,n,r,o,s,a,l,c;if(!e||!e.length)return t;for(i=[],n=I(e),r=n.length,o=Math.max(t.length/r,1),a=0;o>a;a++)for(l=r*a,s=0;r>s;s++)c=n[s]+l,i[l+s]=t[c]||{value:"",fmtValue:"",ordinal:c};return i}function I(e){var i,n,r,o,s,a,l;for(e=e.slice(),i=[],n=e.shift();n;){for(n.dataIndex!==t&&i.push(n.dataIndex),s=0,r=0,o=n.members.length;o>r;r++)l=n.members[r],a=l.children,l.measure?[].splice.apply(e,[0,0].concat(a)):[].splice.apply(e,[s,0].concat(a)),s+=a.length;n=e.shift()}return i}function P(e){var t=e.split(".");return t.length>2?t[0]+"."+t[1]:e}function F(e,t){var i=e.length-1,n=e[i],r=z(t,n);return r&&r.dir?n="ORDER("+n+".Children,"+r.field+".CurrentMember.MEMBER_CAPTION,"+r.dir+")":n+=".Children",e[i]=n,e}function z(e,t){for(var i=0,n=e.length;n>i;i++)if(0===t.indexOf(e[i].field))return e[i];return null}function H(e){var t,i="CROSSJOIN({";return e.length>2?(t=e.pop(),i+=H(e)):(i+=e.shift(),t=e.pop()),i+="},{",i+=t,i+="})"}function R(e,t){var i=e.slice(0);return t.length>1&&i.push("{"+N(t).join(",")+"}"),H(i)}function N(e){for(var i,n=0,r=e.length,o=[];r>n;n++)i=e[n],o.push(i.name!==t?i.name:i);return o}function $(e){return e=e.name||e,"[object Array]"===ye.call(e)&&(e=e[e.length-1]),e}function O(e){for(var t=e.length,i=[],n=0;t>n;n++)i.push(e[n].name[0]);return i}function L(e,t){var i,n,r,o=0,s=e.length,a=t.length;for(t=t.slice(0);s>o;o++)for(i=e[o],r=0;a>r;r++)if(n=P(t[r]),-1!==i.indexOf(n)){t[r]=i;break}return t}function B(e){for(var t,i,n,r,o,s,a=[],l=[],c=[],d=0,u=e.length;u>d;d++)if(t=e[d],r=t.name,s=!1,"[object Array]"!==ye.call(r)&&(t.name=r=[r]),r.length>1)l.push(t);else{for(o=P(r[0]),i=0,n=c.length;n>i;i++)if(0===c[i].name[0].indexOf(o)){s=!0;break}s||c.push(t),t.expand&&a.push(t)}return a=a.concat(l),{root:c,expanded:a}}function U(e,t,i){var n,r,o,s,a,l,c,d,u="";if(e=e||[],n=B(e),r=n.root,o=O(r),s=[],n=n.expanded,a=n.length,l=0,d=[],o.length>1||t.length>1){for(s.push(R(o,t));a>l;l++)c=F(n[l].name,i),d=L(c,o),s.push(R(d,t));u+=s.join(",")}else{for(;a>l;l++)c=F(n[l].name,i),d.push(c[0]);u+=o.concat(d).join(",")}return u}function V(e){var t="",i=e.value,n=e.field,r=e.operator;return"in"==r?(t+="{",t+=i,t+="}"):(t+="Filter(",t+=n+".Children",t+=pe.format(Y[r],n,i),t+=")"),t}function W(e,t){var i,n,r="",o=e.filters,s=o.length;for(n=s-1;n>=0;n--)i="SELECT (",i+=V(o[n]),i+=") ON 0",n==s-1?(i+=" FROM ["+t+"]",r=i):r=i+" FROM ( "+r+" )";return r}function j(e,t,i){var n,r,o="";if(t){o+="<"+e+">";for(r in t)n=t[r],i&&(r=r.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),o+="<"+r+">"+n+"</"+r+">";o+="</"+e+">"}else o+="<"+e+"/>";return o}function q(e){if(null==e)return[];var t=ye.call(e);return"[object Array]"!==t?[e]:e}function G(e){var t,i,n,r,o={tuples:[]},s=q(pe.getter("Tuples.Tuple",!0)(e)),a=pe.getter("Caption['#text']"),l=pe.getter("UName['#text']"),c=pe.getter("LName['#text']"),d=pe.getter("LNum['#text']"),u=pe.getter("CHILDREN_CARDINALITY['#text']",!0),h=pe.getter("['@Hierarchy']"),p=pe.getter("PARENT_UNIQUE_NAME['#text']",!0);for(t=0;s.length>t;t++){for(i=[],n=q(s[t].Member),r=0;n.length>r;r++)i.push({children:[],caption:a(n[r]),name:l(n[r]),levelName:c(n[r]),levelNum:d(n[r]),hasChildren:parseInt(u(n[r]),10)>0,parentName:p(n[r]),hierarchy:h(n[r])});o.tuples.push({members:i})}return o}var Y,Q,K,X,Z,J,ee,te,ie,ne,re,oe,se,ae,le,ce,de,ue,he,pe=window.kendo,fe=pe.ui,me=pe.Class,ge=fe.Widget,ve=pe.data.DataSource,ye={}.toString,_e=function(e){return e},be=e.map,we=e.extend,ke=pe.isFunction,xe="change",Ce="error",Se="progress",Te="stateReset",De="auto",Me="<div/>",Ae=".kendoPivotGrid",Ee="__row_total__",Ie="dataBinding",Pe="dataBound",Fe="expandMember",ze="collapseMember",He="k-i-arrow-s",Re="k-i-arrow-e",Ne="#: data.member.caption || data.member.name #",$e='<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "open" : data.dataItem.value < 0 ? "denied" : "hold"#">#:data.dataItem.value#</span>',Oe='<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "increase" : data.dataItem.value < 0 ? "decrease" : "equal"#">#:data.dataItem.value#</span>',Le='#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || "&nbsp;" : "&nbsp;" #',Be='<table class="k-pivot-layout"><tr><td><div class="k-pivot-rowheaders"></div></td><td><div class="k-pivot-table k-state-default"></div></td></tr></table>',Ue={sum:function(e,t){var i=t.accumulator;return h(i)?h(e)&&(i+=e):i=e,i},count:function(e,t){return(t.accumulator||0)+1},average:{aggregate:function(e,i){var n=i.accumulator;return i.count===t&&(i.count=0),h(n)?h(e)&&(n+=e):n=e,h(e)&&i.count++,n},result:function(e){var t=e.accumulator;return h(t)&&(t/=e.count),t}},max:function(e,t){var i=t.accumulator;return h(i)||p(i)||(i=e),e>i&&(h(e)||p(e))&&(i=e),i},min:function(e,t){var i=t.accumulator;return h(i)||p(i)||(i=e),i>e&&(h(e)||p(e))&&(i=e),i}},Ve=me.extend({init:function(e){this.options=we({},this.options,e),this.dimensions=this._normalizeDescriptors("field",this.options.dimensions),this.measures=this._normalizeDescriptors("name",this.options.measures)},_normalizeDescriptors:function(e,t){var i,n,r,o;if(t=t||{},i={},"[object Array]"===ye.call(t)){for(r=0,o=t.length;o>r;r++)n=t[r],"string"==typeof n?i[n]={}:n[e]&&(i[n[e]]=n);t=i}return t},_asTuples:function(e,i,n){var r,o,s,a,l,c,d,u,h,p;if(n=n||[],r=this.dimensions||[],o=[],h=n.length||1,i.length||n.length)for(c=0;h>c;c++){for(s={members:[]},a=0,l=i.length;l>a;a++)u=$(i[a].name),s.members[s.members.length]={children:[],caption:(r[u]||{}).caption||"All",name:u,levelName:u,levelNum:"0",hasChildren:!0,parentName:t,hierarchy:u};h>1&&(s.members[s.members.length]={children:[],caption:n[c].caption,name:n[c].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!1,parentName:t,hierarchy:"MEASURES"}),o[o.length]=s}for(p in e)for(c=0;h>c;c++){for(d={members:[]},a=0,l=i.length;l>a;a++)u=$(i[a].name),d.members[d.members.length]=0===e[p].parentName.indexOf(u)?{children:[],caption:e[p].value,name:e[p].name,levelName:e[p].name,levelNum:1,hasChildren:!1,parentName:u,hierarchy:u}:{children:[],caption:(r[u]||{}).caption||"All",name:u,levelName:u,levelNum:"0",hasChildren:!0,parentName:t,hierarchy:u};h>1&&(d.members[d.members.length]={children:[],caption:n[c].caption,name:n[c].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!0,parentName:t,hierarchy:"MEASURES"}),o[o.length]=d}return o},_toDataArray:function(e,t,i,n,r){var o,s,a,l,c,d,u={},h={},p=0,f=i&&i.length;if(f)for(o=this.measures||{};f>p;p++)a=i[p].name,s=o[a],s.result&&(h[a]=s.result),s.format&&(u[a]=s.format);l=[],c=0,r(l,c,e,Ee,h,u,t);for(d in e)d!==Ee&&(c+=n,r(l,c,e,d,h,u,t));return l},_matchDescriptors:function(e,t,i,n){for(var r,o,s,a,l;n>0;)if(r=t[--n],o=$(r).split("&"),o.length>1&&(s=o[0],a=o[1],l=i[s],l(e)!=a))return!1;return!0},_isExpanded:function(e){for(var t=0,i=e.length;i>t;t++)if(e[t].expand)return!0;return!1},_calculateAggregate:function(e,t,i){var n,r,o,s={};for(o=0;e.length>o;o++)r=e[o].descriptor.name,n=i.aggregates[r]||{},n.accumulator=e[o].aggregator(t,n),s[r]=n;return s},_processColumns:function(e,i,n,r,o,s,a,l){var c,d,u,h,p,f,m=o.dataItem;for(f=0;i.length>f;f++)if(d=i[f],d.expand){if(!this._matchDescriptors(m,i,n,f))continue;u=$(d),c=n[u](m),c=c!==t?""+c:c,u=u+"&"+c,h=r[u]||{index:a.columnIndex,name:u,parentName:u,value:c},p=s.items[u]||{aggregates:{}},s.items[u]={index:h.index,aggregates:this._calculateAggregate(e,o,p)},l&&(r[u]||a.columnIndex++,r[u]=h)}},_measureAggregators:function(e){var t,i,n,r,o,s,a=e.measures||[],l=this.measures||{},c=[];if(a.length){for(n=0,r=a.length;r>n;n++)if(t=a[n],i=l[t.name],o=null,i){if(s=i.aggregate,"string"==typeof s){if(o=Ue[s.toLowerCase()],!o)throw Error("There is no such aggregate function");i.aggregate=o.aggregate||o,i.result=o.result}c.push({descriptor:t,caption:i.caption,result:i.result,aggregator:u(i)})}}else c.push({descriptor:{name:"default"},caption:"default",aggregator:function(){return 1}});return c},_buildGetters:function(e){var t,i,n,r,o,s={};for(r=0,o=e.length;o>r;r++)t=e[r],n=$(t),i=n.split("&"),i.length>1?s[i[0]]=pe.getter(i[0],!0):s[n]=pe.getter(n,!0);return s},process:function(e,i){var r,o,s,a,l,u,h,p,f,m,g,v,y,_,b,w,k,x,C,S,T,D,M,A,E,I;if(e=e||[],i=i||{},r=i.measures||[],o="rows"===i.measuresAxis,s=(o?i.rows:i.columns)||[],a=(o?i.columns:i.rows)||[],!s.length&&a.length&&(!r.length||r.length&&o)&&(s=a,a=[],o=!1),s.length||a.length||(o=!1),!s.length&&r.length&&(s=n(i.measures)),l={},u={},h={},f={columnIndex:0},m=this._measureAggregators(i),g=this._buildGetters(s),v=this._buildGetters(a),y=!1,s.length||a.length)for(w=this._isExpanded(a),y=!0,k=0,x=e.length;x>k;k++)for(_=e[k],b={dataItem:_,index:k},C=l[Ee]||{items:{},aggregates:{}},this._processColumns(m,s,g,u,b,C,f,!w),C.aggregates=this._calculateAggregate(m,b,C),l[Ee]=C,S=0,T=a.length;T>S;S++)if(D=a[S],D.expand){if(!this._matchDescriptors(_,a,v,S))continue;M=$(D),p=v[M](_),p=p!==t?""+p:p,h[p]={name:M+"&"+p,parentName:M,value:p},A=l[p]||{items:{},aggregates:{}},this._processColumns(m,s,g,u,b,A,f,!0),A.aggregates=this._calculateAggregate(m,b,A),l[p]=A}return y&&e.length?(!(m.length>1)||i.columns&&i.columns.length||(s=[]),u=this._asTuples(u,s,m),h=this._asTuples(h,a,[]),E=u.length,o&&(E=1,I=u,u=h,h=I),l=this._toDataArray(l,u.length,i.measures,E,o?c:d),l=this._normalizeData(l,u.length,h.length)):l=u=h=[],{axes:{columns:{tuples:u},rows:{tuples:h}},data:l}},_normalizeData:function(e,t,i){var n,r,o=(t||1)*(i||1),s=Array(o),a=e.length;if(a===o)return e;for(r=0;o>r;r++)s[r]={value:"",fmtValue:"",ordinal:r};for(r=0;a>r;r++)n=e[r],n&&(s[n.ordinal]=n);return s}}),We=me.extend({init:function(e,t){this.transport=t,this.options=t.options||{},this.transport.discover||ke(e.discover)&&(this.discover=e.discover)},read:function(e){return this.transport.read(e)},update:function(e){return this.transport.update(e)},create:function(e){return this.transport.create(e)},destroy:function(e){return this.transport.destroy(e)},discover:function(e){return this.transport.discover?this.transport.discover(e):(e.success({}),t)},catalog:function(i){var n,r=this.options||{};return i===t?(r.connection||{}).catalog:(n=r.connection||{},n.catalog=i,this.options.connection=n,e.extend(this.transport.options,{connection:n}),t)},cube:function(e){var i,n=this.options||{};return e===t?(n.connection||{}).cube:(i=n.connection||{},i.cube=e,this.options.connection=i,we(!0,this.transport.options,{connection:i}),t)}}),je=ve.extend({init:function(t){var r,o=((t||{}).schema||{}).cube,s="columns",a={axes:_e,cubes:_e,catalogs:_e,measures:_e,dimensions:_e,hierarchies:_e,levels:_e,members:_e};o&&(a=e.extend(a,this._cubeSchema(o)),this.cubeBuilder=new Ve(o)),ve.fn.init.call(this,we(!0,{},{schema:a},t)),this.transport=new We(this.options.transport||{},this.transport),this._columns=n(this.options.columns),this._rows=n(this.options.rows),r=this.options.measures||[],null!==this.options.measures&&"[object Object]"===ye.call(this.options.measures)&&(r=this.options.measures.values||[],s=this.options.measures.axis||"columns"),this._measures=i(r||[]),this._measuresAxis=s,this._axes={}},_cubeSchema:function(e){return{dimensions:function(){var t,i=[],n=e.dimensions;for(t in n)i.push({name:t,caption:n[t].caption||t,uniqueName:t,defaultHierarchy:t,type:1});return e.measures&&i.push({name:"Measures",caption:"Measures",uniqueName:"Measures",type:2}),i},hierarchies:function(){return[]},measures:function(){var t,i=[],n=e.measures;for(t in n)i.push({name:t,caption:t,uniqueName:t,aggregator:t});return i}}},options:{serverSorting:!0,serverPaging:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0},catalog:function(e){return e===t?this.transport.catalog():(this.transport.catalog(e),this._mergeState({}),this._axes={},this.data([]),t)},cube:function(e){return e===t?this.transport.cube():(this.transport.cube(e),this._axes={},this._mergeState({}),this.data([]),t)},axes:function(){return this._axes},columns:function(e){return e===t?this._columns:(this._clearAxesData=!0,this._columns=n(e),this.query({columns:e,rows:this.rowsAxisDescriptors(),measures:this.measures()}),t)},rows:function(e){return e===t?this._rows:(this._clearAxesData=!0,this._rows=n(e),this.query({columns:this.columnsAxisDescriptors(),rows:e,measures:this.measures()}),t)},measures:function(e){return e===t?this._measures:(this._clearAxesData=!0,this.query({columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:i(e)}),t)},measuresAxis:function(){return this._measuresAxis||"columns"},_expandPath:function(e,t){var i,r,o,s="columns"===t?"columns":"rows",a="columns"===t?"rows":"columns",c=n(e),d=$(c[c.length-1]);for(this._lastExpanded=s,c=l(this.axes()[s],c,this.measures()),i=0;c.length>i;i++)if(r=$(c[i]),r===d){if(c[i].expand)return;c[i].expand=!0}else c[i].expand=!1;o={},o[s]=c,o[a]=this._descriptorsForAxis(a),this._query(o)},_descriptorsForAxis:function(e){var t=this.axes(),i=this[e]()||[];return t&&t[e]&&t[e].tuples&&t[e].tuples[0]&&(i=o(t[e].tuples||[])),i},columnsAxisDescriptors:function(){return this._descriptorsForAxis("columns")},rowsAxisDescriptors:function(){return this._descriptorsForAxis("rows")},_process:function(e,t){this._view=e,t=t||{},t.items=t.items||this._view,this.trigger(xe,t)},_query:function(e){var t=this;return e||(this._clearAxesData=!0),t.query(we({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate(),columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:this.measures()},e))},query:function(t){var i=this._mergeState(t);return this._data.length&&this.cubeBuilder?(this._params(i),this._updateLocalData(this._pristineData),e.Deferred().resolve().promise()):this.read(i)},_mergeState:function(e){return e=ve.fn._mergeState.call(this,e),e!==t&&(this._measures=i(e.measures),e.columns?e.columns=n(e.columns):e.columns||(this._columns=[]),e.rows?e.rows=n(e.rows):e.rows||(this._rows=[])),e},filter:function(e){return e===t?this._filter:(this._clearAxesData=!0,this._query({filter:e,page:1}),t)},expandColumn:function(e){this._expandPath(e,"columns")},expandRow:function(e){this._expandPath(e,"rows")},success:function(e){var t;this.cubeBuilder&&(t=(this.reader.data(e)||[]).slice(0)),ve.fn.success.call(this,e),t&&(this._pristineData=t)},_processResult:function(e,t){var i,n,r,o,s,a,l,c,d,u,h;return this.cubeBuilder&&(i=this.cubeBuilder.process(e,this._requestData),e=i.data,t=i.axes),c=this.columns().length,d=this.rows().length,u=t.columns&&t.columns.tuples,c||!d||!u||!this._rowMeasures().length&&this.measures().length||(t={columns:{},rows:t.columns}),c||d||"rows"!==this.measuresAxis()||!u||(t={columns:{},rows:t.columns}),this._axes={columns:_(this._axes.columns),rows:_(this._axes.rows)},t={columns:_(t.columns),rows:_(t.rows)},n=this._normalizeTuples(t.columns.tuples,this._axes.columns.tuples,this._columnMeasures()),r=this._normalizeTuples(t.rows.tuples,this._axes.rows.tuples,this._rowMeasures()),this.cubeBuilder||(e=this._normalizeData({columnsLength:t.columns.tuples.length,rowsLength:t.rows.tuples.length,columnIndexes:n,rowIndexes:r,data:e})),"rows"==this._lastExpanded?(o=t.columns.tuples,a=this._columnMeasures(),s=f(t.columns,this._axes.columns,a),s&&(l="columns",t.columns=s,m(o,s.tuples,t.rows.tuples.length,a,e),e=this._normalizeData({columnsLength:y(t.columns.tuples,a),rowsLength:t.rows.tuples.length,data:e}))):"columns"==this._lastExpanded&&(o=t.rows.tuples,a=this._rowMeasures(),s=f(t.rows,this._axes.rows,a),s&&(l="rows",t.rows=s,g(o,s.tuples,t.columns.tuples.length,a,e),e=this._normalizeData({columnsLength:y(t.rows.tuples,a),rowsLength:t.columns.tuples.length,data:e}))),this._lastExpanded=null,h=this._mergeAxes(t,e,l),this._axes=h.axes,h.data},_readData:function(e){var t=this.reader.axes(e),i=this.reader.data(e);return this._processResult(i,t)},_createTuple:function(e,t,i){var n,r,o,s,a,l=e.members,c=l.length,d={members:[]},u=0;for(t&&(c-=1);c>u;u++)r=l[u],s=+r.levelNum,n=r.name,o=r.parentName,a=r.caption||n,i&&(a="All",0===s?o=r.name:s-=1,n=o),d.members.push({name:n,children:[],caption:a,levelName:o,levelNum:""+s,hasChildren:i,hierarchy:o,parentName:i?"":o});return t&&d.members.push({name:t.name,children:[]}),d},_hasRoot:function(e,t){var i,n,r,o,s,a;if(t.length)return x(t,e).tuple;for(i=e.members,r=!0,s=0,a=i.length;a>s;s++)if(n=i[s],o=+n.levelNum||0,0!==o){r=!1;break}return r},_mergeAxes:function(e,t,i){var n,r,o,s,a,l=this._columnMeasures(),c=this._rowMeasures(),d=this.axes(),u=e.rows.tuples.length,h=y(d.columns.tuples,l),p=e.columns.tuples.length;return"columns"==i?(p=h,r=e.columns.tuples):(r=M(e.columns.tuples,l),t=E(r,t)),o=w(d.columns.tuples,r,l),"rows"==i?(u=y(e.rows.tuples,c),r=e.rows.tuples):(r=M(e.rows.tuples,c),t=A(r,t)),s=w(d.rows.tuples,r,c),d.columns.tuples=o.tuples,d.rows.tuples=s.tuples,h!==y(d.columns.tuples,l)?(n=o.index+b(o.parsedRoot,o.memberIndex,l),a=h+p,t=this._mergeColumnData(t,n,u,p,a)):(n=s.index+b(s.parsedRoot,s.memberIndex,c),t=this._mergeRowData(t,n,u,p)),{axes:d,data:t}},_mergeColumnData:function(e,t,i,n,r){var o,s,a,l=this.data().toJSON(),c=0,d=Math.max(this._columnMeasures().length,1);for(i=Math.max(i,1),l.length>0&&(c=d,r-=d),o=0;i>o;o++)s=t+o*r,a=e.splice(0,n),a.splice(0,c),[].splice.apply(l,[s,0].concat(a));return l},_mergeRowData:function(e,t,i,n){var r,o,s,a=this.data().toJSON(),l=Math.max(this._rowMeasures().length,1);for(n=Math.max(n,1),a.length>0&&(i-=l,e.splice(0,n*l)),r=0;i>r;r++)s=e.splice(0,n),o=t*n+r*n,[].splice.apply(a,[o,0].concat(s));return a},_columnMeasures:function(){var e=this.measures(),t=[];return"columns"===this.measuresAxis()&&(0===this.columns().length?t=e:e.length>1&&(t=e)),t},_rowMeasures:function(){var e=this.measures(),t=[];return"rows"===this.measuresAxis()&&(0===this.rows().length?t=e:e.length>1&&(t=e)),t},_updateLocalData:function(e,t){this.cubeBuilder&&(t&&(this._requestData=t),e=this._processResult(e)),this._data=this._observe(e),this._ranges=[],this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},data:function(e){var i=this;return e===t?i._data:(this._pristineData=e.slice(0),this._updateLocalData(e,{columns:this.columns(),rows:this.rows(),measures:this.measures()}),t)},_normalizeTuples:function(e,t,i){var n,r,o,s=i.length||1,a=0,l=[],c={},d=0;if(e.length){if(!this._hasRoot(e[0],t)){for(;s>a;a++)l.push(this._createTuple(e[0],i[a],!0)),c[a]=a;e.splice.apply(e,[0,e.length].concat(l).concat(e)),a=s}if(i.length)for(o=n=e[a],r=n.members.length-1;n;){if(d>=s&&(d=0),n.members[r].name!==i[d].name&&(e.splice(a,0,this._createTuple(n,i[d])),c[a]=a),a+=1,d+=1,n=e[a],s>d&&(!n||ce(o,r-1)!==ce(n,r-1))){for(;s>d;d++)e.splice(a,0,this._createTuple(o,i[d])),c[a]=a,a+=1;n=e[a]}o=n}return c}},_normalizeData:function(e){var i,n,r=e.data,o=e.columnIndexes||{},s=e.rowIndexes||{},a=e.columnsLength||1,l=a*(e.rowsLength||1),c=0,d=0,u=0,h=Array(l);if(r.length===l)return r;for(;l>c;c++){if(s[parseInt(c/a,10)]!==t)for(n=0;a>n;n++)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;if(o[c%a]!==t&&(h[c]={value:"",fmtValue:"",ordinal:c},c+=1),i=r[d]){if(i.ordinal-u>1)for(u+=1;i.ordinal>u;u++)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;u=i.ordinal,i.ordinal=c,h[c]=i,d+=1}else h[c]={value:"",fmtValue:"",ordinal:c}}return h},discover:function(t,i){var n=this,r=n.transport;return e.Deferred(function(e){r.discover(we({success:function(t){t=n.reader.parse(t),n._handleCustomErrors(t)||(i&&(t=i(t)),e.resolve(t))},error:function(t,i,r){e.reject(t),n.error(t,i,r)}},t))}).promise().done(function(){n.trigger("schemaChange")})},schemaMeasures:function(){var e=this;return e.discover({data:{command:"schemaMeasures",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.measures(t)})},schemaKPIs:function(){var e=this;return e.discover({data:{command:"schemaKPIs",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.kpis(t)})},schemaDimensions:function(){var e=this;return e.discover({data:{command:"schemaDimensions",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.dimensions(t)})},schemaHierarchies:function(e){var t=this;return t.discover({data:{command:"schemaHierarchies",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),dimensionUniqueName:e}}},function(e){return t.reader.hierarchies(e)})},schemaLevels:function(e){var t=this;return t.discover({data:{command:"schemaLevels",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),hierarchyUniqueName:e}}},function(e){return t.reader.levels(e)})},schemaCubes:function(){var e=this;return e.discover({data:{command:"schemaCubes",restrictions:{catalogName:e.transport.catalog()}}},function(t){return e.reader.cubes(t)})},schemaCatalogs:function(){var e=this;return e.discover({data:{command:"schemaCatalogs"}},function(t){return e.reader.catalogs(t)})},schemaMembers:function(e){var t=this;return t.discover({data:{command:"schemaMembers",restrictions:we({catalogName:t.transport.catalog(),cubeName:t.transport.cube()},e)}},function(e){return t.reader.members(e)})},_params:function(e){this._clearAxesData&&(this._axes={},this._data=this._observe([]),this._clearAxesData=!1,this.trigger(Te));var t=ve.fn._params.call(this,e);return t=we({measures:this.measures(),measuresAxis:this.measuresAxis(),columns:this.columns(),rows:this.rows()},t),this.cubeBuilder&&(this._requestData=t),t}});je.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},i=t.data;if(t.data=i,!(t instanceof je)&&t instanceof pe.data.DataSource)throw Error("Incorrect DataSource type. Only PivotDataSource instances are supported");return t instanceof je?t:new je(t)},Y={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") = 0',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', NOT {0}.CurrentMember.MEMBER_CAPTION = "{1}"'},Q={schemaCubes:"MDSCHEMA_CUBES",schemaCatalogs:"DBSCHEMA_CATALOGS",schemaMeasures:"MDSCHEMA_MEASURES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaLevels:"MDSCHEMA_LEVELS",schemaMembers:"MDSCHEMA_MEMBERS",schemaKPIs:"MDSCHEMA_KPIS"},K={read:function(e){var t,i,n,r,o,s='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';return s+="SELECT NON EMPTY {",t=e.columns||[],i=e.rows||[],n=e.measures||[],r="rows"===e.measuresAxis,o=e.sort||[],!t.length&&i.length&&(!n.length||n.length&&r)&&(t=i,i=[],r=!1),t.length||i.length||(r=!1),t.length?s+=U(t,r?[]:n,o):n.length&&!r&&(s+=N(n).join(",")),s+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(i.length||r&&n.length>1)&&(s+=", NON EMPTY {",s+=i.length?U(i,r?n:[],o):N(n).join(","),s+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),e.filter?(s+=" FROM ",s+="(",s+=W(e.filter,e.connection.cube),s+=")"):s+=" FROM ["+e.connection.cube+"]",1==n.length&&t.length&&(s+=" WHERE ("+N(n).join(",")+")"),
s+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>",s.replace(/\&/g,"&amp;")},discover:function(t){t=t||{};var i='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return i+="<RequestType>"+(Q[t.command]||t.command)+"</RequestType>",i+="<Restrictions>"+j("RestrictionList",t.restrictions,!0)+"</Restrictions>",t.connection&&t.connection.catalog&&(t.properties=e.extend({},{Catalog:t.connection.catalog},t.properties)),i+="<Properties>"+j("PropertyList",t.properties)+"</Properties>",i+="</Discover></Body></Envelope>"}},X=pe.data.RemoteTransport.extend({init:function(e){var t=e;e=this.options=we(!0,{},this.options,e),pe.data.RemoteTransport.call(this,e),ke(t.discover)?this.discover=t.discover:"string"==typeof t.discover?this.options.discover={url:t.discover}:t.discover||(this.options.discover=this.options.read)},setup:function(t,i){return t.data=t.data||{},e.extend(!0,t.data,{connection:this.options.connection}),pe.data.RemoteTransport.fn.setup.call(this,t,i)},options:{read:{dataType:"text",contentType:"text/xml",type:"POST"},discover:{dataType:"text",contentType:"text/xml",type:"POST"},parameterMap:function(e,t){return K[t](e,t)}},discover:function(t){return e.ajax(this.setup(t,"discover"))}}),Z={cubes:{name:pe.getter("CUBE_NAME['#text']",!0),caption:pe.getter("CUBE_CAPTION['#text']",!0),description:pe.getter("DESCRIPTION['#text']",!0),type:pe.getter("CUBE_TYPE['#text']",!0)},catalogs:{name:pe.getter("CATALOG_NAME['#text']",!0),description:pe.getter("DESCRIPTION['#text']",!0)},measures:{name:pe.getter("MEASURE_NAME['#text']",!0),caption:pe.getter("MEASURE_CAPTION['#text']",!0),uniqueName:pe.getter("MEASURE_UNIQUE_NAME['#text']",!0),description:pe.getter("DESCRIPTION['#text']",!0),aggregator:pe.getter("MEASURE_AGGREGATOR['#text']",!0),groupName:pe.getter("MEASUREGROUP_NAME['#text']",!0),displayFolder:pe.getter("MEASURE_DISPLAY_FOLDER['#text']",!0),defaultFormat:pe.getter("DEFAULT_FORMAT_STRING['#text']",!0)},kpis:{name:pe.getter("KPI_NAME['#text']",!0),caption:pe.getter("KPI_CAPTION['#text']",!0),value:pe.getter("KPI_VALUE['#text']",!0),goal:pe.getter("KPI_GOAL['#text']",!0),status:pe.getter("KPI_STATUS['#text']",!0),trend:pe.getter("KPI_TREND['#text']",!0),statusGraphic:pe.getter("KPI_STATUS_GRAPHIC['#text']",!0),trendGraphic:pe.getter("KPI_TREND_GRAPHIC['#text']",!0),description:pe.getter("KPI_DESCRIPTION['#text']",!0),groupName:pe.getter("MEASUREGROUP_NAME['#text']",!0)},dimensions:{name:pe.getter("DIMENSION_NAME['#text']",!0),caption:pe.getter("DIMENSION_CAPTION['#text']",!0),description:pe.getter("DESCRIPTION['#text']",!0),uniqueName:pe.getter("DIMENSION_UNIQUE_NAME['#text']",!0),defaultHierarchy:pe.getter("DEFAULT_HIERARCHY['#text']",!0),type:pe.getter("DIMENSION_TYPE['#text']",!0)},hierarchies:{name:pe.getter("HIERARCHY_NAME['#text']",!0),caption:pe.getter("HIERARCHY_CAPTION['#text']",!0),description:pe.getter("DESCRIPTION['#text']",!0),uniqueName:pe.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pe.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:pe.getter("HIERARCHY_DISPLAY_FOLDER['#text']",!0),origin:pe.getter("HIERARCHY_ORIGIN['#text']",!0),defaultMember:pe.getter("DEFAULT_MEMBER['#text']",!0)},levels:{name:pe.getter("LEVEL_NAME['#text']",!0),caption:pe.getter("LEVEL_CAPTION['#text']",!0),description:pe.getter("DESCRIPTION['#text']",!0),uniqueName:pe.getter("LEVEL_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pe.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:pe.getter("LEVEL_DISPLAY_FOLDER['#text']",!0),orderingProperty:pe.getter("LEVEL_ORDERING_PROPERTY['#text']",!0),origin:pe.getter("LEVEL_ORIGIN['#text']",!0),hierarchyUniqueName:pe.getter("HIERARCHY_UNIQUE_NAME['#text']",!0)},members:{name:pe.getter("MEMBER_NAME['#text']",!0),caption:pe.getter("MEMBER_CAPTION['#text']",!0),uniqueName:pe.getter("MEMBER_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pe.getter("DIMENSION_UNIQUE_NAME['#text']",!0),hierarchyUniqueName:pe.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),levelUniqueName:pe.getter("LEVEL_UNIQUE_NAME['#text']",!0),childrenCardinality:pe.getter("CHILDREN_CARDINALITY['#text']",!0)}},J=["axes","catalogs","cubes","dimensions","hierarchies","levels","measures"],ee=pe.data.XmlDataReader.extend({init:function(e){pe.data.XmlDataReader.call(this,e),this._extend(e)},_extend:function(e){for(var t,i,n=0,r=J.length;r>n;n++)t=J[n],i=e[t],i&&i!==_e&&(this[t]=i)},parse:function(e){var t=pe.data.XmlDataReader.fn.parse(e.replace(/<(\/?)(\w|-)+:/g,"<$1"));return pe.getter("['Envelope']['Body']",!0)(t)},errors:function(e){var t=pe.getter("['Fault']",!0)(e);return t?[{faultstring:pe.getter("faultstring['#text']",!0)(t),faultcode:pe.getter("faultcode['#text']",!0)(t)}]:null},axes:function(e){var t,i,n;return e=pe.getter("ExecuteResponse.return.root",!0)(e),t=q(pe.getter("Axes.Axis",!0)(e)),i=G(t[0]),n={},t.length>2&&(n=G(t[1])),{columns:i,rows:n}},data:function(e){var t,i,n,r,o,s;for(e=pe.getter("ExecuteResponse.return.root",!0)(e),t=q(pe.getter("CellData.Cell",!0)(e)),i=[],n=pe.getter("['@CellOrdinal']"),r=pe.getter("Value['#text']"),o=pe.getter("FmtValue['#text']"),s=0;t.length>s;s++)i.push({value:r(t[s]),fmtValue:o(t[s]),ordinal:parseInt(n(t[s]),10)});return i},_mapSchema:function(e,t){var i,n,r,o,s;for(e=pe.getter("DiscoverResponse.return.root",!0)(e),i=q(pe.getter("row",!0)(e)),n=[],r=0;i.length>r;r++){o={};for(s in t)o[s]=t[s](i[r]);n.push(o)}return n},measures:function(e){return this._mapSchema(e,Z.measures)},kpis:function(e){return this._mapSchema(e,Z.kpis)},hierarchies:function(e){return this._mapSchema(e,Z.hierarchies)},levels:function(e){return this._mapSchema(e,Z.levels)},dimensions:function(e){return this._mapSchema(e,Z.dimensions)},cubes:function(e){return this._mapSchema(e,Z.cubes)},catalogs:function(e){return this._mapSchema(e,Z.catalogs)},members:function(e){return this._mapSchema(e,Z.members)}}),we(!0,pe.data,{PivotDataSource:je,XmlaTransport:X,XmlaDataReader:ee,PivotCubeBuilder:Ve,transports:{xmla:X},readers:{xmla:ee}}),te=function(e,t){if(!e)return null;for(var i=0,n=e.length;n>i;i++)if(e[i].field===t)return e[i];return null},ie=function(e,t){var i,n,r=[];for(i=0,n=e.length;n>i;i++)e[i].field!==t&&r.push(e[i]);return r},pe.ui.PivotSettingTarget=ge.extend({init:function(t,i){var n=this;ge.fn.init.call(n,t,i),n.element.addClass("k-pivot-setting"),n.dataSource=pe.data.PivotDataSource.create(i.dataSource),n._refreshHandler=e.proxy(n.refresh,n),n.dataSource.first(xe,n._refreshHandler),i.template||(n.options.template="<div data-"+pe.ns+'name="${data.name || data}">${data.name || data}'+(n.options.enabled?'<a class="k-button k-button-icon k-button-bare"><span class="k-icon k-setting-delete"></span></a>':"")+"</div>"),n.template=pe.template(n.options.template),n.emptyTemplate=pe.template(n.options.emptyTemplate),n._sortable(),n.element.on("click"+Ae,".k-button,.k-item",function(t){var i=e(t.target),r=i.closest("["+pe.attr("name")+"]").attr(pe.attr("name"));r&&(i.hasClass("k-setting-delete")?n.remove(r):n.options.sortable&&i[0]===t.currentTarget&&n.sort({field:r,dir:i.find(".k-i-sort-asc")[0]?"desc":"asc"}))}),(i.filterable||i.sortable)&&(n.fieldMenu=new fe.PivotFieldMenu(n.element,{messages:n.options.messages.fieldMenu,filter:".k-setting-fieldmenu",filterable:i.filterable,sortable:i.sortable,dataSource:n.dataSource})),n.refresh()},options:{name:"PivotSettingTarget",template:null,filterable:!1,sortable:!1,emptyTemplate:"<div class='k-empty'>${data}</div>",setting:"columns",enabled:!0,messages:{empty:"Drop Fields Here"}},setDataSource:function(e){this.dataSource.unbind(xe,this._refreshHandler),this.dataSource=this.options.dataSource=e,this.fieldMenu&&this.fieldMenu.setDataSource(e),e.first(xe,this._refreshHandler),this.refresh()},_sortable:function(){var e=this;e.options.enabled&&(this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,filter:">:not(.k-empty)",hint:e.options.hint,cursor:"move",start:function(e){e.item.focus().blur()},change:function(t){var i=t.item.attr(pe.attr("name"));"receive"==t.action?e.add(i):"remove"==t.action?e.remove(i):"sort"==t.action&&e.move(i,t.newIndex)}}).data("kendoSortable"))},_indexOf:function(e,t){var i,n,r=-1;for(i=0,n=t.length;n>i;i++)if($(t[i])===e){r=i;break}return r},_isKPI:function(e){return"kpi"===e.type||e.measure},validate:function(e){var t,i,n=2==e.type||"aggregator"in e||this._isKPI(e);return n?"measures"===this.options.setting:"measures"===this.options.setting?n:(t=this.dataSource[this.options.setting](),i=e.defaultHierarchy||e.uniqueName,!(this._indexOf(i,t)>-1)&&(t=this.dataSource["columns"===this.options.setting?"rows":"columns"](),!(this._indexOf(i,t)>-1)))},add:function(t){var i,n,r=this.dataSource[this.options.setting]();for(t=e.isArray(t)?t.slice(0):[t],i=0,n=t.length;n>i;i++)-1!==this._indexOf(t[i],r)&&(t.splice(i,1),i-=1,n-=1);t.length&&(r=r.concat(t),this.dataSource[this.options.setting](r))},move:function(e,t){var i=this.dataSource[this.options.setting](),n=this._indexOf(e,i);n>-1&&(e=i.splice(n,1)[0],i.splice(t,0,e),this.dataSource[this.options.setting](i))},remove:function(e){var t=this.dataSource[this.options.setting](),i=this._indexOf(e,t);i>-1&&(t.splice(i,1),this.dataSource[this.options.setting](t))},sort:function(e){var t=this.options.sortable,i=t===!0||t.allowUnsort,n=i&&"asc"===e.dir,r=this.dataSource.sort()||[],o=ie(r,e.field);n&&r.length!==o.length&&(e=null),e&&o.push(e),this.dataSource.sort(o)},refresh:function(){var e,i="",n=this.dataSource[this.options.setting](),r=n.length,o=0;if(r)for(;r>o;o++)e=n[o],e=e.name===t?{name:e}:e,i+=this.template(we({sortIcon:this._sortIcon(e.name)},e));else i=this.emptyTemplate(this.options.messages.empty);this.element.html(i)},destroy:function(){ge.fn.destroy.call(this),this.dataSource.unbind(xe,this._refreshHandler),this.element.off(Ae),this.sortable&&this.sortable.destroy(),this.fieldMenu&&this.fieldMenu.destroy(),this.element=null,this._refreshHandler=null},_sortIcon:function(e){var t=this.dataSource.sort(),i=te(t,$(e)),n="";return i&&(n="k-i-sort-"+i.dir),n}}),ne=ge.extend({init:function(i,n){var r,o,s=this;ge.fn.init.call(s,i,n),s._dataSource(),s._bindConfigurator(),s._wrapper(),s._createLayout(),s._columnBuilder=r=new de,s._rowBuilder=o=new ue,s._contentBuilder=new he,s._templates(),s.columnsHeader.add(s.rowsHeader).on("click","span.k-icon",function(){var i,n,a,l,c=e(this),d=r,u="expandColumn",h=c.attr(pe.attr("path")),p={axis:"columns",path:e.parseJSON(h)};c.parent().is("td")&&(d=o,u="expandRow",p.axis="rows"),n=c.hasClass(He),a=d.metadata[h],l=a.expanded===t,i=n?ze:Fe,s.trigger(i,p)||(d.metadata[h].expanded=!n,c.toggleClass(He,!n).toggleClass(Re,n),!n&&l?s.dataSource[u](p.path):s.refresh())}),s._scrollable(),s.options.autoBind&&s.dataSource.fetch(),pe.notify(s)},events:[Ie,Pe,Fe,ze],options:{name:"PivotGrid",autoBind:!0,reorderable:!0,filterable:!1,sortable:!1,height:null,columnWidth:100,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{measureFields:"Drop Data Fields Here",columnFields:"Drop Column Fields Here",rowFields:"Drop Rows Fields Here"}},_templates:function(){var e=this.options.columnHeaderTemplate,t=this.options.rowHeaderTemplate,i=this.options.dataCellTemplate,n=this.options.kpiStatusTemplate,r=this.options.kpiTrendTemplate;this._columnBuilder.template=pe.template(e||Ne,{useWithBlock:!!e}),this._contentBuilder.dataTemplate=pe.template(i||Le,{useWithBlock:!!i}),this._contentBuilder.kpiStatusTemplate=pe.template(n||$e,{useWithBlock:!!n}),this._contentBuilder.kpiTrendTemplate=pe.template(r||Oe,{useWithBlock:!!r}),this._rowBuilder.template=pe.template(t||Ne,{useWithBlock:!!t})},_bindConfigurator:function(){var t=this.options.configurator;t&&e(t).kendoPivotConfigurator("setDataSource",this.dataSource)},cellInfoByElement:function(t){return t=e(t),this.cellInfo(t.index(),t.parent("tr").index())},cellInfo:function(e,t){var i,n=this._contentBuilder,r=n.columnIndexes[e||0],o=n.rowIndexes[t||0];return r&&o?(i=o.index*n.rowLength+r.index,{columnTuple:r.tuple,rowTuple:o.tuple,measure:r.measure||o.measure,dataItem:this.dataSource.view()[i]}):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measuresTarget&&this.measuresTarget.setDataSource(e),this.rowsTarget&&this.rowsTarget.setDataSource(e),this.columnsTarget&&this.columnsTarget.setDataSource(e),this._bindConfigurator(),this.options.autoBind&&e.fetch()},setOptions:function(e){ge.fn.setOptions.call(this,e),this._templates()},_dataSource:function(){var t=this,i=t.options.dataSource;i=e.isArray(i)?{data:i}:i,t.dataSource&&this._refreshHandler?t.dataSource.unbind(xe,t._refreshHandler).unbind(Te,t._stateResetHandler).unbind(Se,t._progressHandler).unbind(Ce,t._errorHandler):(t._refreshHandler=e.proxy(t.refresh,t),t._progressHandler=e.proxy(t._requestStart,t),t._stateResetHandler=e.proxy(t._stateReset,t),t._errorHandler=e.proxy(t._error,t)),t.dataSource=pe.data.PivotDataSource.create(i).bind(xe,t._refreshHandler).bind(Se,t._progressHandler).bind(Te,t._stateResetHandler).bind(Ce,t._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_stateReset:function(){this._columnBuilder.reset(),this._rowBuilder.reset()},_wrapper:function(){var e=this.options.height;this.wrapper=this.element.addClass("k-widget k-pivot"),e&&this.wrapper.css("height",e)},_measureFields:function(){this.measureFields=e(Me).addClass("k-pivot-toolbar k-header k-settings-measures"),this.measuresTarget=this._createSettingTarget(this.measureFields,{setting:"measures",messages:{empty:this.options.messages.measureFields}})},_createSettingTarget:function(t,i){var n='<span tabindex="0" class="k-button" data-'+pe.ns+'name="${data.name}">${data.name}',r=i.sortable,o="";return r&&(o+="#if (data.sortIcon) {#",o+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',o+="#}#"),(i.filterable||r)&&(o+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),this.options.reorderable&&(o+='<span class="k-icon k-si-close k-setting-delete"></span>'),o&&(n+='<span class="k-field-actions">'+o+"</span>"),n+="</span>",new pe.ui.PivotSettingTarget(t,e.extend({template:n,emptyTemplate:'<span class="k-empty">${data}</span>',enabled:this.options.reorderable,dataSource:this.dataSource},i))},_initSettingTargets:function(){this.columnsTarget=this._createSettingTarget(this.columnFields,{connectWith:this.rowFields,setting:"columns",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.columnFields,fieldMenu:this.options.messages.fieldMenu}}),this.rowsTarget=this._createSettingTarget(this.rowFields,{connectWith:this.columnFields,setting:"rows",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.rowFields,fieldMenu:this.options.messages.fieldMenu}})},_createLayout:function(){var t=this,i=e(Be),n=i.find(".k-pivot-rowheaders"),r=i.find(".k-pivot-table"),o=e(Me).addClass("k-grid k-widget");t._measureFields(),t.columnFields=e(Me).addClass("k-pivot-toolbar k-header k-settings-columns"),t.rowFields=e(Me).addClass("k-pivot-toolbar k-header k-settings-rows"),t.columnsHeader=e('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />'),t.columnsHeader.parent().css("padding-right",pe.support.scrollbar()),t.rowsHeader=e('<div class="k-grid k-widget k-alt"/>'),t.content=e('<div class="k-grid-content" />'),n.append(t.measureFields),n.append(t.rowFields),n.append(t.rowsHeader),o.append(t.columnsHeader.parent()),o.append(t.content),r.append(t.columnFields),r.append(o),t.wrapper.append(i),t.columnsHeaderTree=new pe.dom.Tree(t.columnsHeader[0]),t.rowsHeaderTree=new pe.dom.Tree(t.rowsHeader[0]),t.contentTree=new pe.dom.Tree(t.content[0]),t._initSettingTargets()},_progress:function(e){pe.ui.progress(this.wrapper,e)},_resize:function(){var e=this.columnsHeader.children("table");this.content[0].firstChild&&(this._setSectionsWidth(),this._setSectionsHeight(),this._setContentWidth(),this._setContentHeight(),e.css("table-layout",De),clearTimeout(this._layoutTimeout),this._layoutTimeout=setTimeout(function(){e.css("table-layout","fixed")}))},_setSectionsWidth:function(){var e=this.rowsHeader,t=e.parent(".k-pivot-rowheaders").width(De),i=Math.max(this.measureFields.outerWidth(),this.rowFields.outerWidth());i=Math.max(e.children("table").width(),i),t.width(i)},_setSectionsHeight:function(){var e=this.measureFields.height(De).height(),t=this.columnFields.height(De).height(),i=this.rowFields.height(De).innerHeight(),n=this.columnsHeader.height(De).innerHeight(),r=i-this.rowFields.height(),o=t>e?t:e,s=n>i?n:i;this.measureFields.height(o),this.columnFields.height(o),this.rowFields.height(s-r),this.columnsHeader.height(s)},_setContentWidth:function(){var e=this.content.find("table"),t=this.content.width(),i=e.children("colgroup").children().length,n=100,r=i*this.options.columnWidth;r>t&&(n=Math.ceil(r/t*100)),e.add(this.columnsHeader.children("table")).css("min-width",n+"%")},_setContentHeight:function(){var e=this,i=e.content,n=e.rowsHeader,r=e.wrapper.innerHeight(),o=pe.support.scrollbar(),s=i[0].offsetHeight===i[0].clientHeight;if(e.wrapper.is(":visible")){if(!r)return s&&(o=0),n.height(i.height()-o),t;r-=e.columnFields.outerHeight(),r-=e.columnsHeader.outerHeight(),2*o>=r&&(r=2*o+1,s||(r+=o)),i.height(r),s&&(o=0),n.height(r-o)}},_axisMeasures:function(e){var t=[],i=this.dataSource,n=i.measures(),r=n.length>1||n[0]&&n[0].type;return i.measuresAxis()===e&&(0===i[e]().length||r)&&(t=n),t},refresh:function(){var e,t=this,i=t.dataSource,n=i.axes(),r=(n.columns||{}).tuples||[],o=(n.rows||{}).tuples||[],s=t._columnBuilder,a=t._rowBuilder,l={},c={};t.trigger(Ie,{action:"rebind"})||(s.measures=this._axisMeasures("columns"),t.columnsHeaderTree.render(s.build(r)),t.rowsHeaderTree.render(a.build(o)),l={indexes:s._indexes,measures:s.measures,metadata:s.metadata},c={indexes:a._indexes,measures:this._axisMeasures("rows"),metadata:a.metadata},t.contentTree.render(t._contentBuilder.build(i.view(),l,c)),t._resize(),t.touchScroller?t.touchScroller.contentResized():(e=pe.touchScroller(t.content),e&&e.movable&&(t.touchScroller=e,e.movable.bind("change",function(e){t.columnsHeader.scrollLeft(-e.sender.x),t.rowsHeader.scrollTop(-e.sender.y)}))),t._progress(!1),t.trigger(Pe))},_scrollable:function(){var t=this,i=t.columnsHeader,n=t.rowsHeader;t.content.scroll(function(){i.scrollLeft(this.scrollLeft),n.scrollTop(this.scrollTop)}),n.bind("DOMMouseScroll"+Ae+" mousewheel"+Ae,e.proxy(t._wheelScroll,t))},_wheelScroll:function(t){var i,n;t.ctrlKey||(i=pe.wheelDeltaY(t),n=this.content.scrollTop(),i&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Ae,!1),this.rowsHeader.scrollTop(n+-i),this.content.scrollTop(n+-i)))}}),re=pe.dom.element,oe=pe.dom.html,se=pe.dom.text,ae=function(e,t){return{maxChildren:0,children:0,maxMembers:0,members:0,measures:1,levelNum:e,parentMember:0!==t}},le=function(e,t){for(var i=[],n=0;t>=n;n++)i.push(e.members[n].name);return i},ce=function(e,t){for(var i="",n=0;t>=n;n++)i+=e.members[n].name;return i},de=me.extend({init:function(){this.measures=1,this.metadata={}},build:function(e){var t=this._tbody(e),i=this._colGroup();return[re("table",null,[i,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this._rowLength(),t=[],i=0;e>i;i++)t.push(re("col",null));return re("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.map={},this.rows=[],this.rootTuple=t,this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(re("tr",null,[re("th",null,[oe("&nbsp;")])])),re("tbody",null,this.rows)},_normalize:function(){for(var e,t,i,n,r,o=this.rows,s=o.length,a=0;s>a;a++)if(e=o[a],1!==e.rowSpan)for(n=e.children,i=0,t=n.length;t>i;i++)r=n[i],r.tupleAll&&(r.attr.rowSpan=e.rowSpan)},_rowIndex:function(e){for(var t=this.rows,i=t.length,n=0;i>n&&t[n]!==e;n++);return n},_rowLength:function(){var e=this.rows[0]?this.rows[0].children:[],t=e.length,i=0,n=0;if(t)for(;t>n;n++)i+=e[n].attr.colSpan||1;return i||(i=this.measures),i},_row:function(e,t,i){var n,r,o=this.rootTuple.members[t].name,s=e.members[t].levelNum,a=o+s,l=this.map,c=l[a];return c?(c.notFirst=!1,c.parentMember&&c.parentMember===i||(c.parentMember=i,c.colSpan=0)):(c=re("tr",null,[]),c.parentMember=i,c.colSpan=0,c.rowSpan=1,l[a]=c,n=l[o+(+s-1)],n&&(r=n.children,c.notFirst=!(!r[1]||-1!==r[1].attr.className.indexOf("k-alt"))||n.notFirst),this.rows.splice(this._rowIndex(n)+1,0,c)),c},_measures:function(e,t,i){var n,r,o,s=this.map,a=s.measureRow;for(a||(a=re("tr",null,[]),s.measureRow=a,this.rows.push(a)),r=0,o=e.length;o>r;r++)n=e[r],a.children.push(re("th",{className:"k-header"+(i||"")},[this._content(n,t)]));return o},_content:function(e,t){return oe(this.template({member:e,tuple:t}))},_cell:function(e,t){return re("th",{className:"k-header"+e},t)},_buildRows:function(e,i,n){var r,o,s,a,l,c,d,u,h,p,f=e.members,m=f[i],g=f[i+1],v=[],y=0;if(m.measure)return this._measures(m.children,e),t;if(u=pe.stringify(le(e,i)),r=this._row(e,i,n),s=m.children,a=s.length,p=this.metadata[u],p||(this.metadata[u]=p=ae(+m.levelNum,i)),this._indexes.push({path:u,tuple:e}),m.hasChildren&&(p.expanded===!1&&(a=0,p.children=0),d={className:"k-icon "+(a?He:Re)},d[pe.attr("path")]=u,v.push(re("span",d))),v.push(this._content(m,e)),l=this._cell(r.notFirst?" k-first":"",v),r.children.push(l),r.colSpan+=1,a){for(c=this._cell(" k-alt",[this._content(m,e)]),r.children.push(c);a>y;y++)o=this._buildRows(s[y],i,m);h=o.colSpan,l.attr.colSpan=h,p.children=h,p.members=1,r.colSpan+=h,r.rowSpan=o.rowSpan+1,g&&(h=g.measure?this._measures(g.children,e," k-alt"):this._buildRows(e,i+1).colSpan,c.attr.colSpan=h,h-=1,p.members+=h,r.colSpan+=h)}else g&&(h=g.measure?this._measures(g.children,e):this._buildRows(e,i+1).colSpan,p.members=h,h>1&&(l.attr.colSpan=h,r.colSpan+=h-1));return p.children>p.maxChildren&&(p.maxChildren=p.children),p.members>p.maxMembers&&(p.maxMembers=p.members),(c||l).tupleAll=!0,r}}),ue=me.extend({init:function(){this.metadata={}},build:function(e){var t=this._tbody(e),i=this._colGroup();return[re("table",null,[i,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this.rows[0].children.length,t=[],i=0;e>i;i++)t.push(re("col",null));return re("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.rootTuple=t,this.rows=[],this.map={},this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(re("tr",null,[re("td",null,[oe("&nbsp;")])])),re("tbody",null,this.rows)},_normalize:function(){for(var e,t,i,n,r=this.rows,o=r.length,s=0,a=this.rootTuple.members,l=a[0].name,c=a.length,d=0,u=this.map;o>s;s++)for(e=r[s],d=0;c>d;d++)i=this[a[d].name],t=e.colSpan["dim"+d],t&&i>t.levelNum&&(t.attr.colSpan=i-t.levelNum+1);e=u[l],n=u[l+"all"],e&&(e.children[0].attr.className="k-first"),n&&(n.children[0].attr.className+=" k-first")},_row:function(e){var t=re("tr",null,e);return t.rowSpan=1,t.colSpan={},this.rows.push(t),t},_content:function(e,t){return oe(this.template({member:e,tuple:t}))},_buildRows:function(e,t){var i,n,r,o,s,a,l,c,d,u=this.map,h=e.members,p=h[t],f=h[t+1],m=p.children,g=m.length,v=+p.levelNum+1,y=this.rootTuple.members[t].name,_=le(e,t-1).join(""),b=_+(p.parentName||""),w=u[b+"all"]||u[b],k=[];if(!w||w.hasChild?w=this._row():w.hasChild=!0,p.measure){for(c={className:w.allCell?"k-grid-footer":""},w.children.push(re("td",c,[this._content(m[0],e)])),w.rowSpan=g,d=1;g>d;d++)this._row([re("td",c,[this._content(m[d],e)])]);return w}if(u[_+p.name]=w,i=pe.stringify(le(e,t)),o=this.metadata[i],o||(this.metadata[i]=o=ae(v-1,t)),this._indexes.push({path:i,tuple:e}),p.hasChildren&&(o.expanded===!1&&(g=0,o.children=0),s={className:"k-icon "+(g?He:Re)},s[pe.attr("path")]=i,k.push(re("span",s))),k.push(this._content(p,e)),l=re("td",{className:w.allCell&&!g?"k-grid-footer":""},k),l.levelNum=v,w.children.push(l),w.colSpan["dim"+t]=l,(!this[y]||v>this[y])&&(this[y]=v),g){for(w.allCell=!1,w.hasChild=!1,d=0;g>d;d++)n=this._buildRows(m[d],t),w!==n&&(w.rowSpan+=n.rowSpan);w.rowSpan>1&&(l.attr.rowSpan=w.rowSpan),o.children=w.rowSpan,a=re("td",{className:"k-grid-footer"},[this._content(p,e)]),a.levelNum=v,r=this._row([a]),r.colSpan["dim"+t]=a,r.allCell=!0,u[_+p.name+"all"]=r,f&&(n=this._buildRows(e,t+1),a.attr.rowSpan=n.rowSpan),w.rowSpan+=r.rowSpan,o.members=r.rowSpan}else f&&(w.hasChild=!1,this._buildRows(e,t+1),(a||l).attr.rowSpan=w.rowSpan,o.members=w.rowSpan);return o.children>o.maxChildren&&(o.maxChildren=o.children),o.members>o.maxMembers&&(o.maxMembers=o.members),w}}),he=me.extend({init:function(){this.columnAxis={},this.rowAxis={}},build:function(e,i,n){var r,o,s=i.indexes[0],a=i.metadata[s?s.path:t];return this.columnAxis=i,this.rowAxis=n,this.data=e,this.rowLength=a?a.maxChildren+a.maxMembers:i.measures.length||1,this.rowLength||(this.rowLength=1),r=this._tbody(),o=this._colGroup(),[re("table",null,[o,r])]},_colGroup:function(){var e=this.columnAxis.measures.length||1,t=[],i=0;for(this.rows[0]&&(e=this.rows[0].children.length);e>i;i++)t.push(re("col",null));return re("colgroup",null,t)},_tbody:function(){return this.rows=[],this.data[0]?(this.columnIndexes=this._indexes(this.columnAxis),this.rowIndexes=this._indexes(this.rowAxis),this._buildRows()):this.rows.push(re("tr",null,[re("td",null,[oe("&nbsp;")])])),re("tbody",null,this.rows)},_indexes:function(e){var i,n,r,o,s,a=[],l=e.indexes,c=e.metadata,d=e.measures,u=d.length||1,h=0,p=0,f=0,m=l.length;if(!m){for(r=0;u>r;r++)a[r]={index:r,measure:d[r],tuple:null};return a}for(;m>f;f++){if(i=l[f],n=c[i.path],o=n.children+n.members,s=0,o&&(o-=u),n.expanded===!1&&n.children!==n.maxChildren&&(s=n.maxChildren),n.parentMember&&0===n.levelNum&&(o=-1),o>-1){for(r=0;u>r;r++)a[o+p+r]={children:o,index:h,measure:d[r],tuple:i.tuple},h+=1;for(;a[p]!==t;)p+=1}h+=s}return a},_buildRows:function(){for(var e=this.rowIndexes,t=e.length,i=0;t>i;i++)this.rows.push(this._buildRow(e[i]))},_buildRow:function(e){for(var t,i,n,r,o,s,a=e.index*this.rowLength,l=this.columnIndexes,c=l.length,d=[],u=0;c>u;u++)t=l[u],r={},t.children&&(r.className="k-alt"),n="",o=this.data[a+t.index],s=t.measure||e.measure,i={columnTuple:t.tuple,rowTuple:e.tuple,measure:s,dataItem:o},""!==o.value&&s&&s.type&&("status"===s.type?n=this.kpiStatusTemplate(i):"trend"===s.type&&(n=this.kpiTrendTemplate(i))),n||(n=this.dataTemplate(i)),d.push(re("td",r,[oe(n)]));return r={},e.children&&(r.className="k-grid-footer"),re("tr",r,d)}}),fe.plugin(ne)}(window.kendo.jQuery),function(e,t){function i(e){return function(t){var i=t.children(".k-animation-container");return i.length||(i=t),i.children(e)}}function n(e){return f.template(e,{useWithBlock:!1})}function r(e){return e.find("> div .k-checkbox [type=checkbox]")}function o(e){return function(t,i){i=i.closest(j);var n,r=i.parent();return r.parent().is("li")&&(n=r.parent()),this._dataSourceMove(t,r,n,function(t,n){return this._insert(t.data(),n,i.index()+e)})}}function s(t,i){for(var n;t&&"ul"!=t.nodeName.toLowerCase();)n=t,t=t.nextSibling,3==n.nodeType&&(n.nodeValue=e.trim(n.nodeValue)),p.test(n.className)?i.insertBefore(n,i.firstChild):i.appendChild(n)}function a(t){var i=t.children("div"),n=t.children("ul"),r=i.children(".k-icon"),o=t.children(":checkbox"),a=i.children(".k-in");t.hasClass("k-treeview")||(i.length||(i=e("<div />").prependTo(t)),!r.length&&n.length?r=e("<span class='k-icon' />").prependTo(i):n.length&&n.children().length||(r.remove(),n.remove()),o.length&&e("<span class='k-checkbox' />").appendTo(i).append(o),a.length||(a=t.children("a").eq(0).addClass("k-in"),a.length||(a=e("<span class='k-in' />")),a.appendTo(i),i.length&&s(i[0].nextSibling,a[0])))}function l(e){var t=this;t.treeview=e,t.hovered=e.element,t._draggable=new m.Draggable(e.element,{filter:"div:not(.k-state-disabled) .k-in",hint:function(t){return e.templates.dragClue({item:e.dataItem(t),treeview:e.options})},cursorOffset:{left:10,top:f.support.mobileOS?-40/f.support.zoomLevel():10},dragstart:k(t.dragstart,t),dragcancel:k(t.dragcancel,t),drag:k(t.drag,t),dragend:k(t.dragend,t),$angular:e.options.$angular})}var c,d,u,h,p,f=window.kendo,m=f.ui,g=f.data,v=e.extend,y=f.template,_=e.isArray,b=m.Widget,w=g.HierarchicalDataSource,k=e.proxy,x=f.keys,C=".kendoTreeView",S="select",T="check",D="navigate",M="expand",A="change",E="error",I="checked",P="indeterminate",F="collapse",z="dragstart",H="drag",R="drop",N="dragend",$="dataBound",O="click",L="visibility",B="undefined",U="k-state-hover",V="k-treeview",W=":visible",j=".k-item",q="string",G="aria-selected",Y="aria-disabled",Q={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},K=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&typeof e.nodeName===q};d=i(".k-group"),u=i(".k-group,.k-content"),h=function(e){return e.children("div").children(".k-icon")},p=/k-sprite/,c=f.ui.DataBoundWidget.extend({init:function(e,t){var i,n,r=this,o=!1,s=t&&!!t.dataSource;_(t)&&(i=!0,t={dataSource:t}),t&&typeof t.loadOnDemand==B&&_(t.dataSource)&&(t.loadOnDemand=!1),b.prototype.init.call(r,e,t),e=r.element,t=r.options,n=e.is("ul")&&e||e.hasClass(V)&&e.children("ul"),o=!s&&n.length,o&&(t.dataSource.list=n),r._animation(),r._accessors(),r._templates(),e.hasClass(V)?(r.wrapper=e,r.root=e.children("ul").eq(0)):(r._wrapper(),n&&(r.root=e,r._group(r.wrapper))),r._tabindex(),r.root.attr("role","tree"),r._dataSource(o),r._attachEvents(),r._dragging(),o?r._syncHtmlAndDataSource():t.autoBind&&(r._progress(!0),r.dataSource.fetch()),t.checkboxes&&t.checkboxes.checkChildren&&r.updateIndeterminate(),r.element[0].id&&(r._ariaId=f.format("{0}_tv_active",r.element[0].id)),f.notify(r)},_attachEvents:function(){var t=this,i=".k-in:not(.k-state-selected,.k-state-disabled)",n="mouseenter";t.wrapper.on(n+C,".k-in.k-state-selected",function(e){e.preventDefault()}).on(n+C,i,function(){e(this).addClass(U)}).on("mouseleave"+C,i,function(){e(this).removeClass(U)}).on(O+C,i,k(t._click,t)).on("dblclick"+C,".k-in:not(.k-state-disabled)",k(t._toggleButtonClick,t)).on(O+C,".k-plus,.k-minus",k(t._toggleButtonClick,t)).on("keydown"+C,k(t._keydown,t)).on("focus"+C,k(t._focus,t)).on("blur"+C,k(t._blur,t)).on("mousedown"+C,".k-in,.k-checkbox :checkbox,.k-plus,.k-minus",k(t._mousedown,t)).on("change"+C,".k-checkbox :checkbox",k(t._checkboxChange,t)).on("click"+C,".k-checkbox :checkbox",k(t._checkboxClick,t)).on("click"+C,".k-request-retry",k(t._retryRequest,t)).on("click"+C,function(i){e(i.target).is(":kendoFocusable")||t.focus()})},_checkboxClick:function(t){var i=e(t.target);i.data(P)&&(i.data(P,!1).prop(P,!1).prop(I,!0),this._checkboxChange(t))},_syncHtmlAndDataSource:function(e,t){var i,n,o,s,a,l,c,d;for(e=e||this.root,t=t||this.dataSource,i=t.view(),n=f.attr("uid"),o=f.attr("expanded"),s=this.options.checkboxes,a=e.children("li"),l=0;a.length>l;l++)d=i[l],c=a.eq(l),c.attr("role","treeitem").attr(n,d.uid),d.expanded="true"===c.attr(o),s&&(d.checked=r(c).prop(I)),this._syncHtmlAndDataSource(c.children("ul"),d.children)},_animation:function(){var e=this.options,t=e.animation;t===!1?t={expand:{effects:{}},collapse:{hide:!0,effects:{}}}:t.collapse&&"effects"in t.collapse||(t.collapse=v({reverse:!0},t.expand)),v(t.collapse,{hide:!0}),e.animation=t},_dragging:function(){var e=this.options.dragAndDrop,t=this.dragging;e&&!t?this.dragging=new l(this):!e&&t&&(t.destroy(),this.dragging=null)},_templates:function(){var e=this,t=e.options,i=k(e._fieldAccessor,e);t.template&&typeof t.template==q?t.template=y(t.template):t.template||(t.template=n("# var text = "+i("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")),e._checkboxes(),e.templates={wrapperCssClass:function(e,t){
var i="k-item",n=t.index;return e.firstLevel&&0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),i},cssClass:function(e,t){var i="",n=t.index,r=e.length-1;return e.firstLevel&&0===n&&(i+="k-top "),i+=0===n&&n!=r?"k-top":n==r?"k-bot":"k-mid"},textClass:function(e){var t="k-in";return e.enabled===!1&&(t+=" k-state-disabled"),e.selected===!0&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return t+=e.expanded!==!0?" k-plus":" k-minus",e.enabled===!1&&(t+="-disabled"),t},groupAttributes:function(e){var t="";return e.firstLevel||(t="role='group'"),t+(e.expanded!==!0?" style='display:none'":"")},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t},dragClue:n("<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />#= data.treeview.template(data) #</div>"),group:n("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"),itemContent:n("# var imageUrl = "+i("imageUrl")+"(data.item); ## var spriteCssClass = "+i("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #' /># } ##= data.treeview.template(data) #"),itemElement:n("# var item = data.item, r = data.r; ## var url = "+i("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #' role='presentation' /># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag#  class='#= r.textClass(item) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"),item:n("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' "+f.attr("uid")+"='#= item.uid #' aria-selected='#= item.selected ? \"true\" : \"false \" #' #=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= r.itemElement(data) #</li>"),loading:n("<div class='k-icon k-loading' /> #: data.messages.loading #"),retry:n("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>")}},items:function(){return this.element.find(".k-item div:first-child")},setDataSource:function(e){var t=this.options;t.dataSource=e,this._dataSource(),this.dataSource.fetch(),t.checkboxes&&t.checkboxes.checkChildren&&this.updateIndeterminate()},_bindDataSource:function(){this._refreshHandler=k(this.refresh,this),this._errorHandler=k(this._error,this),this.dataSource.bind(A,this._refreshHandler),this.dataSource.bind(E,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(A,this._refreshHandler),e.unbind(E,this._errorHandler))},_dataSource:function(e){function t(e){for(var i=0;e.length>i;i++)e[i]._initChildren(),e[i].children.fetch(),t(e[i].children.view())}var i=this,n=i.options,r=n.dataSource;r=_(r)?{data:r}:r,i._unbindDataSource(),r.fields||(r.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),i.dataSource=r=w.create(r),e&&(r.fetch(),t(r.view())),i._bindDataSource()},events:[z,H,R,N,$,M,F,S,A,D,T],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:!1,checkboxes:!1,autoBind:!0,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var e,t,i,n=this,r=n.options,o=n.element;for(e in Q)t=r[Q[e]],i=o.attr(f.attr(e+"-field")),!t&&i&&(t=i),t||(t=e),_(t)||(t=[t]),r[Q[e]]=t},_fieldAccessor:function(t){var i=this.options[Q[t]],n=i.length,r="(function(item) {";return 0===n?r+="return item['"+t+"'];":(r+="var levels = ["+e.map(i,function(e){return"function(d){ return "+f.expr(e)+"}"}).join(",")+"];",r+="return levels[Math.min(item.level(), "+n+"-1)](item)"),r+="})"},setOptions:function(e){b.fn.setOptions.call(this,e),this._animation(),this._dragging(),this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(j)[0]})},_setChecked:function(t,i){if(t&&e.isFunction(t.view))for(var n=0,r=t.view();r.length>n;n++)r[n][I]=i,r[n].children&&this._setChecked(r[n].children,i)},_setIndeterminate:function(e){var t,i,n,o=d(e),s=!0;if(o.length&&(t=r(o.children()),i=t.length)){if(i>1){for(n=1;i>n;n++)if(t[n].checked!=t[n-1].checked||t[n].indeterminate||t[n-1].indeterminate){s=!1;break}}else s=!t[0].indeterminate;return r(e).data(P,!s).prop(P,!s).prop(I,s&&t[0].checked)}},updateIndeterminate:function(e){var t,i,n;if(e=e||this.wrapper,t=d(e).children(),t.length){for(i=0;t.length>i;i++)this.updateIndeterminate(t.eq(i));n=this._setIndeterminate(e),n&&n.prop(I)&&(this.dataItem(e).checked=!0)}},_bubbleIndeterminate:function(e){if(e.length){var t,i=this.parent(e);i.length&&(this._setIndeterminate(i),t=i.children("div").find(".k-checkbox :checkbox"),t.prop(P)===!1?this.dataItem(i).set(I,t.prop(I)):this.dataItem(i).checked=!1,this._bubbleIndeterminate(i))}},_checkboxChange:function(t){var i=e(t.target),n=i.prop(I),r=i.closest(j);this.dataItem(r).set(I,n),this._trigger(T,r)},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(j))},_mousedown:function(t){var i=e(t.currentTarget).closest(j);this._clickTarget=i,this.current(i)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var t=this.select(),i=this._clickTarget;f.support.touch||(i&&i.length&&(t=i),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(e())),this.current(t))},focus:function(){var e,t=this.wrapper,i=t[0],n=[],r=[],o=document.documentElement;do i=i.parentNode,i.scrollHeight>i.clientHeight&&(n.push(i),r.push(i.scrollTop));while(i!=o);for(t.focus(),e=0;n.length>e;e++)n[e].scrollTop=r[e]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){var i,n,r=/\bk-treeview\b/,o=/\bk-item\b/;typeof t==q&&(t=this.element.find(t)),K(t)||(t=t[0]),n=o.test(t.className);do t=t.parentNode,o.test(t.className)&&(n?i=t:n=!0);while(!r.test(t.className)&&!i);return e(i)},_nextVisible:function(e){function t(e){for(;e.length&&!e.next().length;)e=n.parent(e);return e.next().length?e.next():e}var i,n=this,r=n._expanded(e);return e.length&&e.is(":visible")?r?(i=d(e).children().first(),i.length||(i=t(e))):i=t(e):i=n.root.children().eq(0),n._enabled(i)||(i=n._nextVisible(i)),i},_previousVisible:function(e){var t,i,n=this;if(!e.length||e.prev().length)for(i=e.length?e.prev():n.root.children().last();n._expanded(i)&&(t=d(i).children().last(),t.length);)i=t;else i=n.parent(e)||e;return n._enabled(i)||(i=n._previousVisible(i)),i},_keydown:function(i){var n,r=this,o=i.keyCode,s=r.current(),a=r._expanded(s),l=s.find(".k-checkbox:first :checkbox"),c=f.support.isRtl(r.element);i.target==i.currentTarget&&(!c&&o==x.RIGHT||c&&o==x.LEFT?a?n=r._nextVisible(s):r.expand(s):!c&&o==x.LEFT||c&&o==x.RIGHT?a?r.collapse(s):(n=r.parent(s),r._enabled(n)||(n=t)):o==x.DOWN?n=r._nextVisible(s):o==x.UP?n=r._previousVisible(s):o==x.HOME?n=r._nextVisible(e()):o==x.END?n=r._previousVisible(e()):o==x.ENTER?s.find(".k-in:first").hasClass("k-state-selected")||r._trigger(S,s)||r.select(s):o==x.SPACEBAR&&l.length&&(l.prop(I,!l.prop(I)).data(P,!1).prop(P,!1),r._checkboxChange({target:l}),n=s),n&&(i.preventDefault(),s[0]!=n[0]&&(r._trigger(D,n),r.current(n))))},_click:function(t){var i,n=this,r=e(t.currentTarget),o=u(r.closest(j)),s=r.attr("href");i=s?"#"==s||s.indexOf("#"+this.element.id+"-")>=0:o.length&&!o.children().length,i&&t.preventDefault(),r.hasClass(".k-state-selected")||n._trigger(S,r)||n.select(r)},_wrapper:function(){var e,t,i=this,n=i.element,r="k-widget k-treeview";n.is("ul")?(e=n.wrap("<div />").parent(),t=n):(e=n,t=e.children("ul").eq(0)),i.wrapper=e.addClass(r),i.root=t},_group:function(e){var t=this,i=e.hasClass(V),n={firstLevel:i,expanded:i||t._expanded(e)},r=e.children("ul");r.addClass(t.templates.groupCssClass(n)).css("display",n.expanded?"":"none"),t._nodes(r,n)},_nodes:function(t,i){var n,r=this,o=t.children("li");i=v({length:o.length},i),o.each(function(t,o){o=e(o),n={index:t,expanded:r._expanded(o)},a(o),r._updateNodeClasses(o,i,n),r._group(o)})},_checkboxes:function(){var e,t=this.options,i=t.checkboxes;i&&(e="<input type='checkbox' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #",i.name&&(e+=" name='"+i.name+"'"),e+=" />",i=v({template:e},t.checkboxes),typeof i.template==q&&(i.template=y(i.template)),t.checkboxes=i)},_updateNodeClasses:function(e,t,i){var n=e.children("div"),r=e.children("ul"),o=this.templates;e.hasClass("k-treeview")||(i=i||{},i.expanded=typeof i.expanded!=B?i.expanded:this._expanded(e),i.index=typeof i.index!=B?i.index:e.index(),i.enabled=typeof i.enabled!=B?i.enabled:!n.children(".k-in").hasClass("k-state-disabled"),t=t||{},t.firstLevel=typeof t.firstLevel!=B?t.firstLevel:e.parent().parent().hasClass(V),t.length=typeof t.length!=B?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(o.wrapperCssClass(t,i)),n.removeClass("k-top k-mid k-bot").addClass(o.cssClass(t,i)),n.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(o.textClass(i)),(r.length||"true"==e.attr("data-hasChildren"))&&(n.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(o.toggleButtonClass(i)),r.addClass("k-group")))},_processNodes:function(t,i){var n=this;n.element.find(t).each(function(t,r){i.call(n,t,e(r).closest(j))})},dataItem:function(t){var i=e(t).closest(j).attr(f.attr("uid")),n=this.dataSource;return n&&n.getByUid(i)},_insertNode:function(t,i,n,r,o){var s,l,c,u,h=this,p=d(n),f=p.children().length+1,m={firstLevel:n.hasClass(V),expanded:!o,length:f},g="",v=function(e,t){e.appendTo(t)};for(c=0;t.length>c;c++)u=t[c],u.index=i+c,g+=h._renderItem({group:m,item:u});if(l=e(g),l.length){for(h.angular("compile",function(){return{elements:l.get(),data:t.map(function(e){return{dataItem:e}})}}),p.length||(p=e(h._renderGroup({group:m})).appendTo(n)),r(l,p),n.hasClass("k-item")&&(a(n),h._updateNodeClasses(n)),h._updateNodeClasses(l.prev().first()),h._updateNodeClasses(l.next().last()),c=0;t.length>c;c++)u=t[c],u.hasChildren&&(s=u.children.data(),s.length&&h._insertNode(s,u.index,l.eq(c),v,!h._expanded(l.eq(c))));return l}},_updateNode:function(t,i){function n(){p=!0}function r(e,t){e.find(".k-checkbox :checkbox").prop(I,t).data(P,!1).prop(P,!1)}var o,s,a,l,c,d=this,h={treeview:d.options,item:a},p=!1;if("selected"==t)a=i[0],s=d.findByUid(a.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",a[t]).end(),a[t]?(d.current(s),s.attr(G,!0)):s.attr(G,!1);else for(e.inArray(t,d.options.dataTextField)>=0?p=!0:(h.item=i[0],h.item.bind("get",n),d.templates.itemContent(h),h.item.unbind("set",n)),o=0;i.length>o;o++)h.item=a=i[o],("spriteCssClass"==t||"imageUrl"==t||p)&&d.findByUid(a.uid).find(">div>.k-in").html(d.templates.itemContent(h)),t==I?(s=d.findByUid(a.uid),l=a[t],r(s.children("div"),l),d.options.checkboxes.checkChildren&&(r(s.children(".k-group"),l),d._setChecked(a.children,l),d._bubbleIndeterminate(s))):"expanded"==t?d._toggle(d.findByUid(a.uid),a,a[t]):"enabled"==t&&(s=d.findByUid(a.uid),s.find(".k-checkbox :checkbox").prop("disabled",!a[t]),c=!u(s).is(W),s.removeAttr(Y),a[t]||(a.selected&&a.set("selected",!1),a.expanded&&a.set("expanded",!1),c=!0,s.attr(G,!1).attr(Y,!0)),d._updateNodeClasses(s,{},{enabled:a[t],expanded:!c}))},_appendItems:function(e,t,i){var n=d(i),r=n.children(),o=!this._expanded(i);typeof e==B&&(e=r.length),this._insertNode(t,e,i,function(t,i){e>=r.length?t.appendTo(i):t.insertBefore(r.eq(e))},o),this._expanded(i)&&(this._updateNodeClasses(i),d(i).css("display","block"))},refresh:function(i){var n,r,o,s,l,c,u=this.wrapper,h=i.node,p=i.action,f=i.items,g=this.options,v=g.loadOnDemand,y=g.checkboxes&&g.checkboxes.checkChildren;if(i.field){if(!f[0]||!f[0].level)return;return this._updateNode(i.field,f)}if(h&&(u=this.findByUid(h.uid),this._progress(u,!1)),y&&"remove"!=p){for(r=!1,n=0;f.length>n;n++)if("checked"in f[n]){r=!0;break}if(!r&&h&&h.checked)for(n=0;f.length>n;n++)f[n].checked=!0}if("add"==p)this._appendItems(i.index,f,u);else if("remove"==p)this._remove(this.findByUid(f[0].uid),!1);else if(h)if(d(u).empty(),f.length)for(this._appendItems(i.index,f,u),o=d(u).children(),v&&y&&this._bubbleIndeterminate(o.last()),n=0;o.length>n;n++)s=o.eq(n),this.trigger("itemChange",{item:s,data:this.dataItem(s),ns:m});else a(u),this.trigger("itemChange",{item:u,data:h,ns:m});else l=this._renderGroup({items:f,group:{firstLevel:!0,expanded:!0}}),this.root.length?(this._angularItems("cleanup"),c=e(l),this.root.attr("class",c.attr("class")).html(c.html())):this.root=this.wrapper.html(l).children("ul"),this.root.attr("role","tree"),this._angularItems("compile");for(n=0;f.length>n;n++)(!v||f[n].expanded)&&f[n].load();this.trigger($,{node:h?u:t})},_error:function(e){var t=e.node&&this.findByUid(e.node.uid),i=this.templates.retry({messages:this.options.messages});t?(this._progress(t,!1),this._expanded(t,!1),h(t).addClass("k-i-refresh"),e.node.loaded(!1)):(this._progress(!1),this.element.html(i))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=2!=arguments.length||!!t,this._processNodes(e,function(e,i){this.dataItem(i).set("enabled",t)})},current:function(i){var n=this,r=n._current,o=n.element,s=n._ariaId;return arguments.length>0&&i&&i.length?(r&&(r[0].id===s&&r.removeAttr("id"),r.find(".k-in:first").removeClass("k-state-focused")),r=n._current=e(i,o).closest(j),r.find(".k-in:first").addClass("k-state-focused"),s=r[0].id||s,s&&(n.wrapper.removeAttr("aria-activedescendant"),r.attr("id",s),n.wrapper.attr("aria-activedescendant",s)),t):(r||(r=n._nextVisible(e())),r)},select:function(i){var n=this,r=n.element;return arguments.length?(i=e(i,r).closest(j),r.find(".k-state-selected").each(function(){var e=n.dataItem(this);e.set("selected",!1),delete e.selected}),i.length&&n.dataItem(i).set("selected",!0),n.trigger(A),t):r.find(".k-state-selected").closest(j)},_toggle:function(e,t,i){var n,r,o=this.options,s=u(e),a=i?"expand":"collapse";if(!s.data("animating")&&!this._trigger(a,e))if(this._expanded(e,i),n=t&&t.loaded(),r=!s.children().length,!i||n&&!r){if(this._updateNodeClasses(e,{},{expanded:i}),s.css("display")==(i?"block":"none"))return;i||s.css("height",s.height()).css("height"),s.kendoStop(!0,!0).kendoAnimate(v({reset:!0},o.animation[a],{complete:function(){i&&s.css("height","")}}))}else o.loadOnDemand&&this._progress(e,!0),s.remove(),t.load()},toggle:function(t,i){t=e(t),h(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled")&&(1==arguments.length&&(i=!this._expanded(t)),this._expanded(t,i))},destroy:function(){var e=this;b.fn.destroy.call(e),e.wrapper.off(C),e._unbindDataSource(),e.dragging&&e.dragging.destroy(),f.destroy(e.element),e.root=e.wrapper=e.element=null},_expanded:function(e,i){var n=f.attr("expanded"),r=this.dataItem(e);return 1==arguments.length?"true"===e.attr(n)||r&&r.expanded:(u(e).data("animating")||(r&&(r.set("expanded",i),i=r.expanded),i?(e.attr(n,"true"),e.attr("aria-expanded","true")):(e.removeAttr(n),e.attr("aria-expanded","false"))),t)},_progress:function(e,t){var i=this.element,n=this.templates.loading({messages:this.options.messages});1==arguments.length?(t=e,t?i.html(n):i.empty()):h(e).toggleClass("k-loading",t).removeClass("k-i-refresh")},text:function(e,i){var n=this.dataItem(e),r=this.options[Q.text],o=n.level(),s=r.length,a=r[Math.min(o,s-1)];return i?(n.set(a,i),t):n[a]},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(e,t,i,n){var r,o=this._objectOrSelf(i||t),s=o.dataSource;return i&&i[0]!=o.element[0]&&(r=o.dataItem(i),r.loaded()||(o._progress(i,!0),r.load()),i!=this.root&&(s=r.children,s&&s instanceof w||(r._initChildren(),r.loaded(!0),s=r.children))),e=this._toObservableData(e),n.call(this,s,e)},_toObservableData:function(t){var i,n,r=t;return(t instanceof window.jQuery||K(t))&&(i=this._objectOrSelf(t).dataSource,n=e(t).attr(f.attr("uid")),r=i.getByUid(n),r&&(r=i.remove(r))),r},_insert:function(e,t,i){t instanceof f.data.ObservableArray?t=t.toJSON():_(t)||(t=[t]);var n=e.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),e.splice.apply(e,[i,0].concat(t)),this.findByUid(e[i].uid)},insertAfter:o(1),insertBefore:o(0),append:function(t,i,n){var r=this,o=r.root;return n=n||e.noop,i&&(o=d(i)),r._dataSourceMove(t,o,i,function(e,t){function o(){i&&r._expanded(i,!0);var n=e.data(),o=Math.max(n.length,0);return r._insert(n,t,o)}var s;return e.data()?(s=o(),n(s),s):(e.one(A,function(){n(o())}),null)})},_remove:function(t,i){var n,r,o,s=this;return t=e(t,s.element),this.angular("cleanup",function(){return{elements:t.get()}}),n=t.parent().parent(),r=t.prev(),o=t.next(),t[i?"detach":"remove"](),n.hasClass("k-item")&&(a(n),s._updateNodeClasses(n)),s._updateNodeClasses(r),s._updateNodeClasses(o),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(i,n){return e(n).text()==t}).closest(j)},findByUid:function(e){return this.element.find(".k-item["+f.attr("uid")+"="+e+"]")},expandPath:function(i,n){var r,o,s;for(i=i.slice(0),r=this,o=this.dataSource,s=o.get(i[0]),n=n||e.noop;i.length>0&&(s.expanded||s.loaded());)s.set("expanded",!0),i.shift(),s=o.get(i[0]);return i.length?(o.bind("change",function(e){var t=e.node&&e.node.id;t&&t===i[0]&&(i.shift(),i.length?o.get(i[0]).set("expanded",!0):n.call(r))}),s.set("expanded",!0),t):n.call(r)},_parents:function(e){for(var t=e&&e.parentNode(),i=[];t;)i.push(t),t=t.parentNode();return i},expandTo:function(e){var t,i;for(e instanceof f.data.Node||(e=this.dataSource.get(e)),t=this._parents(e),i=0;t.length>i;i++)t[i].set("expanded",!0)},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var i="",n=0,r=e.items,o=r?r.length:0,s=e.group;for(s.length=o;o>n;n++)e.group=s,e.item=r[n],e.item.index=n,i+=t._renderItem(e);return i},e.r=t.templates,t.templates.group(e)}}),l.prototype={_removeTouchHover:function(){var e=this;f.support.touch&&e.hovered&&(e.hovered.find("."+U).removeClass(U),e.hovered=!1)},_hintStatus:function(i){var n=this._draggable.hint.find(".k-drag-status")[0];return i?(n.className="k-icon k-drag-status "+i,t):e.trim(n.className.replace(/k-(icon|drag-status)/g,""))},dragstart:function(t){var i=this,n=i.treeview,r=i.sourceNode=t.currentTarget.closest(j);n.trigger(z,{sourceNode:r[0]})&&t.preventDefault(),i.dropHint=e("<div class='k-drop-hint' />").css(L,"hidden").appendTo(n.element)},drag:function(t){var i,n,r,o,s,a,l,c,d,u,h=this,p=h.treeview,m=h.sourceNode,g=h.dropTarget=e(f.eventTarget(t)),v=g.closest(".k-treeview");v.length?e.contains(m[0],g[0])?i="k-denied":(i="k-insert-middle",n=g.closest(".k-top,.k-mid,.k-bot"),n.length?(o=n.outerHeight(),s=f.getOffset(n).top,a=g.closest(".k-in"),l=o/(a.length>0?4:2),c=s+l>t.y.location,d=t.y.location>s+o-l,h._removeTouchHover(),u=a.length&&!c&&!d,h.hovered=!!u&&v,h.dropHint.css(L,u?"hidden":"visible"),a.toggleClass(U,u),u?i="k-add":(r=n.position(),r.top+=c?0:o,h.dropHint.css(r)[c?"prependTo":"appendTo"](g.closest(j).children("div:first")),c&&n.hasClass("k-top")&&(i="k-insert-top"),d&&n.hasClass("k-bot")&&(i="k-insert-bottom"))):g[0]!=h.dropHint[0]&&(i=v[0]!=p.element[0]?"k-add":"k-denied")):(i="k-denied",h._removeTouchHover()),p.trigger(H,{sourceNode:m[0],dropTarget:g[0],pageY:t.y.location,pageX:t.x.location,statusClass:i.substring(2),setStatusClass:function(e){i=e}}),0!==i.indexOf("k-insert")&&h.dropHint.css(L,"hidden"),h._hintStatus(i)},dragcancel:function(){this.dropHint.remove()},dragend:function(){function e(e){s.updateIndeterminate(),s.trigger(N,{sourceNode:e&&e[0],destinationNode:i[0],dropPosition:a})}var i,n,r,o=this,s=o.treeview,a="over",l=o.sourceNode,c=o.dropHint,d=o.dropTarget;return"visible"==c.css(L)?(a=c.prevAll(".k-in").length>0?"after":"before",i=c.closest(j)):d&&(i=d.closest(".k-treeview .k-item"),i.length||(i=d.closest(".k-treeview"))),n={sourceNode:l[0],destinationNode:i[0],valid:"k-denied"!=o._hintStatus(),setValid:function(e){this.valid=e},dropTarget:d[0],dropPosition:a},r=s.trigger(R,n),c.remove(),o._removeTouchHover(),!n.valid||r?(o._draggable.dropped=n.valid,t):(o._draggable.dropped=!0,"over"==a?s.append(l,i,e):("before"==a?l=s.insertBefore(l,i):"after"==a&&(l=s.insertAfter(l,i)),e(l)),t)},destroy:function(){this._draggable.destroy()}},m.plugin(c)}(window.kendo.jQuery),function(e,t){function i(e,t){var i,n,r=[];for(i=0,n=e.length;n>i;i++)e[i].field!==t&&r.push(e[i]);return r}function n(e,t,i){var n,r,o,s;if(!e)return[];for(e=e.filters,n=0,r=[],o=e.length;o>n;n++)s=e[n].operator,(i||"in"===s)&&s!==i||e[n].field!==t||r.push(e[n]);return r}function r(t,i,r){var o,s=0,a=r.length;if(t=n(t,i,"in")[0])for(o=t.value.split(",");a>s;s++)r[s].checked=e.inArray(r[s].uniqueName,o)>=0;else for(;a>s;s++)r[s].checked=!0}function o(e,t){var i,n=e.length;for(i=0;n>i;i++)e[i].checked&&0!==e[i].level()&&t.push(e[i].uniqueName),e[i].hasChildren&&o(e[i].children.view(),t)}var s=window.kendo,a=s.ui,l="kendoContextMenu",c=e.proxy,d=".kendoPivotFieldMenu",u=a.Widget,h=u.extend({init:function(e,t){u.fn.init.call(this,e,t),this._dataSource(),this._layout(),s.notify(this)},events:[],options:{name:"PivotFieldMenu",filter:null,filterable:!0,sortable:!0,messages:{info:"Show items with value that:",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filterFields:"Fields Filter",filter:"Filter",include:"Include Fields...",title:"Fields to include",clear:"Clear",ok:"OK",cancel:"Cancel",operators:{contains:"Contains",doesnotcontain:"Does not contain",startswith:"Starts with",endswith:"Ends with",eq:"Is equal to",neq:"Is not equal to"}}},_layout:function(){var t=this.options;this.wrapper=e(s.template(f)({ns:s.ns,filterable:t.filterable,sortable:t.sortable,messages:t.messages})),this.menu=this.wrapper[l]({filter:t.filter,target:this.element,orientation:"vertical",showOn:"click",closeOnClick:!1,open:c(this._menuOpen,this),select:c(this._select,this),copyAnchorStyles:!1}).data(l),this._createWindow(),t.filterable&&this._initFilterForm()},_initFilterForm:function(){var e=this.menu.element.find(".k-filter-item"),t=c(this._filter,this);this._filterOperator=new s.ui.DropDownList(e.find("select")),this._filterValue=e.find(".k-textbox"),e.on("submit"+d,t).on("click"+d,".k-button-filter",t).on("click"+d,".k-button-clear",c(this._reset,this))},_setFilterForm:function(e){var t="",i="";e&&(t=e.operator,i=e.value),this._filterOperator.value(t),this._filterValue.val(i)},_clearFilters:function(e){var t,i,r=this.dataSource.filter()||{},o=0;for(r.filters=r.filters||[],t=n(r,e),i=t.length;i>o;o++)r.filters.splice(r.filters.indexOf(t[o]),1);return r},_filter:function(e){var i,n,r=this,o=r._filterValue.val();return e.preventDefault(),o?(i={field:r.currentMember,operator:r._filterOperator.value(),value:o},n=r._clearFilters(r.currentMember),n.filters.push(i),r.dataSource.filter(n),r.menu.close(),t):(r.menu.close(),t)},_reset:function(e){var t=this,i=t._clearFilters(t.currentMember);e.preventDefault(),i.filters[0]||(i={}),t.dataSource.filter(i),t._setFilterForm(null),t.menu.close()},_sort:function(e){var t=this.currentMember,n=this.dataSource.sort()||[];n=i(n,t),n.push({field:t,dir:e}),this.dataSource.sort(n),this.menu.close()},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},_dataSource:function(){this.dataSource=s.data.PivotDataSource.create(this.options.dataSource)},_createWindow:function(){var t=this.options.messages;this.includeWindow=e(s.template(m)({messages:t})).on("click"+d,".k-button-ok",c(this._applyIncludes,this)).on("click"+d,".k-button-cancel",c(this._closeWindow,this)),this.includeWindow=new a.Window(this.includeWindow,{title:t.title,visible:!1,resizable:!1,open:c(this._windowOpen,this)})},_applyIncludes:function(e){var t,i=[],r=this.treeView.dataSource.view(),s=r[0].checked,a=this.dataSource.filter(),l=n(a,this.currentMember,"in")[0];o(r,i),l&&(s?(a.filters.splice(a.filters.indexOf(l),1),a.filters.length||(a={})):l.value=i.join(","),t=a),i.length&&(t||s||(t={field:this.currentMember,operator:"in",value:i.join(",")},a&&(a.filters.push(t),t=a))),t&&this.dataSource.filter(t),this._closeWindow(e)},_closeWindow:function(e){e.preventDefault(),this.includeWindow.close()},_treeViewDataSource:function(){var e=this;return s.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return parseInt(e.childrenCardinality,10)>0}}},transport:{read:function(t){var i={},n=e.treeView.dataSource.get(t.data.uniqueName),o=t.data.uniqueName;o?(i.memberUniqueName=n.uniqueName.replace(/\&/g,"&amp;"),i.treeOp=1):i.levelUniqueName=e.currentMember+".[(ALL)]",e.dataSource.schemaMembers(i).done(function(i){r(e.dataSource.filter(),e.currentMember,i),t.success(i)}).fail(t.error)}}})},_createTreeView:function(e){var t=this;t.treeView=new a.TreeView(e,{autoBind:!1,dataSource:t._treeViewDataSource(),dataTextField:"name",checkboxes:{checkChildren:!0},dataBound:function(){a.progress(t.includeWindow.element,!1)}})},_menuOpen:function(t){var i;t.event&&(i=s.attr("name"),this.currentMember=e(t.event.target).closest("["+i+"]").attr(i),this.options.filterable&&this._setFilterForm(n(this.dataSource.filter(),this.currentMember)[0]))},_select:function(t){var i=e(t.item);e(".k-pivot-filter-window").not(this.includeWindow.element).kendoWindow("close"),i.hasClass("k-include-item")?this.includeWindow.center().open():i.hasClass("k-sort-asc")?this._sort("asc"):i.hasClass("k-sort-desc")&&this._sort("desc")},_windowOpen:function(){this.treeView||this._createTreeView(this.includeWindow.element.find(".k-treeview")),a.progress(this.includeWindow.element,!0),this.treeView.dataSource.read()},destroy:function(){u.fn.destroy.call(this),this.menu&&(this.menu.destroy(),this.menu=null),this.reeeView&&(this.treeView.destroy(),this.treeView=null),this.includeWindow&&(this.includeWindow.destroy(),this.includeWindow=null),this.wrapper=null,this.element=null}}),p='<div class="k-filterable k-content" tabindex="-1" data-role="fieldmenu"><form class="k-filter-menu"><div><div class="k-filter-help-text">#=messages.info#</div><select>#for(var op in messages.operators){#<option value="#=op#">#=messages.operators[op]#</option>#}#</select><input class="k-textbox" type="text" /><div><a class="k-button k-primary k-button-filter" href="\\#">#=messages.filter#</a><a class="k-button k-button-clear" href="\\#">#=messages.clear#</a></div></div></form></div>',f='<ul class="k-pivot-fieldmenu"># if (sortable) {#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc"></span>${messages.sortDescending}</span></li># if (filterable) {#<li class="k-separator"></li># } ## } ## if (filterable) {#<li class="k-item k-include-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.include}</span></li><li class="k-separator"></li><li class="k-item k-filter-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.filterFields}</span><ul><li>'+p+"</li></ul></li># } #</ul>",m='<div class="k-popup-edit-form k-pivot-filter-window"><div class="k-edit-form-container"><div class="k-treeview"></div><div class="k-edit-buttons k-state-default"><a class="k-button k-primary k-button-ok" href="\\#">${messages.ok}</a><a class="k-button k-button-cancel" href="\\#">${messages.cancel}</a></div></div>';a.plugin(h)}(window.kendo.jQuery),function(e,t){function i(t,n){var r,o,s=[];if(e.isPlainObject(t))if(t.hasOwnProperty("filters"))s=t.filters;else if(t.field==n)return t;for(e.isArray(t)&&(s=t),r=0;s.length>r;r++)if(o=i(s[r],n))return o}function n(t,i){t.filters&&(t.filters=e.grep(t.filters,function(e){return n(e,i),e.filters?e.filters.length:e.field!=i}))}function r(e,t){var i=o.getter(t,!0);return function(t){for(var n,r,o=e(t),s=[],a=0,l={};o.length>a;)n=o[a++],r=i(n),l.hasOwnProperty(r)||(s.push(n),l[r]=!0);return s}}var o=window.kendo,s=o.ui,a=o.data.DataSource,l=s.Widget,c="change",d="boolean",u="enums",h="string",p="Is equal to",f="Is not equal to",m=e.proxy,g=l.extend({init:function(i,n){var r,s,a,p,f,g,v,y,_,b;i=e(i).addClass("k-filtercell"),r=this.wrapper=e("<span/>").appendTo(i),s=this,g=s.operators=n.operators||{},v=s.input=e("<input/>").attr(o.attr("bind"),"value: value").appendTo(r),l.fn.init.call(s,i[0],n),n=s.options,a=s.dataSource=n.dataSource,s.model=a.reader.model,f=n.type=h,y=o.getter("reader.model.fields",!0)(a)||{},_=y[n.field],_&&_.type&&(f=n.type=_.type),n.values&&(n.type=f=u),g=g[f]||n.operators[f],s._parse=function(e){return e+""},s.model&&s.model.fields&&(b=s.model.fields[n.field],b&&b.parse&&(s._parse=m(b.parse,b))),s.viewModel=p=o.observable({operator:n.operator,value:null,operatorVisible:function(){var e=this.get("value");return null!==e&&e!==t&&"undefined"!=e}}),p.bind(c,m(s.updateDsFilter,s)),f==h&&s.initSuggestDataSource(n),null!==n.inputWidth&&v.width(n.inputWidth),s._setInputType(n,f),f!=d&&n.showOperators!==!1?s._createOperatorDropDown(g):r.addClass("k-operator-hidden"),s._createClearIcon(),o.bind(this.wrapper,p),f==h&&(n.template||s.setAutoCompleteSource()),f==u&&s.setComboBoxSource(s.options.values),s._refreshUI(),s._refreshHandler=m(s._refreshUI,s),s.dataSource.bind(c,s._refreshHandler)},_setInputType:function(t,i){var n,r,s,a,l,c=this,p=c.input;"function"==typeof t.template?t.template.call(c.viewModel,{element:c.input,dataSource:c.suggestDataSource}):i==h?p.attr(o.attr("role"),"autocomplete").attr(o.attr("text-field"),t.dataTextField||t.field).attr(o.attr("filter"),t.suggestionOperator).attr(o.attr("delay"),t.delay).attr(o.attr("min-length"),t.minLength).attr(o.attr("value-primitive"),!0):"date"==i?p.attr(o.attr("role"),"datepicker"):i==d?(p.remove(),n=e("<input type='radio'/>"),r=c.wrapper,s=o.guid(),a=e("<label/>").text(t.messages.isTrue).append(n),n.attr(o.attr("bind"),"checked:value").attr("name",s).val("true"),l=a.clone().text(t.messages.isFalse),n.clone().val("false").appendTo(l),r.append([a,l])):"number"==i?p.attr(o.attr("role"),"numerictextbox"):i==u&&p.attr(o.attr("role"),"combobox").attr(o.attr("text-field"),"text").attr(o.attr("suggest"),!0).attr(o.attr("filter"),"contains").attr(o.attr("value-field"),"value").attr(o.attr("value-primitive"),!0)},_createOperatorDropDown:function(t){var i,n,r=[];for(i in t)r.push({text:t[i],value:i});n=e('<input class="k-dropdown-operator" '+o.attr("bind")+'="value: operator"/>').appendTo(this.wrapper),this.operatorDropDown=n.kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:!0}).data("kendoDropDownList"),this.operatorDropDown.wrapper.find(".k-i-arrow-s").removeClass("k-i-arrow-s").addClass("k-filter")},initSuggestDataSource:function(e){var i=e.suggestDataSource;i instanceof a||(!e.customDataSource&&i&&(i.group=t),i=this.suggestDataSource=a.create(i)),e.customDataSource||(i._pageSize=t,i.reader.data=r(i.reader.data,this.options.field)),this.suggestDataSource=i},setAutoCompleteSource:function(){var e=this.input.data("kendoAutoComplete");e&&e.setDataSource(this.suggestDataSource)},setComboBoxSource:function(e){
var t=a.create({data:e}),i=this.input.data("kendoComboBox");i&&i.setDataSource(t)},_refreshUI:function(){var t=this,n=i(t.dataSource.filter(),this.options.field)||{},r=t.viewModel;t.manuallyUpdatingVM=!0,n=e.extend(!0,{},n),t.options.type==d&&r.value!==n.value&&t.wrapper.find(":radio").prop("checked",!1),n.operator&&r.set("operator",n.operator),r.set("value",n.value),t.manuallyUpdatingVM=!1},updateDsFilter:function(i){var n,r,o,s=this,a=s.viewModel;s.manuallyUpdatingVM||"operator"==i.field&&a.value===t||(n=e.extend({},s.viewModel.toJSON(),{field:s.options.field}),r={logic:"and",filters:[]},n.value!==t&&null!==n.value&&r.filters.push(n),o=s._merge(r),s.dataSource.filter(o.filters.length?o:{}))},_merge:function(t){var i,r,o,s=this,a=t.logic||"and",l=t.filters,c=s.dataSource.filter()||{filters:[],logic:"and"};for(n(c,s.options.field),r=0,o=l.length;o>r;r++)i=l[r],i.value=s._parse(i.value);return l=e.grep(l,function(e){return""!==e.value&&null!==e.value}),l.length&&(c.filters.length?(t.filters=l,"and"!==c.logic&&(c.filters=[{logic:c.logic,filters:c.filters}],c.logic="and"),c.filters.push(l.length>1?t:l[0])):(c.filters=l,c.logic=a)),c},_createClearIcon:function(){var t=this;e("<button type='button' class='k-button k-button-icon'/>").attr(o.attr("bind"),"visible:operatorVisible").html("<span class='k-icon k-i-close'/>").click(m(t.clearFilter,t)).appendTo(t.wrapper)},clearFilter:function(){this.viewModel.set("value",null)},destroy:function(){var e=this;e.filterModel=null,l.fn.destroy.call(e),o.destroy(e.element)},events:[c],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:t,customDataSource:!1,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:!0,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:p,neq:f,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:p,neq:f,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:p,neq:f,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:p,neq:f}}}});s.plugin(g)}(window.kendo.jQuery),function(e,t){function i(t){t=e(t),t.children(v).children(".k-icon").remove(),t.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),i=t.parent();t.append("<span class='k-icon "+(i.hasClass(P)?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function n(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(x),t.filter(".k-last:not(:last-child)").removeClass(m),t.filter(":first-child").addClass(x),t.filter(":last-child").addClass(m)}var r=window.kendo,o=r.ui,s=r.keys,a=e.extend,l=e.each,c=r.template,d=o.Widget,u=/^(ul|a|div)$/i,h=".kendoPanelBar",p="img",f="href",m="k-last",g="k-link",v="."+g,y="error",_=".k-item",b=".k-group",w=b+":visible",k="k-image",x="k-first",C="expand",S="select",T="k-content",D="activate",M="collapse",A="mouseenter",E="mouseleave",I="contentLoad",P="k-state-active",F="> .k-panel",z="> .k-content",H="k-state-focused",R="k-state-disabled",N="k-state-selected",$="."+N,O="k-state-highlight",L=_+":not(.k-state-disabled)",B=L+" > .k-link",U=_+".k-state-disabled > .k-link",V="> li > "+$+", .k-panel > li > "+$,W="k-state-default",j="aria-disabled",q="aria-expanded",G="aria-hidden",Y="aria-selected",Q=":visible",K=":empty",X="single",Z={content:c("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:c("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:c("<#= tag(item) # class='#= textClass(item, group) #' #= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:c("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:c("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:c("<span class='#= arrowClass(item) #'></span>"),sprite:c("<span class='k-sprite #= spriteCssClass #'></span>"),empty:c("")},J={aria:function(e){var t="";return(e.items||e.content||e.contentUrl)&&(t+=q+"='"+(e.expanded?"true":"false")+"' "),e.enabled===!1&&(t+=j+"='true'"),t},wrapperCssClass:function(e,t){var i="k-item",n=t.index;return i+=t.enabled===!1?" "+R:t.expanded===!0?" "+P:" k-state-default",0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),t.cssClass&&(i+=" "+t.cssClass),i},textClass:function(e,t){var i=g;return t.firstLevel&&(i+=" k-header"),i},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e){var t="k-icon";return t+=e.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand"},text:function(e){return e.encoded===!1?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url||e.contentUrl?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(e){return e.item.expanded!==!0?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}},ee=d.extend({init:function(t,i){var n,o=this;d.fn.init.call(o,t,i),t=o.wrapper=o.element.addClass("k-widget k-reset k-header k-panelbar"),i=o.options,t[0].id&&(o._itemId=t[0].id+"_pb_active"),o._tabindex(),o._initData(i),o._updateClasses(),o._animations(i),t.on("click"+h,B,function(t){o._click(e(t.currentTarget))&&t.preventDefault()}).on(A+h+" "+E+h,B,o._toggleHover).on("click"+h,U,!1).on("keydown"+h,e.proxy(o._keydown,o)).on("focus"+h,function(){var e=o.select();o._current(e[0]?e:o._first())}).on("blur"+h,function(){o._current(null)}).attr("role","menu"),n=t.find("li."+P+" > ."+T),n[0]&&o.expand(n.parent(),!1),r.notify(o)},events:[C,M,S,D,y,I],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},expandMode:"multiple"},destroy:function(){d.fn.destroy.call(this),this.element.off(h),r.destroy(this.element)},_initData:function(e){var t=this;e.dataSource&&(t.element.empty(),t.append(e.dataSource,t.element))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=a(!0,t,e.animation),"dataSource"in e&&this._initData(e),d.fn.setOptions.call(this,e)},expand:function(t,i){var n=this,r={};return i=i!==!1,t=this.element.find(t),t.each(function(o,s){s=e(s);var a=s.find(F).add(s.find(z));if(!s.hasClass(R)&&a.length>0){if(n.options.expandMode==X&&n._collapseAllExpanded(s))return n;t.find("."+O).removeClass(O),s.addClass(O),i||(r=n.options.animation,n.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),n._triggerEvent(C,s)||n._toggleItem(s,!1),i||(n.options.animation=r)}}),n},collapse:function(t,i){var n=this,r={};return i=i!==!1,t=n.element.find(t),t.each(function(t,o){o=e(o);var s=o.find(F).add(o.find(z));!o.hasClass(R)&&s.is(Q)&&(o.removeClass(O),i||(r=n.options.animation,n.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),n._triggerEvent(M,o)||n._toggleItem(o,!0),i||(n.options.animation=r))}),n},_toggleDisabled:function(e,t){e=this.element.find(e),e.toggleClass(W,t).toggleClass(R,!t).attr(j,!t)},select:function(i){var n=this;return i===t?n.element.find(V).parent():(i=n.element.find(i),i.length?i.each(function(){var i=e(this),r=i.children(v);return i.hasClass(R)?n:(n._triggerEvent(S,i)||n._updateSelected(r),t)}):this._updateSelected(i),n)},clearSelection:function(){this.select(e())},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var r=this._insert(e,t,t.length?t.find(F):null);return l(r.items,function(){r.group.append(this),n(this)}),i(t),n(r.group.find(".k-first, .k-last")),r.group.height("auto"),this},insertBefore:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());return l(i.items,function(){t.before(this),n(this)}),n(t),i.group.height("auto"),this},insertAfter:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());return l(i.items,function(){t.after(this),n(this)}),n(t),i.group.height("auto"),this},remove:function(e){e=this.element.find(e);var t=this,r=e.parentsUntil(t.element,_),o=e.parent("ul");return e.remove(),!o||o.hasClass("k-panelbar")||o.children(_).length||o.remove(),r.length&&(r=r.eq(0),i(r),n(r)),t},reload:function(t){var i=this;t=i.element.find(t),t.each(function(){var t=e(this);i._ajaxRequest(t,t.children("."+T),!t.is(Q))})},_first:function(){return this.element.children(L).first()},_last:function(){var e=this.element.children(L).last(),t=e.children(w);return t[0]?t.children(L).last():e},_current:function(e){var i=this,n=i._focused,r=i._itemId;return e===t?n:(i.element.removeAttr("aria-activedescendant"),n&&(n[0].id===r&&n.removeAttr("id"),n.children(v).removeClass(H)),e&&(r=e[0].id||r,e.attr("id",r).children(v).addClass(H),i.element.attr("aria-activedescendant",r)),i._focused=e,t)},_keydown:function(e){var t=this,i=e.keyCode,n=t._current();e.target==e.currentTarget&&(i==s.DOWN||i==s.RIGHT?(t._current(t._nextItem(n)),e.preventDefault()):i==s.UP||i==s.LEFT?(t._current(t._prevItem(n)),e.preventDefault()):i==s.ENTER||i==s.SPACEBAR?(t._click(n.children(v)),e.preventDefault()):i==s.HOME?(t._current(t._first()),e.preventDefault()):i==s.END&&(t._current(t._last()),e.preventDefault()))},_nextItem:function(e){if(!e)return this._first();var t=e.children(w),i=e.nextAll(":visible").first();return t[0]&&(i=t.children("."+x)),i[0]||(i=e.parent(w).parent(_).next()),i[0]||(i=this._first()),i.hasClass(R)&&(i=this._nextItem(i)),i},_prevItem:function(e){if(!e)return this._last();var t,i=e.prevAll(":visible").first();if(i[0])for(t=i;t[0];)t=t.children(w).children("."+m),t[0]&&(i=t);else i=e.parent(w).parent(_),i[0]||(i=this._last());return i.hasClass(R)&&(i=this._prevItem(i)),i},_insert:function(t,i,n){var r,o,s=this,l=e.isPlainObject(t),c=i&&i[0];return c||(n=s.element),o={firstLevel:n.hasClass("k-panelbar"),expanded:n.parent().hasClass(P),length:n.children().length},c&&!n.length&&(n=e(ee.renderGroup({group:o})).appendTo(i)),l||e.isArray(t)?(r=e.map(l?[t]:t,function(t,i){return e("string"==typeof t?t:ee.renderItem({group:o,item:a(t,{index:i})}))}),c&&i.attr(q,!1)):(r="string"==typeof t&&"<"!=t[0]?s.element.find(t):e(t),s._updateItemsClasses(r)),{items:r,group:n}},_toggleHover:function(t){var i=e(t.currentTarget);i.parents("li."+R).length||i.toggleClass("k-state-hover",t.type==A)},_updateClasses:function(){var t,r,o=this;t=o.element.find("li > ul").not(function(){return e(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group"),t.parent().attr(q,!1).not("."+P).children("ul").attr(G,!0).hide(),r=o.element.add(t).children(),o._updateItemsClasses(r),i(r),n(r)},_updateItemsClasses:function(e){for(var t=e.length,i=0;t>i;i++)this._updateItemClasses(e[i],i)},_updateItemClasses:function(t,i){var n,o,s=this._selected,a=this.options.contentUrls,l=a&&a[i],c=this.element[0];t=e(t).addClass("k-item").attr("role","menuitem"),r.support.browser.msie&&t.css("list-style-position","inside").css("list-style-position",""),t.children(p).addClass(k),o=t.children("a").addClass(g),o[0]&&(o.attr("href",l),o.children(p).addClass(k)),t.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),t.filter("li[disabled]").addClass("k-state-disabled").attr(j,!0).removeAttr("disabled"),t.children("div").addClass(T).attr("role","region").attr(G,!0).hide().parent().attr(q,!1),o=t.children($),o[0]&&(s&&s.removeAttr(Y).children($).removeClass(N),o.addClass(N),this._selected=t.attr(Y,!0)),t.children(v)[0]||(n="<span class='"+g+"'/>",a&&a[i]&&t[0].parentNode==c&&(n='<a class="k-link k-header" href="'+a[i]+'"/>'),t.contents().filter(function(){return!(this.nodeName.match(u)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll(n)),t.parent(".k-panelbar")[0]&&t.children(v).addClass("k-header")},_click:function(e){var t,i,n,r,o,s,a,l=this,c=l.element;if(!e.parents("li."+R).length&&e.closest(".k-widget")[0]==c[0]){if(o=e.closest(v),s=o.closest(_),l._updateSelected(o),i=s.find(F).add(s.find(z)),n=o.attr(f),r=n&&("#"==n.charAt(n.length-1)||-1!=n.indexOf("#"+l.element[0].id+"-")),t=!(!r&&!i.length),i.data("animating"))return t;if(l._triggerEvent(S,s)&&(t=!0),t!==!1)return l.options.expandMode==X&&l._collapseAllExpanded(s)?t:(i.length&&(a=i.is(Q),l._triggerEvent(a?M:C,s)||(t=l._toggleItem(s,a))),t)}},_toggleItem:function(e,i){var n,r,o=this,s=e.find(F),a=e.find(v),l=a.attr(f);return s.length?(this._toggleGroup(s,i),n=!0):(r=e.children("."+T),r.length&&(n=!0,r.is(K)&&l!==t?o._ajaxRequest(e,r,i):o._toggleGroup(r,i))),n},_toggleGroup:function(e,t){var i=this,n=i.options.animation,r=n.expand,o=a({},n.collapse),s=o&&"effects"in o;e.is(Q)==t&&(e.parent().attr(q,!t).attr(G,t).toggleClass(P,!t).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-s",t).toggleClass("k-panelbar-expand",t),r=t?a(s?o:a({reverse:!0},r),{hide:!0}):a({complete:function(e){i._triggerEvent(D,e.closest(_))}},r),e.kendoStop(!0,!0).kendoAnimate(r))},_collapseAllExpanded:function(t){var i,n=this,r=!1,o=t.find(F).add(t.find(z));return o.is(Q)&&(r=!0),o.is(Q)||0===o.length||(i=t.siblings(),i.find(F).add(i.find(z)).filter(function(){return e(this).is(Q)}).each(function(t,i){i=e(i),r=n._triggerEvent(M,i.closest(_)),r||n._toggleGroup(i,!0)})),r},_ajaxRequest:function(t,i,n){var r=this,o=t.find(".k-panelbar-collapse, .k-panelbar-expand"),s=t.find(v),a=setTimeout(function(){o.addClass("k-loading")},100),l={},c=s.attr(f);e.ajax({type:"GET",cache:!1,url:c,dataType:"html",data:l,error:function(e,t){o.removeClass("k-loading"),r.trigger(y,{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(a),o.removeClass("k-loading")},success:function(e){function o(){return{elements:i.get()}}try{r.angular("cleanup",o),i.html(e),r.angular("compile",o)}catch(e){var s=window.console;s&&s.error&&s.error(e.name+": "+e.message+" in "+c),this.error(this.xhr,"error")}r._toggleGroup(i,n),r.trigger(I,{item:t[0],contentElement:i[0]})}})},_triggerEvent:function(e,t){var i=this;return i.trigger(e,{item:t[0]})},_updateSelected:function(e){var t=this,i=t.element,n=e.parent(_),r=t._selected;r&&r.removeAttr(Y),t._selected=n.attr(Y,!0),i.find(V).removeClass(N),i.find("> ."+O+", .k-panel > ."+O).removeClass(O),e.addClass(N),e.parentsUntil(i,_).filter(":has(.k-header)").addClass(O),t._current(n[0]?n:null)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})}});a(ee,{renderItem:function(e){e=a({panelBar:{},group:{}},e);var t=Z.empty,i=e.item;return Z.item(a(e,{image:i.imageUrl?Z.image:t,sprite:i.spriteCssClass?Z.sprite:t,itemWrapper:Z.itemWrapper,renderContent:ee.renderContent,arrow:i.items||i.content||i.contentUrl?Z.arrow:t,subGroup:ee.renderGroup},J))},renderGroup:function(e){return Z.group(a({renderItems:function(e){for(var t="",i=0,n=e.items,r=n?n.length:0,o=a({length:r},e.group);r>i;i++)t+=ee.renderItem(a(e,{group:o,item:a({index:i},n[i])}));return t}},e,J))},renderContent:function(e){return Z.content(a(e,J))}}),r.ui.plugin(ee)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,r=n.Widget,o="horizontal",s="vertical",a=0,l=100,c=0,d=5,u="k-progressbar",h="k-progressbar-reverse",p="k-progressbar-indeterminate",f="k-complete",m="k-state-selected",g="k-progress-status",v="k-state-selected",y="k-state-default",_="k-state-disabled",b={VALUE:"value",PERCENT:"percent",CHUNK:"chunk"},w="change",k="complete",x="boolean",C=Math,S=e.extend,T=e.proxy,D=100,M=400,A=3,E={progressStatus:"<span class='k-progress-status-wrap'><span class='k-progress-status'></span></span>"},I=r.extend({init:function(e,t){var i=this;r.fn.init.call(this,e,t),t=i.options,i._progressProperty=t.orientation===o?"width":"height",i._fields(),t.value=i._validateValue(t.value),i._validateType(t.type),i._wrapper(),i._progressAnimation(),t.value!==t.min&&t.value!==!1&&i._updateProgress()},setOptions:function(e){var t=this;r.fn.setOptions.call(t,e),e.hasOwnProperty("reverse")&&t.wrapper.toggleClass("k-progressbar-reverse",e.reverse),e.hasOwnProperty("enable")&&t.enable(e.enable),t._progressAnimation(),t._validateValue(),t._updateProgress()},events:[w,k],options:{name:"ProgressBar",orientation:o,reverse:!1,min:a,max:l,value:c,enable:!0,type:b.VALUE,chunkCount:d,showStatus:!0,animation:{}},_fields:function(){var t=this;t._isStarted=!1,t.progressWrapper=t.progressStatus=e()},_validateType:function(n){var r=!1;if(e.each(b,function(e,i){return i===n?(r=!0,!1):t}),!r)throw Error(i.format("Invalid ProgressBar type '{0}'",n))},_wrapper:function(){var e,t=this,i=t.wrapper=t.element,n=t.options,r=n.orientation;i.addClass("k-widget "+u),i.addClass(u+"-"+(r===o?o:s)),n.enable===!1&&i.addClass(_),n.reverse&&i.addClass(h),n.value===!1&&i.addClass(p),n.type===b.CHUNK?t._addChunkProgressWrapper():n.showStatus&&(t.progressStatus=t.wrapper.prepend(E.progressStatus).find("."+g),e=n.value!==!1?n.value:n.min,t.progressStatus.text(n.type===b.VALUE?e:t._calculatePercentage(e)+"%"))},value:function(e){return this._value(e)},_value:function(e){var i,n=this,r=n.options;return e===t?r.value:(typeof e!==x?(e=n._roundValue(e),isNaN(e)||(i=n._validateValue(e),i!==r.value&&(n.wrapper.removeClass(p),r.value=i,n._isStarted=!0,n._updateProgress()))):e||(n.wrapper.addClass(p),r.value=!1),t)},_roundValue:function(e){e=parseFloat(e);var t=C.pow(10,A);return C.floor(e*t)/t},_validateValue:function(e){var t=this,i=t.options;if(e!==!1){if(i.min>=e||e===!0)return i.min;if(e>=i.max)return i.max}else if(e===!1)return!1;return isNaN(t._roundValue(e))?i.min:e},_updateProgress:function(){var e=this,t=e.options,i=e._calculatePercentage();t.type===b.CHUNK?(e._updateChunks(i),e._onProgressUpdateAlways(t.value)):e._updateProgressWrapper(i)},_updateChunks:function(e){var t,i=this,n=i.options,r=n.chunkCount,a=parseInt(D/r*100,10)/100,l=parseInt(100*e,10)/100,c=C.floor(l/a);t=i.wrapper.find(n.orientation===o&&!n.reverse||n.orientation===s&&n.reverse?"li.k-item:lt("+c+")":"li.k-item:gt(-"+(c+1)+")"),i.wrapper.find("."+v).removeClass(v).addClass(y),t.removeClass(y).addClass(v)},_updateProgressWrapper:function(e){var t=this,i=t.options,n=t.wrapper.find("."+m),r=t._isStarted?t._animation.duration:0,o={};0===n.length&&t._addRegularProgressWrapper(),o[t._progressProperty]=e+"%",t.progressWrapper.animate(o,{duration:r,start:T(t._onProgressAnimateStart,t),progress:T(t._onProgressAnimate,t),complete:T(t._onProgressAnimateComplete,t,i.value),always:T(t._onProgressUpdateAlways,t,i.value)})},_onProgressAnimateStart:function(){this.progressWrapper.show()},_onProgressAnimate:function(e){var t,i=this,n=i.options,r=parseFloat(e.elem.style[i._progressProperty],10);n.showStatus&&(t=1e4/parseFloat(i.progressWrapper[0].style[i._progressProperty]),i.progressWrapper.find(".k-progress-status-wrap").css(i._progressProperty,t+"%")),n.type!==b.CHUNK&&98>=r&&i.progressWrapper.removeClass(f)},_onProgressAnimateComplete:function(e){var t=this,i=t.options,n=parseFloat(t.progressWrapper[0].style[t._progressProperty]);i.type!==b.CHUNK&&n>98&&t.progressWrapper.addClass(f),i.showStatus&&t.progressStatus.text(i.type===b.VALUE?e:C.floor(t._calculatePercentage(e))+"%"),e===i.min&&t.progressWrapper.hide()},_onProgressUpdateAlways:function(e){var t=this,i=t.options;t._isStarted&&t.trigger(w,{value:e}),e===i.max&&t._isStarted&&t.trigger(k,{value:i.max})},enable:function(e){var i=this,n=i.options;n.enable=t===e||e,i.wrapper.toggleClass(_,!n.enable)},destroy:function(){var e=this;r.fn.destroy.call(e)},_addChunkProgressWrapper:function(){var e,t=this,i=t.options,n=t.wrapper,r=D/i.chunkCount,o="";for(1>=i.chunkCount&&(i.chunkCount=d),o+="<ul class='k-reset'>",e=i.chunkCount-1;e>=0;e--)o+="<li class='k-item k-state-default'></li>";o+="</ul>",n.append(o).find(".k-item").css(t._progressProperty,r+"%").first().addClass("k-first").end().last().addClass("k-last"),t._normalizeChunkSize()},_normalizeChunkSize:function(){var e=this,t=e.options,i=e.wrapper.find(".k-item:last"),n=parseFloat(i[0].style[e._progressProperty]),r=D-t.chunkCount*n;r>0&&i.css(e._progressProperty,n+r+"%")},_addRegularProgressWrapper:function(){var t=this;t.progressWrapper=e("<div class='"+m+"'></div>").appendTo(t.wrapper),t.options.showStatus&&(t.progressWrapper.append(E.progressStatus),t.progressStatus=t.wrapper.find("."+g))},_calculateChunkSize:function(){var e=this,t=e.options.chunkCount,i=e.wrapper.find("ul.k-reset");return(parseInt(i.css(e._progressProperty),10)-(t-1))/t},_calculatePercentage:function(e){var i=this,n=i.options,r=e!==t?e:n.value,o=n.min,s=n.max;return i._onePercent=C.abs((s-o)/100),C.abs((r-o)/i._onePercent)},_progressAnimation:function(){var e=this,t=e.options,i=t.animation;e._animation=i===!1?{duration:0}:S({duration:M},t.animation)}});i.ui.plugin(I)}(window.kendo.jQuery),function(e,t){function i(t){t.children(m).addClass(C),t.children("a").addClass(_).children(m).addClass(C),t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(z),t.filter("li[disabled]").addClass(F).removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(H+" "+$),t.attr("role","tab"),t.filter("."+H).attr("aria-selected",!0),t.each(function(){var t=e(this);t.children("."+_).length||t.contents().filter(function(){return!(this.nodeName.match(p)||3==this.nodeType&&!c(this.nodeValue))}).wrapAll("<a class='"+_+"'/>")})}function n(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(S),t.filter(".k-last:not(:last-child)").removeClass(b),t.filter(":first-child").addClass(S),t.filter(":last-child").addClass(b)}var r=window.kendo,o=r.ui,s=r.keys,a=e.map,l=e.each,c=e.trim,d=e.extend,u=r.template,h=o.Widget,p=/^(a|div)$/i,f=".kendoTabStrip",m="img",g="href",v="prev",y="show",_="k-link",b="k-last",w="click",k="error",x=":empty",C="k-image",S="k-first",T="select",D="activate",M="k-content",A="contentUrl",E="mouseenter",I="mouseleave",P="contentLoad",F="k-state-disabled",z="k-state-default",H="k-state-active",R="k-state-focused",N="k-state-hover",$="k-tab-on-top",O=".k-item:not(."+F+")",L=".k-tabstrip-items > "+O+":not(."+H+")",B={content:u("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper:u("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:u("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:u("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:u("<span class='k-sprite #= spriteCssClass #'></span>"),empty:u("")},U={wrapperCssClass:function(e,t){var i="k-item",n=t.index;return i+=t.enabled===!1?" k-state-disabled":" k-state-default",0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),i},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return e.encoded===!1?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return e.active!==!0?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?r.attr("content-url")+'="'+e.contentUrl+'"':""}},V=h.extend({init:function(t,i){var n,o,s=this;h.fn.init.call(s,t,i),s._animations(s.options),i=s.options,s._wrapper(),s._isRtl=r.support.isRtl(s.wrapper),s._tabindex(),s._updateClasses(),s._dataSource(),i.dataSource&&s.dataSource.fetch(),s.options.contentUrls&&s.wrapper.find(".k-tabstrip-items > .k-item").each(function(t,i){e(i).find(">."+_).data(A,s.options.contentUrls[t])}),s.wrapper.on(E+f+" "+I+f,L,s._toggleHover).on("focus"+f,e.proxy(s._active,s)).on("blur"+f,function(){s._current(null)}),s._keyDownProxy=e.proxy(s._keydown,s),i.navigatable&&s.wrapper.on("keydown"+f,s._keyDownProxy),s.wrapper.children(".k-tabstrip-items").on(w+f,".k-state-disabled .k-link",!1).on(w+f," > "+O,function(t){var i,n=s.wrapper[0];if(n!==document.activeElement)if(i=r.support.browser.msie)try{n.setActive()}catch(e){n.focus()}else n.focus();s._click(e(t.currentTarget))&&t.preventDefault()}),n=s.tabGroup.children("li."+H),o=s.contentHolder(n.index()),n[0]&&o.length>0&&0===o[0].childNodes.length&&s.activateTab(n.eq(0)),s.element.attr("role","tablist"),s.element[0].id&&(s._ariaId=s.element[0].id+"_ts_active"),r.notify(s)},_active:function(){var e=this.tabGroup.children().filter("."+H);e=e[0]?e:this._endItem("first"),e[0]&&this._current(e)},_endItem:function(e){return this.tabGroup.children(O)[e]()},_item:function(e,t){var i;return i=t===v?"last":"first",e?(e=e[t](),e[0]||(e=this._endItem(i)),e.hasClass(F)&&(e=this._item(e,t)),e):this._endItem(i)},_current:function(e){var i=this,n=i._focused,r=i._ariaId;return e===t?n:(n&&(n[0].id===r&&n.removeAttr("id"),n.removeClass(R)),e&&(e.hasClass(H)||e.addClass(R),i.element.removeAttr("aria-activedescendant"),r=e[0].id||r,r&&(e.attr("id",r),i.element.attr("aria-activedescendant",r))),i._focused=e,t)},_keydown:function(e){var i,n=this,r=e.keyCode,o=n._current(),a=n._isRtl;if(e.target==e.currentTarget){if(r==s.DOWN||r==s.RIGHT)i=a?v:"next";else if(r==s.UP||r==s.LEFT)i=a?"next":v;else if(r==s.ENTER||r==s.SPACEBAR)n._click(o),e.preventDefault();else{if(r==s.HOME)return n._click(n._endItem("first")),e.preventDefault(),t;if(r==s.END)return n._click(n._endItem("last")),e.preventDefault(),t}i&&(n._click(n._item(o,i)),e.preventDefault())}},_dataSource:function(){var t=this;t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler):t._refreshHandler=e.proxy(t.refresh,t),t.dataSource=r.data.DataSource.create(t.options.dataSource).bind("change",t._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),e.fetch()},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{effects:{}}})},refresh:function(e){var t,i,n,o,s=this,a=s.options,l=r.getter(a.dataTextField),c=r.getter(a.dataContentField),d=r.getter(a.dataContentUrlField),u=r.getter(a.dataImageUrlField),h=r.getter(a.dataUrlField),p=r.getter(a.dataSpriteCssClass),f=[],m=s.dataSource.view();for(e=e||{},n=e.action,n&&(m=e.items),t=0,o=m.length;o>t;t++)i={text:l(m[t])},a.dataContentField&&(i.content=c(m[t])),a.dataContentUrlField&&(i.contentUrl=d(m[t])),a.dataUrlField&&(i.url=h(m[t])),a.dataImageUrlField&&(i.imageUrl=u(m[t])),a.dataSpriteCssClass&&(i.spriteCssClass=p(m[t])),f[t]=i;if("add"==e.action)e.index<s.tabGroup.children().length?s.insertBefore(f,s.tabGroup.children().eq(e.index)):s.append(f);else if("remove"==e.action)for(t=0;m.length>t;t++)s.remove(e.index);else"itemchange"==e.action?(t=s.dataSource.view().indexOf(m[0]),e.field===a.dataTextField&&s.tabGroup.children().eq(t).find(".k-link").text(m[0].get(e.field))):(s.trigger("dataBinding"),s.remove("li"),s.append(f),s.trigger("dataBound"))},value:function(i){var n=this;return i===t?n.select().text():(i!=n.value()&&n.tabGroup.children().each(function(){e.trim(e(this).text())==i&&n.select(this)}),t)},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this,i=t.options.animation;t._animations(e),e.animation=d(!0,i,e.animation),e.navigatable?t.wrapper.on("keydown"+f,t._keyDownProxy):t.wrapper.off("keydown"+f,t._keyDownProxy),h.fn.setOptions.call(t,e)},events:[T,D,y,k,P,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1,navigatable:!0,contentUrls:!1},destroy:function(){var e=this;h.fn.destroy.call(e),e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler),e.wrapper.off(f),e.wrapper.children(".k-tabstrip-items").off(f),e.scrollWrap.children(".k-tabstrip").unwrap(),r.destroy(e.wrapper)},select:function(t){var i=this;return 0===arguments.length?i.tabGroup.children("li."+H):(isNaN(t)||(t=i.tabGroup.children().get(t)),t=i.tabGroup.find(t),e(t).each(function(t,n){n=e(n),n.hasClass(H)||i.trigger(T,{item:n[0],contentElement:i.contentHolder(n.index())[0]})||i.activateTab(n)}),i)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},reload:function(t){t=this.tabGroup.find(t);var i=this;return t.each(function(){var t=e(this),n=t.find("."+_).data(A),r=i.contentHolder(t.index());n&&i.ajaxRequest(t,r,null,n)}),i},append:function(e){var t=this,i=t._create(e);return l(i.tabs,function(e){t.tabGroup.append(this),t.wrapper.append(i.contents[e])}),n(t.tabGroup),t._updateContentElements(),t},insertBefore:function(t,i){i=this.tabGroup.find(i);var r=this,o=r._create(t),s=e(r.contentElement(i.index()));return l(o.tabs,function(e){i.before(this),s.before(o.contents[e])}),n(r.tabGroup),r._updateContentElements(),r},insertAfter:function(t,i){i=this.tabGroup.find(i);var r=this,o=r._create(t),s=e(r.contentElement(i.index()));return l(o.tabs,function(e){i.after(this),s.after(o.contents[e])}),n(r.tabGroup),r._updateContentElements(),r},remove:function(t){var i,n=this,o=typeof t;return"string"===o?t=n.tabGroup.find(t):"number"===o&&(t=n.tabGroup.children().eq(t)),i=t.map(function(){var t=n.contentElement(e(this).index());return r.destroy(t),t}),t.remove(),i.remove(),n._updateContentElements(),n},_create:function(n){var r,o,s,l=e.isPlainObject(n),c=this;return l||e.isArray(n)?(n=e.isArray(n)?n:[n],r=a(n,function(t,i){return e(V.renderItem({group:c.tabGroup,item:d(t,{index:i})}))}),o=a(n,function(i,n){return"string"==typeof i.content||i.contentUrl?e(V.renderContent({item:d(i,{index:n})})):t})):(r="string"==typeof n&&"<"!=n[0]?c.element.find(n):e(n),o=e(),r.each(function(){if(s=e("<div class='"+M+"'/>"),/k-tabstrip-items/.test(this.parentNode.className)){var t=parseInt(this.getAttribute("aria-controls").replace(/^.*-/,""),10)-1;s=e(c.contentElement(t))}o=o.add(s)}),i(r)),{tabs:r,contents:o}},_toggleDisabled:function(t,i){t=this.tabGroup.find(t),t.each(function(){e(this).toggleClass(z,i).toggleClass(F,!i)})},_updateClasses:function(){var r,o,s,a=this;a.wrapper.addClass("k-widget k-header k-tabstrip"),a.tabGroup=a.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),a.tabGroup[0]||(a.tabGroup=e("<ul class='k-tabstrip-items k-reset'/>").appendTo(a.wrapper)),r=a.tabGroup.find("li").addClass("k-item"),r.length&&(o=r.filter("."+H).index(),s=o>=0?o:t,a.tabGroup.contents().filter(function(){return 3==this.nodeType&&!c(this.nodeValue)}).remove()),o>=0&&r.eq(o).addClass($),a.contentElements=a.wrapper.children("div"),a.contentElements.addClass(M).eq(s).addClass(H).css({display:"block"}),r.length&&(i(r),n(a.tabGroup),a._updateContentElements())},_updateContentElements:function(){var t=this,i=t.options.contentUrls||[],n=t.tabGroup.find(".k-item"),o=(t.element.attr("id")||r.guid())+"-",s=t.wrapper.children("div");s.length&&n.length>s.length?(s.each(function(e){var t=parseInt(this.id.replace(o,""),10),i=n.filter("[aria-controls="+o+t+"]"),r=o+(e+1);i.data("aria",r),this.setAttribute("id",r)}),n.each(function(){var t=e(this);this.setAttribute("aria-controls",t.data("aria")),t.removeData("aria")})):n.each(function(n){var r=s.eq(n),a=o+(n+1);this.setAttribute("aria-controls",a),!r.length&&i[n]?e("<div class='"+M+"'/>").appendTo(t.wrapper).attr("id",a):(r.attr("id",a),
e(this).children(".k-loading")[0]||i[n]||e("<span class='k-loading k-complete'/>").prependTo(this)),r.attr("role","tabpanel"),r.filter(":not(."+H+")").attr("aria-hidden",!0).attr("aria-expanded",!1),r.filter("."+H).attr("aria-expanded",!0)}),t.contentElements=t.contentAnimators=t.wrapper.children("div"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),r.kineticScrollNeeded&&r.mobile.ui.Scroller&&(r.touchScroller(t.contentElements),t.contentElements=t.contentElements.children(".km-scroll-container"))},_wrapper:function(){var e=this;e.wrapper=e.element.is("ul")?e.element.wrapAll("<div />").parent():e.element,e.scrollWrap=e.wrapper.parent(".k-tabstrip-wrapper"),e.scrollWrap[0]||(e.scrollWrap=e.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent())},_sizeScrollWrap:function(e){this.scrollWrap.css("height",Math.floor(e.outerHeight(!0))+this.tabsHeight).css("height")},_toggleHover:function(t){e(t.currentTarget).toggleClass(N,t.type==E)},_click:function(e){var t,i,n=this,r=e.find("."+_),o=r.attr(g),s=n.options.collapsible,a=n.contentHolder(e.index());if(e.closest(".k-widget")[0]==n.wrapper[0]){if(e.is("."+F+(s?"":",."+H)))return!0;if(i=r.data(A)||o&&("#"==o.charAt(o.length-1)||-1!=o.indexOf("#"+n.element[0].id+"-")),t=!o||i,n.tabGroup.children("[data-animating]").length)return t;if(n.trigger(T,{item:e[0],contentElement:a[0]}))return!0;if(t!==!1)return s&&e.is("."+H)?(n.deactivateTab(e),!0):(n.activateTab(e)&&(t=!0),t)}},deactivateTab:function(e){var t=this,i=t.options.animation,n=i.open,o=d({},i.close),s=o&&"effects"in o;e=t.tabGroup.find(e),o=d(s?o:d({reverse:!0},n),{hide:!0}),r.size(n.effects)?(e.kendoAddClass(z,{duration:n.duration}),e.kendoRemoveClass(H,{duration:n.duration})):(e.addClass(z),e.removeClass(H)),e.removeAttr("aria-selected"),t.contentAnimators.filter("."+H).kendoStop(!0,!0).kendoAnimate(o).removeClass(H).attr("aria-hidden",!0)},activateTab:function(e){var t,i,n,o,s,a,l,c,u,h,p,f,m,g,v;if(!this.tabGroup.children("[data-animating]").length)return e=this.tabGroup.find(e),t=this,i=t.options.animation,n=i.open,o=d({},i.close),s=o&&"effects"in o,a=e.parent().children(),l=a.filter("."+H),c=a.index(e),o=d(s?o:d({reverse:!0},n),{hide:!0}),r.size(n.effects)?(l.kendoRemoveClass(H,{duration:o.duration}),e.kendoRemoveClass(N,{duration:o.duration})):(l.removeClass(H),e.removeClass(N)),u=t.contentAnimators,t.inRequest&&(t.xhr.abort(),t.inRequest=!1),0===u.length?(l.removeClass($),e.addClass($).css("z-index"),e.addClass(H),t._current(e),t.trigger("change"),!1):(h=u.filter("."+H),p=t.contentHolder(c),f=p.closest(".k-content"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),t._sizeScrollWrap(h),0===p.length?(h.removeClass(H).attr("aria-hidden",!0).kendoStop(!0,!0).kendoAnimate(o),!1):(e.attr("data-animating",!0),m=(e.children("."+_).data(A)||!1)&&p.is(x),g=function(){l.removeClass($),e.addClass($).css("z-index"),r.size(n.effects)?(l.kendoAddClass(z,{duration:n.duration}),e.kendoAddClass(H,{duration:n.duration})):(l.addClass(z),e.addClass(H)),l.removeAttr("aria-selected"),e.attr("aria-selected",!0),t._current(e),t._sizeScrollWrap(f),f.addClass(H).removeAttr("aria-hidden").kendoStop(!0,!0).attr("aria-expanded",!0).kendoAnimate(d({init:function(){t.trigger(y,{item:e[0],contentElement:p[0]}),r.resize(p)}},n,{complete:function(){e.removeAttr("data-animating"),t.trigger(D,{item:e[0],contentElement:p[0]}),r.resize(p),t.scrollWrap.css("height","").css("height")}}))},v=function(){m?(e.removeAttr("data-animating"),t.ajaxRequest(e,p,function(){e.attr("data-animating",!0),g(),t.trigger("change")})):(g(),t.trigger("change"))},h.removeClass(H),h.attr("aria-hidden",!0),h.attr("aria-expanded",!1),h.length?h.kendoStop(!0,!0).kendoAnimate(d({complete:v},o)):v(),!0))},contentElement:function(e){var i,n,o,s;if(isNaN(e-0))return t;if(i=this.contentElements&&this.contentElements[0]&&!r.kineticScrollNeeded?this.contentElements:this.contentAnimators,e=i&&0>e?i.length+e:e,n=RegExp("-"+(e+1)+"$"),i)for(o=0,s=i.length;s>o;o++)if(n.test(i.eq(o).closest(".k-content")[0].id))return i[o];return t},contentHolder:function(t){var i=e(this.contentElement(t)),n=i.children(".km-scroll-container");return r.support.touch&&n[0]?n:i},ajaxRequest:function(t,i,n,o){var s,a,l,c,d,u,h,p,f;t=this.tabGroup.find(t),s=this,a=e.ajaxSettings.xhr,l=t.find("."+_),c={},d=t.width()/2,u=!1,h=t.find(".k-loading").removeClass("k-complete"),h[0]||(h=e("<span class='k-loading'/>").prependTo(t)),p=2*d-h.width(),f=function(){h.animate({marginLeft:(parseInt(h.css("marginLeft"),10)||0)<d?p:0},500,f)},r.support.browser.msie&&10>r.support.browser.version&&setTimeout(f,40),o=o||l.data(A)||l.attr(g),s.inRequest=!0,s.xhr=e.ajax({type:"GET",cache:!1,url:o,dataType:"html",data:c,xhr:function(){var t=this,i=a(),n=t.progressUpload?"progressUpload":!!t.progress&&"progress";return i&&e.each([i,i.upload],function(){this.addEventListener&&this.addEventListener("progress",function(e){n&&t[n](e)},!1)}),t.noProgress=!(window.XMLHttpRequest&&"upload"in new XMLHttpRequest),i},progress:function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10)+"%";h.stop(!0).addClass("k-progress").css({width:t,marginLeft:0})}},error:function(e,t){s.trigger("error",{xhr:e,status:t})&&this.complete()},stopProgress:function(){clearInterval(u),h.stop(!0).addClass("k-progress")[0].style.cssText=""},complete:function(e){s.inRequest=!1,this.noProgress?setTimeout(this.stopProgress,500):this.stopProgress(),"abort"==e.statusText&&h.remove()},success:function(e){var a,l,c;h.addClass("k-complete");try{a=this,l=10,a.noProgress&&(h.width(l+"%"),u=setInterval(function(){a.progress({lengthComputable:!0,loaded:Math.min(l,100),total:100}),l+=10},40)),s.angular("cleanup",function(){return{elements:i.get()}}),r.destroy(i),i.html(e)}catch(e){c=window.console,c&&c.error&&c.error(e.name+": "+e.message+" in "+o),this.error(this.xhr,"error")}n&&n.call(s,i),s.angular("compile",function(){return{elements:i.get()}}),s.trigger(P,{item:t[0],contentElement:i[0]})}})}});d(V,{renderItem:function(e){e=d({tabStrip:{},group:{}},e);var t=B.empty,i=e.item;return B.item(d(e,{image:i.imageUrl?B.image:t,sprite:i.spriteCssClass?B.sprite:t,itemWrapper:B.itemWrapper},U))},renderContent:function(e){return B.content(d(e,U))}}),r.ui.plugin(V)}(window.kendo.jQuery),function(e,t){function i(e,t,i){var n,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),i||(n=e.getTimezoneOffset()-r,e.setTime(e.getTime()+n*F))}function n(){var e=new G,t=new G(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),i=new G(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-i.getTimezoneOffset())}function r(e){return 60*e.getHours()*F+e.getMinutes()*F+1e3*e.getSeconds()+e.getMilliseconds()}function o(e,t,i){var n,o=r(t),s=r(i);return!e||o==s||(n=r(e),o>n&&(n+=z),o>s&&(s+=z),n>=o&&s>=n)}function s(e){var t=e.parseFormats;e.format=f(e.format||d.getCulture(e.culture).calendars.standard.patterns.t),t=W(t)?t:[t],t.splice(0,0,e.format),e.parseFormats=t}function a(e){e.preventDefault()}var l,c,d=window.kendo,u=d.keys,h=d.parseDate,p=d._activeElement,f=d._extractFormat,m=d.support,g=m.browser,v=d.ui,y=v.Widget,_="open",b="close",w="change",k=".kendoTimePicker",x="click"+k,C="k-state-default",S="disabled",T="readonly",D="li",M="<span/>",A="k-state-focused",E="k-state-hover",I="mouseenter"+k+" mouseleave"+k,P="mousedown"+k,F=6e4,z=864e5,H="k-state-selected",R="k-state-disabled",N="aria-selected",$="aria-expanded",O="aria-hidden",L="aria-disabled",B="aria-readonly",U="aria-activedescendant",V="id",W=e.isArray,j=e.extend,q=e.proxy,G=Date,Y=new G;Y=new G(Y.getFullYear(),Y.getMonth(),Y.getDate(),0,0,0),l=function(t){var i=this,n=t.id;i.options=t,i.ul=e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:m.kineticScrollNeeded?"":"auto"}).on(x,D,q(i._click,i)).on("mouseenter"+k,D,function(){e(this).addClass(E)}).on("mouseleave"+k,D,function(){e(this).removeClass(E)}),i.list=e("<div class='k-list-container'/>").append(i.ul).on(P,a),n&&(i._timeViewID=n+"_timeview",i._optionID=n+"_option_selected",i.ul.attr(V,i._timeViewID)),i._popup(),i._heightHandler=q(i._height,i),i.template=d.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})},l.prototype={current:function(i){var n=this,r=n.options.active;return i===t?n._current:(n._current&&n._current.removeClass(H).removeAttr(N).removeAttr(V),i&&(i=e(i).addClass(H).attr(V,n._optionID).attr(N,!0),n.scroll(i[0])),n._current=i,r&&r(i),t)},close:function(){this.popup.close()},destroy:function(){var e=this;e.ul.off(k),e.list.off(k),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy()},open:function(){var e=this;e.ul[0].firstChild||e.bind(),e.popup.open(),e._current&&e.scroll(e._current[0])},dataBind:function(e){for(var t,i=this,n=i.options,r=n.format,s=d.toString,a=i.template,l=e.length,c=0,u="";l>c;c++)t=e[c],o(t,n.min,n.max)&&(u+=a(s(t,r,n.culture)));i._html(u)},refresh:function(){var e,t,o,s=this,a=s.options,l=a.format,c=n(),u=0>c,h=a.min,p=a.max,f=r(h),m=r(p),g=a.interval*F,v=d.toString,y=s.template,_=new G((+h)),b=_.getDate(),w=0,k="";for(o=u?(z+c*F)/g:z/g,f!=m&&(f>m&&(m+=z),o=(m-f)/g+1),t=parseInt(o,10);o>w;w++)w&&i(_,g,u),m&&t==w&&(e=r(_),b<_.getDate()&&(e+=z),e>m&&(_=new G((+p)))),k+=y(v(_,l,a.culture));s._html(k)},bind:function(){var e=this,t=e.options.dates;t&&t[0]?e.dataBind(t):e.refresh()},_html:function(e){var t=this;t.ul[0].innerHTML=e,t.popup.unbind(_,t._heightHandler),t.popup.one(_,t._heightHandler),t.current(null),t.select(t._value)},scroll:function(e){if(e){var t,i=this.ul[0],n=e.offsetTop,r=e.offsetHeight,o=i.scrollTop,s=i.clientHeight,a=n+r,l=this._touchScroller;l?(t=this.list.height(),n>t&&(n=n-t+r),l.scrollTo(0,-n)):i.scrollTop=o>n?n:a>o+s?a-s:o}},select:function(t){var i=this,n=i.options,r=i._current;t instanceof Date&&(t=d.toString(t,n.format,n.culture)),"string"==typeof t&&(r&&r.text()===t?t=r:(t=e.grep(i.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}),t=t[0]?t:null)),i.current(t)},setOptions:function(e){var t=this.options;e.min=h(e.min),e.max=h(e.max),this.options=j(t,e,{active:t.active,change:t.change,close:t.close,open:t.open}),this.bind()},toggle:function(){var e=this;e.popup.visible()?e.close():e.open()},value:function(e){var t=this;t._value=e,t.ul[0].firstChild&&t.select(e)},_click:function(t){var i=this,n=e(t.currentTarget);t.isDefaultPrevented()||(i.select(n),i.options.change(n.text(),!0),i.close())},_height:function(){var e=this,t=e.list,i=t.parent(".k-animation-container"),n=e.options.height;e.ul[0].children.length&&t.add(i).show().height(e.ul[0].scrollHeight>n?n:"auto").hide()},_parse:function(e){var t=this,i=t.options,n=t._value||Y;return e instanceof G?e:(e=h(e,i.parseFormats,i.culture),e&&(e=new G(n.getFullYear(),n.getMonth(),n.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_adjustListWidth:function(){var e,t,i=this.list,n=i[0].style.width,r=this.options.anchor;(i.data("width")||!n)&&(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&(g.mozilla||g.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),n=t-(i.outerWidth()-i.width()),i.css({fontFamily:r.css("font-family"),width:n}).data("width",n))},_popup:function(){var e=this,t=e.list,i=e.options,n=i.anchor;e.popup=new v.Popup(t,j(i.popup,{anchor:n,open:i.open,close:i.close,animation:i.animation,isRtl:m.isRtl(i.anchor)})),e._touchScroller=d.touchScroller(e.popup.element)},move:function(e){var i=this,n=e.keyCode,r=i.ul[0],o=i._current,s=n===u.DOWN;if(n===u.UP||s){if(e.altKey)return i.toggle(s),t;o=s?o?o[0].nextSibling:r.firstChild:o?o[0].previousSibling:r.lastChild,o&&i.select(o),i.options.change(i._current.text()),e.preventDefault()}else(n===u.ENTER||n===u.TAB||n===u.ESC)&&(e.preventDefault(),o&&i.options.change(o.text(),!0),i.close())}},l.getMilliseconds=r,d.TimeView=l,c=y.extend({init:function(e,t){var i,n,r,o=this;y.fn.init.call(o,e,t),e=o.element,t=o.options,t.min=h(e.attr("min"))||h(t.min),t.max=h(e.attr("max"))||h(t.max),s(t),o._wrapper(),o.timeView=n=new l(j({},t,{id:e.attr(V),anchor:o.wrapper,format:t.format,change:function(t,i){i?o._change(t):e.val(t)},open:function(t){o.timeView._adjustListWidth(),o.trigger(_)?t.preventDefault():(e.attr($,!0),i.attr(O,!1))},close:function(t){o.trigger(b)?t.preventDefault():(e.attr($,!1),i.attr(O,!0))},active:function(t){e.removeAttr(U),t&&e.attr(U,n._optionID)}})),i=n.ul,o._icon(),o._reset();try{e[0].setAttribute("type","text")}catch(t){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":n._timeViewID}),r=e.is("[disabled]"),r?o.enable(!1):o.readonly(e.is("[readonly]")),o._old=o._update(t.value||o.element.val()),o._oldText=e.val(),d.notify(o)},options:{name:"TimePicker",min:Y,max:Y,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[_,b,w],setOptions:function(e){var t=this,i=t._value;y.fn.setOptions.call(t,e),e=t.options,s(e),t.timeView.setOptions(e),i&&t.element.val(d.toString(i,e.format,e.culture))},dataBind:function(e){W(e)&&this.timeView.dataBind(e)},_editable:function(e){var t=this,i=e.disable,n=e.readonly,r=t._arrow.off(k),o=t.element.off(k),s=t._inputWrapper.off(k);n||i?(s.addClass(i?R:C).removeClass(i?C:R),o.attr(S,i).attr(T,n).attr(L,i).attr(B,n)):(s.addClass(C).removeClass(R).on(I,t._toggleHover),o.removeAttr(S).removeAttr(T).attr(L,!1).attr(B,!1).on("keydown"+k,q(t._keydown,t)).on("focusout"+k,q(t._blur,t)).on("focus"+k,function(){t._inputWrapper.addClass(A)}),r.on(x,q(t._click,t)).on(P,a))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;y.fn.destroy.call(e),e.timeView.destroy(),e.element.off(k),e._arrow.off(k),e._inputWrapper.off(k),e._form&&e._form.off("reset",e._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var i=this;return e===t?i._value:(i._old=i._update(e),null===i._old&&i.element.val(""),i._oldText=i.element.val(),t)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(A)},_click:function(){var e=this,t=e.element;e.timeView.toggle(),m.touch||t[0]===p()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.element.trigger(w),t.trigger(w))},_icon:function(){var t,i=this,n=i.element;t=n.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(n)),i._arrow=t.attr({role:"button","aria-controls":i.timeView._timeViewID})},_keydown:function(e){var t=this,i=e.keyCode,n=t.timeView,r=t.element.val();n.popup.visible()||e.altKey?n.move(e):i===u.ENTER&&r!==t._oldText&&t._change(r)},_option:function(e,i){var n=this,r=n.options;return i===t?r[e]:(i=n.timeView._parse(i),i&&(i=new G((+i)),r[e]=i,n.timeView.options[e]=i,n.timeView.bind()),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(E,"mouseenter"===t.type)},_update:function(e){var t=this,i=t.options,n=t.timeView,r=n._parse(e);return o(r,i.min,i.max)||(r=null),t._value=r,t.element.val(r?d.toString(r,i.format,i.culture):e),n.value(r),r},_wrapper:function(){var t,i=this,n=i.element;t=n.parents(".k-timepicker"),t[0]||(t=n.wrap(M).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(M).parent()),t[0].style.cssText=n[0].style.cssText,i.wrapper=t.addClass("k-widget k-timepicker k-header").addClass(n[0].className),n.css({width:"100%",height:n[0].style.height}),i._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){t.value(i[0].defaultValue)},t._form=r.on("reset",t._resetHandler))}}),v.plugin(c)}(window.kendo.jQuery),function(e,t){function i(i){var n=e(i.useButtonTag?"<button></button>":"<a></a>");return n.data({type:"button"}),n.attr(G,i.uid),i.attributes&&n.attr(i.attributes),i.togglable&&(n.addClass(g),i.selected&&n.addClass(k)),i.enable===!1&&n.addClass(x),i.url===t||i.useButtonTag||(n.attr("href",i.url),i.mobile&&n.attr(c.attr("role"),"button")),i.group&&n.attr(c.attr("group"),i.group),!i.togglable&&i.click&&h(i.click)&&n.data("click",i.click),i.togglable&&i.toggle&&h(i.toggle)&&n.data("toggle",i.toggle),n}function n(e){var t,i=Y.button.base(e);return i.addClass(f),e.primary&&i.addClass(T),e.align&&i.addClass("k-align-"+e.align),e.id&&i.attr("id",e.id),"overflow"!=e.showText&&e.text&&i.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),t="overflow"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&o(e,i),i}function r(e){var t,i=Y.button.base(e);return i.addClass(m+" "+f),e.primary&&i.addClass(T),e.id&&i.attr("id",e.id+"_overflow"),"toolbar"!=e.showText&&e.text&&i.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),t="toolbar"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&o(e,i),i}function o(t,i){var n,r,o,s=t.icon,a=t.spriteCssClass,l=t.imageUrl;(a||l||s)&&(n=!0,i.contents().not("span.k-sprite,span."+D+",img.k-image").each(function(t,i){(1==i.nodeType||3==i.nodeType&&e.trim(i.nodeValue).length>0)&&(n=!1)}),i.addClass(n?A:E)),s?(r=i.children("span."+D).first(),r[0]||(r=e('<span class="'+D+'"></span>').prependTo(i)),r.addClass(M+s)):a?(r=i.children("span.k-sprite").first(),r[0]||(r=e('<span class="k-sprite"></span>').prependTo(i)),r.addClass(a)):l&&(o=i.children("img.k-image").first(),o[0]||(o=e('<img alt="icon" class="k-image" />').prependTo(i)),o.attr("src",l))}function s(){var e,t=this.options.anchor,i=t.outerWidth();c.wrap(this.element).addClass("k-split-wrapper"),e="border-box"!==this.element.css("box-sizing")?i-(this.element.outerWidth()-this.element.width()):i,this.element.css({fontFamily:t.css("font-family"),"min-width":e})}function a(e){e.target.is(".k-toggle-button")||e.target.toggleClass(k,"press"==e.type)}function l(t){return t=e(t),t.hasClass("km-actionsheet")?t.closest(".km-popup-wrapper"):t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}var c=window.kendo,d=c.ui.Widget,u=e.proxy,h=c.isFunction,p="k-toolbar",f="k-button",m="k-overflow-button",g="k-toggle-button",v="k-button-group",y="k-split-button",_="k-separator",b="k-popup",w="k-toolbar-resizable",k="k-state-active",x="k-state-disabled",C="k-group-start",S="k-group-end",T="k-primary",D="k-icon",M="k-i-",A="k-button-icon",E="k-button-icontext",I="k-list-container k-split-container",P="k-split-button-arrow",F="k-overflow-anchor",z="k-overflow-container",H="k-toolbar-first-visible",R="k-toolbar-last-visible",N="click",$="toggle",O="open",L="close",B="overflowOpen",U="overflowClose",V="never",W="auto",j="always",q="k-overflow-hidden",G=c.attr("uid"),Y={button:{base:i,toolbar:n,overflow:r},buttonGroup:{base:function(t,i,n){var r,o,s=t.buttons;if(s){for(t.attributes&&n.attr(t.attributes),n.data({type:"buttonGroup"}),n.attr(G,t.uid),o=0;s.length>o;o++)s[o].uid||(s[o].uid=c.guid()),r=i(e.extend({mobile:t.mobile},s[o])),r.appendTo(n);n.children().first().addClass(C),n.children().last().addClass(S)}},toolbar:function(t){var i=e("<div></div>");return Y.buttonGroup.base(t,Y.button.toolbar,i),i.addClass(v),t.align&&i.addClass("k-align-"+t.align),t.id&&i.attr("id",t.id),i},overflow:function(t){var i=e("<li></li>");return Y.buttonGroup.base(t,Y.button.overflow,i),i.addClass((t.mobile?"":v)+" k-overflow-group"),t.id&&i.attr("id",t.id+"_overflow"),i}},splitButton:{toolbar:function(t){var i,n,r,o=e('<div class="'+y+'"></div>'),a=Y.button.toolbar(t),c=e('<a class="'+f+" "+P+'"><span class="'+(t.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-s")+'"></span></a>'),d=e('<ul class="'+I+'"></ul>'),u=t.menuButtons;for(a.appendTo(o),c.appendTo(o),d.appendTo(o),r=0;u.length>r;r++)n=Y.button.toolbar(e.extend({mobile:t.mobile,click:t.click},u[r])),n.wrap("<li></li>").parent().appendTo(d);return t.align&&o.addClass("k-align-"+t.align),t.id||(t.id=t.uid),o.attr("id",t.id+"_wrapper"),d.attr("id",t.id+"_optionlist").attr(G,t.rootUid),t.mobile&&(d=l(d)),i=d.kendoPopup({appendTo:t.mobile?e(t.mobile).children(".km-pane"):null,anchor:o,copyAnchorStyles:!1,animation:t.animation,open:s}).data("kendoPopup"),o.data({type:"splitButton",kendoPopup:i}),o.attr(G,t.uid),o},overflow:function(t){var i,n,r=e('<li class="'+y+'"></li>'),o=Y.button.overflow(t),s=t.menuButtons;for(o.appendTo(r),n=0;s.length>n;n++)i=Y.button.overflow(e.extend({mobile:t.mobile},s[n])),i.appendTo(r);return t.id&&r.attr("id",t.id+"_overflow"),r.data({type:"splitButton"}),r.attr(G,t.uid),r}},separator:{base:function(t,i){var n=e(i?"<li>&nbsp;</li>":"<div>&nbsp;</div>");return n.data({type:"separator"}),n.attr(G,t.uid),t.attributes&&n.attr(t.attributes),n.addClass(_),n},toolbar:function(e){return Y.separator.base(e,!1)},overflow:function(e){return Y.separator.base(e,!0)}},overflowAnchor:'<div class="k-overflow-anchor"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'},Q=d.extend({init:function(t,i){var n,r=this;if(d.fn.init.call(r,t,i),i=r.options,t=r.wrapper=r.element,t.addClass(p+" k-widget"),this.uid=c.guid(),t.attr(G,this.uid),r.isMobile="boolean"==typeof i.mobile?i.mobile:r.element.closest(".km-root")[0],r.animation=r.isMobile?{open:{effects:"fade"}}:{},r.isMobile&&(t.addClass("km-widget"),D="km-icon",M="km-",f="km-button",v="km-buttongroup km-widget",k="km-state-active",x="km-state-disabled"),i.resizable?(r._renderOverflow(),t.addClass(w),r.overflowUserEvents=new c.UserEvents(r.element,{threshold:5,allowSelection:!0,filter:"."+F,tap:u(r._toggleOverflow,r)}),c.onResize(function(){r.resize()})):r.popup={element:e([])},i.items&&i.items.length)for(n=0;i.items.length>n;n++)r.add(i.items[n]);r.userEvents=new c.UserEvents(document,{threshold:5,allowSelection:!0,filter:"["+G+"="+this.uid+"] ."+f+", ["+G+"="+this.uid+"] ."+m,tap:u(r._buttonClick,r),press:a,release:a}),i.resizable&&this._toggleOverflowAnchor(),c.notify(r)},events:[N,$,O,L,B,U],options:{name:"ToolBar",items:[],resizable:!0,mobile:null},destroy:function(){var t=this;t.element.find("."+y).each(function(t,i){e(i).data("kendoPopup").destroy()}),t.userEvents.destroy(),t.options.resizable&&(t.overflowUserEvents.destroy(),t.popup.destroy()),d.fn.destroy.call(t)},add:function(t){var i,n,r=Y[t.type],o=t.template,s=this,a=s.isMobile?"":"k-item k-state-default",l=t.overflowTemplate;e.extend(t,{uid:c.guid(),animation:s.animation,mobile:s.isMobile,rootUid:s.uid}),o&&!l&&(t.overflow=V),t.overflow!==V&&s.options.resizable&&(l?n=e(h(l)?l(t):l):r&&(n=(r.overflow||e.noop)(t)),n&&n.length&&("LI"!==n.prop("tagName")&&(n.removeAttr(G),n=n.wrap("<li></li>").parent(),n.attr(G,t.uid)),s._attributes(n,t),n.addClass(a).appendTo(s.popup.container),n.data("overflow")===W&&n.addClass(q),s.angular("compile",function(){return{elements:n.get()}}))),t.overflow!==j&&(o?(i=h(o)?o(t):o,i instanceof jQuery||(i=e(i.replace(/^\s+|\s+$/g,""))),i=i.wrap("<div></div>").parent(),i.attr(G,t.uid)):r&&(i=(r.toolbar||e.noop)(t)),i&&i.length&&(s._attributes(i,t),s.options.resizable?(i.appendTo(s.element).css("visibility","hidden"),s._shrink(s.element.innerWidth()),i.css("visibility","visible")):i.appendTo(s.element),s.angular("compile",function(){return{elements:i.get()}})))},remove:function(e){var t,i,n=this.element.find(e);!n.length&&this.options.resizable?(n=this.popup.element.find(e),i=n.parent().attr(G)):i=n.attr(G),t=n.data("type"),n.parent("."+y).data("type")&&(t="splitButton",n=n.parent()),"splitButton"===t&&n.data("kendoPopup").destroy(),n.add(this.popup.element.find("["+G+"='"+i+"']")).remove()},enable:function(i,n){var r=this.element.find(i).attr(G);!r&&this.popup&&(r=this.popup.element.find(i).parent("li").attr(G)),t===n&&(n=!0),n?e("["+G+"='"+r+"']").removeClass(x):e("["+G+"='"+r+"']").addClass(x)},getSelectedFromGroup:function(e){return this.element.find("."+g+"[data-group='"+e+"']").filter("."+k)},toggle:function(t,i){var n,r=e(t),o=r.data("uid"),s=r.data("group");r.hasClass(g)&&(s&&this.element.add(this.popup.element).find("."+g+"[data-group='"+s+"']").filter("."+k).removeClass(k),e.contains(this.element[0],r[0])?(n=this.popup.element.find("["+G+"='"+o+"']"),"LI"===n.prop("tagName")&&(n=n.find("."+g+":first"))):(o=o?o:r.parent().data("uid"),n=this.element.find("["+G+"='"+o+"']")),r.add(n).toggleClass(k,i))},_attributes:function(e,t){e.attr(c.attr("overflow"),t.overflow||W)},_renderOverflow:function(){var t=this,i=Y.overflowContainer;t.overflowAnchor=e(Y.overflowAnchor).addClass(f),t.element.append(t.overflowAnchor),t.isMobile?(t.overflowAnchor.append('<span class="km-icon km-more"></span>'),i=l(i)):t.overflowAnchor.append('<span class="k-icon k-i-more"></span>'),t.popup=new c.ui.Popup(i,{origin:"bottom right",position:"top right",anchor:t.overflowAnchor,animation:t.animation,appendTo:t.isMobile?e(t.isMobile).children(".km-pane"):null,copyAnchorStyles:!1,open:function(i){var n=c.wrap(t.popup.element).addClass("k-overflow-wrapper");t.isMobile?t.popup.container.css("max-height",parseFloat(e(".km-content:visible").innerHeight())-15+"px"):n.css("margin-left",(n.outerWidth()-n.width())/2+1),t.trigger(B)&&i.preventDefault()},close:function(e){t.trigger(U)&&e.preventDefault()}}),t.popup.container=t.isMobile?t.popup.element.find("."+z):t.popup.element,t.popup.container.attr(G,this.uid)},_toggleOverflowAnchor:function(){this.overflowAnchor.css(this.popup.element.children(":not(."+q+", ."+b+")").length>0?{visibility:"visible",width:""}:{visibility:"hidden",width:"1px"})},_buttonClick:function(i){var n,r,o,s,a,l,c,d,u,p=this;if(i.preventDefault(),r=e(i.target).closest("."+f,p.element),!r.hasClass(F)&&(!r.length&&p.popup&&(r=e(i.target).closest("."+m,p.popup.container)),s=r.hasClass(m)?r.parent("li").hasClass(x):r.hasClass(x),!s)){if(i.target.closest("."+P).length)return p._toggle(i),t;u=r.attr("id")?r.attr("id").replace(/(_overflow$)/,""):t,r.hasClass(g)?(l=r.data("group"),c=h(r.data("toggle"))?r.data("toggle"):null,p.toggle(r),a=r.hasClass(k),d={target:r,group:l,checked:a,id:u},c&&c.call(p,d),p.trigger($,d)):(c=h(r.data("click"))?r.data("click"):null,d={target:r,id:u},c&&c.call(p,d),p.trigger(N,d)),r.hasClass(m)&&p.popup.close(),o=r.closest(".k-split-container"),o[0]&&(n=o.data("kendoPopup"),(n?n:o.parents(".km-popup-wrapper").data("kendoPopup")).close())}},_toggle:function(t){var i,n=e(t.target).closest("."+y),r=n.data("kendoPopup");t.preventDefault(),n.hasClass(x)||(i=r.element.is(":visible")?this.trigger(L,{target:n}):this.trigger(O,{target:n}),i||r.toggle())},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;this.options.resizable&&(this.popup.close(),this._shrink(t),this._stretch(t),this._markVisibles(),this._toggleOverflowAnchor())},_childrenWidth:function(){var t=0;return this.element.children(":visible").each(function(){t+=e(this).outerWidth(!0)}),Math.ceil(t)},_shrink:function(e){var t,i,n;if(e<this._childrenWidth())for(i=this.element.children(":visible:not([data-overflow='never'], ."+F+")"),n=i.length-1;n>=0&&(t=i.eq(n),!(e>this._childrenWidth()));n--)this._hideItem(t)},_stretch:function(e){var t,i,n;if(e>this._childrenWidth())for(i=this.element.children(":hidden"),n=0;i.length>n&&(t=i.eq(n),!(e<this._childrenWidth())&&this._showItem(t,e));n++);},_hideItem:function(e){e.hide(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass(q)},_showItem:function(e,t){return!!(e.length&&t>this._childrenWidth()+e.outerWidth(!0))&&(e.show(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass(q),!0)},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),i=e.filter(":not(.k-overflow-hidden)"),n=t.filter(":visible");e.add(t).removeClass(H+" "+R),i.first().add(n.first()).addClass(H),i.last().add(n.last()).addClass(R)}});c.ui.plugin(Q)}(window.kendo.jQuery),function(e,t){function i(e){var t=new Date(2100,0,1);return t.setMinutes(-e),t}function n(e){e.preventDefault()}function r(t){var i,n=o.getCulture(t.culture).calendars.standard.patterns;t.format=c(t.format||n.g),t.timeFormat=i=c(t.timeFormat||n.t),o.DateView.normalize(t),-1===e.inArray(i,t.parseFormats)&&t.parseFormats.splice(1,0,i)}var o=window.kendo,s=o.TimeView,a=o.parseDate,l=o._activeElement,c=o._extractFormat,d=o.calendar,u=d.isInRange,h=d.restrictValue,p=d.isEqualDatePart,f=s.getMilliseconds,m=o.ui,g=m.Widget,v="open",y="close",_="change",b=".kendoDateTimePicker",w="click"+b,k="disabled",x="readonly",C="k-state-default",S="k-state-focused",T="k-state-hover",D="k-state-disabled",M="mouseenter"+b+" mouseleave"+b,A="mousedown"+b,E="month",I="<span/>",P="aria-activedescendant",F="aria-expanded",z="aria-hidden",H="aria-owns",R="aria-disabled",N="aria-readonly",$=Date,O=new $(1900,0,1),L=new $(2099,11,31),B={view:"date"},U={view:"time"},V=e.extend,W=g.extend({init:function(e,t){var i,n=this;g.fn.init.call(n,e,t),e=n.element,t=n.options,t.min=a(e.attr("min"))||a(t.min),t.max=a(e.attr("max"))||a(t.max),r(t),n._wrapper(),n._views(),n._icons(),n._reset(),n._template();try{e[0].setAttribute("type","text")}catch(t){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1}),n._midnight=f(t.min)+f(t.max)===0,i=e.is("[disabled]"),i?n.enable(!1):n.readonly(e.is("[readonly]")),n._old=n._update(t.value||n.element.val()),n._oldText=e.val(),o.notify(n)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new $(O),max:new $(L),interval:30,height:200,footer:"",start:E,depth:E,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "d")#'},events:[v,y,_],setOptions:function(e){var t,i,n,s=this,l=s._value;g.fn.setOptions.call(s,e),e=s.options,e.min=t=a(e.min),e.max=i=a(e.max),r(e),n=e.value||s._value||s.dateView._current,t&&!p(t,n)&&(t=new $(O)),i&&!p(i,n)&&(i=new $(L)),s.dateView.setOptions(e),s.timeView.setOptions(V({},e,{format:e.timeFormat,min:t,max:i})),l&&(s.element.val(o.toString(l,e.format,e.culture)),s._updateARIA(l))},_editable:function(t){var i=this,r=i.element.off(b),s=i._dateIcon.off(b),a=i._timeIcon.off(b),c=i._inputWrapper.off(b),d=t.readonly,u=t.disable;d||u?(c.addClass(u?D:C).removeClass(u?C:D),r.attr(k,u).attr(x,d).attr(R,u).attr(N,d)):(c.addClass(C).removeClass(D).on(M,i._toggleHover),r.removeAttr(k).removeAttr(x).attr(R,!1).attr(N,!1).on("keydown"+b,e.proxy(i._keydown,i)).on("focus"+b,function(){i._inputWrapper.addClass(S)}).on("focusout"+b,function(){i._inputWrapper.removeClass(S),r.val()!==i._oldText&&i._change(r.val()),i.close("date"),i.close("time")}),s.on(A,n).on(w,function(){i.toggle("date"),o.support.touch||r[0]===l()||r.focus()}),a.on(A,n).on(w,function(){i.toggle("time"),o.support.touch||r[0]===l()||r.focus()}))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},destroy:function(){var e=this;g.fn.destroy.call(e),e.dateView.destroy(),e.timeView.destroy(),e.element.off(b),e._dateIcon.off(b),e._timeIcon.off(b),e._inputWrapper.off(b),e._form&&e._form.off("reset",e._resetHandler)},close:function(e){"time"!==e&&(e="date"),this[e+"View"].close()},open:function(e){"time"!==e&&(e="date"),this[e+"View"].open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){var t="timeView";"time"!==e?e="date":t="dateView",this[e+"View"].toggle(),this[t].close()},value:function(e){
var i=this;return e===t?i._value:(i._old=i._update(e),null===i._old&&i.element.val(""),i._oldText=i.element.val(),t)},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.trigger(_),t.element.trigger(_))},_option:function(e,n){var r,o,s=this,l=s.options,c=s.timeView,d=c.options,u=s._value||s._old;if(n===t)return l[e];if(n=a(n,l.parseFormats,l.culture)){if(l.min.getTime()===l.max.getTime()&&(d.dates=[]),l[e]=new $(n.getTime()),s.dateView[e](n),s._midnight=f(l.min)+f(l.max)===0,u&&(r=p(l.min,u),o=p(l.max,u)),r||o){if(d[e]=n,r&&!o&&(d.max=i(l.interval)),o){if(s._midnight)return c.dataBind([L]),t;r||(d.min=O)}}else d.max=L,d.min=O;c.bind()}},_toggleHover:function(t){e(t.currentTarget).toggleClass(T,"mouseenter"===t.type)},_update:function(t){var n,r,s,l,c,d=this,f=d.options,m=f.min,g=f.max,v=f.dates,y=d.timeView,_=d._value,b=a(t,f.parseFormats,f.culture),w=null===b&&null===_||b instanceof Date&&_ instanceof Date;return+b===+_&&w?(c=o.toString(b,f.format,f.culture),c!==t&&d.element.val(null===b?t:c),b):(null!==b&&p(b,m)?b=h(b,m,g):u(b,m,g)||(b=null),d._value=b,y.value(b),d.dateView.value(b),b&&(s=d._old,r=y.options,v[0]&&(v=e.grep(v,function(e){return p(b,e)}),v[0]&&(y.dataBind(v),l=!0)),l||(p(b,m)&&(r.min=m,r.max=i(f.interval),n=!0),p(b,g)&&(d._midnight?(y.dataBind([L]),l=!0):(r.max=g,n||(r.min=O),n=!0))),!l&&(!s&&n||s&&!p(s,b))&&(n||(r.max=L,r.min=O),y.bind())),d.element.val(b?o.toString(b,f.format,f.culture):t),d._updateARIA(b),b)},_keydown:function(e){var t=this,i=t.dateView,n=t.timeView,r=t.element.val(),s=i.popup.visible();e.altKey&&e.keyCode===o.keys.DOWN?t.toggle(s?"time":"date"):s?(i.move(e),t._updateARIA(i._current)):n.popup.visible()?n.move(e):e.keyCode===o.keys.ENTER&&r!==t._oldText&&t._change(r)},_views:function(){var e,t,i,n,r,l,c=this,d=c.element,h=c.options,p=d.attr("id");c.dateView=e=new o.DateView(V({},h,{id:p,anchor:c.wrapper,change:function(){var t,i=e.calendar.value(),n=+i,r=+h.min,o=+h.max;(n===r||n===o)&&(t=new $((+c._value)),t.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),u(t,r,o)&&(i=t)),c._change(i),c.close("date")},close:function(e){c.trigger(y,B)?e.preventDefault():(d.attr(F,!1),i.attr(z,!0),t.popup.visible()||d.removeAttr(H))},open:function(t){c.trigger(v,B)?t.preventDefault():(c.element.val()!==c._oldText&&(l=a(d.val(),h.parseFormats,h.culture),c.dateView[l?"current":"value"](l)),i.attr(z,!1),d.attr(F,!0).attr(H,e._dateViewID),c._updateARIA(l))}})),i=e.div,r=h.min.getTime(),c.timeView=t=new s({id:p,value:h.value,anchor:c.wrapper,animation:h.animation,format:h.timeFormat,culture:h.culture,height:h.height,interval:h.interval,min:new $(O),max:new $(L),dates:r===h.max.getTime()?[new Date(r)]:[],parseFormats:h.parseFormats,change:function(i,n){i=t._parse(i),h.min>i?(i=new $((+h.min)),t.options.min=i):i>h.max&&(i=new $((+h.max)),t.options.max=i),n?(c._timeSelected=!0,c._change(i)):(d.val(o.toString(i,h.format,h.culture)),e.value(i),c._updateARIA(i))},close:function(t){c.trigger(y,U)?t.preventDefault():(n.attr(z,!0),d.attr(F,!1),e.popup.visible()||d.removeAttr(H))},open:function(e){t._adjustListWidth(),c.trigger(v,U)?e.preventDefault():(n.attr(z,!1),d.attr(F,!0).attr(H,t._timeViewID),t.options.active(t.current()))},active:function(e){d.removeAttr(P),e&&d.attr(P,t._optionID)}}),n=t.ul},_icons:function(){var t,i=this,n=i.element;t=n.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(n)),t=t.children(),i._dateIcon=t.eq(0).attr({role:"button","aria-controls":i.dateView._dateViewID}),i._timeIcon=t.eq(1).attr({role:"button","aria-controls":i.timeView._timeViewID})},_wrapper:function(){var t,i=this,n=i.element;t=n.parents(".k-datetimepicker"),t[0]||(t=n.wrap(I).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(I).parent()),t[0].style.cssText=n[0].style.cssText,n.css({width:"100%",height:n[0].style.height}),i.wrapper=t.addClass("k-widget k-datetimepicker k-header").addClass(n[0].className),i._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){t.value(i[0].defaultValue)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=o.template(this.options.ARIATemplate)},_updateARIA:function(e){var t,i=this,n=i.dateView.calendar;i.element.removeAttr(P),n&&(t=n._cell,t.attr("aria-label",i._ariaTemplate({current:e||n.current()})),i.element.attr(P,t.attr("id")))}});m.plugin(W)}(window.kendo.jQuery),function(e,t){function i(e){return v.test(e)}function n(e){return g.test(e)||/^\d+$/.test(e)}function r(e){return!i(e)&&!n(e)}function o(e,t){var n=parseInt(e,10);return i(e)&&(n=Math.floor(n*t/100)),n}function s(e,i){return function(n,r){var o,s=this.element.find(n).data(A);return 1==arguments.length?s[e]:(s[e]=r,i&&(o=this.element.data("kendo"+this.options.name),o.resize(!0)),t)}}function a(e){var t=this,i=e.orientation;t.owner=e,t._element=e.element,t.orientation=i,p(t,i===S?c:l),t._resizable=new d.ui.Resizable(e.element,{orientation:i,handle:".k-splitbar-draggable-"+i+"[data-marker="+e._marker+"]",hint:f(t._createHint,t),start:f(t._start,t),max:f(t._max,t),min:f(t._min,t),invalidClass:"k-restricted-size-"+i,resizeend:f(t._stop,t)})}var l,c,d=window.kendo,u=d.ui,h=d.keys,p=e.extend,f=e.proxy,m=u.Widget,g=/^\d+(\.\d+)?px$/i,v=/^\d+(\.\d+)?%$/i,y=".kendoSplitter",_="expand",b="collapse",w="contentLoad",k="error",x="resize",C="layoutChange",S="horizontal",T="vertical",D="mouseenter",M="click",A="pane",E="mouseleave",I="k-state-focused",P="k-"+A,F="."+P,z=m.extend({init:function(e,t){var i,n=this;m.fn.init.call(n,e,t),n.wrapper=n.element,i=n.options.orientation.toLowerCase()!=T,n.orientation=i?S:T,n._dimension=i?"width":"height",n._keys={decrease:i?h.LEFT:h.UP,increase:i?h.RIGHT:h.DOWN},n._resizeStep=10,n._marker=d.guid().substring(0,8),n._initPanes(),n.resizing=new a(n),n.element.triggerHandler("init"+y)},events:[_,b,w,k,x,C],_attachEvents:function(){var t=this,i=t.options.orientation;t.element.children(".k-splitbar-draggable-"+i).on("keydown"+y,e.proxy(t._keydown,t)).on("mousedown"+y,function(e){e.currentTarget.focus()}).on("focus"+y,function(t){e(t.currentTarget).addClass(I)}).on("blur"+y,function(i){e(i.currentTarget).removeClass(I),t.resizing&&t.resizing.end()}).on(D+y,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on(E+y,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+y,function(){t._panes().append("<div class='k-splitter-overlay k-overlay' />")}).on("mouseup"+y,function(){t._panes().children(".k-splitter-overlay").remove()}).end().children(".k-splitbar").on("dblclick"+y,f(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on(M+y,t._arrowClick(b)).end().children(".k-expand-next, .k-expand-prev").on(M+y,t._arrowClick(_)).end().end(),e(window).on("resize"+y+t._marker,f(t.resize,t))},_detachEvents:function(){var t=this;t.element.children(".k-splitbar-draggable-"+t.orientation).off(y).end().children(".k-splitbar").off("dblclick"+y).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(y),e(window).off("resize"+y+t._marker)},options:{name:"Splitter",orientation:S,panes:[]},destroy:function(){m.fn.destroy.call(this),this._detachEvents(),this.resizing&&this.resizing.destroy(),d.destroy(this.element),this.wrapper=this.element=null},_keydown:function(t){var i,n=this,r=t.keyCode,o=n.resizing,s=e(t.currentTarget),a=n._keys,l=r===a.increase,c=r===a.decrease;l||c?(t.ctrlKey?(i=s[c?"next":"prev"](),o&&o.isResizing()&&o.end(),i[n._dimension]()?n._triggerAction(b,s[c?"prev":"next"]()):n._triggerAction(_,i)):o&&o.move((c?-1:1)*n._resizeStep,s),t.preventDefault()):r===h.ENTER&&o&&(o.end(),t.preventDefault())},_initPanes:function(){var e=this.options.panes||[],t=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(i,n){"script"!=n.nodeName.toLowerCase()&&t._initPane(n,e[i])}),this.resize()},_initPane:function(t,i){t=e(t).attr("role","group").addClass(P),t.data(A,i?i:{}).toggleClass("k-scrollable",!i||i.scrollable!==!1),this.ajaxRequest(t)},ajaxRequest:function(e,t,i){var n,r=this;e=r.element.find(e),n=e.data(A),t=t||n.contentUrl,t&&(e.append("<span class='k-icon k-loading k-pane-loading' />"),d.isLocalUrl(t)?jQuery.ajax({url:t,data:i||{},type:"GET",dataType:"html",success:function(t){r.angular("cleanup",function(){return{elements:e.get()}}),e.html(t),r.angular("compile",function(){return{elements:e.get()}}),r.trigger(w,{pane:e[0]})},error:function(t,i){r.trigger(k,{pane:e[0],status:i,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var i,n=this,r=e(t.target);r.closest(".k-splitter")[0]==n.element[0]&&(i=r.children(".k-icon:not(.k-resize-handle)"),1===i.length&&(i.is(".k-collapse-prev")?n._triggerAction(b,r.prev()):i.is(".k-collapse-next")?n._triggerAction(b,r.next()):i.is(".k-expand-prev")?n._triggerAction(_,r.prev()):i.is(".k-expand-next")&&n._triggerAction(_,r.next())))},_arrowClick:function(t){var i=this;return function(n){var r,o=e(n.target);o.closest(".k-splitter")[0]==i.element[0]&&(r=o.is(".k-"+t+"-prev")?o.parent().prev():o.parent().next(),i._triggerAction(t,r))}},_updateSplitBar:function(e,t,i){var n=function(e,t){return t?"<div class='k-icon "+e+"' />":""},r=this.orientation,o=t.resizable!==!1&&i.resizable!==!1,s=t.collapsible,a=t.collapsed,l=i.collapsible,c=i.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+r).attr("role","separator").attr("aria-expanded",!(a||c)).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,o&&!a&&!c).toggleClass("k-splitbar-static-"+r,!o&&!s&&!l).html(n("k-collapse-prev",s&&!a&&!c)+n("k-expand-prev",s&&a&&!c)+n("k-resize-handle",o)+n("k-collapse-next",l&&!c&&!a)+n("k-expand-next",l&&c&&!a)),o||s||l||e.removeAttr("tabindex")},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var i=e(this),n=i.prevAll(F).first().data(A),r=i.nextAll(F).first().data(A);r&&t._updateSplitBar(i,n,r)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element.children(F)},_resize:function(){var i,n,s,a,l,c,u,h,p,f,m=this,g=m.element,v=g.children(F),y=m.orientation==S,_=g.children(".k-splitbar"),b=_.length,w=y?"width":"height",k=g[w]();0===b?(b=v.length-1,v.slice(0,b).after("<div tabindex='0' class='k-splitbar' data-marker='"+m._marker+"' />"),m._updateSplitBars(),_=g.children(".k-splitbar")):m._updateSplitBars(),_.each(function(){k-=this[y?"offsetWidth":"offsetHeight"]}),i=0,n=0,s=e(),v.css({position:"absolute",top:0})[w](function(){var a,l=e(this),c=l.data(A)||{};if(l.removeClass("k-state-collapsed"),c.collapsed)a=c.collapsedSize?o(c.collapsedSize,k):0,l.css("overflow","hidden").addClass("k-state-collapsed");else{if(r(c.size))return s=s.add(this),t;a=o(c.size,k)}return n++,i+=a,a}),k-=i,a=s.length,l=Math.floor(k/a),s.slice(0,a-1).css(w,l).end().eq(a-1).css(w,k-(a-1)*l),c=0,u=y?"height":"width",h=y?"left":"top",p=y?"offsetWidth":"offsetHeight",0===a&&(f=v.filter(function(){return!(e(this).data(A)||{}).collapsed}).last(),f[w](k+f[0][p])),g.children().css(u,g[u]()).each(function(e,t){"script"!=t.tagName.toLowerCase()&&(t.style[h]=Math.floor(c)+"px",c+=t[p])}),m._detachEvents(),m._attachEvents(),d.resize(v),m.trigger(C)},toggle:function(e,i){var n,r=this;e=r.element.find(e),n=e.data(A),(i||n.collapsible)&&(1==arguments.length&&(i=n.collapsed!==t&&n.collapsed),n.collapsed=!i,n.collapsed?e.css("overflow","hidden"):e.css("overflow",""),r.resize(!0))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,i){var n=this;return i.length&&(n.options.panes.splice(t,0,e),n._initPane(i,e),n._removeSplitBars(),n.resize(!0)),i},append:function(t){t=t||{};var i=this,n=e("<div />").appendTo(i.element);return i._addPane(t,i.options.panes.length,n)},insertBefore:function(t,i){i=e(i),t=t||{};var n=this,r=n.wrapper.children(".k-pane").index(i),o=e("<div />").insertBefore(e(i));return n._addPane(t,r,o)},insertAfter:function(t,i){i=e(i),t=t||{};var n=this,r=n.wrapper.children(".k-pane").index(i),o=e("<div />").insertAfter(e(i));return n._addPane(t,r+1,o)},remove:function(t){t=e(t);var i=this;return t.length&&(d.destroy(t),t.each(function(t,n){i.options.panes.splice(i.wrapper.children(".k-pane").index(n),1),e(n).remove()}),i._removeSplitBars(),i.options.panes.length&&i.resize(!0)),i},size:s("size",!0),min:s("min"),max:s("max")});u.plugin(z),l={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},c={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"},a.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy(),this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(t){var i=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+i.orientation+" k-state-default' />").css(i.alternateSizingProperty,t[i.alternateSizingProperty]())},_start:function(t){var i=this,r=e(t.currentTarget),o=r.prev(),s=r.next(),a=o.data(A),l=s.data(A),c=parseInt(o[0].style[i.positioningProperty],10),d=parseInt(s[0].style[i.positioningProperty],10)+s[0][i.sizingDomProperty]-r[0][i.sizingDomProperty],u=parseInt(i._element.css(i.sizingProperty),10),h=function(e){var t=parseInt(e,10);return(n(e)?t:u*t/100)||0},p=h(a.min),f=h(a.max)||d-c,m=h(l.min),g=h(l.max)||d-c;i.previousPane=o,i.nextPane=s,i._maxPosition=Math.min(d-m,c+f),i._minPosition=Math.max(c+p,d-g)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var i,n,o,s,a,l,c,u,h=this,p=e(t.currentTarget),f=h.owner;return f._panes().children(".k-splitter-overlay").remove(),t.keyCode!==d.keys.ESC&&(i=t.position,n=p.prev(),o=p.next(),s=n.data(A),a=o.data(A),l=i-parseInt(n[0].style[h.positioningProperty],10),c=parseInt(o[0].style[h.positioningProperty],10)+o[0][h.sizingDomProperty]-i-p[0][h.sizingDomProperty],u=h._element.children(F).filter(function(){return r(e(this).data(A).size)}).length,(!r(s.size)||u>1)&&(r(s.size)&&u--,s.size=l+"px"),(!r(a.size)||u>1)&&(a.size=c+"px"),f.resize(!0)),!1}}}(window.kendo.jQuery),function(e){function t(e,t){function i(e,r){var o,s;if(r=r[t])for(o=n[e]=n[e]||[],s=0;r.length>s;s++)o.push(r[s]),i(e+1,r[s])}var n=[];return i(0,e),n}function i(){return E.support.cssBorderSpacing?"":'cellspacing="0"'}function n(t,n){return t.length?"<table "+i()+' class="'+e.trim("k-scheduler-table "+(n||""))+'"><tr>'+t.join("</tr><tr>")+"</tr></table>":""}function r(e,t){return e.length?"<div style='position:relative'>"+n(e,t)+"</div>":""}function o(t,i,r){var o,s=[];if(r>0)for(o=0;t>o;o++)s.push("<th>&nbsp;</th>");return i&&s.push('<th class="k-scheduler-times-all-day">'+i.text+"</th>"),1>r?e():e('<div class="k-scheduler-times">'+n(s)+"</div>")}function s(t,i,o){var s,a,l,c,d,u,h,p,f,m,g=[];for(a=0;t.length>a;a++){for(l=t[a],c=[],d=i/l.length,s=0;l.length>s;s++)u=l[s],c.push('<th colspan="'+(u.colspan||d)+'" class="'+(u.className||"")+'">'+u.text+"</th>");g.push(c.join(""))}if(h=[],o){for(p=t[t.length-1],f=[],m=o.cellContent,s=0;p.length>s;s++)f.push('<td class="'+(p[s].className||"")+'">'+(m?m(s):"&nbsp;")+"</th>");h.push(f.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+n(g)+r(h,"k-scheduler-header-all-day")+"</div></div>")}function a(t,i){var r,o,s,a,l,c=Array(i).join().split(","),d=[];for(o=0;t.length>o;o++)for(s=t[o],a=i/s.length,r=0;s.length>r;r++)l=s[r].className||"",s[r].allDay&&(l="k-scheduler-times-all-day"),c[a*r]+='<th class="'+l+'" rowspan="'+a+'">'+s[r].text+"</th>";for(r=0;i>r;r++)d.push(c[r]);return 1>i?e():e('<div class="k-scheduler-times">'+n(d)+"</div>")}function l(){return e('<div class="k-scheduler-content"><table '+i()+' class="k-scheduler-table"/></div>')}function c(){return D=D?D:E.support.scrollbar()}function d(e,t,i){var n,r,o,s,a;for(n=e.length-1;n>=0;n--)r=u(e[n]),o=r.start,a=r.end,s=t>=o&&a>=t,(s||o>=t&&i>=a||o>=t&&i>=o)&&(t>o&&(t=o),a>i&&(i=a));return h(e,t,i)}function u(e){return{start:e.start,end:e.end}}function h(e,t,i){var n,r,o=[];for(n=0;e.length>n;n++)r=u(e[n]),(t>r.start&&r.end>t||r.start>=t&&i>=r.end)&&o.push(e[n]);return o}function p(e){return m(e)}function f(e){return m(e)}function m(e){var t,i,n,r,o,s,a,l=[];for(t=0;e.length>t;t++){for(i=e[t],n=u(i),r=null,o=0,s=l.length;s>o;o++)if(a=n.start>l[o].end,l[o].start>n.start||a){r=l[o],n.end>r.end&&(r.end=n.end);break}r||(r={start:n.start,end:n.end,events:[]},l.push(r)),r.events.push(i)}return l}function g(e,t,i,n){var r,o,s,a,l=t[0];if(l){for(r=[],o=l.dataSource.view(),s=0;o.length>s;s++)a={text:n({text:E.htmlEncode(E.getter(l.dataTextField)(o[s])),color:E.getter(l.dataColorField)(o[s]),field:l.field,title:l.title,name:l.name,value:E.getter(l.dataValueField)(o[s])}),className:"k-slot-cell"},a[e]=g(e,t.slice(1),i,n),r.push(a);return r}return i}function v(t){return function(i){if(e.isArray(i)||i instanceof E.data.ObservableArray){for(var n=0;i.length>n;n++)if(i[n]==t)return!0;return!1}return i==t}}function y(e){e.className=e.className.replace(A,"")+" k-state-selected"}var _,b,w,k,x,C,S,T,D,M,A,E=window.kendo,I=E.ui,P=I.Widget,F=E.keys,z=".kendoSchedulerView",H=Math,R='<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>';E.ui.scheduler={},_=E.Class.extend({init:function(e){this._index=e,this._timeSlotCollections=[],this._daySlotCollections=[]},addTimeSlotCollection:function(e,t){return this._addCollection(e,t,this._timeSlotCollections)},addDaySlotCollection:function(e,t){return this._addCollection(e,t,this._daySlotCollections)},_addCollection:function(e,t,i){var n=new x(e,t,this._index,i.length);return i.push(n),n},timeSlotCollectionCount:function(){return this._timeSlotCollections.length},daySlotCollectionCount:function(){return this._daySlotCollections.length},daySlotByPosition:function(e,t){return this._slotByPosition(e,t,this._daySlotCollections)},timeSlotByPosition:function(e,t){return this._slotByPosition(e,t,this._timeSlotCollections)},_slotByPosition:function(e,t,i){var n,r,o,s;for(n=0;i.length>n;n++)for(r=i[n],o=0;o<r.count();o++)if(s=r.at(o),e>=s.offsetLeft&&s.offsetLeft+s.clientWidth>e&&t>=s.offsetTop&&s.offsetTop+s.clientHeight>=t)return s},refresh:function(){var e;for(e=0;this._daySlotCollections.length>e;e++)this._daySlotCollections[e].refresh();for(e=0;this._timeSlotCollections.length>e;e++)this._timeSlotCollections[e].refresh()},timeSlotRanges:function(e,t){var i,n=this._timeSlotCollections,r=this._startSlot(e,n);return!r.inRange&&e>=r.slot.end&&(r=null),i=r,t>e&&(i=this._endSlot(t,n)),i&&!i.inRange&&i.slot.start>=t&&(i=null),null===r&&null===i?[]:(null===r&&(r={inRange:!0,slot:n[i.slot.collectionIndex].first()}),null===i&&(i={inRange:!0,slot:n[r.slot.collectionIndex].last()}),this._continuousRange(w,n,r,i))},daySlotRanges:function(e,t,i){var n,r=this._daySlotCollections,o=this._startSlot(e,r,i);if(!o.inRange&&e>=o.slot.end&&(o=null),n=o,t>e&&(n=this._endSlot(t,r,i)),n&&!n.inRange&&n.slot.start>=t&&(n=null),null===o&&null===n)return[];if(null===o)do e+=E.date.MS_PER_DAY,o=this._startSlot(e,r,i);while(!o.inRange&&e>=o.slot.end);if(null===n)do t-=E.date.MS_PER_DAY,n=this._endSlot(t,r,i);while(!n.inRange&&n.slot.start>=t);return this._continuousRange(k,r,o,n)},_continuousRange:function(e,t,i,n){var r,o,s,a,l,c,d=i.slot,u=n.slot,h=d.collectionIndex,p=u.collectionIndex,f=[];for(r=h;p>=r;r++)o=t[r],s=o.first(),a=o.last(),l=!1,c=!1,r==h&&(c=!i.inRange),r==p&&(l=!n.inRange),d.start>s.start&&(s=d),a.start>u.start&&(a=u),p>h&&(r==h?l=!0:r==p?c=!0:l=c=!0),f.push(new e({start:s,end:a,collection:o,head:l,tail:c}));return f},slotRanges:function(e,t){var i=e.startTime||E.date.toUtcTime(e.start),n=e.endTime||E.date.toUtcTime(e.end);return void 0===t&&(t=e.isMultiDay()),t?this.daySlotRanges(i,n,e.isAllDay):this.timeSlotRanges(i,n)},ranges:function(e,t,i,n){return"number"!=typeof e&&(e=E.date.toUtcTime(e)),"number"!=typeof t&&(t=E.date.toUtcTime(t)),i?this.daySlotRanges(e,t,n):this.timeSlotRanges(e,t)},_startCollection:function(e,t){var i,n;for(i=0;t.length>i;i++)if(n=t[i],n.startInRange(e))return n;return null},_endCollection:function(e,t,i){var n,r;for(n=0;t.length>n;n++)if(r=t[n],r.endInRange(e,i))return r;return null},_getCollections:function(e){return e?this._daySlotCollections:this._timeSlotCollections},continuousSlot:function(e,t){var i=t?-1:1,n=this._getCollections(e.isDaySlot),r=n[e.collectionIndex+i];return r?r[t?"last":"first"]():void 0},firstSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[0].first()},lastSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[e.length-1].last()},upSlot:function(e,t){var i=this,n=function(e,n,r){var o=0===r;return!t&&!e&&o&&i.daySlotCollectionCount()?i._daySlotCollections[0].at(n):void 0};return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,-1,n)},downSlot:function(e,t){var i=this,n=function(e,n,r){return!t&&e&&i.timeSlotCollectionCount()?i._timeSlotCollections[r].at(0):void 0};return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,1,n)},leftSlot:function(e){return this._horizontalSlot(e,-1)},rightSlot:function(e){return this._horizontalSlot(e,1)},_horizontalSlot:function(e,t){var i,n=e.index,r=e.isDaySlot,o=e.collectionIndex,s=this._getCollections(r);return r?n+=t:o+=t,i=s[o],i?i.at(n):void 0},_verticalSlot:function(e,t,i){var n,r=e.index,o=e.isDaySlot,s=e.collectionIndex,a=this._getCollections(o);return(e=i(o,s,r))?e:(o?s+=t:r+=t,n=a[s],n?n.at(r):void 0)},_collection:function(e,t){var i=t?this._daySlotCollections:this._timeSlotCollections;return i[e]},_startSlot:function(e,t,i){var n,r=this._startCollection(e,t),o=!0;return r||(r=t[0],o=!1),n=r.slotByStartDate(e,i),n||(n=r.first(),o=!1),{slot:n,inRange:o}},_endSlot:function(e,t,i){var n,r=this._endCollection(e,t,i),o=!0;return r||(r=t[t.length-1],o=!1),n=r.slotByEndDate(e,i),n||(n=r.last(),o=!1),{slot:n,inRange:o}},getSlotCollection:function(e,t){return this[t?"getDaySlotCollection":"getTimeSlotCollection"](e)},getTimeSlotCollection:function(e){return this._timeSlotCollections[e]},getDaySlotCollection:function(e){return this._daySlotCollections[e]}}),b=E.Class.extend({init:function(t){e.extend(this,t)},innerHeight:function(){var e,t=this.collection,i=this.start.index,n=this.end.index,r=0;for(e=i;n>=e;e++)r+=t.at(e).offsetHeight;return r},events:function(){return this.collection.events()},addEvent:function(e){this.events().push(e)},startSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.end:this.start},endSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.start:this.end}}),w=b.extend({innerHeight:function(){var e,t=this.collection,i=this.start.index,n=this.end.index,r=0;for(e=i;n>=e;e++)r+=t.at(e).offsetHeight;return r},outerRect:function(e,t,i){return this._rect("offset",e,t,i)},_rect:function(e,t,i,n){var r,o,s,a,l,c,d,u,h=this.start,p=this.end,f=E.support.isRtl(h.element);return"number"!=typeof t&&(t=E.date.toUtcTime(t)),"number"!=typeof i&&(i=E.date.toUtcTime(i)),n?(r=h.offsetTop,o=p.offsetTop+p[e+"Height"],f?(s=p.offsetLeft,a=h.offsetLeft+h[e+"Width"]):(s=h.offsetLeft,a=p.offsetLeft+p[e+"Width"])):(l=t-h.start,0>l&&(l=0),c=h.end-h.start,r=h.offsetTop+h[e+"Height"]*l/c,d=p.end-i,0>d&&(d=0),u=p.end-p.start,o=p.offsetTop+p[e+"Height"]-p[e+"Height"]*d/u,f?(s=Math.round(p.offsetLeft+p[e+"Width"]*d/u),a=Math.round(h.offsetLeft+h[e+"Width"]-h[e+"Width"]*l/c)):(s=Math.round(h.offsetLeft+h[e+"Width"]*l/c),a=Math.round(p.offsetLeft+p[e+"Width"]-p[e+"Width"]*d/u))),{top:r,bottom:o,left:0===s?s:s+1,right:a}},innerRect:function(e,t,i){return this._rect("client",e,t,i)}}),k=b.extend({innerWidth:function(){var e,t=this.collection,i=this.start.index,n=this.end.index,r=0,o=i!==n?"offsetWidth":"clientWidth";for(e=i;n>=e;e++)r+=t.at(e)[o];return r}}),x=E.Class.extend({init:function(e,t,i,n){this._slots=[],this._events=[],this._start=E.date.toUtcTime(e),this._end=E.date.toUtcTime(t),this._groupIndex=i,this._collectionIndex=n},refresh:function(){for(var e=0;this._slots.length>e;e++)this._slots[e].refresh()},startInRange:function(e){return e>=this._start&&this._end>e},endInRange:function(e,t){var i=t?this._end>e:this._end>=e;return e>=this._start&&i},slotByStartDate:function(e){var t,i,n=e;for("number"!=typeof n&&(n=E.date.toUtcTime(e)),t=0;this._slots.length>t;t++)if(i=this._slots[t],i.startInRange(n))return i;return null},slotByEndDate:function(e,t){var i,n,r=e;if("number"!=typeof r&&(r=E.date.toUtcTime(e)),t)return this.slotByStartDate(e,!1);for(i=0;this._slots.length>i;i++)if(n=this._slots[i],n.endInRange(r))return n;return null},count:function(){return this._slots.length},events:function(){return this._events},addTimeSlot:function(e,t,i,n){var r=new S(e,t,i,this._groupIndex,this._collectionIndex,this._slots.length,n);this._slots.push(r)},addDaySlot:function(e,t,i,n){var r=new T(e,t,i,this._groupIndex,this._collectionIndex,this._slots.length,n);this._slots.push(r)},first:function(){return this._slots[0]},last:function(){return this._slots[this._slots.length-1]},at:function(e){return this._slots[e]}}),C=E.Class.extend({init:function(e,t,i,n,r,o){this.element=e,this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft,this.start=t,this.end=i,this.element=e,this.groupIndex=n,this.collectionIndex=r,this.index=o,this.isDaySlot=!1},startDate:function(){return E.timezone.toLocalDate(this.start)},endDate:function(){return E.timezone.toLocalDate(this.end)},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(){return this.start},endOffset:function(){return this.end}}),S=C.extend({init:function(e,t,i,n,r,o,s){C.fn.init.apply(this,arguments),this.isHorizontal=!!s},refresh:function(){var e=this.element;this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft},offsetX:function(e,t){return e?this.offsetLeft+t:this.offsetLeft+t},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(t,i,n){var r,o,s,a,l;if(n)return this.start;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=E.support.isRtl(this.element),s=t-r.left,a=Math.floor(o*(s/this.offsetWidth)),l)return this.start+o-a}else s=i-r.top,a=Math.floor(o*(s/this.offsetHeight));return this.start+a},endOffset:function(t,i,n){var r,o,s,a,l;if(n)return this.end;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=E.support.isRtl(this.element),s=t-r.left,a=Math.floor(o*(s/this.offsetWidth)),l)return this.start+o-a}else s=i-r.top,a=Math.floor(o*(s/this.offsetHeight));return this.start+a}}),T=C.extend({init:function(e,t,i,n,r,o,s){C.fn.init.apply(this,arguments),this.eventCount=s,this.isDaySlot=!0,this.element.children.length?(this.firstChildHeight=this.element.children[0].offsetHeight+3,this.firstChildTop=this.element.children[0].offsetTop):(this.firstChildHeight=3,this.firstChildTop=0)},refresh:function(){this.clientHeight=this.element.clientHeight,this.offsetTop=this.element.offsetTop},startDate:function(){var e=new Date(this.start);return E.timezone.apply(e,"Etc/UTC")},endDate:function(){var e=new Date(this.end);return E.timezone.apply(e,"Etc/UTC")},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e}}),E.ui.SchedulerView=P.extend({init:function(t,i){P.fn.init.call(this,t,i),this._scrollbar=c(),this._isRtl=E.support.isRtl(t),this._resizeHint=e(),this._moveHint=e(),this._cellId=E.guid(),this._resourcesForGroups(),this._selectedSlots=[]},_isMobile:function(){var e=this.options;return e.mobile===!0&&E.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return e.mobile===!0&&E.support.mobileOS&&!E.support.mobileOS.tablet||"phone"===e.mobile},_addResourceView:function(){var e=new _(this.groups.length);return this.groups.push(e),e},dateForTitle:function(){return E.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},_changeGroup:function(e,t){var i=t?"prevGroupSlot":"nextGroupSlot",n=this[i](e.start,e.groupIndex,e.isAllDay);return n&&(e.groupIndex+=t?-1:1),n},_changeGroupContinuously:function(){return null},_changeViewPeriod:function(){return!1},_horizontalSlots:function(e,t,i,n){var r,o,s=n?"leftSlot":"rightSlot",a=t[0].start,l=t[t.length-1].end,c=this.groups[e.groupIndex];return i||(r=this._normalizeHorizontalSelection(e,t,n),r&&(a=l=r)),a=c[s](a),l=c[s](l),i||this._isVerticallyGrouped()||a&&l||(a=l=this._changeGroup(e,n)),a&&l||(o=this._continuousSlot(e,t,n),o=this._changeGroupContinuously(e,o,i,n),o&&(a=l=o)),{startSlot:a,endSlot:l}},_verticalSlots:function(e,t,i,n){var r,o,s=t[0].start,a=t[t.length-1].end,l=this.groups[e.groupIndex];return i||(r=this._normalizeVerticalSelection(e,t,n),r&&(s=a=r)),o=n?"upSlot":"downSlot",s=l[o](s,i),a=l[o](a,i),i||!this._isVerticallyGrouped()||s&&a||(s=a=this._changeGroup(e,n)),{startSlot:s,endSlot:a}},_normalizeHorizontalSelection:function(){return null},_normalizeVerticalSelection:function(e,t,i){var n;return n=i?t[0].start:t[t.length-1].end},_continuousSlot:function(){return null},constrainSelection:function(e){var t,i=this.groups[0];this.inRange(e)?i.daySlotCollectionCount()||(e.isAllDay=!1):(t=i.firstSlot(),e.isAllDay=t.isDaySlot,e.start=t.startDate(),e.end=t.endDate()),this.groups[e.groupIndex]||(e.groupIndex=0)},move:function(e,t,i){var n,r,o,s,a,l,c=!1,d=this.groups[e.groupIndex];if(d.timeSlotCollectionCount()||(e.isAllDay=!0),n=d.ranges(e.start,e.end,e.isAllDay,!1),t===F.DOWN||t===F.UP){if(c=!0,s=t===F.UP,this._updateDirection(e,n,i,s,!0),a=this._verticalSlots(e,n,i,s),!a.startSlot&&!i&&this._changeViewPeriod(e,s,!0))return c}else if((t===F.LEFT||t===F.RIGHT)&&(c=!0,s=t===F.LEFT,this._updateDirection(e,n,i,s,!1),a=this._horizontalSlots(e,n,i,s),!a.startSlot&&!i&&this._changeViewPeriod(e,s,!1)))return c;return c&&(r=a.startSlot,o=a.endSlot,i?(l=e.backward,l&&r?e.start=r.startDate():!l&&o&&(e.end=o.endDate())):r&&o&&(e.isAllDay=r.isDaySlot,e.start=r.startDate(),e.end=o.endDate()),e.events=[]),c},moveToEventInGroup:function(t,i,n,r){for(var o,s,a=t._continuousEvents||[],l=r?-1:1,c=a.length,d=r?c-1:0;c>d&&d>-1;){if(s=a[d],(!r&&s.start.startDate()>=i.startDate()||r&&s.start.startDate()<=i.startDate())&&(n.length&&(s=a[d+l]),s&&-1===e.inArray(s.uid,n))){o=!!s;break}d+=l}return s},moveToEvent:function(e,t){for(var i,n=e.groupIndex,r=this.groups[n],o=r.ranges(e.start,e.end,e.isAllDay,!1)[0].start,s=this.groups.length,a=t?-1:1,l=e.events;s>n&&n>-1&&(i=this.moveToEventInGroup(r,o,l,t),n+=a,r=this.groups[n],r&&!i);)l=[],o=t?r.lastSlot():r.firstSlot(!0);return i&&(e.events=[i.uid],e.start=i.start.startDate(),e.end=i.end.endDate(),e.isAllDay=i.start.isDaySlot,e.groupIndex=i.start.groupIndex),!!i},current:function(e){return void 0===e?this._current:(this._current=e,
void this._scrollTo(e,this.content[0]))},select:function(e){this.clearSelection(),this._selectEvents(e)||this._selectSlots(e)},_selectSlots:function(e){var t,i,n,r,o,s,a,l=e.isAllDay,c=this.groups[e.groupIndex];for(c.timeSlotCollectionCount()||(l=!0),this._selectedSlots=[],t=c.ranges(e.start,e.end,l,!1),r=0;t.length>r;r++)for(o=t[r],s=o.collection,a=o.start.index;o.end.index>=a;a++)n=s.at(a),i=n.element,i.setAttribute("aria-selected",!0),y(i),this._selectedSlots.push({start:n.startDate(),end:n.endDate(),element:i});e.backward&&(i=t[0].start.element),this.current(i)},_selectEvents:function(t){var i,n,r=!1,o=t.events,s=this.groups[t.groupIndex]._continuousEvents||[],a=s.length;if(!o[0]||!s[0])return r;for(n=e(),t.events=[],i=0;a>i;i++)e.inArray(s[i].uid,o)>-1&&(n=n.add(s[i].element),t.events.push(s[i].uid));return n[0]&&(n.addClass("k-state-selected").attr("aria-selected",!0),this.current(n.last()[0]),this._selectedSlots=[],r=!0),r},inRange:function(e){var t=this.startDate(),i=E.date.addDays(this.endDate(),1),n=e.start,r=e.end;return n>=t&&i>n&&r>t&&i>=r},_resourceValue:function(e,t){return e.valuePrimitive&&(t=E.getter(e.dataValueField)(t)),t},_resourceBySlot:function(e){var t,i,n,r,o,s=this.groupedResources,a={};if(s.length)for(t=e.groupIndex,i=s.length-1;i>=0;i--)n=s[i],r=this._resourceValue(n,n.dataSource.view()[t%n.dataSource.total()]),n.multiple&&(r=[r]),o=E.setter(n.field),o(a,r),t=Math.floor(t/n.dataSource.total());return a},_createResizeHint:function(t,i,n,r){return e(R).css({left:t,top:i,width:n,height:r})},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=e()},_removeMoveHint:function(){this._moveHint.remove(),this._moveHint=e()},_scrollTo:function(e,t){var i=e.offsetTop,n=e.offsetHeight,r=t.scrollTop,o=t.clientHeight,s=i+n,a=0;a=r>i?i:s>r+o?o>=n?s-o:i:r,t.scrollTop=a},_shouldInverseResourceColor:function(e){var t=new M(e.color).isDark(),i=this.element.css("color"),n=new M(i).isDark();return t==n},_eventTmpl:function(t,i){var n,r=this.options,o=e.extend({},E.Template,r.templateSettings),s=o.paramName,a="",l=typeof t,c={storage:{},count:0};return"function"===l?(c.storage["tmpl"+c.count]=t,a+="#=this.tmpl"+c.count+"("+s+")#",c.count++):"string"===l&&(a+=t),n=E.template(E.format(i,a),o),c.count>0&&(n=e.proxy(n,c.storage)),n},eventResources:function(e){var t,i,n,r,o,s,a,l,c,d,u=[],h=this.options;if(!h.resources)return u;for(t=0;h.resources.length>t;t++)if(i=h.resources[t],n=i.field,r=E.getter(n)(e))for(i.multiple||(r=[r]),o=i.dataSource.view(),s=0;r.length>s;s++){for(a=null,l=r[s],i.valuePrimitive||(l=E.getter(i.dataValueField)(l)),c=0;o.length>c;c++)if(o[c].get(i.dataValueField)==l){a=o[c];break}null!==a&&(d=E.getter(i.dataColorField)(a),u.push({field:i.field,title:i.title,name:i.name,text:E.getter(i.dataTextField)(a),value:l,color:d}))}return u},createLayout:function(n){var r,o,s,a,l,c=-1;for(n.rows||(n.rows=[]),r=0;n.rows.length>r;r++)if(n.rows[r].allDay){c=r;break}o=n.rows[c],c>=0&&n.rows.splice(c,1),s=this.columnLevels=t(n,"columns"),a=this.rowLevels=t(n,"rows"),this.table=e("<table "+i()+' class="k-scheduler-layout k-scheduler-'+this.name+'view"/>'),l=a[a.length-1].length,this.table.append(this._topSection(s,o,l)),this.table.append(this._bottomSection(s,a,l)),this.element.append(this.table),this._scroller()},refreshLayout:function(){var t,i,n,r,o,s,a=this,l=a.element.find(">.k-scheduler-toolbar"),c=a.element.innerHeight(),d=this._scrollbar,u=0,h=this._isRtl?"left":"right";for(t=0;l.length>t;t++)c-=l.eq(t).outerHeight();a.datesHeader&&(u=a.datesHeader.outerHeight()),a.timesHeader&&a.timesHeader.outerHeight()>u&&(u=a.timesHeader.outerHeight()),a.datesHeader&&a.timesHeader&&(i=a.datesHeader.find("table:first tr"),a.timesHeader.find("tr").height(function(t){e(this).height(i.eq(t).height())})),u&&(c-=u),a.footer&&(c-=a.footer.outerHeight()),n=function(e){var t,i;return!!e[0].style.height||(t=e.height(),e.height("auto"),i=e.height(),t!=i?(e.height(""),!0):(e.height(""),!1))},r=a.content[0],o=E.support.kineticScrollNeeded?0:d,n(a.element)&&(a.content.height(c>2*d?c:2*d+1),a.times.height(r.clientHeight),s=a.times.find("table"),s.length&&s.height(a.content.find("table")[0].clientHeight)),r.offsetWidth-r.clientWidth>0?(a.table.addClass("k-scrollbar-v"),a.datesHeader.css("padding-"+h,o-parseInt(a.datesHeader.children().css("border-"+h+"-width"),10))):a.datesHeader.css("padding-"+h,""),r.offsetHeight-r.clientHeight>0||r.clientHeight>a.content.children(".k-scheduler-table").height()?a.table.addClass("k-scrollbar-h"):a.table.removeClass("k-scrollbar-h")},_topSection:function(t,i,n){this.timesHeader=o(t.length,i,n);var r=t[t.length-1].length;return this.datesHeader=s(t,r,i),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())},_bottomSection:function(t,i,n){return this.times=a(i,n),this.content=l(t[t.length-1],i[i.length-1]),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var t,i=this;this.content.bind("scroll"+z,function(){i.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),i.times.scrollTop(this.scrollTop)}),t=E.touchScroller(this.content,{avoidScrolling:function(t){return e(t.event.target).closest(".k-event.k-event-active").length>0}}),t&&t.movable&&(this._touchScroller=t,this.content=t.scrollElement,t.movable.bind("change",function(e){i.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),i.times.scrollTop(-e.sender.y)}))},_resourcesForGroups:function(){var e,t,i,n,r=[],o=this.options.group,s=this.options.resources;if(o=o&&o.resources?o.resources:[],s&&o.length)for(e=0,t=s.length;t>e;e++)for(i=0,n=o.length;n>i;i++)s[e].name===o[i]&&r.push(s[e]);this.groupedResources=r},_createColumnsLayout:function(e,t,i){return g("columns",e,t,i)},_groupOrientation:function(){var e=this.options.group;return e&&e.resources?e.orientation:"horizontal"},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_createRowsLayout:function(e,t,i){return g("rows",e,t,i)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},destroy:function(){var e=this;P.fn.destroy.call(this),e.table&&(E.destroy(e.table),e.table.remove()),e.groups=null,e.table=null,e.content=null,e.times=null,e.datesHeader=null,e.timesHeader=null,e.footer=null,e._resizeHint=null,e._moveHint=null},calendarInfo:function(){return E.getCulture().calendars.standard},prevGroupSlot:function(e,t,i){var n,r=this.groups[t],o=r.ranges(e,e,i,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?r.timeSlotCollectionCount()?(n=r._collection(i?o.index:o.collectionIndex,!1),n.last()):(n=r._collection(r.daySlotCollectionCount()-1,!0),n.at(o.index)):r.timeSlotCollectionCount()?(n=r._collection(i?0:r.timeSlotCollectionCount()-1,i),i?n.last():n.at(o.index)):(n=r._collection(o.collectionIndex,!0),n.last())},nextGroupSlot:function(e,t,i){var n,r,o=this.groups[t],s=o.ranges(e,e,i,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o.timeSlotCollectionCount()?(r=o.daySlotCollectionCount(),n=o._collection(r?0:s.collectionIndex,r),i?n.first():n.at(s.collectionIndex)):(n=o._collection(0,!0),n.at(s.index)):o.timeSlotCollectionCount()?(n=o._collection(0,i),i?n.first():n.at(s.index)):(n=o._collection(s.collectionIndex,!0),n.first())},_updateEventForMove:function(){},_updateEventForResize:function(){},_updateEventForSelection:function(e){return e}}),M=function(e){var t,i,n,r,o,s=this,a=M.formats;if(1===arguments.length)for(e=s.resolveColor(e),r=0;a.length>r;r++)t=a[r].re,i=a[r].process,n=t.exec(e),n&&(o=i(n),s.r=o[0],s.g=o[1],s.b=o[2]);else s.r=arguments[0],s.g=arguments[1],s.b=arguments[2];s.r=s.normalizeByte(s.r),s.g=s.normalizeByte(s.g),s.b=s.normalizeByte(s.b)},M.prototype={resolveColor:function(e){return e=e||"#000","#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=M.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},percBrightness:function(){var e=this;return H.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)},isDark:function(){var e=this,t=e.percBrightness();return 180>t}},M.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],M.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},A=/\s*k-state-selected/,e.extend(I.SchedulerView,{createColumns:p,createRows:f,rangeIndex:u,collidingEvents:d,groupEqFilter:v})}(window.kendo.jQuery),function(e,t){function i(e){var t=new Date(1980,1,1,0,0,0);return c(t,g(e)),t}function n(e,t,i){return e>=t&&i>=e}function r(e,t,i,n){return n=n?i>=e:i>e,e>t&&n}function o(e,t,i,n){var r,o=e._continuousEvents,s=o[o.length-1],l=p(t.start.startDate()).getTime();if(n&&s&&p(s.start.startDate()).getTime()==l){for(r=o.length-1;r>-1&&!(o[r].isAllDay||p(o[r].start.startDate()).getTime()<l);r--);o.splice(r+1,0,{element:i,isAllDay:!0,uid:i.attr(a.attr("uid")),start:t.start,end:t.end})}else o.push({element:i,isAllDay:n,uid:i.attr(a.attr("uid")),start:t.start,end:t.end})}function s(e){var t=[],i=e.workWeekStart;for(t.push(i);e.workWeekEnd!=i;)i>6?i-=7:i++,t.push(i);return t}var a=window.kendo,l=a.ui,c=a.date.setTime,d=l.SchedulerView,u=e.extend,h=e.proxy,p=a.date.getDate,f=a.date.MS_PER_MINUTE,m=a.date.MS_PER_DAY,g=a.date.getMilliseconds,v=".kendoMultiDayView",y=a.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),_=a.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),b=a.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),w='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',k='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-n"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-s"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>',x=d.extend({init:function(e,t){var i=this;d.fn.init.call(i,e,t),i.title=i.options.title||i.options.name,i._workDays=s(i.options),i._templates(),i._editable(),i.calculateDateRange(),i._groups(),i._currentTime()},_currentTimeMarkerUpdater:function(){var t,i,n,r,o,s,l,c,d,u,h=new Date,p=this.options;for(p.currentTimeMarker.useLocalTimezone===!1&&(t=p.dataSource.options.schema.timezone,p.dataSource&&t&&(i=a.timezone.offset(h,t),h=a.timezone.convert(h,h.getTimezoneOffset(),i))),this.times.find(".k-current-time").remove(),n=p.group&&"horizontal"!=p.group.orientation?this.groups.length:1,r=0;n>r;r++){if(o=this.groups[r],s=a.date.toUtcTime(h),l=o.timeSlotRanges(s,s+1),0===l.length)return;c=l[0].collection,d=c.slotByStartDate(h),d&&(u=e("<div class='k-current-time'></div>"),u.appendTo(this.times).css({top:Math.round(l[0].innerRect(h,new Date(h.getTime()+1),!1).top),height:"1px",right:"1px",left:0}))}},_currentTime:function(){var e,i=this,n=i.options.currentTimeMarker;n!==!1&&n.updateInterval!==t&&(e=n.updateInterval,i._currentTimeMarkerUpdater(),i._currentTimeUpdateTimer=setInterval(h(this._currentTimeMarkerUpdater,i),e))},_updateResizeHint:function(e,t,i,n){var r,o,s,l,c,u,h,p,f,m,g=e.isMultiDay(),v=this.groups[t],y=v.ranges(i,n,g,e.isAllDay);for(this._removeResizeHint(),r=0;y.length>r;r++)o=y[r],s=o.startSlot(),l=s.offsetWidth,c=s.clientHeight,u=s.offsetTop,g?l=o.innerWidth():(h=o.outerRect(i,n,this.options.snap),u=h.top,c=h.bottom-h.top),p=d.fn._createResizeHint.call(this,s.offsetLeft,u,l,c),this._resizeHint=this._resizeHint.add(p);f="t",m=this.content,g&&(f="M/dd",m=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),m.length||(m=this.content)),this._resizeHint.appendTo(m),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(i),f)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(n),f))},_updateMoveHint:function(e,t,i){var n,r,o,s,l,c,d,u=e.isMultiDay(),h=this.groups[t],p=a.date.toUtcTime(e.start)+i,f=p+e.duration(),m=h.ranges(p,f,u,e.isAllDay);for(p=a.timezone.toLocalDate(p),f=a.timezone.toLocalDate(f),this._removeMoveHint(),!u&&(0===g(f)||g(f)<g(this.startTime()))&&m.length>1&&m.pop(),n=0;m.length>n;n++)r=m[n],o=r.start,s=this._createEventElement(e.clone({start:p,end:f}),!u),s.addClass("k-event-drag-hint"),l={left:o.offsetLeft+2,top:o.offsetTop},this._isRtl&&(l.left=.1*o.clientWidth+o.offsetLeft+2),u?l.width=r.innerWidth()-4:(c=r.outerRect(p,f,this.options.snap),l.top=c.top,l.height=c.bottom-c.top,l.width=.9*o.clientWidth-4),s.css(l),this._moveHint=this._moveHint.add(s);d=this.content,u&&(d=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),d.length||(d=this.content)),this._moveHint.appendTo(d)},_slotByPosition:function(e,t){var i,n,r,o;for(this._isVerticallyGrouped()?(n=this.content.offset(),t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft):n=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),n&&(e-=n.left,t-=n.top),e=Math.ceil(e),t=Math.ceil(t),o=0;this.groups.length>o;o++)if(r=this.groups[o],i=r.daySlotByPosition(e,t))return i;for(n&&(e+=n.left,t+=n.top),n=this.content.offset(),e-=n.left,t-=n.top,this._isVerticallyGrouped()||(t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft),e=Math.ceil(e),t=Math.ceil(t),o=0;this.groups.length>o;o++)if(r=this.groups[o],i=r.timeSlotByPosition(e,t))return i;return null},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources;return!e.length||this._isVerticallyGrouped()?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var i,n,r,o,s,a,l,c,d,u,h,p,f,m,v,y,_=this._timeSlotInterval(),b=this.content.find("tr:not(.k-scheduler-header-all-day)");for(b.attr("role","row"),i=b.length,this._isVerticallyGrouped()&&(i=Math.floor(i/e)),n=0;e>n;n++)for(r=0,this._isVerticallyGrouped()&&(r=n),o=r*i,a=0,this._isVerticallyGrouped()||(a=n);(r+1)*i>o;){for(l=b[o].children,c=this.groups[n],o%i===0&&(s=g(new Date((+this.startTime())))),d=a*t;(a+1)*t>d;d++)u=l[d],h=d%t,p=c.getTimeSlotCollection(h),f=this._dates[h],m=Date.UTC(f.getFullYear(),f.getMonth(),f.getDate()),v=m+s,y=v+_,u.setAttribute("role","gridcell"),u.setAttribute("aria-selected",!1),p.addTimeSlot(u,v,y);s+=_,o++}},_daySlotGroups:function(e,t){var i,n,r,o,s,l,c,d,u,h,p,f;for(i=this.element.find(this._isVerticallyGrouped()?".k-scheduler-header-all-day":".k-scheduler-header-all-day tr"),i.attr("role","row"),n=0;e>n;n++)for(r=0,this._isVerticallyGrouped()&&(r=n),o=this.groups[n],s=o.getDaySlotCollection(0),l=i[r].children,c=0,this._isVerticallyGrouped()||(c=n),d=0,u=c*t;(c+1)*t>u;u++)h=l[u],u%t===0&&(d=0),p=this._dates[d],f=Date.UTC(p.getFullYear(),p.getMonth(),p.getDate()),d++,h.setAttribute("role","gridcell"),h.setAttribute("aria-selected",!1),s.addDaySlot(h,f,f+a.date.MS_PER_DAY)},_groups:function(){var e,t,i,n=this._groupCount(),r=this._columnCountInResourceView();for(this.groups=[],e=0;n>e;e++){for(t=this._addResourceView(e),i=0;r>i;i++)t.addTimeSlotCollection(this._dates[i],a.date.addDays(this._dates[i],1));this.options.allDaySlot&&t.addDaySlotCollection(this._dates[0],a.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(n,r),this.options.allDaySlot&&this._daySlotGroups(n,r)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",allDaySlot:!0,showWorkHours:!1,title:"",startTime:a.date.today(),endTime:a.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:y,allDayEventTemplate:_,dateHeaderTemplate:b,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=u({},a.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,k),this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,w),this.majorTimeHeaderTemplate=a.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=a.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=a.template(e.dateHeaderTemplate,t),this.slotTemplate=a.template(e.slotTemplate,t),this.allDaySlotTemplate=a.template(e.allDaySlotTemplate,t),this.groupHeaderTemplate=a.template(e.groupHeaderTemplate,t)},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+v,".k-event a:has(.k-si-close)",function(i){t.trigger("remove",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),i.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+v,".k-scheduler-content td",function(i){var n,r;e(this).parent().hasClass("k-scheduler-header-all-day")||(n=t._slotByPosition(i.pageX,i.pageY),n&&(r=t._resourceBySlot(n),t.trigger("add",{eventInfo:u({start:n.startDate(),end:n.endDate()},r)})),i.preventDefault())}).on("dblclick"+v,".k-scheduler-header-all-day td",function(e){var i,n=t._slotByPosition(e.pageX,e.pageY);n&&(i=t._resourceBySlot(n),t.trigger("add",{eventInfo:u({},{isAllDay:!0,start:a.date.getDate(n.startDate()),end:a.date.getDate(n.startDate())},i)})),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+v,".k-event",function(i){t.trigger("edit",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),i.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new a.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(i){var n,r;e(i.target).parent().hasClass("k-scheduler-header-all-day")||(n=t._slotByPosition(i.x.location,i.y.location),n&&(r=t._resourceBySlot(n),t.trigger("add",{eventInfo:u({start:n.startDate(),end:n.endDate()},r)})),i.preventDefault())}}),t._allDayUserEvents=new a.UserEvents(t.element,{filter:".k-scheduler-header-all-day td",tap:function(e){var i,n=t._slotByPosition(e.x.location,e.y.location);n&&(i=t._resourceBySlot(n),t.trigger("add",{eventInfo:u({},{isAllDay:!0,start:a.date.getDate(n.startDate()),end:a.date.getDate(n.startDate())},i)})),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new a.UserEvents(t.element,{filter:".k-event",tap:function(i){var n=e(i.target).closest(".k-event");n.hasClass("k-event-active")||t.trigger("edit",{uid:n.attr(a.attr("uid"))}),i.preventDefault()}}))},_layout:function(e){var t,i,n,r=[],o=[],s=this.options,l=this;for(t=0;e.length>t;t++)i={},i.text=l.dateHeaderTemplate({date:e[t]}),a.date.isToday(e[t])&&(i.className="k-today"),r.push(i);return n=this.groupedResources,s.allDaySlot&&o.push({text:s.messages.allDay,allDay:!0,cellContent:function(t){var i=t;return t=n.length&&"vertical"!==l._groupOrientation()?t%e.length:t,l.allDaySlotTemplate({date:e[t],resources:function(){return l._resourceBySlot({groupIndex:i})}})}}),this._forTimeRange(this.startTime(),this.endTime(),function(e,t,i,n){var r=t?l.majorTimeHeaderTemplate:l.minorTimeHeaderTemplate,s={text:r({date:e}),className:n?"k-slot-cell":""};o.push(s)}),n.length&&("vertical"===this._groupOrientation()?o=this._createRowsLayout(n,o,this.groupHeaderTemplate):r=this._createColumnsLayout(n,r,this.groupHeaderTemplate)),{columns:r,rows:o}},_footer:function(){var t,i,n,r=this.options;r.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',i=r.footer.command,i&&"workDay"===i?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),n=this,this.footer.on("click"+v,".k-scheduler-fullday",function(e){e.preventDefault(),n.trigger("navigate",{view:n.name||r.name,date:n.startDate(),isWorkDay:!r.showWorkHours})}))},_forTimeRange:function(e,t,n,r){var o,s,a,l,d,u,h,p,v,y,_,b,w,k,x,C;for(e=i(e),t=i(t),o=this,s=g(e),a=g(t),l=o.options.minorTickCount,d=o.options.majorTick*f,u=d/l||1,h=new Date((+e)),p=h.getDate(),y=0,b="",_=m/u,s!=a&&(s>a&&(a+=m),_=(a-s)/u),_=Math.round(_);_>y;y++)w=y%(d/u),k=0===w,x=l-1>w,C=w===l-1,b+=n(h,k,x,C),c(h,u,!1);return a&&(v=g(h),p<h.getDate()&&(v+=m),v>a&&(h=new Date((+t)))),r&&(b+=r(h)),b},_content:function(e){var t,i,n,r=this,o=r.options,s=r.startTime(),l=this.endTime(),c=1,d=1,u=e.length,h="",p=this.groupedResources,f=this.slotTemplate,m=this.allDaySlotTemplate,g=!1;for(p.length&&(g="vertical"===r._groupOrientation(),g?(d=this._rowCountForLevel(this.rowLevels.length-2),o.allDaySlot&&(t=function(t){var i,n,o='<tr class="k-scheduler-header-all-day">',s=function(){return r._resourceBySlot({groupIndex:t})};for(i=0,n=e.length;n>i;i++)o+="<td>"+m({date:e[i],resources:s})+"</td>";return o+"</tr>"})):c=this._columnCountForLevel(this.columnLevels.length-2)),h+="<tbody>",i=function(t,i){var o,s,l,d,h="",p="",m=0;for(h="<tr"+(i?' class="k-middle-row"':"")+">",d=function(e){return function(){return r._resourceBySlot({groupIndex:e})}};c>m;m++)for(o=0,s=u;s>o;o++)p="",a.date.isToday(e[o])&&(p+="k-today"),(a.date.getMilliseconds(t)<a.date.getMilliseconds(r.options.workDayStart)||a.date.getMilliseconds(t)>=a.date.getMilliseconds(r.options.workDayEnd)||!r._isWorkDay(e[o]))&&(p+=" k-nonwork-hour"),h+="<td"+(""!==p?' class="'+p+'"':"")+">",l=a.date.getDate(e[o]),a.date.setTime(l,a.date.getMilliseconds(t)),h+=f({date:l,resources:d(g?n:m)}),h+="</td>";return h+="</tr>"},n=0;d>n;n++)h+=t?t(n):"",h+=this._forTimeRange(s,l,i);h+="</tbody>",this.content.find("table").append(h)},_isWorkDay:function(e){var t,i=e.getDay(),n=this._workDays;for(t=0;n.length>t;t++)if(n[t]===i)return!0;return!1},_render:function(t){var i,n=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout(),i=this.element.find(".k-scheduler-header-all-day td"),i.length&&(this._allDayHeaderHeight=i.first()[0].clientHeight),n.datesHeader.on("click"+v,".k-nav-day",function(t){var i=e(t.currentTarget).closest("th"),r=i.offset(),o=n._slotByPosition(r.left,r.top+i.outerHeight());n.trigger("navigate",{view:"day",date:o.startDate()})})},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=g(this.endTime())||m;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),e.datesHeader&&e.datesHeader.off(v),e.element&&e.element.off(v),e.footer&&e.footer.remove(),d.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(e.options.editable.create!==!1&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),e.options.editable.update!==!1&&e._editUserEvents.destroy())},inRange:function(e){var t=d.fn.inRange.call(this,e),i=g(this.startTime()),n=g(this.endTime())||a.date.MS_PER_DAY,r=g(e.start),o=g(e.end)||a.date.MS_PER_DAY;return t&&r>=i&&n>=o},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*f},_timeSlotIndex:function(e){var t=this.options,i=g(e),n=g(this.startTime()),r=t.majorTick/t.minorTickCount*f;return(i-n)/r},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var i,r,o,s,l=this._dates||[],c=1;for(i=0,r=l.length;r>i;i++)if(o=a.date.getDate(l[i]),s=new Date(a.date.getDate(l[i]).getTime()+m-(t?0:1)),n(e,o,s))return i*c;return-1},_positionAllDayEvent:function(t,i){var n,r,o,s,a,l,c,u=i.innerWidth(),h=i.start.index,p=i.end.index,f=d.collidingEvents(i.events(),h,p),m=this._headerColumnCount||0,g=2,v=h!==p?5:4,y=this._allDayHeaderHeight,_=i.startSlot();for(t.css({left:_.offsetLeft+g,width:u-v}),i.addEvent({slotIndex:h,start:h,end:p,element:t}),f.push({slotIndex:h,start:h,end:p,element:t}),n=d.createRows(f),n.length&&n.length>m&&(this._headerColumnCount=n.length),r=i.start.offsetTop,o=0,s=n.length;s>o;o++)for(a=n[o].events,l=0,c=a.length;c>l;l++)e(a[l].element).css({top:r+o*y})},_arrangeColumns:function(e,t,i,n){var r,o,s,a,l,c,u,h,p,f,m,g=n.start;for(e={element:e,slotIndex:g.index,start:t,end:t+i},o=g.clientWidth,s=.1*o,l=n.events(),c=d.collidingEvents(l,e.start,e.end),n.addEvent(e),c.push(e),r=d.createColumns(c),u=(o-s)/r.length,h=0,p=r.length;p>h;h++)for(a=r[h].events,f=0,m=a.length;m>f;f++)a[f].element[0].style.width=u-4+"px",a[f].element[0].style.left=(this._isRtl?s:0)+g.offsetLeft+h*u+2+"px"},_positionEvent:function(e,t,i){var n=e.startTime||e.start,r=e.endTime||e.end,o=i.innerRect(n,r,!1),s=o.bottom-o.top-2;0>s&&(s=0),t.css({top:o.top,height:s}),this._arrangeColumns(t,o.top,t[0].clientHeight,i)},_createEventElement:function(t,i,r,o){var s,l,c,d,h,f,v=i?this.eventTemplate:this.allDayEventTemplate,y=this.options,_=y.editable,b=this._isMobile(),w=_&&_.destroy!==!1&&!b,k=_&&_.resize!==!1,x=p(this.startDate()),C=p(this.endDate()),S=g(this.startTime()),T=g(this.endTime()),D=t._time("start"),M=t._time("end");return S>=T&&(T=g(new Date(this.endTime().getTime()+m-1))),i||t.isAllDay||(C=new Date(C.getTime()+m)),l=t.start,c=t.end,t.isAllDay&&(c=p(t.end)),!n(p(l),x,C)&&!n(c,x,C)||i&&S>D&&M>T?s=!0:p(l)<x||i&&S>D?o=!0:(c>C&&!i||i&&M>T)&&(r=!0),d=this.eventResources(t),t.startTime&&(l=new Date(D),l=a.timezone.apply(l,"Etc/UTC")),t.endTime&&(c=new Date(M),c=a.timezone.apply(c,"Etc/UTC")),h=u({},{ns:a.ns,resizable:k,showDelete:w,middle:s,head:r,tail:o,singleDay:1==this._dates.length,resources:d,inverseColor:!(!d||!d[0])&&this._shouldInverseResourceColor(d[0])},t,{start:l,end:c}),f=e(v(h)),this.angular("compile",function(){return{elements:f,data:[{dataItem:h}]}}),f},_isInTimeSlot:function(e){var t,i=this.startTime(),n=this.endTime(),o=e.startTime||e.start,s=e.endTime||e.end;return g(n)===g(a.date.getDate(n))&&(n=a.date.getDate(n),c(n,m-1)),e._date("end")>e._date("start")&&(s=+e._date("end")+(m-1)),s-=e._date("end"),o-=e._date("start"),n=g(n),i=g(i),i===o&&o===s||(t=o!==n,r(o,i,n,t)||r(s,i,n,t)||r(i,o,s)||r(n,o,s))},_isInDateSlot:function(e){var t=this.groups[0],i=t.firstSlot().start,r=t.lastSlot().end-1,o=a.date.toUtcTime(e.start),s=a.date.toUtcTime(e.end);return(n(o,i,r)||n(s,i,r)||n(i,o,s)||n(r,o,s))&&(!n(s,i,i)||n(s,o,o)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){var t,i;if(this._height!==e&&(this._height=e,t=this.element.find(".k-scheduler-header-all-day td"),t.length))for(t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e),i=0;this.groups.length>i;i++)this.groups[i].refresh()},_renderEvents:function(e,t){var i,n,r,s,a,l,c,d,u,h,p,f,g,v,y,_=this.datesHeader.find(".k-scheduler-header-wrap > div");for(n=0,r=e.length;r>n;n++)if(i=e[n],this._isInDateSlot(i))if(s=i.isAllDay||i.end.getTime()-i.start.getTime()>=m,a=s&&!this._isVerticallyGrouped()?_:this.content,s)this.options.allDaySlot&&(d=this.groups[t],d._continuousEvents||(d._continuousEvents=[]),c=d.slotRanges(i),c.length&&(l=this._createEventElement(i,!s),this._positionAllDayEvent(l,c[0]),o(d,c[0],l,!0),l.appendTo(a)));else if(this._isInTimeSlot(i))for(d=this.groups[t],d._continuousEvents||(d._continuousEvents=[]),c=d.slotRanges(i),u=c.length,h=0;u>h;h++)p=c[h],f=i.start,g=i.end,u>1&&(0===h?g=p.end.endDate():h==u-1?f=p.start.startDate():(f=p.start.startDate(),g=p.end.endDate())),v=i.clone({start:f,end:g,startTime:i.startTime,endTime:i.endTime}),this._isInTimeSlot(v)&&(y=p.head,l=this._createEventElement(i,!s,y,p.tail),l.appendTo(a),this._positionEvent(v,l,p),o(d,p,l,!1))},render:function(t){var i,r,o,s,l;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new a.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),i=[],this._eventsByResource(t,this.groupedResources,i),r=this,o=e.map(this._dates,function(t){
return Math.max.apply(null,e.map(i,function(i){return e.grep(i,function(e){return e.isMultiDay()&&n(t,p(e.start),p(e.end))}).length}))}),s=Math.max.apply(null,o),this._updateAllDayHeaderHeight((s+1)*this._allDayHeaderHeight),l=0;i.length>l;l++)this._renderEvents(i[l],l);this.refreshLayout(),this.trigger("activate")},_eventsByResource:function(e,t,i){var n,r,o,s,l=t[0];if(l)for(n=l.dataSource.view(),r=0;n.length>r;r++)o=this._resourceValue(l,n[r]),s=new a.data.Query(e).filter({field:l.field,operator:d.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(s,t.slice(1),i):i.push(s);else i.push(e)},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(e,t,i,n,r){var o=e.isAllDay,s=t[0].start,a=t[t.length-1].end;i&&(r?o||s.index!==a.index||s.collectionIndex!==a.collectionIndex||(e.backward=n):(o&&s.index===a.index||!o&&s.collectionIndex===a.collectionIndex)&&(e.backward=n))},_changeViewPeriod:function(e,i,n){var r,o,s,a;return n?t:(r=i?this.previousDate():this.nextDate(),o=e.start,s=e.end,e.start=new Date(r),e.end=new Date(r),a=e.isAllDay?m:g(s),c(e.start,g(o)),c(e.end,a),this._isVerticallyGrouped()||(e.groupIndex=i?this.groups.length-1:0),e.events=[],!0)}});u(!0,l,{MultiDayView:x,DayView:x.extend({options:{name:"DayView",title:"Day"},name:"day"}),WeekView:x.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}"},name:"week",calculateDateRange:function(){var e,t,i=this.options.date,n=a.date.dayOfWeek(i,this.calendarInfo().firstDay,-1),r=[];for(e=0,t=7;t>e;e++)r.push(n),n=a.date.nextDay(n);this._render(r)}}),WorkWeekView:x.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}"},name:"workWeek",nextDate:function(){return a.date.dayOfWeek(a.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=a.date.dayOfWeek(e,this.options.workWeekStart,-1),i=a.date.dayOfWeek(t,this.options.workWeekEnd,1),n=[];i>=t;)n.push(t),t=a.date.nextDay(t);this._render(n)}})})}(window.kendo.jQuery),function(e){function t(e){var t,i,n=0;for(t=0,i=e.length;i>t;t++)n+=e[t].items.length;return n}function i(e,t){return e.valuePrimitive&&(t=o.getter(e.dataValueField)(t)),t}function n(e){for(var t,i=0,n=e.length,o=[];n>i;i++)t=e[i],t.groups?(t=r(t.groups),o=o.concat(t)):o=o.concat(r(t.items));return o}function r(e){for(var t=[].concat(e),i=t.shift(),n=[],r=[].push;i;)i.groups?r.apply(t,i.groups):i.items?r.apply(t,i.items):r.call(n,i),i=t.shift();return n}var o=window.kendo,s=o.ui,a=".kendoAgendaView",l='<div class="k-task" title="#:title.replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-exception"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #{0}#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</div>';s.AgendaView=s.SchedulerView.extend({init:function(t,i){s.SchedulerView.fn.init.call(this,t,i),i=this.options,i.editable&&(i.editable=e.extend({delete:!0},i.editable,{create:!1,update:!1})),this.title=i.title,this.name="agenda",this._eventTemplate=this._eventTmpl(i.eventTemplate,l),this._dateTemplate=o.template(i.eventDateTemplate),this._groupTemplate=o.template(i.eventGroupTemplate),this._timeTemplate=o.template(i.eventTimeTemplate),this.element.on("mouseenter"+a,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+a,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+a,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-si-close)","_remove"),this._renderLayout(i.date)},_mouseenter:function(t){e(t.currentTarget).addClass("k-state-hover")},_mouseleave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_remove:function(t){t.preventDefault(),this.trigger("remove",{uid:e(t.currentTarget).closest(".k-task").attr(o.attr("uid"))})},nextDate:function(){return o.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return o.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e,this._endDate=o.date.addDays(e,7),this.createLayout(this._layout()),this.table.addClass("k-scheduler-agenda")},_layout:function(){var e,t,i,n=[{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}];if(this._isMobilePhoneView()||n.splice(0,0,{text:this.options.messages.date,className:"k-scheduler-datecolumn"}),e=this.groupedResources,e.length){for(t=[],i=0;e.length>i;i++)t.push({text:"",className:"k-scheduler-groupcolumn"});n=t.concat(n)}return{columns:n}},_tasks:function(e){var t,i,n,r,s,a,l,c=[];for(t=0;e.length>t;t++)if(i=e[t],n=i.start,r=i.end,s=(o.date.getDate(r)-o.date.getDate(n))/o.date.MS_PER_DAY+1,a=i.clone(),a.startDate=o.date.getDate(n),a.startDate>=this.startDate()&&c.push(a),s>1)for(a.end=o.date.nextDay(n),a.head=!0,l=1;s>l;l++)n=a.end,a=i.clone(),a.start=n,a.startDate=o.date.getDate(n),a.end=o.date.nextDay(n),l==s-1?(a.end=new Date(a.start.getFullYear(),a.start.getMonth(),a.start.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),a.tail=!0):(a.isAllDay=!0,a.middle=!0),a.end<=this.endDate()&&a.start>=this.startDate()&&c.push(a);return new o.data.Query(c).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(e,t){var i,n,r,s,a,l,c,d,u,h=[],p=this.options.editable,f=p&&p.destroy!==!1&&!this._isMobile(),m=this._isMobilePhoneView();for(i=0;e.length>i;i++)for(n=e[i].value,r=e[i].items,s=o.date.isToday(n),a=0;r.length>a;a++){if(l=r[a],c=[],d=m?[]:c,0===i&&0===a&&t.length)for(u=0;t.length>u;u++)d.push(o.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',t[u].rowSpan,this._groupTemplate({value:t[u].text}),t[u].className));0===a&&(m?(d.push(o.format('<td class="k-scheduler-datecolumn" colspan="2">{0}</td>',this._dateTemplate({date:n}))),h.push('<tr role="row" aria-selected="false"'+(s?' class="k-today">':">")+d.join("")+"</tr>")):c.push(o.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>',r.length,this._dateTemplate({date:n}),i!=e.length-1||t.length?"":" k-last",t.length?"":" k-first"))),l.format=l.head?"{0:t}":l.tail?"{1:t}":"{0:t}-{1:t}",l.resources=this.eventResources(l),c.push(o.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>',l.tail||l.middle?'<span class="k-icon k-i-arrow-w"></span>':"",this._timeTemplate(l.clone({start:l.startTime||l.start,end:l.endTime||l.end})),l.head||l.middle?'<span class="k-icon k-i-arrow-e"></span>':"",this._eventTemplate(l.clone({showDelete:f})))),h.push('<tr role="row" aria-selected="false"'+(s?' class="k-today">':">")+c.join("")+"</tr>")}return h.join("")},render:function(e){var t,i,r=this.content.find("table").empty(),o=[];e.length>0&&(t=this.groupedResources,t.length?(o=this._createGroupConfiguration(e,t,null),this._renderGroups(o,r,[])):(o=this._tasks(e),r.append(this._renderTaskGroups(o,[])))),i=this._eventsList=n(o),this._angularItems(r,i),this.refreshLayout(),this.trigger("activate")},_angularItems:function(e,t){this.angular("compile",function(){var i=[],n=t.map(function(t){return i.push({dataItem:t}),e.find(".k-task["+o.attr("uid")+"="+t.uid+"]")});return{elements:n,data:i}})},_renderGroups:function(e,t,i){var n,r,o;for(n=0,r=e.length;r>n;n++)o=i.splice(0),o.push(e[n]),e[n].groups?this._renderGroups(e[n].groups,t,o):t.append(this._renderTaskGroups(e[n].items,o))},_createGroupConfiguration:function(e,n,r){var a,l,c,d,u,h,p,f=n[0],m=[],g=f.dataSource.view(),v=this._isMobilePhoneView();for(a=0;g.length>a;a++)l=i(f,g[a]),c=new o.data.Query(e).filter({field:f.field,operator:s.SchedulerView.groupEqFilter(l)}).toArray(),c.length&&(d=this._tasks(c),u=r?"":" k-first",a===g.length-1&&(!r||r.className.indexOf("k-last")>-1)&&(u+=" k-last"),h={text:o.getter(f.dataTextField)(g[a]),value:l,rowSpan:0,className:u},n.length>1?(h.groups=this._createGroupConfiguration(c,n.slice(1),h),r&&(r.rowSpan+=h.rowSpan)):(h.items=d,p=t(h.items),v&&(p+=h.items.length),h.rowSpan=p,r&&(r.rowSpan+=p)),m.push(h));return m},selectionByElement:function(t){var i,n,r;return t=e(t),t.hasClass("k-scheduler-datecolumn")?void 0:(this._isMobile()?(r=t.parent(),i=r.parent().children().filter(function(){return e(this).children(":not(.k-scheduler-datecolumn)").length}).index(r)):i=t.parent().index(),n=this._eventsList[i],{index:i,start:n.start,end:n.end,isAllDay:n.isAllDay,uid:n.uid})},select:function(e){this.clearSelection();var t=this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected").attr("aria-selected",!0)[0];this.current(t)},move:function(e,t){var i,n=!1,r=e.index;return t==o.keys.UP?(r--,n=!0):t==o.keys.DOWN&&(r++,n=!0),n&&(i=this._eventsList[r],i&&(e.start=i.start,e.end=i.end,e.isAllDay=i.isAllDay,e.events=[i.uid],e.index=r)),n},moveToEvent:function(){return!1},constrainSelection:function(e){var t=this._eventsList[0];t&&(e.start=t.start,e.end=t.end,e.isAllDay=t.isAllDay,e.events=[t.uid],e.index=0)},isInRange:function(){return!0},destroy:function(){this.element&&this.element.off(a),s.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:!0,selectedDateFormat:"{0:D}-{1:D}",eventTemplate:"#:title#",eventTimeTemplate:"#if(data.isAllDay) {##=this.options.messages.allDay##} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>',eventGroupTemplate:'<strong class="k-scheduler-adgendagroup">#=value#</strong>',messages:{event:"Event",date:"Date",time:"Time",allDay:"all day"}}})}(window.kendo.jQuery),function(e){function t(e,t){return e.slice(t).concat(e.slice(0,t))}function i(e,t){for(var i=t.firstDay,n=new Date(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());n.getDay()!=i;)r.date.setTime(n,-1*d);return n}function n(e,t,i){var n,r=t,o=i;return n=e,n>=r&&o>=n}var r=window.kendo,o=r.ui,s=o.SchedulerView,a=".kendoMonthView",l=e.extend,c=r.date.getDate,d=r.date.MS_PER_DAY,u=6,h=7,p=r.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'),f='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span>#}#</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-w"></span>#}## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-e"></span>#}#</div>',m=r.template('<div title="#=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">#:title#</div></div>'),g=r.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span>...</span></div>');o.MonthView=s.extend({init:function(e,t){var i=this;s.fn.init.call(i,e,t),i.title=i.options.title,i.name="month",i._templates(),i._editable(),i._renderLayout(i.options.date),i._groups()},_updateDirection:function(e,t,i,n,r){var o,s,a,l,c;i&&(o=t[0].start,s=t[t.length-1].end,a=o.index===s.index,l=o.collectionIndex===s.collectionIndex,c=r?a&&l||l:a&&l,c&&(e.backward=n))},_changeViewPeriod:function(e,t,i){var n=i?7:1;return t&&(n*=-1),e.start=r.date.addDays(e.start,n),e.end=r.date.addDays(e.end,n),(!i||i&&this._isVerticallyGrouped())&&(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0},_continuousSlot:function(e,t,i){var n=e.backward?0:t.length-1,r=this.groups[e.groupIndex];return r.continuousSlot(t[n].start,i)},_changeGroupContinuously:function(e,t,i,n){var r,o,s,a;return i||(r=e.groupIndex,o=this.groups.length-1,s=this._isVerticallyGrouped(),a=this.groups[r],!t&&s?(t=a[n?"lastSlot":"firstSlot"](),r+=n?-1:1):t&&!s&&(r=n?o:0),(0>r||r>o)&&(r=n?o:0,t=null),e.groupIndex=r),t},_normalizeHorizontalSelection:function(e,t,i){var n;return n=i?t[0].start:t[t.length-1].end},_normalizeVerticalSelection:function(e,t){var i;return i=e.backward?t[0].start:t[t.length-1].end},_templates:function(){var e=this.options,t=l({},r.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,f),this.dayTemplate=r.template(e.dayTemplate,t),this.groupHeaderTemplate=r.template(e.groupHeaderTemplate,t)},dateForTitle:function(){return r.format(this.options.selectedDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},nextDate:function(){return r.date.nextDay(this._lastDayOfMonth)},previousDate:function(){return r.date.previousDay(this._firstDayOfMonth)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_renderLayout:function(t){var n=this;this._firstDayOfMonth=r.date.firstDayOfMonth(t),this._lastDayOfMonth=r.date.lastDayOfMonth(t),this._startDate=i(t,this.calendarInfo()),this.createLayout(this._layout()),this._content(),this.refreshLayout(),this.content.on("click"+a,".k-nav-day,.k-more-events",function(t){var i=e(t.currentTarget).offset(),r=n._slotByPosition(i.left,i.top);t.preventDefault(),n.trigger("navigate",{view:"day",date:r.startDate()})})},_editable:function(){this.options.editable&&!this._isMobilePhoneView()&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+a,".k-scheduler-monthview .k-event a:has(.k-si-close)",function(i){t.trigger("remove",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),i.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+a,".k-scheduler-monthview .k-scheduler-content td",function(i){var n,r=e(i.currentTarget).offset(),o=t._slotByPosition(r.left,r.top);o&&(n=t._resourceBySlot(o),t.trigger("add",{eventInfo:l({isAllDay:!0,start:o.startDate(),end:o.startDate()},n)})),i.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+a,".k-scheduler-monthview .k-event",function(i){t.trigger("edit",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),i.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-scheduler-content td",tap:function(i){var n,r=e(i.target).offset(),o=t._slotByPosition(r.left,r.top);o&&(n=t._resourceBySlot(o),t.trigger("add",{eventInfo:l({isAllDay:!0,start:o.startDate(),end:o.startDate()},n)})),i.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-event",tap:function(i){0===e(i.event.target).closest("a:has(.k-si-close)").length&&(t.trigger("edit",{uid:e(i.target).closest(".k-event").attr(r.attr("uid"))}),i.preventDefault())}}))},selectionByElement:function(t){var i=e(t).offset();return this._slotByPosition(i.left,i.top)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_content:function(){var e,t="<tbody>",i=1,n=this.groupedResources;for(n.length&&this._isVerticallyGrouped()&&(i=this._rowCountForLevel(n.length-1)),e=0;i>e;e++)t+=this._createCalendar(e);t+="</tbody>",this.content.find("table").html(t)},_createCalendar:function(e){var t,i,n,o,s=this.startDate(),a=h*u,l=h,c=[s],d="",p=1,f=this._isVerticallyGrouped(),m=this.groupedResources;for(m.length&&(f||(p=this._columnCountForLevel(m.length-1))),this._slotIndices={},t=0,i=a/l;i>t;t++){for(d+="<tr>",c.push(s),n=t*l,o=0;p>o;o++)d+=this._createRow(s,n,l,f?e:o);s=r.date.addDays(s,l),d+="</tr>"}return this._weekStartDates=c,this._endDate=r.date.previousDay(s),d},_createRow:function(e,t,i,n){var o,s=this,a=s._firstDayOfMonth,l=s._lastDayOfMonth,d=s.dayTemplate,u="",h="",p=function(){return s._resourceBySlot({groupIndex:n})};for(o=0;i>o;o++)u="",r.date.isToday(e)&&(u+="k-today"),r.date.isInDateRange(e,a,l)||(u+=" k-other-month"),h+="<td ",""!==u&&(h+='class="'+u+'"'),h+=">",h+=d({date:e,resources:p}),h+="</td>",s._slotIndices[c(e).getTime()]=t+o,e=r.date.nextDay(e);return h},_layout:function(){var i,n,r,o=this.calendarInfo(),s=this._isMobile()?o.days.namesShort:o.days.names,a=t(s,o.firstDay),l=e.map(a,function(e){return{text:e}}),c=this.groupedResources;if(c.length)if(this._isVerticallyGrouped()){for(n=[],r=0;6>r;r++)n.push({text:"<div>&nbsp;</div>",className:"k-hidden k-slot-cell"});i=this._createRowsLayout(c,n,this.groupHeaderTemplate)}else l=this._createColumnsLayout(c,l,this.groupHeaderTemplate);return{columns:l,rows:i}},_createEventElement:function(t){var i,n=this.options,o=n.editable,s=this._isMobile();return t.showDelete=o&&o.destroy!==!1&&!s,t.resizable=o&&o.resize!==!1&&!s,t.ns=r.ns,t.resources=this.eventResources(t),t.inverseColor=!(!t.resources||!t.resources[0])&&this._shouldInverseResourceColor(t.resources[0]),i=e(this.eventTemplate(t)),this.angular("compile",function(){return{elements:i,data:[{dataItem:t}]}}),i},_isInDateSlot:function(e){var t=this.groups[0],i=t.firstSlot().start,o=t.lastSlot().end-1,s=r.date.toUtcTime(e.start),a=r.date.toUtcTime(e.end);return(n(s,i,o)||n(a,i,o)||n(i,s,a)||n(o,s,a))&&(!n(a,i,i)||n(a,s,s)||e.isAllDay)},_slotIndex:function(e){return this._slotIndices[c(e).getTime()]},_positionMobileEvent:function(t,i,n){var o,a,l,c,d,u,h,p=t.start;t.start.offsetLeft>t.end.offsetLeft&&(p=t.end),o=t.start.index,a=o,l=3,c=s.collidingEvents(t.events(),o,a),c.push({element:i,start:o,end:a}),d=s.createRows(c),u=t.collection.at(o),h=u.container,h||(h=e(r.format('<div class="k-events-container" style="top:{0};left:{1};width:{2}"/>',p.offsetTop+p.firstChildTop+p.firstChildHeight-3+"px",p.offsetLeft+"px",p.offsetWidth+"px")),u.container=h,this.content[0].appendChild(h[0])),l>=d.length&&(t.addEvent({element:i,start:o,end:a,groupIndex:p.groupIndex}),n._continuousEvents.push({element:i,uid:i.attr(r.attr("uid")),start:t.start,end:t.end}),h[0].appendChild(i[0]))},_positionEvent:function(t,i,n){var o,a,l,c,d,u,h,p,f,m,v,y,_,b,w,k=this.options.eventHeight,x=t.start;for(t.start.offsetLeft>t.end.offsetLeft&&(x=t.end),o=t.start.index,a=t.end.index,l=x.eventCount,c=s.collidingEvents(t.events(),o,a),d=o!==a?5:4,c.push({element:i,start:o,end:a}),u=s.createRows(c),h=0,p=Math.min(u.length,l);p>h;h++)for(f=u[h].events,m=x.offsetTop+x.firstChildHeight+h*k+3*h+"px",v=0,y=f.length;y>v;v++)f[v].element[0].style.top=m;if(u.length>l)for(_=o;a>=_;_++){if(b=t.collection,w=b.at(_),w.more)return;w.more=e(g({ns:r.ns,start:_,end:_,width:w.clientWidth-2,left:w.offsetLeft+2,top:w.offsetTop+w.firstChildHeight+l*k+3*l})),this.content[0].appendChild(w.more[0])}else t.addEvent({element:i,start:o,end:a,groupIndex:x.groupIndex}),i[0].style.width=t.innerWidth()-d+"px",i[0].style.left=x.offsetLeft+2+"px",i[0].style.height=k+"px",n._continuousEvents.push({element:i,uid:i.attr(r.attr("uid")),start:t.start,end:t.end}),this.content[0].appendChild(i[0])},_slotByPosition:function(e,t){var i,n,r=this.content.offset();for(e-=r.left,t-=r.top,t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft,e=Math.ceil(e),t=Math.ceil(t),i=0;this.groups.length>i;i++)if(n=this.groups[i].daySlotByPosition(e,t))return n;return null},_createResizeHint:function(e){var t=e.startSlot().offsetLeft,i=e.start.offsetTop,n=e.innerWidth(),r=e.start.clientHeight-2,o=s.fn._createResizeHint.call(this,t,i,n,r);o.appendTo(this.content),this._resizeHint=this._resizeHint.add(o)},_updateResizeHint:function(e,t,i,n){var o,s,a;for(this._removeResizeHint(),o=this.groups[t],s=o.ranges(i,n,!0,e.isAllDay),a=0;s.length>a;a++)this._createResizeHint(s[a]);this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(r.toString(r.timezone.toLocalDate(i),"M/dd")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(r.toString(r.timezone.toLocalDate(n),"M/dd"))},_updateMoveHint:function(e,t,i){var n,o,s,a,l,c=r.date.toUtcTime(e.start)+i,d=c+e.duration(),u=this.groups[t],h=u.ranges(c,d,!0,e.isAllDay);for(this._removeMoveHint(),n=0;h.length>n;n++)o=h[n],s=o.startSlot(),a=o.endSlot(),l=this._createEventElement(e.clone({head:o.head,tail:o.tail})),l.css({left:s.offsetLeft+2,top:s.offsetTop+s.firstChildHeight,height:this.options.eventHeight,width:o.innerWidth()-(s.index!==a.index?5:4)}),l.addClass("k-event-drag-hint"),l.appendTo(this.content),this._moveHint=this._moveHint.add(l)},_groups:function(){var e,t,i,n,o,s,a,l,c,d,p,f,m,g,v,y,_,b=this._groupCount(),w=h,k=u;for(this.groups=[],e=0;b>e;e++)this._addResourceView(e);for(t=this.content[0].getElementsByTagName("tr"),i=0;b>i;i++)for(n=0,o=0,this._isVerticallyGrouped()&&(o=i),s=o*k;(o+1)*k>s;s++)for(a=this.groups[i],l=a.addDaySlotCollection(r.date.addDays(this.startDate(),n),r.date.addDays(this.startDate(),n+w)),c=t[s],d=c.children,p=0,c.setAttribute("role","row"),this._isVerticallyGrouped()||(p=i),f=p*w;(p+1)*w>f;f++)m=d[f],g=m.clientHeight,v=m.children.length?m.children[0].offsetHeight+3:0,y=r.date.toUtcTime(r.date.addDays(this.startDate(),n)),n++,_=Math.floor((g-v-this.options.moreButtonHeight)/(this.options.eventHeight+3)),m.setAttribute("role","gridcell"),m.setAttribute("aria-selected",!1),l.addDaySlot(m,y,y+r.date.MS_PER_DAY,_)},render:function(e){this.content.children(".k-event,.k-more-events,.k-events-container").remove(),this._groups(),e=new r.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=this.groupedResources;t.length?this._renderGroups(e,t,0,1):this._renderEvents(e,0),this.refreshLayout(),this.trigger("activate")},_renderEvents:function(e,t){var i,n,r,o,s,a,l,c,d,u,h,p=this._isMobilePhoneView();for(n=0,r=e.length;r>n;n++)if(i=e[n],this._isInDateSlot(i))for(o=this.groups[t],o._continuousEvents||(o._continuousEvents=[]),s=o.slotRanges(i,!0),a=s.length,l=0;a>l;l++)c=s[l],d=i.start,u=i.end,a>1&&(0===l?u=c.end.endDate():l==a-1?d=c.start.startDate():(d=c.start.startDate(),u=c.end.endDate())),h=i.clone({start:d,end:u,head:c.head,tail:c.tail}),p?this._positionMobileEvent(c,this._createEventElement(h),o):this._positionEvent(c,this._createEventElement(h),o)},_renderGroups:function(e,t,i,n){var o,a,l,c,d=t[0];if(d)for(o=d.dataSource.view(),a=0;o.length>a;a++)l=this._resourceValue(d,o[a]),c=new r.data.Query(e).filter({field:d.field,operator:s.groupEqFilter(l)}).toArray(),t.length>1?i=this._renderGroups(c,t.slice(1),i++,n+1):this._renderEvents(c,i++);return i},_groupCount:function(){var e=this.groupedResources;return e.length?this._isVerticallyGrouped()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},destroy:function(){this.table&&this.table.removeClass("k-scheduler-monthview"),this.content&&this.content.off(a),this.element&&this.element.off(a),s.fn.destroy.call(this),this._isMobile()&&!this._isMobilePhoneView()&&this.options.editable&&(this.options.editable.create!==!1&&this._addUserEvents.destroy(),this.options.editable.update!==!1&&this._editUserEvents.destroy())},events:["remove","add","edit","navigate"],options:{title:"Month",name:"month",eventHeight:25,moreButtonHeight:13,editable:!0,selectedDateFormat:"{0:y}",groupHeaderTemplate:"#=text#",dayTemplate:p,eventTemplate:m}})}(window.kendo.jQuery),function(e,t){function i(e,t){var i;return 0!==e&&t>e?i=t-e:(i=e%t,i&&(i=t-i)),i}function n(e){var t=e.getMonth(),i=g(e)?ee[t]:te[t];return i+e.getDate()}function r(e,i){var n,r;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),X(e,0),n=e.getFullYear(),i!==t?(K(e,i,-1),e.setDate(e.getDate()+4)):e.setDate(e.getDate()+(4-(e.getDay()||7))),X(e,0),r=Math.floor((e.getTime()-new Date(n,0,1,(-6)))/864e5),1+Math.floor(r/7)}function o(e,t){var i=Z(e).getDay(),n=7-(i+7-(t||7))||7;return 0>n&&(n+=7),Math.ceil((e.getDate()-n)/7)+1}function s(e,t){return e+(t>e?7:0)}function a(e,t,i){var n,r,a,l,c,d=t.offset;return d?(n=new Date(e.getFullYear(),e.getMonth()+1,0),r=o(n,i),a=s(t.day,i),l=a<s(new Date(e.getFullYear(),e.getMonth(),1).getDay(),i),c=a>s(n.getDay(),i),0>d?d=r+(d+1-(c?1:0)):l&&(d+=1),r-=c?1:0,(l?1:0)>d||d>r?null:d):o(e,i)}function l(e,t){return o(new Date(e.getFullYear(),e.getMonth()+1,0),t)}function c(e,t,i){return o(e,i)===a(e,t,i)}function d(e,t,i){for(var n,r,l,c,d=s(t.getDay(),i),u=e.length,h=[],p=0;u>p;p++)if(r=e[p],c=o(t,i),n=a(t,r,i),null!==n)if(n>c)h.push(r);else if(c===n)if(l=s(r.day,i),l>d)h.push(r);else if(d===l)return null;return h}function u(e,t,i){for(var n,r=0,o=e.length,s=[];o>r;r++){if(n=e[r],i&&(n=i(n)),t===n)return null;n>t&&s.push(n)}return s}function h(e,t){for(var i,n=0,r=e.length;r>n;n++){if(i=parseInt(e[n],10),isNaN(i)||t.start>i||i>t.end||0===i&&0>t.start)return null;e[n]=i}return e.sort(v)}function p(e){for(var i,n,r,o=0,s=e.length;s>o;o++){if(i=e[o],n=i.length,r=i.substring(n-2).toUpperCase(),r=re[r],r===t)return null;e[o]={offset:parseInt(i.substring(0,n-2),10)||0,day:r}}return e}function f(e){for(var t,i,n=0,r=e.length,o=[];r>n;n++)t=e[n],"string"==typeof t?i=t:(i=""+ne[t.day],t.offset&&(i=t.offset+i)),o.push(i);return""+o}function m(e){var t=e.getMonth();return 1===t?1===new Date(e.getFullYear(),1,29).getMonth()?29:28:ie[t]}function g(e){return e=e.getFullYear(),e%4===0&&e%100!==0||e%400===0}function v(e,t){return e-t}function y(e,t){var i,n,r=0,o=[];if(e)for(e=e.split(";"),i=e.length;i>r;r++)n=S(e[r],t),n&&o.push(n);return o}function _(t,i,n){for(var r=e.isArray(t)?t:y(t,n),o=i.getTime()-i.getMilliseconds(),s=0,a=r.length;a>s;s++)if(r[s].getTime()===o)return!0;return!1}function b(e,t){var i,n,r=0,o=[].concat(e);for(i=o.length;i>r;r++)n=o[r],n=U.timezone.convert(n,t||n.getTimezoneOffset(),"Etc/UTC"),o[r]=U.toString(n,le);return o.join(";")+";"}function w(e,t){var i=new Date(e);switch(t.freq){case"yearly":i.setFullYear(i.getFullYear(),0,1);break;case"monthly":i.setFullYear(i.getFullYear(),i.getMonth(),1);break;case"weekly":K(i,t.weekStart,-1)}return t.hours&&i.setHours(0),t.minutes&&i.setMinutes(0),t.seconds&&i.setSeconds(0),i}function k(e,t){var i=new Date(e);switch(t.freq){case"yearly":i.setFullYear(i.getFullYear(),11,31);break;case"monthly":i.setFullYear(i.getFullYear(),i.getMonth()+1,0);break;case"weekly":K(i,t.weekStart,-1),i.setDate(i.getDate()+6)}return t.hours&&i.setHours(23),t.minutes&&i.setMinutes(59),t.seconds&&i.setSeconds(59),i}function x(e,t,i){var n,r,o,s,a=e.slice(i._startIdx),l=a.length,c=i.positions,d=[];for(o=0,s=c.length;s>o;o++)n=c[o],0>n?n=l+n:n-=1,r=a[n],r&&r.start>=t&&d.push(r);return e=e.slice(0,i._startIdx).concat(d),i._startIdx=e.length,e}function C(e,i,n,r){var o,s,a,l,c,d,u,h,p,f,m,g,v,C,S,T,M,A,E,I,P,F,z=D(e.recurrenceRule,r),H=[];if(!z)return[e];for(I=z.positions,P=I?0:1,f=z.start,m=z.end,(f||m)&&(e=e.clone({start:f?new Date(f.value[0]):t,end:m?new Date(m.value[0]):t})),M=e.start,T=M.getTime(),S=J(M),C=y(e.recurrenceException,r),!C[0]&&z.exdates&&(C=z.exdates.value,e.set("recurrenceException",b(C,r))),h=i=new Date(i),n=new Date(n),v=z.freq,E=ge[v],A=z.count,z.until&&n>z.until&&(n=new Date(z.until)),g="yearly"===v||"monthly"===v||"weekly"===v,T>i||A||z.interval>1||g?i=new Date(T):(l=i.getHours(),c=i.getMinutes(),d=i.getSeconds(),z.hours||(l=M.getHours()),z.minutes||(c=M.getMinutes()),z.seconds||(d=M.getSeconds()),i.setHours(l,c,d,M.getMilliseconds())),z._startPeriod=new Date(i),I&&(i=w(i,z),n=k(n,z),F=J(n)-J(i),0>F&&(l=i.getHours(),n.setHours(l,i.getMinutes(),i.getSeconds(),i.getMilliseconds()),Y.adjustDST(n,l)),z._startPeriod=new Date(i),z._endPeriod=k(i,z),z._startIdx=0),u=e.duration(),z._startTime=o=Y.toInvariantTime(i),E.setup&&E.setup(z,M,i),E.limit(i,n,z);n>=i;)if(a=new Date(i),Q(a,u),p=i>=h||a>h,(p&&!_(C,i,r)||I)&&(o=Y.toUtcTime(Y.getDate(i))+J(z._startTime),s=o+u,T!==i.getTime()||S!==J(z._startTime)?H.push(e.toOccurrence({start:new Date(i),end:a,startTime:o,endTime:s})):(e.startTime=o,e.endTime=s,H.push(e))),I){if(E.next(i,z),E.limit(i,n,z),i>z._endPeriod&&(H=x(H,M,z),z._endPeriod=k(i,z),P=H.length),A&&A===P)break}else{if(A&&A===P)break;P++,E.next(i,z),E.limit(i,n,z)}return H}function S(e,t){return e=U.parseDate(e,oe),e&&t&&(e=V.convert(e,e.getTimezoneOffset(),t)),e}function T(e,i){var n,r,o,s,a,l,c,d,u=e.split(";");for(c=0,d=u.length;d>c;c++)if(n=u[c].split(":"),r=n[0],o=n[1],-1!==r.indexOf("TZID")&&(s=r.substring(r.indexOf("TZID")).split("=")[1]),o)for(o=o.split(","),a=0,l=o.length;l>a;a++)o[a]=S(o[a],s||i);return o?{value:o,tzid:s}:t}function D(i,n){var r,o,s,a,l,c,d,u,f,m={},g=0,v=!1,y=function(e,t){var i=e.day,n=t.day;return u>i&&(i+=7),u>n&&(n+=7),i-n};if(!i)return null;for(c=i.split("\n"),c[1]||-1===i.indexOf("DTSTART")&&-1===i.indexOf("DTEND")&&-1===i.indexOf("EXDATE")||(c=i.split(" ")),g=0,s=c.length;s>g;g++)l=c[g],-1!==l.indexOf("DTSTART")?m.start=T(l,n):-1!==l.indexOf("DTEND")?m.end=T(l,n):-1!==l.indexOf("EXDATE")?m.exdates=T(l,n):a=-1!==l.indexOf("RRULE")?l.substring(6):l;for(a=a.split(";"),g=0,s=a.length;s>g;g++)switch(d=a[g],r=d.split("="),o=e.trim(r[1]).split(","),e.trim(r[0]).toUpperCase()){case"FREQ":m.freq=o[0].toLowerCase();break;case"UNTIL":m.until=S(o[0],n);break;case"COUNT":m.count=parseInt(o[0],10);break;case"INTERVAL":m.interval=parseInt(o[0],10);break;case"BYSECOND":m.seconds=h(o,{start:0,end:60}),v=!0;break;case"BYMINUTE":m.minutes=h(o,{start:0,end:59}),v=!0;break;case"BYHOUR":m.hours=h(o,{start:0,end:23}),v=!0;break;case"BYMONTHDAY":m.monthDays=h(o,{start:-31,end:31}),v=!0;break;case"BYYEARDAY":m.yearDays=h(o,{start:-366,end:366}),v=!0;break;case"BYMONTH":m.months=h(o,{start:1,end:12}),v=!0;break;case"BYDAY":m.weekDays=f=p(o),v=!0;break;case"BYWEEKNO":m.weeks=h(o,{start:-53,end:53}),v=!0;break;case"BYSETPOS":m.positions=h(o,{start:-366,end:366});break;case"WKST":m.weekStart=u=re[o[0]]}return m.freq===t||m.count!==t&&m.until?null:(m.interval||(m.interval=1),u===t&&(m.weekStart=u=U.culture().calendar.firstDay),f&&(m.weekDays=f.sort(y)),m.positions&&!v&&(m.positions=null),m._hasRuleValue=v,m)}function M(e,t){for(var i,n=e.value,r=e.tzid||"",o=n.length,s=0;o>s;s++)i=n[s],i=V.convert(i,r||t||i.getTimezoneOffset(),"Etc/UTC"),n[s]=U.toString(i,"yyyyMMddTHHmmssZ");return r&&(r=";TZID="+r),r+":"+n.join(",")+" "}function A(e,i){var n=e.weekStart,r="FREQ="+e.freq.toUpperCase(),o=e.exdates||"",s=e.start||"",a=e.end||"",l=e.until;return e.interval>1&&(r+=";INTERVAL="+e.interval),e.count&&(r+=";COUNT="+e.count),l&&(l=V.convert(l,i||l.getTimezoneOffset(),"Etc/UTC"),r+=";UNTIL="+U.toString(l,"yyyyMMddTHHmmssZ")),e.months&&(r+=";BYMONTH="+e.months),e.weeks&&(r+=";BYWEEKNO="+e.weeks),e.yearDays&&(r+=";BYYEARDAY="+e.yearDays),e.monthDays&&(r+=";BYMONTHDAY="+e.monthDays),e.weekDays&&(r+=";BYDAY="+f(e.weekDays)),e.hours&&(r+=";BYHOUR="+e.hours),e.minutes&&(r+=";BYMINUTE="+e.minutes),e.seconds&&(r+=";BYSECOND="+e.seconds),e.positions&&(r+=";BYSETPOS="+e.positions),n!==t&&(r+=";WKST="+ne[n]),s&&(s="DTSTART"+M(s,i)),
a&&(a="DTEND"+M(a,i)),o&&(o="EXDATE"+M(o,i)),(s||a||o)&&(r=s+a+o+"RRULE:"+r),r}var E,I,P,F,z,H,R,N,$,O,L,B,U=window.kendo,V=U.timezone,W=U.Class,j=U.ui,q=j.Widget,G=j.DropDownList,Y=U.date,Q=Y.setTime,K=Y.setDayOfWeek,X=Y.adjustDST,Z=Y.firstDayOfMonth,J=Y.getMilliseconds,ee=[0,31,60,91,121,152,182,213,244,274,305,335,366],te=[0,31,59,90,120,151,181,212,243,273,304,334,365],ie=[31,28,30,31,30,31,30,31,30,31,30,31],ne={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},re={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},oe=["yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-ddTHH","yyyy-MM-dd","yyyyMMddTHHmmssfffzzz","yyyyMMddTHHmmsszzz","yyyyMMddTHHmmss","yyyyMMddTHHmm","yyyyMMddTHH","yyyyMMdd"],se=["months","weeks","yearDays","monthDays","weekDays","hours","minutes","seconds"],ae=se.length,le="yyyyMMddTHHmmssZ",ce={months:function(e,t,i){var n=i.months,r=u(n,e.getMonth()+1),o=!1;return null!==r&&(r.length?e.setMonth(r[0]-1,1):e.setFullYear(e.getFullYear()+1,n[0]-1,1),o=!0),o},monthDays:function(e,t,i){for(var n,r,o,s=!1,a=e.getHours(),l=function(e){return 0>e&&(e=n+e),e};t>=e;){if(r=e.getMonth(),n=m(e),o=u(i.monthDays,e.getDate(),l),null===o)return s;if(s=!0,o.length){if(e.setMonth(r,o.sort(v)[0]),X(e,a),r===e.getMonth())break}else e.setMonth(r+1,1)}return s},yearDays:function(e,t,i){for(var r,o,s=!1,a=e.getHours(),l=function(e){return 0>e&&(e=r+e),e};t>e;){if(r=g(e)?366:365,o=u(i.yearDays,n(e),l),null===o)return s;if(s=!0,r=e.getFullYear(),o.length){e.setFullYear(r,0,o.sort(v)[0]),X(e,a);break}e.setFullYear(r+1,0,1)}return s},weeks:function(e,t,i){for(var n,o,s,a=i.weekStart,l=!1,c=e.getHours(),d=function(e){return 0>e&&(e=53+e),e};t>e;){if(o=u(i.weeks,r(e,a),d),null===o)return l;if(l=!0,n=e.getFullYear(),o.length){s=7*o.sort(v)[0]-1,e.setFullYear(n,0,s),K(e,a,-1),X(e,c);break}e.setFullYear(n+1,0,1)}return l},weekDays:function(e,t,i){var n,r,s=i.weekDays,a=i.weekStart,u=d(s,e,a),h=e.getHours();if(null===u)return!1;if(n=u[0],n||(n=s[0],K(e,a)),r=n.day,n.offset)for(;t>=e&&!c(e,n,a);)o(e,a)===l(e,a)?(e.setMonth(e.getMonth()+1,1),X(e,h)):(e.setDate(e.getDate()+7),X(e,h),K(e,a,-1));return e.getDay()!==r&&K(e,r),!0},hours:function(e,t,i){var n=i.hours,r=i._startTime,o=r.getHours(),s=u(n,o),a=!1;return null!==s&&(a=!0,e.setHours(o),X(e,o),s.length?(s=s[0],e.setHours(s)):(s=e.getHours(),e.setDate(e.getDate()+1),X(e,s),s=n[0],e.setHours(s),X(e,s)),i.minutes&&e.setMinutes(0),r.setHours(s,e.getMinutes())),a},minutes:function(e,t,i){var n=i.minutes,r=e.getMinutes(),o=u(n,r),s=i._startTime.getHours(),a=!1;return null!==o&&(a=!0,o.length?o=o[0]:(s+=1,o=n[0]),i.seconds&&e.setSeconds(0),e.setHours(s,o),s%=24,X(e,s),i._startTime.setHours(s,o,e.getSeconds())),a},seconds:function(e,t,i){var n=i.seconds,r=i._startTime.getHours(),o=u(n,e.getSeconds()),s=e.getMinutes(),a=!1;return null!==o&&(a=!0,o.length?e.setSeconds(o[0]):(s+=1,e.setMinutes(s,n[0]),s>59&&(s%=60,r=(r+1)%24)),i._startTime.setHours(r,s,e.getSeconds())),a}},de=W.extend({next:function(e,t){var i,n,r=t._startTime,o=r.getDate();if(t.seconds)n=e.getSeconds()+1,e.setSeconds(n),r.setSeconds(n),r.setDate(o);else{if(!t.minutes)return!1;i=e.getMinutes()+1,e.setMinutes(i),r.setMinutes(i),r.setDate(o)}return!0},normalize:function(e){var t=e.rule;4===e.idx&&t.hours&&(t._startTime.setHours(0),this._hour(e.date,t))},limit:function(e,i,n){for(var r,o,s,a,l,c=n.interval;i>=e;){for(s=o=t,l=e.getDate(),a=0;ae>a;a++){if(r=se[a],n[r]){if(s=ce[r](e,i,n),o!==t&&s)break;o=s}s&&this.normalize({date:e,rule:n,day:l,idx:a})}if((1===c||!this.interval(n,e))&&a===ae)break}},interval:function(e,t){var n,o,s=new Date(e._startPeriod),a=new Date(t),l=t.getHours(),c=e.weekStart,d=e.interval,u=e.freq,h=!1,p=0,f=0,m=1;return"hourly"===u?(n=a.getTimezoneOffset()-s.getTimezoneOffset(),o=e._startTime.getHours(),a=a.getTime(),l!==o&&(a+=(o-l)*Y.MS_PER_HOUR),a-=s,n&&(a-=n*Y.MS_PER_MINUTE),n=Math.floor(a/Y.MS_PER_HOUR),p=i(n,d),0!==p&&(this._hour(t,e,p),h=!0)):"daily"===u?(Y.setTime(a,-s),n=Math.floor(a/Y.MS_PER_DAY),p=i(n,d),0!==p&&(this._date(t,e,p),h=!0)):"weekly"===u?(n=52*(t.getFullYear()-s.getFullYear()),p=r(t,c)-r(s,c)+n,p=i(p,d),0!==p&&(Y.setDayOfWeek(t,e.weekStart,-1),t.setDate(t.getDate()+7*p),X(t,l),h=!0)):"monthly"===u?(n=t.getFullYear()-s.getFullYear(),n=t.getMonth()-s.getMonth()+12*n,p=i(n,d),0!==p&&(m=e._hasRuleValue?1:t.getDate(),t.setFullYear(t.getFullYear(),t.getMonth()+p,m),X(t,l),h=!0)):"yearly"===u&&(n=t.getFullYear()-s.getFullYear(),p=i(n,d),e.months||(f=t.getMonth()),e.yearDays||e.monthDays||e.weekDays||(m=t.getDate()),0!==p&&(t.setFullYear(t.getFullYear()+p,f,m),X(t,l),h=!0)),h},_hour:function(e,t,i){var n=t._startTime,r=n.getHours();i&&(r+=i),e.setHours(r),r%=24,n.setHours(r),X(e,r)},_date:function(e,t,i){var n=e.getHours();e.setDate(e.getDate()+i),X(e,n)||this._hour(e,t)}}),ue=de.extend({next:function(e,t){de.fn.next(e,t)||this._hour(e,t,1)},normalize:function(e){var t=e.rule;4===e.idx&&(t._startTime.setHours(0),this._hour(e.date,t))}}),he=de.extend({next:function(e,t){de.fn.next(e,t)||this[t.hours?"_hour":"_date"](e,t,1)}}),pe=he.extend({setup:function(e,t){e.weekDays||(e.weekDays=[{day:t.getDay(),offset:0}])}}),fe=de.extend({next:function(e,t){var i,n;if(!de.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else{for(i=e.getDate(),n=e.getHours(),e.setMonth(e.getMonth()+1),X(e,n);e.getDate()!==i;)e.setDate(i),X(e,n);this._hour(e,t)}},normalize:function(e){var t=e.rule,i=e.date,n=i.getHours();0!==e.idx||t.monthDays||t.weekDays?de.fn.normalize(e):(i.setDate(e.day),X(i,n))},setup:function(e,t,i){e.monthDays||e.weekDays||i.setDate(t.getDate())}}),me=fe.extend({next:function(e,t){var i,n=e.getHours();if(!de.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else if(t.months){for(i=e.getDate(),e.setMonth(e.getMonth()+1),X(e,n);e.getDate()!==i;)e.setDate(i),X(e,n);this._hour(e,t)}else e.setFullYear(e.getFullYear()+1),X(e,n),this._hour(e,t)},setup:function(){}}),ge={hourly:new ue,daily:new he,weekly:new pe,monthly:new fe,yearly:new me},ve="click";U.recurrence={rule:{parse:D,serialize:A},expand:C,dayInYear:n,weekInYear:r,weekInMonth:o,numberOfWeeks:l,isException:_,toExceptionString:b},E=function(e){for(var t=U.culture().calendar.days.namesShort,i=t.length,n="",r=0,o=[];i>r;r++)o.push(r);for(t=t.slice(e).concat(t.slice(0,e)),o=o.slice(e).concat(o.slice(0,e)),r=0;i>r;r++)n+='<label class="k-check"><input class="k-recur-weekday-checkbox" type="checkbox" value="'+o[r]+'" /> '+t[r]+"</label>";return n},I=U.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-month-radio" type="radio" name="month" value="monthday" />#:messages.day#</label><input class="k-recur-monthday" /></li><li><input class="k-recur-month-radio" type="radio" name="month" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" /></li></ul></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><input class="k-recur-year-radio" type="radio" name="year" value="monthday" /><input class="k-recur-month" /><input class="k-recur-monthday" /></li><li><input class="k-recur-year-radio" type="radio" name="year" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" />#:messages.of#<input class="k-recur-month" /></li></ul></div># } ## if (frequency !== "never") { #<div class="k-edit-label"><label>#:end.label#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-end-never" type="radio" name="end" value="never" />#:end.never#</label></li><li><label><input class="k-recur-end-count" type="radio" name="end" value="count" />#:end.after#</label><input class="k-recur-count" />#:end.occurrence#</li><li><label><input class="k-recur-end-until" type="radio" name="end" value="until" />#:end.on#</label><input class="k-recur-until" /></li></ul></div># } #'),P=[{day:0,offset:0},{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0},{day:6,offset:0}],F=[{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0}],z=[{day:0,offset:0},{day:6,offset:0}],H=q.extend({init:function(e,t){var i,n=this,r=t&&t.frequencies;q.fn.init.call(n,e,t),n.wrapper=n.element,t=n.options,t.start=i=t.start||Y.today(),r&&(t.frequencies=r),"string"==typeof i&&(t.start=U.parseDate(i,"yyyyMMddTHHmmss")),null===t.firstWeekDay&&(t.firstWeekDay=U.culture().calendar.firstDay),n._namespace="."+t.name},options:{value:"",start:"",timezone:"",spinners:!0,firstWeekDay:null,frequencies:["never","daily","weekly","monthly","yearly"],mobile:!1,messages:{frequencies:{never:"Never",hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},hourly:{repeatEvery:"Repeat every: ",interval:" hour(s)"},daily:{repeatEvery:"Repeat every: ",interval:" day(s)"},weekly:{interval:" week(s)",repeatEvery:"Repeat every: ",repeatOn:"Repeat on: "},monthly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" month(s)",day:"Day "},yearly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" year(s)",of:" of "},end:{label:"End:",mobileLabel:"Ends",never:"Never",after:"After ",occurrence:" occurrence(s)",on:"On "},offsetPositions:{first:"first",second:"second",third:"third",fourth:"fourth",last:"last"},weekdays:{day:"day",weekday:"weekday",weekend:"weekend day"}}},events:["change"],_initInterval:function(){var e=this,t=e._value;e._container.find(".k-recur-interval").kendoNumericTextBox({spinners:e.options.spinners,value:t.interval||1,decimals:0,format:"#",min:1,change:function(){t.interval=this.value(),e._trigger()}})},_weekDayRule:function(e){var t=this,i=(t._weekDay.element||t._weekDay).val(),n=+(t._weekDayOffset.element||t._weekDayOffset).val(),r=null,o=null;e||("day"===i?(r=P,o=n):"weekday"===i?(r=F,o=n):"weekend"===i?(r=z,o=n):r=[{offset:n,day:+i}]),t._value.weekDays=r,t._value.positions=o},_weekDayView:function(){var e,t,i,n,r=this,o=r._value.weekDays,s=r._value.positions,a=r._weekDayOffset;o&&(i=o.length,s&&(7===i?(t="day",e=s):5===i?(t="weekday",e=s):2===i&&(t="weekend",e=s)),t||(o=o[0],t=o.day,e=o.offset||""),n=a.value?"value":"val",a[n](e),r._weekDay[n](t))},_initWeekDay:function(){var t,i=this,n=i.options.messages.weekdays,r=i.options.messages.offsetPositions,o=i._container.find(".k-recur-weekday"),s=function(){i._weekDayRule(),i._trigger()};o[0]&&(i._weekDayOffset=new G(i._container.find(".k-recur-weekday-offset"),{change:s,dataTextField:"text",dataValueField:"value",dataSource:[{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}]}),t=[{text:n.day,value:"day"},{text:n.weekday,value:"weekday"},{text:n.weekend,value:"weekend"}],i._weekDay=new G(o,{value:i.options.start.getDay(),change:s,dataTextField:"text",dataValueField:"value",dataSource:t.concat(e.map(U.culture().calendar.days.names,function(e,t){return{text:e,value:t}}))}),i._weekDayView())},_initWeekDays:function(){var t,i,n,r,o,s=this,a=s._value,l=s._container.find(".k-recur-weekday-checkbox");if(l[0]&&(l.on(ve+s._namespace,function(){a.weekDays=e.map(l.filter(":checked"),function(e){return{day:+e.value,offset:0}}),s.options.mobile||s._trigger()}),a.weekDays))for(n=0,r=l.length,o=a.weekDays.length;r>n;n++)for(i=l[n],t=0;o>t;t++)i.value==a.weekDays[t].day&&(i.checked=!0)},_initMonthDay:function(){var e=this,t=e._value,i=e._container.find(".k-recur-monthday");i[0]&&(e._monthDay=new U.ui.NumericTextBox(i,{spinners:e.options.spinners,min:1,max:31,decimals:0,format:"#",value:t.monthDays?t.monthDays[0]:e.options.start.getDate(),change:function(){var i=this.value();t.monthDays=i?[i]:i,e._trigger()}}))},_initCount:function(){var e=this,t=e._container.find(".k-recur-count"),i=e._value;e._count=t.kendoNumericTextBox({spinners:e.options.spinners,value:i.count||1,decimals:0,format:"#",min:1,change:function(){i.count=this.value(),e._trigger()}}).data("kendoNumericTextBox")},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),i=e.options.start,n=e._value,r=n.until;e._until=t.kendoDatePicker({min:r&&i>r?r:i,value:r||i,change:function(){n.until=this.value(),e._trigger()}}).data("kendoDatePicker")},_trigger:function(){this.options.mobile||this.trigger("change")}}),R=H.extend({init:function(e,t){var i=this;H.fn.init.call(i,e,t),i._initFrequency(),i._initContainer(),i.value(i.options.value)},options:{name:"RecurrenceEditor"},events:["change"],destroy:function(){var e=this;e._frequency.destroy(),e._container.find("input[type=radio],input[type=checkbox]").off(ve+e._namespace),U.destroy(e._container),H.fn.destroy.call(e)},value:function(e){var i=this,n=i.options.timezone;return e===t?i._value.freq?A(i._value,n):"":(i._value=D(e,n)||{},i._frequency.value(i._value.freq||""),i._initView(i._frequency.value()),t)},_initContainer:function(){var t=this.element,i=e('<div class="k-recur-view" />'),n=t.parent(".k-edit-field");n[0]?i.insertAfter(n):t.append(i),this._container=i},_initFrequency:function(){var t,i=this,n=i.options,r=n.frequencies,o=n.messages.frequencies,s=e("<input />");r=e.map(r,function(e){return{text:o[e],value:e}}),t=r[0],t&&"never"===t.value&&(t.value=""),i.element.append(s),i._frequency=new G(s,{dataTextField:"text",dataValueField:"value",dataSource:r,change:function(){i._value={},i._initView(i._frequency.value()),i.trigger("change")}})},_initView:function(e){var i=this,n=i._value,r=i.options,o={frequency:e||"never",weekDayCheckBoxes:E,firstWeekDay:r.firstWeekDay,messages:r.messages[e],end:r.messages.end};return U.destroy(i._container),i._container.html(I(o)),e?(n.freq=e,"weekly"!==e||n.weekDays||(n.weekDays=[{day:r.start.getDay(),offset:0}]),i._initInterval(),i._initWeekDays(),i._initMonthDay(),i._initWeekDay(),i._initMonth(),i._initCount(),i._initUntil(),i._period(),i._end(),t):(i._value={},t)},_initMonth:function(){var t,i=this,n=i._value,r=n.months||[i.options.start.getMonth()+1],o=i._container.find(".k-recur-month");o[0]&&(t={change:function(){n.months=[+this.value()],i.trigger("change")},dataTextField:"text",dataValueField:"value",dataSource:e.map(U.culture().calendar.months.names,function(e,t){return{text:e,value:t+1}})},i._month1=new G(o[0],t),i._month2=new G(o[1],t),r&&(r=r[0],i._month1.value(r),i._month2.value(r)))},_end:function(){var e,t=this,i=t._value,n=t._container,r=t._namespace,o=function(e){t._toggleEnd(e.currentTarget.value),t.trigger("change")};t._buttonNever=n.find(".k-recur-end-never").on(ve+r,o),t._buttonCount=n.find(".k-recur-end-count").on(ve+r,o),t._buttonUntil=n.find(".k-recur-end-until").on(ve+r,o),i.count?e="count":i.until&&(e="until"),t._toggleEnd(e)},_period:function(){var e=this,t=e._value,i="monthly"===t.freq,n=i?e._toggleMonthDay:e._toggleYear,r=".k-recur-"+(i?"month":"year")+"-radio",o=e._container.find(r);(i||"yearly"===t.freq)&&(o.on(ve+e._namespace,function(t){n.call(e,t.currentTarget.value),e.trigger("change")}),e._buttonMonthDay=o.eq(0),e._buttonWeekDay=o.eq(1),n.call(e,t.weekDays?"weekday":"monthday"))},_toggleEnd:function(e){var t,i,n,r,o=this;"count"===e?(o._buttonCount.prop("checked",!0),n=!0,r=!1,t=o._count.value(),i=null):"until"===e?(o._buttonUntil.prop("checked",!0),n=!1,r=!0,t=null,i=o._until.value()):(o._buttonNever.prop("checked",!0),n=r=!1,t=i=null),o._count.enable(n),o._until.enable(r),o._value.count=t,o._value.until=i},_toggleMonthDay:function(e){var t,i=this,n=!1,r=!0,o=!1;"monthday"===e?(i._buttonMonthDay.prop("checked",!0),t=[i._monthDay.value()],n=!0,r=!1,o=!0):(i._buttonWeekDay.prop("checked",!0),t=null),i._weekDay.enable(r),i._weekDayOffset.enable(r),i._monthDay.enable(n),i._value.monthDays=t,i._weekDayRule(o)},_toggleYear:function(e){var t,i=this,n=!1,r=!0;"monthday"===e?(n=!0,r=!1,t=i._month1.value()):t=i._month2.value(),i._month1.enable(n),i._month2.enable(r),i._value.months=[t],i._toggleMonthDay(e)}}),j.plugin(R),N=U.template('<div class="k-edit-label"><label>#:headerTitle#</label></div><div class="k-edit-field k-recur-pattern k-scheduler-toolbar"></div><div class="k-recur-view"></div>'),$=U.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval" pattern="\\\\d*"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div><div class="k-edit-label"><label>#:messages.month#</label></div><div class="k-edit-field"><select class="k-recur-month"></select></div># } #'),O=U.template('# if (endPattern === "count") { #<div class="k-edit-label"><label>#:messages.after#</label></div><div class="k-edit-field"><input class="k-recur-count" pattern="\\\\d*" /></div># } else if (endPattern === "until") { #<div class="k-edit-label"><label>#:messages.on#</label></div><div class="k-edit-field"><input type="date" class="k-recur-until" /></div># } #'),L=U.template('<ul class="k-reset k-header k-scheduler-navigation">#for (var i = 0, length = dataSource.length; i < length; i++) {#<li class="k-state-default #= value === dataSource[i].value ? "k-state-selected" : "" #"><a role="button" href="\\#" class="k-link" data-#=ns#value="#=dataSource[i].value#">#:dataSource[i].text#</a></li>#}#</ul>'),B=H.extend({init:function(e,t){var i=this;H.fn.init.call(i,e,t),t=i.options,i._optionTemplate=U.template('<option value="#:value#">#:text#</option>'),i.value(t.value),i._pane=t.pane,i._initRepeatButton(),i._initRepeatEnd(),i._defaultValue=i._value},options:{name:"MobileRecurrenceEditor",animations:{left:"slide",right:"slide:right"},mobile:!0,messages:{cancel:"Cancel",update:"Save",endTitle:"Repeat ends",repeatTitle:"Repeat pattern",headerTitle:"Repeat event",end:{patterns:{never:"Never",after:"After...",on:"On..."},never:"Never",after:"End repeat after",on:"End repeat on"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every",every:"Every",day:"Day "},yearly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every: ",every:"Every",month:"Month",day:"Day"}}},events:["change"],value:function(e){var i=this,n=i.options.timezone;return e===t?i._value.freq?A(i._value,n):"":(i._value=D(e,n)||{},t)},destroy:function(){this._destroyView(),U.destroy(this._endFields),this._repeatButton.off(ve+this._namespace),H.fn.destroy.call(this)},_initRepeatButton:function(){var t=this,i=t.options.messages.frequencies[this._value.freq||"never"];t._repeatButton=e('<a href="#" class="k-button k-scheduler-recur">'+i+"</a>").on(ve+t._namespace,function(e){e.preventDefault(),t._createView("repeat"),t._pane.navigate("recurrence",t.options.animations.left)}),t.element.append(t._repeatButton)},_initRepeatEnd:function(){var t=this,i=e('<div class="k-edit-label"><label>'+t.options.messages.end.mobileLabel+"</label></div>").insertAfter(t.element.parent(".k-edit-field")),n=e('<div class="k-edit-field"><a href="#" class="k-button k-scheduler-recur-end"></a></div>').on(ve+t._namespace,function(e){e.preventDefault(),t._value.freq&&(t._createView("end"),t._pane.navigate("recurrence",t.options.animations.left))}).insertAfter(i);t._endFields=i.add(n).toggleClass("k-state-disabled",!t._value.freq),t._endButton=n.find(".k-scheduler-recur-end").text(t._endText())},_endText:function(){var e=this._value,t=this.options.messages.end,i=t.never;return e.count?i=U.format("{0} {1}",t.after,e.count):e.until&&(i=U.format("{0} {1:d}",t.on,e.until)),i},_initFrequency:function(){var t=this,i=t.options.messages.frequencies,n=L({dataSource:e.map(this.options.frequencies,function(e){return{text:i[e],value:"never"!==e?e:""}}),value:t._value.freq||"",ns:U.ns});t._view.element.find(".k-recur-pattern").append(n).on(ve+t._namespace,".k-scheduler-navigation li",function(i){var n=e(this);i.preventDefault(),n.addClass("k-state-selected").siblings().removeClass("k-state-selected"),t._value={freq:n.children("a").attr(U.attr("value"))},t._initRepeatView()})},_initEndNavigation:function(){var t,i=this,n=i.options.messages.end.patterns,r=i._value,o="";r.count?o="count":r.until&&(o="until"),t=L({dataSource:[{text:n.never,value:""},{text:n.after,value:"count"},{text:n.on,value:"until"}],value:o,ns:U.ns}),i._view.element.find(".k-recur-pattern").append(t).on(ve+i._namespace,".k-scheduler-navigation li",function(t){var n=e(this),o=null,s=null;t.preventDefault(),n.addClass("k-state-selected").siblings().removeClass("k-state-selected"),i._initEndView(n.children("a").attr(U.attr("value"))),i._count?(o=i._count.value(),s=null):i._until&&(o=null,s=i._until.val?U.parseDate(i._until.val(),"yyyy-MM-dd"):i._until.value()),r.count=o,r.until=s})},_createView:function(t){var i=this,n=i.options,r=n.messages,o=r["repeat"===t?"repeatTitle":"endTitle"],s='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="recurrence"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+r.cancel+"</a>"+r.headerTitle+'<a href="#" class="k-button k-scheduler-update">'+r.update+"</a></div>",a=i._pane.view().id;i._view=i._pane.append(s+N({headerTitle:o})),i._view.element.on(ve+i._namespace,"a.k-scheduler-cancel, a.k-scheduler-update",function(t){t.preventDefault(),t.stopPropagation(),e(this).hasClass("k-scheduler-update")?(i.trigger("change"),i._defaultValue=e.extend({},i._value)):i._value=i._defaultValue;var n=i._value.freq;i._endButton.text(i._endText()),i._endFields.toggleClass("k-state-disabled",!n),i._repeatButton.text(r.frequencies[n||"never"]),i._pane.one("viewShow",function(){i._destroyView()}),i._pane.navigate(a,i.options.animations.right)}),i._container=i._view.element.find(".k-recur-view"),"repeat"===t?(i._initFrequency(),i._initRepeatView()):(i._initEndNavigation(),i._initEndView())},_destroyView:function(){this._view&&(this._view.destroy(),this._view.element.remove()),this._view=null},_initRepeatView:function(){var e=this,i=e._value.freq||"never",n={frequency:i,weekDayCheckBoxes:E,firstWeekDay:e.options.firstWeekDay,messages:e.options.messages[i]},r=$(n),o=e._container,s=e._value;return U.destroy(o),o.html(r),r?("weekly"!==i||s.weekDays||(s.weekDays=[{day:e.options.start.getDay(),offset:0}]),e._initInterval(),e._initMonthDay(),e._initWeekDays(),e._initWeekDay(),e._initMonth(),e._period(),t):(e._value={},t)},_initEndView:function(e){var i,n=this,r=n._value;e===t&&(r.count?e="count":r.until&&(e="until")),i={endPattern:e,messages:n.options.messages.end},U.destroy(n._container),n._container.html(O(i)),n._initCount(),n._initUntil()},_initWeekDay:function(){var t,i=this,n=i.options.messages.weekdays,r=i.options.messages.offsetPositions,o=i._container.find(".k-recur-weekday"),s=function(){i._weekDayRule(),i.trigger("change")};o[0]&&(i._weekDayOffset=i._container.find(".k-recur-weekday-offset").html(i._options([{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}])).change(s),t=[{text:n.day,value:"day"},{text:n.weekday,value:"weekday"},{text:n.weekend,value:"weekend"}],t=t.concat(e.map(U.culture().calendar.days.names,function(e,t){return{text:e,value:t}})),i._weekDay=o.html(i._options(t)).change(s).val(i.options.start.getDay()),i._weekDayView())},_initMonth:function(){var t,i=this,n=i._value,r=i.options.start,o=n.months||[r.getMonth()+1],s=i._container.find(".k-recur-month"),a=U.culture().calendar.months.names;s[0]&&(t=e.map(a,function(e,t){return{text:e,value:t+1}}),s.html(i._options(t)).change(function(){n.months=[+this.value]}),i._monthSelect=s,o&&s.val(o[0]))},_period:function(){var t,i,n,r=this,o=r._value,s=r._container,a=r.options.messages[o.freq],l=s.find(".k-repeat-rule"),c=s.find(".k-weekday-view"),d=s.find(".k-monthday-view");l[0]&&(t=o.weekDays?"weekday":"monthday",i=L({value:t,dataSource:[{text:a.dayOfMonth,value:"monthday"},{text:a.dayOfWeek,value:"weekday"}],ns:U.ns}),n=function(e){var t=r._weekDay.val(),i=r._weekDayOffset.val(),n=r._monthDay.value(),s=r._monthSelect?r._monthSelect.val():null;"monthday"===e?(o.weekDays=null,o.monthDays=n?[n]:n,o.months=s?[+s]:s,c.hide(),d.show()):(o.monthDays=null,o.months=s?[+s]:s,o.weekDays=[{offset:+i,day:+t}],c.show(),d.hide())},l.append(i).on(ve+r._namespace,".k-scheduler-navigation li",function(t){var i,r=e(this).addClass("k-state-selected");t.preventDefault(),r.siblings().removeClass("k-state-selected"),i=r.children("a").attr(U.attr("value")),n(i)}),n(t))},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),i=e.options.start,n=e._value,r=n.until,o=r&&i>r?r:i;e._until=U.support.input.date?t.attr("min",U.toString(o,"yyyy-MM-dd")).val(U.toString(r||i,"yyyy-MM-dd")).on("change",function(){n.until=U.parseDate(this.value,"yyyy-MM-dd")}):t.kendoDatePicker({min:o,value:r||i,change:function(){n.until=this.value()}}).data("kendoDatePicker")},_options:function(e,t){var i=0,n="",r=e.length,o=this._optionTemplate;for(t&&(n+=o({value:"",text:t}));r>i;i++)n+=o(e[i]);return n}}),j.plugin(B)}(window.kendo.jQuery),function(e,t){function i(e){var t=new Date(1980,1,1,0,0,0);return l(t,p(e)),t}function n(e,t,i){return e>=t&&i>=e}function r(e){var t=[],i=e.workWeekStart;for(t.push(i);e.workWeekEnd!=i;)i>6?i-=7:i++,t.push(i);return t}function o(e){var t,i=0;if(e.columns){for(t=0;e.columns.length>t;t++)i+=o(e.columns[t]);return e.colspan=i,i}return e.colspan=1,1}var s=window.kendo,a=s.ui,l=s.date.setTime,c=a.SchedulerView,d=e.extend,u=e.proxy,h=s.date.getDate,p=s.date.getMilliseconds,f=s.date.MS_PER_DAY,m=s.date.MS_PER_MINUTE,g=".kendoTimelineView",v=s.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),y=s.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),_='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',b=c.extend({init:function(e,t){var i=this;c.fn.init.call(i,e,t),i.title=i.options.title||i.options.name,i._workDays=r(i.options),i._templates(),i._editable(),i.calculateDateRange(),i._groups(),i._currentTime()},name:"timeline",_currentTimeMarkerUpdater:function(){var t,i,n,r,o,a,l,c,d,u,h,p=new Date,f=this.options;if(this.datesHeader.find(".k-current-time").remove(),this._isInDateSlot({start:p,end:p}))for(f.currentTimeMarker.useLocalTimezone===!1&&(t=f.dataSource.options.schema.timezone,f.dataSource&&t&&(i=s.timezone.offset(p,t),p=s.timezone.convert(p,p.getTimezoneOffset(),i))),n=f.group&&"vertical"!=f.group.orientation?this.groups.length:1,r=0;n>r;r++){if(o=this.groups[r],a=s.date.toUtcTime(p),l=o.timeSlotRanges(a,a+1),0===l.length)return;c=l[0].collection,d=c.slotByStartDate(p),d&&(u=e("<div class='k-current-time'></div>"),h=this.datesHeader,u.appendTo(h.find(".k-scheduler-header-wrap")).css({left:Math.round(l[0].innerRect(p,new Date(p.getTime()+1),!1).left),width:"1px",bottom:"1px",top:0}))}},_currentTime:function(){var e,i=this,n=i.options.currentTimeMarker;n!==!1&&n.updateInterval!==t&&(e=n.updateInterval,i._currentTimeMarkerUpdater(),i._currentTimeUpdateTimer=setInterval(u(this._currentTimeMarkerUpdater,i),e))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+g,".k-event a:has(.k-si-close)",function(i){t.trigger("remove",{uid:e(this).closest(".k-event").attr(s.attr("uid"))}),i.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+g,".k-scheduler-content td",function(e){var i,n=t._slotByPosition(e.pageX,e.pageY);n&&(i=t._resourceBySlot(n),t.trigger("add",{eventInfo:d({start:n.startDate(),end:n.endDate()},i)})),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+g,".k-event",function(i){t.trigger("edit",{uid:e(this).closest(".k-event").attr(s.attr("uid"))}),i.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new s.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(e){var i,n=t._slotByPosition(e.x.location,e.y.location);n&&(i=t._resourceBySlot(n),t.trigger("add",{eventInfo:d({start:n.startDate(),end:n.endDate()},i)})),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new s.UserEvents(t.element,{filter:".k-event",tap:function(i){var n=e(i.target).closest(".k-event");n.hasClass("k-event-active")||t.trigger("edit",{uid:n.attr(s.attr("uid"))}),i.preventDefault()}}))},_slotByPosition:function(e,t){var i,n,r,o,a=this.content,l=a.offset();for(e-=l.left,t-=l.top,this._isRtl?(o=s.support.browser,o.mozilla?(e+=a[0].scrollWidth-a[0].offsetWidth,e+=a[0].scrollLeft):o.msie?(e-=a.scrollLeft(),e+=a[0].scrollWidth-this.content[0].offsetWidth):o.webkit&&(e+=a[0].scrollLeft)):e+=a[0].scrollLeft,t+=a[0].scrollTop,e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(n=this.groups[r],i=n.timeSlotByPosition(e,t))return i;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",date:s.date.today(),startTime:s.date.today(),
endTime:s.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:v,dateHeaderTemplate:y,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=d({},s.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,_),this.majorTimeHeaderTemplate=s.template(e.majorTimeHeaderTemplate,t),this.dateHeaderTemplate=s.template(e.dateHeaderTemplate,t),this.slotTemplate=s.template(e.slotTemplate,t),this.groupHeaderTemplate=s.template(e.groupHeaderTemplate,t)},_render:function(e){var t=this;e=e||[],t._dates=e,t._startDate=e[0],t._endDate=e[e.length-1||0],t._calculateSlotRanges(),t.createLayout(t._layout(e)),t._content(e),t._footer(),t._setContentWidth(),t.refreshLayout(),this.timesHeader.find("table tr:last").hide(),this.datesHeader.find("table tr:last").hide()},_setContentWidth:function(){var e=this.content,t=e.width(),i=this.content.find("table"),n=i.find("tr:first").children().length,r=100,o=n*this.options.columnWidth;o>t&&(r=Math.ceil(o/t*100)),i.add(this.datesHeader.find("table")).css("width",r+"%")},_calculateSlotRanges:function(){var e,t,i,n,r=this._dates,o=this.startTime(),a=this.endTime();for(p(a)===p(s.date.getDate(a))&&(a=s.date.getDate(a),l(a,f-1)),a=p(a),o=p(o),e=[],t=0;r.length>t;t++)i=h(r[t]),l(i,o),n=h(r[t]),l(n,a),e.push({start:s.date.toUtcTime(i),end:s.date.toUtcTime(n)});this._slotRanges=e},_forTimeRange:function(e,t,n,r){var o,s,a,c,d,u,h,g,v,y,_,b,w,k,x,C,S,T;for(e=i(e),t=i(t),o=this,s=p(e),a=p(t),c=o.options.minorTickCount,d=o.options.majorTick*m,u=d/c||1,h=new Date((+e)),g=h.getDate(),y=0,b="",_=f/u,s!=a&&(s>a&&(a+=f),_=(a-s)/u),_=Math.round(_);_>y;y++)w=y%(d/u),k=0===w,x=c-1>w,C=w===c-1,S=c,_%c!==0&&(T=c>_-(y+1),k&&T&&(S=_%c)),b+=n(h,k,x,C,S),l(h,u,!1);return a&&(v=p(h),g<h.getDate()&&(v+=f),v>a&&(h=new Date((+t)))),r&&(b+=r(h)),b},_layout:function(e){var t,i,n,r=[],a=[],l=this,c=[{text:l.options.messages.defaultRowText}],d=[];for(t=0;l.options.minorTickCount>t;t++)d.push({text:"",className:""});for(this._forTimeRange(l.startTime(),l.endTime(),function(e,t,i,n,s){var a,c=l.majorTimeHeaderTemplate;t&&(a={text:c({date:e}),className:n?"k-slot-cell":"",columns:d.slice(0,s)},o(a),r.push(a))}),i=0;e.length>i;i++)a.push({text:s.format("{0:m}",e[i]),className:"k-slot-cell",columns:r.slice(0)});return n=this.groupedResources,n.length&&("vertical"===this._groupOrientation()?c=l._createRowsLayout(n,null,this.groupHeaderTemplate):a=l._createColumnsLayout(n,a,this.groupHeaderTemplate)),{columns:a,rows:c}},_footer:function(){var t,i,n,r=this.options;r.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',i=r.footer.command,i&&"workDay"===i?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),n=this,this.footer.on("click"+g,".k-scheduler-fullday",function(e){e.preventDefault(),n.trigger("navigate",{view:n.name||r.name,date:n.startDate(),isWorkDay:!r.showWorkHours})}))},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){var t,i=e.getDay(),n=this._workDays;for(t=0;n.length>t;t++)if(n[t]===i)return!0;return!1},_content:function(e){var t,i,n,r,o,a=this,l=a.options,c=a.startTime(),d=this.endTime(),u=1,h=1,p=e.length,f="",m=this.groupedResources,g=this.slotTemplate,v=!1;for(m.length&&(v="vertical"===a._groupOrientation(),v?h=a._groupCount():u=a._groupCount()),f+="<tbody>",t=function(t){var o,c="",d="",u=function(e){return function(){return a._resourceBySlot({groupIndex:e})}};return s.date.isToday(e[r])&&(d+="k-today"),(s.date.getMilliseconds(t)<s.date.getMilliseconds(l.workDayStart)||s.date.getMilliseconds(t)>=s.date.getMilliseconds(l.workDayEnd)||!a._isWorkDay(e[r]))&&(d+=" k-nonwork-hour"),c+="<td"+(""!==d?' class="'+d+'"':"")+">",o=s.date.getDate(e[r]),s.date.setTime(o,s.date.getMilliseconds(t)),c+=g({date:o,resources:u(v?i:n)}),c+="</td>"},i=0;h>i;i++){for(f+="<tr>",n=0;u>n;n++)for(r=0,o=p;o>r;r++)f+=this._forTimeRange(c,d,t);f+="</tr>"}f+="</tbody>",this.content.find("table").append(f)},_groups:function(){var e,t,i,n,r=this._groupCount(),o=this._dates,a=o.length;for(this.groups=[],e=0;r>e;e++)t=this._addResourceView(e),i=o[0],n=o[o.length-1||0],t.addTimeSlotCollection(i,s.date.addDays(n,1));this._timeSlotGroups(r,a)},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(e,t){var i,n,r,o,s,a,l,c,d,u,h,f,m,g,v,y,_,b,w=this._timeSlotInterval(),k=this._isVerticallyGrouped(),x=this.content.find("tr"),C=x.length;for(x.attr("role","row"),k&&(C=Math.floor(C/e)),i=0;e>i;i++)for(n=0,r=this.groups[i],k&&(n=i),s=n*C,a=0,k||(a=i),l=x[s].children,c=l.length/(k?1:e),d=c/t,u=0;t>u;u++)for(h=u*d+c*a,o=p(new Date((+this.startTime()))),f=0;d>f;f++)m=l[f+h],g=r.getTimeSlotCollection(0),v=this._dates[u],y=Date.UTC(v.getFullYear(),v.getMonth(),v.getDate()),_=y+o,b=_+w,m.setAttribute("role","gridcell"),m.setAttribute("aria-selected",!1),g.addTimeSlot(m,_,b,!0),o+=w},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*m},nextDate:function(){return s.date.nextDay(this.endDate())},previousDate:function(){return s.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(t){var i,r,o,a,l,c;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new s.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),i=[],this._eventsByResource(t,this.groupedResources,i),r=e.map(this._dates,function(t){return Math.max.apply(null,e.map(i,function(i){return e.grep(i,function(e){return n(t,h(e.start),h(e.end))}).length}))}),o=[],a=0,l=0;i.length>l;l++)c={groupIndex:l,maxRowCount:0,events:{}},o.push(c),this._renderEvents(i[l],l,c),c.maxRowCount>a&&(a=c.maxRowCount);this._setRowsHeight(o,i.length,a),this._positionEvents(o,i.length),this.trigger("activate")},_positionEvents:function(e,t){var i,n,r,o;for(i=0;t>i;i++){n=e[i].events;for(r in n)o=n[r],this._positionEvent(o)}},_setRowsHeight:function(e,t,i){var n,r,o,a,l,c=this.options.eventHeight+2,d=this._getBottomRowOffset();for(t=this._isVerticallyGrouped()?t:1,n=0;t>n;n++)r=this._isVerticallyGrouped()?e[n].maxRowCount:i,r=r?r:1,o=(c+2)*r+d,a=this.times.find(s.format("tr:nth-child({0})",n+1)),l=this.content.find(s.format("tr:nth-child({0})",n+1)),a.height(o),l.height(o);this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var e,t,i=.5*this.options.eventHeight,n=this._isMobile();return n?(e=30,t=60):(e=15,t=30),i>t?i=t:e>i&&(i=e),i},_positionEvent:function(e){var t,i,n=this.options.eventHeight+2,r=e.slotRange.innerRect(e.start,e.end,!1);r.top=e.slotRange.start.offsetTop,t=r.right-r.left-2,0>t&&(t=0),i=r.left,this._isRtl&&(i-=this.content[0].scrollWidth-this.content[0].offsetWidth),e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(n+2)+"px",left:i,width:t})},_refreshSlots:function(){for(var e=0;this.groups.length>e;e++)this.groups[e].refresh()},_eventsByResource:function(e,t,i){var n,r,o,a,l=t[0];if(l)for(n=l.dataSource.view(),r=0;n.length>r;r++)o=this._resourceValue(l,n[r]),a=new s.data.Query(e).filter({field:l.field,operator:c.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(a,t.slice(1),i):i.push(a);else i.push(e)},_isInDateSlot:function(e){var t=e.start,i=e.end,n=h(this._startDate),r=s.date.addDays(h(this._endDate),1);return r>t&&i>=n},_isInTimeSlot:function(e){var t,i=e.startTime||s.date.toUtcTime(e.start),n=e.endTime||s.date.toUtcTime(e.end),r=this._slotRanges;for(i===n&&(n+=1),t=0;r.length>t;t++)if(r[t].end>i&&n>r[t].start)return!0;return!1},_adjustEvent:function(e){var t,i=e.start,n=e.end,r=e._time("start"),o=e._time("end"),a=p(this.startTime()),c=p(this.endTime()),d=null,u=null,m=!1,g=!1;return e.isAllDay?(d=h(i),a>r&&(l(d,a),g=!0),u=h(n),c===p(h(this.endTime()))?u=s.date.addDays(u,1):(l(u,c),m=!0)):(c=0===c?f:c,a>r?(d=h(i),l(d,a),g=!0):r>c&&(d=h(i),d=s.date.addDays(d,1),l(d,a),g=!0),o>c?(u=h(n),l(u,c),m=!0):a>o&&(u=h(n),u=s.date.addDays(u,-1),l(u,c),m=!0)),t=e.clone({start:d?d:i,end:u?u:n,startTime:d?s.date.toUtcTime(d):e.startTime,endTime:u?s.date.toUtcTime(u):e.endTime,isAllDay:!1}),{occurrence:t,head:m,tail:g}},_renderEvents:function(e,t,i){var n,r,o,s,a,l,c,d,u,h,p;for(r=0,o=e.length;o>r;r++)n=e[r],this._isInDateSlot(n)&&(s=n.isAllDay||n.end.getTime()-n.start.getTime()>=f,a=this.content,(s||this._isInTimeSlot(n))&&(l=this._adjustEvent(n),c=this.groups[t],c._continuousEvents||(c._continuousEvents=[]),d=c.slotRanges(l.occurrence,!1),u=d[0],this._isInTimeSlot(l.occurrence)&&(h=this._createEventElement(l.occurrence,n,u.head||l.head,u.tail||l.tail),h.appendTo(a).css({top:0,height:this.options.eventHeight}),p={start:l.occurrence.startTime||l.occurrence.start,end:l.occurrence.endTime||l.occurrence.end,element:h,uid:n.uid,slotRange:u,rowIndex:0,offsetTop:0},i.events[n.uid]=p,this.addContinuousEvent(c,u,h,n.isAllDay),this._arrangeRows(p,u,i))))},addContinuousEvent:function(e,t,i,n){var r=e._continuousEvents;r.push({element:i,isAllDay:n,uid:i.attr(s.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(t,i,n,r){var o,a,l=this.eventTemplate,c=this.options.editable,u=this._isMobile(),h=c&&c.destroy!==!1&&!u,p=c&&c.resize!==!1,f=i._time("start"),m=i._time("end"),g=i.start,v=i.end,y=this.eventResources(i);return i.startTime&&(g=new Date(f),g=s.timezone.apply(g,"Etc/UTC")),i.endTime&&(v=new Date(m),v=s.timezone.apply(v,"Etc/UTC")),o=d({},{ns:s.ns,resizable:p,showDelete:h,head:n,tail:r,singleDay:1==this._dates.length,resources:y,inverseColor:!(!y||!y[0])&&this._shouldInverseResourceColor(y[0])},i,{start:g,end:v}),a=e(l(o)),this.angular("compile",function(){return{elements:a,data:[{dataItem:o}]}}),a},_arrangeRows:function(e,t,i){var n,r,o,s,a,l,d=t.start.index,u=t.end.index,h=c.collidingEvents(t.events(),d,u);for(t.addEvent({slotIndex:d,start:d,end:u,element:e.element,uid:e.uid}),h.push({slotIndex:d,start:d,end:u,element:e.element,uid:e.uid}),n=c.createRows(h),n.length>i.maxRowCount&&(i.maxRowCount=n.length),r=0,o=n.length;o>r;r++)for(s=n[r].events,a=0,l=s.length;l>a;a++)i.events[s[a].uid].rowIndex=r},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length-1):1},_updateEventForSelection:function(e){var t=this._adjustEvent(e.clone());return t.occurrence},_updateEventForMove:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateEventForResize:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateMoveHint:function(e,t,i){var n,r,o,s,a,l,c,d,u,h,p,f=this.groups[t],m=e.clone({start:e.start,end:e.end}),g=m.duration();for(m.start=new Date(m.start.getTime()+i),m.end=new Date(+m.start+g),n=this._adjustEvent(m),r=f.slotRanges(n.occurrence,!1),this._removeMoveHint(),o=0;r.length>o;o++)s=r[o],a=s.start,l=this._createEventElement(n.occurrence,n.occurrence,!1,!1),l.addClass("k-event-drag-hint"),c=s.innerRect(n.occurrence.start,n.occurrence.end,this.options.snap),d=c.right-c.left-2,0>d&&(d=0),u=c.left,this._isRtl&&(u-=this.content[0].scrollWidth-this.content[0].offsetWidth),h={left:u,top:a.offsetTop,height:a.offsetHeight-2,width:d},l.css(h),this._moveHint=this._moveHint.add(l);p=this.content,this._moveHint.appendTo(p)},_updateResizeHint:function(e,t,i,n){var r,o,a,l,d,u,h,p,f,m,g,v=this.groups[t],y=v.ranges(i,n,!1,!1);for(this._removeResizeHint(),r=0;y.length>r;r++)o=y[r],a=o.startSlot(),l=o.innerRect(i,n,!1),l.top=a.offsetTop,d=l.right-l.left,u=a.offsetHeight,h=l.left,p=this.content,this._isRtl&&(h-=p[0].scrollWidth-p[0].offsetWidth),f=c.fn._createResizeHint.call(this,h,l.top,d,u),this._resizeHint=this._resizeHint.add(f);m="t",g=this.content,this._resizeHint.appendTo(g),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(s.toString(s.timezone.toLocalDate(i),m)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(s.toString(s.timezone.toLocalDate(n),m))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,i,n,r){var o=t[0].start,s=t[t.length-1].end;i&&!r&&o.index===s.index&&o.collectionIndex===s.collectionIndex&&(e.backward=n)},_changeGroup:function(e,t){var i=t?"prevGroupSlot":"nextGroupSlot",n=this[i](e.start,e.groupIndex,!1);return n&&(e.groupIndex+=t?-1:1),n},prevGroupSlot:function(e,t,i){var n,r=this.groups[t],o=r.ranges(e,e,i,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?o:(n=r._collection(0,i),n.last())},nextGroupSlot:function(e,t,i){var n,r=this.groups[t],o=r.ranges(e,e,i,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o:(n=r._collection(0,i),n.first())},_verticalSlots:function(e,t,i,n){var r=n?"leftSlot":"rightSlot",o=t[0].start,s=t[t.length-1].end,a=this.groups[e.groupIndex];return o=a[r](o),s=a[r](s),i||!this._isVerticallyGrouped()||o&&s||(o=s=this._changeGroup(e,n)),{startSlot:o,endSlot:s}},_horizontalSlots:function(e,t,i,n){var r=n?"upSlot":"downSlot",o=t[0].start,s=t[t.length-1].end,a=this.groups[e.groupIndex];return o=a[r](o),s=a[r](s),i||!this._isHorizontallyGrouped()||o&&s||(o=s=this._changeGroup(e,n)),{startSlot:o,endSlot:s}},_changeViewPeriod:function(e,t){var i,n=t?this.previousDate():this.nextDate(),r=e.start,o=e.end;return e.start=new Date(n),e.end=new Date(n),this._isHorizontallyGrouped()&&(e.groupIndex=t?this.groups.length-1:0),i=o-r,t?(o=p(this.endTime()),o=0===o?f:o,l(e.start,o-i),l(e.end,o)):(r=p(this.startTime()),l(e.start,r),l(e.end,r+i)),e.events=[],!0},move:function(e,t,i){var n,r,o,a,l,c=!1,d=this.groups[e.groupIndex],u=s.keys,h=d.ranges(e.start,e.end,!1,!1);if(t===u.DOWN||t===u.UP)c=!0,o=t===u.UP,this._updateDirection(e,h,i,o,!0),a=this._verticalSlots(e,h,i,o);else if(!(t!==u.LEFT&&t!==u.RIGHT||(c=!0,o=t===u.LEFT,this._updateDirection(e,h,i,o,!1),a=this._horizontalSlots(e,h,i,o),a.startSlot&&a.endSlot||i||!this._changeViewPeriod(e,o,!1))))return c;return c&&(n=a.startSlot,r=a.endSlot,i?(l=e.backward,l&&n?e.start=n.startDate():!l&&r&&(e.end=r.endDate())):n&&r&&(e.start=n.startDate(),e.end=r.endDate()),e.events=[]),c},destroy:function(){var e=this;e.element&&e.element.off(g),e.footer&&e.footer.remove(),e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),c.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(e.options.editable.create!==!1&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),e.options.editable.update!==!1&&e._editUserEvents.destroy())}});d(!0,a,{TimelineView:b,TimelineWeekView:b.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e,t,i=this.options.date,n=s.date.dayOfWeek(i,this.calendarInfo().firstDay,-1),r=[];for(e=0,t=7;t>e;e++)r.push(n),n=s.date.nextDay(n);this._render(r)}}),TimelineWorkWeekView:b.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){return s.date.dayOfWeek(s.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return s.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=s.date.dayOfWeek(e,this.options.workWeekStart,-1),i=s.date.dayOfWeek(t,this.options.workWeekEnd,1),n=[];i>=t;)n.push(t),t=s.date.nextDay(t);this._render(n)}}),TimelineMonthView:b.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,0,0,0),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineWeek",calculateDateRange:function(){var e,t,i=this.options.date,n=s.date.firstDayOfMonth(i),r=s.date.lastDayOfMonth(i),o=[];for(e=0,t=r.getDate();t>e;e++)o.push(n),n=s.date.nextDay(n);this._render(o)}})})}(window.kendo.jQuery),function(e,t){function i(e,t){return t=t||"",e.startTimezone&&(t=e.startTimezone,e.endTimezone&&(t+=" | "+e.endTimezone)),t}function n(e,t){var i=t.timezone;i&&(e[M.attr("timezone")]=i)}function r(e,t){var i,n=t.model.fields[t.field].validation;n&&(i=n.dateCompare,i&&U(i)&&i.message&&(e[M.attr("dateCompare-msg")]=i.message))}function o(e,t){return function(i){return i=e(i),a(i,"apply",t),i||[]}}function s(e,t){return function(i){return i&&("[object Array]"===j.call(i)||i instanceof M.data.ObservableArray||(i=[i])),a(i,"remove",t,!0),i=e(i),i||[]}}function a(e,t,i,n){var r,o,s;for(e=e||[],o=0,s=e.length;s>o;o++)r=e[o],n?r.startTimezone||r.endTimezone?i?(r.start=M.timezone.convert(r.start,r.startTimezone||r.endTimezone,i),r.end=M.timezone.convert(r.end,r.endTimezone||r.startTimezone,i),r.start=M.timezone[t](r.start,i),r.end=M.timezone[t](r.end,i)):(r.start=M.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=M.timezone[t](r.end,r.endTimezone||r.startTimezone)):i&&(r.start=M.timezone[t](r.start,i),r.end=M.timezone[t](r.end,i)):r.startTimezone||r.endTimezone?(r.start=M.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=M.timezone[t](r.end,r.endTimezone||r.startTimezone),i&&(r.start=M.timezone.convert(r.start,r.startTimezone||r.endTimezone,i),r.end=M.timezone.convert(r.end,r.endTimezone||r.startTimezone,i))):i&&(r.start=M.timezone[t](r.start,i),r.end=M.timezone[t](r.end,i)),n&&delete r.uid;return e}function l(e,t){for(var i,n=e.length,r=0;n>r;r++)if(i=e[r],i.uid===t)return i}function c(e,t,i){return e=i?M.timezone.convert(e,t,i):M.timezone.remove(e,t)}function d(e){var t,i,n,r,o,s,a,l,d,u,h,p;return!(e.filter("[name=end]").length&&(t=e.closest(".k-scheduler-edit-form"),i=t.find("[name=start]:visible"),n=t.find("[name=end]:visible"),n[0]&&i[0]&&(s=M.widgetInstance(i,M.ui),a=M.widgetInstance(n,M.ui),l=t.data("kendoEditable"),d=l?l.options.model:null,s&&a?(r=s.value(),o=a.value()):(r=M.parseDate(i.val()),o=M.parseDate(n.val())),r&&o)))||(d&&(u=i.attr(M.attr("timezone")),h=d.startTimezone,p=d.endTimezone,h=h||p,p=p||h,h&&(r=c(r,h,u),o=c(o,p,u))),o>=r)}function u(e,t,i,n){for(var r=e.length,o=[],s=0;r>s;s++)o=o.concat(e[s].expand(t,i,n));return o}function h(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}function p(t){return function(i){e(M.format('<select data-{0}bind="value:{1}">',M.ns,t.field)).appendTo(i).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:M.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function f(t){return function(i){e(M.format('<select data-{0}bind="value:{1}">',M.ns,t.field)).appendTo(i).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:M.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:M.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function m(t){return function(i){var n,r,o="",s=t.dataSource.view();for(n=0,r=s.length;r>n;n++)o+=M.format('<option value="{0}">{1}</option>',M.getter(t.dataValueField)(s[n]),M.getter(t.dataTextField)(s[n]));e(M.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>',M.ns,t.field,o,t.valuePrimitive)).appendTo(i)}}function g(e,t){var i,n=e.end.getTime()-e.start.getTime(),r=new Date(e.start.getTime());return M.date.setTime(r,t),i=new Date(r.getTime()),M.date.setTime(i,n,!0),{start:r,end:i}}var v,y,_,b,w,k,x,C,S,T,D,M=window.kendo,A=M.date,E=M.support.input,I=A.MS_PER_DAY,P=A.getDate,F=M.date.getMilliseconds,z=M.recurrence,H=M.keys,R=M.ui,N=R.Widget,$="string",O=R.Popup,L=R.Calendar,B=M.data.DataSource,U=e.isPlainObject,V=e.extend,W=e.proxy,j=Object.prototype.toString,q=e.isArray,G=".kendoScheduler",Y="click",Q="change",K="cancel",X="remove",Z="save",J="add",ee="edit",te=/(?:value:start|value:end)(?:,|$)/,ie=P(new Date),ne="recurrenceException",re="Are you sure you want to delete this event?",oe="Do you want to delete only this event occurrence or the whole series?",se="Do you want to edit only this event occurrence or the whole series?",ae='<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>',le=M.template('<div class="k-floatwrap k-header k-scheduler-toolbar"># if (pdf) { #<ul class="k-reset k-scheduler-tools"><li><a role="button" href="\\#" class="k-button k-pdf"><span class="k-icon k-i-pdf"></span>${messages.pdf}</a></li></ul># } #<ul class="k-reset k-scheduler-navigation"><li class="k-state-default k-header k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li><li class="k-state-default k-header k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-header k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li><li class="k-state-default k-nav-current"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span data-#=ns#bind="text: formattedDate"></span></a></li></ul><ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul></div>'),ce=M.template('<div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li></ul><ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul></div><div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-nav-current"><span data-#=ns#bind="text: formattedDate"></span></li><li class="k-state-default k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li></ul></div>'),de=function(t,i){var o={name:i.field},s=E.date?"":M.attr("role")+'="datepicker" ',a=M.attr("role")+'="datetimepicker" ',l=i.model.isAllDay,c=M.attr("validate")+"='"+!l+"'",d=M.attr("validate")+"='"+l+"'";n(o,i),r(o,i),e('<input type="datetime-local" required '+M.attr("type")+'="date" '+a+M.attr("bind")+'="value:'+i.field+',invisible:isAllDay" '+c+"/>").attr(o).appendTo(t),e('<input type="date" required '+M.attr("type")+'="date" '+s+M.attr("bind")+'="value:'+i.field+',visible:isAllDay" '+d+"/>").attr(o).appendTo(t),e("<span "+M.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},ue=function(t,i){var o={name:i.field},s=i.model.isAllDay,a=M.attr("validate")+"='"+!s+"' ",l=M.attr("validate")+"='"+s+"' ";n(o,i),r(o,i),e('<input type="text" required '+M.attr("type")+'="date" '+M.attr("role")+'="datetimepicker" '+M.attr("bind")+'="value:'+i.field+',invisible:isAllDay" '+a+"/>").attr(o).appendTo(t),e('<input type="text" required '+M.attr("type")+'="date" '+M.attr("role")+'="datepicker" '+M.attr("bind")+'="value:'+i.field+',visible:isAllDay" '+l+"/>").attr(o).appendTo(t),e("<span "+M.attr("bind")+'="text: '+i.field+'Timezone"></span>').appendTo(t),"end"===i.field&&e("<span "+M.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+M.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},he=function(t,i){e("<div "+M.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).appendTo(t).kendoRecurrenceEditor({start:i.model.start,timezone:i.timezone,messages:i.messages})},pe=function(t,i){e("<div "+M.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).appendTo(t).kendoMobileRecurrenceEditor({start:i.model.start,timezone:i.timezone,messages:i.messages,pane:i.pane,value:i.model[i.field]})},fe=function(t,n){var r=i(n.model,n.messages.noTimezone);e('<a href="#" class="k-button k-timezone-button" data-bind="invisible:isAllDay">'+r+"</a>").click(n.click).appendTo(t)},me=function(t,i){e('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+i.messages.timezoneEditorButton+"</a>").click(i.click).appendTo(t)},ge=function(t,i){e("<div "+M.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).toggle(i.visible).appendTo(t).kendoMobileTimezoneEditor({optionLabel:i.noTimezone})},ve=function(t,i){e("<div "+M.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).toggle(i.visible).appendTo(t).kendoTimezoneEditor({optionLabel:i.noTimezone})},ye=M.Class.extend({init:function(t,i){var n=t.timezone;this.reader=i,i.model&&(this.model=i.model),this.timezone=n,this.data=o(e.proxy(this.data,this),n),this.serialize=s(e.proxy(this.serialize,this),n)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}}),_e=M.data.Model.define({init:function(e){var t=this;M.data.Model.fn.init.call(t,e),t._defaultId=t.defaults[t.idField]},_time:function(e){var t=this[e],i=e+"Time";return this[i]?this[i]-M.date.toUtcTime(M.date.getDate(t)):F(t)},_date:function(e){var t=e+"Time";return this[t]?this[t]-this._time(e):M.date.getDate(this[e])},clone:function(t,i){var n=this.uid,r=new this.constructor(e.extend({},this.toJSON(),t));return i||(r.uid=n),r},duration:function(){var e=this.end,t=this.start,i=(e.getTimezoneOffset()-t.getTimezoneOffset())*M.date.MS_PER_MINUTE;return e-t-i},expand:function(e,t,i){return z?z.expand(this,e,t,i):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this.startTime&&this.set("startTime",M.date.toUtcTime(this.start)),this.endTime&&this.set("endTime",M.date.toUtcTime(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=M.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId}),t[this.idField]=this.defaults[this.idField],this.clone(t,!0)},toJSON:function(){var e=M.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e.startTime,delete e.endTime,e},shouldSerialize:function(e){return M.data.Model.fn.shouldSerialize.call(this,e)&&"_defaultId"!==e},set:function(e,t){var i,n,r,o=this.isAllDay||!1;M.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=o&&(i=M.date.getDate(this.start),n=new Date(this.end),r=M.date.getMilliseconds(n),0===r&&t&&(r=I),this.set("start",i),t===!0?(M.date.setTime(n,-r),i>n&&(n=i)):M.date.setTime(n,I-r),this.set("end",n))},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,dateCompare:{value:d,message:"End date should be greater than or equal to the start date"}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string"},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),be=B.extend({init:function(e){B.fn.init.call(this,V(!0,{},{schema:{modelBase:_e,model:_e}},e)),this.reader=new ye(this.options.schema,this.reader)},expand:function(e,t){var i=this.view(),n={};return e&&t&&(t=new Date(t.getTime()+I-1),n={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+I-1)},{field:"end",operator:"gte",value:e}]}]},i=new M.data.Query(u(i,e,t,this.reader.timezone)).filter(n).toArray()),i},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),B.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof _e)){var i=t;t=this._createNewModel(),t.accept(i)}return(t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),B.fn.insert.call(this,e,t)}},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),B.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),i=t.shift(),n=e.id;i;)i.recurrenceId===n&&B.fn.remove.call(this,i),i=t.shift();e.set(ne,"")},_removeExceptionDate:function(e){var t,i;e.recurrenceId&&(t=this.get(e.recurrenceId),t&&(i=e.start,t.set(ne,t.recurrenceException.replace(z.toExceptionString(i,this.reader.timezone),""))))},_addExceptionDate:function(e){var t=e.start,i=this.reader.timezone,n=this.get(e.recurrenceId),r=n.recurrenceException||"";z.isException(r,t,i)||n.set(ne,r+z.toExceptionString(t,i))}});be.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},i=t.data;if(t.data=i,!(t instanceof be)&&t instanceof M.data.DataSource)throw Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof be?t:new be(t)},V(!0,M.data,{SchedulerDataSource:be,SchedulerDataReader:ye,SchedulerEvent:_e}),v={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}},y={mobile:{dateRange:de,timezonePopUp:fe,timezone:ge,recurrence:pe,description:'<textarea name="description" class="k-textbox"/>',multipleResources:m,resources:p},desktop:{dateRange:ue,timezonePopUp:me,timezone:ve,recurrence:he,description:'<textarea name="description" class="k-textbox"/>',multipleResources:f,resources:p}},_=M.Observable.extend({init:function(e,t){M.Observable.fn.init.call(this),this.element=e,this.options=V(!0,{},this.options,t),this.createButton=this.options.createButton,this.toggleDateValidationHandler=W(this._toggleDateValidation,this)},_toggleDateValidation:function(t){if("isAllDay"==t.field){var i,n,r,o=this.container,s=this.editable.options.model.isAllDay,a=M.attr("bind");o.find("["+a+"*=end],["+a+"*=start]").each(function(){i=e(this),
te.test(i.attr(a))&&(n=i.is("["+M.attr("role")+"=datetimepicker],[type*=datetime]"),r=s!==n,i.attr(M.attr("validate"),r))})}},fields:function(e,t){var i,n,r=this,o=r.options.messages,s=r.options.timezone,a=function(e){e.preventDefault(),r._initTimezoneEditor(t,this)},l=[{field:"title",title:o.editor.title},{field:"start",title:o.editor.start,editor:e.dateRange,timezone:s},{field:"end",title:o.editor.end,editor:e.dateRange,timezone:s},{field:"isAllDay",title:o.editor.allDayEvent}];M.timezone.windows_zones&&(l.push({field:"timezone",title:o.editor.timezone,editor:e.timezonePopUp,click:a,messages:o.editor,model:t}),l.push({field:"startTimezone",title:o.editor.startTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone}),l.push({field:"endTimezone",title:o.editor.endTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone})),t.recurrenceId||l.push({field:"recurrenceRule",title:o.editor.repeat,editor:e.recurrence,timezone:s,messages:o.recurrenceEditor,pane:this.pane}),"description"in t&&l.push({field:"description",title:o.editor.description,editor:e.description});for(i=0;this.options.resources.length>i;i++)n=this.options.resources[i],l.push({field:n.field,title:n.title,editor:n.multiple?e.multipleResources(n):e.resources(n)});return l},end:function(){return this.editable.end()},_buildEditTemplate:function(e,t,i){var n,r,o,s,a=this.options.messages,l=V({},M.Template,this.options.templateSettings),c=l.paramName,d=this.options.editable.template,u="";if(d)typeof d===$&&(d=window.unescape(d)),u+=M.template(d,l)(e);else for(n=0,r=t.length;r>n;n++)o=t[n],"startTimezone"===o.field&&(u+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',u+='<div class="k-edit-form-container">',u+='<div class="k-edit-label"></div>',u+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+a.editor.separateTimezones+"</label></div>"),u+='<div class="k-edit-label"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",!e.editable||e.editable(o.field)?(i.push(o),u+="<div "+M.attr("container-for")+'="'+o.field+'" class="k-edit-field"></div>'):(s="#:",o.field?(o=M.expr(o.field,c),s+=o+"==null?'':"+o):s+="''",s+="#",s=M.template(s,l),u+='<div class="k-edit-field">'+s(e)+"</div>"),"endTimezone"===o.field&&(u+=this._createEndTimezoneButton());return u},_createEndTimezoneButton:function(){return"</div></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone}}),b=_.extend({init:function(){_.fn.init.apply(this,arguments),this.pane=M.mobile.ui.Pane.wrap(this.element),this.pane.element.parent().css("height",this.options.height),this.view=this.pane.view(),this._actionSheetButtonTemplate=M.template('<li><a #=attr# class="k-button #=className#" href="\\#">#:text#</a></li>'),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"}},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close(),this.unbind(),this.pane.destroy()},_initTimezoneEditor:function(t){var n,r=this,o=r.pane,s=r.options.messages,a=r.timezoneView,l=r.container.find(".k-scheduler-timezones"),c=l.find(".k-timezone-toggle"),d=l.find(".k-edit-label:last").add(l.find(".k-edit-field:last")),u=function(e){if("startTimezone"===e.field){var i=t.startTimezone;c.prop("disabled",!i),i||(d.hide(),t.set("endTimezone",""),c.prop("checked",!1))}};r._startTimezone=t.startTimezone||"",r._endTimezone=t.endTimezone||"",a||(n='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+s.cancel+"</a>"+s.editor.timezoneTitle+'<a href="#" class="k-button k-scheduler-update">'+s.save+"</a></div></div>",this.timezoneView=a=o.append(n),a.contentElement().append(l.show()),a.element.on(Y+G,".k-scheduler-cancel, .k-scheduler-update",function(n){var a,l;n.preventDefault(),n.stopPropagation(),e(this).hasClass("k-scheduler-cancel")&&r._revertTimezones(t),t.unbind("change",u),a=o.element.find("#edit").data("kendoMobileView"),l=i(t,s.editor.noTimezone),a.contentElement().find(".k-timezone-button").text(l),o.navigate(a,r.options.animations.right)}),c.click(function(){d.toggle(c.prop("checked")),t.set("endTimezone","")}),t.bind("change",u)),c.prop("checked",t.endTimezone).prop("disabled",!t.startTimezone),t.endTimezone?d.show():d.hide(),o.navigate(a,r.options.animations.left)},_createActionSheetButton:function(e){return e.template=this._actionSheetButtonTemplate,this.createButton(e)},showDialog:function(t){var i,n,r="",o='<ul><li class="km-actionsheet-title">'+t.title+"</li>",s=this.element.find(".k-event["+M.attr("uid")+"='"+t.model.uid+"']");for(this.container&&(s=this.container.find(".k-scheduler-delete"),s[0]&&(r="phone")),i=0;t.buttons.length>i;i++)o+=this._createActionSheetButton(t.buttons[i]);o+="</ul>",n=e(o).appendTo(this.pane.view().element).kendoMobileActionSheet({type:r,cancel:this.options.messages.cancel,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(i){var r=n.element.find("li:not(.km-actionsheet-cancel) > .k-button").index(e(i.currentTarget));r>-1&&(n.close(),t.buttons[r].click())},popup:this._actionSheetPopupOptions}).data("kendoMobileActionSheet"),n.open(s)},editEvent:function(t){var i,n,r,o,s,a=this.pane,l="",c=this.options.messages,d=c.save,u=c.destroy,h=c.cancel,p=c.editor.editorTitle;return l+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="edit" '+M.attr("uid")+'="'+t.uid+'"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+h+"</a>"+p+'<a href="#" class="k-button k-scheduler-update">'+d+"</a></div>",i=this.fields(y.mobile,t),n=this,r=[],l+=this._buildEditTemplate(t,i,r),!t.isNew()&&this.options.editable&&this.options.editable.destroy!==!1&&(l+='<div class="k-edit-buttons"><a href="#" class="k-scheduler-delete k-button">'+u+"</a></div>"),l+="</div>",o=a.append(l),s=this.container=o.element,this.editable=s.kendoEditable({fields:r,model:t,clearContainer:!1,target:n.options.target,validateOnBlur:!0}).data("kendoEditable"),s.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),this.trigger("edit",{container:s,model:t})?this.trigger("cancel",{container:s,model:t}):(s.on(Y+G,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, a.k-scheduler-delete",function(i){var r,o;i.preventDefault(),i.stopPropagation(),r=e(this),r.hasClass("k-scheduler-edit")?a.navigate("#edit",n.options.animations.right):(o="cancel",r.hasClass("k-scheduler-update")?o="save":r.hasClass("k-scheduler-delete")&&(o="remove"),n.trigger(o,{container:s,model:t}))}),a.navigate(o,n.options.animations.left),t.bind("change",n.toggleDateValidationHandler)),this.editable},_views:function(){return this.pane.element.find(M.roleSelector("view")).not(this.view.element)},close:function(){var e,t,i,n;if(this.container){for(this.pane.navigate("",this.options.animations.right),e=this._views(),i=0,n=e.length;n>i;i++)t=e.eq(i).data("kendoMobileView"),t&&t.purge();e.remove(),this.container=null,this.editable&&(this.editable.options.model.unbind("change",this.toggleDateValidationHandler),this.editable.destroy(),this.editable=null),this.timezoneView=null}}}),w=_.extend({destroy:function(){this.close(),this.unbind()},editEvent:function(t){var i,n,r,o=this,s=o.options.editable,a="<div "+M.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',l=o.options.messages,c=l.save,d=l.cancel,u=l.destroy,h=this.fields(y.desktop,t),p=[];return a+=this._buildEditTemplate(t,h,p),n=U(s)?s.window:{},a+='<div class="k-edit-buttons k-state-default">',a+=this.createButton({name:"update",text:c,attr:i})+this.createButton({name:"canceledit",text:d,attr:i}),t.isNew()||s.destroy===!1||(a+=this.createButton({name:"delete",text:u,attr:i})),a+="</div></div></div>",r=this.container=e(a).appendTo(o.element).eq(0).kendoWindow(V({modal:!0,resizable:!1,draggable:!0,title:l.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&o.trigger(K,{container:r,model:t})&&e.preventDefault()}},n)),o.editable=r.kendoEditable({fields:p,model:t,clearContainer:!1,validateOnBlur:!0,target:o.options.target}).data("kendoEditable"),o.trigger(ee,{container:r,model:t})?o.trigger(K,{container:r,model:t}):(r.data("kendoWindow").center().open(),r.on(Y+G,"a.k-scheduler-cancel",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(K,{container:r,model:t})}),r.on(Y+G,"a.k-scheduler-update",function(e){e.preventDefault(),e.stopPropagation(),o.trigger("save",{container:r,model:t})}),r.on(Y+G,"a.k-scheduler-delete",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(X,{container:r,model:t})}),t.bind("change",o.toggleDateValidationHandler)),o.editable},close:function(){var e=this,t=function(){e.editable&&(e.editable.options.model.unbind("change",e.toggleDateValidationHandler),e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};e.editable?(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e.container.is(":visible")?e.container.data("kendoWindow").bind("deactivate",t).close():t()):t()},_createEndTimezoneButton:function(){var e=this.options.messages,t="";return t+='<div class="k-edit-buttons k-state-default">',t+=this.createButton({name:"savetimezone",text:e.save})+this.createButton({name:"canceltimezone",text:e.cancel}),t+="</div></div></div>"},showDialog:function(t){var i,n,r,o=M.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text);for(o+='<div class="k-edit-buttons k-state-default">',i=0;t.buttons.length>i;i++)o+=this.createButton(t.buttons[i]);o+="</div></div></div>",n=this.element,this.popup&&this.popup.destroy(),r=this.popup=e(o).appendTo(n).eq(0).on("click",".k-button",function(i){i.preventDefault(),r.close();var n=e(i.currentTarget).index();t.buttons[n].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),n.focus()}}).getKendoWindow(),r.center().open()},_initTimezoneEditor:function(e,t){var i,n=this,r=n.container.find(".k-scheduler-timezones"),o=r.find(".k-timezone-toggle"),s=r.find(".k-edit-label:last").add(r.find(".k-edit-field:last")),a=r.find(".k-scheduler-savetimezone"),l=r.find(".k-scheduler-canceltimezone"),c=n._timezonePopup,d=function(t){if("startTimezone"===t.field){var i=e.startTimezone;o.prop("disabled",!i),i||(s.hide(),e.set("endTimezone",""),o.prop("checked",!1))}};n._startTimezone=e.startTimezone,n._endTimezone=e.endTimezone,c||(n._timezonePopup=c=r.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:n.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(i){e.unbind("change",d),i.userTriggered&&n._revertTimezones(e),t&&t.focus()}}),o.click(function(){s.toggle(o.prop("checked")),e.set("endTimezone","")}),a.click(function(e){e.preventDefault(),i.close()}),l.click(function(t){t.preventDefault(),n._revertTimezones(e),i.close()}),e.bind("change",d)),o.prop("checked",e.endTimezone).prop("disabled",!e.startTimezone),e.endTimezone?s.show():s.hide(),i=c.data("kendoWindow"),i.center().open()}}),k=N.extend({init:function(t,i){var n=this;N.fn.init.call(n,t,i),n.options.views&&n.options.views.length||(n.options.views=["day","week"]),n.resources=[],n._initModel(),n._wrapper(),n._views(),n._toolbar(),n._dataSource(),n._resources(),n._resizeHandler=W(n.resize,n),n.wrapper.on("mousedown"+G+" selectstart"+G,function(e){e.preventDefault()}),n.options.editable&&n.options.editable.resize!==!1&&n._resizable(),n._movable(),e(window).on("resize"+G,n._resizeHandler),n.options.messages&&n.options.messages.recurrence&&(z.options=n.options.messages.recurrence),n._selectable(),n._ariaId=M.guid(),n._createEditor()},_isMobile:function(){var e=this.options;return e.mobile===!0&&M.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return e.mobile===!0&&M.support.mobileOS&&!M.support.mobileOS.tablet||"phone"===e.mobile},_selectable:function(){var t,i=this,n=i.wrapper,r=M.support.mobileOS?"touchend":"mousedown";i.options.selectable&&(i._tabindex(),n.on(r+G,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){var t=e.which,r=e.button,o=M.support.browser,s=t&&3===t||r&&2==r;M.support.mobileOS&&e.isDefaultPrevented()||(s||i._createSelection(e.currentTarget),n.focus(),o.msie&&9>o.version&&setTimeout(function(){n.focus()}))}),t=e.proxy(i._mouseMove,i),n.on("mousedown"+G,".k-scheduler-header-all-day td, .k-scheduler-content td",function(e){var i=e.which,r=e.button,o=i&&3===i||r&&2==r;o||n.on("mousemove"+G,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),n.on("mouseup"+G+" mouseleave"+G,function(){n.off("mousemove"+G,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),n.on("focus"+G,function(){i._selection||i._createSelection(e(".k-scheduler-content").find("td:first")),i._select()}),n.on("focusout"+G,function(){i.view().clearSelection(),i._ctrlKey=i._shiftKey=!1}),n.on("keydown"+G,W(i._keydown,i)),n.on("keyup"+G,function(e){i._ctrlKey=e.ctrlKey,i._shiftKey=e.shiftKey}))},_select:function(){var e,t,i,n,r=this,o=r.view(),s=r.wrapper,a=o.current(),l=r._selection;a&&(a.removeAttribute("id"),a.removeAttribute("aria-label"),s.removeAttr("aria-activedescendant")),o.select(l),a=o.current(),a&&r._old!==a&&(t=l,i=r._selectedEvents(),n=o._selectedSlots,i[0]?(t=i[0]||l,e=M.format(r.options.messages.ariaEventLabel,t.title,t.start,t.start)):e=M.format(r.options.messages.ariaSlotLabel,t.start,t.end),a.setAttribute("id",r._ariaId),a.setAttribute("aria-label",e),s.attr("aria-activedescendant",r._ariaId),r._old=a,r.trigger("change",{start:l.start,end:l.end,events:i,slots:n,resources:o._resourceBySlot(l)}))},_selectedEvents:function(){for(var e,t=this._selection.events,i=t.length,n=0,r=[];i>n;n++)e=this.occurrenceByUid(t[n]),e&&r.push(e);return r},_mouseMove:function(t){var i=this;clearTimeout(i._moveTimer),i._moveTimer=setTimeout(function(){var n,r,o,s=i.view(),a=i._selection;a&&(n=s.selectionByElement(e(t.currentTarget)),n&&a.groupIndex===n.groupIndex&&(r=n.startDate(),o=n.endDate(),r>=a.end?a.backward=!1:a.start>=o&&(a.backward=!0),a.backward?a.start=r:a.end=o,i._select()))},5)},_viewByIndex:function(e){var t,i=this.views;for(t in i){if(!e)return t;e--}},_keydown:function(t){var i=this,n=t.keyCode,r=i.view(),o=r.options.editable,s=i._selection,a=t.shiftKey;i._ctrlKey=t.ctrlKey,i._shiftKey=t.shiftKey,n===H.TAB?r.moveToEvent(s,a)&&(i._select(),t.preventDefault()):o&&n===H.ENTER?s.events.length?o.update!==!1&&i.editEvent(s.events[0]):o.create!==!1&&(s.isAllDay&&(s=e.extend({},s,{end:M.date.addDays(s.end,-1)})),i.addEvent(V({},s,r._resourceBySlot(s)))):n===H.DELETE&&o!==!1&&o.destroy!==!1?i.removeEvent(s.events[0]):n>=49&&57>=n?i.view(i._viewByIndex(n-49)):r.move(s,n,a)&&(r.inRange(s)?i._select():i.date(s.start),t.preventDefault()),i._adjustSelectedDate()},_createSelection:function(t){var i,n,r;this._selection&&(this._ctrlKey||this._shiftKey)||(this._selection={events:[],groupIndex:0}),t=e(t),r=this._selection,i=t.attr(M.attr("uid")),n=this.view().selectionByElement(t),n&&(r.groupIndex=n.groupIndex||0),i&&(n=l(this._data,i)),n&&n.uid&&(i=[n.uid]),this._updateSelection(n,i),this._adjustSelectedDate()},_updateSelection:function(e,t){var i,n,r=this._selection;e&&r&&(i=this.view(),e.uid&&(e=i._updateEventForSelection(e)),this._shiftKey&&r.start&&r.end?(n=r.end>e.end,r.end=e.endDate?e.endDate():e.end,n&&i._timeSlotInterval&&M.date.setTime(r.end,-i._timeSlotInterval())):(r.start=e.startDate?e.startDate():e.start,r.end=e.endDate?e.endDate():e.end),r.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,r.index=e.index,r.events=this._ctrlKey?r.events.concat(t||[]):t||[])},options:{name:"Scheduler",date:ie,editable:!0,autoBind:!0,snap:!0,mobile:!1,timezone:"",allDaySlot:!0,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",deleteWindowTitle:"Delete event",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:" ",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],direction:"horizontal"},views:[],selectable:!1},events:[X,ee,K,Z,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate","change"],destroy:function(){var t,i=this;N.fn.destroy.call(i),i.dataSource&&(i.dataSource.unbind(Q,i._refreshHandler),i.dataSource.unbind("progress",i._progressHandler),i.dataSource.unbind("error",i._errorHandler)),i.calendar&&(i.calendar.destroy(),i.popup.destroy()),i.view()&&i.view().destroy(),i._editor&&i._editor.destroy(),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),t=i.element.add(i.wrapper).add(i.toolbar).add(i.popup),t.off(G),clearTimeout(i._moveTimer),i._model=null,i.toolbar=null,i.element=null,e(window).off("resize"+G,i._resizeHandler),M.destroy(i.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.find(".k-event, .k-task")},_movable:function(){var i,n,r,o,s,a,l=this,c=l._isMobile(),d=l.options.editable&&l.options.editable.move!==!1,u=l.options.editable&&l.options.editable.resize!==!1;(d||u&&c)&&(l._moveDraggable=new M.ui.Draggable(l.element,{distance:0,filter:".k-event",ignore:".k-resize-handle",holdToDrag:c}),d&&l._moveDraggable.bind("dragstart",function(e){var o=l.view(),d=e.currentTarget;return o.options.editable&&o.options.editable.move!==!1?c&&!d.hasClass("k-event-active")?(l.element.find(".k-event-active").removeClass("k-event-active"),e.preventDefault(),t):(s=l.occurrenceByUid(d.attr(M.attr("uid"))),a=s.clone(),o._updateEventForMove(a),i=o._slotByPosition(e.x.startLocation,e.y.startLocation),r=i.startOffset(e.x.startLocation,e.y.startLocation,l.options.snap),n=i,(!i||l.trigger("moveStart",{event:s}))&&e.preventDefault(),t):(e.preventDefault(),t)}).bind("drag",function(e){var t,i,c=l.view(),d=c._slotByPosition(e.x.location,e.y.location);d&&(o=d.startOffset(e.x.location,e.y.location,l.options.snap),t=o-r,c._updateMoveHint(a,d.groupIndex,t),i=g(a,t),l.trigger("move",{event:s,slot:{element:d.element,start:d.startDate(),end:d.endDate()},resources:c._resourceBySlot(d),start:i.start,end:i.end})?c._updateMoveHint(a,d.groupIndex,t):n=d)}).bind("dragend",function(t){var c,d,u,h,p,f,m;l.view()._removeMoveHint(),c=o-r,d=g(a,c),u=d.start,h=d.end,p=l.view()._resourceBySlot(n),f=l.view()._resourceBySlot(i),m=l.trigger("moveEnd",{event:s,slot:{element:n.element,start:n.startDate(),end:n.endDate()},start:u,end:h,resources:p}),m||a.start.getTime()==u.getTime()&&a.end.getTime()==h.getTime()&&M.stringify(p)==M.stringify(f)||(l.view()._updateEventForMove(s),l._updateEvent(null,s,e.extend({start:u,end:h},p))),t.currentTarget.removeClass("k-event-active"),this.cancelHold()}).bind("dragcancel",function(){l.view()._removeMoveHint(),this.cancelHold()}),c&&(l._moveDraggable.bind("hold",function(e){l.element.find(".k-scheduler-monthview").length&&e.preventDefault(),l.element.find(".k-event-active").removeClass("k-event-active"),e.currentTarget.addClass("k-event-active")}),l._moveDraggable.userEvents.bind("press",function(e){e.preventDefault()})))},_resizable:function(){function t(e){var t,i={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(t in i)if(e.hasClass(t))return i[t]}var i,n,r,o,s,a=this;a._resizeDraggable=new M.ui.Draggable(a.element,{distance:0,filter:".k-resize-handle",dragstart:function(t){var l=e(t.currentTarget),c=l.closest(".k-event"),d=c.attr(M.attr("uid")),u=a.view();r=a.occurrenceByUid(d),o=r.clone(),u._updateEventForResize(o),s=u._slotByPosition(t.x.startLocation,t.y.startLocation),a.trigger("resizeStart",{event:r})&&t.preventDefault(),i=M.date.toUtcTime(o.start),n=M.date.toUtcTime(o.end)},drag:function(l){var c,d,u,h,p,f;s&&(c=e(l.currentTarget),d=t(c),u=a.view(),h=u._slotByPosition(l.x.location,l.y.location),h&&s.groupIndex==h.groupIndex&&(s=h,p=i,f=n,"south"==d?!s.isDaySlot&&s.end-M.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(n=o.isAllDay?s.startOffset(l.x.location,l.y.location,a.options.snap):s.endOffset(l.x.location,l.y.location,a.options.snap)):"north"==d?!s.isDaySlot&&M.date.toUtcTime(o.end)-s.start>=u._timeSlotInterval()&&(i=s.startOffset(l.x.location,l.y.location,a.options.snap)):"east"==d?s.isDaySlot&&M.date.toUtcTime(M.date.getDate(s.endDate()))>=M.date.toUtcTime(M.date.getDate(o.start))?n=o.isAllDay?s.startOffset(l.x.location,l.y.location,a.options.snap):s.endOffset(l.x.location,l.y.location,a.options.snap):!s.isDaySlot&&s.end-M.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(n=s.endOffset(l.x.location,l.y.location,a.options.snap)):"west"==d&&(s.isDaySlot&&M.date.toUtcTime(M.date.getDate(o.end))>=M.date.toUtcTime(M.date.getDate(s.startDate()))?i=s.startOffset(l.x.location,l.y.location,a.options.snap):!s.isDaySlot&&M.date.toUtcTime(o.end)-s.start>=u._timeSlotInterval()&&(i=s.startOffset(l.x.location,l.y.location,a.options.snap))),a.trigger("resize",{event:r,slot:{element:s.element,start:s.startDate(),end:s.endDate()},start:M.timezone.toLocalDate(i),end:M.timezone.toLocalDate(n),resources:u._resourceBySlot(s)})?(i=p,n=f):u._updateResizeHint(o,s.groupIndex,i,n)))},dragend:function(l){var c,d=e(l.currentTarget),u=new Date(o.start.getTime()),h=new Date(o.end.getTime()),p=t(d);a.view()._removeResizeHint(),"south"==p?h=M.timezone.toLocalDate(n):"north"==p?u=M.timezone.toLocalDate(i):"east"==p?h=s.isDaySlot?M.date.getDate(M.timezone.toLocalDate(n)):M.timezone.toLocalDate(n):"west"==p&&(s.isDaySlot?(u=new Date(M.timezone.toLocalDate(i)),u.setHours(0),u.setMinutes(0)):u=M.timezone.toLocalDate(i)),c=a.trigger("resizeEnd",{event:r,slot:{element:s.element,start:s.startDate(),end:s.endDate()},start:u,end:h,resources:a.view()._resourceBySlot(s)}),!c&&h.getTime()>=u.getTime()&&(o.start.getTime()!=u.getTime()||o.end.getTime()!=h.getTime())&&(a.view()._updateEventForResize(r),a._updateEvent(p,r,{start:u,end:h})),s=null,r=null},dragcancel:function(){a.view()._removeResizeHint(),s=null,r=null}})},_updateEvent:function(e,t,i){var n=this,r=function(e,t){try{n._preventRefresh=!0,e.update(i),n._convertDates(e)}finally{n._preventRefresh=!1}n.trigger(Z,{event:e})||(t&&t(),n._updateSelection(e),n.dataSource.sync())},o=function(e){return e.recurrenceRule?n.dataSource.getByUid(e.uid):n.dataSource.get(e.recurrenceId)},s=function(){var s,a,l=o(t);("south"==e||"north"==e)&&(i.start&&(s=M.date.getDate(l.start),M.date.setTime(s,F(i.start)),i.start=s),i.end&&(a=M.date.getDate(l.end),M.date.setTime(a,F(i.end)),i.end=a)),n.dataSource._removeExceptions(l),r(l)},a=function(){var e=o(t),i=function(){n._convertDates(e)},s=e.toOccurrence({start:t.start,end:t.end});r(n.dataSource.add(s),i)},l=n.options.messages.recurrenceMessages;t.recurrenceRule||t.isOccurrence()?n.showDialog({model:t,title:l.editWindowTitle,text:l.editRecurring?l.editRecurring:se,buttons:[{text:l.editWindowOccurrence,click:a},{text:l.editWindowSeries,click:s}]}):r(n.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+M.attr("uid")+"]"),this.dataSource.getByUid(t.attr(M.attr("uid")))},showDialog:function(e){this._editor.showDialog(e)},focus:function(){this.wrapper.focus()},_confirmation:function(e,t){var i,n,r,o=this.options.editable;o===!0||o.confirmation!==!1?(i=this.options.messages,n=typeof o.confirmation===$?o.confirmation:re,r=[{name:"destroy",text:i.destroy,click:function(){e()}}],this._isMobile()&&M.mobile.ui.Pane||r.push({name:"canceledit",text:i.cancel,click:function(){e(!0)}}),this.showDialog({model:t,text:n,title:i.deleteWindowTitle,buttons:r})):e()},addEvent:function(e){var t,i,n=this._editor.editable,r=this.dataSource;e=e||{},i=this.trigger("add",{event:e}),!i&&(n&&n.end()||!n)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),t=r.add(e),t&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e,t,i,n=this._editor;n&&(e=n.editable,t=n.container,i=this._modelForContainer(t),t&&e&&e.end()&&!this.trigger(Z,{container:t,event:i})&&(i.isRecurrenceHead()&&this.dataSource._removeExceptions(i),i.dirty||i.isOccurrence()||this._convertDates(i,"remove"),this.dataSource.sync()))},cancelEvent:function(){var e,t=this._editor,i=t.container;i&&(e=this._modelForContainer(i),e&&e.isOccurrence()&&(this._convertDates(e,"remove"),this._convertDates(this.dataSource.get(e.recurrenceId),"remove")),this.dataSource.cancelChanges(e),t.close())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){this._createPopupEditor(e)},_editRecurringDialog:function(e){var t=this,i=function(){e.isException()?t._editEvent(e):t.addEvent(e)},n=function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)},r=t.options.messages.recurrenceMessages;t.showDialog({model:e,title:r.editWindowTitle,text:r.editRecurring?r.editRecurring:se,buttons:[{text:r.editWindowOccurrence,click:i},{text:r.editWindowSeries,click:n}]})},_createButton:function(e){var t=e.template||ae,i=typeof e===$?e:e.name||e.text,n={className:"k-scheduler-"+(i||"").replace(/\s/g,""),text:i,attr:""};if(!(i||U(e)&&e.template))throw Error("Custom commands should have name specified");return U(e)?(e.className&&(e.className+=" "+n.className),"edit"===i&&U(e.text)&&(e=V(!0,{},e),e.text=e.text.edit),n=V(!0,n,v[i],e)):n=V(!0,n,v[i]),M.template(t)(n)},_convertDates:function(e,t){var i=this.dataSource.reader.timezone,n=e.startTimezone,r=e.endTimezone,o=e.start,s=e.start;t=t||"apply",n=n||r,r=r||n,n&&(i?"apply"===t?(o=M.timezone.convert(e.start,i,n),s=M.timezone.convert(e.end,i,r)):(o=M.timezone.convert(e.start,n,i),s=M.timezone.convert(e.end,r,i)):(o=M.timezone[t](e.start,n),s=M.timezone[t](e.end,r)),e._set("start",o),e._set("end",s))},_createEditor:function(){var e,i=this;e=i._editor=this._isMobile()&&M.mobile.ui.Pane?new b(this.wrapper,V({},this.options,{target:this,timezone:i.dataSource.reader.timezone,resources:i.resources,createButton:W(this._createButton,this)})):new w(this.wrapper,V({},this.options,{target:this,createButton:W(this._createButton,this),timezone:i.dataSource.reader.timezone,resources:i.resources})),e.bind("cancel",function(e){return i.trigger("cancel",{container:e.container,event:e.model})?(e.preventDefault(),t):(i.cancelEvent(),i.focus(),t)}),e.bind("edit",function(e){i.trigger(ee,{container:e.container,event:e.model})&&e.preventDefault()}),e.bind("save",function(){i.saveEvent()}),e.bind("remove",function(e){i.removeEvent(e.model)})},_createPopupEditor:function(e){var t=this._editor;(!e.isNew()||e.isOccurrence())&&(e.isOccurrence()&&this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e),this._convertDates(e)),this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,i="string"==typeof e?t.occurrenceByUid(e):e;i&&(i.isRecurring()?t._deleteRecurringDialog(i):t._confirmation(function(e){e||t._removeEvent(i)},i))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=l(this._data,e)),t},occurrencesInRange:function(e,t){return new M.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger(X,{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t=this,i=e,n=function(){var e=i.recurrenceId?i:i.toOccurrence(),n=t.dataSource.get(e.recurrenceId);t._convertDates(n),t._removeEvent(e)},r=function(){i.recurrenceId&&(i=t.dataSource.get(i.recurrenceId)),t._removeEvent(i)},o=t.options.messages.recurrenceMessages;t.showDialog({model:e,title:o.deleteWindowTitle,text:o.deleteRecurring?o.deleteRecurring:oe,buttons:[{text:o.deleteWindowOccurrence,click:n},{text:o.deleteWindowSeries,click:r}]})},_unbindView:function(e){var t=this;t.angular("cleanup",function(){return{elements:t.items()}}),e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind(X,t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind(X,t._viewRemoveHandler),t._viewAddHandler&&e.unbind(J,t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind(J,this._viewAddHandler),t._viewEditHandler&&e.unbind(ee,t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind(ee,this._viewEditHandler)),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){var i,n;e.view&&(i="isWorkDay"in e,n=i?"changeWorkDay":"changeView",t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:n,date:e.date})||(i&&(t._workDayMode=e.isWorkDay),t._selectView(e.view),t.date(e.date)))},e.bind("navigate",t._viewNavigateHandler),t._viewActivateHandler&&e.unbind("activate",t._viewActivateHandler),t._viewActivateHandler=function(){var e=this;t._selection&&(e.constrainSelection(t._selection),t._select(),t._adjustSelectedDate())},e.bind("activate",t._viewActivateHandler)},_selectView:function(e){var t=this;e&&t.views[e]&&(t._selectedView&&t._unbindView(t._selectedView),t._selectedView=t._renderView(e),t._selectedViewName=e,t.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected").end().find(".k-view-"+e.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected"))},view:function(e){var i=this;return e?(i._selectView(e),i.rebind(),t):i._selectedView},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),this._model.set("formattedDate",t.dateForTitle()),t},resize:function(e){var t=this.getSize(),i=this._size,n=this.view();n&&n.groups&&(e||!i||t.width!==i.width||t.height!==i.height)&&(this.refresh({action:"resize"}),this._size=t)},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,i=t.start;i&&!M.date.isInDateRange(e,P(i),P(t.end))&&e.setFullYear(i.getFullYear(),i.getMonth(),i.getDate())},_initializeView:function(e){var t,i,n=this.views[e];if(n){if(t=U(n),i=n.type,typeof i===$&&(i=M.getter(n.type)(window)),!i)throw Error("There is no such view");n=new i(this.wrapper,h(V(!0,{},this.options,t?n:{},{resources:this.resources,date:this.date(),showWorkHours:this._workDayMode})))}return n},_views:function(){var e,t,i,n,r,o,s,a,l,c=this.options.views;for(this.views={},s=0,a=c.length;a>s;s++)l=!1,e=c[s],n=U(e),n?(o=r=e.type?e.type:e,typeof o!==$&&(r=e.title,
l=!0)):o=r=e,t=x[r],t&&!l&&(e.type=t.type,t.title=this.options.messages.views[r],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=V({title:r},t,n?e:{}),r&&(this.views[r]=e,(!i||e.selected)&&(i=r));i&&(this._selectedViewName=i)},rebind:function(){this.dataSource.fetch()},_dataSource:function(){var e=this,t=e.options,i=t.dataSource;i=q(i)?{data:i}:i,!t.timezone||i instanceof be?i instanceof be&&(t.timezone=i.schema?i.schema.timezone:""):i=V(!0,i,{schema:{timezone:t.timezone}}),e.dataSource&&e._refreshHandler?e.dataSource.unbind(Q,e._refreshHandler).unbind("progress",e._progressHandler).unbind("error",e._errorHandler):(e._refreshHandler=W(e.refresh,e),e._progressHandler=W(e._requestStart,e),e._errorHandler=W(e._error,e)),e.dataSource=M.data.SchedulerDataSource.create(i).bind(Q,e._refreshHandler).bind("progress",e._progressHandler).bind("error",e._errorHandler),e.options.dataSource=e.dataSource},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_progress:function(e){var t=this.element.find(".k-scheduler-content");M.ui.progress(t,e)},_resources:function(){var t,i,n,r,o,s=this,a=s.options.resources;for(t=0;a.length>t;t++){if(i=a[t],n=i.field,r=i.dataSource,!n||!r)throw Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');s.resources.push({field:n,name:i.name||n,title:i.title||n,dataTextField:i.dataTextField||"text",dataValueField:i.dataValueField||"value",dataColorField:i.dataColorField||"color",valuePrimitive:null==i.valuePrimitive||i.valuePrimitive,multiple:i.multiple||!1,dataSource:M.data.DataSource.create(r)})}o=e.map(s.resources,function(e){return e.dataSource.fetch()}),e.when.apply(null,o).then(function(){s.options.autoBind?s.view(s._selectedViewName):s._selectView(s._selectedViewName)})},_initModel:function(){var e=this;e._model=M.observable({selectedDate:new Date(this.options.date),formattedDate:""}),e._model.bind("change",function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)})},_wrapper:function(){var e=this,t=e.options,i=t.height,n=t.width;e.wrapper=e.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",!0),e._isMobile()&&e.wrapper.addClass("k-scheduler-mobile"),e._isMobilePhoneView()&&e.wrapper.addClass("k-scheduler-phone"),i&&e.wrapper.height(i),n&&e.wrapper.width(n)},date:function(e){return null!=e&&P(e)>=P(this.options.min)&&P(e)<=P(this.options.max)&&this._model.set("selectedDate",e),P(this._model.get("selectedDate"))},_toolbar:function(){var i,n,r=this,o=r.options,s=[];o.toolbar&&(s=e.isArray(o.toolbar)?o.toolbar:[o.toolbar]),i=this._isMobilePhoneView()?ce:le,n=e(i({messages:o.messages,pdf:e.grep(s,function(e){return"pdf"==e||"pdf"==e.name}).length>0,ns:M.ns,views:r.views})),r.wrapper.append(n),r.toolbar=n,M.bind(r.toolbar,r._model),n.on(Y+G,".k-pdf",function(e){e.preventDefault(),r.saveAsPDF()}),n.on(Y+G,".k-scheduler-navigation li",function(i){var n=e(this),o=new Date(r.date()),s="";if(i.preventDefault(),n.hasClass("k-nav-today"))s="today",o=new Date;else if(n.hasClass("k-nav-next"))s="next",o=r.view().nextDate();else if(n.hasClass("k-nav-prev"))s="previous",o=r.view().previousDate();else if(n.hasClass("k-nav-current")&&!r._isMobilePhoneView())return r._showCalendar(),t;r.trigger("navigate",{view:r._selectedViewName,action:s,date:o})||r.date(o)}),n.on(Y+G,".k-scheduler-views li",function(t){t.preventDefault();var i=e(this).attr(M.attr("name"));r.trigger("navigate",{view:i,action:"changeView",date:r.date()})||r.view(i)}),n.find("li").hover(function(){e(this).addClass("k-state-hover")},function(){e(this).removeClass("k-state-hover")})},_showCalendar:function(){var t=this,i=t.toolbar.find(".k-nav-current"),n=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"/></div>');t.popup||(t.popup=new O(n,{anchor:i,activate:function(){t.calendar||(t.calendar=new L(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();t.trigger("navigate",{view:t._selectedViewName,action:"changeDate",date:e})||(t.date(e),t.popup.close())},min:t.options.min,max:t.options.max})),t.calendar.value(t.date())},copyAnchorStyles:!1})),t.popup.open()},refresh:function(e){var t=this,i=this.view();this._progress(!1),this.angular("cleanup",function(){return{elements:t.items()}}),e=e||{},i&&(e&&"itemchange"===e.action&&(this._editor.editable||this._preventRefresh)||this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(e&&"resize"===e.action||!this._editor||this._editor.close(),this._data=this.dataSource.expand(i.startDate(),i.endDate()),i.render(this._data),this.trigger("dataBound")))},slotByPosition:function(e,t){var i,n=this.view();return n._slotByPosition?(i=n._slotByPosition(e,t),i?{startDate:i.startDate(),endDate:i.endDate(),groupIndex:i.groupIndex,element:i.element,isDaySlot:i.isDaySlot}:null):null},slotByElement:function(t){var i=e(t).offset();return this.slotByPosition(i.left,i.top)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}}),x={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"}},R.plugin(k),M.PDFMixin&&M.PDFMixin.extend(k.prototype),C=N.extend({init:function(e,t){var i=this,n=M.timezone.windows_zones;if(!n||!M.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");N.fn.init.call(i,e,t),i.wrapper=i.element,i._zonesQuery=new M.data.Query(n),i._zoneTitleId=M.guid(),i._zoneTitlePicker(),i._zonePicker(),i.value(i.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var t=this,i=e('<input id="'+t._zoneTitleId+'"/>').appendTo(t.wrapper);t._zoneTitle=new M.ui.DropDownList(i,{dataSource:M.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:t.options.optionLabel,cascade:function(){this.value()||t._zone.wrapper.hide()}})},_zonePicker:function(){var t=this,i=e("<input />").appendTo(this.wrapper);t._zone=new M.ui.DropDownList(i,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,cascade:function(){t._value=this.value(),t.trigger("change")},dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){N.fn.destroy.call(this),M.destroy(this.wrapper)},value:function(e){var i,n=this;return e===t?n._value:(i=n._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],i?(n._zoneTitle.value(i.other_zone),n._zone.value(i.zone)):n._zoneTitle.value(""),t)}}),R.plugin(C),S=M.template('<option value="#=other_zone#">#=name#</option>'),T=M.template('<option value="#=zone#">#=territory#</option>'),D=N.extend({init:function(e,t){var i=this,n=M.timezone.windows_zones;if(!n||!M.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");N.fn.init.call(i,e,t),i.wrapper=i.element,i._zonesQuery=new M.data.Query(n),i._zoneTitlePicker(),i._zonePicker(),i.value(i.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:["change"],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,T))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,i){var n=0,r="",o=e.length;for(i&&(r+=t({other_zone:"",name:i}));o>n;n++)r+=t(e[n]);return r},_zoneTitlePicker:function(){var t=this,i=t._options(M.timezone.zones_titles,S,t.options.optionLabel);t._zoneTitle=e("<select>"+i+"</select>").appendTo(t.wrapper).change(function(){var e=this.value,i=t._zone;t._bindZones(e),e&&i[0].children.length>1?i.show():i.hide(),t._value=i[0].value,t.trigger("change")})},_zonePicker:function(){var t=this;t._zone=e('<select style="display:none"></select>').appendTo(this.wrapper).change(function(){t._value=this.value,t.trigger("change")}),t._bindZones(t._zoneTitle.val()),t._value=t._zone[0].value},destroy:function(){N.fn.destroy.call(this),M.destroy(this.wrapper)},value:function(e){var i,n=this,r=n._zone,o="",s="";return e===t?n._value:(i=n._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],i&&(s=i.zone,o=i.other_zone),n._zoneTitle.val(o),n._bindZones(o),r.val(s),s=r[0].value,s&&r[0].children.length>1?r.show():r.hide(),n._value=s,t)}}),R.plugin(D)}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.ui.Widget,n=e.proxy,r=Math.abs,o=20,s=t.Class.extend({init:function(i,n,o){o=e.extend({minXDelta:30,maxYDelta:20,maxDuration:1e3},o),new t.UserEvents(i,{surface:o.surface,allowSelection:!0,start:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},move:function(e){var t=e.touch,i=e.event.timeStamp-t.startTime,s=t.x.initialDelta>0?"right":"left";r(t.x.initialDelta)>=o.minXDelta&&r(t.y.initialDelta)<o.maxYDelta&&o.maxDuration>i&&(n({direction:s,touch:t,target:t.target}),t.cancel())}})}}),a=i.extend({init:function(e,r){function o(e){return function(t){a._triggerTouch(e,t)}}function s(e){return function(t){a.trigger(e,{touches:t.touches,distance:t.distance,center:t.center,event:t.event})}}var a=this;i.fn.init.call(a,e,r),r=a.options,e=a.element,a.events=new t.UserEvents(e,{filter:r.filter,surface:r.surface,minHold:r.minHold,multiTouch:r.multiTouch,allowSelection:!0,press:o("touchstart"),hold:o("hold"),tap:n(a,"_tap"),gesturestart:s("gesturestart"),gesturechange:s("gesturechange"),gestureend:s("gestureend")}),r.enableSwipe?(a.events.bind("start",n(a,"_swipestart")),a.events.bind("move",n(a,"_swipemove"))):(a.events.bind("start",n(a,"_dragstart")),a.events.bind("move",o("drag")),a.events.bind("end",o("dragend"))),t.notify(a)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:!1,multiTouch:!1,enableSwipe:!1,minXDelta:30,maxYDelta:20,maxDuration:1e3,minHold:800,doubleTapTimeout:800},cancel:function(){this.events.cancel()},_triggerTouch:function(e,t){this.trigger(e,{touch:t.touch,event:t.event})&&t.preventDefault()},_tap:function(e){var i=this,n=i.lastTap,r=e.touch;n&&i.options.doubleTapTimeout>r.endTime-n.endTime&&t.touchDelta(r,n).distance<o?(i._triggerTouch("doubletap",e),i.lastTap=null):(i._triggerTouch("tap",e),i.lastTap=r)},_dragstart:function(e){this._triggerTouch("dragstart",e)},_swipestart:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},_swipemove:function(e){var t=this,i=t.options,n=e.touch,o=e.event.timeStamp-n.startTime,s=n.x.initialDelta>0?"right":"left";r(n.x.initialDelta)>=i.minXDelta&&r(n.y.initialDelta)<i.maxYDelta&&i.maxDuration>o&&(t.trigger("swipe",{direction:s,touch:e.touch}),n.cancel())}});window.jQuery.fn.kendoMobileSwipe=function(e,t){this.each(function(){new s(this,e,t)})},t.ui.plugin(a)}(window.kendo.jQuery),function(e){function t(e){var t,i,n=[],r=e.className;for(t=0,i=e.level;i>t;t++)n.push(o("span",{className:r}));return n}function i(){var t=n._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var n=window.kendo,r=n.dom,o=r.element,s=r.text,a=n.support.mobileOS,l=n.ui,c=l.Widget,d=e.extend,u=e.map,h=e.isFunction,p=n.keys,f={title:"Title",start:"Start Time",end:"End Time",percentComplete:"% Done",parentId:"Predecessor ID",id:"ID",orderId:"Order ID"},m="string",g=".kendoGanttList",v="click",y=".",_={wrapper:"k-treelist k-grid k-widget",header:"k-header",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",selected:"k-state-selected",icon:"k-icon",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},b=l.GanttList=c.extend({init:function(e,t){c.fn.init.call(this,e,t),0===this.options.columns.length&&this.options.columns.push("title"),this.dataSource=this.options.dataSource,this._columns(),this._layout(),this._domTrees(),this._header(),this._sortable(),this._editable(),this._selectable(),this._draggable(),this._attachEvents(),this._adjustHeight()},_adjustHeight:function(){this.content.height(this.element.height()-this.header.parent().outerHeight())},destroy:function(){c.fn.destroy.call(this),this._reorderDraggable&&this._reorderDraggable.destroy(),this._tableDropArea&&this._tableDropArea.destroy(),this._contentDropArea&&this._contentDropArea.destroy(),this.touch&&this.touch.destroy(),this.content.off(g),this.header=null,this.content=null,this.levels=null,n.destroy(this.element)},options:{name:"GanttList",selectable:!0,editable:!0},_attachEvents:function(){var t=this,i=b.styles;t.content.on(v+g,"td > span."+i.icon+":not(."+i.iconHidden+")",function(i){var n=e(this),r=t._modelFromElement(n);r.set("expanded",!r.get("expanded")),i.stopPropagation()})},_domTrees:function(){this.headerTree=new r.Tree(this.header[0]),this.contentTree=new r.Tree(this.content[0])},_columns:function(){var e=this.options.columns,t=function(){this.field="",this.title="",this.editable=!1,this.sortable=!1};this.columns=u(e,function(e){return e="string"==typeof e?{field:e,title:f[e]}:e,d(new t,e)})},_layout:function(){var e=this.element,t=b.styles;e.addClass(t.wrapper).append("<div class='"+t.gridHeader+"'><div class='"+t.gridHeaderWrap+"'></div></div>").append("<div class='"+t.gridContentWrap+"'></div>"),this.header=e.find(y+t.gridHeaderWrap),this.content=e.find(y+t.gridContent)},_header:function(){var e=this.headerTree,t=o("colgroup",null,this._cols()),i=o("thead",{role:"rowgroup"},[o("tr",{role:"row"},this._ths())]),n=o("table",{style:{"min-width":this.options.listWidth+"px"},role:"grid"},[t,i]);e.render([n])},_render:function(e){var t,i,n;this.levels=[{field:null,value:0}],t=o("colgroup",null,this._cols()),i=o("tbody",{role:"rowgroup"},this._trs(e)),n=o("table",{style:{"min-width":this.options.listWidth+"px"},tabIndex:0,role:"treegrid"},[t,i]),this.contentTree.render([n]),this.trigger("render")},_ths:function(){var e,t,i,n,r=this.columns,a=[];for(i=0,n=r.length;n>i;i++)e=r[i],t={"data-field":e.field,"data-title":e.title,className:b.styles.header,role:"columnheader"},a.push(o("th",t,[s(e.title)]));return a},_cols:function(){var e,t,i,n,r,s=this.columns,a=[];for(n=0,r=s.length;r>n;n++)e=s[n],i=e.width,t=i&&0!==parseInt(i,10)?{style:{width:typeof i===m?i:i+"px"}}:null,a.push(o("col",t,[]));return a},_trs:function(e){var t,i,n,r,o,s=[],a=[],l=b.styles;for(r=0,o=e.length;o>r;r++)t=e[r],n=this._levels({idx:t.parentId,id:t.id,summary:t.summary}),i={"data-uid":t.uid,"data-level":n,role:"row"},t.summary&&(i["aria-expanded"]=t.expanded),r%2!==0&&a.push(l.alt),t.summary&&a.push(l.group),a.length&&(i.className=a.join(" ")),s.push(this._tds({task:t,attr:i,level:n})),a=[];return s},_tds:function(e){var t,i,n,r=[],s=this.columns;for(i=0,n=s.length;n>i;i++)t=s[i],r.push(this._td({task:e.task,column:t,level:e.level}));return o("tr",e.attr,r)},_td:function(e){var i,r,a=[],l=this.options.resourcesField,c=b.styles,d=e.task,u=e.column,h=d.get(u.field)||[];if(u.field==l){for(i=[],r=0;h.length>r;r++)i.push(n.format("{0} [{1}]",h[r].get("name"),h[r].get("formatedValue")));i=i.join(", ")}else i=u.format?n.format(u.format,h):h;return"title"===u.field&&(a=t({level:e.level,className:c.iconPlaceHolder}),a.push(o("span",{className:c.icon+" "+(d.summary?d.expanded?c.iconCollapse:c.iconExpand:c.iconHidden)}))),a.push(o("span",null,[s(i)])),o("td",{role:"gridcell"},a)},_levels:function(e){var t,i,n,r=this.levels,o=e.summary,s=e.idx,a=e.id;for(i=0,n=r.length;n>i;i++)if(t=r[i],t.field==s)return o&&r.push({field:a,value:t.value+1}),t.value},_sortable:function(){var e,t,i,r,o,s=this.options.resourcesField,a=this.columns,l=this.header.find("th");for(r=0,o=l.length;o>r;r++)e=a[r],e.sortable&&e.field!==s&&(i=l.eq(r),t=i.data("kendoColumnSorter"),t&&t.destroy(),i.attr("data-"+n.ns+"field",e.field).kendoColumnSorter({dataSource:this.dataSource}));l=null},_selectable:function(){var t=this,i=this.options.selectable;i&&this.content.on(v+g,"tr",function(i){var n=e(this);i.ctrlKey?t.clearSelection():t.select(n)})},select:function(e){var t=this.content.find(e),i=b.styles.selected;return t.length?(t.siblings(y+i).removeClass(i).attr("aria-selected",!1).end().addClass(i).attr("aria-selected",!0),void this.trigger("change")):this.content.find(y+i)},clearSelection:function(){var e=this.select();e.length&&(e.removeClass(b.styles.selected),this.trigger("change"))},_setDataSource:function(e){this.dataSource=e},_editable:function(){var t=this,n=b.styles,r="span."+n.icon+":not("+n.iconHidden+")",o=function(){t.editable&&t.editable.end()&&t._closeCell()},s=function(t){var r=e(t.currentTarget);r.hasClass(n.editCell)||i()};this.options.editable&&(this._startEditHandler=function(i){var n=i.currentTarget?e(i.currentTarget):i,r=t._columnFromElement(n);t.editable||r.editable&&t._editCell({cell:n,column:r})},t.content.on("focusin"+g,function(){clearTimeout(t.timer),t.timer=null}).on("focusout"+g,function(){t.timer=setTimeout(o,1)}).on("keydown"+g,function(e){var n,r,s=e.keyCode;switch(s){case p.ENTER:i(),o();break;case p.ESC:t.editable&&(n=t._editableContainer,r=t._modelFromElement(n),t.trigger("cancel",{model:r,cell:n})||t._closeCell(!0))}}),a?t.touch=t.content.kendoTouch({filter:"td",touchstart:function(e){s(e.touch)},doubletap:function(i){e(i.touch.initialTouch).is(r)||t._startEditHandler(i.touch)}}).data("kendoTouch"):t.content.on("mousedown"+g,"td",function(e){s(e)}).on("dblclick"+g,"td",function(i){e(i.target).is(r)||t._startEditHandler(i)}))},_editCell:function(t){var i,r=this.options.resourcesField,o=b.styles,s=t.cell,a=t.column,l=this._modelFromElement(s),c=this.dataSource._createNewModel(l.toJSON()),d=c.fields[a.field]||c[a.field],u=d.validation,p=n.attr("type"),f=n.attr("bind"),m={name:a.field,required:!!d.validation&&d.validation.required===!0};return a.field===r?void a.editor(s,c):(this._editableContent=s.children().detach(),this._editableContainer=s,s.data("modelCopy",c),"date"!==d.type&&"date"!==e.type(d)||!/H|m|s|F|g|u/.test(a.format)||("start"===a.field&&delete d.validation.dateCompare,m[f]="value:"+a.field,m[p]="date",i=function(t,i){e('<input type="text"/>').attr(m).appendTo(t).kendoDateTimePicker({format:i.format})}),this.editable=s.addClass(o.editCell).kendoEditable({fields:{field:a.field,format:a.format,editor:a.editor||i},model:c,clearContainer:!1}).data("kendoEditable"),u&&u.dateCompare&&h(u.dateCompare)&&u.message&&(e("<span "+n.attr("for")+'="'+a.field+'" class="k-invalid-msg"/>').hide().appendTo(s),s.find("[name="+a.field+"]").attr(n.attr("dateCompare-msg"),u.message)),void(this.trigger("edit",{model:l,cell:s})&&this._closeCell(!0)))},_closeCell:function(e){var t=b.styles,i=this._editableContainer,n=this._modelFromElement(i),r=this._columnFromElement(i),o=r.field,s=i.data("modelCopy"),a={};a[o]=s.get(o),i.empty().removeData("modelCopy").removeClass(t.editCell).append(this._editableContent),this.editable.destroy(),this.editable=null,this._editableContainer=null,this._editableContent=null,e||("start"===o&&(a.end=new Date(a.start.getTime()+n.duration())),this.trigger("update",{task:n,updateInfo:a}))},_draggable:function(){var t,i=this,r=null,o=!0,s=b.styles,l="tr["+n.attr("level")+" = 0]:last",c={},u=function(){r=null,t=null,o=!0,c={}},h=function(e){for(var t=e;t;){if(r.get("id")===t.get("id")){o=!1;break}t=i.dataSource.taskParent(t)}},p=function(){var i=e(t).height(),r=n.getOffset(t).top;d(t,{beforeLimit:r+.25*i,afterLimit:r+.75*i})},f=function(e){var i,r=e.location,o=s.dropAdd,a="add",l=parseInt(t.attr(n.attr("level")),10);t.beforeLimit>=r?(i=t.prev(),o=s.dropTop,a="insert-before"):r>=t.afterLimit&&(i=t.next(),o=s.dropBottom,a="insert-after"),i&&parseInt(i.attr(n.attr("level")),10)===l&&(o=s.dropMiddle),c.className=o,c.command=a},m=function(){return i._reorderDraggable.hint.children(y+s.dragStatus).removeClass(s.dropPositions)};this.options.editable&&(this._reorderDraggable=this.content.kendoDraggable({distance:10,holdToDrag:a,group:"listGroup",filter:"tr[data-uid]",ignore:y+s.input,hint:function(t){return e('<div class="'+s.header+" "+s.dragClue+'"/>').css({width:300,paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).append('<span class="'+s.icon+" "+s.dragStatus+'" /><span class="'+s.dragClueText+'"/>')},cursorOffset:{top:-20,left:0},container:this.content,dragstart:function(e){i.editable&&e.preventDefault(),r=i._modelFromElement(e.currentTarget),this.hint.children(y+s.dragClueText).text(r.get("title"))},drag:function(e){o&&(f(e.y),m().addClass(c.className))},dragend:function(){u()},dragcancel:function(){u()}}).data("kendoDraggable"),this._tableDropArea=this.content.kendoDropTargetArea({distance:0,group:"listGroup",filter:"tr[data-uid]",dragenter:function(e){t=e.dropTarget,h(i._modelFromElement(t)),p(),m().toggleClass(s.dropDenied,!o)},dragleave:function(){o=!0,m()},drop:function(){var e=i._modelFromElement(t),n=e.orderId,s={parentId:e.parentId};if(o){switch(c.command){case"add":s.parentId=e.id;break;case"insert-before":s.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?n-1:n;break;case"insert-after":s.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?n:n+1}i.trigger("update",{task:r,updateInfo:s})}}}).data("kendoDropTargetArea"),this._contentDropArea=this.element.kendoDropTargetArea({distance:0,group:"listGroup",filter:y+s.gridContent,drop:function(){var e=i._modelFromElement(i.content.find(l)),t=e.orderId,n={parentId:null,orderId:null!==r.parentId?t+1:t};i.trigger("update",{task:r,updateInfo:n})}}).data("kendoDropTargetArea"))},_modelFromElement:function(e){var t=e.closest("tr"),i=this.dataSource.getByUid(t.attr(n.attr("uid")));return i},_columnFromElement:function(e){var t=e.closest("td"),i=t.parent(),n=i.children().index(t);return this.columns[n]}});d(!0,l.GanttList,{styles:_})}(window.kendo.jQuery),function(e){function t(e){return delete e.name,delete e.prefix,delete e.views,e}function i(e){var t=[],i=e.workWeekStart;for(t.push(i);e.workWeekEnd!=i;)i>6?i-=7:i++,t.push(i);return t}function n(){var t=kendo._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var r,o,s=kendo.ui.Widget,a=kendo.dom.element,l=kendo.dom.text,c=e.isPlainObject,d=e.extend,u=kendo.support.browser,h=kendo.keys,p=kendo.data.Query,f=".kendoGanttTimeline",m="click",g="dblclick",v="keydown",y=".",_=kendo.template("#=kendo.toString(start, 't')#"),b=kendo.template("#=kendo.toString(start, 'ddd M/dd')#"),w=kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#"),k=kendo.template("#=kendo.toString(start, 'MMM')#"),x=kendo.template("#=kendo.toString(start, 'yyyy')#"),C=kendo.template('<div class="#=styles.marquee#"><div class="#=styles.marqueeColor#"></div></div>'),S=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#"><div class="#=styles.tooltipContent#"><div>Start: #=kendo.toString(start, "ddd M/dd HH:mm")#</div><div>End: #=kendo.toString(end, "ddd M/dd HH:mm")#</div></div></div>'),T=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" ><div class="#=styles.tooltipContent#">#=text#%</div><div class="#=styles.tooltipCallout#" style="left:13px;"></div></div>'),D={day:{type:"kendo.ui.GanttDayView"},week:{type:"kendo.ui.GanttWeekView"},month:{type:"kendo.ui.GanttMonthView"},year:{type:"kendo.ui.GanttYearView"}},M={alt:"k-alt",nonWorking:"k-nonwork-hour",header:"k-header",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",rowsTable:"k-gantt-rows",columnsTable:"k-gantt-columns",tasksTable:"k-gantt-tasks",resource:"k-resource",resourceAlt:"k-resource k-alt",task:"k-task",taskSingle:"k-task-single",taskMilestone:"k-task-milestone",taskSummary:"k-task-summary",taskWrap:"k-task-wrap",taskMilestoneWrap:"k-milestone-wrap",resourcesWrap:"k-resources-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",taskDragHandle:"k-task-draghandle",taskContent:"k-task-content",taskTemplate:"k-task-template",taskActions:"k-task-actions",taskDelete:"k-task-delete",taskComplete:"k-task-complete",link:"k-link",icon:"k-icon",iconDelete:"k-si-close",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskResizeHandleEast:"k-resize-e",taskSummaryProgress:"k-task-summary-progress",taskSummaryComplete:"k-task-summary-complete",line:"k-line",lineHorizontal:"k-line-h",lineVertical:"k-line-v",arrowWest:"k-arrow-w",arrowEast:"k-arrow-e",dragHint:"k-drag-hint",dependencyHint:"k-dependency-hint",tooltipWrapper:"k-widget k-tooltip k-popup k-group k-reset",tooltipContent:"k-tooltip-content",tooltipCallout:"k-callout k-callout-s",callout:"k-callout",marquee:"k-marquee k-gantt-marquee",marqueeColor:"k-marquee-color"},A=kendo.ui.GanttView=s.extend({init:function(e,t){s.fn.init.call(this,e,t),this.title=this.options.title||this.options.name,this.header=this.element.find(y+A.styles.gridHeader),this.content=this.element.find(y+A.styles.gridContent),this.contentWidth=this.content.width(),this._workDays=i(this.options),this._headerTree=t.headerTree,this._taskTree=t.taskTree,this._dependencyTree=t.dependencyTree,this._taskCoordinates={}},destroy:function(){s.fn.destroy.call(this),this.headerRow=null,this.header=null,this.content=null,this._dragHint=null,this._resizeHint=null,this._resizeTooltip=null,this._percentCompleteResizeTooltip=null,this._headerTree=null,this._taskTree=null,this._dependencyTree=null},options:{showWorkHours:!1,showWorkDays:!1,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,slotSize:100},renderLayout:function(){this._slots=this._createSlots(),this._tableWidth=this._calculateTableWidth(),this.createLayout(this._layout()),this._slotDimensions(),this._adjustHeight()},_adjustHeight:function(){this.content.height(this.element.height()-this.header.outerHeight())},createLayout:function(e){var t=this._headers(e),i=this._colgroup(),n=this._headerTree,r=a("thead",null,t),o=a("table",{style:{width:this._tableWidth+"px"}},[i,r]);n.render([o]),this.headerRow=this.header.find("table:first tr").last()},_slotDimensions:function(){var e,t,i,n,r=this.headerRow[0].children,o=this._timeSlots();for(i=0,n=r.length;n>i;i++)t=r[i],e=o[i],e.offsetLeft=t.offsetLeft,e.offsetWidth=t.offsetWidth},render:function(e){var t,i=e.length,n=A.styles,r=this._rowsTable(i),o=this._columnsTable(i),s=this._tasksTable(e);this._taskTree.render([r,o,s]),t=this.content.find(y+n.rowsTable),this._contentHeight=t.height(),this._rowHeight=t.find("tr").height(),this.content.find(y+n.columnsTable).height(this._contentHeight)},_rowsTable:function(e){var t,i,n=[],r=A.styles,o=[null,{className:r.alt}];for(i=0;e>i;i++)t=a("tr",o[i%2],[a("td",null,[l("聽")])]),n.push(t);return this._createTable(1,n,{className:r.rowsTable})},_columnsTable:function(){var e,t,i,n,r,o=[],s=A.styles,c=this._timeSlots(),d=c.length,u=0;for(r=0;d>r;r++)t=c[r],n={},i=t.span,u+=i,1!==i&&(n.colspan=i),t.isNonWorking&&(n.className=s.nonWorking),o.push(a("td",n,[l("聽")]));return e=a("tr",null,o),this._createTable(u,[e],{className:s.columnsTable})},_tasksTable:function(e){var t,i,n,r,o,s,l,c=[],d=A.styles,u=this._taskCoordinates={},h=this._calculateMilestoneWidth(),p=Math.round(h.width),f=this.options.resourcesField,m=[d.resource,d.resourceAlt],g=this._calculateResourcesMargin(),v=function(e){var t=n.left,i=t+n.width;r.isMilestone()&&(t-=p/2,i=t+p),u[r.id]={start:t,end:i,rowIndex:e}};for(s=0,l=e.length;l>s;s++)r=e[s],n=this._taskPosition(r),t=a("tr",null),i=a("td",null,[this._renderTask(e[s],n)]),r[f]&&r[f].length&&(o=Math.max(n.width||h.clientWidth,0)+n.left,i.children.push(a("div",{className:d.resourcesWrap,style:{left:o+"px",width:this._tableWidth-(o+g)+"px"}},this._renderResources(r[f],m[s%2])))),t.children.push(i),c.push(t),v(s);return this._createTable(1,c,{className:A.styles.tasksTable})},_createTable:function(e,t,i){var n,r,o,s=[];for(o=0;e>o;o++)s.push(a("col"));return n=a("colgroup",null,s),r=a("tbody",null,t),i.style||(i.style={}),i.style.width=this._tableWidth+"px",a("table",i,[n,r])},_calculateTableWidth:function(){var e,t,i,n,r=this._timeSlots(),o=0,s=0;for(i=0,n=r.length;n>i;i++)e=r[i].span,s+=e,e>o&&(o=e);return t=Math.round(s*this.options.slotSize/o)},_calculateMilestoneWidth:function(){var t,i=A.styles.task+" "+A.styles.taskMilestone,n=e("<div class='"+i+"' style='visibility: hidden; position: absolute'>");return this.content.append(n),t={width:n[0].getBoundingClientRect().width,clientWidth:n[0].clientWidth},n.remove(),t},_calculateResourcesMargin:function(){var t,i=e("<div class='"+A.styles.resourcesWrap+"' style='visibility: hidden; position: absolute'>");return this.content.append(i),t=parseInt(i.css("margin-left"),10),i.remove(),t},_renderTask:function(e,t){var i,n,r,o=this.options.editable,s=t.left,l=A.styles,c=l.taskWrap;return e.summary?n=this._renderSummary(e,t):e.isMilestone()?(n=this._renderMilestone(e,t),c+=" "+l.taskMilestoneWrap):n=this._renderSingleTask(e,t),i=a("div",{className:c,style:{left:s+"px"}},[n]),o&&(i.children.push(a("div",{className:l.taskDot+" "+l.taskDotStart})),i.children.push(a("div",{className:l.taskDot+" "+l.taskDotEnd}))),e.summary||e.isMilestone()||!o||(r=Math.round(t.width*e.percentComplete),i.children.push(a("div",{className:l.taskDragHandle,style:{left:r+"px"}}))),i},_renderSingleTask:function(e,t){var i,n=A.styles,r=Math.round(t.width*e.percentComplete),o=a("div",{className:n.taskContent},[a("div",{className:n.taskTemplate},[l(e.title)])]);return this.options.editable&&(o.children.push(a("span",{className:n.taskActions},[a("a",{className:n.link+" "+n.taskDelete,href:"#"},[a("span",{className:n.icon+" "+n.iconDelete})])])),o.children.push(a("span",{className:n.taskResizeHandle+" "+n.taskResizeHandleWest})),o.children.push(a("span",{className:n.taskResizeHandle+" "+n.taskResizeHandleEast}))),i=a("div",{className:n.task+" "+n.taskSingle,"data-uid":e.uid,style:{width:Math.max(t.width-2,0)+"px"}},[a("div",{className:n.taskComplete,style:{width:r+"px"}}),o])},_renderMilestone:function(e){var t=A.styles,i=a("div",{className:t.task+" "+t.taskMilestone,"data-uid":e.uid});return i},_renderSummary:function(e,t){var i=A.styles,n=Math.round(t.width*e.percentComplete),r=a("div",{className:i.task+" "+i.taskSummary,"data-uid":e.uid,style:{width:t.width+"px"}},[a("div",{className:i.taskSummaryProgress,style:{width:n+"px"}},[a("div",{className:i.taskSummaryComplete,style:{width:t.width+"px"}})])]);return r},_renderResources:function(e,t){var i,n,r,o=[];for(n=0,r=e.length;r>n;n++)i=e[n],o.push(a("span",{className:t,style:{color:i.get("color")}},[l(i.get("name"))]));return o},_taskPosition:function(e){var t=Math.round,i=t(this._offset(e.start)),n=t(this._offset(e.end));return{left:i,width:n-i}},_offset:function(e){var t,i,n,r=this._timeSlots(),o=this._slotIndex("start",e),s=r[o];return e>s.end?s.offsetLeft+s.offsetWidth:s.start>e?s.offsetLeft:(t=e-s.start,i=s.end-s.start,n=t/i*s.offsetWidth,s.offsetLeft+n)},_slotIndex:function(e,t){var i,n=this._timeSlots(),r=0,o=n.length-1;do i=Math.ceil((o+r)/2),t>n[i][e]?r=i:(i===o&&i--,o=i);while(r!==o);return r},_timeByPosition:function(e,t,i){var n,r,o,s=this._slotByPosition(e);return t?i?s.end:s.start:(n=e-(this.content.offset().left-this.content.scrollLeft()),r=s.end-s.start,
o=r*((n-s.offsetLeft)/s.offsetWidth),new Date(s.start.getTime()+o))},_slotByPosition:function(e){var t=e-(this.content.offset().left-this.content.scrollLeft()),i=this._slotIndex("offsetLeft",t);return this._timeSlots()[i]},_renderDependencies:function(e){var t,i,n=[],r=this._dependencyTree;for(t=0,i=e.length;i>t;t++)n.push.apply(n,this._renderDependency(e[t]));r.render(n)},_renderDependency:function(e){var t,i,n,r,o=this._taskCoordinates[e.predecessorId],s=this._taskCoordinates[e.successorId];if(!o||!s)return[];for(i="_render"+["FF","FS","SF","SS"][e.type],t=this[i](o,s),n=0,r=t.length;r>n;n++)t[n].attr["data-uid"]=e.uid;return t},_renderFF:function(e,t){var i=this._dependencyFF(e,t,!1);return i[i.length-1].children[0]=this._arrow(!0),i},_renderSS:function(e,t){var i=this._dependencyFF(t,e,!0);return i[0].children[0]=this._arrow(!1),i.reverse()},_renderFS:function(e,t){var i=this._dependencyFS(e,t,!1);return i[i.length-1].children[0]=this._arrow(!1),i},_renderSF:function(e,t){var i=this._dependencyFS(t,e,!0);return i[0].children[0]=this._arrow(!0),i.reverse()},_dependencyFF:function(e,t,i){var n,r=this,o=[],s=0,a=0,l=0,c=0,d=i?"start":"end",u=2,h=1,p=this._rowHeight,f=10,m=e.rowIndex*p+Math.floor(p/2)-1,g=t.rowIndex*p+Math.floor(p/2)-1,v=A.styles,y=function(){o.push(r._line(v.line+" "+v.lineHorizontal,{left:s+"px",top:a+"px",width:l+"px"}))},_=function(){o.push(r._line(v.line+" "+v.lineVertical,{left:s+"px",top:a+"px",height:c+"px"}))};return s=e[d],a=m,l=f,n=t[d]-e[d],n>0!==i&&(l=Math.abs(n)+f),i?(s-=l,l-=h,y()):(y(),s+=l-u),a>g?(c=a-g,c+=u,a=g,_()):(c=g-a,c+=u,_(),a+=c-u),l=Math.abs(s-t[d]),i||(l-=h,s-=l),y(),o},_dependencyFS:function(e,t,i){var n=this,r=[],o=0,s=0,a=0,l=0,c=this._rowHeight,d=Math.floor(c/2),u=10,h=2*u,p=t.start-e.end,f=2,m=1,g=e.rowIndex*c+Math.floor(c/2)-1,v=t.rowIndex*c+Math.floor(c/2)-1,y=A.styles,_=function(){r.push(n._line(y.line+" "+y.lineHorizontal,{left:o+"px",top:s+"px",width:a+"px"}))},b=function(){r.push(n._line(y.line+" "+y.lineVertical,{left:o+"px",top:s+"px",height:l+"px"}))};return o=e.end,s=g,a=u,i&&(o+=m,p>h&&(a=p-(u-f)),a-=m),_(),o+=a-f,h>=p&&(l=i?Math.abs(v-g)-d:d,g>v?(s-=l,l+=f,b()):(b(),s+=l),a=e.end-t.start+h,u>a&&(a=u),o-=a-f,_()),g>v?(l=s-v,s=v,l+=f,b()):(l=v-s,b(),s+=l),a=t.start-o,i||(a-=m),_(),r},_line:function(e,t){return a("div",{className:e,style:t})},_arrow:function(e){return a("span",{className:e?A.styles.arrowWest:A.styles.arrowEast})},_colgroup:function(){var e,t,i,n=this._timeSlots(),r=n.length,o=[];for(e=0;r>e;e++)for(t=0,i=n[e].span;i>t;t++)o.push(a("col"));return a("colgroup",null,o)},_createDragHint:function(e){this._dragHint=e.clone().addClass(A.styles.dragHint).css("cursor","move"),e.parent().append(this._dragHint)},_updateDragHint:function(e){var t=this._offset(e);this._dragHint.css({left:t})},_removeDragHint:function(){this._dragHint.remove(),this._dragHint=null},_createResizeHint:function(t){var i,n,r=A.styles,o=this._taskCoordinates[t.id].rowIndex*this._rowHeight;this._resizeHint=e(C({styles:r})).css({top:0,height:this._contentHeight}),this.content.append(this._resizeHint),this._resizeTooltip=e(S({styles:r,start:t.start,end:t.end})).css({top:0,left:0}),this.content.append(this._resizeTooltip),this._resizeTooltipWidth=this._resizeTooltip.outerWidth(),i=this._resizeTooltip.outerHeight(),n=o-i,0>n&&(n=o+this._rowHeight),this._resizeTooltipTop=n},_updateResizeHint:function(t,i,n){var r=this._offset(t),o=this._offset(i),s=o-r,a=n?r:o,l=this._tableWidth-17,c=this._resizeTooltipWidth;this._resizeHint.css({left:r,width:s}),this._resizeTooltip&&this._resizeTooltip.remove(),a-=Math.round(c/2),0>a?a=0:a+c>l&&(a=l-c),this._resizeTooltip=e(S({styles:A.styles,start:t,end:i})).css({top:this._resizeTooltipTop,left:a,"min-width":c}),this.content.append(this._resizeTooltip)},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=null,this._resizeTooltip.remove(),this._resizeTooltip=null},_updatePercentCompleteTooltip:function(t,i,n){var r,o,s,a;this._removePercentCompleteTooltip(),r=this._percentCompleteResizeTooltip=e(T({styles:A.styles,text:n})).appendTo(this.element),o=Math.round(r.outerWidth()/2),s=r.find(y+A.styles.callout),a=Math.round(s.outerWidth()/2),r.css({top:t-(r.outerHeight()+a),left:i-o}),s.css("left",o-a)},_removePercentCompleteTooltip:function(){this._percentCompleteResizeTooltip&&this._percentCompleteResizeTooltip.remove(),this._percentCompleteResizeTooltip=null},_updateDependencyDragHint:function(e,t,i){this._removeDependencyDragHint(),i?this._creteVmlDependencyDragHint(e,t):this._creteDependencyDragHint(e,t)},_creteDependencyDragHint:function(t,i){var n=A.styles,r=i.x-t.x,o=i.y-t.y,s=Math.sqrt(r*r+o*o),a=Math.atan(o/r);0>r&&(a+=Math.PI),e("<div class='"+n.line+" "+n.lineHorizontal+" "+n.dependencyHint+"'></div>").css({top:t.y,left:t.x,width:s,"transform-origin":"0% 0","-ms-transform-origin":"0% 0","-webkit-transform-origin":"0% 0",transform:"rotate("+a+"rad)","-ms-transform":"rotate("+a+"rad)","-webkit-transform":"rotate("+a+"rad)"}).appendTo(this.content)},_creteVmlDependencyDragHint:function(t,i){var n=e("<kvml:line class='"+A.styles.dependencyHint+"' style='position:absolute; top: 0px;' strokecolor='black' strokeweight='2px' from='"+t.x+"px,"+t.y+"px' to='"+i.x+"px,"+i.y+"px'></kvml:line>").appendTo(this.content);n[0].outerHTML=n[0].outerHTML},_removeDependencyDragHint:function(){this.content.find(y+A.styles.dependencyHint).remove()},_scrollTo:function(e){var t=e.offset().left,i=e.width(),n=t+i,r=e.closest("tr"),o=r.offset().top,s=r.height(),a=o+s,l=this.content,c=l.offset(),d=c.top,u=l.height(),h=d+u,p=c.left,f=l.width(),m=p+f,g=kendo.support.scrollbar();d>o?l.scrollTop(l.scrollTop()+(o-d)):a>h&&l.scrollTop(l.scrollTop()+(a+g-h)),p>t&&i>f&&m>n||n>m&&f>i?l.scrollLeft(l.scrollLeft()+(n+g-m)):(n>m&&i>f&&t>p||p>t&&f>i)&&l.scrollLeft(l.scrollLeft()+(t-p))},_timeSlots:function(){return this._slots[this._slots.length-1]},_headers:function(e){var t,i,n,r,o,s,c,d,u=[],h=A.styles;for(o=0,s=e.length;s>o;o++){for(t=e[o],i=[],c=0,d=t.length;d>c;c++)n=t[c],r=l(n.text),i.push(a("th",{colspan:n.span,className:h.header+(n.isNonWorking?" "+h.nonWorking:"")},[r]));u.push(a("tr",null,i))}return u},_hours:function(e,t){var i,n,r,o=[],s=this.options,a=s.workDayStart.getHours(),l=s.workDayEnd.getHours(),c=s.hourSpan;for(e=new Date(e),t=new Date(t);t>e;)i=new Date(e),r=i.getHours(),n=r>=a&&l>r,i.setHours(i.getHours()+c),r==i.getHours()&&i.setHours(i.getHours()+2*c),(!s.showWorkHours||n)&&o.push({start:e,end:i,isNonWorking:!n,span:1}),e=i;return o},_days:function(e,t){var i,n,r=[];for(e=new Date(e),t=new Date(t);t>e;)i=kendo.date.nextDay(e),n=this._isWorkDay(e),(!this.options.showWorkDays||n)&&r.push({start:e,end:i,isNonWorking:!n,span:1}),e=i;return r},_weeks:function(e,t){var i,n,r,o=[],s=this.calendarInfo().firstDay;for(e=new Date(e),t=new Date(t);t>e;)i=kendo.date.dayOfWeek(kendo.date.addDays(e,1),s,1),i>t&&(i=t),n=this._days(e,i),r=n.length,r>0&&o.push({start:n[0].start,end:n[r-1].end,span:r}),e=i;return o},_months:function(e,t){var i,n,r,o=[];for(e=new Date(e),t=new Date(t);t>e;)i=new Date(e),i.setMonth(i.getMonth()+1),n=this._days(e,i),r=n.length,r>0&&o.push({start:n[0].start,end:n[r-1].end,span:r}),e=i;return o},_years:function(e,t){var i,n=[];for(e=new Date(e),t=new Date(t);t>e;)i=new Date(e),i.setFullYear(i.getFullYear()+1),n.push({start:e,end:i,span:12}),e=i;return n},_slotHeaders:function(e,t){var i,n,r,o=[];for(n=0,r=e.length;r>n;n++)i=e[n],o.push({text:t(i),isNonWorking:!!i.isNonWorking,span:i.span});return o},_isWorkDay:function(e){var t,i,n=e.getDay(),r=this._workDays;for(t=0,i=r.length;i>t;t++)if(r[t]===n)return!0;return!1},calendarInfo:function(){return kendo.getCulture().calendars.standard}});d(!0,A,{styles:M}),kendo.ui.GanttDayView=A.extend({name:"day",options:{timeHeaderTemplate:_,dayHeaderTemplate:b},range:function(e){this.start=kendo.date.getDate(e.start),this.end=kendo.date.getDate(e.end),(kendo.date.getMilliseconds(e.end)>0||this.end.getTime()===this.start.getTime())&&(this.end=kendo.date.addDays(this.end,1))},_createSlots:function(){var e,t,i,n,r=[],o=this._days(this.start,this.end),s=[];for(i=0,n=o.length;n>i;i++)e=o[i],t=this._hours(e.start,e.end),e.span=t.length,s.push.apply(s,t);return r.push(o),r.push(s),r},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.dayHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.timeHeaderTemplate))),e}}),kendo.ui.GanttWeekView=A.extend({name:"week",options:{dayHeaderTemplate:b,weekHeaderTemplate:w},range:function(e){var t=this.calendarInfo(),i=t.firstDay;this.start=kendo.date.getDate(kendo.date.dayOfWeek(e.start,i,-1)),this.end=kendo.date.getDate(kendo.date.dayOfWeek(e.end,i,1))},_createSlots:function(){var e=[];return e.push(this._weeks(this.start,this.end)),e.push(this._days(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.weekHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.dayHeaderTemplate))),e}}),kendo.ui.GanttMonthView=A.extend({name:"month",options:{weekHeaderTemplate:w,monthHeaderTemplate:k},range:function(e){this.start=kendo.date.firstDayOfMonth(e.start),this.end=kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(e.end)),1)},_createSlots:function(){var e=[];return e.push(this._months(this.start,this.end)),e.push(this._weeks(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.monthHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.weekHeaderTemplate))),e}}),kendo.ui.GanttYearView=A.extend({name:"year",options:{yearHeaderTemplate:x,monthHeaderTemplate:k},range:function(e){this.start=kendo.date.firstDayOfMonth(new Date(e.start.setMonth(0))),this.end=kendo.date.firstDayOfMonth(new Date(e.end.setMonth(12)))},_createSlots:function(){var t=[],i=this._months(this.start,this.end);return e(i).each(function(e,t){t.span=1}),t.push(this._years(this.start,this.end)),t.push(i),t},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.yearHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.monthHeaderTemplate))),e}}),r={wrapper:"k-timeline k-grid k-widget",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",tasksWrapper:"k-gantt-tables",dependenciesWrapper:"k-gantt-dependencies",task:"k-task",line:"k-line",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskDragHandle:"k-task-draghandle",taskComplete:"k-task-complete",taskDelete:"k-task-delete",taskWrapActive:"k-task-wrap-active",taskWrap:"k-task-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",hovered:"k-state-hover",selected:"k-state-selected",origin:"k-origin"},o=kendo.ui.GanttTimeline=s.extend({init:function(e,t){s.fn.init.call(this,e,t),this.options.views&&this.options.views.length||(this.options.views=["day","week","month"]),this._wrapper(),this._domTrees(),this._views(),this._selectable(),this._draggable(),this._resizable(),this._percentResizeDraggable(),this._createDependencyDraggable(),this._attachEvents()},options:{name:"GanttTimeline",messages:{views:{day:"Day",week:"Week",month:"Month",year:"Year"}},snap:!0,selectable:!0,editable:!0},destroy:function(){s.fn.destroy.call(this),this._unbindView(this._selectedView),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this._percentDraggable&&this._percentDraggable.destroy(),this._dependencyDraggable&&this._dependencyDraggable.destroy(),this._headerTree=null,this._taskTree=null,this._dependencyTree=null,this.wrapper.off(f),kendo.destroy(this.wrapper)},_wrapper:function(){var e=o.styles;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.gridHeader+"'><div class='"+e.gridHeaderWrap+"'></div></div>").append("<div class='"+e.gridContentWrap+"'><div class='"+e.tasksWrapper+"'></div><div class='"+e.dependenciesWrapper+"'></div></div>")},_domTrees:function(){var e=o.styles,t=kendo.dom.Tree,i=this.wrapper;this._headerTree=new t(i.find(y+e.gridHeaderWrap)[0]),this._taskTree=new t(i.find(y+e.tasksWrapper)[0]),this._dependencyTree=new t(i.find(y+e.dependenciesWrapper)[0])},_views:function(){var e,t,i,n,r,o,s,a=this.options.views;for(this.views={},o=0,s=a.length;s>o;o++)e=a[o],t=c(e),t&&e.selectable===!1||(i=t?"string"!=typeof e.type?e.title:e.type:e,n=D[i],n&&(t&&(e.type=n.type),n.title=this.options.messages.views[i]),e=d({title:i},n,t?e:{}),i&&(this.views[i]=e,(!r||e.selected)&&(r=i)));r&&(this._selectedViewName=r)},view:function(e){return e&&(this._selectView(e),this.trigger("navigate",{view:e,action:"changeView"})),this._selectedView},_selectView:function(e){e&&this.views[e]&&(this._selectedView&&this._unbindView(this._selectedView),this._selectedView=this._initializeView(e),this._selectedViewName=e)},_viewByIndex:function(e){var t,i=this.views;for(t in i){if(!e)return t;e--}},_initializeView:function(e){var i,n=this.views[e];if(n){if(i=n.type,"string"==typeof i&&(i=kendo.getter(n.type)(window)),!i)throw Error("There is no such view");n=new i(this.wrapper,t(d(!0,{headerTree:this._headerTree,taskTree:this._taskTree,dependencyTree:this._dependencyTree},n,this.options)))}return n},_unbindView:function(e){e&&e.destroy()},_range:function(e){var t,i,n={field:"start",dir:"asc"},r={field:"end",dir:"desc"};return e&&e.length?(t=new p(e).sort(n).toArray()[0].start||new Date,i=new p(e).sort(r).toArray()[0].end||new Date,{start:new Date(t),end:new Date(i)}):{start:new Date,end:new Date}},_render:function(e){var t=this.view(),i=this._range(e);this._tasks=e,t.range(i),t.renderLayout(),t.render(e)},_renderDependencies:function(e){this.view()._renderDependencies(e)},_taskByUid:function(e){var t,i,n=this._tasks,r=n.length;for(i=0;r>i;i++)if(t=n[i],t.uid===e)return t},_draggable:function(){var e,t,i,r,s,a=this,l=this.options.snap,c=o.styles,d=function(){a.view()._removeDragHint(),e&&e.css("opacity",1),e=null,t=null,s=!1};this.options.editable&&(this._moveDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:y+c.task,holdToDrag:kendo.support.mobileOS,ignore:y+c.taskResizeHandle}),this._moveDraggable.bind("dragstart",function(n){var o=a.view();return e=n.currentTarget.parent(),t=a._taskByUid(n.currentTarget.attr("data-uid")),a.trigger("moveStart",{task:t})?void n.preventDefault():(i=t.start,r=o._timeByPosition(n.x.location,l)-i,o._createDragHint(e),e.css("opacity",.5),void(s=!0))}).bind("drag",kendo.throttle(function(e){var n,o;s&&(n=a.view(),o=new Date(n._timeByPosition(e.x.location,l)-r),a.trigger("move",{task:t,start:o})||(i=o,n._updateDragHint(i)))},15)).bind("dragend",function(){a.trigger("moveEnd",{task:t,start:i}),d()}).bind("dragcancel",function(){d()}).userEvents.bind("select",function(){n()}))},_resizable:function(){var e,t,i,r,s,a,l=this,c=this.options.snap,d=o.styles,u=function(){l.view()._removeResizeHint(),e=null,t=null,a=!1};this.options.editable&&(this._resizeDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:y+d.taskResizeHandle,holdToDrag:!1}),this._resizeDraggable.bind("dragstart",function(n){return s=n.currentTarget.hasClass(d.taskResizeHandleWest),e=n.currentTarget.closest(y+d.task),t=l._taskByUid(e.attr("data-uid")),l.trigger("resizeStart",{task:t})?void n.preventDefault():(i=t.start,r=t.end,l.view()._createResizeHint(t),void(a=!0))}).bind("drag",kendo.throttle(function(e){var n,o;a&&(n=l.view(),o=n._timeByPosition(e.x.location,c,!s),s?i=r>o?o:r:r=o>i?o:i,l.trigger("resize",{task:t,start:i,end:r})||n._updateResizeHint(i,r,s))},15)).bind("dragend",function(){l.trigger("resizeEnd",{task:t,resizeStart:s,start:i,end:r}),u()}).bind("dragcancel",function(){u()}).userEvents.bind("select",function(){n()}))},_percentResizeDraggable:function(){var e,t,i,r,s,a,l,c,d,u,h=this,p=o.styles,f=function(){h.view()._removePercentCompleteTooltip(),t=null,e=null,u=!1},m=function(e){t.find(y+p.taskComplete).width(e).end().siblings(y+p.taskDragHandle).css("left",e)};this.options.editable&&(this._percentDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:y+p.taskDragHandle,holdToDrag:!1}),this._percentDraggable.bind("dragstart",function(n){t=n.currentTarget.siblings(y+p.task),e=h._taskByUid(t.attr("data-uid")),l=e.percentComplete,i=t.offset(),r=this.element.offset(),s=t.find(y+p.taskComplete).width(),a=t.outerWidth(),u=!0}).bind("drag",kendo.throttle(function(e){if(u){var t=Math.max(0,Math.min(a,s+e.x.initialDelta));l=Math.round(t/a*100),m(t),c=i.top-r.top,d=i.left+t-r.left,h.view()._updatePercentCompleteTooltip(c,d,l)}},15)).bind("dragend",function(){h.trigger("percentResizeEnd",{task:e,percentComplete:l/100}),f()}).bind("dragcancel",function(){m(s),f()}).userEvents.bind("select",function(){n()}))},_createDependencyDraggable:function(){var t,i,r,s,a,l,c=this,d=e(),h=e(),p=u.msie&&9>u.version,f=o.styles,m=function(){t.css("display","").removeClass(f.hovered),t.parent().removeClass(f.origin),t=null,g(!1),h=e(),d=e(),c.view()._removeDependencyDragHint(),i=!1},g=function(e){h.hasClass(f.origin)||(h.find(y+f.taskDot).css("display",e?"block":""),d.toggleClass(f.hovered,e))};this.options.editable&&(p&&document.namespaces&&document.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),this._dependencyDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:y+f.taskDot,holdToDrag:!1}),this._dependencyDraggable.bind("dragstart",function(e){t=e.currentTarget.css("display","block").addClass(f.hovered),t.parent().addClass(f.origin);var n=t.offset();a=c.view().content,l=a.offset(),r=Math.round(n.left+a.scrollLeft()-l.left+t.outerHeight()/2),s=Math.round(n.top+a.scrollTop()-l.top+t.outerWidth()/2),i=!0}).bind("drag",kendo.throttle(function(t){var n,o,u;i&&(c.view()._removeDependencyDragHint(),n=e(kendo.elementUnderCursor(t)),o=t.x.location+a.scrollLeft()-l.left,u=t.y.location+a.scrollTop()-l.top,c.view()._updateDependencyDragHint({x:r,y:s},{x:o,y:u},p),g(!1),d=n.hasClass(f.taskDot)?n:e(),h=n.closest(y+f.taskWrap),g(!0))},15)).bind("dragend",function(){var e,i,n,r,o;d.length&&(e=t.hasClass(f.taskDotStart),i=d.hasClass(f.taskDotStart),n=e?i?3:2:i?1:0,r=c._taskByUid(t.siblings(y+f.task).attr("data-uid")),o=c._taskByUid(d.siblings(y+f.task).attr("data-uid")),r!==o&&c.trigger("dependencyDragEnd",{type:n,predecessor:r,successor:o})),m()}).bind("dragcancel",function(){m()}).userEvents.bind("select",function(){n()}))},_selectable:function(){var t=this,i=o.styles;this.options.selectable&&this.wrapper.on(m+f,y+i.task,function(i){i.stopPropagation(),i.ctrlKey?t.trigger("clear"):t.trigger("select",{uid:e(this).attr("data-uid")})}).on(m+f,y+i.tasksWrapper,function(){t.selectDependency().length>0?t.clearSelection():t.trigger("clear")}).on(m+f,y+i.line,function(e){e.stopPropagation(),t.selectDependency(this)})},select:function(e){var t=this.wrapper.find(e),i=o.styles;return t.length?(this.clearSelection(),t.addClass(i.selected),void(kendo.support.mobileOS&&t.parent().addClass(i.taskWrapActive))):this.wrapper.find(y+i.task+y+i.selected)},selectDependency:function(t){var i,n=this.wrapper.find(t),r=o.styles;return n.length?(this.clearSelection(),this.trigger("clear"),i=e(n).attr("data-uid"),void this.wrapper.find(y+r.line+"[data-uid='"+i+"']").addClass(r.selected)):this.wrapper.find(y+r.line+y+r.selected)},clearSelection:function(){var e=o.styles;this.wrapper.find(y+e.selected).removeClass(e.selected),kendo.support.mobileOS&&this.wrapper.find(y+e.taskWrapActive).removeClass(e.taskWrapActive)},_attachEvents:function(){var t=this,i=o.styles;this.options.editable&&(this._tabindex(),this.wrapper.on(m+f,y+i.taskDelete,function(n){t.trigger("removeTask",{uid:e(this).closest(y+i.task).attr("data-uid")}),n.stopPropagation(),n.preventDefault()}).on(g+f,y+i.task,function(i){t.trigger("editTask",{uid:e(this).attr("data-uid")}),i.stopPropagation(),i.preventDefault()}).on(v+f,function(e){var i;e.keyCode===h.DELETE&&(i=t.selectDependency(),i.length&&(t.trigger("removeDependency",{uid:i.attr("data-uid")}),t.clearSelection()))}))}}),d(!0,o,{styles:r})}(window.kendo.jQuery),function(e,t){function i(e){return"["+f.attr("uid")+(e?"='"+e+"']":"]")}function n(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}function r(e){var t,i,n,r,o,s;if(e.filter("[name=end], [name=start]").length){for(t=e.attr("name"),i=f.widgetInstance(e,f.ui),n={},r=e;r!==window&&!o;)r=r.parent(),o=r.data("kendoEditable");return!(s=o?o.options.model:null)||(n.start=s.start,n.end=s.end,n[t]=i?i.value():f.parseDate(e.value()),n.end>=n.start)}return!0}function o(t,i){var n=t.parents("["+f.attr("role")+'="gantt"]'),r=[],o=s(n);t.attr(P,0),i&&o.each(function(t,i){r[t]=e(i).scrollTop()});try{t[0].setActive()}catch(e){t[0].focus()}i&&o.each(function(t,i){e(i).scrollTop(r[t])})}function s(t){return e(t).parentsUntil("body").filter(function(e,t){var i=f.getComputedStyles(t,["overflow"]);return"visible"!=i.overflow}).add(window)}var a,l,c,d,u,h,p,f=window.kendo,m=f.support.browser,g=f.Observable,v=f.ui.Widget,y=f.data.DataSource,_=f.data.ObservableObject,b=f.data.ObservableArray,w=f.data.Query,k=e.isArray,x=e.inArray,C=f.isFunction,S=e.proxy,T=e.extend,D=e.isPlainObject,M=e.map,A=f.keys,E=".kendoGantt",I="p0",P="tabIndex",F="click",z="width",H="string",R={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"}},N="aria-activedescendant",$="gantt_active_cell",O="action-option-focused",L=".",B="Are you sure you want to delete this task?",U="Are you sure you want to delete this dependency?",V='<button class="#=styles.button# #=className#" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span>#=text#</button>',W='<a class="#=className#" #=attr# href="\\#">#=text#</a>',j=f.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>'),q=f.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>'),G=f.template('<div class="#=styles.footerWrapper#"><div class="#=styles.actions#"><button class="#=styles.button#" data-action="#=action.data#"><span class="#=styles.iconPlus#"></span>#=action.title#</button></div></div>'),Y=function(t,i){var n={name:i.field},r=i.model.fields[i.field].validation;r&&D(r)&&r.message&&(n[f.attr("dateCompare-msg")]=r.message),e('<input type="text" required '+f.attr("type")+'="date" '+f.attr("role")+'="datetimepicker" '+f.attr("bind")+'="value:'+i.field+'" '+f.attr("validate")+"='true' />").attr(n).appendTo(t),e("<span "+f.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},Q=function(t,i){e('<a href="#" class="'+i.styles.button+'">'+i.messages.assingButton+"</a>").click(i.click).appendTo(t)},K={wrapper:"k-widget k-gantt",listWrapper:"k-gantt-layout k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-layout k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-floatwrap k-header k-gantt-toolbar",footerWrapper:"k-floatwrap k-header k-gantt-toolbar",toolbar:"k-gantt-toolbar",views:"k-gantt-views",viewsWrapper:"k-reset k-header k-gantt-views",actions:"k-gantt-actions",button:"k-button k-button-icontext",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-pdf",viewButtonDefault:"k-state-default",viewButton:"k-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}},X={append:{text:"Add Task",action:"add",className:K.toolbar.appendButton,iconClass:K.toolbar.iconPlus},pdf:{text:"Export to PDF",className:K.toolbar.pdfButton,iconClass:K.toolbar.iconPdf}},Z=g.extend({init:function(e,t){g.fn.init.call(this),this.element=e,this.options=T(!0,{},this.options,t),this._popup()},options:{direction:"down",navigatable:!1},_current:function(e){var t=p.styles,i=this.list.find(L+t.focused),n=i[e]();n.length&&(i.removeClass(t.focused).removeAttr("id"),n.addClass(t.focused).attr("id",O),this.list.find("ul").removeAttr(N).attr(N,O))},_popup:function(){var t=this,i=p.styles,n="li"+L+i.item,r=this.options.messages.actions,o=this.options.navigatable;this.list=e(q({styles:i,actions:[{data:"add",text:r.addChild},{data:"insert-before",text:r.insertBefore},{data:"insert-after",text:r.insertAfter}]})),this.element.append(this.list),this.popup=new f.ui.Popup(this.list,T({anchor:this.element,open:function(){t._adjustListWidth()},animation:this.options.animation},R[this.options.direction])),this.element.on(F+E,L+i.toolbar.appendButton,function(n){var r=e(this),s=r.attr(f.attr("action"));n.preventDefault(),s?t.trigger("command",{type:s}):(t.popup.open(),o&&t.list.find("li:first").addClass(i.focused).attr("id",O).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":O}).focus())}),this.list.find(n).hover(function(){e(this).addClass(i.hovered)},function(){e(this).removeClass(i.hovered)}).end().on(F+E,n,function(){t.trigger("command",{type:e(this).attr(f.attr("action"))}),t.popup.close()}),o&&(this.popup.bind("close",function(){t.list.find(n).removeClass(i.focused).end().find("ul").attr(P,0),t.element.parents("["+f.attr("role")+'="gantt"]').find(L+i.gridContent+" > table:first").focus()}),this.list.find("ul").on("keydown"+E,function(e){var n=e.keyCode;switch(n){case A.UP:e.preventDefault(),t._current("prev");break;case A.DOWN:e.preventDefault(),t._current("next");break;case A.ENTER:t.list.find(L+i.focused).click();break;case A.ESC:e.preventDefault(),t.popup.close()}}))},_adjustListWidth:function(){var e,t,i=this.list,n=i[0].style.width,r=this.element;(i.data(z)||!n)&&(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&(m.mozilla||m.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),n="border-box"!==i.css("box-sizing")?t-(i.outerWidth()-i.width()):t,i.css({fontFamily:r.css("font-family"),width:n}).data(z,n))},destroy:function(){this.popup.destroy(),this.element.off(E),this.list.off(E),this.unbind()}}),J=function(e,t){return function(i){var n,r;if(i=k(n)?{data:i}:i,n=i||{},r=n.data,n.data=r,!(n instanceof e)&&n instanceof y)throw Error("Incorrect DataSource type. Only "+t+" instances are supported");return n instanceof e?n:new e(n)}},ee=f.data.Model.define({id:"id",fields:{id:{type:"number"},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}}),te=y.extend({init:function(e){y.fn.init.call(this,T(!0,{},{schema:{modelBase:ee,model:ee}},e))},successors:function(e){return this._dependencies("predecessorId",e)},predecessors:function(e){return this._dependencies("successorId",e)},dependencies:function(e){var t=this.predecessors(e),i=this.successors(e);return t.push.apply(t,i),t},_dependencies:function(e,t){var i=this.view(),n={field:e,operator:"eq",value:t};return i=new w(i).filter(n).toArray()}});te.create=J(te,"GanttDependencyDataSource"),a=f.data.Model.define({duration:function(){var e=this.end,t=this.start;return e-t},isMilestone:function(){return 0===this.duration()},_offset:function(e){var t,i,n=["start","end"];for(i=0;n.length>i;i++)t=new Date(this.get(n[i]).getTime()+e),this.set(n[i],t)},id:"id",fields:{id:{type:"number"},parentId:{type:"number",defaultValue:null,validation:{required:!0}},orderId:{type:"number",validation:{required:!0}},title:{type:"string",defaultValue:""},start:{type:"date",validation:{required:!0,dateCompare:r,message:"Start date should be before or equal to the end date"}},end:{type:"date",validation:{required:!0,dateCompare:r,message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:!0,min:0,max:1,step:.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:!0}}}),l=y.extend({init:function(e){y.fn.init.call(this,T(!0,{},{schema:{modelBase:a,model:a}},e))},remove:function(e){var t=e.get("parentId"),i=this.taskAllChildren(e);return this._removeItems(i),e=y.fn.remove.call(this,e),this._childRemoved(t,e.get("orderId")),e},add:function(e){return e?(e=this._toGanttTask(e),this.insert(this.taskSiblings(e).length,e)):t},insert:function(e,i){return i?(i=this._toGanttTask(i),i.set("orderId",e),i=y.fn.insert.call(this,e,i),this._reorderSiblings(i,this.taskSiblings(i).length-1),this._resolveSummaryFields(this.taskParent(i)),i):t},taskChildren:function(e){var i,n=this.view(),r={field:"parentId",operator:"eq",value:null},o=this._sort||{field:"orderId",dir:"asc"};if(e){if(i=e.get("id"),i===t||null===i)return[];r.value=i}return n=new w(n).filter(r).sort(o).toArray()},taskAllChildren:function(e){var t=[],i=this,n=function(e){var r=i.taskChildren(e);t.push.apply(t,r),M(r,n)};return e?n(e):t=this.view(),t},taskSiblings:function(e){if(!e)return null;var t=this.taskParent(e);return this.taskChildren(t)},taskParent:function(e){return e&&null!==e.get("parentId")?this.get(e.parentId):null},taskLevel:function(e){for(var t=0,i=this.taskParent(e);null!==i;)t+=1,i=this.taskParent(i);return t},taskTree:function(e){var t,i,n,r,o=[],s=this.taskChildren(e);for(i=0,n=s.length;n>i;i++)t=s[i],o.push(t),t.get("expanded")&&(r=this.taskTree(t),o.push.apply(o,r));return o},update:function(e,i){var n,r,o=this,s=function(e,t){var i,n,r=o.taskAllChildren(e);for(i=0,n=r.length;n>i;i++)r[i]._offset(t)},a=function(e){var t=e.field,i=e.sender;switch(t){case"start":o._resolveSummaryStart(o.taskParent(i)),s(i,i.get(t).getTime()-n.getTime());break;case"end":o._resolveSummaryEnd(o.taskParent(i));break;case"percentComplete":o._resolveSummaryPercentComplete(o.taskParent(i));break;case"orderId":o._reorderSiblings(i,n)}};i.parentId!==t&&(n=e.get("parentId"),n!==i.parentId&&(e.set("parentId",i.parentId),o._childRemoved(n,e.get("orderId")),e.set("orderId",o.taskSiblings(e).length-1),o._resolveSummaryFields(o.taskParent(e))),delete i.parentId),e.bind("change",a);for(r in i)n=e.get(r),e.set(r,i[r]);e.unbind("change",a)},_resolveSummaryFields:function(e){e&&(this._updateSummary(e),this.taskChildren(e).length&&(this._resolveSummaryStart(e),this._resolveSummaryEnd(e),this._resolveSummaryPercentComplete(e)))},_resolveSummaryStart:function(e){var t=this,i=function(e){var i,n,r,o=t.taskChildren(e),s=o[0].start.getTime();for(n=1,r=o.length;r>n;n++)i=o[n].start.getTime(),s>i&&(s=i);return new Date(s)};this._updateSummaryRecursive(e,"start",i)},_resolveSummaryEnd:function(e){var t=this,i=function(e){var i,n,r,o=t.taskChildren(e),s=o[0].end.getTime();for(n=1,r=o.length;r>n;n++)i=o[n].end.getTime(),i>s&&(s=i);return new Date(s)};this._updateSummaryRecursive(e,"end",i)},_resolveSummaryPercentComplete:function(e){var t=this,i=function(e){var i=t.taskChildren(e),n=new w(i).aggregate([{field:"percentComplete",aggregate:"average"
}]);return n.percentComplete.average};this._updateSummaryRecursive(e,"percentComplete",i)},_updateSummaryRecursive:function(e,t,i){var n,r;e&&(n=i(e),e.set(t,n),r=this.taskParent(e),r&&this._updateSummaryRecursive(r,t,i))},_childRemoved:function(e,t){var i,n,r=null===e?null:this.get(e),o=this.taskChildren(r);for(i=t,n=o.length;n>i;i++)o[i].set("orderId",i);this._resolveSummaryFields(r)},_reorderSiblings:function(e,t){var i,n=e.get("orderId"),r=n>t,o=r?t:n,s=r?n:t,a=r?o:o+1,l=this.taskSiblings(e);for(s=Math.min(s,l.length-1),i=o;s>=i;i++)l[i]!==e&&(l[i].set("orderId",a),a+=1)},_updateSummary:function(e){if(null!==e){var t=this.taskChildren(e).length;e.set("summary",t>0)}},_toGanttTask:function(e){if(!(e instanceof a)){var t=e;e=this._createNewModel(),e.accept(t)}return e}}),l.create=J(l,"GanttDataSource"),T(!0,f.data,{GanttDataSource:l,GanttTask:a,GanttDependencyDataSource:te,GanttDependency:ee}),c={desktop:{dateRange:Y,resources:Q}},d=f.Observable.extend({init:function(e,t){f.Observable.fn.init.call(this),this.element=e,this.options=T(!0,{},this.options,t),this.createButton=this.options.createButton},fields:function(e,t){var i=this,n=this.options.messages.editor,r=this.options.resources,o=function(e){e.preventDefault(),r.editor(i.container.find(L+p.styles.popup.resourcesField),t)},s=[{field:"title",title:n.title},{field:"start",title:n.start,editor:e.dateRange},{field:"end",title:n.end,editor:e.dateRange},{field:"percentComplete",title:n.percentComplete,format:I}];return t.get(r.field)&&s.push({field:r.field,title:n.resources,messages:n,editor:e.resources,click:o,styles:p.styles.popup}),s},_buildEditTemplate:function(e,t,i){var n,r,o,s,a=this.options.resources,l=this.options.editable.template,c=T({},f.Template,this.options.templateSettings),d=c.paramName,u=p.styles.popup,h="";if(l)typeof l===H&&(l=window.unescape(l)),h+=f.template(l,c)(e);else for(n=0,r=t.length;r>n;n++)o=t[n],h+='<div class="'+u.editLabel+'"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",o.field===a.field&&(h+='<div class="'+u.resourcesField+'" style="display:none"></div>'),!e.editable||e.editable(o.field)?(i.push(o),h+="<div "+f.attr("container-for")+'="'+o.field+'" class="'+u.editField+'"></div>'):(s="#:",o.field?(o=f.expr(o.field,d),s+=o+"==null?'':"+o):s+="''",s+="#",s=f.template(s,c),h+='<div class="'+u.editField+'">'+s(e)+"</div>");return h}}),u=d.extend({destroy:function(){this.close(),this.unbind()},editTask:function(e){this.editable=this._createPopupEditor(e)},close:function(){var e=this,t=function(){e.editable&&(e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};this.editable&&this.container.is(":visible")?this.container.data("kendoWindow").bind("deactivate",t).close():t()},showDialog:function(t){var i,n,r,o,s=t.buttons,a=p.styles.popup,l=f.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',a.form,a.formContainer,a.message,t.text,a.buttonsContainer);for(i=0,n=s.length;n>i;i++)l+=this.createButton(s[i]);l+="</div></div></div>",r=this.element,this.popup&&this.popup.destroy(),o=this.popup=e(l).appendTo(r).eq(0).on("click",L+a.button,function(t){t.preventDefault(),o.close();var i=e(t.currentTarget).index();s[i].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),r.focus()}}).getKendoWindow(),o.center().open()},_createPopupEditor:function(t){var i,n,r=this,o={},s=this.options.messages,a=p.styles,l=a.popup,d=f.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',f.attr("uid"),t.uid,l.form,l.editForm,l.formContainer),u=this.fields(c.desktop,t),h=[];return d+=this._buildEditTemplate(t,u,h),d+='<div class="'+l.buttonsContainer+'">',d+=this.createButton({name:"update",text:s.save,className:p.styles.primary}),d+=this.createButton({name:"cancel",text:s.cancel}),d+=this.createButton({name:"delete",text:s.destroy}),d+="</div></div></div>",i=this.container=e(d).appendTo(this.element).eq(0).kendoWindow(T({modal:!0,resizable:!1,draggable:!0,title:s.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&r.trigger("cancel",{container:i,model:t})&&e.preventDefault()}},o)),n=i.kendoEditable({fields:h,model:t,clearContainer:!1,validateOnBlur:!0,target:r.options.target}).data("kendoEditable"),this.trigger("edit",{container:i,model:t})?r.trigger("cancel",{container:i,model:t}):(i.data("kendoWindow").center().open(),i.on(F+E,L+a.buttonCancel,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("cancel",{container:i,model:t})}),i.on(F+E,L+a.buttonSave,function(e){var n,o,s,a,l;for(e.preventDefault(),e.stopPropagation(),n=r.fields(c.desktop,t),o={},a=0,l=n.length;l>a;a++)s=n[a].field,o[s]=t.get(s);r.trigger("save",{container:i,model:t,updateInfo:o})}),i.on(F+E,L+a.buttonDelete,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("remove",{container:i,model:t})})),n}}),h=v.extend({init:function(e,t){v.fn.init.call(this,e,t),this.wrapper=this.element,this.model=this.options.model,this.resourcesField=this.options.resourcesField,this.createButton=this.options.createButton,this._initContainer(),this._attachHandlers()},events:["save"],open:function(){this.window.center().open(),this.grid.resize(!0)},close:function(){this.window.bind("deactivate",S(this.destroy,this)).close()},destroy:function(){this._dettachHandlers(),this.grid.destroy(),this.grid=null,this.window.destroy(),this.window=null,v.fn.destroy.call(this),f.destroy(this.wrapper),this.element=this.wrapper=null},_attachHandlers:function(){var t=p.styles,i=this.grid,n=this._cancelProxy=S(this._cancel,this);this.container.on(F+E,L+t.buttonCancel,this._cancelProxy),this._saveProxy=S(this._save,this),this.container.on(F+E,L+t.buttonSave,this._saveProxy),this.window.bind("close",function(e){e.userTriggered&&n(e)}),i.wrapper.on(F+E,"input[type='checkbox']",function(){var t=e(this),n=e(t).closest("tr"),r=i.dataSource.getByUid(n.attr(f.attr("uid"))),o=e(t).is(":checked")?1:"";r.set("value",o)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.container.off(E),this.grid.wrapper.off()},_cancel:function(e){e.preventDefault(),this.close()},_save:function(e){e.preventDefault(),this._updateModel(),this.wrapper.is(L+p.styles.popup.resourcesField)||this.trigger("save",{container:this.wrapper,model:this.model}),this.close()},_initContainer:function(){var t=p.styles.popup,i=f.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"',t.form,t.editForm,t.formContainer,t.resourcesFormContainer);i=e(i),this.container=i.find(L+t.resourcesFormContainer),this.window=i.kendoWindow({modal:!0,resizable:!1,draggable:!0,visible:!1,title:this.options.messages.resourcesEditorTitle}).data("kendoWindow"),this._resourceGrid(),this._createButtons()},_resourceGrid:function(){var t=this,i=this.options.messages,n=e('<div id="resources-grid"/>').appendTo(this.container);this.grid=new f.ui.Grid(n,{columns:[{field:"name",title:i.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>"},{field:"value",title:i.unitsHeader,template:function(e){var t=e.format,i=null!==e.value?e.value:"";return t?f.toString(i,t):i}}],height:280,sortable:!0,editable:!0,filterable:!0,dataSource:{data:t.options.data,schema:{model:{id:"id",fields:{id:{from:"id",type:"number"},name:{from:"name",type:"string",editable:!1},value:{from:"value",type:"number",defaultValue:""},format:{from:"format",type:"string"}}}}},save:function(e){var t=!!e.values.value;e.container.parent().find("input[type='checkbox']").prop("checked",t)}})},_createButtons:function(){var e,t,i=this.options.buttons,n='<div class="'+p.styles.popup.buttonsContainer+'">';for(e=0,t=i.length;t>e;e++)n+=this.createButton(i[e]);n+="</div>",this.container.append(n)},_updateModel:function(){var e,t,i,n=[],r=this.grid.dataSource.data();for(t=0,i=r.length;i>t;t++)e=r[t].get("value"),null!==e&&e>0&&n.push(r[t]);this.model[this.resourcesField]=n}}),p=v.extend({init:function(e,t){k(t)&&(t={dataSource:t}),v.fn.init.call(this,e,t),this._wrapper(),this._resources(),this._timeline(),this._toolbar(),this._footer(),this._adjustDimensions(),this._preventRefresh=!0,this.view(this.timeline._selectedViewName),this._preventRefresh=!1,this._dataSource(),this._assignments(),this._dropDowns(),this._list(),this._dependencies(),this._resizable(),this._scrollable(),this._dataBind(),this._attachEvents(),this._createEditor(),f.notify(this)},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd"],options:{name:"Gantt",autoBind:!0,navigatable:!1,selectable:!0,editable:!0,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",percentComplete:"Complete",resources:"Resources",assingButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"}},showWorkHours:!0,showWorkDays:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:!0,height:600,listWidth:"30%"},select:function(e){var i=this.list;return e?(i.select(e),t):i.select()},clearSelection:function(){this.list.clearSelection()},destroy:function(){v.fn.destroy.call(this),this.dataSource&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource.unbind("progress",this._progressHandler),this.dataSource.unbind("error",this._errorHandler)),this.dependencies&&(this.dependencies.unbind("change",this._dependencyRefreshHandler),this.dependencies.unbind("error",this._dependencyErrorHandler)),this.timeline&&(this.timeline.unbind(),this.timeline.destroy()),this.list&&(this.list.unbind(),this.list.destroy()),this.footerDropDown&&this.footerDropDown.destroy(),this.headerDropDown&&this.headerDropDown.destroy(),this._editor&&this._editor.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this.toolbar.off(E),e(window).off("resize"+E,this._resizeHandler),e(this.wrapper).off(E),this.toolbar=null,this.footer=null},_attachEvents:function(){this._resizeHandler=S(this.resize,this),e(window).on("resize"+E,this._resizeHandler)},_wrapper:function(){var e=p.styles,t=[e.icon,e.resizeHandle].join(" "),i=this.options,n=i.height,r=i.width;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.listWrapper+"'><div></div></div>").append("<div class='"+e.splitBarWrapper+"'><div class='"+t+"'></div></div>").append("<div class='"+e.timelineWrapper+"'><div></div></div>"),this.wrapper.find(L+e.list).width(i.listWidth),n&&this.wrapper.height(n),r&&this.wrapper.width(r)},_toolbar:function(){var t,i,n=this,r=p.styles,o=L+r.toolbar.views+" > li",s=L+r.toolbar.pdfButton,a=r.hovered,l=this.options.toolbar,c=e("<div class='"+r.toolbar.actions+"'>");C(l)||(l=typeof l===H?l:this._actions(l),l=S(f.template(l),this)),i=e(j({ns:f.ns,views:this.timeline.views,styles:r.toolbar})),c.append(l({})),t=e("<div class='"+r.toolbar.headerWrapper+"'>").append(c).append(i),this.wrapper.prepend(t),this.toolbar=t,t.on(F+E,o,function(t){t.preventDefault();var i=e(this).attr(f.attr("name"));n.trigger("navigate",{view:i})||n.view(i)}).on(F+E,s,function(){n.saveAsPDF()}),this.wrapper.find(L+r.toolbar.toolbar+" li").hover(function(){e(this).addClass(a)},function(){e(this).removeClass(a)})},_actions:function(){var e,t,i=this.options,n=i.toolbar,r="";if(!k(n)){if(!i.editable)return r;n=["append"]}for(e=0,t=n.length;t>e;e++)r+=this._createButton(n[e]);return r},_footer:function(){if(this.options.editable){var t=e(G({styles:p.styles.toolbar,action:{data:"add",title:this.options.messages.actions.append}}));this.wrapper.append(t),this.footer=t}},_createButton:function(e){var t=e.template||V,i=this.options.messages.actions,n=typeof e===H?e:e.name||e.text,r=X[n]?X[n].className:"k-gantt-"+(n||"").replace(/\s/g,""),o={iconClass:"",action:"",text:n,className:r,styles:p.styles.toolbar};if(!(n||D(e)&&e.template))throw Error("Custom commands should have name specified");return o=T(!0,o,X[n],{text:i[n]}),D(e)&&(e.className&&x(o.className,e.className.split(" "))<0&&(e.className+=" "+o.className),o=T(!0,o,e)),f.template(t)(o)},_adjustDimensions:function(){var e=this.element,t=p.styles,i=L+t.list,n=L+t.timeline,r=L+t.splitBar,o=this.toolbar.outerHeight(),s=this.footer?this.footer.outerHeight():0,a=e.height(),l=e.width(),c=e.find(r).outerWidth(),d=e.find(i).outerWidth();e.children([i,n,r].join(",")).height(a-(o+s)).end().children(n).width(l-(c+d))},_scrollTo:function(e){var t=this.timeline.view(),n=f.attr("uid"),r="string"==typeof e?e:e.closest("tr"+i()).attr(n),o=t.content.find(i(r));0!==o.length&&t._scrollTo(o)},_dropDowns:function(){var e=this,t=L+p.styles.toolbar.actions,i=this.options.messages.actions,n=this.dataSource,r=this.timeline,o=function(t){var i,o=t.type,s=n._createNewModel(),a=e.dataItem(e.select()),l=n.taskParent(a),c=r.view()._timeSlots()[0],d="add"===o?a:l;s.set("title","New task"),d?(s.set("parentId",d.get("id")),s.set("start",d.get("start")),s.set("end",d.get("end"))):(s.set("start",c.start),s.set("end",c.end)),"add"!==o&&(i=a.get("orderId"),i="insert-before"===o?i:i+1),e._createTask(s,i)};this.options.editable&&(this.footerDropDown=new Z(this.footer.children(t).eq(0),{messages:{actions:i},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:e.options.navigatable}),this.headerDropDown=new Z(this.toolbar.children(t).eq(0),{messages:{actions:i},navigatable:e.options.navigatable}),this.footerDropDown.bind("command",o),this.headerDropDown.bind("command",o))},_list:function(){var e,t,i=this,n=i.options.navigatable,r=p.styles,s=this.wrapper.find(L+r.list),a=s.find("> div"),l=this.wrapper.find(L+r.toolbar.actions+" > button"),c={columns:this.options.columns||[],dataSource:this.dataSource,selectable:this.options.selectable,editable:this.options.editable,listWidth:s.outerWidth(),resourcesField:this.resources.field},d=c.columns,u=function(){n&&(i._current(i._cachedCurrent),o(i.list.content.find("table"),!0)),delete i._cachedCurrent};for(t=0;d.length>t;t++)e=d[t],e.field===this.resources.field&&"function"!=typeof e.editor&&(e.editor=S(this._createResourceEditor,this));this.list=new f.ui.GanttList(a,c),this.list.bind("render",function(){i._navigatable()},!0).bind("edit",function(e){i._cachedCurrent=e.cell,i.trigger("edit",{task:e.model,container:e.cell})&&e.preventDefault()}).bind("cancel",function(e){i.trigger("cancel",{task:e.model,container:e.cell})&&e.preventDefault(),u()}).bind("update",function(e){i._updateTask(e.task,e.updateInfo),u()}).bind("change",function(){i.trigger("change");var e=i.list.select();e.length?(l.removeAttr("data-action","add"),i.timeline.select("[data-uid='"+e.attr("data-uid")+"']")):(l.attr("data-action","add"),i.timeline.clearSelection())})},_timeline:function(){var e=this,t=p.styles,i=n(T(!0,{resourcesField:this.resources.field},this.options)),r=this.wrapper.find(L+t.timeline+" > div");this.timeline=new f.ui.GanttTimeline(r,i),this.timeline.bind("navigate",function(i){e.toolbar.find(L+t.toolbar.views+" > li").removeClass(t.selected).end().find(L+t.toolbar.viewButton+"-"+i.view.replace(/\./g,"\\.").toLowerCase()).addClass(t.selected),e.refresh()}).bind("moveStart",function(t){e.trigger("moveStart",{task:t.task})&&t.preventDefault()}).bind("move",function(t){var i=t.task,n=t.start,r=new Date(n.getTime()+i.duration());e.trigger("move",{task:i,start:n,end:r})&&t.preventDefault()}).bind("moveEnd",function(t){var i=t.task,n=t.start,r=new Date(n.getTime()+i.duration());e.trigger("moveEnd",{task:i,start:n,end:r})||e._updateTask(e.dataSource.getByUid(i.uid),{start:n,end:r})}).bind("resizeStart",function(t){e.trigger("resizeStart",{task:t.task})&&t.preventDefault()}).bind("resize",function(t){e.trigger("resize",{task:t.task,start:t.start,end:t.end})&&t.preventDefault()}).bind("resizeEnd",function(t){var i=t.task,n={};t.resizeStart?n.start=t.start:n.end=t.end,e.trigger("resizeEnd",{task:i,start:t.start,end:t.end})||e._updateTask(e.dataSource.getByUid(i.uid),n)}).bind("percentResizeEnd",function(t){e._updateTask(e.dataSource.getByUid(t.task.uid),{percentComplete:t.percentComplete})}).bind("dependencyDragEnd",function(t){var i=e.dependencies._createNewModel({type:t.type,predecessorId:t.predecessor.id,successorId:t.successor.id});e._createDependency(i)}).bind("select",function(t){e.select("[data-uid='"+t.uid+"']")}).bind("editTask",function(t){e.editTask(t.uid)}).bind("clear",function(){e.clearSelection()}).bind("removeTask",function(t){e.removeTask(e.dataSource.getByUid(t.uid))}).bind("removeDependency",function(t){e.removeDependency(e.dependencies.getByUid(t.uid))})},_dataSource:function(){var e=this.options,t=e.dataSource;t=k(t)?{data:t}:t,this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=S(this.refresh,this),this._progressHandler=S(this._requestStart,this),this._errorHandler=S(this._error,this)),this.dataSource=f.data.GanttDataSource.create(t).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_dependencies:function(){var e=this.options.dependencies||{},t=k(e)?{data:e}:e;this.dependencies&&this._dependencyRefreshHandler?this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler):(this._dependencyRefreshHandler=S(this.refreshDependencies,this),this._dependencyErrorHandler=S(this._error,this)),this.dependencies=f.data.GanttDependencyDataSource.create(t).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler)},_resources:function(){var e=this.options.resources,t=e.dataSource||{};this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"},T(this.resources,e),this.resources.dataSource=f.data.DataSource.create(t)},_assignments:function(){var e=this.options.assignments,t=e.dataSource||{};this.assignments?this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler):this._assignmentsRefreshHandler=S(this.refresh,this),this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"},T(this.assignments,e),this.assignments.dataSource=f.data.DataSource.create(t),this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler)},_createEditor:function(){var e=this,i=this._editor=new u(this.wrapper,T({},this.options,{target:this,resources:{field:this.resources.field,editor:S(this._createResourceEditor,this)},createButton:S(this._createPopupButton,this)}));i.bind("cancel",function(i){var n=e.dataSource.getByUid(i.model.uid);return e.trigger("cancel",{container:i.container,task:n})?(i.preventDefault(),t):(e.cancelTask(),t)}).bind("edit",function(t){var i=e.dataSource.getByUid(t.model.uid);e.trigger("edit",{container:t.container,task:i})&&t.preventDefault()}).bind("save",function(t){var i=e.dataSource.getByUid(t.model.uid);e.saveTask(i,t.updateInfo)}).bind("remove",function(t){e.removeTask(t.model.uid)})},_createResourceEditor:function(e,t){var i=this,n=t instanceof _?t:t.model,r=n.get("id"),o=this.options.messages,s=i.resources.field,a=this._resourceEditor=new h(e,{resourcesField:s,data:this._wrapResourceData(r),model:n,messages:T({},o.editor),buttons:[{name:"update",text:o.save,className:p.styles.primary},{name:"cancel",text:o.cancel}],createButton:S(this._createPopupButton,this),save:function(e){i._updateAssignments(e.model.get("id"),e.model.get(s))}});a.open()},_createPopupButton:function(e){var t=e.name||e.text,i={className:p.styles.popup.button+" k-gantt-"+(t||"").replace(/\s/g,""),text:t,attr:""};if(!(t||D(e)&&e.template))throw Error("Custom commands should have name specified");return D(e)&&(e.className&&(e.className+=" "+i.className),i=T(!0,i,e)),f.template(W)(i)},view:function(e){return this.timeline.view(e)},dataItem:function(e){var t,i;return e?(t=this.list,i=t.content.find(e),t._modelFromElement(i)):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.list._setDataSource(this.dataSource),this.options.autoBind&&e.fetch()},setDependenciesDataSource:function(e){this.options.dependencies=e,this._dependencies(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.children(".k-task")},_updateAssignments:function(e,t){for(var i,n,r,o,s,a,l,c=this.assignments.dataSource,d=this.assignments.dataTaskIdField,u=this.assignments.dataResourceIdField,h=this.assignments.dataValueField,p=!1,f=new w(c.view()).filter({field:d,operator:"eq",value:e}).toArray();f.length;){for(i=f[0],o=0,s=t.length;s>o;o++)if(n=t[o],i.get(u)===n.get("id")){r=t[o].get("value"),i.set(h,r),t.splice(o,1),p=!0;break}p||c.remove(i),p=!1,f.shift()}for(a=0,l=t.length;l>a;a++)n=t[a],i=c._createNewModel(),i[d]=e,i[u]=n.get("id"),i[h]=n.get("value"),c.add(i);c.sync()},cancelTask:function(){var e=this._editor,t=e.container;t&&e.close()},editTask:function(e){var t,i="string"==typeof e?this.dataSource.getByUid(e):e;i&&(t=this.dataSource._createNewModel(i.toJSON()),t.uid=i.uid,this.cancelTask(),this._editTask(t))},_editTask:function(e){this._editor.editTask(e)},saveTask:function(e,t){var i=this._editor,n=i.container,r=i.editable;n&&r&&r.end()&&this._updateTask(e,t)},_updateTask:function(e,t){var i=this.resources.field;this.trigger("save",{task:e,values:t})||(this._preventRefresh=!0,this.dataSource.update(e,t),t[i]&&this._updateAssignments(e.get("id"),t[i]),this._syncDataSource())},removeTask:function(e){var t=this,i="string"==typeof e?this.dataSource.getByUid(e):e;i&&this._taskConfirm(function(e){e||t._removeTask(i)},i)},_createTask:function(e,i){if(!this.trigger("add",{task:e,dependency:null})){var n=this.dataSource;this._preventRefresh=!0,i===t?n.add(e):n.insert(i,e),this._scrollToUid=e.uid,this._syncDataSource()}},_createDependency:function(e){this.trigger("add",{task:null,dependency:e})||(this._preventDependencyRefresh=!0,this.dependencies.add(e),this._preventDependencyRefresh=!1,this.dependencies.sync())},removeDependency:function(e){var t=this,i="string"==typeof e?this.dependencies.getByUid(e):e;i&&this._dependencyConfirm(function(e){e||t._removeDependency(i)},i)},_removeTaskDependencies:function(e,t){this._preventDependencyRefresh=!0;for(var i=0,n=t.length;n>i;i++)this.dependencies.remove(t[i]);this._preventDependencyRefresh=!1,this.dependencies.sync()},_removeResourceAssignments:function(e){var t,i,n=this.assignments.dataSource,r=n.view(),o={field:this.assignments.dataTaskIdField,operator:"eq",value:e.get("id")};for(r=new w(r).filter(o).toArray(),this._preventRefresh=!0,t=0,i=r.length;i>t;t++)n.remove(r[t]);this._preventRefresh=!1,n.sync()},_removeTask:function(e){var t=this.dependencies.dependencies(e.id);this.trigger("remove",{task:e,dependencies:t})||(this._removeTaskDependencies(e,t),this._removeResourceAssignments(e),this._preventRefresh=!0,this.dataSource.remove(e)&&this._syncDataSource(),this._preventRefresh=!1)},_removeDependency:function(e){this.trigger("remove",{task:null,dependencies:[e]})||this.dependencies.remove(e)&&this.dependencies.sync()},_taskConfirm:function(e,t){this._confirm(e,{model:t,text:B,title:this.options.messages.deleteTaskWindowTitle})},_dependencyConfirm:function(e,t){this._confirm(e,{model:t,text:U,title:this.options.messages.deleteDependencyWindowTitle})},_confirm:function(e,t){var i,n,r=this.options.editable;r===!0||r.confirmation!==!1?(i=this.options.messages,n=[{name:"delete",text:i.destroy,className:p.styles.primary,click:function(){e()}},{name:"cancel",text:i.cancel,click:function(){e(!0)}}],this.showDialog(T(!0,{},t,{buttons:n}))):e()},showDialog:function(e){this._editor.showDialog(e)},refresh:function(){var e,t,n,r,o,s;this._preventRefresh||this.list.editable||(this._progress(!1),e=this.dataSource,t=e.taskTree(),n=this._scrollToUid,s=-1,this.current&&(o=this.current.closest("tr").attr(f.attr("uid")),s=this.current.index()),this.trigger("dataBinding")||(0!==this.resources.dataSource.data().length&&this._assignResources(t),this._editor&&this._editor.close(),this.clearSelection(),this.list._render(t),this.timeline._render(t),this.timeline._renderDependencies(this.dependencies.view()),n&&(this._scrollTo(n),this.select(i(n))),(n||o)&&s>=0&&(r=this.list.content.find("tr"+i(n||o)+" > td:eq("+s+")"),this._current(r)),this._scrollToUid=null,this.trigger("dataBound")))},refreshDependencies:function(){this._preventDependencyRefresh||this.trigger("dataBinding")||(this.timeline._renderDependencies(this.dependencies.view()),this.trigger("dataBound"))},_assignResources:function(e){var t,i,n=this.resources,r=this.assignments,o=function(){var e=r.dataSource.view(),t={field:r.dataTaskIdField};return e=new w(e).group(t).toArray()},s=o(),a=function(e,t){var i,r,o=e.get("id");for(f.setter(n.field)(e,new b([])),i=0,r=s.length;r>i;i++)s[i].value===o&&t(e,s[i].items)},l=function(e,t){var i,o,s,a,l,c,d,u;for(i=0,o=t.length;o>i;i++)s=t[i],a=n.dataSource.get(s.get(r.dataResourceIdField)),l=s.get(r.dataValueField),c=s.get(r.dataResourceIdField),d=a.get(n.dataFormatField)||I,u=f.toString(l,d),e[n.field].push(new _({id:c,name:a.get(n.dataTextField),color:a.get(n.dataColorField),value:l,formatedValue:u}))};for(t=0,i=e.length;i>t;t++)a(e[t],l)},_wrapResourceData:function(e){var t,i,n,r=this,o=[],s=this.resources.dataSource.view(),a=this.assignments.dataSource.view(),l=new w(a).filter({field:r.assignments.dataTaskIdField,operator:"eq",value:e}).toArray(),c=function(e){var t=null;return new w(l).filter({field:r.assignments.dataResourceIdField,operator:"eq",value:e}).select(function(e){t+=e.get(r.assignments.dataValueField)}),t};for(i=0,n=s.length;n>i;i++)t=s[i],o.push({id:t.get("id"),name:t.get(r.resources.dataTextField),format:t.get(r.resources.dataFormatField)||I,value:c(t.id)});return o},_syncDataSource:function(){this._preventRefresh=!1,this._requestStart(),this.dataSource.sync()},_requestStart:function(){this._progress(!0)},_error:function(){this._progress(!1)},_progress:function(e){f.ui.progress(this.element,e)},_resizable:function(){var t,i,n,r=this.wrapper,o=p.styles,s=L+o.gridContent,a=r.find(L+o.list),l=r.find(L+o.timeline);this._resizeDraggable=r.find(L+o.splitBar).height(a.height()).hover(function(){e(this).addClass(o.splitBarHover)},function(){e(this).removeClass(o.splitBarHover)}).end().kendoResizable({orientation:"horizontal",handle:L+o.splitBar,start:function(){t=a.width(),i=l.width(),n=l.find(s).scrollLeft()},resize:function(e){var r=e.x.initialDelta;0>t+r||0>i-r||(a.width(t+r),l.width(i-r),l.find(s).scrollLeft(n+r))}}).data("kendoResizable")},_scrollable:function(){var t=p.styles,i=L+t.gridContent,n=L+t.gridHeaderWrap,r=this.timeline.element,o=this.list.element;r.find(i).on("scroll",function(){r.find(n).scrollLeft(this.scrollLeft),o.find(i).scrollTop(this.scrollTop)}),o.find(i).on("scroll",function(){o.find(n).scrollLeft(this.scrollLeft)}).on("DOMMouseScroll"+E+" mousewheel"+E,function(t){var n=r.find(i),o=n.scrollTop(),s=f.wheelDeltaY(t);s&&(t.preventDefault(),e(t.currentTarget).one("wheel"+E,!1),n.scrollTop(o+-s))})},_navigatable:function(){var n,r=this,s=this.options.navigatable,a=this.options.editable,l=this.list.header.find("table"),c=this.list.content.find("table"),d=p.styles,u=this.timeline.element.find(L+d.gridContent),h=l.add(c),m=i(),g={collapse:!1,expand:!0},v=function(e){var t=r.timeline.view()._timeSlots()[0].offsetWidth;u.scrollLeft(u.scrollLeft()+(e?-t:t))},y=function(e){var t=r.current.parent("tr"+i()),n=r.current.index(),s=t[e]();0!==r.select().length&&r.clearSelection(),0!==s.length?(r._current(s.children("td:eq("+n+")")),r._scrollTo(r.current)):r.current.is("td")&&"prev"==e?o(l):r.current.is("th")&&"next"==e&&o(c)},_=function(e){var t=r.current[e]();0!==t.length&&(r._current(t),n=r.current.index())},b=function(e){var t=r.dataItem(r.current);t.summary&&t.expanded!==e&&t.set("expanded",e)},w=function(){var e,t;r.options.editable&&!r.list.editable&&(e=r.select(),t=f.attr("uid"),e.length&&r.removeTask(e.attr(t)))};return e(this.wrapper).on("mousedown"+E,"tr"+m+", div"+m+":not("+L+d.line+")",function(t){var n,l=e(t.currentTarget),c=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap");t.ctrlKey||(s&&(n=l.is("tr")?e(t.target).closest("td"):r.list.content.find("tr"+i(l.attr(f.attr("uid")))+" > td:first"),r._current(n)),!s&&!a||c||setTimeout(function(){o(r.list.content.find("table"),!0)},2))}),s!==!0?(c.on("keydown"+E,function(e){e.keyCode==A.DELETE&&w()}),t):(h.on("focus"+E,function(){var t=this===c.get(0)?"td":"th",i=(e(this),r.select()),o=r.current||e(i.length?i:this).find(t+":eq("+(n||0)+")");r._current(o)}).on("blur"+E,function(){r._current(),this==l&&e(this).attr(P,-1)}).on("keydown"+E,function(e){var t,i=e.keyCode;if(r.current)switch(t=r.current.is("td"),i){case A.RIGHT:e.preventDefault(),e.altKey?v():e.ctrlKey?b(g.expand):_("next");break;case A.LEFT:e.preventDefault(),e.altKey?v(!0):e.ctrlKey?b(g.collapse):_("prev");break;case A.UP:e.preventDefault(),y("prev");break;case A.DOWN:e.preventDefault(),y("next");break;case A.SPACEBAR:e.preventDefault(),t&&r.select(r.current.closest("tr"));break;case A.ENTER:e.preventDefault(),t?r.options.editable&&(r._cachedCurrent=r.current,r.list._startEditHandler(r.current),e.stopPropagation()):r.current.children("a.k-link").click();break;case A.ESC:e.stopPropagation();break;case A.DELETE:t&&w();break;default:i>=49&&57>=i&&r.view(r.timeline._viewByIndex(i-49))}}),t)},_current:function(t){var i,n=p.styles;this.current&&this.current.length&&this.current.removeClass(n.focused).removeAttr("id"),t&&t.length?(this.current=t.addClass(n.focused).attr("id",$),i=e(f._activeElement()),i.is("table")&&this.wrapper.find(i).length>0&&i.removeAttr(N).attr(N,$)):this.current=null},_dataBind:function(){var t,i=this;i.options.autoBind&&(this._preventRefresh=!0,this._preventDependencyRefresh=!0,t=e.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(e){return e.fetch()}),e.when.apply(null,t).done(function(){i._preventRefresh=!1,i._preventDependencyRefresh=!1,i.refresh()}))},_resize:function(){this._adjustDimensions(),this.timeline.view()._adjustHeight(),this.list._adjustHeight()}}),f.PDFMixin&&f.PDFMixin.extend(p.prototype),f.ui.plugin(p),T(!0,p,{styles:K})}(window.kendo.jQuery),function(e,t){function i(e){var t,i,n=[],r=e.className;for(t=0,i=e.level;i>t;t++)n.push(c("span",{className:r}));return n}var n,r,o,s=kendo.data,a=e.extend,l=kendo.dom,c=l.element,d=l.text,u=l.html,h=kendo.ui,p=h.DataBoundWidget,f=s.DataSource,m=s.ObservableArray,g=s.Query,v=s.Model,y=e.proxy,_=e.map,b=e.grep,w="string",k="change",x="error",C="progress",S=".",T=".kendoTreeList",D="click",M="mousedown",A="edit",E="save",I="expand",P="collapse",F="remove",z="dataBinding",H="dataBound",R="cancel",N="filterMenuInit",$={wrapper:"k-treelist k-grid k-widget",header:"k-header",button:"k-button",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridToolbar:"k-grid-toolbar",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",gridFilter:"k-grid-filter",footerTemplate:"k-footer-template",loading:"k-loading",refresh:"k-i-refresh",retry:"k-request-retry",selected:"k-state-selected",status:"k-status",link:"k-link",withIcon:"k-with-icon",filterable:"k-filterable",icon:"k-icon",iconFilter:"k-filter",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",
dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},O={create:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},createchild:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},destroy:{imageClass:"k-delete",className:"k-grid-delete",methodName:"removeRow"},edit:{imageClass:"k-edit",className:"k-grid-edit",methodName:"editRow"},update:{imageClass:"k-update",className:"k-primary k-grid-update",methodName:"saveRow"},canceledit:{imageClass:"k-cancel",className:"k-grid-cancel",methodName:"_cancelEdit"},excel:{imageClass:"k-i-excel",className:"k-grid-excel",methodName:"saveAsExcel"},pdf:{imageClass:"k-i-pdf",className:"k-grid-pdf",methodName:"saveAsPDF"}},L=v.define({id:"id",fields:{id:{type:"number"},parentId:{type:"number",nullable:!0}},init:function(e){v.fn.init.call(this,e),this._loaded=!1},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return v.fn.shouldSerialize.call(this,e)&&"_loaded"!==e&&"_error"!=e&&"_edit"!=e}}),B=f.extend({init:function(e){f.fn.init.call(this,a(!0,{},{schema:{modelBase:L,model:L}},e))},_readData:function(e){var t,i,n=[],r=this.data();for(t=0,i=r.length;i>t;t++)n.push(r[t]);return n.concat(f.fn._readData.call(this,e))},_readAggregates:function(e){var t=a(this._aggregateResult,this.reader.aggregates(e));return""in t&&(t[this._defaultParentId()]=t[""],delete t[""]),t},remove:function(e){var t=this._subtree(this._childrenMap(this.data()),e.id);this._removeItems(t),f.fn.remove.call(this,e)},_filterCallback:function(e){var t,i,n=[],r=e.toArray(),o={};for(t=0;r.length>t;t++)for(i=r[t];i&&(o[i.id]=!0,!o[i.parentId]);)o[i.parentId]=!0,i=this.parentNode(i),i&&n.push(i);return new g(r.concat(n))},_subtree:function(e,t){var i,n,r=e[t]||[],o=this._defaultParentId();for(i=0,n=r.length;n>i;i++)r[i].id!==o&&(r=r.concat(this._subtree(e,r[i].id)));return r},_childrenMap:function(e){var t,i,n,r,o={};for(e=this._observeView(e),t=0;e.length>t;t++)i=e[t],n=i.id,r=i.parentId,o[n]=o[n]||[],o[r]=o[r]||[],o[r].push(i);return o},_calculateAggregates:function(e,t){var i,n,r,o,s,a;for(t=t||{},i={},s=t.filter,s&&(e=g.process(e,{filter:s,filterCallback:y(this._filterCallback,this)}).data),a=this._childrenMap(e),i[this._defaultParentId()]=new g(this._subtree(a,this._defaultParentId())).aggregate(t.aggregate),o=0;e.length>o;o++)n=e[o],r=this._subtree(a,n.id),i[n.id]=new g(r).aggregate(t.aggregate);return i},_queryProcess:function(e,t){var i,n,r,o,s,a,l;for(t=t||{},t.filterCallback=y(this._filterCallback,this),i=this._defaultParentId(),n=g.process(e,t),r=this._childrenMap(n.data),e=r[i]||[],s=0;e.length>s;s++)a=e[s],a.id!==i&&(l=r[a.id],o=!(!l||!l.length),a.loaded()||a.loaded(o),(a.loaded()||a.hasChildren!==!0)&&(a.hasChildren=o),o&&e.splice.apply(e,[s+1,0].concat(l)));return n.data=e,n},_queueRequest:function(e,t){t.call(this)},_modelLoaded:function(e){var t=this.get(e);t.loaded(!0),t.hasChildren=this.childNodes(t).length>0},_modelError:function(e,t){this.get(e)._error=t},read:function(e){return e&&e.id||(this._data=this._observe([])),f.fn.read.call(this,e)},load:function(e){var t="_query";return!e.loaded()&&e.hasChildren&&(t="read"),this[t]({id:e.id}).then(y(this._modelLoaded,this,e.id),y(this._modelError,this,e.id))},_byParentId:function(e,t){var i,n,r=[],o=this.view();if(e===t)return[];for(n=0;o.length>n;n++)i=o.at(n),i.parentId==e&&r.push(i);return r},_defaultParentId:function(){return this.reader.model.fn.defaults.parentId},childNodes:function(e){return this._byParentId(e.id,this._defaultParentId())},rootNodes:function(){return this._byParentId(this._defaultParentId())},parentNode:function(e){return this.get(e.parentId)},level:function(e){var t=-1;e instanceof L||(e=this.get(e));do e=this.parentNode(e),t++;while(e);return t},filter:function(e){var i=f.fn.filter;return e===t?i.call(this,e):(i.call(this,e),t)}});B.create=function(t){return e.isArray(t)?t={data:t}:t instanceof m&&(t={data:t.toJSON()}),t instanceof B?t:new B(t)},n=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),t=this.options=a(!0,{},this.options,t),this.element=e,this.bind(this.events,t),this.model=this.options.model,this.fields=this._fields(this.options.columns),this._initContainer(),this.createEditable()},events:[],_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new h.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:e.clearContainer,model:this.model})},_isEditable:function(e){return e.field&&this.model.editable(e.field)},_fields:function(e){var t,i,n,r=[];for(t=0,i=e.length;i>t;t++)n=e[t],this._isEditable(n)&&r.push({field:n.field,format:n.format,editor:n.editor});return r},end:function(){return this.editable.end()},close:function(){this.destroy()},destroy:function(){this.editable.destroy(),this.editable.element.find("["+kendo.attr("container-for")+"]").empty(),this.model=this.wrapper=this.element=this.columns=this.editable=null}}),r=n.extend({init:function(e,t){n.fn.init.call(this,e,t),this._attachHandlers(),this.open()},events:[R,E],options:{window:{modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1}},_initContainer:function(){var t=this.options,i=[];this.wrapper=e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid).append('<div class="k-edit-form-container"/>'),t.template?(this._appendTemplate(i),this.fields=[]):this._appendFields(i),this._appendButtons(i),new l.Tree(this.wrapper.children()[0]).render(i),this.wrapper.appendTo(t.appendTo),this.window=new h.Window(this.wrapper,t.window)},_appendTemplate:function(e){var t=this.options.template;typeof t===w&&(t=window.unescape(t)),t=kendo.template(t)(this.model),e.push(u(t))},_appendFields:function(e){var t,i,n,r=this.options.columns;for(t=0,i=r.length;i>t;t++)n=r[t],n.command||(e.push(u('<div class="k-edit-label"><label for="'+n.field+'">'+(n.title||n.field||"")+"</label></div>")),e.push(this._isEditable(n)?u("<div "+kendo.attr("container-for")+'="'+n.field+'" class="k-edit-field"></div>'):c("div",{class:"k-edit-field"},[this.options.fieldRenderer(n,this.model)])))},_appendButtons:function(e){e.push(c("div",{class:"k-edit-buttons k-state-default"},this.options.commandRenderer()))},_attachHandlers:function(){var e=this._cancelProxy=y(this._cancel,this);this.wrapper.on(D+T,".k-grid-cancel",this._cancelProxy),this._saveProxy=y(this._save,this),this.wrapper.on(D+T,".k-grid-update",this._saveProxy),this.window.bind("close",function(t){t.userTriggered&&e(t)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.wrapper.off(T)},_cancel:function(e){this.trigger(R,e)},_save:function(){this.trigger(E)},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",y(this.destroy,this)).close()},destroy:function(){this.window.destroy(),this.window=null,this._dettachHandlers(),n.fn.destroy.call(this)}}),o=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this._dataSource(this.options.dataSource),this._columns(),this._layout(),this._sortable(),this._filterable(),this._selectable(),this._attachEvents(),this._toolbar(),this._scrollable(),this.options.autoBind&&this.dataSource.fetch(),this._adjustHeight(),kendo.notify(this)},_scrollable:function(){var e,t;this.options.scrollable&&(e=this.header.closest(".k-grid-header-wrap"),this.content.closest(".k-grid-content").bind("scroll"+T,function(){e.scrollLeft(this.scrollLeft)}),t=kendo.touchScroller(this.content.closest("div")),t&&t.movable&&(this._touchScroller=t))},_progress:function(){var e=this.options.messages;this.content.find("tr").length||this._showStatus(kendo.template("<span class='#= className #' /> #: messages.loading #")({className:$.icon+" "+$.loading,messages:e}))},_error:function(e){this.dataSource.rootNodes().length||this._render({error:e})},refresh:function(e){e=e||{},"itemchange"==e.action&&this.editor||this.trigger(z)||(this._angularItems("cleanup"),this._angularFooters("cleanup"),this._cancelEditor(),this._render(),this._adjustHeight(),this._angularItems("compile"),this._angularFooters("compile"),this.trigger(H))},_angularFooters:function(t){var i,n,r,o=this.dataSource.aggregates(),s=this.content.find("tr").filter(function(){return e(this).hasClass($.footerTemplate)});for(i=0;s.length>i;i++)n=s.eq(i),r=o[n.attr("data-parentId")],this._angularFooter(t,n.find("td").get(),r)},_angularFooter:function(e,t,i){var n=this.columns;this.angular(e,function(){return{elements:t,data:_(n,function(e){return{column:e,aggregate:i&&i[e.field]}})}})},items:function(){return this.content.find("tr").filter(function(){return!e(this).hasClass($.footerTemplate)})},_showStatus:function(t){var i=this.element.find(".k-status");i.length||(i=e("<div class='k-status' />").appendTo(this.element)),this._contentTree.render([]),this.content.closest(S+$.gridContent).hide(),i.html(t)},_hideStatus:function(){this.element.find(".k-status").remove(),this.content.closest(S+$.gridContent).show()},_adjustHeight:function(){var e,t=this.element,i=t.find(S+$.gridContentWrap),n=t.find(S+$.gridHeader),r=t.find(S+$.gridToolbar);t.height(this.options.height),e=function(e){var t,i;return!!e[0].style.height||(t=e.height(),e.height("auto"),i=e.height(),e.height(""),t!=i)},e(t)&&i.height(t.height()-n.outerHeight()-r.outerHeight())},destroy:function(){p.fn.destroy.call(this);var e=this.dataSource;e.unbind(k,this._refreshHandler),e.unbind(x,this._errorHandler),e.unbind(C,this._progressHandler),this._destroyEditor(),this.element.off(T),this._touchScroller&&this._touchScroller.destroy(),this._refreshHandler=this._errorHandler=this._progressHandler=null,this.header=this.content=this.element=null,this._statusTree=this._headerTree=this._contentTree=null},options:{name:"TreeList",columns:[],autoBind:!0,scrollable:!0,selectable:!1,sortable:!1,toolbar:null,height:null,messages:{noRows:"No records to display",loading:"Loading...",requestFailed:"Request failed.",retry:"Retry",commands:{edit:"Edit",update:"Update",canceledit:"Cancel",create:"Add new record",createchild:"Add child record",destroy:"Delete",excel:"Export to Excel",pdf:"Export to PDF"}},excel:{hierarchy:!0},filterable:!1,editable:!1},events:[k,A,E,F,I,P,z,H,R,N],_toggle:function(e,i){var n=e.loaded();e._error&&(e.expanded=!1,e._error=t),(n||!e.expanded)&&(t===i&&(i=!e.expanded),e.expanded=i,n||this.dataSource.load(e).always(y(this.refresh,this)),this.refresh())},expand:function(e){this._toggle(this.dataItem(e),!0)},collapse:function(e){this._toggle(this.dataItem(e),!1)},_toggleChildren:function(t){var i=e(t.currentTarget),n=this.dataItem(i),r=n.expanded?P:I;this.trigger(r,{model:n})||this._toggle(n),t.preventDefault()},_attachEvents:function(){var e=S+$.iconCollapse+", ."+$.iconExpand+", ."+$.refresh,t=S+$.retry,i=this.dataSource;this.element.on(M+T,e,y(this._toggleChildren,this)).on(D+T,t,y(i.fetch,i)).on(D+T,".k-button[data-command]",y(this._commandClick,this))},_commandByName:function(e){var t,i,n,r=this.columns;if(e=e.toLowerCase(),O[e])return O[e];for(t=0;r.length>t;t++)if(n=r[t].command)for(i=0;n.length>i;i++)if(n[i].name.toLowerCase()==e)return n[i]},_commandClick:function(i){var n=e(i.currentTarget),r=n.attr("data-command"),o=this._commandByName(r),s=n.closest("tr");s=s.length?s:t,o&&(o.methodName?this[o.methodName](s):o.click&&o.click.call(this,i))},_columns:function(){var e,t=this.options.columns||[];this.columns=_(t,function(e){return e="string"==typeof e?{field:e}:e,a({encoded:!0},e)}),e=b(this.columns,function(e){return e.expandable}),this.columns.length&&!e.length&&(this.columns[0].expandable=!0),this._columnTemplates(),this._columnAttributes()},_columnTemplates:function(){var e,t,i,n=this.columns;for(e=0,t=n.length;t>e;e++)i=n[e],i.template&&(i.template=kendo.template(i.template)),i.headerTemplate&&(i.headerTemplate=kendo.template(i.headerTemplate)),i.footerTemplate&&(i.footerTemplate=kendo.template(i.footerTemplate))},_columnAttributes:function(){var e,t,i,n,r,o,s=this.columns;for(e=0,t=s.length;t>e;e++)if(i=s[e].attributes,i&&i.style)for(n=i.style.split(";"),i.style={},r=0;n.length>r;r++)o=n[r].split(":"),i.style[o[0]]=o[1]},_layout:function(){var e,t,i=this.element,n=this._colgroup(),r="";this.wrapper=i.addClass($.wrapper),r="<div class='#= gridHeader #' style=\"padding-right: "+kendo.support.scrollbar()+"px;\"><div class='#= gridHeaderWrap #'><table role='grid'>"+n+"<thead role='rowgroup' /></table></div></div><div class='#= gridContentWrap #'><table role='treegrid' tabindex='0'>"+n+"<tbody /></table></div>",this.options.scrollable||(r="<table role='treegrid' tabindex='0'>"+n+"<thead class='#= gridHeader #' role='rowgroup' /><tbody /></table>"),this.options.toolbar&&(r="<div class='#= header # #= gridToolbar #' />"+r),i.append(kendo.template(r)($)+"<div class='k-status' />"),this.toolbar=i.find(S+$.gridToolbar),e=this.header=i.find(S+$.gridHeader).find("thead").addBack().filter("thead"),this._headerTree=new l.Tree(this.header[0]),this._headerTree.render([c("tr",{role:"row"},this._ths())]),t=this.columns,this.angular("compile",function(){return{elements:e.find("th.k-header").get(),data:_(t,function(e){return{column:e}})}}),this.content=i.find(S+$.gridContentWrap).find("tbody"),this.content.length||(this.content=i.find("tbody")),this._contentTree=new l.Tree(this.content[0]),this._statusTree=new l.Tree(this.element.children(".k-status")[0])},_toolbar:function(){var t,i=this.options.toolbar,n=this.toolbar;i&&(e.isArray(i)?(t=this._buildCommands(i),new l.Tree(n[0]).render(t)):n.append(kendo.template(i)({})),this.angular("compile",function(){return{elements:n.get()}}))},_render:function(e){var t,i,n;e=e||{},t=this.options.messages,i=this.dataSource.rootNodes(),n=this.dataSource.aggregates(),this._absoluteIndex=0,e.error?this._showStatus(kendo.template("#: messages.requestFailed # <button class='#= buttonClass #'>#: messages.retry #</button>")({buttonClass:[$.button,$.retry].join(" "),messages:t})):i.length?(this._hideStatus(),this._contentTree.render(this._trs({aggregates:e.aggregates,data:i,visible:!0,level:0}))):this._showStatus(kendo.htmlEncode(t.noRows))},_ths:function(){var e,t,i,n,r,o,s=this.columns,a=[];for(r=0,o=s.length;o>r;r++)e=s[r],i=[],n=[$.header],t=e.headerTemplate?e.headerTemplate({}):e.title||e.field||"",i.push(e.sortable?c("a",{href:"#",className:$.link},[d(t)]):e.headerTemplate?u(t):d(t)),a.push(c("th",{"data-field":e.field,"data-title":e.title,className:n.join(" "),role:"columnheader"},i));return a},_colgroup:function(){var e,t,i,n=this.columns,r=[];for(t=0,i=n.length;i>t;t++)r.push("<col "),e=n[t].width,e&&0!==parseInt(e,10)&&(r.push("style='width:"),r.push("string"==typeof e?e:e+"px"),r.push("'")),r.push("/>");return"<colgroup>"+r.join("")+"</colgroup>"},_trs:function(e){var i,n,r,o,s,a,l,c,d=[],u=e.level,h=e.data,p=this.dataSource,f=p.aggregates()||{};for(a=0,l=h.length;l>a;a++)r=[],i=h[a],s=i.loaded()&&p.childNodes(i),o=s&&s.length,n={"data-uid":i.uid,role:"row"},o&&(n["aria-expanded"]=!!i.expanded),this._absoluteIndex%2!==0&&r.push($.alt),e.visible?this._absoluteIndex++:n.style={display:"none"},o&&r.push($.group),i._edit&&r.push("k-grid-edit-row"),n.className=r.join(" ")||t,d.push(this._tds({model:i,attr:n,level:u},y(this._td,this))),o&&(d=d.concat(this._trs({parentId:i.id,aggregates:f,visible:e.visible&&!!i.expanded,data:s,level:u+1})));return this._hasFooterTemplate()&&(c=e.parentId||null,n={className:$.footerTemplate,"data-parentId":c},e.visible||(n.style={display:"none"}),d.push(this._tds({model:f[c],attr:n,level:u},this._footerTd))),d},_footerTd:function(t){var n=[],r=t.column,o=t.column.footerTemplate||e.noop,s=t.model[r.field]||{},l={role:"gridcell"};return r.expandable&&(n=n.concat(i({level:t.level+1,className:$.iconPlaceHolder}))),r.attributes&&a(l,r.attributes),n.push(d(o(s)||"")),c("td",l,n)},_hasFooterTemplate:function(){return!!b(this.columns,function(e){return e.footerTemplate}).length},_tds:function(e,t){var i,n,r,o=[],s=this.columns;for(n=0,r=s.length;r>n;n++)i=s[n],o.push(t({model:e.model,column:i,level:e.level}));return c("tr",e.attr,o)},_td:function(e){var t,n=[],r=e.model,o=e.column,s={role:"gridcell"};return r._edit&&o.field&&r.editable(o.field)?s[kendo.attr("container-for")]=o.field:(o.expandable&&(n=i({level:e.level,className:$.iconPlaceHolder}),t=[$.icon],t.push(r.hasChildren?r.expanded?$.iconCollapse:$.iconExpand:$.iconHidden),r._error?t.push($.refresh):!r.loaded()&&r.expanded&&t.push($.loading),n.push(c("span",{className:t.join(" ")}))),o.attributes&&a(s,o.attributes),o.command?n=this._buildCommands(r._edit?["update","canceledit"]:o.command):n.push(this._cellContent(o,r))),c("td",s,n)},_cellContent:function(e,i){var n;return e.template?n=e.template(i):e.field&&(n=i.get(e.field),e.format&&(n=kendo.format(e.format,n))),t===n&&(n=""),e.template||!e.encoded?u(n):d(n)},_buildCommands:function(e){var t,i=[];for(t=0;e.length>t;t++)i.push(this._button(e[t]));return i},_button:function(e){var t=(e.name||e).toLowerCase(),i=this.options.messages.commands[t],n=[];return e=a({},O[t],{text:i},e),e.imageClass&&n.push(c("span",{className:["k-icon",e.imageClass].join(" ")})),c("button",{"data-command":t,className:["k-button k-button-icontext",e.className].join(" ")},n.concat([d(e.text||e.name)]))},_sortable:function(){var e,t,i,n,r,o=this.columns,s=this.header.find("th"),l=kendo.attr("field"),c=this.options.sortable;if(c)for(n=0,r=s.length;r>n;n++)e=o[n],e.sortable!==!1&&!e.command&&e.field&&(i=s.eq(n),t=i.data("kendoColumnSorter"),t&&t.destroy(),i.attr(l,e.field).kendoColumnSorter(a({},c,e.sortable,{dataSource:this.dataSource})))},_filterable:function(){var e,t,i,n,r=this.header.find("th"),o=this.options.filterable;if(o)for(n=y(function(e){this.trigger(N,{field:e.field,container:e.container})},this),e=0,t=r.length;t>e;e++)i=this.columns[e],i.command||i.filterable===!1||r.eq(e).kendoFilterMenu(a(!0,{},o,i.filterable,{dataSource:this.dataSource,init:n}))},_change:function(){this.trigger(k)},_selectable:function(){var e,t=this.options.selectable;t&&(t=kendo.ui.Selectable.parseOptions(t),e=">tr:not(.k-footer-template)",t.cell&&(e+=">td"),this.selectable=new kendo.ui.Selectable(this.content,{filter:e,aria:!0,multiple:t.multiple,change:y(this._change,this)}))},select:function(e){var i=this.selectable;return t===e||i.options.multiple||(i.clear(),e=e.first()),i.value(e)},clearSelection:function(){var e=this.select();e.length&&(this.selectable.clear(),this.trigger(k))},_dataSource:function(e){var t=this.dataSource;t&&(t.unbind(k,this._refreshHandler),t.unbind(x,this._errorHandler),t.unbind(C,this._progressHandler)),this._refreshHandler=y(this.refresh,this),this._errorHandler=y(this._error,this),this._progressHandler=y(this._progress,this),t=this.dataSource=B.create(e),t.bind(k,this._refreshHandler),t.bind(x,this._errorHandler),t.bind(C,this._progressHandler)},setDataSource:function(e){this._dataSource(e),this.options.autoBind&&this.dataSource.fetch()},dataItem:function(t){var i=e(t).closest("tr"),n=this.dataSource.getByUid(i.attr(kendo.attr("uid")));return n},editRow:function(e){var t;typeof e===w&&(e=this.content.find(e)),t=this.dataItem(e),t&&("popup"!=this._editMode()&&(t._edit=!0),this._cancelEditor(),this._render(),this._createEditor(t),this.trigger(A,{container:this.editor.element,model:t}))},_cancelEdit:function(e){e=a(e,{container:this.editor.wrapper,model:this.editor.model}),this.trigger(R,e)||this.cancelRow()},cancelRow:function(){this._cancelEditor(),this._render()},saveRow:function(){var e,t=this.editor;t&&(e={model:t.model,container:t.element},t.end()&&!this.trigger(E,e)&&this.dataSource.sync())},addRow:function(e){var i=this.editor,n=0,r={};if(!i||i.end())return e?(e instanceof L||(e=this.dataItem(e)),r.parentId=e.id,n=this.dataSource.indexOf(e)+1,e.set("expanded",!0),this.dataSource.load(e).then(y(this._insertAt,this,r,n)),t):(this._insertAt(r,n),t)},_insertAt:function(e,t){e=this.dataSource.insert(t,e);var i=this.content.find("["+kendo.attr("uid")+"="+e.uid+"]");this.editRow(i)},removeRow:function(e){var t=this.dataItem(e),i={model:t,row:e};t&&!this.trigger(F,i)&&(this.dataSource.remove(t),this.dataSource.sync())},_cancelEditor:function(){var e,t=this.editor;t&&(e=t.model,this._destroyEditor(),this.dataSource.cancelChanges(e),e._edit=!1)},_destroyEditor:function(){this.editor&&(this.editor.close(),this.editor=null)},_createEditor:function(e){var t=this.content.find("["+kendo.attr("uid")+"="+e.uid+"]"),i=this._editMode(),o={columns:this.columns,model:e,target:this,clearContainer:!1,template:this.options.editable.template};"inline"==i?this.editor=new n(t,o):(a(o,{window:this.options.editable.window,commandRenderer:y(function(){return this._buildCommands(["update","canceledit"])},this),fieldRenderer:this._cellContent,save:y(this.saveRow,this),cancel:y(this._cancelEdit,this),appendTo:this.wrapper}),this.editor=new r(t,o))},_editMode:function(){var e="inline",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e.toLowerCase()}}),kendo.ExcelMixin&&kendo.ExcelMixin.extend(o.prototype),kendo.PDFMixin&&kendo.PDFMixin.extend(o.prototype),a(!0,kendo.data,{TreeListDataSource:B,TreeListModel:L}),a(!0,kendo.ui,{TreeList:o}),h.plugin(o)}(window.kendo.jQuery),function(e){function t(e){for(var t,i=0,n=e.length;n>i;i++)if(2==e[i].type){t=!0;break}t&&e.splice(i+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})}function i(e){return{name:e.uniqueName,type:e.type}}function n(e){for(var t=0,i=e.length;i>t;t++)e[t].uniqueName=e[t].name,e[t].type="kpi";return e}function r(t){var i=e(t).closest(".k-pivot-setting");return i.length?i.data("kendoPivotSettingTarget"):null}function o(e,t,i){return{hierarchyUniqueName:e,uniqueName:t,caption:t,measure:t,name:t,type:i}}function s(e){var t=e.name;return[o(t,e.value,"value"),o(t,e.goal,"goal"),o(t,e.status,"status"),o(t,e.trend,"trend")]}var a=window.kendo,l=a.ui,c=l.Widget,d=".kendoPivotConfigurator",u="mouseenter"+d+" mouseleave"+d,h=a.template('<p class="k-reset"><span class="k-icon #=icon#"></span>${name}</p><div class="k-list-container k-reset"/>'),p=c.extend({init:function(e,t){c.fn.init.call(this,e,t),this.element.addClass("k-widget k-fieldselector k-alt k-edit-form-container"),this._dataSource(),this._layout(),this.refresh(),a.notify(this)},events:[],options:{name:"PivotConfigurator",filterable:!1,sortable:!1,messages:{measures:"Drop Data Fields Here",columns:"Drop Column Fields Here",rows:"Drop Rows Fields Here",measuresLabel:"Measures",columnsLabel:"Columns",rowsLabel:"Rows",fieldsLabel:"Fields"}},_dataSource:function(){this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler):this._refreshHandler=e.proxy(this.refresh,this),this.dataSource=a.data.PivotDataSource.create(this.options.dataSource),this.dataSource.bind("change",this._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measures&&this.measures.setDataSource(e),this.rows&&this.rows.setDataSource(e),this.columns&&this.columns.setDataSource(e),this.refresh()},_treeViewDataSource:function(){var i=this;return a.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return!("hierarchyUniqueName"in e||"aggregator"in e)}}},transport:{read:function(r){var o,a,l;e.isEmptyObject(r.data)?(o=i.dataSource.schemaDimensions(),o.done(function(e){i.dataSource.cubeBuilder||t(e),r.success(e)}).fail(r.error)):(a=i.treeView.dataSource.get(r.data.uniqueName),"[KPIs]"===a.uniqueName?(l=!0,o=i.dataSource.schemaKPIs(),o.done(function(e){r.success(n(e))}).fail(r.error)):"kpi"==a.type&&(l=!0,r.success(s(a))),l||(o=2==a.type?i.dataSource.schemaMeasures():a.dimensionUniqueName?i.dataSource.schemaLevels(r.data.uniqueName):i.dataSource.schemaHierarchies(r.data.uniqueName),o.done(r.success).fail(r.error)))}}})},_layout:function(){this.form=e('<div class="k-columns k-state-default k-floatwrap"/>').appendTo(this.element),this._fields(),this._targets()},_fields:function(){var t=e('<div class="k-state-default"><p class="k-reset"><span class="k-icon k-i-group"></span>'+this.options.messages.fieldsLabel+"</p></div>").appendTo(this.form),n='# if (item.type == 2 || item.uniqueName == "[KPIs]") { #<span class="k-icon k-i-#= (item.type == 2 ? "sum" : "kpi") #"></span># } else if (item.type && item.type !== "kpi") { #<span class="k-icon k-i-dimension"></span># } ##: item.name #';this.treeView=e("<div/>").appendTo(t).kendoTreeView({template:n,dataTextField:"name",dragAndDrop:!0,autoBind:!1,dataSource:this._treeViewDataSource(),dragstart:function(e){var t=this.dataItem(e.sourceNode);(t.hasChildren||t.aggregator||t.measure)&&2!=t.type&&"[KPIs]"!==t.uniqueName||e.preventDefault()},drag:function(e){var t="k-denied",i=r(e.dropTarget);i&&i.validate(this.dataItem(e.sourceNode))&&(t="k-add"),e.setStatusClass(t)},drop:function(e){var t,n,o,a,l,c;if(e.preventDefault(),t=r(e.dropTarget),n=this.dataItem(e.sourceNode),t&&t.validate(n)){if(c=n.defaultHierarchy||n.uniqueName,"kpi"===n.type)for(l=s(n),a=l.length,c=[],o=0;a>o;o++)c.push(i(l[o]));else n.type&&(c=[i(n)]);t.add(c)}}}).data("kendoTreeView")},_createTarget:function(t,i){var n='<li class="k-item k-header" data-'+a.ns+'name="${data.name}">${data.name}',r=i.sortable,o="";return r&&(o+="#if (data.sortIcon) {#",o+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',o+="#}#"),(i.filterable||r)&&(o+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),o+='<span class="k-icon k-si-close k-setting-delete"></span>',n+='<span class="k-field-actions">'+o+"</span></li>",new a.ui.PivotSettingTarget(t,e.extend({dataSource:this.dataSource,hint:function(t){var i=e('<div class="k-fieldselector"><ul class="k-list k-reset"></ul></div>');return i.find(".k-list").append(t.clone()),i},template:n,emptyTemplate:'<li class="k-item k-empty">${data}</li>'},i))},_targets:function(){var t=e('<div class="k-state-default"/>').appendTo(this.form),i=e(h({name:this.options.messages.columnsLabel,icon:"k-i-vbars"})).appendTo(t),n=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(i.last()),r=e(h({name:this.options.messages.rowsLabel,icon:"k-i-hbars"})).appendTo(t),o=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(r.last()),s=e(h({name:this.options.messages.measuresLabel,icon:"k-i-sum"})).appendTo(t),a=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(s.last()),l=this.options;this.columns=this._createTarget(n,{filterable:l.filterable,sortable:l.sortable,connectWith:o,messages:{empty:l.messages.columns,fieldMenu:l.messages.fieldMenu}}),this.rows=this._createTarget(o,{filterable:l.filterable,setting:"rows",connectWith:n,messages:{empty:this.options.messages.rows,fieldMenu:this.options.messages.fieldMenu}}),this.measures=this._createTarget(a,{setting:"measures",messages:{empty:l.messages.measures}}),n.add(o).add(a).on(u,".k-item:not(.k-empty)",this._toggleHover)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_resize:function(){var e,t,i=this.element,n=this.options.height;n&&i.is(":visible")&&(i.height(n),t=i.children(".k-columns").children("div.k-state-default"),e=(i.outerHeight()-i.innerHeight())/2,n=n-(t.outerHeight(!0)-t.height())-e,t.height(n))},refresh:function(){var e=this.dataSource;(e.cubeBuilder||this._cube!==e.cube()||this._catalog!==e.catalog())&&this.treeView.dataSource.fetch(),this._catalog=this.dataSource.catalog(),this._cube=this.dataSource.cube(),this._resize()},destroy:function(){c.fn.destroy.call(this),this.dataSource.unbind("change",this._refreshHandler),this.form.find(".k-list").off(d),this.rows.destroy(),this.columns.destroy(),this.measures.destroy(),this.treeView.destroy(),this.element=null,this._refreshHandler=null}});l.plugin(p)}(window.kendo.jQuery),function(e,t,i){"use strict";function n(e){var t=k;try{return k=function(e){return e()},e()}finally{k=t}}function r(e,n,r,o){n[r]=t.copy(e.$eval(o)),n[r]===i&&o.match(/^\w*$/)&&C.warn(r+" attribute resolved to undefined. Maybe you meant to use a string literal like: '"+o+"'?")}function o(n,o,a,l,c){function d(){var i,d,h,f,m,g,v,y,_;return a.kRebind&&(i=e(e(o)[0].cloneNode(!0))),d=l.replace(/^kendo/,""),h=t.extend({},a.defaultOptions,n.$eval(a.kOptions||a.options)),(f=e(o)[l])?(m=f.widget.prototype.options,g=f.widget.prototype.events,e.each(a,function(e,t){var i,o,s,a;"source"!==e&&"kDataSource"!==e&&(i="data"+e.charAt(0).toUpperCase()+e.slice(1),0===e.indexOf("on")&&(o=e.replace(/^on./,function(e){return e.charAt(2).toLowerCase()}),g.indexOf(o)>-1&&(h[o]=t)),m.hasOwnProperty(i)?r(n,h,i,t):m.hasOwnProperty(e)&&!M[e]?r(n,h,e,t):D[e]||(s=e.match(/^k(On)?([A-Z].*)/),s&&(a=s[2].charAt(0).toLowerCase()+s[2].slice(1),s[1]&&"kOnLabel"!=e?h[a]=t:("kOnLabel"==e&&(a="onLabel"),r(n,h,a,t)))))}),v=a.kDataSource||a.source,v&&(h.dataSource=T(n,o,d,v)),h.$angular=[n],o.is("select")&&!function(t){if(t.length>0){var i=e(t[0]);!/\S/.test(i.text())&&/^\?/.test(i.val())&&i.remove()}}(o[0].options),y=f.call(o,S=h).data(l),s(y,n,a,l,c),n.$emit("kendoWidgetCreated",y),_=u(n,y),a.kRebind&&p(y,n,o,i,a.kRebind,_),y):(window.console.error("Could not find: "+l),null)}var h,f=a.kNgDelay,m=n.$eval(f);return f&&!m?(h=n.$watch(f,function(e,t){e!==t&&(h(),o.removeAttr(a.$attr.kNgDelay),f=null,k(d))}),i):d()}function s(e,t,i,n,r){if(i[r]){var o=w(i[r]).assign;if(!o)throw Error(r+" attribute used but expression in it is not assignable: "+i[n]);o(t,e)}}function a(e){return/checkbox|radio/i.test(e.attr("type"))?e.prop("checked"):e.val()}function l(e){return A.test(e[0].tagName)}function c(e,t,n,r,o){var s,c,d,u;e.value&&(s=l(n)?function(){return a(n)}:function(){return e.value()},r.$render=function(){var t=r.$viewValue;t===i&&(t=r.$modelValue),setTimeout(function(){e&&e.value(t)},0)},c=!1,l(n)&&n.on("change",function(){c=!0}),d=function(e){return function(){var i;c||(c=!1,e&&o&&(i=o.$pristine),r.$setViewValue(s()),e&&(r.$setPristine(),i&&o.$setPristine()),g(t))}},e.first("change",d(!1)),e.first("dataBound",d(!0)),u=s(),u!=r.$viewValue&&(r.$isEmpty(r.$viewValue)?null!=u&&""!==u&&u!=r.$viewValue&&r.$setViewValue(u):e.value(r.$viewValue)),r.$setPristine())}function d(e,t,n){var r,o,s;return"function"!=typeof e.value?(C.warn("k-ng-model specified on a widget that does not have the value() method: "+e.options.name),i):(r=w(n),o=r.assign,s=!1,e.$angular_setLogicValue(r(t)),t.$watch(n,function(t,n){t===i&&(t=null),s||t!==n&&e.$angular_setLogicValue(t)}),e.first("change",function(){s=!0,t.$apply(function(){o(t,e.$angular_getLogicValue())}),s=!1}),i)}function u(e,t){var i=e.$on("$destroy",function(){i(),t&&(t.element&&(t=m(t.element),t&&t.destroy()),t=null)});return i}function h(t,i){function n(){s.disconnect()}function r(){s.observe(e(i)[0],{attributes:!0})}var o,s;window.MutationObserver&&t.wrapper&&(o=[].slice.call(e(i)[0].classList),s=new MutationObserver(function(i){n(),t&&(i.forEach(function(i){var n,r=e(t.wrapper)[0];switch(i.attributeName){case"class":n=[].slice.call(i.target.classList),n.forEach(function(e){o.indexOf(e)<0&&(r.classList.add(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.add(e))}),o.forEach(function(e){n.indexOf(e)<0&&(r.classList.remove(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.remove(e))}),o=n;break;case"disabled":"function"==typeof t.enable&&t.enable(!e(i.target).attr("disabled"));break;case"readonly":"function"==typeof t.readonly&&t.readonly(!!e(i.target).attr("readonly"))}}),r())}),r(),t.first("destroy",n))}function p(t,i,n,r,o,s){var a=i.$watch(o,function(o,l){var c,d,u;o!==l&&(a(),c=e(t.wrapper)[0],d=e(t.element)[0],u=n.injector().get("$compile"),t.destroy(),s&&s(),t=null,c&&d&&(c.parentNode.replaceChild(d,c),e(n).replaceWith(r)),u(r)(i))},!0);g(i)}function f(e,i){function n(e,t){_.directive(e,["directiveFactory",function(i){return i.create(t,e)}])}var r,o,s,a,l=i?"Mobile":"";l+=e.fn.options.name,r=l,o="kendo"+l.charAt(0)+l.substr(1).toLowerCase(),
l="kendo"+l,s=l.replace(/([A-Z])/g,"-$1"),-1==I.indexOf(l.replace("kendo",""))&&(a=l===o?[l]:[l,o],t.forEach(a,function(e){_.directive(e,function(){return{restrict:"E",replace:!0,template:function(e){var t=E[r]||"div";return"<"+t+" "+s+">"+e.html()+"</"+t+">"}}})})),P.indexOf(l.replace("kendo",""))>-1||(n(l,l),o!=l&&n(o,l))}function m(t){return t=e(t),kendo.widgetInstance(t,kendo.ui)||kendo.widgetInstance(t,kendo.mobile.ui)||kendo.widgetInstance(t,kendo.dataviz.ui)}function g(e,t){var i=e.$root||e,n=/^\$(digest|apply)$/.test(i.$$phase);t?n?t():i.$apply(t):n||i.$digest()}function v(t,i){t.$destroy(),i&&e(i).removeData("$scope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}function y(i,n,r){var o,s,a;if(e.isArray(i))return t.forEach(i,function(e){y(e,n,r)});if("string"==typeof i){for(o=i.split("."),s=kendo;s&&o.length>0;)s=s[o.shift()];if(!s)return F.push([i,n,r]),!1;i=s.prototype}return a=i[n],i[n]=function(){var e=this,t=arguments;return r.apply({self:e,next:function(){return a.apply(e,arguments.length>0?arguments:t)}},t)},!0}var _,b,w,k,x,C,S,T,D,M,A,E,I,P,F,z;t&&(_=t.module("kendo.directives",[]),b=t.injector(["ng"]),w=b.get("$parse"),k=b.get("$timeout"),C=b.get("$log"),T=function(){var e={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN",ContextMenu:"$PLAIN"},t=function(e,t){return"$PLAIN"==t?e:kendo.data[t].create(e)};return function(i,n,r,o){var s=e[r]||"DataSource",a=t(i.$eval(o),s);return i.$watch(o,function(e,i){var r,o;e!==i&&(r=t(e,s),o=m(n),o&&"function"==typeof o.setDataSource&&o.setDataSource(r))}),a}}(),D={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},M={name:!0,title:!0,style:!0},A=/^(input|select|textarea)$/i,_.factory("directiveFactory",["$compile",function(t){var i,n=0,r=!1;return x=t,i=function(t,i){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function(e,t){this.template=function(e,i){t[e]=kendo.stringify(i)}}],link:function(s,a,l,u){var p=u[0],f=u[1],m=e(a),g=t.replace(/([A-Z])/g,"-$1"),v="hidden"!==m.css("visibility");m.attr(g,m.attr("data-"+g)),m[0].removeAttribute("data-"+g),v&&m.css("visibility","hidden"),++n,k(function(){v&&m.css("visibility","");var u=o(s,a,l,t,i);u&&(p&&c(u,s,a,p,f),l.kNgModel&&d(u,s,l.kNgModel),h(u,a),--n,0===n&&(r||(r=!0,s.$emit("kendoRendered"),e("form").each(function(){var t=e(this).controller("form");t&&t.$setPristine()}))))})}}},{create:i}}]),E={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"},I=["MobileView","MobileLayout","MobileSplitView","MobilePane","MobileModalView"],P=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"],t.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView"],function(e){P.push(e),e="kendo"+e,_.directive(e,function(){return{restrict:"A",link:function(t,i,n){o(t,i,n,e,e)}}})}),function(){function e(e){return function(i){t.forEach(i,function(t){t.fn&&t.fn.options&&t.fn.options.name&&/^[A-Z]/.test(t.fn.options.name)&&f(t,e)})}}t.forEach([kendo.ui,kendo.dataviz&&kendo.dataviz.ui],e(!1)),t.forEach([kendo.mobile&&kendo.mobile.ui],e(!0))}(),F=[],y(kendo.ui,"plugin",function(t,i,n){this.next(),F=e.grep(F,function(e){return!y.apply(null,e)}),f(t,"Mobile"==n)}),y(["ui.Widget","mobile.ui.Widget"],"angular",function(r,o){var s,a=this.self;return"init"==r?(!o&&S&&(o=S),S=null,o&&o.$angular&&(a.$angular_scope=o.$angular[0],a.$angular_init(a.element,o)),i):(s=a.$angular_scope,s&&n(function(){var n,l,c=o(),d=c.elements,u=c.data;if(d.length>0)switch(r){case"cleanup":t.forEach(d,function(e){var i=t.element(e).scope();i&&i!==s&&i.$$kendoScope&&v(i,e)});break;case"compile":n=a.element.injector(),l=n?n.get("$compile"):x,t.forEach(d,function(n,r){var o,a;c.scopeFrom?o=t.element(c.scopeFrom).scope():(a=u&&u[r],a!==i&&(o=e.extend(s.$new(),a),o.$$kendoScope=!0)),l(n)(o||s)}),g(s)}}),i)}),y("ui.Widget","$angular_getLogicValue",function(){return this.self.value()}),y("ui.Widget","$angular_setLogicValue",function(e){this.self.value(e)}),y("ui.Select","$angular_getLogicValue",function(){var e=this.self.dataItem();return e?this.self.options.valuePrimitive?e[this.self.options.dataValueField]:e.toJSON():null}),y("ui.Select","$angular_setLogicValue",function(e){var t=this.self,i=t.options,n=i.dataValueField;n&&!i.valuePrimitive&&(e=null!=e?e[i.dataValueField||i.dataTextField]:null),t.value(e)}),y("ui.MultiSelect","$angular_getLogicValue",function(){var t=this.self.dataItems(),i=this.self.options.dataValueField;return i&&this.self.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]})),t}),y("ui.MultiSelect","$angular_setLogicValue",function(t){null==t&&(t=[]);var i=this.self,n=i.options.dataValueField;n&&!i.options.valuePrimitive&&(t=e.map(t,function(e){return e[n]})),i.value(t)}),y("ui.AutoComplete","$angular_getLogicValue",function(){var e,t,i,n,r,o=this.self.options,s=this.self.value().split(o.separator),a=o.valuePrimitive,l=this.self.dataSource.data(),c=[];for(e=0,t=l.length;t>e;e++)for(i=l[e],n=o.dataTextField?i[o.dataTextField]:i,r=0;s.length>r;r++)if(n===s[r]){c.push(a?n:i.toJSON());break}return c}),y("ui.AutoComplete","$angular_setLogicValue",function(t){null==t&&(t=[]);var i=this.self,n=i.options.dataTextField;n&&!i.options.valuePrimitive&&(t=e.map(t,function(e){return e[n]})),i.value(t)}),y("ui.Widget","$angular_init",function(t,i){var n,r,o,s,a=this.self;if(i&&!e.isArray(i))for(n=a.$angular_scope,r=a.events.length;--r>=0;)o=a.events[r],s=i[o],s&&"string"==typeof s&&(i[o]=a.$angular_makeEventHandler(o,n,s))}),y("ui.Widget","$angular_makeEventHandler",function(e,t,i){return i=w(i),function(e){g(t,function(){i(t,{kendoEvent:e})})}}),y(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(e,i,n){return"change"!=e?this.next():(n=w(n),function(e){var r,o,s,a,l,c,d,u,h,p=e.sender,f=p.options,m={kendoEvent:e};for(t.isString(f.selectable)&&(r=-1!==f.selectable.indexOf("cell"),o=-1!==f.selectable.indexOf("multiple")),s=m.selected=this.select(),a=m.data=[],l=m.columns=[],d=0;s.length>d;d++)u=r?s[d].parentNode:s[d],h=p.dataItem(u),r?(t.element.inArray(h,a)<0&&a.push(h),c=t.element(s[d]).index(),t.element.inArray(c,l)<0&&l.push(c)):a.push(h);o||(m.dataItem=m.data=a[0],m.selected=s[0]),g(i,function(){n(i,m)})})}),y("ui.Grid","$angular_init",function(n,r){if(this.next(),r.columns){var o=e.extend({},kendo.Template,r.templateSettings);t.forEach(r.columns,function(e){!e.field||e.template||e.format||e.values||e.encoded!==i&&!e.encoded||(e.template="<span ng-bind='"+kendo.expr(e.field,"dataItem")+"'>#: "+kendo.expr(e.field,o.paramName)+"#</span>")})}}),y("mobile.ui.ButtonGroup","value",function(e){var t=this.self;return null!=e&&(t.select(t.element.children("li.km-button").eq(e)),t.trigger("change"),t.trigger("select",{index:t.selectedIndex})),t.selectedIndex}),y("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}),_.directive("kendoMobileApplication",function(){return{terminal:!0,link:function(e,t,i){o(e,t,i,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=o(e,t,i,"kendoMobileView","kendoMobileView")},post:function(e,t,i){i._instance._layout(),i._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=o(e,t,i,"kendoMobileDrawer","kendoMobileDrawer")},post:function(e,t,i){i._instance._layout(),i._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=o(e,t,i,"kendoMobileModalView","kendoMobileModalView")},post:function(e,t,i){i._instance._layout(),i._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=o(e,t,i,"kendoMobileSplitView","kendoMobileSplitView")},post:function(e,t,i){i._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,o(e,t,i,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(e,t,i){o(e,t,i,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(t,i,n){i.find("a[k-action]").each(function(){e(this).attr("data-"+kendo.ns+"action",e(this).attr("k-action"))}),o(t,i,n,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,o(e,t,i,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:!0,template:function(e){return"<span data-"+kendo.ns+"role='view-title'>"+e.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(e,t){t.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(e,t){t.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:!0,template:function(e){return"<div data-"+kendo.ns+"role='page'>"+e.html()+"</div>"}}}),t.forEach(["align","icon","rel","transition","actionsheetContext"],function(e){var t="k"+e.slice(0,1).toUpperCase()+e.slice(1);_.directive(t,function(){return{restrict:"A",priority:2,link:function(i,n,r){n.attr(kendo.attr(kendo.toHyphens(e)),i.$eval(r[t]))}}})}),z={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],TreeView:["Template"],Validator:["ErrorTemplate"]},function(){var e={};t.forEach(z,function(i,n){t.forEach(i,function(t){e[t]||(e[t]=[]),e[t].push("?^^kendo"+n)})}),t.forEach(e,function(e,t){var i="k"+t,n=kendo.toHyphens(i);_.directive(i,function(){return{restrict:"A",require:e,terminal:!0,compile:function(t,r){if(""===r[i]){t.removeAttr(n);var o=t[0].outerHTML;return function(r,s,a,l){for(var c;!c&&l.length;)c=l.shift();c?(c.template(i,o),t.remove()):C.warn(n+" without a matching parent widget found. It can be one of the following: "+e.join(", "))}}}}})})}())}(window.kendo.jQuery,window.angular),function(e,t){function i(e,t){var i={top:0,right:0,bottom:0,left:0};return t=t||0,"number"==typeof e?i[He]=i[ze]=i[ce]=i[Se]=e:(i[He]=e[He]||t,i[ze]=e[ze]||t,i[ce]=e[ce]||t,i[Se]=e[Se]||t),i}function n(e,t){var i=e.tickX,n=e.tickY,r=e.position,o=new X.Path({stroke:{width:t.width,color:t.color}});return e.vertical?o.moveTo(i,r).lineTo(i+t.size,r):o.moveTo(r,n).lineTo(r,n+t.size),k(o),o}function r(e,t){var i=e.lineStart,n=e.lineEnd,r=e.position,o=new X.Path({stroke:{width:t.width,color:t.color,dashType:t.dashType}});return e.vertical?o.moveTo(i,r).lineTo(n,r):o.moveTo(r,i).lineTo(r,n),k(o),o}function o(e,t){var i,n,r,o=u(t-e,ve-1);if(0===o){if(0===t)return.1;o=oe.abs(t)}return i=oe.pow(10,oe.floor(oe.log(o)/oe.log(10))),n=u(o/i,ve),r=1,r=1.904762>n?.2:4.761904>n?.5:9.523809>n?1:2,u(i*r,ve)}function s(e,t,i,n,r){var o=r*_e;return new Ue(i+(e-i)*oe.cos(o)+(t-n)*oe.sin(o),n-(e-i)*oe.sin(o)+(t-n)*oe.cos(o))}function a(t,i){if(t.x1==i.x1&&t.y1==i.y1&&t.x2==i.x2&&t.y2==i.y2)return i;var n=oe.min(t.x1,i.x1),r=oe.max(t.x1,i.x1),o=oe.min(t.x2,i.x2),s=oe.max(t.x2,i.x2),a=oe.min(t.y1,i.y1),l=oe.max(t.y1,i.y1),c=oe.min(t.y2,i.y2),d=oe.max(t.y2,i.y2),u=[];return u[0]=C(r,a,o,l),u[1]=C(n,l,r,c),u[2]=C(o,l,s,c),u[3]=C(r,c,o,d),t.x1==n&&t.y1==a||i.x1==n&&i.y1==a?(u[4]=C(n,a,r,l),u[5]=C(o,c,s,d)):(u[4]=C(o,a,s,l),u[5]=C(n,c,r,d)),e.grep(u,function(e){return e.height()>0&&e.width()>0})[0]}function l(e,t){return-1!=ne(e,t)}function c(e,t){return u(oe.ceil(e/t)*t,ve)}function d(e,t){return u(oe.floor(e/t)*t,ve)}function u(e,t){var i=oe.pow(10,t||0);return oe.round(e*i)/i}function h(e,t){return oe.log(e)/oe.log(t)}function p(e,t,i){var n=u(oe.abs(e%t),ve),r=t*(1-i);return 0===n||n>r}function f(e,t,i){return u(e+(t-e)*i,ue)}function m(e,t){return e-t}function g(e,t){return e.match(be)?V.format.apply(this,arguments):V.toString(t,e)}function v(e,t){return 0>-e.x*t.y+e.y*t.x}function y(e,t){return e&&t?e.getTime()-t.getTime():0}function _(e){var t=e.originalEvent,i=0;return t.wheelDelta&&(i=-t.wheelDelta/120,i=i>0?oe.ceil(i):oe.floor(i)),t.detail&&(i=u(t.detail/3)),i}function b(e){if(!e||!e.indexOf||e.indexOf("&")<0)return e;var t=b._element;return t.innerHTML=e,t.textContent||t.innerText}function w(e,t){return e>=t.min&&t.max>=e}function k(e){if(!V.support.vml)for(var t=0;e.segments.length>t;t++)e.segments[t].anchor().round(0).translate(.5,.5);return e}function x(e){var t,i,n=e.stops,r=e.innerRadius/e.radius*100,o=n.length,s=[];for(t=0;o>t;t++)i=se({},n[t]),i.offset=(i.offset*(100-r)+r)/100,s.push(i);return s}var C,S,T,D,M,A,E,I,P,F,z,H,R,N,$,O,L,B,U,V=window.kendo,W=V.util,j=W.append,q=W.defined,G=W.last,Y=W.valueOrDefault,Q=V.dataviz,K=Q.geometry,X=Q.drawing,Z=X.util.measureText,J=K.Matrix,ee=V.Class,te=V.template,ie=e.noop,ne=e.inArray,re=e.trim,oe=Math,se=V.deepExtend,ae="axisLabelClick",le="#000",ce="bottom",de="center",ue=3,he="clip",pe="circle",fe="cross",me="12px sans-serif",ge=400,ve=6,ye=600,_e=oe.PI/180,be=/\{\d+:?/,we="height",ke=1e5,xe=600,Ce="inside",Se="left",Te="linear",De=Number.MAX_VALUE,Me=-Number.MAX_VALUE,Ae="none",Ee="noteClick",Ie="noteHover",Pe="outside",Fe="radial",ze="right",He="top",Re="triangle",Ne="width",$e="#fff",Oe="x",Le="y",Be=.2,Ue=function(e,i){var n=this;return n instanceof Ue?(n.x=e||0,n.y=i||0,t):new Ue(e,i)};Ue.fn=Ue.prototype={clone:function(){var e=this;return new Ue(e.x,e.y)},equals:function(e){return e&&e.x===this.x&&e.y===this.y},rotate:function(e,t){var i=this,n=t*_e,r=oe.cos(n),o=oe.sin(n),s=e.x,a=e.y,l=i.x,c=i.y;return i.x=u(s+(l-s)*r+(c-a)*o,ue),i.y=u(a+(c-a)*r-(l-s)*o,ue),i},multiply:function(e){var t=this;return t.x*=e,t.y*=e,t},distanceTo:function(e){var t=this.x-e.x,i=this.y-e.y;return oe.sqrt(t*t+i*i)}},Ue.onCircle=function(e,t,i){return t*=_e,new Ue(e.x-i*oe.cos(t),e.y-i*oe.sin(t))},C=function(e,i,n,r){var o=this;return o instanceof C?(o.x1=e||0,o.x2=n||0,o.y1=i||0,o.y2=r||0,t):new C(e,i,n,r)},C.fn=C.prototype={width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},translate:function(e,t){var i=this;return i.x1+=e,i.x2+=e,i.y1+=t,i.y2+=t,i},move:function(e,t){var i=this,n=i.height(),r=i.width();return q(e)&&(i.x1=e,i.x2=i.x1+r),q(t)&&(i.y1=t,i.y2=i.y1+n),i},wrap:function(e){var t=this;return t.x1=oe.min(t.x1,e.x1),t.y1=oe.min(t.y1,e.y1),t.x2=oe.max(t.x2,e.x2),t.y2=oe.max(t.y2,e.y2),t},wrapPoint:function(e){return this.wrap(new C(e.x,e.y,e.x,e.y)),this},snapTo:function(e,t){var i=this;return t!=Oe&&t||(i.x1=e.x1,i.x2=e.x2),t!=Le&&t||(i.y1=e.y1,i.y2=e.y2),i},alignTo:function(e,t){var i,n,r=this,o=r.height(),s=r.width(),a=t==He||t==ce?Le:Oe,l=a==Le?o:s;return t===de?(i=e.center(),n=r.center(),r.x1+=i.x-n.x,r.y1+=i.y-n.y):r[a+1]=t===He||t===Se?e[a+1]-l:e[a+2],r.x2=r.x1+s,r.y2=r.y1+o,r},shrink:function(e,t){var i=this;return i.x2-=e,i.y2-=t,i},expand:function(e,t){return this.shrink(-e,-t),this},pad:function(e){var t=this,n=i(e);return t.x1-=n.left,t.x2+=n.right,t.y1-=n.top,t.y2+=n.bottom,t},unpad:function(e){var t=this,n=i(e);return n.left=-n.left,n.top=-n.top,n.right=-n.right,n.bottom=-n.bottom,t.pad(n)},clone:function(){var e=this;return new C(e.x1,e.y1,e.x2,e.y2)},center:function(){var e=this;return new Ue(e.x1+e.width()/2,e.y1+e.height()/2)},containsPoint:function(e){var t=this;return e.x>=t.x1&&t.x2>=e.x&&e.y>=t.y1&&t.y2>=e.y},points:function(){var e=this;return[new Ue(e.x1,e.y1),new Ue(e.x2,e.y1),new Ue(e.x2,e.y2),new Ue(e.x1,e.y2)]},getHash:function(){var e=this;return[e.x1,e.y1,e.x2,e.y2].join(",")},overlaps:function(e){return!(this.y1>e.y2||e.y1>this.y2||this.x1>e.x2||e.x1>this.x2)},rotate:function(e){var t=this,i=t.width(),n=t.height(),r=t.center(),o=r.x,a=r.y,l=s(0,0,o,a,e),c=s(i,0,o,a,e),d=s(i,n,o,a,e),u=s(0,n,o,a,e);return i=oe.max(l.x,c.x,d.x,u.x)-oe.min(l.x,c.x,d.x,u.x),n=oe.max(l.y,c.y,d.y,u.y)-oe.min(l.y,c.y,d.y,u.y),t.x2=t.x1+i,t.y2=t.y1+n,t},toRect:function(){return new K.Rect([this.x1,this.y1],[this.width(),this.height()])}},S=ee.extend({init:function(e,t,i,n,r){var o=this;o.c=e,o.ir=t,o.r=i,o.startAngle=n,o.angle=r},clone:function(){var e=this;return new S(e.c,e.ir,e.r,e.startAngle,e.angle)},middle:function(){return this.startAngle+this.angle/2},radius:function(e,t){var i=this;return t?i.ir=e:i.r=e,i},point:function(e,t){var i=this,n=e*_e,r=oe.cos(n),o=oe.sin(n),s=t?i.ir:i.r,a=u(i.c.x-r*s,ue),l=u(i.c.y-o*s,ue);return new Ue(a,l)},adjacentBox:function(e,t,i){var n=this.clone().expand(e),r=n.middle(),o=n.point(r),s=t/2,a=i/2,l=o.x-s,c=o.y-a,d=oe.sin(r*_e),u=oe.cos(r*_e);return oe.abs(d)<.9&&(l+=s*-u/oe.abs(u)),oe.abs(u)<.9&&(c+=a*-d/oe.abs(d)),new C(l,c,l+t,c+i)},containsPoint:function(e){var t=this,i=t.c,n=t.ir,r=t.r,o=t.startAngle,s=t.startAngle+t.angle,a=e.x-i.x,l=e.y-i.y,c=new Ue(a,l),d=t.point(o),h=new Ue(d.x-i.x,d.y-i.y),p=t.point(s),f=new Ue(p.x-i.x,p.y-i.y),m=u(a*a+l*l,ue);return(h.equals(c)||v(h,c))&&!v(f,c)&&m>=n*n&&r*r>=m},getBBox:function(){var e,t,i,n=this,r=new C(De,De,Me,Me),o=u(n.startAngle%360),s=u((o+n.angle)%360),a=n.ir,l=[0,90,180,270,o,s].sort(m),c=ne(o,l),d=ne(s,l);for(e=o==s?l:d>c?l.slice(c,d+1):[].concat(l.slice(0,d+1),l.slice(c,l.length)),t=0;e.length>t;t++)i=n.point(e[t]),r.wrapPoint(i),r.wrapPoint(i,a);return a||r.wrapPoint(n.c),r},expand:function(e){return this.r+=e,this}}),T=S.extend({init:function(e,t,i,n){S.fn.init.call(this,e,0,t,i,n)},expand:function(e){return S.fn.expand.call(this,e)},clone:function(){var e=this;return new T(e.c,e.r,e.startAngle,e.angle)},radius:function(e){return S.fn.radius.call(this,e)},point:function(e){return S.fn.point.call(this,e)}}),D=function(){},D.fn=D.prototype={createRing:function(e,t){var i,n=e.startAngle+180,r=e.angle+n,o=new K.Point(e.c.x,e.c.y),s=oe.max(e.r,0),a=oe.max(e.ir,0),l=new K.Arc(o,{startAngle:n,endAngle:r,radiusX:s,radiusY:s}),c=X.Path.fromArc(l,t).close();return a?(l.radiusX=l.radiusY=a,i=l.pointAt(r),c.lineTo(i.x,i.y),c.arc(r,n,a,a,!0)):c.lineTo(o.x,o.y),c}},D.current=new D,M=ee.extend({init:function(e){var t=this;t.children=[],t.options=se({},t.options,e)},reflow:function(e){var t,i,n,r=this,o=r.children;for(i=0;o.length>i;i++)n=o[i],n.reflow(e),t=t?t.wrap(n.box):n.box.clone();r.box=t||e},destroy:function(){var e,t=this,i=t.children;for(t.getRoot(),this.animation&&this.animation.destroy(),e=0;i.length>e;e++)i[e].destroy()},getRoot:function(){var e=this.parent;return e?e.getRoot():null},translateChildren:function(e,t){var i,n=this,r=n.children,o=r.length;for(i=0;o>i;i++)r[i].box.translate(e,t)},append:function(){j(this.children,arguments);for(var e=0;arguments.length>e;e++)arguments[e].parent=this},renderVisual:function(){var e,t;if(this.options.visible!==!1){for(this.createVisual(),this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual)),e=this.children,t=0;e.length>t;t++)e[t].renderVisual();this.createAnimation(),this.renderComplete()}},createVisual:function(){this.visual=new Q.drawing.Group({zIndex:this.options.zIndex,visible:Y(this.options.visible,!0)})},createAnimation:function(){this.visual&&(this.animation=X.Animation.create(this.visual,this.options.animation))},appendVisual:function(e){e.chartElement||(e.chartElement=this),e.options.noclip?this.getRoot().visual.append(e):q(e.options.zIndex)?this.stackRoot().stackVisual(e):this.visual?this.visual.append(e):this.parent.appendVisual(e)},stackRoot:function(){return this.parent?this.parent.stackRoot():this},stackVisual:function(e){var t,i,n,r=e.options.zIndex||0,o=this.visual.children;for(t=0;o.length>t&&(i=o[t],n=Y(i.options.zIndex,0),!(n>r));t++);this.visual.insertAt(e,t)},traverse:function(e){var t,i,n=this.children;for(t=0;n.length>t;t++)i=n[t],e(i),i.traverse&&i.traverse(e)},closest:function(e){for(var i=this,n=!1;i&&!n;)n=e(i),n||(i=i.parent);return n?i:t},renderComplete:e.noop,toggleHighlight:function(e){var t=this._highlight,i=this.options.highlight;!this.createHighlight||i&&i.visible===!1||(t||(t=this._highlight=this.createHighlight({fill:{color:$e,opacity:.2},stroke:{color:$e,width:1,opacity:.2}}),this.appendVisual(t)),t.visible(e))},createGradientOverlay:function(e,t,i){var n=new X.Path(se({stroke:{color:Ae},fill:this.createGradient(i),closed:e.options.closed},t));return n.segments.elements(e.segments.elements()),n},createGradient:function(e){return this.parent?this.parent.createGradient(e):t}}),A=M.extend({init:function(e){var t=this;t.modelMap={},t.gradients={},M.fn.init.call(t,e)},options:{width:ye,height:ge,background:$e,border:{color:le,width:0},margin:i(5),zIndex:-2},reflow:function(){var e,t=this,i=t.options,n=t.children,r=new C(0,0,i.width,i.height);for(t.box=r.unpad(i.margin),e=0;n.length>e;e++)n[e].reflow(r),r=a(r,n[e].box)},createVisual:function(){this.visual=new X.Group,this.createBackground()},createBackground:function(){var e=this.options,t=e.border||{},i=this.box.clone().pad(e.margin).unpad(t.width),n=X.Path.fromRect(i.toRect(),{stroke:{color:t.width?t.color:"",width:t.width,dashType:t.dashType},fill:{color:e.background,opacity:e.opacity},zIndex:-10});this.visual.append(n)},getRoot:function(){return this},createGradient:function(e){var t,i,n=this.gradients,r=W.objectKey(e),o=Q.Gradients[e.gradient];return n[r]?t=n[r]:(i=se({},o,e),"linear"==o.type?t=new X.LinearGradient(i):(e.innerRadius&&(i.stops=x(i)),t=new X.RadialGradient(i),t.supportVML=o.supportVML!==!1),n[r]=t),t}}),E=M.extend({options:{align:Se,vAlign:He,margin:{},padding:{},border:{color:le,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0},reflow:function(e){function t(){a.align(e,Oe,l.align),a.align(e,Le,l.vAlign),a.paddingBox=n.clone().unpad(p).unpad(m)}var n,r,o,s,a=this,l=a.options,c=l.width,d=l.height,u=c&&d,h=l.shrinkToFit,p=i(l.margin),f=i(l.padding),m=l.border.width,g=a.children;for(r=e.clone(),u&&(r.x2=r.x1+c,r.y2=r.y1+d),h&&r.unpad(p).unpad(m).unpad(f),M.fn.reflow.call(a,r),n=u?a.box=C(0,0,c,d):a.box,h&&u?(t(),r=a.contentBox=a.paddingBox.clone().unpad(f)):(r=a.contentBox=n.clone(),n.pad(f).pad(m).pad(p),t()),a.translateChildren(n.x1-r.x1+p.left+m+f.left,n.y1-r.y1+p.top+m+f.top),o=0;g.length>o;o++)s=g[o],s.reflow(s.box)},align:function(e,t,i){var n=this,r=n.box,o=t+1,s=t+2,a=t===Oe?Ne:we,c=r[a]();l(i,[Se,He])?(r[o]=e[o],r[s]=r[o]+c):l(i,[ze,ce])?(r[s]=e[s],r[o]=r[s]-c):i==de&&(r[o]=e[o]+(e[a]()-c)/2,r[s]=r[o]+c)},hasBox:function(){var e=this.options;return e.border.width||e.background},createVisual:function(){M.fn.createVisual.call(this);var e=this.options;e.visible&&this.hasBox()&&this.visual.append(X.Path.fromRect(this.paddingBox.toRect(),this.visualStyle()))},visualStyle:function(){var e=this,t=e.options,i=t.border||{};return{stroke:{width:i.width,color:i.color,opacity:Y(i.opacity,t.opacity),dashType:i.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}}}),I=M.extend({init:function(e,t){var i=this;M.fn.init.call(i,t),i.content=e,i.reflow(C())},options:{font:me,color:le,align:Se,vAlign:""},reflow:function(e){var t,i=this,n=i.options;t=n.size=Z(i.content,{font:n.font}),i.baseline=t.baseline,i.box=C(e.x1,e.y1,e.x1+t.width,e.y1+t.height)},createVisual:function(){var e=this.options;this.visual=new X.Text(this.content,this.box.toRect().topLeft(),{font:e.font,fill:{color:e.color,opacity:e.opacity},cursor:e.cursor})}}),P=M.extend({init:function(e){M.fn.init.call(this,e),this._initDirection()},_initDirection:function(){var e=this.options;e.vertical?(this.groupAxis=Oe,this.elementAxis=Le,this.groupSizeField=Ne,this.elementSizeField=we,this.groupSpacing=e.spacing,this.elementSpacing=e.vSpacing):(this.groupAxis=Le,this.elementAxis=Oe,this.groupSizeField=we,this.elementSizeField=Ne,this.groupSpacing=e.vSpacing,this.elementSpacing=e.spacing)},options:{vertical:!0,wrap:!0,vSpacing:0,spacing:0},reflow:function(e){this.box=e.clone(),this.reflowChildren()},reflowChildren:function(){var e,t,i,n,r,o,s,a,l,c,d=this,u=d.box,h=d.elementAxis,p=d.groupAxis,f=d.elementSizeField,m=d.groupSizeField,g=d.groupOptions(),v=g.groups,y=v.length,_=u[p+1]+d.alignStart(g.groupsSize,u[m]()),b=_;if(y){for(s=0;y>s;s++){for(i=v[s],n=i.groupElements,r=n.length,e=u[h+1],o=0;r>o;o++)a=n[o],c=d.elementSize(a),t=b+d.alignStart(c[m],i.groupSize),l=C(),l[p+1]=t,l[p+2]=t+c[m],l[h+1]=e,l[h+2]=e+c[f],a.reflow(l),e+=c[f]+d.elementSpacing;b+=i.groupSize+d.groupSpacing}u[p+1]=_,u[p+2]=_+g.groupsSize,u[h+2]=u[h+1]+g.maxGroupElementsSize}},alignStart:function(e,t){var i=0,n=this.options.align;return n==ze||n==ce?i=t-e:n==de&&(i=(t-e)/2),i},groupOptions:function(){var e,t,i=this,n=i.box,r=i.children,o=r.length,s=this.elementSizeField,a=this.groupSizeField,l=this.elementSpacing,c=this.groupSpacing,d=u(n[s]()),h=0,p=0,f=0,m=0,g=[],v=[],y=0;for(h=0;o>h;h++)t=r[h],t.box||t.reflow(n),e=this.elementSize(t),i.options.wrap&&u(f+l+e[s])>d&&(g.push({groupElements:v,groupSize:p,groupElementsSize:f}),y=oe.max(y,f),m+=c+p,p=0,f=0,v=[]),p=oe.max(p,e[a]),f>0&&(f+=l),f+=e[s],v.push(t);return g.push({groupElements:v,groupSize:p,groupElementsSize:f}),y=oe.max(y,f),m+=p,{groups:g,groupsSize:m,maxGroupElementsSize:y}},elementSize:function(e){return{width:e.box.width(),height:e.box.height()}},createVisual:ie}),F=E.extend({ROWS_SPLIT_REGEX:/\n|\\n/m,init:function(e,t){var i=this;i.content=e,E.fn.init.call(i,t),i._initContainer(),i.reflow(C())},_initContainer:function(){var e,t,i=this,n=i.options,r=(i.content+"").split(i.ROWS_SPLIT_REGEX),o=new P({vertical:!0,align:n.align,wrap:!1}),s=se({},n,{opacity:1,animation:null});for(i.hasBox(),i.container=o,i.append(o),t=0;r.length>t;t++)e=new I(re(r[t]),s),o.append(e)},reflow:function(e){var t,i,n=this,r=n.options,o=r.align,s=r.rotation;n.container.options.align=o,E.fn.reflow.call(n,e),s&&(t=r.margin,i=n.box.unpad(t),n.normalBox=i.clone(),i.rotate(s),i.pad(t),n.align(e,Oe,o),n.align(e,Le,r.vAlign))},createVisual:function(){var e,t=this.options;t.visible&&(this.visual=new Q.drawing.Group({transform:this.rotationTransform(),zIndex:t.zIndex,noclip:t.noclip}),this.hasBox()&&(e=X.Path.fromRect(this.paddingBox.toRect(),this.visualStyle()),this.visual.append(e)))},rotationTransform:function(){var e,t,i,n,r=this.options.rotation;return r?(e=this.normalBox.center(),t=e.x,i=e.y,n=this.box.center(),K.transform().translate(n.x-t,n.y-i).rotate(r,[t,i])):null},rotationMatrix:function(){var e=this,t=e.options,i=e.normalBox,n=i.center(),r=n.x,o=n.y,s=e.box.center(),a=s.x-r,l=s.y-o,c=J.translate(a,l).times(J.rotate(t.rotation,r,o));return c}}),z=M.extend({init:function(e){var t=this;M.fn.init.call(t,e),e=t.options,t.append(new F(e.text,se({},e,{vAlign:e.position})))},options:{color:le,position:He,align:de,margin:i(5),padding:i(5)},reflow:function(e){var t=this;M.fn.reflow.call(t,e),t.box.snapTo(e,Oe)}}),z.buildTitle=function(e,t,i){var n;return"string"==typeof e&&(e={text:e}),e=se({visible:!0},i,e),e&&e.visible&&e.text&&(n=new z(e),t.append(n)),n},H=F.extend({init:function(e,t,i,n,r){var o=this;o.text=t,o.value=e,o.index=i,o.dataItem=n,F.fn.init.call(o,t,r)},click:function(t,i){var n=this;t.trigger(ae,{element:e(i.target),value:n.value,text:n.text,index:n.index,dataItem:n.dataItem,axis:n.parent.options})}}),R=M.extend({init:function(e){var t=this;M.fn.init.call(t,e),t.options.visible||(t.options=se({},t.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),t.options.minorTicks=se({},{color:t.options.line.color,width:t.options.line.width,visible:t.options.minorTickType!=Ae},t.options.minorTicks,{size:t.options.minorTickSize,align:t.options.minorTickType}),t.options.majorTicks=se({},{color:t.options.line.color,width:t.options.line.width,visible:t.options.majorTickType!=Ae},t.options.majorTicks,{size:t.options.majorTickSize,align:t.options.majorTickType}),t.createLabels(),t.createTitle(),t.createNotes()},options:{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:le,visible:!0},title:{visible:!0,position:de},majorTicks:{align:Pe,size:4,skip:0,step:1},minorTicks:{align:Pe,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:Pe,minorTickType:Ae,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:le,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0},createLabels:function(){var e,t,i,n=this,r=n.options,o=r.vertical?ze:de,s=se({},r.labels,{align:o,zIndex:r.zIndex}),a=s.step;if(n.labels=[],s.visible)for(e=n.labelsCount(),i=s.skip;e>i;i+=a)t=n.createAxisLabel(i,s),t&&(n.append(t),n.labels.push(t))},lineBox:function(){var e=this,t=e.options,i=e.box,n=t.vertical,r=e.labels,o=n?we:Ne,s=t.justified,a=t.labels.mirror,l=a?i.x1:i.x2,c=a?i.y2:i.y1,d=0,u=t.line.width;return s&&r.length>1&&(d=r[0].box[o]()/2,u=G(r).box[o]()/2),n?C(l,i.y1+d,l,i.y2-u):C(i.x1+d,c,i.x2-u,c)},createTitle:function(){var e,t=this,i=t.options,n=se({rotation:i.vertical?-90:0,text:"",zIndex:1},i.title);n.visible&&n.text&&(e=new F(n.text,n),t.append(e),t.title=e)},createNotes:function(){var e,t,i,n=this,r=n.options,o=r.notes,s=o.data||[];for(n.notes=[],e=0;s.length>e;e++)t=se({},o,s[e]),t.value=n.parseNoteValue(t.value),i=new N(t.value,t.label.text,null,null,null,t),i.options.visible&&(q(i.options.position)?r.vertical&&!l(i.options.position,[Se,ze])?i.options.position=r.reverse?Se:ze:r.vertical||l(i.options.position,[He,ce])||(i.options.position=r.reverse?ce:He):i.options.position=r.vertical?r.reverse?Se:ze:r.reverse?ce:He,n.append(i),n.notes.push(i))},parseNoteValue:function(e){return e},createVisual:function(){M.fn.createVisual.call(this),this.createPlotBands(),this.createBackground(),this.createLine()},gridLinesVisual:function(){var e=this._gridLines;return e||(e=this._gridLines=new X.Group({zIndex:-2}),this.appendVisual(this._gridLines)),e},createTicks:function(e){function t(t,i,r){var a,c=t.length;if(i.visible)for(a=i.skip;c>a;a+=i.step)q(r)&&a%r===0||(l.tickX=s?o.x2:o.x2-i.size,l.tickY=s?o.y1-i.size:o.y1,l.position=t[a],e.append(n(l,i)))}var i=this,r=i.options,o=i.lineBox(),s=r.labels.mirror,a=r.majorTicks.visible?r.majorUnit:0,l={vertical:r.vertical};t(i.getMajorTickPositions(),r.majorTicks),t(i.getMinorTickPositions(),r.minorTicks,a/r.minorUnit)},createLine:function(){var e,t,i=this,n=i.options,r=n.line,o=i.lineBox();r.width>0&&r.visible&&(e=new X.Path({stroke:{width:r.width,color:r.color,dashType:r.dashType}}),e.moveTo(o.x1,o.y1).lineTo(o.x2,o.y2),n._alignLines&&k(e),t=this._lineGroup=new X.Group,t.append(e),this.visual.append(t),this.createTicks(t))},getActualTickSize:function(){var e=this,t=e.options,i=0;return t.majorTicks.visible&&t.minorTicks.visible?i=oe.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?i=t.majorTicks.size:t.minorTicks.visible&&(i=t.minorTicks.size),i},createBackground:function(){var e=this,t=e.options,i=t.background,n=e.box;i&&(e._backgroundPath=X.Path.fromRect(n.toRect(),{fill:{color:i},stroke:null}),this.visual.append(e._backgroundPath))},createPlotBands:function(){var t,i,n,r,o,s,a=this,l=a.options,c=l.plotBands||[],d=l.vertical,u=a.plotArea;
0!==c.length&&(o=this._plotbandGroup=new X.Group({zIndex:-1}),s=this.range(),e.each(c,function(e,l){var c,h,p;n=Y(l.from,Me),r=Y(l.to,De),c=[],(w(n,s)||w(r,s))&&(d?(t=u.axisX.lineBox(),i=a.getSlot(l.from,l.to,!0)):(t=a.getSlot(l.from,l.to,!0),i=u.axisY.lineBox()),h=new K.Rect([t.x1,i.y1],[t.width(),i.height()]),p=X.Path.fromRect(h,{fill:{color:l.color,opacity:l.opacity},stroke:null}),o.append(p))}),a.appendVisual(o))},createGridLines:function(e){function t(e,t,n){var o,a=e.length;if(t.visible)for(o=t.skip;a>o;o+=t.step)i=u(e[o]),l(i,m)||o%n===0||s&&p===i||(f.position=i,g.append(r(f,t)),m.push(i))}var i,n=this,o=n.options,s=e.options.line.visible,a=o.majorGridLines,c=a.visible?o.majorUnit:0,d=o.vertical,h=e.lineBox(),p=h[d?"y1":"x1"],f={lineStart:h[d?"x1":"y1"],lineEnd:h[d?"x2":"y2"],vertical:d},m=[],g=this.gridLinesVisual();return t(n.getMajorTickPositions(),o.majorGridLines),t(n.getMinorTickPositions(),o.minorGridLines,c/o.minorUnit),g.children},reflow:function(e){var t,i,n=this,r=n.options,o=r.vertical,s=n.labels,a=s.length,l=n.getActualTickSize()+r.margin,c=0,d=0,u=n.title;for(i=0;a>i;i++)t=s[i],c=oe.max(c,t.box.height()),d=oe.max(d,t.box.width());u&&(o?d+=u.box.width():c+=u.box.height()),n.box=o?C(e.x1,e.y1,e.x1+d+l,e.y2):C(e.x1,e.y1,e.x2,e.y1+c+l),n.arrangeTitle(),n.arrangeLabels(),n.arrangeNotes()},arrangeLabels:function(){var e,t,i,n,r,o,s,a,l,c,d,u=this,h=u.options,p=u.labels,f=!h.justified,m=h.vertical,g=u.lineBox(),v=h.labels.mirror,y=u.getMajorTickPositions(),_=u.getActualTickSize()+h.margin;for(i=0;p.length>i;i++)n=p[i],r=n.index,o=m?n.box.height():n.box.width(),s=y[r]-o/2,m?(f&&(a=y[r],l=y[r+1],c=a+(l-a)/2,s=c-o/2),d=g.x2,v?d+=_:d-=_+n.box.width(),e=n.box.move(d,s)):(f?(a=y[r],l=y[r+1]):(a=s,l=s+o),t=g.y1,v?t-=_+n.box.height():t+=_,e=C(a,t,l,t+n.box.height())),n.reflow(e)},arrangeTitle:function(){var e=this,t=e.options,i=t.labels.mirror,n=t.vertical,r=e.title;r&&(n?(r.options.align=i?ze:Se,r.options.vAlign=r.options.position):(r.options.align=r.options.position,r.options.vAlign=i?He:ce),r.reflow(e.box))},arrangeNotes:function(){var e,t,i,n,r=this;for(e=0;r.notes.length>e;e++)t=r.notes[e],n=t.options.value,q(n)?(r.shouldRenderNote(n)?t.show():t.hide(),i=r.getSlot(n)):t.hide(),t.reflow(i||r.lineBox())},alignTo:function(e){var t=this,i=e.lineBox(),n=t.options.vertical,r=n?Le:Oe;t.box.snapTo(i,r),n?t.box.shrink(0,t.lineBox().height()-i.height()):t.box.shrink(t.lineBox().width()-i.width(),0),t.box[r+1]-=t.lineBox()[r+1]-i[r+1],t.box[r+2]-=t.lineBox()[r+2]-i[r+2]},axisLabelText:function(e,t,i){var n,r=e;return i.template?(n=te(i.template),r=n({value:e,dataItem:t,format:i.format,culture:i.culture})):i.format&&(r=i.format.match(be)?V.format(i.format,e):V.toString(e,i.format,i.culture)),r}}),N=E.extend({init:function(e,t,i,n,r,o){var s=this;E.fn.init.call(s,o),s.value=e,s.text=t,s.dataItem=i,s.category=n,s.series=r,s.render()},options:{icon:{visible:!0,type:pe},label:{position:Ce,visible:!0,align:de,vAlign:de},line:{visible:!0},visible:!0,position:He,zIndex:2},hide:function(){this.options.visible=!1},show:function(){this.options.visible=!0},render:function(){var e,t,i,n,r=this,o=r.options,s=o.label,a=r.text,l=o.icon,c=l.size,d=C();o.visible&&(q(s)&&s.visible&&(s.template?(n=te(s.template),a=n({dataItem:r.dataItem,category:r.category,value:r.value,text:a,series:r.series})):s.format&&(a=g(s.format,a)),r.label=new F(a,se({},s)),r.append(r.label),s.position===Ce&&(l.type===pe?c=oe.max(r.label.box.width(),r.label.box.height()):(t=r.label.box.width(),i=r.label.box.height()),d.wrap(r.label.box))),l.width=t||c,l.height=i||c,e=new $(se({},l)),r.marker=e,r.append(e),e.reflow(C()),r.wrapperBox=d.wrap(e.box))},reflow:function(e){var t,i,n,r=this,o=r.options,s=e.center(),a=r.wrapperBox,c=o.line.length,d=o.position,u=r.label,h=r.marker;o.visible&&(l(d,[Se,ze])?d===Se?(n=a.alignTo(e,d).translate(-c,e.center().y-a.center().y),o.line.visible&&(t=[oe.floor(e.x1),s.y],r.linePoints=[t,[oe.floor(n.x2),s.y]],i=n.clone().wrapPoint(t))):(n=a.alignTo(e,d).translate(c,e.center().y-a.center().y),o.line.visible&&(t=[oe.floor(e.x2),s.y],r.linePoints=[t,[oe.floor(n.x1),s.y]],i=n.clone().wrapPoint(t))):d===ce?(n=a.alignTo(e,d).translate(e.center().x-a.center().x,c),o.line.visible&&(t=[oe.floor(s.x),oe.floor(e.y2)],r.linePoints=[t,[oe.floor(s.x),oe.floor(n.y1)]],i=n.clone().wrapPoint(t))):(n=a.alignTo(e,d).translate(e.center().x-a.center().x,-c),o.line.visible&&(t=[oe.floor(s.x),oe.floor(e.y1)],r.linePoints=[t,[oe.floor(s.x),oe.floor(n.y2)]],i=n.clone().wrapPoint(t))),h&&h.reflow(n),u&&(u.reflow(n),h&&(o.label.position===Pe&&u.box.alignTo(h.box,d),u.reflow(u.box))),r.contentBox=n,r.box=i||n)},createVisual:function(){E.fn.createVisual.call(this),this.options.visible&&this.createLine()},createLine:function(){var e=this.options.line,t=X.Path.fromPoints(this.linePoints,{stroke:{color:e.color,width:e.width,dashType:e.dashType}});this.visual.append(t)},click:function(e,t){var i=this.eventArgs(t);e.trigger(Ee,i)||t.preventDefault()},hover:function(e,t){var i=this.eventArgs(t);e.trigger(Ie,i)||t.preventDefault()},leave:function(e){e._unsetActivePoint()},eventArgs:function(t){var i=this,n=i.options;return{element:e(t.target),text:q(n.label)?n.label.text:"",dataItem:i.dataItem,series:i.series,value:i.value,category:i.category}}}),$=E.extend({options:{type:pe,align:de,vAlign:de},getElement:function(){var e,t,i=this,n=i.options,r=n.type,o=n.rotation,s=i.paddingBox,a=s.center(),l=s.width()/2;if(n.visible&&i.hasBox())return t=i.visualStyle(),r===pe?e=new X.Circle(new K.Circle([u(s.x1+l,ue),u(s.y1+s.height()/2,ue)],l),t):r===Re?e=X.Path.fromPoints([[s.x1+l,s.y1],[s.x1,s.y2],[s.x2,s.y2]],t).close():r===fe?(e=new X.MultiPath(t),e.moveTo(s.x1,s.y1).lineTo(s.x2,s.y2),e.moveTo(s.x1,s.y2).lineTo(s.x2,s.y1)):e=X.Path.fromRect(s.toRect(),t),o&&e.transform(K.transform().rotate(-o,[a.x,a.y])),e.options.zIndex=this.options.zIndex,e},createVisual:function(){this.visual=this.getElement()}}),O=R.extend({init:function(e,t,i){var n=this,r=n.initDefaults(e,t,i);R.fn.init.call(n,r)},startValue:function(){return 0},options:{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:le},zIndex:1},initDefaults:function(e,t,i){var n,r=this,s=i.narrowRange,a=r.autoAxisMin(e,t,s),l=r.autoAxisMax(e,t,s),u=o(a,l),h={majorUnit:u};return i.roundToMajorUnit!==!1&&(0>a&&p(a,u,1/3)&&(a-=u),l>0&&p(l,u,1/3)&&(l+=u)),h.min=d(a,u),h.max=c(l,u),i&&(n=q(i.min)||q(i.max),n&&i.min===i.max&&(i.min>0?i.min=0:i.max=1),i.majorUnit?(h.min=d(h.min,i.majorUnit),h.max=c(h.max,i.majorUnit)):n&&(i=se(h,i),h.majorUnit=o(i.min,i.max))),h.minorUnit=(i.majorUnit||h.majorUnit)/5,se(h,i)},range:function(){var e=this.options;return{min:e.min,max:e.max}},autoAxisMax:function(e,t,i){var n,r;if(!e&&!t)return 1;if(0>=e&&0>=t){if(t=e==t?0:t,r=oe.abs((t-e)/t),!i&&r>Be)return 0;n=oe.min(0,t-(e-t)/2)}else e=e==t?0:e,n=t;return n},autoAxisMin:function(e,t,i){var n,r;if(!e&&!t)return 0;if(e>=0&&t>=0){if(e=e==t?0:e,r=(t-e)/t,!i&&r>Be)return 0;n=oe.max(0,e-(t-e)/2)}else t=e==t?0:t,n=e;return n},getDivisions:function(e){if(0===e)return 1;var t=this.options,i=t.max-t.min;return oe.floor(u(i/e,ue))+1},getTickPositions:function(e,t){var i,n=this,r=n.options,o=r.vertical,s=r.reverse,a=n.lineBox(),l=o?a.height():a.width(),c=r.max-r.min,d=l/c,h=e*d,p=0,f=n.getDivisions(e),m=(o?-1:1)*(s?-1:1),g=1===m?1:2,v=a[(o?Le:Oe)+g],y=[];for(t&&(p=t/e),i=0;f>i;i++)i%p!==0&&y.push(u(v,ue)),v+=h*m;return y},getMajorTickPositions:function(){var e=this;return e.getTickPositions(e.options.majorUnit)},getMinorTickPositions:function(){var e=this;return e.getTickPositions(e.options.minorUnit)},getSlot:function(e,t,i){var n,r,o=this,s=o.options,a=s.reverse,l=s.vertical,c=l?Le:Oe,d=o.lineBox(),u=d[c+(a?2:1)],h=l?d.height():d.width(),p=a?-1:1,f=p*(h/(s.max-s.min)),m=new C(d.x1,d.y1,d.x1,d.y1);return q(e)||(e=t||0),q(t)||(t=e||0),i&&(e=oe.max(oe.min(e,s.max),s.min),t=oe.max(oe.min(t,s.max),s.min)),l?(n=s.max-oe.max(e,t),r=s.max-oe.min(e,t)):(n=oe.min(e,t)-s.min,r=oe.max(e,t)-s.min),m[c+1]=oe.max(oe.min(u+f*(a?r:n),ke),-ke),m[c+2]=oe.max(oe.min(u+f*(a?n:r),ke),-ke),m},getValue:function(e){var t,i=this,n=i.options,r=n.reverse,o=n.vertical,s=1*n.max,a=1*n.min,l=o?Le:Oe,c=i.lineBox(),d=c[l+(r?2:1)],h=o?c.height():c.width(),p=r?-1:1,f=p*(e[l]-d),m=(s-a)/h,g=f*m;return 0>f||f>h?null:(t=o?s-g:a+g,u(t,ve))},translateRange:function(e){var t=this,i=t.options,n=t.lineBox(),r=i.vertical,o=i.reverse,s=r?n.height():n.width(),a=i.max-i.min,l=s/a,c=u(e/l,ve);return!r&&!o||r&&o||(c=-c),{min:i.min+c,max:i.max+c}},scaleRange:function(e){var t=this,i=t.options,n=-e*i.majorUnit;return{min:i.min-n,max:i.max+n}},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t){var i=this,n=i.options,r=u(n.min+e*n.majorUnit,ve),o=i.axisLabelText(r,null,t);return new H(r,o,e,null,t)},shouldRenderNote:function(e){var t=this.range();return e>=t.min&&t.max>=e}}),L=R.extend({init:function(e,t,i){this.options=this._initOptions(e,t,i),R.fn.init.call(this,i)},startValue:function(){return this.options.min},options:{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:le},zIndex:1},getSlot:function(e,i,n){var r,o,s=this,a=s.options,l=a.reverse,c=a.vertical,d=c?Le:Oe,u=s.lineBox(),p=u[d+(l?2:1)],f=c?u.height():u.width(),m=l?-1:1,g=a.majorUnit,v=s.logMin,y=s.logMax,_=m*(f/(y-v)),b=new C(u.x1,u.y1,u.x1,u.y1);return q(e)||(e=i||1),q(i)||(i=e||1),0>=e||0>=i?t:(n&&(e=oe.max(oe.min(e,a.max),a.min),i=oe.max(oe.min(i,a.max),a.min)),e=h(e,g),i=h(i,g),c?(r=y-oe.max(e,i),o=y-oe.min(e,i)):(r=oe.min(e,i)-v,o=oe.max(e,i)-v),b[d+1]=p+_*(l?o:r),b[d+2]=p+_*(l?r:o),b)},getValue:function(e){var t,i=this,n=i.options,r=n.reverse,o=n.vertical,s=i.lineBox(),a=n.majorUnit,l=i.logMin,c=i.logMax,d=o===r?1:-1,h=1===d?1:2,p=o?s.height():s.width(),f=(c-l)/p,m=o?Le:Oe,g=s[m+h],v=d*(e[m]-g),y=v*f;return 0>v||v>p?null:(t=l+y,u(oe.pow(a,t),ve))},range:function(){var e=this.options;return{min:e.min,max:e.max}},scaleRange:function(e){var t=this,i=t.options,n=i.majorUnit,r=-e;return{min:oe.pow(n,t.logMin-r),max:oe.pow(n,t.logMax+r)}},translateRange:function(e){var t=this,i=t.options,n=i.majorUnit,r=t.lineBox(),o=i.vertical,s=i.reverse,a=o?r.height():r.width(),l=a/(t.logMax-t.logMin),c=u(e/l,ve);return!o&&!s||o&&s||(c=-c),{min:oe.pow(n,t.logMin+c),max:oe.pow(n,t.logMax+c)}},labelsCount:function(){var e=this,t=oe.floor(e.logMax),i=oe.floor(t-e.logMin)+1;return i},getMajorTickPositions:function(){var e=this,t=[];return e.traverseMajorTicksPositions(function(e){t.push(e)},{step:1,skip:0}),t},createTicks:function(e){function t(t,i){d.tickX=a?s.x2:s.x2-i.size,d.tickY=a?s.y1-i.size:s.y1,d.position=t,e.append(n(d,i))}var i=this,r=[],o=i.options,s=i.lineBox(),a=o.labels.mirror,l=o.majorTicks,c=o.minorTicks,d={vertical:o.vertical};return l.visible&&i.traverseMajorTicksPositions(t,l),c.visible&&i.traverseMinorTicksPositions(t,c),r},createGridLines:function(e){function t(e,t){l(e,u)||(d.position=e,h.append(r(d,t)),u.push(e))}var i=this,n=i.options,o=n.majorGridLines,s=n.minorGridLines,a=n.vertical,c=e.lineBox(),d={lineStart:c[a?"x1":"y1"],lineEnd:c[a?"x2":"y2"],vertical:a},u=[],h=this.gridLinesVisual();return o.visible&&i.traverseMajorTicksPositions(t,o),s.visible&&i.traverseMinorTicksPositions(t,s),h.children},traverseMajorTicksPositions:function(e,t){var i,n,r=this,o=r._lineOptions(),s=o.lineStart,a=o.step,l=r.logMin,c=r.logMax;for(i=oe.ceil(l)+t.skip;c>=i;i+=t.step)n=u(s+a*(i-l),ve),e(n,t)},traverseMinorTicksPositions:function(e,t){var i,n,r,o,s,a=this,l=a.options,c=a._lineOptions(),d=c.lineStart,p=c.step,f=l.majorUnit,m=a.logMin,g=a.logMax,v=oe.floor(m),y=l.max,_=l.min,b=l.minorUnit;for(i=v;g>i;i++)for(o=a._minorIntervalOptions(i),s=t.skip;b>s&&(n=o.value+s*o.minorStep,!(n>y));s+=t.step)n>=_&&(r=u(d+p*(h(n,f)-m),ve),e(r,t))},createAxisLabel:function(e,t){var i=this,n=i.options,r=oe.ceil(i.logMin+e),o=Math.pow(n.majorUnit,r),s=i.axisLabelText(o,null,t);return new H(o,s,e,null,t)},shouldRenderNote:function(e){var t=this.range();return e>=t.min&&t.max>=e},_throwNegativeValuesError:function(){throw Error("Non positive values cannot be used for a logarithmic axis")},_initOptions:function(e,t,i){var n,r=this,o=se({},r.options,{min:e,max:t},i),s=o.min,a=o.max,l=o.majorUnit;return 0>=o.axisCrossingValue&&r._throwNegativeValuesError(),q(i.max)?0>=i.max&&r._throwNegativeValuesError():(n=u(h(a,l),ve)%1,a=0>=a?l:0!==n&&(.3>n||n>.9)?oe.pow(l,h(a,l)+.2):oe.pow(l,oe.ceil(h(a,l)))),q(i.min)?0>=i.min&&r._throwNegativeValuesError():0>=s?s=1>=a?oe.pow(l,-2):1:i.narrowRange||(s=oe.pow(l,oe.floor(h(s,l)))),r.logMin=u(h(s,l),ve),r.logMax=u(h(a,l),ve),o.max=a,o.min=s,o.minorUnit=i.minorUnit||u(l-1,ve),o},_minorIntervalOptions:function(e){var t=this.options.majorUnit,i=oe.pow(t,e),n=oe.pow(t,e+1),r=n-i,o=r/this.options.minorUnit;return{value:i,minorStep:o}},_lineOptions:function(){var e=this,t=e.options,i=t.reverse,n=t.vertical,r=n?Le:Oe,o=e.lineBox(),s=n===i?1:-1,a=1===s?1:2,l=n?o.height():o.width(),c=s*(l/(e.logMax-e.logMin)),d=o[r+a];return{step:c,lineStart:d,lineBox:o}}}),Q.Gradients={glass:{type:Te,rotation:0,stops:[{offset:0,color:$e,opacity:0},{offset:.25,color:$e,opacity:.3},{offset:1,color:$e,opacity:0}]},sharpBevel:{type:Fe,stops:[{offset:0,color:$e,opacity:.55},{offset:.65,color:$e,opacity:0},{offset:.95,color:$e,opacity:.25}]},roundedBevel:{type:Fe,stops:[{offset:.33,color:$e,opacity:.06},{offset:.83,color:$e,opacity:.2},{offset:.95,color:$e,opacity:0}]},roundedGlass:{type:Fe,supportVML:!1,stops:[{offset:0,color:$e,opacity:0},{offset:.5,color:$e,opacity:.3},{offset:.99,color:$e,opacity:0}]},sharpGlass:{type:Fe,supportVML:!1,stops:[{offset:0,color:$e,opacity:.2},{offset:.15,color:$e,opacity:.15},{offset:.17,color:$e,opacity:.35},{offset:.85,color:$e,opacity:.05},{offset:.87,color:$e,opacity:.15},{offset:.99,color:$e,opacity:0}]}},B={extend:function(e,t){if(!e.exportVisual)throw Error("Mixin target has no exportVisual method defined.");e.exportSVG=this.exportSVG,e.exportImage=this.exportImage,e.exportPDF=this.exportPDF,t||(e.svg=this.svg,e.imageDataURL=this.imageDataURL)},exportSVG:function(e){return X.exportSVG(this.exportVisual(),e)},exportImage:function(e){return X.exportImage(this.exportVisual(),e)},exportPDF:function(e){return X.exportPDF(this.exportVisual(),e)},svg:function(){if(X.svg.Surface)return X.svg._exportGroup(this.exportVisual());throw Error("SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface")},imageDataURL:function(){var t,i,n;if(!V.support.canvas)return null;if(X.canvas.Surface)return t=e("<div />").css({display:"none",width:this.element.width(),height:this.element.height()}).appendTo(document.body),i=new X.canvas.Surface(t),i.draw(this.exportVisual()),n=i._rootElement.toDataURL(),i.destroy(),t.remove(),n;throw Error("Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface")}},U=function(e){this.closed=e},U.prototype=U.fn={WEIGHT:.333,EXTREMUM_ALLOWED_DEVIATION:.01,process:function(e){var t,i,n,r,o,s,a,l,c,d,u=this,h=u.closed,p=e.slice(0),f=p.length,m=[];if(f>2&&(u.removeDuplicates(0,p),f=p.length),2>f||2==f&&p[0].equals(p[1]))return m;for(t=p[0],i=p[1],n=p[2],m.push(new X.Segment(t));t.equals(p[f-1]);)h=!0,p.pop(),f--;if(2==f)return a=u.tangent(t,i,Oe,Le),G(m).controlOut(u.firstControlPoint(a,t,i,Oe,Le)),m.push(new X.Segment(i,u.secondControlPoint(a,t,i,Oe,Le))),m;for(h?(t=p[f-1],i=p[0],n=p[1],r=u.controlPoints(t,i,n),o=r[1],s=r[0]):(a=u.tangent(t,i,Oe,Le),o=u.firstControlPoint(a,t,i,Oe,Le)),l=o,c=0;f-3>=c;c++)u.removeDuplicates(c,p),f=p.length,f>=c+3&&(t=p[c],i=p[c+1],n=p[c+2],r=u.controlPoints(t,i,n),G(m).controlOut(l),l=r[1],d=r[0],m.push(new X.Segment(i,d)));return h?(t=p[f-2],i=p[f-1],n=p[0],r=u.controlPoints(t,i,n),G(m).controlOut(l),m.push(new X.Segment(i,r[0])),G(m).controlOut(r[1]),m.push(new X.Segment(n,s))):(a=u.tangent(i,n,Oe,Le),G(m).controlOut(l),m.push(new X.Segment(n,u.secondControlPoint(a,i,n,Oe,Le)))),m},removeDuplicates:function(e,t){for(;t[e].equals(t[e+1])||t[e+1].equals(t[e+2]);)t.splice(e+1,1)},invertAxis:function(e,t,i){var n,r,o=this,s=!1;return e.x===t.x?s=!0:t.x===i.x?(i.y>t.y&&t.y>=e.y||t.y>i.y&&e.y>=t.y)&&(s=!0):(n=o.lineFunction(e,t),r=o.calculateFunction(n,i.x),t.y>=e.y&&r>=i.y||e.y>=t.y&&i.y>=r||(s=!0)),s},isLine:function(e,t,i){var n=this,r=n.lineFunction(e,t),o=n.calculateFunction(r,i.x);return e.x==t.x&&t.x==i.x||u(o,1)===u(i.y,1)},lineFunction:function(e,t){var i=(t.y-e.y)/(t.x-e.x),n=e.y-i*e.x;return[n,i]},controlPoints:function(e,t,i){var n,r,o,s,a,l,c=this,d=Oe,u=Le,h=!1,p=!1,f=c.EXTREMUM_ALLOWED_DEVIATION;return c.isLine(e,t,i)?n=c.tangent(e,t,Oe,Le):(r={x:c.isMonotonicByField(e,t,i,Oe),y:c.isMonotonicByField(e,t,i,Le)},r.x&&r.y?(n=c.tangent(e,i,Oe,Le),h=!0):(c.invertAxis(e,t,i)&&(d=Le,u=Oe),r[d]?n=0:(a=e[u]>i[u]&&t[u]>=e[u]||i[u]>e[u]&&e[u]>=t[u]?c.sign((i[u]-e[u])*(t[d]-e[d])):-c.sign((i[d]-e[d])*(t[u]-e[u])),n=f*a,p=!0))),s=c.secondControlPoint(n,e,t,d,u),p&&(l=d,d=u,u=l),o=c.firstControlPoint(n,t,i,d,u),h&&(c.restrictControlPoint(e,t,s,n),c.restrictControlPoint(t,i,o,n)),[s,o]},sign:function(e){return 0>=e?-1:1},restrictControlPoint:function(e,t,i,n){t.y>e.y?i.y>t.y?(i.x=e.x+(t.y-e.y)/n,i.y=t.y):e.y>i.y&&(i.x=t.x-(t.y-e.y)/n,i.y=e.y):t.y>i.y?(i.x=e.x-(e.y-t.y)/n,i.y=t.y):i.y>e.y&&(i.x=t.x+(e.y-t.y)/n,i.y=e.y)},tangent:function(e,t,i,n){var r,o=t[i]-e[i],s=t[n]-e[n];return r=0===o?0:s/o},isMonotonicByField:function(e,t,i,n){return i[n]>t[n]&&t[n]>e[n]||t[n]>i[n]&&e[n]>t[n]},firstControlPoint:function(e,t,i,n,r){var o=this,s=t[n],a=i[n],l=(a-s)*o.WEIGHT;return o.point(s+l,t[r]+l*e,n,r)},secondControlPoint:function(e,t,i,n,r){var o=this,s=t[n],a=i[n],l=(a-s)*o.WEIGHT;return o.point(a-l,i[r]-l*e,n,r)},point:function(e,t,i,n){var r=new K.Point;return r[i]=e,r[n]=t,r},calculateFunction:function(e,t){var i,n=0,r=e.length;for(i=0;r>i;i++)n+=Math.pow(t,i)*e[i];return n}},b._element=document.createElement("span"),se(V.dataviz,{AXIS_LABEL_CLICK:ae,COORD_PRECISION:ue,DEFAULT_PRECISION:ve,DEFAULT_WIDTH:ye,DEFAULT_HEIGHT:ge,DEFAULT_FONT:me,INITIAL_ANIMATION_DURATION:xe,NOTE_CLICK:Ee,NOTE_HOVER:Ie,CLIP:he,Axis:R,AxisLabel:H,Box2D:C,BoxElement:E,ChartElement:M,CurveProcessor:U,ExportMixin:B,FloatElement:P,LogarithmicAxis:L,Note:N,NumericAxis:O,Point2D:Ue,Ring:S,RootElement:A,Sector:T,ShapeBuilder:D,ShapeElement:$,Text:I,TextBox:F,Title:z,alignPathToPixel:k,autoFormat:g,autoMajorUnit:o,boxDiff:a,dateComparer:y,decodeEntities:b,getSpacing:i,inArray:l,interpolateValue:f,mwDelta:_,rotatePoint:s,round:u,ceil:c,floor:d})}(window.kendo.jQuery),function(){var e=window.kendo,t=e.dataviz.ui,i=e.deepExtend,n=1.5,r=.4,o="#000",s="Arial,Helvetica,sans-serif",a="11px "+s,l="12px "+s,c="16px "+s,d="#fff",u={title:{font:c},legend:{labels:{font:l}},seriesDefaults:{visible:!0,labels:{font:a},donut:{margin:1},line:{width:2},vericalLine:{width:2},scatterLine:{width:1},area:{opacity:.4,markers:{visible:!1,size:6},highlight:{markers:{border:{color:"#fff",opacity:1,width:1}}},line:{opacity:1,width:0}},verticalArea:{opacity:.4,markers:{visible:!1,size:6},line:{opacity:1,width:0}},radarLine:{width:2,markers:{visible:!1}},radarArea:{opacity:.5,markers:{visible:!1,size:6},line:{opacity:1,width:0}},candlestick:{line:{width:1,color:o},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:d,highlight:{line:{width:2},border:{width:2,opacity:1}}},ohlc:{line:{width:1},gap:1,spacing:.3,highlight:{line:{width:3,opacity:1}}},bubble:{opacity:.6,border:{width:0},labels:{background:"transparent"}},bar:{gap:n,spacing:r},column:{gap:n,spacing:r},rangeColumn:{gap:n,spacing:r},rangeBar:{gap:n,spacing:r},waterfall:{gap:.5,spacing:r,line:{width:1,color:o}},horizontalWaterfall:{gap:.5,spacing:r,line:{width:1,color:o}},bullet:{gap:n,spacing:r,target:{color:"#ff0000"}},verticalBullet:{gap:n,spacing:r,target:{color:"#ff0000"}},boxPlot:{outliersField:"",meanField:"",whiskers:{width:1,color:o},mean:{width:1,color:o},median:{width:1,color:o},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:d,highlight:{whiskers:{width:2},border:{width:2,opacity:1}}},funnel:{labels:{color:"",background:""}},notes:{icon:{size:7,border:{width:1}},label:{padding:3,font:l},line:{length:10,width:1},visible:!0}},categoryAxis:{majorGridLines:{visible:!0}},axisDefaults:{labels:{font:l},title:{font:c,margin:5},crosshair:{tooltip:{font:l}},notes:{icon:{size:7,border:{width:1}},label:{padding:3,font:l},line:{length:10,width:1},visible:!0}},tooltip:{font:l},navigator:{pane:{height:90,margin:{top:10}}}},h={scale:{labels:{font:l}}},p={shapeDefaults:{hover:{opacity:.2},stroke:{width:0}},editable:{resize:{handles:{width:7,height:7}}},selectable:{stroke:{width:1,dashType:"dot"}},connectionDefaults:{stroke:{width:2},selection:{handles:{width:8,height:8}},editable:{tools:["edit","delete"]}}},f=t.themes,m=t.registerTheme=function(e,t){var n,r={};r.chart=i({},u,t.chart),r.gauge=i({},h,t.gauge),r.diagram=i({},p,t.diagram),r.treeMap=i({},t.treeMap),n=r.chart.seriesDefaults,n.verticalLine=i({},n.line),n.verticalArea=i({},n.area),n.polarArea=i({},n.radarArea),n.polarLine=i({},n.radarLine),f[e]=r};m("black",{chart:{title:{color:d},legend:{labels:{color:d},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:d},errorBars:{color:d},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:d},line:{color:"#8e8e8e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#3d3d3d"}},scatter:{markers:{background:"#3d3d3d"}},scatterLine:{markers:{background:"#3d3d3d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},candlestick:{downColor:"#555",line:{color:d},border:{_brightness:1.5,opacity:1},highlight:{border:{color:d,opacity:.2}}},ohlc:{line:{color:d}}},chartArea:{background:"#3d3d3d"},seriesColors:["#0081da","#3aafff","#99c900","#ffeb3d","#b20753","#ff4195"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:d},majorGridLines:{color:"#545454"},minorGridLines:{color:"#454545"},title:{color:d},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:d},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#0070e4"},scale:{rangePlaceholderColor:"#1d1d1d",labels:{color:d},minorTicks:{color:d},majorTicks:{color:d},line:{color:d}}},diagram:{shapeDefaults:{fill:{color:"#0066cc"},connectorDefaults:{fill:{color:d},stroke:{color:"#384049"},hover:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}},content:{color:d}},editable:{resize:{handles:{fill:{color:"#3d3d3d"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:d}}}},rotate:{thumb:{stroke:{color:d},fill:{color:d}}}},selectable:{stroke:{color:d}},connectionDefaults:{stroke:{color:d},content:{color:d},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0081da","#314b5c"],["#3aafff","#3c5464"],["#99c900","#4f5931"],["#ffeb3d","#64603d"],["#b20753","#543241"],["#ff4195","#643e4f"]]}}),m("blueopal",{chart:{title:{color:"#293135"},legend:{labels:{color:"#293135"},inactiveItems:{labels:{color:"#27A5BA"},markers:{color:"#27A5BA"}}},seriesDefaults:{labels:{color:o,background:d,opacity:.5},errorBars:{color:"#293135"},candlestick:{downColor:"#c4d0d5",line:{color:"#9aabb2"}},waterfall:{line:{color:"#9aabb2"}},horizontalWaterfall:{line:{color:"#9aabb2"}},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}},seriesColors:["#0069a5","#0098ee","#7bd2f6","#ffb800","#ff8517","#e34a00"],axisDefaults:{line:{color:"#9aabb2"},labels:{color:"#293135"},majorGridLines:{color:"#c4d0d5"},minorGridLines:{color:"#edf1f2"},title:{color:"#293135"},crosshair:{color:"#9aabb2"},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}}},gauge:{pointer:{color:"#005c83"},scale:{rangePlaceholderColor:"#daecf4",labels:{color:"#293135"},minorTicks:{color:"#293135"},majorTicks:{color:"#293135"},line:{color:"#293135"}}},diagram:{shapeDefaults:{fill:{color:"#7ec6e3"},connectorDefaults:{fill:{color:"#003f59"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#003f59"}}},content:{color:"#293135"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#003f59"},hover:{fill:{color:"#003f59"},stroke:{color:"#003f59"}}}},rotate:{thumb:{stroke:{color:"#003f59"},fill:{color:"#003f59"}}}},selectable:{stroke:{color:"#003f59"}},connectionDefaults:{stroke:{color:"#003f59"},content:{color:"#293135"},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0069a5","#bad7e7"],["#0098ee","#b9e0f5"],["#7bd2f6","#ceeaf6"],["#ffb800","#e6e3c4"],["#ff8517","#e4d8c8"],["#e34a00","#ddccc2"]]}}),m("highcontrast",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#66465B"},markers:{color:"#66465B"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}},pie:{overlay:{gradient:"sharpGlass"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#2c232b"}},scatter:{markers:{background:"#2c232b"}},scatterLine:{markers:{background:"#2c232b"}},area:{opacity:.5},waterfall:{line:{color:"#ffffff"}},horizontalWaterfall:{line:{color:"#ffffff"}},candlestick:{downColor:"#664e62",line:{color:"#ffffff"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#ffffff",opacity:1}}},ohlc:{line:{color:"#ffffff"}}},chartArea:{background:"#2c232b"},seriesColors:["#a7008f","#ffb800","#3aafff","#99c900","#b20753","#ff4195"],axisDefaults:{line:{color:"#ffffff"},labels:{color:"#ffffff"},majorGridLines:{color:"#664e62"},minorGridLines:{color:"#4f394b"},title:{color:"#ffffff"},crosshair:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}}}},gauge:{pointer:{color:"#a7008f"},scale:{rangePlaceholderColor:"#2c232b",labels:{color:"#ffffff"},minorTicks:{color:"#2c232b"},majorTicks:{color:"#664e62"},line:{color:"#ffffff"}}},diagram:{shapeDefaults:{fill:{color:"#a7018f"},connectorDefaults:{fill:{color:d},stroke:{color:"#2c232b"},hover:{fill:{color:"#2c232b"},stroke:{color:d}}},content:{color:d}},editable:{resize:{handles:{fill:{color:"#2c232b"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:d}}}},rotate:{thumb:{stroke:{color:d},fill:{color:d}}}},selectable:{stroke:{color:d}},connectionDefaults:{stroke:{color:d},content:{color:d},selection:{handles:{fill:{color:"#2c232b"},stroke:{color:d}}}}},treeMap:{colors:[["#a7008f","#451c3f"],["#ffb800","#564122"],["#3aafff","#2f3f55"],["#99c900","#424422"],["#b20753","#471d33"],["#ff4195","#562940"]]}}),m("default",{chart:{title:{color:"#8e8e8e"},legend:{labels:{color:"#232323"},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:o,background:d,opacity:.5},errorBars:{color:"#232323"},candlestick:{downColor:"#dedede",line:{color:"#8d8d8d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}},seriesColors:["#ff6800","#a0a700","#ff8d00","#678900","#ffb53c","#396000"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:"#232323"},minorGridLines:{color:"#f0f0f0"},majorGridLines:{color:"#dfdfdf"},title:{color:"#232323"},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#ea7001"},scale:{rangePlaceholderColor:"#dedede",labels:{color:"#2e2e2e"},minorTicks:{color:"#2e2e2e"},majorTicks:{color:"#2e2e2e"},line:{color:"#2e2e2e"}}},diagram:{shapeDefaults:{fill:{color:"#e15613"},connectorDefaults:{fill:{color:"#282828"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#282828"}}},content:{color:"#2e2e2e"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#282828"},hover:{fill:{color:"#282828"},stroke:{color:"#282828"}}}},rotate:{thumb:{stroke:{color:"#282828"},fill:{color:"#282828"}}}},selectable:{stroke:{color:"#a7018f"}},connectionDefaults:{stroke:{color:"#282828"},content:{color:"#2e2e2e"},selection:{handles:{fill:{color:d},stroke:{color:"#282828"}}}}},treeMap:{colors:[["#ff6800","#edcfba"],["#a0a700","#dadcba"],["#ff8d00","#edd7ba"],["#678900","#cfd6ba"],["#ffb53c","#eddfc6"],["#396000","#c6ceba"]]}}),m("silver",{chart:{title:{color:"#4e5968"},legend:{labels:{color:"#4e5968"},inactiveItems:{labels:{color:"#B1BCC8"},markers:{color:"#B1BCC8"}}},seriesDefaults:{labels:{color:"#293135",background:"#eaeaec",opacity:.5},errorBars:{color:"#4e5968"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}},line:{markers:{background:"#eaeaec"}},scatter:{markers:{background:"#eaeaec"}},scatterLine:{markers:{background:"#eaeaec"}},pie:{connectors:{color:"#A6B1C0"}},donut:{connectors:{color:"#A6B1C0"}},waterfall:{line:{color:"#a6b1c0"}},horizontalWaterfall:{line:{color:"#a6b1c0"}},candlestick:{downColor:"#a6afbe"}},chartArea:{background:"#eaeaec"},seriesColors:["#007bc3","#76b800","#ffae00","#ef4c00","#a419b7","#430B62"],axisDefaults:{line:{color:"#a6b1c0"},labels:{color:"#4e5968"},majorGridLines:{color:"#dcdcdf"},minorGridLines:{color:"#eeeeef"},title:{color:"#4e5968"},crosshair:{color:"#a6b1c0"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}}}},gauge:{pointer:{color:"#0879c0"},scale:{rangePlaceholderColor:"#f3f3f4",labels:{color:"#515967"},minorTicks:{color:"#515967"},majorTicks:{color:"#515967"},line:{color:"#515967"}}},diagram:{shapeDefaults:{fill:{color:"#1c82c2"},connectorDefaults:{fill:{color:"#515967"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#282828"}}},content:{color:"#515967"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#515967"},hover:{fill:{color:"#515967"},stroke:{color:"#515967"}}}},rotate:{thumb:{stroke:{color:"#515967"},fill:{color:"#515967"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#515967"},content:{color:"#515967"},selection:{handles:{fill:{color:d},stroke:{color:"#515967"}}}}},treeMap:{colors:[["#007bc3","#c2dbea"],["#76b800","#dae7c3"],["#ffae00","#f5e5c3"],["#ef4c00","#f2d2c3"],["#a419b7","#e3c7e8"],["#430b62","#d0c5d7"]]}}),m("metro",{chart:{title:{color:"#777777"},legend:{labels:{color:"#777777"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:o},errorBars:{color:"#777777"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},waterfall:{line:{color:"#c7c7c7"}},horizontalWaterfall:{line:{color:"#c7c7c7"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#8ebc00","#309b46","#25a0da","#ff6900","#e61e26","#d8e404","#16aba9","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#c7c7c7"},labels:{color:"#777777"},minorGridLines:{color:"#c7c7c7"},majorGridLines:{color:"#c7c7c7"},title:{color:"#777777"},crosshair:{color:"#c7c7c7"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}}}},gauge:{pointer:{color:"#8ebc00"},scale:{rangePlaceholderColor:"#e6e6e6",labels:{color:"#777"},minorTicks:{color:"#777"},majorTicks:{color:"#777"},line:{color:"#777"}}},diagram:{shapeDefaults:{fill:{color:"#8ebc00"},connectorDefaults:{fill:{color:o},stroke:{color:d},hover:{fill:{color:d},stroke:{color:o}}},content:{color:"#777"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:"#787878"},fill:{color:"#787878"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#787878"},content:{color:"#777"},selection:{handles:{fill:{color:d},stroke:{color:"#787878"
}}}}},treeMap:{colors:[["#8ebc00","#e8f2cc"],["#309b46","#d6ebda"],["#25a0da","#d3ecf8"],["#ff6900","#ffe1cc"],["#e61e26","#fad2d4"],["#d8e404","#f7facd"],["#16aba9","#d0eeee"],["#7e51a1","#e5dcec"],["#313131","#d6d6d6"],["#ed1691","#fbd0e9"]]}}),m("metroblack",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#797979"},markers:{color:"#797979"}}},seriesDefaults:{border:{_brightness:1},labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}},line:{markers:{background:"#0e0e0e"}},bubble:{opacity:.6},scatter:{markers:{background:"#0e0e0e"}},scatterLine:{markers:{background:"#0e0e0e"}},candlestick:{downColor:"#828282",line:{color:"#ffffff"}},waterfall:{line:{color:"#cecece"}},horizontalWaterfall:{line:{color:"#cecece"}},overlay:{gradient:"none"}},chartArea:{background:"#0e0e0e"},seriesColors:["#00aba9","#309b46","#8ebc00","#ff6900","#e61e26","#d8e404","#25a0da","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#cecece"},labels:{color:"#ffffff"},minorGridLines:{color:"#2d2d2d"},majorGridLines:{color:"#333333"},title:{color:"#ffffff"},crosshair:{color:"#cecece"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}}}},gauge:{pointer:{color:"#00aba9"},scale:{rangePlaceholderColor:"#2d2d2d",labels:{color:"#ffffff"},minorTicks:{color:"#333333"},majorTicks:{color:"#cecece"},line:{color:"#cecece"}}},diagram:{shapeDefaults:{fill:{color:"#00aba9"},connectorDefaults:{fill:{color:d},stroke:{color:"#0e0e0e"},hover:{fill:{color:"#0e0e0e"},stroke:{color:d}}},content:{color:d}},editable:{resize:{handles:{fill:{color:"#0e0e0e"},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:d},fill:{color:d}}}},selectable:{stroke:{color:"#787878"}},connectionDefaults:{stroke:{color:d},content:{color:d},selection:{handles:{fill:{color:"#0e0e0e"},stroke:{color:d}}}}},treeMap:{colors:[["#00aba9","#0b2d2d"],["#309b46","#152a19"],["#8ebc00","#28310b"],["#ff6900","#3e200b"],["#e61e26","#391113"],["#d8e404","#36390c"],["#25a0da","#132b37"],["#7e51a1","#241b2b"],["#313131","#151515"],["#ed1691","#3b1028"]]}}),m("moonlight",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#A1A7AB"},markers:{color:"#A1A7AB"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#212a33"}},bubble:{opacity:.6},scatter:{markers:{background:"#212a33"}},scatterLine:{markers:{background:"#212a33"}},area:{opacity:.3},candlestick:{downColor:"#757d87",line:{color:"#ea9d06"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:d,opacity:.2}}},waterfall:{line:{color:"#8c909e"}},horizontalWaterfall:{line:{color:"#8c909e"}},ohlc:{line:{color:"#ea9d06"}}},chartArea:{background:"#212a33"},seriesColors:["#ffca08","#ff710f","#ed2e24","#ff9f03","#e13c02","#a00201"],axisDefaults:{line:{color:"#8c909e"},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},labels:{color:"#ffffff"},majorGridLines:{color:"#3e424d"},minorGridLines:{color:"#2f3640"},title:{color:"#ffffff"},crosshair:{color:"#8c909e"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}}}},gauge:{pointer:{color:"#f4af03"},scale:{rangePlaceholderColor:"#2f3640",labels:{color:d},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},line:{color:"#8c909e"}}},diagram:{shapeDefaults:{fill:{color:"#f3ae03"},connectorDefaults:{fill:{color:d},stroke:{color:"#414550"},hover:{fill:{color:"#414550"},stroke:{color:d}}},content:{color:d}},editable:{resize:{handles:{fill:{color:"#414550"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:d}}}},rotate:{thumb:{stroke:{color:d},fill:{color:d}}}},selectable:{stroke:{color:d}},connectionDefaults:{stroke:{color:d},content:{color:d},selection:{handles:{fill:{color:"#414550"},stroke:{color:d}}}}},treeMap:{colors:[["#ffca08","#4e4b2b"],["#ff710f","#4e392d"],["#ed2e24","#4b2c31"],["#ff9f03","#4e422a"],["#e13c02","#482e2a"],["#a00201","#3b232a"]]}}),m("uniform",{chart:{title:{color:"#686868"},legend:{labels:{color:"#686868"},inactiveItems:{labels:{color:"#B6B6B6"},markers:{color:"#B6B6B6"}}},seriesDefaults:{labels:{color:"#686868"},errorBars:{color:"#686868"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.3},candlestick:{downColor:"#cccccc",line:{color:"#cccccc"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#cccccc",opacity:.2}}},waterfall:{line:{color:"#9e9e9e"}},horizontalWaterfall:{line:{color:"#9e9e9e"}},ohlc:{line:{color:"#cccccc"}}},chartArea:{background:"#ffffff"},seriesColors:["#527aa3","#6f91b3","#8ca7c2","#a8bdd1","#c5d3e0","#e2e9f0"],axisDefaults:{line:{color:"#9e9e9e"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},labels:{color:"#686868"},majorGridLines:{color:"#dadada"},minorGridLines:{color:"#e7e7e7"},title:{color:"#686868"},crosshair:{color:"#9e9e9e"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}}}},gauge:{pointer:{color:"#527aa3"},scale:{rangePlaceholderColor:"#e7e7e7",labels:{color:"#686868"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},line:{color:"#9e9e9e"}}},diagram:{shapeDefaults:{fill:{color:"#d1d1d1"},connectorDefaults:{fill:{color:"#686868"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#686868"}}},content:{color:"#686868"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#686868"},hover:{fill:{color:"#686868"},stroke:{color:"#686868"}}}},rotate:{thumb:{stroke:{color:"#686868"},fill:{color:"#686868"}}}},selectable:{stroke:{color:"#686868"}},connectionDefaults:{stroke:{color:"#686868"},content:{color:"#686868"},selection:{handles:{fill:{color:d},stroke:{color:"#686868"}}}}},treeMap:{colors:[["#527aa3","#d0d8e1"],["#6f91b3","#d6dde4"],["#8ca7c2","#dce1e7"],["#a8bdd1","#e2e6ea"],["#c5d3e0","#e7eaed"],["#e2e9f0","#edeff0"]]}}),m("bootstrap",{chart:{title:{color:"#333333"},legend:{labels:{color:"#333333"},inactiveItems:{labels:{color:"#999999"},markers:{color:"#9A9A9A"}}},seriesDefaults:{labels:{color:"#333333"},overlay:{gradient:"none"},errorBars:{color:"#343434"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#333333"},line:{color:"#000000"}},pie:{overlay:{gradient:"none"}},donut:{overlay:{gradient:"none"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.8},candlestick:{downColor:"#d0d0d0",line:{color:"#333333"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#b8b8b8",opacity:.2}}},waterfall:{line:{color:"#cccccc"}},horizontalWaterfall:{line:{color:"#cccccc"}},ohlc:{line:{color:"#333333"}}},chartArea:{background:"#ffffff"},seriesColors:["#428bca","#5bc0de","#5cb85c","#f2b661","#e67d4a","#da3b36"],axisDefaults:{line:{color:"#cccccc"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},labels:{color:"#333333"},majorGridLines:{color:"#cccccc"},minorGridLines:{color:"#ebebeb"},title:{color:"#333333"},crosshair:{color:"#000000"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#ffffff"},line:{color:"#000000"}}}},gauge:{pointer:{color:"#428bca"},scale:{rangePlaceholderColor:"#cccccc",labels:{color:"#333333"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},line:{color:"#cccccc"}}},diagram:{shapeDefaults:{fill:{color:"#428bca"},connectorDefaults:{fill:{color:"#333333"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#333333"}}},content:{color:"#333333"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#333333"},hover:{fill:{color:"#333333"},stroke:{color:"#333333"}}}},rotate:{thumb:{stroke:{color:"#333333"},fill:{color:"#333333"}}}},selectable:{stroke:{color:"#333333"}},connectionDefaults:{stroke:{color:"#c4c4c4"},content:{color:"#333333"},selection:{handles:{fill:{color:d},stroke:{color:"#333333"}},stroke:{color:"#333333"}}}},treeMap:{colors:[["#428bca","#d1e0ec"],["#5bc0de","#d6eaf0"],["#5cb85c","#d6e9d6"],["#5cb85c","#f4e8d7"],["#e67d4a","#f2ddd3"],["#da3b36","#f0d0cf"]]}}),m("flat",{chart:{title:{color:"#4c5356"},legend:{labels:{color:"#4c5356"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#4c5356"},errorBars:{color:"#4c5356"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#cdcdcd"}},horizontalWaterfall:{line:{color:"#cdcdcd"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#10c4b2","#ff7663","#ffb74f","#a2df53","#1c9ec4","#ff63a5","#1cc47b"],axisDefaults:{line:{color:"#cdcdcd"},labels:{color:"#4c5356"},minorGridLines:{color:"#cdcdcd"},majorGridLines:{color:"#cdcdcd"},title:{color:"#4c5356"},crosshair:{color:"#cdcdcd"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}}}},gauge:{pointer:{color:"#10c4b2"},scale:{rangePlaceholderColor:"#cdcdcd",labels:{color:"#4c5356"},minorTicks:{color:"#4c5356"},majorTicks:{color:"#4c5356"},line:{color:"#4c5356"}}},diagram:{shapeDefaults:{fill:{color:"#10c4b2"},connectorDefaults:{fill:{color:"#363940"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#363940"}}},content:{color:"#4c5356"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#363940"},hover:{fill:{color:"#363940"},stroke:{color:"#363940"}}}},rotate:{thumb:{stroke:{color:"#363940"},fill:{color:"#363940"}}}},selectable:{stroke:{color:"#363940"}},connectionDefaults:{stroke:{color:"#cdcdcd"},content:{color:"#4c5356"},selection:{handles:{fill:{color:d},stroke:{color:"#363940"}},stroke:{color:"#363940"}}}},treeMap:{colors:[["#10c4b2","#cff3f0"],["#ff7663","#ffe4e0"],["#ffb74f","#fff1dc"],["#a2df53","#ecf9dd"],["#1c9ec4","#d2ecf3"],["#ff63a5","#ffe0ed"],["#1cc47b","#d2f3e5"]]}}),m("material",{chart:{title:{color:"#444444"},legend:{labels:{color:"#444444"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#444444"},errorBars:{color:"#444444"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#e5e5e5"}},horizontalWaterfall:{line:{color:"#e5e5e5"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#e5e5e5"},labels:{color:"#444444"},minorGridLines:{color:"#e5e5e5"},majorGridLines:{color:"#e5e5e5"},title:{color:"#444444"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#e5e5e5",labels:{color:"#444444"},minorTicks:{color:"#444444"},majorTicks:{color:"#444444"},line:{color:"#444444"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#7f7f7f"}}},content:{color:"#444444"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#444444"},hover:{fill:{color:"#444444"},stroke:{color:"#444444"}}}},rotate:{thumb:{stroke:{color:"#444444"},fill:{color:"#444444"}}}},selectable:{stroke:{color:"#444444"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#444444"},selection:{handles:{fill:{color:d},stroke:{color:"#444444"}},stroke:{color:"#444444"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}}),m("materialblack",{chart:{title:{color:"#fff"},legend:{labels:{color:"#fff"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#fff"},errorBars:{color:"#fff"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#fff"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#4d4d4d"}},horizontalWaterfall:{line:{color:"#4d4d4d"}},overlay:{gradient:"none"},border:{_brightness:1}},chartArea:{background:"#1c1c1c"},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#4d4d4d"},labels:{color:"#fff"},minorGridLines:{color:"#4d4d4d"},majorGridLines:{color:"#4d4d4d"},title:{color:"#fff"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#4d4d4d"}},label:{color:"#fff"},line:{color:"#4d4d4d"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#4d4d4d",labels:{color:"#fff"},minorTicks:{color:"#fff"},majorTicks:{color:"#fff"},line:{color:"#fff"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:d},hover:{fill:{color:d},stroke:{color:"#7f7f7f"}}},content:{color:"#fff"}},editable:{resize:{handles:{fill:{color:d},stroke:{color:"#fff"},hover:{fill:{color:"#fff"},stroke:{color:"#fff"}}}},rotate:{thumb:{stroke:{color:"#fff"},fill:{color:"#fff"}}}},selectable:{stroke:{color:"#fff"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#fff"},selection:{handles:{fill:{color:d},stroke:{color:"#fff"}},stroke:{color:"#fff"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}})}(window.kendo.jQuery),function(e,t){function i(){this._defaults={}}function n(e,t,i,n){var r,o,s=(n.x-i.x)*(e.y-i.y)-(n.y-i.y)*(e.x-i.x),a=(n.y-i.y)*(t.x-e.x)-(n.x-i.x)*(t.y-e.y);return 0!==a&&(o=s/a,r=new Rt(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y))),r}function r(e,t){var i,n,r,s=e.series,a=s.length,l=e.seriesDefaults,c=bt({},e.seriesDefaults),d=t?bt({},t.seriesDefaults):{},u=bt({},d);for(o(c),o(u),i=0;a>i;i++)n=s[i].type||e.seriesDefaults.type,r=bt({data:[]},u,d[n],{tooltip:e.tooltip},c,l[n]),s[i]._defaults=r,s[i]=bt({},r,s[i])}function o(e){delete e.bar,delete e.column,delete e.rangeColumn,delete e.line,delete e.verticalLine,delete e.pie,delete e.donut,delete e.area,delete e.verticalArea,delete e.scatter,delete e.scatterLine,delete e.bubble,delete e.candlestick,delete e.ohlc,delete e.boxPlot,delete e.bullet,delete e.verticalBullet,delete e.polarArea,delete e.polarLine,delete e.radarArea,delete e.radarLine,delete e.waterfall}function s(e){var t,i,n,r,o=e.series,s=e.seriesColors||[];for(t=0;o.length>t;t++)i=o[t],n=s[t%s.length],i.color=i.color||n,r=i._defaults,r&&(r.color=r.color||n)}function a(e){var t;lt([Si,Dr,zr,Hr],function(){t=this+"Axes",e[t]&&(e[this+"Axis"]=e[t],delete e[t])})}function l(t,i){var n=(i||{}).axisDefaults||{};lt([Si,Dr,zr,Hr],function(){var i=this+"Axis",r=[].concat(t[i]),o=t.axisDefaults||{};r=e.map(r,function(e){var t=(e||{}).color,r=bt({},n,n[i],o,o[i],{line:{color:t},labels:{color:t},title:{color:t}},e);return delete r[i],r}),t[i]=r.length>1?r:r[0]})}function c(e){var t,i=e.length,n=0;for(t=0;i>t;t++)n=ut.max(n,e[t].data.length);return n}function d(e){return e*e}function u(e,t){if(null===t)return t;var i=wt(e,!0);return i(t)}function h(e,t){if(null===t)return t;var i="_date_"+e,n=t[i];return n||(n=p(wt(e,!0)(t)),t[i]=n),n}function p(e){var t,i;if(e instanceof Date)t=e;else if(typeof e===dr)t=mt.parseDate(e)||new Date(e);else if(e)if(ct(e))for(t=[],i=0;e.length>i;i++)t.push(p(e[i]));else t=new Date(e);return t}function f(e){return ct(e)?dt(e,f):e?p(e).getTime():t}function m(e,t,i,n){var r,o=e;return e&&(e=p(e),r=e.getHours(),i===Rr?(o=new Date(e.getFullYear()+t,0,1),mt.date.adjustDST(o,0)):i===Dn?(o=new Date(e.getFullYear(),e.getMonth()+t,1),mt.date.adjustDST(o,r)):i===Pr?(o=m(g(e,n),7*t,$i),mt.date.adjustDST(o,r)):i===$i?(o=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t),mt.date.adjustDST(o,r)):i===cn?(o=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+t),t>0&&S(e,o)&&(o=m(e,t+1,i,n))):i===Tn?(o=new Date(e.getTime()+t*pr),o.getSeconds()>0&&o.setSeconds(0)):i===er&&(o=new Date(e.getTime()+t*hr)),o.getMilliseconds()>0&&o.setMilliseconds(0)),o}function g(e,t){var i=e.getDay(),n=0;if(!isNaN(i))for(t=t||0;i!==t;)0===i?i=6:i--,n++;return b(e,-n*mr)}function v(e,t,i){return e=p(e),m(e,0,t,i)}function y(e,t,i){return e=p(e),e&&v(e,t,i).getTime()===e.getTime()?e:m(e,1,t,i)}function _(e,t){var i=e.getTime()-t,n=e.getTimezoneOffset()-t.getTimezoneOffset();return i-n*pr}function b(e,t){var i=e.getTimezoneOffset(),n=new Date(e.getTime()+t),r=n.getTimezoneOffset()-i;return new Date(n.getTime()+r*pr)}function w(e,t,i){var n;return n=i===Rr?t.getFullYear()-e.getFullYear():i===Dn?12*w(e,t,Rr)+t.getMonth()-e.getMonth():ut.floor(i===$i?_(t,e)/mr:(t-e)/_r[i])}function k(e){return 1===e.length?e[0]:e}function x(e){var t,i,n,r=e.length;if(r>0)for(i=0;r>i;i++)n=e[i].box,t?t.wrap(n):t=n.clone();return t||Dt()}function C(e,t){return e&&t?e.toLowerCase()===t.toLowerCase():e===t}function S(e,t){return e&&t?f(e)===f(t):e===t}function T(e,t){null!==t&&e.push(t)}function D(e,t){for(var i,n,r=0,o=t.length-1;o>=r;)if(i=ut.floor((r+o)/2),n=t[i],e>n)r=i+1;else{if(!(n>e)){for(;S(t[i-1],e);)i--;return i}o=i-1}return e>=t[i]?i:i-1}function M(e){return"number"==typeof e&&!isNaN(e)}function A(e){var t,i,n=e.length,r=0;for(t=0;n>t;t++)i=e[t],M(i)&&r++;return r}function E(e){return A(e)===e.length}function I(e){var t,i,n,r={};for(t=0;e.length>t;t++)i=e[t],n=i.options.name,n&&(r[n]=i.range());return r}function P(e,t,i,n){var r,o,s,a,l,c=!1;if(i=i||{},s=i.excluded=i.excluded||[],a=i.defaults=i.defaults||{},l=i.depth=i.depth||0,!(l>kn)){for(r in e)!Gt(r,i.excluded)&&e.hasOwnProperty(r)&&(o=e[r],kt(o)?(c=!0,n||(e[r]=si(o(t),a[r]))):typeof o===On&&(i.defaults=a[r],i.depth++,c=P(o,t,i,n)||c,i.depth--));return c}}function F(e,i){var n,r,o,s=[],a=e.groupNameTemplate,l=i.length;for(Jt(a)?(mt.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. Specify the group name template as 'series.name'"),a&&(n=xt(a))):(n=xt(e.name||""),0===n._slotCount&&(n=xt(Jt(e.name)?"#= group.value #: #= series.name #":"#= group.value #"))),r=0;l>r;r++)o=bt({},e),kt(o.color)||(o.color=t),o._groupIx=r,s.push(o),n&&(o.name=n({series:o,group:i[r]}));return s}function z(e,t){var i,n,r=[];for(t=[].concat(t),i=0;e.length>i;i++)n=e[i],Gt(n.type,t)&&r.push(n);return r}function H(t,i){if(t instanceof Date){for(var n=0,r=i.length;r>n;n++)if(S(i[n],t))return n;return-1}return e.inArray(t,i)}function R(e,t){t=t||jt;for(var i=1,n=e.length;n>i;i++)if(t(e[i],e[i-1])<0){e.sort(t);break}return e}function N(e,t){var i,n=R(e,t),r=n.length,o=r>0?[n[0]]:[];for(t=t||jt,i=1;r>i;i++)0!==t(n[i],ei(o))&&o.push(n[i]);return o}function $(e,t){var i=e.type,n=t instanceof Date;return!i&&n||C(i,Ni)}function O(e){var t,i,n,r,o=[],s=e.length;for(t=0;s>t;t++)for(i=e[t],r=i.length,n=0;r>n;n++)o[n]=o[n]||[],o[n].push(i[n]);return o}function L(e,t){if(e.indexOf(".")>-1)for(var i,n=e.split("."),r="";n.length>1;)r+=n.shift(),i=mt.getter(r)(t)||{},mt.setter(r)(t,i),r+="."}function B(e){var t,i,n,r=e.data,o=0;for(t=0;r.length>t;t++)i=W.current.bindPoint(e,t),n=i.valueFields.value,typeof n===dr&&(n=parseFloat(n)),M(n)&&i.fields.visible!==!1&&(o+=ut.abs(n));return o}function U(e){var t=e.overlay;return t&&t.gradient&&"none"!=t.gradient}var V,W,j,q,G,Y,Q,K,X,Z,J,ee,te,ie,ne,re,oe,se,ae,le,ce,de,ue,he,pe,fe,me,ge,ve,ye,_e,be,we,ke,xe,Ce,Se,Te,De,Me,Ae,Ee,Ie,Pe,Fe,ze,He,Re,Ne,$e,Oe,Le,Be,Ue,Ve,We,je,qe,Ge,Ye,Qe,Ke,Xe,Ze,Je,et,tt,it,nt,rt,ot,st,at,lt=e.each,ct=e.isArray,dt=e.map,ut=Math,ht=e.noop,pt=e.extend,ft=e.proxy,mt=window.kendo,gt=mt.Class,vt=mt.Observable,yt=mt.data.DataSource,_t=mt.ui.Widget,bt=mt.deepExtend,wt=mt.getter,kt=mt.isFunction,xt=mt.template,Ct=mt.dataviz,St=Ct.Axis,Tt=Ct.AxisLabel,Dt=Ct.Box2D,Mt=Ct.BoxElement,At=Ct.ChartElement,Et=mt.drawing.Color,It=Ct.CurveProcessor,Pt=Ct.FloatElement,Ft=Ct.Note,zt=Ct.LogarithmicAxis,Ht=Ct.NumericAxis,Rt=Ct.Point2D,Nt=Ct.RootElement,$t=Ct.Ring,Ot=Ct.ShapeElement,Lt=Ct.ShapeBuilder,Bt=Ct.TextBox,Ut=Ct.Title,Vt=Ct.alignPathToPixel,Wt=Ct.autoFormat,jt=Ct.dateComparer,qt=Ct.getSpacing,Gt=Ct.inArray,Yt=Ct.interpolateValue,Qt=Ct.mwDelta,Kt=Ct.round,Xt=mt.util,Zt=Xt.append,Jt=Xt.defined,ei=Xt.last,ti=Xt.limitValue,ii=Xt.sparseArrayLimits,ni=Xt.sparseArrayMin,ri=Xt.sparseArrayMax,oi=Xt.renderTemplate,si=Xt.valueOrDefault,ai=Ct.geometry,li=Ct.drawing,ci=".kendoChart",di="above",ui="area",hi="auto",pi="fit",fi=Ct.AXIS_LABEL_CLICK,mi="bar",gi=.8,vi="below",yi="#000",_i="both",bi="bottom",wi="boxPlot",ki="bubble",xi="bullet",Ci="candlestick",Si="category",Ti="center",Di="change",Mi="circle",Ai="contextmenu"+ci,Ei="color",Ii="column",Pi=Ct.COORD_PRECISION,Fi="cross",zi="k-",Hi="custom",Ri="dataBound",Ni="date",$i="days",Oi=Ct.DEFAULT_FONT,Li=Ct.DEFAULT_HEIGHT,Bi=Ct.DEFAULT_PRECISION,Ui=Ct.DEFAULT_WIDTH,Vi=4,Wi="donut",ji=50,qi="drag",Gi="dragEnd",Yi="dragStart",Qi="errorLow",Ki="errorHigh",Xi="xErrorLow",Zi="xErrorHigh",Ji="yErrorLow",en="yErrorHigh",tn="fadeIn",nn="first",rn="from",on="funnel",sn="glass",an="horizontal",ln="horizontalWaterfall",cn="hours",dn=Ct.INITIAL_ANIMATION_DURATION,un="insideBase",hn="insideEnd",pn="interpolate",fn="left",mn="legendItemClick",gn="legendItemHover",vn="line",yn=8,_n="linear",bn="log",wn="max",kn=5,xn=Number.MAX_VALUE,Cn="min",Sn=-Number.MAX_VALUE,Tn="minutes",Dn="months",Mn="mouseleave"+ci,An="mousemove.tracking",En="mouseover"+ci,In="mouseout"+ci,Pn="mousemove"+ci,Fn=20,zn=150,Hn="DOMMouseScroll"+ci+" mousewheel"+ci,Rn=Ct.NOTE_CLICK,Nn=Ct.NOTE_HOVER,$n="noteText",On="object",Ln="ohlc",Bn="outsideEnd",Un="pie",Vn=70,Wn="plotAreaClick",jn="pointer",qn="rangeBar",Gn="rangeColumn",Yn="render",Qn="right",Kn="roundedBevel",Xn="roundedGlass",Zn="scatter",Jn="scatterLine",er="seconds",tr="selectStart",ir="select",nr="selectEnd",rr="seriesClick",or="seriesHover",sr="step",ar="smooth",lr="stderr",cr="stddev",dr="string",ur="summary",hr=1e3,pr=60*hr,fr=60*pr,mr=24*fr,gr=7*mr,vr=31*mr,yr=365*mr,_r={years:yr,months:vr,weeks:gr,days:mr,hours:fr,minutes:pr,seconds:hr},br="to",wr="top",kr=150,xr=5,Cr=100,Sr=100,Tr="chart-tooltip-inverse",Dr="value",Mr="verticalArea",Ar="verticalBullet",Er="verticalLine",Ir="waterfall",Pr="weeks",Fr="#fff",zr="x",Hr="y",Rr="years",Nr="zero",$r=3,Or="zoomStart",Lr="zoom",Br="zoomEnd",Ur=[er,Tn,cn,$i,Pr,Dn,Rr],Vr=[mi,Ii,Ln,Ci,wi,xi,Gn,qn,Ir,ln],Wr={seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},jr=_t.extend({init:function(e,i){var n,r,o=this;mt.destroy(e),_t.fn.init.call(o,e),o.element.addClass(zi+this.options.name.toLowerCase()).css("position","relative"),i&&(r=i.dataSource,i.dataSource=t),n=bt({},o.options,i),o._originalOptions=bt({},n),o._initTheme(n),o._initSurface(),o.bind(o.events,o.options),o.wrapper=o.element,i&&(i.dataSource=r),o._initDataSource(i),mt.notify(o,Ct.ui)},_initTheme:function(i){var n,r=this,o=Ct.ui.themes||{},l=i.theme,c=o[l]||o[l.toLowerCase()],d=l&&c?c.chart:{},u=[],h=i.series||[];for(n=0;h.length>n;n++)u.push(e.extend({},h[n]));i.series=u,a(i),r._applyDefaults(i,d),null===i.seriesColors&&(i.seriesColors=t),r.options=bt({},d,i),s(r.options)},_initDataSource:function(e){var t=this,i=(e||{}).dataSource;t._dataChangeHandler=ft(t._onDataChanged,t),t.dataSource=yt.create(i).bind(Di,t._dataChangeHandler),t._bindCategories(),i&&(t._hasDataSource=!0),t._redraw(),t._attachEvents(),i&&t.options.autoBind&&t.dataSource.fetch()},setDataSource:function(e){var t=this;t.dataSource.unbind(Di,t._dataChangeHandler),t.dataSource=e=yt.create(e),t._hasDataSource=!0,t._hasData=!1,e.bind(Di,t._dataChangeHandler),t.options.autoBind&&e.fetch()},events:[Ri,rr,or,fi,mn,gn,Wn,Yi,qi,Gi,Or,Lr,Br,tr,ir,nr,Rn,Nn,Yn],items:function(){return e()},options:{name:"Chart",renderAs:"",theme:"default",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},autoBind:!0,seriesDefaults:{type:Ii,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}]},refresh:function(){var e=this;e._applyDefaults(e.options),s(e.options),e._bindSeries(),e._bindCategories(),e.trigger(Ri),e._redraw()},getSize:function(){return mt.dimensions(this.element)},_resize:function(){var e=this.options.transitions;this.options.transitions=!1,this._redraw(),this.options.transitions=e},redraw:function(e){var t,i,n=this;n._applyDefaults(n.options),s(n.options),e?(i=n._model._plotArea,t=i.findPane(e),i.redraw(t)):n._redraw()},_initSurface:function(){var e,t=this.surface,i=this._surfaceWrap();t&&t.options.type===this.options.renderAs?this.surface.clear():(t&&t.destroy(),this.surface=li.Surface.create(i,{type:this.options.renderAs})),e=this.options.chartArea,e.width&&i.css("width",e.width),e.height&&i.css("height",e.height)},_surfaceWrap:function(){return this.element},_redraw:function(){var e,t=this,i=t._getModel();t._destroyView(),t._model=i,t._plotArea=i._plotArea,i.renderVisual(),this.options.transitions!==!1&&i.traverse(function(e){e.animation&&e.animation.setup()}),t._initSurface(),t.surface.draw(i.visual),this.options.transitions!==!1&&i.traverse(function(e){e.animation&&e.animation.play()}),t._tooltip=t._createTooltip(),t._highlight=new Je(e),t._setupSelection(),t._hasDataSource&&!t._hasData&&t.options.autoBind||t.trigger(Yn)},exportVisual:function(){var e=this._getModel();return e.renderVisual(),e.visual},_sharedTooltip:function(){var e=this,t=e.options;return e._plotArea instanceof qe&&t.tooltip.shared},_createTooltip:function(){var e,t=this,i=t.options,n=t.element;return e=t._sharedTooltip()?new it(n,t._plotArea,i.tooltip):new tt(n,i.tooltip)},_applyDefaults:function(e,t){l(e,t),r(e,t)},_getModel:function(){var e,t=this,i=t.options,n=new Nt(t._modelOptions());return n.chart=t,Ut.buildTitle(i.title,n),e=n._plotArea=t._createPlotArea(),i.legend.visible&&n.append(new G(e.options.legend)),n.append(e),n.reflow(),n},_modelOptions:function(){var e=this,t=e.options,i=e.element,n=ut.floor(i.height()),r=ut.floor(i.width());return e._size=null,bt({width:r||Ui,height:n||Li,transitions:t.transitions},t.chartArea)},_createPlotArea:function(e){var t=this,i=t.options;return V.current.create(e?[]:i.series,i)},_setupSelection:function(){var e,t,i,n,r,o,s=this,a=s._plotArea,l=a.axes,c=s._selections=[];for(s._selectStartHandler||(s._selectStartHandler=ft(s._selectStart,s),s._selectHandler=ft(s._select,s),s._selectEndHandler=ft(s._selectEnd,s)),t=0;l.length>t;t++)i=l[t],o=i.options,i instanceof Y&&o.select&&!o.vertical&&(n=0,r=o.categories.length-1,i instanceof Q&&(n=o.categories[n],r=o.categories[r]),o.justified||(i instanceof Q?r=m(r,1,o.baseUnit,o.weekStartDay):r++),e=new st(s,i,bt({min:n,max:r},o.select)),e.bind(tr,s._selectStartHandler),e.bind(ir,s._selectHandler),e.bind(nr,s._selectEndHandler),c.push(e))},_selectStart:function(e){return this.trigger(tr,e)},_select:function(e){return this.trigger(ir,e)},_selectEnd:function(e){return this.trigger(nr,e)},_attachEvents:function(){var e=this,t=e.element;t.on(Ai,ft(e._click,e)),t.on(En,ft(e._mouseover,e)),t.on(In,ft(e._mouseout,e)),t.on(Hn,ft(e._mousewheel,e)),t.on(Mn,ft(e._mouseleave,e)),e._mousemove=mt.throttle(ft(e._mousemove,e),Fn),e._shouldAttachMouseMove()&&t.on(Pn,e._mousemove),mt.UserEvents&&(e._userEvents=new mt.UserEvents(t,{global:!0,filter:":not(.k-selector)",multiTouch:!1,tap:ft(e._tap,e),start:ft(e._start,e),move:ft(e._move,e),end:ft(e._end,e)}))},_mouseout:function(e){var t=this,i=t._model.modelMap[e.target.getAttribute("data-model-id")];i&&i.leave&&i.leave(t,e)},_start:function(e){var t=this,i=t._events;Jt(i[Yi]||i[qi]||i[Gi])&&t._startNavigation(e,Yi)},_move:function(e){var t,i,n,r,o,s,a=this,l=a._navState,c={};if(l){for(e.preventDefault(),t=l.axes,i=0;t.length>i;i++)n=t[i],r=n.options.name,r&&(o=n.options.vertical?e.y:e.x,s=o.startLocation-o.location,0!==s&&(c[n.options.name]=n.translateRange(s)));l.axisRanges=c,a.trigger(qi,{axisRanges:c,originalEvent:e})}},_end:function(e){this._endNavigation(e,Gi)},_mousewheel:function(e){var t,i,n,r,o,s,a=this,l=e.originalEvent,c=Qt(e),d=a._navState,u={};if(d||(t=a._startNavigation(l,Or),t||(d=a._navState)),d){for(i=d.totalDelta||c,d.totalDelta=i+c,n=a._navState.axes,r=0;n.length>r;r++)o=n[r],s=o.options.name,s&&(u[s]=o.scaleRange(-i));a.trigger(Lr,{delta:c,axisRanges:u,originalEvent:e}),a._mwTimeout&&clearTimeout(a._mwTimeout),a._mwTimeout=setTimeout(function(){a._endNavigation(e,Br)},zn)}},_startNavigation:function(e,t){var i,n,r,o=this,s=o._eventCoordinates(e),a=o._model._plotArea,l=a.findPointPane(s),c=a.axes.slice(0),d=!1;if(l){for(i=0;c.length>i;i++)if(n=c[i],n.box.containsPoint(s)){d=!0;break}!d&&a.backgroundBox().containsPoint(s)&&(r=o.trigger(t,{axisRanges:I(c),originalEvent:e}),r?o._userEvents.cancel():(o._suppressHover=!0,o._unsetActivePoint(),o._navState={pane:l,axes:c}))}},_endNavigation:function(e,t){var i=this;i._navState&&(i.trigger(t,{axisRanges:i._navState.axisRanges,originalEvent:e}),i._suppressHover=!1,i._navState=null)},_getChartElement:function(e,i){var n,r=this.surface.eventTarget(e);if(r){for(;r&&!n;)n=r.chartElement,r=r.parent;return n?(n.aliasFor&&(n=n.aliasFor(e,this._eventCoordinates(e))),i&&(n=n.closest(i)),n):t}},_eventCoordinates:function(e){var t=this,i=Jt((e.x||{}).client),n=i?e.x.client:e.clientX,r=i?e.y.client:e.clientY;return t._toModelCoordinates(n,r)},_toModelCoordinates:function(t,i){var n=this.element,r=n.offset(),o=parseInt(n.css("paddingLeft"),10),s=parseInt(n.css("paddingTop"),10),a=e(window);return new Rt(t-r.left-o+a.scrollLeft(),i-r.top-s+a.scrollTop())},_tap:function(e){var t=this,i=t._getChartElement(e);t._activePoint===i?t._click(e):(t._startHover(e)||t._unsetActivePoint(),t._click(e))},_click:function(e){for(var t=this,i=t._getChartElement(e);i;)i.click&&i.click(t,e),i=i.parent},_startHover:function(e){var i,n=this,r=n._getChartElement(e),o=n._tooltip,s=n._highlight,a=n.options.tooltip;if(!n._suppressHover&&s&&!s.isHighlighted(r)&&!n._sharedTooltip())return i=n._getChartElement(e,function(e){return e.hover}),i&&!i.hover(n,e)?(n._activePoint=i,a=bt({},a,i.options.tooltip),a.visible&&o.show(i),s.show(i),!0):t},_mouseover:function(t){var i=this;i._startHover(t)&&e(document).on(An,ft(i._mouseMoveTracking,i))},_mouseMoveTracking:function(t){var i,n,r=this,o=r.options,s=r._tooltip,a=r._highlight,l=r._eventCoordinates(t),c=r._activePoint;r._plotArea.box.containsPoint(l)?c&&c.tooltipTracking&&c.series&&c.parent.getNearestPoint&&(n=c.parent.getNearestPoint(l.x,l.y,c.seriesIx),n&&n!=c&&(n.hover(r,t),r._activePoint=n,i=bt({},o.tooltip,c.options.tooltip),i.visible&&s.show(n),a.show(n))):(e(document).off(An),r._unsetActivePoint())},_mousemove:function(e){var t=this._eventCoordinates(e);this._trackCrosshairs(t),this._sharedTooltip()&&this._trackSharedTooltip(t)},_trackCrosshairs:function(e){var t,i,n=this._plotArea.crosshairs;for(t=0;n.length>t;t++)i=n[t],i.box.containsPoint(e)?i.showAt(e):i.hide()},_trackSharedTooltip:function(e){var t,i,n=this,r=n.options,o=n._plotArea,s=o.categoryAxis,a=n._tooltip,l=r.tooltip,c=n._highlight;o.box.containsPoint(e)&&(t=s.pointCategoryIndex(e),t!==n._tooltipCategoryIx&&(i=o.pointsByCategoryIndex(t),i.length>0?(l.visible&&a.showAt(i,e),c.show(i)):a.hide(),n._tooltipCategoryIx=t))},_mouseleave:function(t){var i,n,r=this,o=r._plotArea,s=o.crosshairs,a=r._tooltip,l=r._highlight,c=t.relatedTarget;
if(c){for(i=0;s.length>i;i++)s[i].hide();l.hide(),n=a.element[0],c===n||e.contains(n,c)||(setTimeout(ft(a.hide,a),Sr),r._tooltipCategoryIx=null)}},_unsetActivePoint:function(){var e=this,t=e._tooltip,i=e._highlight;e._activePoint=null,t&&t.hide(),i&&i.hide()},_onDataChanged:function(){var e,t,i=this,n=i.options,r=i._sourceSeries||n.series,o=r.length,a=i.dataSource.view(),l=(i.dataSource.group()||[]).length>0,c=[];for(e=0;o>e;e++)t=r[e],i._isBindable(t)&&l?Zt(c,F(t,a)):c.push(t||[]);i._sourceSeries=r,n.series=c,s(i.options),i._bindSeries(),i._bindCategories(),i._hasData=!0,i._deferRedraw()},_deferRedraw:function(){var e=this;mt.support.vml?(e._clearRedrawTimeout(),e._redrawTimeout=setTimeout(function(){e.surface&&(e.trigger(Ri),e._redraw())},0)):(e.trigger(Ri),e._redraw())},_clearRedrawTimeout:function(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},_bindSeries:function(){var e,t,i,n,r=this,o=r.dataSource.view(),s=r.options.series,a=s.length;for(e=0;a>e;e++)t=s[e],r._isBindable(t)&&(i=t._groupIx,n=Jt(i)?(o[i]||{}).items:o,t.autoBind!==!1&&(t.data=n))},_bindCategories:function(){var e,t,i=this,n=i.dataSource.view()||[],r=(i.dataSource.group()||[]).length>0,o=n,s=i.options,a=[].concat(s.categoryAxis);for(r&&n.length&&(o=n[0].items),e=0;a.length>e;e++)t=a[e],t.autoBind!==!1&&i._bindCategoryAxis(t,o,e)},_bindCategoryAxis:function(e,t,i){var n,r,o,s=(t||[]).length;if(e.field)for(e.categories=[],n=0;s>n;n++)o=t[n],r=u(e.field,o),0===n?(e.categories=[r],e.dataItems=[o]):(e.categories.push(r),e.dataItems.push(o));else this._bindCategoryAxisFromSeries(e,i)},_bindCategoryAxisFromSeries:function(e,t){var i,n,r,o,s,a,l,c,d,p,f,m=this,g=[],v=m.options.series,y=v.length,_={};for(n=0;y>n;n++)if(r=v[n],o=r.categoryAxis===e.name||!r.categoryAxis&&0===t,s=r.data,l=s.length,r.categoryField&&o&&l>0)for(f=$(e,u(r.categoryField,s[0])),p=f?h:u,a=0;l>a;a++)c=s[a],d=p(r.categoryField,c),(f||!_[d])&&(g.push([d,c]),f||(_[d]=!0));g.length>0&&(f&&(g=N(g,function(e,t){return jt(e[0],t[0])})),i=O(g),e.categories=i[0],e.dataItems=i[1])},_isBindable:function(e){var t,i,n=W.current.valueFields(e),r=!0;for(i=0;n.length>i;i++)if(t=n[i],t===Dr?t="field":t+="Field",!Jt(e[t])){r=!1;break}return r},_legendItemClick:function(e,t){var i,n,r,o=this,s=o._plotArea,a=(s.srcSeries||s.series)[e],l=(o._sourceSeries||[])[e]||a;Gt(a.type,[Un,Wi,on])?(r=l.data[t],n=!!Jt(r.visible)&&!r.visible,r.visible=n):(n=!l.visible,l.visible=n,a.visible=n),o.options.transitions&&(o.options.transitions=!1,i=!0),o.redraw(),i&&(o.options.transitions=!0)},_legendItemHover:function(e,t){var i,n,r=this,o=r._plotArea,s=r._highlight,a=(o.srcSeries||o.series)[e];i=Gt(a.type,[Un,Wi,on])?t:e,n=o.pointsBySeriesIndex(i),s.show(n)},_shouldAttachMouseMove:function(){var e=this;return e._plotArea.crosshairs.length||e._tooltip&&e._sharedTooltip()},setOptions:function(i){var n=this,r=i.dataSource;i.dataSource=t,n._originalOptions=bt(n._originalOptions,i),n.options=bt({},n._originalOptions),n._sourceSeries=null,e(document).off(Pn),_t.fn._setEvents.call(n,i),n._initTheme(n.options),r&&n.setDataSource(r),n._shouldAttachMouseMove()&&n.element.on(Pn,n._mousemove),n._hasDataSource?n.refresh():n.redraw()},destroy:function(){var t=this,i=t.dataSource;t.element.off(ci),i.unbind(Di,t._dataChangeHandler),e(document).off(An),t._userEvents&&t._userEvents.destroy(),t._destroyView(),t.surface.destroy(),t.surface=null,t._clearRedrawTimeout(),_t.fn.destroy.call(t)},_destroyView:function(){var e=this,t=e._model,i=e._selections;if(t&&(t.destroy(),e._model=null),i)for(;i.length>0;)i.shift().destroy();e._unsetActivePoint(),e._tooltip&&e._tooltip.destroy(),e._highlight&&e._highlight.destroy()}});Ct.ExportMixin.extend(jr.fn),mt.PDFMixin&&mt.PDFMixin.extend(jr.fn),V=gt.extend({init:function(){this._registry=[]},register:function(e,t){this._registry.push({type:e,seriesTypes:t})},create:function(e,t){var i,n,r,o=this._registry,s=o[0];for(i=0;o.length>i;i++)if(n=o[i],r=z(e,n.seriesTypes),r.length>0){s=n;break}return new s.type(r,t)}}),V.current=new V,W=gt.extend({init:function(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}},register:function(e,i,n){var r,o,s=this;for(i=i||[Dr],r=0;e.length>r;r++)o=e[r],s._valueFields[o]=i,s._otherFields[o]=n,s._nullValue[o]=s._makeValue(i,null),s._undefinedValue[o]=s._makeValue(i,t)},canonicalFields:function(e){return this.valueFields(e).concat(this.otherFields(e))},valueFields:function(e){return this._valueFields[e.type]||[Dr]},otherFields:function(e){return this._otherFields[e.type]||[Dr]},bindPoint:function(e,t){var i,n,r,o,s,a=this,l=e.data,c=l[t],d={valueFields:{value:c}},u=a.valueFields(e),h=a._otherFields[e.type];return null===c?s=a._nullValue[e.type]:Jt(c)?ct(c)?(n=c.slice(u.length),s=a._bindFromArray(c,u),i=a._bindFromArray(n,h)):typeof c===On&&(r=a.sourceFields(e,u),o=a.sourceFields(e,h),s=a._bindFromObject(c,u,r),i=a._bindFromObject(c,h,o)):s=a._undefinedValue[e.type],Jt(s)&&(1===u.length?d.valueFields.value=s[u[0]]:d.valueFields=s),d.fields=i||{},d},_makeValue:function(e,t){var i,n,r={},o=e.length;for(i=0;o>i;i++)n=e[i],r[n]=t;return r},_bindFromArray:function(e,t){var i,n,r={};if(t)for(n=ut.min(t.length,e.length),i=0;n>i;i++)r[t[i]]=e[i];return r},_bindFromObject:function(e,t,i){var n,r,o,s,a={};if(t)for(r=t.length,i=i||t,n=0;r>n;n++)o=t[n],s=i[n],a[o]=u(s,e);return a},sourceFields:function(e,t){var i,n,r,o,s;if(t)for(n=t.length,o=[],i=0;n>i;i++)r=t[i],s=r===Dr?"field":r+"Field",o.push(e[s]||r);return o}}),W.current=new W,j=At.extend({init:function(e,t){var i=this;At.fn.init.call(i,t),this.textBox=new Bt(e,i.options),i.append(this.textBox)},options:{position:Bn,margin:qt(3),padding:qt(4),color:yi,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:tn,delay:dn},zIndex:2},createVisual:function(){this.textBox.options.noclip=this.options.noclip},reflow:function(e){var t=this,i=t.options,n=i.vertical,r=i.aboveAxis,o=t.children[0],s=o.box,a=o.options.padding;o.options.align=n?Ti:fn,o.options.vAlign=n?wr:Ti,i.position==hn?n?(o.options.vAlign=wr,!r&&s.height()<e.height()&&(o.options.vAlign=bi)):o.options.align=r?Qn:fn:i.position==Ti?(o.options.vAlign=Ti,o.options.align=Ti):i.position==un?n?o.options.vAlign=r?bi:wr:o.options.align=r?fn:Qn:i.position==Bn&&(n?e=r?new Dt(e.x1,e.y1-s.height(),e.x2,e.y1):new Dt(e.x1,e.y2,e.x2,e.y2+s.height()):(o.options.align=Ti,e=r?new Dt(e.x2+s.width(),e.y1,e.x2,e.y2):new Dt(e.x1-s.width(),e.y1,e.x1,e.y2))),i.rotation||(n?a.left=a.right=(e.width()-o.contentBox.width())/2:a.top=a.bottom=(e.height()-o.contentBox.height())/2),o.reflow(e)},alignToClipBox:function(e){var t,i=this,n=i.options.vertical,r=n?Hr:zr,o=r+"1",s=r+"2",a=i.children[0],l=i.parent.box;(e[o]>l[o]||l[s]>e[s])&&(t=a.paddingBox.clone(),t[o]=ut.max(l[o],e[o]),t[s]=ut.min(l[s],e[s]),this.reflow(t))}}),q=Mt.extend({init:function(e){var t=this;Mt.fn.init.call(t,e),t.createContainer(),t.createMarker(),t.createLabel()},createContainer:function(){var e=this;e.container=new Pt({vertical:!1,wrap:!1,align:Ti}),e.append(e.container)},createMarker:function(){var e=this,t=e.options,i=t.markerColor,n=t.markers,r=bt({},n,{background:i,border:{color:i}});e.container.append(new Ot(r))},createLabel:function(){var e=this,t=e.options,i=bt({},t.labels);e.container.append(new Bt(t.text,i))},renderComplete:function(){var e,t;At.fn.renderComplete.call(this),e=this.options.cursor||{},t=li.Path.fromRect(this.container.box.toRect(),{fill:{color:Fr,opacity:0},stroke:null,cursor:e.style}),this.visual.append(t)},click:function(e,t){var i=this.eventArgs(t);e.trigger(mn,i)||(t.preventDefault(),e._legendItemClick(i.seriesIndex,i.pointIndex))},hover:function(e,t){var i=this.eventArgs(t);return e.trigger(gn,i)||(t.preventDefault(),e._legendItemHover(i.seriesIndex,i.pointIndex)),!0},leave:function(e){e._unsetActivePoint()},eventArgs:function(t){var i=this.options;return{element:e(t.target),text:i.text,series:i.series,seriesIndex:i.series.index,pointIndex:i.pointIndex}}}),G=At.extend({init:function(e){var t=this;At.fn.init.call(t,e),Gt(t.options.position,[wr,Qn,bi,fn,Hi])||(t.options.position=Qn),t.createContainer(),t.createItems()},options:{position:Qn,items:[],labels:{margin:{left:6}},offsetX:0,offsetY:0,margin:qt(5),padding:qt(5),border:{color:yi,width:0},item:{zIndex:1,cursor:{style:jn}},spacing:6,background:"",zIndex:1,markers:{border:{width:1},width:7,height:7,type:"rect",align:fn,vAlign:Ti,zIndex:1}},createContainer:function(){var e=this,t=e.options,i=t.position,n=i,r=Ti;i==Hi?n=fn:Gt(i,[wr,bi])&&(n=Ti,r=i),e.container=new Mt({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:r,align:n,zIndex:t.zIndex,shrinkToFit:!0}),e.append(e.container)},createItems:function(){var e,t,i,n=this,r=n.options,o=r.items,s=o.length,a=n.isVertical();for(e=new Pt({vertical:a,spacing:r.spacing}),t=0;s>t;t++)i=o[t],e.append(new q(bt({},{markers:r.markers,labels:r.labels},r.item,i)));n.container.append(e)},isVertical:function(){var e=this,t=e.options,i=t.position,n=Gt(i,[fn,Qn])||i==Hi&&t.orientation!=an;return n},hasItems:function(){return this.container.children[0].children.length>0},reflow:function(e){var i=this,n=i.options,r=i.container,o=i.isVertical(),s=e.clone();return i.hasItems()?(o&&(s.y1=0),n.position===Hi?(i.containerCustomReflow(s),i.box=e.clone()):(r.reflow(s),i.containerReflow(e)),t):(i.box=e.clone(),t)},containerReflow:function(e){var t=this,i=t.options,n=i.position==wr||i.position==bi?zr:Hr,r=t.container.box,o=r.clone();(i.offsetX||i.offsetY)&&(r.translate(i.offsetX,i.offsetY),t.container.reflow(r)),o[n+1]=e[n+1],o[n+2]=e[n+2],t.box=o},containerCustomReflow:function(e){var t=this,i=t.options,n=i.offsetX,r=i.offsetY,o=t.container,s=i.width,a=i.height,l=t.isVertical(),c=e.clone();l&&a?c.y2=c.y1+a:!l&&s&&(c.x2=c.x1+s),o.reflow(c),c=o.box,o.reflow(Dt(n,r,n+c.width(),r+c.height()))}}),Y=St.extend({init:function(e){var t=this;St.fn.init.call(t,e),e=t.options,e.categories=e.categories.slice(0),t._ticks={}},options:{type:Si,categories:[],vertical:!1,majorGridLines:{visible:!1,width:1,color:yi},labels:{zIndex:1},justified:!1},range:function(){return{min:0,max:this.options.categories.length}},getTickPositions:function(e){var t,i=this,n=i.options,r=n.vertical,o=n.justified,s=i.lineBox(),a=r?s.height():s.width(),l=e-(o?1:0),c=a/l,d=r?Hr:zr,u=s[d+1],h=[];for(t=0;e>t;t++)h.push(Kt(u,Pi)),u+=c;return o||h.push(s[d+2]),n.reverse?h.reverse():h},getMajorTickPositions:function(){return this.getTicks().majorTicks},getMinorTickPositions:function(){return this.getTicks().minorTicks},getTicks:function(){var e,t=this,i=t._ticks,n=t.options,r=n.categories.length,o=n.reverse,s=n.justified,a=t.lineBox();return e=a.getHash()+r+o+s,i._hash!==e&&(i._hash=e,i.majorTicks=t.getTickPositions(r),i.minorTicks=t.getTickPositions(2*r)),i},getSlot:function(e,t){var i,n,r,o=this,s=o.options,a=o.getTicks().majorTicks,l=s.reverse,c=s.justified,d=s.vertical?Hr:zr,u=o.lineBox(),h=u[d+(l?2:1)],p=u[d+(l?1:2)],f=u.clone(),m=ut.max(1,a.length-(c?0:1)),g=!Jt(t);return e=si(e,0),t=si(t,e),e=ti(e,0,m),t=ti(t-1,e,m),t=ut.max(e,t),i=0===e?h:a[e]||p,n=c?i:a[t],r=t-e,(r>0||e===t)&&(n=a[t+1]||p),g&&c&&(e===m?i=n:n=i),f[d+1]=l?n:i,f[d+2]=l?i:n,f},pointCategoryIndex:function(e){var t,i,n,r,o=this,s=o.options,a=s.reverse,l=s.vertical,c=l?Hr:zr,d=o.lineBox(),u=d[c+1],h=d[c+2],p=e[c],f=o.getMajorTickPositions(),m=xn;if(u>p||p>h)return null;for(n=0;f.length>n;n++)if(t=f[n],i=f[n+1],Jt(i)||(i=a?u:h),a&&(t=i,i=f[n]),s.justified){if(p===i){r=ut.max(0,l?f.length-n-1:n+1);break}ut.abs(p-t)<m&&(m=p-t,r=n)}else if(p>=t&&i>=p){r=n;break}return r},getCategory:function(e){var t=this.pointCategoryIndex(e);return null===t?null:this.options.categories[t]},categoryIndex:function(e){return H(e,this.options.categories)},translateRange:function(e){var t=this,i=t.options,n=t.lineBox(),r=i.vertical?n.height():n.width(),o=i.categories.length,s=r/o,a=Kt(e/s,Bi);return{min:a,max:o+a}},scaleRange:function(e){var t=this,i=t.options,n=i.categories.length,r=e*n;return{min:-r,max:n+r}},labelsCount:function(){return this.options.categories.length},createAxisLabel:function(e,t){var i=this,n=i.options,r=n.dataItems?n.dataItems[e]:null,o=si(n.categories[e],""),s=i.axisLabelText(o,r,t);return new Tt(o,s,e,r,t)},shouldRenderNote:function(e){var t=this.options.categories;return t.length&&t.length>e&&e>=0}}),Q=Y.extend({init:function(e){var t,i,n=this;e=e||{},e=bt({roundToBaseUnit:!0},e,{categories:p(e.categories),min:p(e.min),max:p(e.max)}),e.categories&&e.categories.length>0?(t=(e.baseUnit||"").toLowerCase(),i=t!==pi&&!Gt(t,Ur),i&&(e.baseUnit=n.defaultBaseUnit(e)),(t===pi||e.baseUnitStep===hi)&&n.autoBaseUnit(e),n.groupCategories(e)):e.baseUnit=e.baseUnit||$i,Y.fn.init.call(n,e)},options:{type:Ni,labels:{dateFormats:Wr},autoBaseUnitSteps:{seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10},shouldRenderNote:function(e){var t=this,i=t.range(),n=t.options.categories||[];return jt(e,i.min)>=0&&jt(e,i.max)<=0&&n.length},parseNoteValue:function(e){return p(e)},translateRange:function(e){var t,i,n=this,r=n.options,o=r.baseUnit,s=r.weekStartDay,a=n.lineBox(),l=r.vertical?a.height():a.width(),c=n.range(),d=l/(c.max-c.min),u=Kt(e/d,Bi);return c.min&&c.max&&(t=b(r.min||c.min,u),i=b(r.max||c.max,u),c={min:m(t,0,o,s),max:m(i,0,o,s)}),c},scaleRange:function(e){var t,i=this,n=ut.abs(e),r=i.range(),o=r.min,s=r.max;if(r.min&&r.max){for(;n--;)r=_(o,s),t=ut.round(.1*r),0>e?(o=b(o,t),s=b(s,-t)):(o=b(o,-t),s=b(s,t));r={min:o,max:s}}return r},defaultBaseUnit:function(e){var t,i,n,r,o,s=e.categories,a=Jt(s)?s.length:0,l=xn;for(t=0;a>t;t++)i=s[t],i&&r&&(n=_(i,r),n>0&&(l=ut.min(l,n),o=l>=yr?Rr:l>=vr-3*mr?Dn:l>=gr?Pr:l>=mr?$i:l>=fr?cn:l>=pr?Tn:er)),r=i;return o||$i},_categoryRange:function(e){var t=e._range;return t||(t=e._range=ii(e)),t},range:function(e){var t,i,n,r,o,s,a,l,c;return e=e||this.options,t=e.categories,i=e.baseUnit===pi,n=i?Ur[0]:e.baseUnit,r=e.baseUnitStep||1,o=f(e.min),s=f(e.max),a=this._categoryRange(t),l=f(a.min),c=f(a.max),e.roundToBaseUnit?{min:m(o||l,0,n,e.weekStartDay),max:m(s||c,r,n,e.weekStartDay)}:{min:p(o||l),max:p(s||this._srcMaxDate||c)}},autoBaseUnit:function(e){for(var t,i,n,r=this,o=r.range(bt({},e,{baseUnitStep:1})),s=e.baseUnit===pi,a=0,l=s?Ur[a++]:e.baseUnit,c=o.max-o.min,d=c/_r[l],u=d,h=e.maxDateGroups||r.options.maxDateGroups,p=bt({},r.options.autoBaseUnitSteps,e.autoBaseUnitSteps);!i||d>h;)if(t=t||p[l].slice(0),n=t.shift())i=n,d=u/i;else{if(l===ei(Ur)){i=ut.ceil(u/h);break}if(!s){d>h&&(i=ut.ceil(u/h));break}l=Ur[a++]||ei(Ur),u=c/_r[l],t=null}e.baseUnitStep=i,e.baseUnit=l},_timeScale:function(){var e,t,i,n=this,r=n.range(),o=n.options,s=n.lineBox(),a=o.vertical,l=a?s.height():s.width();return o.justified&&o._collapse!==!1?(t=this._categoryRange(o.categories),i=f(t.max),e=p(i)-r.min):e=r.max-r.min,l/e},getTickPositions:function(e){var t,i,n,r,o,s,a,l,c,d,u,h,p,f,m,g=this,v=g.options,y=v.categories,_=[];if(v.roundToBaseUnit||0===y.length)_=Y.fn.getTickPositions.call(g,e);else{for(t=v.vertical,i=v.reverse,n=g.lineBox(),r=y[0].getTime(),o=si(v._collapse,v.justified),s=y.length-(o?1:0),a=g._timeScale(),l=(t?-1:1)*(i?-1:1),c=1===l?1:2,d=1===l?2:1,u=n[(t?Hr:zr)+c],h=n[(t?Hr:zr)+d],p=u,f=0;s>f;f++)m=y[f]-r,p=u+m*a*l,_.push(Kt(p,Pi));ei(_)!==h&&_.push(h)}return _},groupCategories:function(e){var t,i,n=this,r=e.categories,o=p(ri(r)),s=e.baseUnit,a=e.baseUnitStep||1,l=n.range(e),c=l.max,d=[];for(t=l.min;c>t&&(d.push(t),i=m(t,a,s,e.weekStartDay),!(i>o)||e.max);t=i);e.roundToBaseUnit||S(ei(d),c)||(i>c&&e._collapse!==!1?this._srcMaxDate=c:d.push(c)),e.srcCategories=r,e.categories=d},createAxisLabel:function(e,i){var n,r,o=this.options,s=o.dataItems?o.dataItems[e]:null,a=o.categories[e],l=o.baseUnit,c=!0,d=i.dateFormats[l];return o.justified?(n=v(a,l,o.weekStartDay),c=S(n,a)):o.roundToBaseUnit||(c=!S(this.range().max,a)),c&&(i.format=i.format||d,r=this.axisLabelText(a,s,i))?new Tt(a,r,e,s,i):t},categoryIndex:function(e,t){var i,n,r=this,o=r.options,s=o.categories;return e=p(e),t=t||r.range(),i=o.roundToBaseUnit&&S(t.max,e),e&&(e>t.max||i)?s.length:!e||t.min>e?-1:n=D(e,s)},getSlot:function(e,t){var i=this;return typeof e===On&&(e=i.categoryIndex(e)),typeof t===On&&(t=i.categoryIndex(t)),Y.fn.getSlot.call(i,e,t)}}),K=St.extend({init:function(e,t,i){var n=this;i=i||{},bt(i,{min:p(i.min),max:p(i.max),axisCrossingValue:p(i.axisCrossingValues||i.axisCrossingValue)}),i=n.applyDefaults(p(e),p(t),i),St.fn.init.call(n,i)},options:{type:Ni,majorGridLines:{visible:!0,width:1,color:yi},labels:{dateFormats:Wr}},applyDefaults:function(e,i,n){var r=this,o=n.min||e,s=n.max||i,a=n.baseUnit||r.timeUnits(s-o),l=_r[a],c=v(f(o)-1,a)||p(s),d=y(f(s)+1,a),u=n.majorUnit?n.majorUnit:t,h=u||Ct.ceil(Ct.autoMajorUnit(c.getTime(),d.getTime()),l)/l,g=w(c,d,a),_=Ct.ceil(g,h),b=_-g,k=ut.floor(b/2),x=b-k;return n.baseUnit||delete n.baseUnit,bt({baseUnit:a,min:m(c,-k,a),max:m(d,x,a),minorUnit:h/5},n,{majorUnit:h})},range:function(){var e=this.options;return{min:e.min,max:e.max}},getDivisions:function(e){var t=this.options;return ut.floor(w(t.min,t.max,t.baseUnit)/e+1)},getTickPositions:function(e){var t,i=this,n=i.options,r=n.vertical,o=n.reverse,s=i.lineBox(),a=r?s.height():s.width(),l=w(n.min,n.max,n.baseUnit),c=a/l,d=e*c,u=i.getDivisions(e),h=(r?-1:1)*(o?-1:1),p=1===h?1:2,f=s[(r?Hr:zr)+p],m=[];for(t=0;u>t;t++)m.push(Kt(f,Pi)),f+=d*h;return m},getMajorTickPositions:function(){var e=this;return e.getTickPositions(e.options.majorUnit)},getMinorTickPositions:function(){var e=this;return e.getTickPositions(e.options.minorUnit)},getSlot:function(e,t,i){return Ht.fn.getSlot.call(this,p(e),p(t),i)},getValue:function(e){var t=Ht.fn.getValue.call(this,e);return null!==t?p(t):null},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t){var i,n=this.options,r=e*n.majorUnit,o=m(n.min,r,n.baseUnit),s=t.dateFormats[n.baseUnit];return t.format=t.format||s,i=this.axisLabelText(o,null,t),new Tt(o,i,e,null,t)},timeUnits:function(e){var t=cn;return e>=yr?t=Rr:e>=vr?t=Dn:e>=gr?t=Pr:e>=mr&&(t=$i),t},translateRange:function(e){var t=this,i=t.options,n=i.baseUnit,r=i.weekStartDay,o=t.lineBox(),s=i.vertical?o.height():o.width(),a=t.range(),l=s/(a.max-a.min),c=Kt(e/l,Bi),d=b(i.min,c),u=b(i.max,c);return{min:m(d,0,n,r),max:m(u,0,n,r)}},scaleRange:function(e){for(var t,i,n=this,r=n.options,o=ut.abs(e),s=r.min,a=r.max;o--;)t=_(s,a),i=ut.round(.1*t),0>e?(s=b(s,i),a=b(a,-i)):(s=b(s,-i),a=b(a,i));return{min:s,max:a}},shouldRenderNote:function(e){var t=this.range();return jt(e,t.min)>=0&&jt(e,t.max)<=0}}),X=At.extend({options:{vertical:!1,gap:0,spacing:0},reflow:function(e){var t,i,n=this,r=n.options,o=r.vertical,s=o?Hr:zr,a=n.children,l=r.gap,c=r.spacing,d=a.length,u=d+l+c*(d-1),h=(o?e.height():e.width())/u,p=e[s+1]+h*(l/2);for(i=0;d>i;i++)t=(a[i].box||e).clone(),t[s+1]=p,t[s+2]=p+h,a[i].reflow(t),d-1>i&&(p+=h*c),p+=h},createVisual:ht}),Z=At.extend({options:{vertical:!0},reflow:function(e){var t,i,n,r=this.options,o=r.vertical,s=o?zr:Hr,a=o?Hr:zr,l=e[a+2],c=this.children,d=this.box=new Dt,u=c.length;for(t=0;u>t;t++)i=c[t],i.visible!==!1&&(n=i.box.clone(),n.snapTo(e,s),i.options&&(i.options.stackBase=l),0===t&&(d=this.box=n.clone()),i.reflow(n),d.wrap(n))},createVisual:ht}),J={click:function(t,i){var n=this;t.trigger(rr,{value:n.value,percentage:n.percentage,category:n.category,series:n.series,dataItem:n.dataItem,runningTotal:n.runningTotal,total:n.total,element:e(i.target),originalEvent:i})},hover:function(t,i){var n=this;return t.trigger(or,{value:n.value,percentage:n.percentage,category:n.category,series:n.series,dataItem:n.dataItem,runningTotal:n.runningTotal,total:n.total,element:e(i.target),originalEvent:i})}},ee={createNote:function(){var e=this,t=e.options.notes,i=e.noteText||t.label.text;t.visible!==!1&&Jt(i)&&null!==i&&(e.note=new Ft(e.value,i,e.dataItem,e.category,e.series,e.options.notes),e.append(e.note))}},te=At.extend({init:function(e,t){var i=this;At.fn.init.call(i),i.options=t,i.color=t.color||Fr,i.aboveAxis=si(i.options.aboveAxis,!0),i.value=e},defaults:{border:{width:1},vertical:!0,overlay:{gradient:sn},labels:{visible:!1,format:"{0}"},animation:{type:mi},opacity:1,notes:{label:{}}},render:function(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},createLabel:function(){var e,t,i=this.options,n=i.labels;n.visible&&(n.template?(t=xt(n.template),e=t({dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total,series:this.series})):e=this.formatValue(n.format),this.label=new j(e,bt({vertical:i.vertical},i.labels)),this.append(this.label))},formatValue:function(e){return this.owner.formatPointValue(this,e)},reflow:function(e){var t,i,n,r;if(this.render(),t=this,i=t.options,n=t.label,t.box=e,n&&(n.options.aboveAxis=t.aboveAxis,n.reflow(e)),t.note&&t.note.reflow(e),t.errorBars)for(r=0;t.errorBars.length>r;r++)t.errorBars[r].reflow(e)},createVisual:function(){var e=this.box;this.visible!==!1&&(At.fn.createVisual.call(this),e.width()>0&&e.height()>0&&this.createRect())},createRect:function(){var e=this.options,i=e.border,n=Jt(i.opacity)?i.opacity:e.opacity,r=li.Path.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:{color:this.getBorderColor(),width:i.width,opacity:n,dashType:i.dashType}});Vt(r),this.visual.append(r),U(e)&&this.visual.append(this.createGradientOverlay(r,{baseColor:this.color},bt({end:e.vertical?t:[0,1]},e.overlay)))},createAnimation:function(){var e=this.options;bt(e,{animation:{aboveAxis:this.aboveAxis,vertical:e.vertical,stackBase:e.stackBase}}),At.fn.createAnimation.call(this)},createHighlight:function(e){var t=li.Path.fromRect(this.box.toRect(),e);return Vt(t)},getBorderColor:function(){var e=this,t=e.options,i=e.color,n=t.border,r=n.color,o=n._brightness||gi;return Jt(r)||(r=new Et(i).brightness(o).toHex()),r},tooltipAnchor:function(e,t){var i,n,r,o,s=this,a=s.options,l=s.box,c=a.vertical,d=s.aboveAxis,u=s.owner.pane.clipBox()||l;return c?(i=l.x2+xr,n=d?ut.max(l.y1,u.y1):ut.min(l.y2,u.y2)-t):(r=ut.max(l.x1,u.x1),o=ut.min(l.x2,u.x2),a.isStacked?(i=d?o-e:r,n=l.y1-t-xr):(i=d?o+xr:r-e-xr,n=l.y1)),new Rt(i,n)}}),bt(te.fn,J),bt(te.fn,ee),ie=li.Animation.extend({options:{duration:dn},setup:function(){var e,t,i,n,r,o=this.element,s=this.options,a=o.bbox();a?(e=this.origin=s.aboveAxis?a.bottomLeft():a.topRight(),t=s.vertical?Hr:zr,i=s.stackBase,n=this.fromOffset=new ai.Point,n[t]=si(i,e[t])-e[t],r=this.fromScale=new ai.Point(1,1),r[t]=0,o.transform(ai.transform().scale(r.x,r.y))):this.abort()},step:function(e){var t=Yt(this.fromScale.x,1,e),i=Yt(this.fromScale.y,1,e),n=Yt(this.fromOffset.x,0,e),r=Yt(this.fromOffset.y,0,e);this.element.transform(ai.transform().translate(n,r).scale(t,i,this.origin))}}),li.AnimationFactory.current.register(mi,ie),ne=li.Animation.extend({options:{duration:200,easing:_n},setup:function(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},step:function(e){this.element.opacity(e*this.fadeTo)}}),li.AnimationFactory.current.register(tn,ne),re=function(e,t,i){var n=this;n.errorValue=e,n.initGlobalRanges(e,t,i)},re.prototype=re.fn={percentRegex:/percent(?:\w*)\((\d+)\)/,standardDeviationRegex:RegExp("^"+cr+"(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),initGlobalRanges:function(e,t,i){var n,r,o,s,a,l=this,c=t.data,d=l.standardDeviationRegex.exec(e);d?(l.valueGetter=l.createValueGetter(t,i),n=l.getAverage(c),r=l.getStandardDeviation(c,n,!1),o=d[1]?parseFloat(d[1]):1,s={low:n.value-r*o,high:n.value+r*o},l.globalRange=function(){return s}):e.indexOf&&e.indexOf(lr)>=0&&(l.valueGetter=l.createValueGetter(t,i),a=l.getStandardError(c,l.getAverage(c)),l.globalRange=function(e){return{low:e-a,high:e+a}})},createValueGetter:function(e,t){var i,n,r,o=e.data,s=W.current,a=s.valueFields(e),l=Jt(o[0])?o[0]:{};return ct(l)?(i=t?H(t,a):0,r=wt("["+i+"]")):M(l)?r=wt():typeof l===On&&(n=s.sourceFields(e,a),r=wt(n[H(t,a)])),r},getErrorRange:function(e){var t,i,n,r,o=this,s=o.errorValue;if(Jt(s)){if(o.globalRange)return o.globalRange(e);if(ct(s))t=e-s[0],i=e+s[1];else if(M(n=parseFloat(s)))t=e-n,i=e+n;else{if(!(n=o.percentRegex.exec(s)))throw Error("Invalid ErrorBar value: "+s);r=e*(parseFloat(n[1])/100),t=e-ut.abs(r),i=e+ut.abs(r)}return{low:t,high:i}}},getStandardError:function(e,t){return this.getStandardDeviation(e,t,!0)/ut.sqrt(t.count)},getStandardDeviation:function(e,t,i){var n,r,o=0,s=e.length,a=i?t.count-1:t.count;for(r=0;s>r;r++)n=this.valueGetter(e[r]),M(n)&&(o+=ut.pow(n-t.value,2));return ut.sqrt(o/a)},getAverage:function(e){var t,i,n=0,r=0,o=e.length;for(i=0;o>i;i++)t=this.valueGetter(e[i]),M(t)&&(n+=t,r++);return{value:n/r,count:r}}},oe=At.extend({init:function(e,t){var i=this;At.fn.init.call(i,t),i.plotArea=e,i.categoryAxis=e.seriesCategoryAxis(t.series[0]),i.valueAxisRanges={},i.points=[],i.categoryPoints=[],i.seriesPoints=[],i.seriesOptions=[],i._evalSeries=[],i.render()},options:{series:[],invertAxes:!1,isStacked:!1,clip:!0},render:function(){var e=this;e.traverseDataPoints(ft(e.addValue,e))},pointOptions:function(e,t){var i,n=this.seriesOptions[t];return n||(i=this.pointType().fn.defaults,this.seriesOptions[t]=n=bt({},i,{vertical:!this.options.invertAxes},e)),n},plotValue:function(e){var t,i,n,r,o,s,a;if(!e)return 0;if(this.options.isStacked100&&M(e.value)){for(t=e.categoryIx,i=this.categoryPoints[t],n=0,r=0;i.length>r;r++)if(o=i[r]){if(s=e.series.stack,a=o.series.stack,s&&a&&s.group!==a.group)continue;M(o.value)&&(n+=ut.abs(o.value))}if(n>0)return e.value/n}return e.value},plotRange:function(e,t){var i,n,r,o,s,a,l,c,d,u,h,p,f=e.categoryIx,m=this.categoryPoints[f];if(this.options.isStacked){for(t=t||0,i=this.plotValue(e),n=i>0,r=t,o=!1,s=0;m.length>s&&(a=m[s],e!==a);s++){if(l=e.series.stack,c=a.series.stack,l&&c){if(typeof l===dr&&l!==c)continue;if(l.group&&l.group!==c.group)continue}d=this.plotValue(a),(d>0&&n||0>d&&!n)&&(r+=d,i+=d,o=!0)}return o&&(r-=t),[r,i]}return u=e.series,h=this.seriesValueAxis(u),p=this.categoryAxisCrossingValue(h),[p,e.value||p]},stackLimits:function(e,t){var i,n,r,o,s,a=xn,l=Sn;for(i=0;this.categoryPoints.length>i;i++)for(n=this.categoryPoints[i],r=0;n.length>r;r++)o=n[r],o&&(o.series.stack===t||o.series.axis===e)&&(s=this.plotRange(o,0)[1],Jt(s)&&(l=ut.max(l,s),a=ut.min(a,s)));return{min:a,max:l}},updateStackRange:function(){var e,t,i,n,r,o,s=this,a=s.options.series,l=s.options.isStacked,c={};if(l)for(t=0;a.length>t;t++)i=a[t],n=i.axis,r=n+i.stack,e=c[r],e||(e=s.stackLimits(n,i.stack),o=s.errorTotals,o&&(o.negative.length&&(e.min=ut.min(e.min,ni(o.negative))),o.positive.length&&(e.max=ut.max(e.max,ri(o.positive)))),c[r]=e),s.valueAxisRanges[n]=e},addErrorBar:function(e,t,i){var n,r=this,o=e.value,s=e.series,a=e.seriesIx,l=e.options.errorBars,c=t.fields[Qi],d=t.fields[Ki];M(c)&&M(d)?n={low:c,high:d}:l&&Jt(l.value)&&(r.seriesErrorRanges=r.seriesErrorRanges||[],r.seriesErrorRanges[a]=r.seriesErrorRanges[a]||new re(l.value,s,Dr),n=r.seriesErrorRanges[a].getErrorRange(o)),n&&(e.low=n.low,e.high=n.high,r.addPointErrorBar(e,i))},addPointErrorBar:function(e,t){var i,n,r,o=this,s=e.series,a=e.low,l=e.high,c=!o.options.invertAxes,d=e.options.errorBars;o.options.isStacked?(n=o.stackedErrorRange(e,t),a=n.low,l=n.high):(r={categoryIx:t,series:s},o.updateRange({value:a},r),o.updateRange({value:l},r)),i=new pe(a,l,c,o,s,d),e.errorBars=[i],e.append(i)},stackedErrorRange:function(e,t){var i=this,n=i.plotRange(e,0)[1]-e.value,r=e.low+n,o=e.high+n;return i.errorTotals=i.errorTotals||{positive:[],negative:[]},0>r&&(i.errorTotals.negative[t]=ut.min(i.errorTotals.negative[t]||0,r)),o>0&&(i.errorTotals.positive[t]=ut.max(i.errorTotals.positive[t]||0,o)),{low:r,high:o}},addValue:function(t,i){var n,r,o=this,s=i.categoryIx,a=i.series,l=i.seriesIx,c=o.categoryPoints[s];c||(o.categoryPoints[s]=c=[]),n=o.seriesPoints[l],n||(o.seriesPoints[l]=n=[]),r=o.createPoint(t,i),r&&(e.extend(r,i),r.owner=o,r.dataItem=a.data[s],r.noteText=t.fields.noteText,o.addErrorBar(r,t,s)),o.points.push(r),n.push(r),c.push(r),o.updateRange(t.valueFields,i)},evalPointOptions:function(e,t,i,n,r,o){var s={defaults:r._defaults,excluded:["data","aggregate","_events","tooltip","template"]},a=this._evalSeries[o];return Jt(a)||(this._evalSeries[o]=a=P(e,{},s,!0)),a&&(e=bt({},e),P(e,{value:t,category:i,index:n,series:r,dataItem:r.data[n]},s)),e},updateRange:function(e,t){var i=this,n=t.series.axis,r=e.value,o=i.valueAxisRanges[n];isFinite(r)&&null!==r&&(o=i.valueAxisRanges[n]=o||{min:xn,max:Sn},o.min=ut.min(o.min,r),o.max=ut.max(o.max,r))},seriesValueAxis:function(e){var t=this.plotArea,i=e.axis,n=i?t.namedValueAxes[i]:t.valueAxis;if(!n)throw Error("Unable to locate value axis with name "+i);return n},reflow:function(e){var t,i,n,r=this,o=0,s=r.categorySlots=[],a=r.points,l=r.categoryAxis;r.traverseDataPoints(function(e,c){var d,u,h,p,f=c.categoryIx,m=c.series;t=r.pointValue(e),i=r.seriesValueAxis(m),n=a[o++],d=s[f],d||(s[f]=d=r.categorySlot(l,f,i)),n&&(u=r.plotRange(n,i.startValue()),h=i.getSlot(u[0],u[1],!r.options.clip),h?(p=r.pointSlot(d,h),n.aboveAxis=r.aboveAxis(n,i),r.options.isStacked100&&(n.percentage=r.plotValue(n)),r.reflowPoint(n,p)):n.visible=!1)}),r.reflowCategories(s),r.box=e},aboveAxis:function(e,t){var i=this.categoryAxisCrossingValue(t),n=e.value;return t.options.reverse?i>n:n>=i},categoryAxisCrossingValue:function(e){var t=this.categoryAxis,i=e.options,n=[].concat(i.axisCrossingValues||i.axisCrossingValue);return n[t.axisIndex||0]||0},reflowPoint:function(e,t){e.reflow(t)},reflowCategories:function(){},pointSlot:function(e,t){var i=this,n=i.options,r=n.invertAxes,o=r?t:e,s=r?e:t;return new Dt(o.x1,s.y1,o.x2,s.y2)},categorySlot:function(e,t){return e.getSlot(t)},traverseDataPoints:function(e){var t,i,n,r,o,s=this,a=s.options,l=a.series,d=s.categoryAxis.options.categories||[],u=c(l),h=l.length;for(t=0;u>t;t++)for(i=0;h>i;i++)o=l[i],r=d[t],n=this._bindPoint(o,i,t),e(n,{category:r,categoryIx:t,series:o,seriesIx:i})},_bindPoint:function(e,t,i){var n,r;return this._bindCache||(this._bindCache=[]),n=this._bindCache[t],n||(n=this._bindCache[t]=[]),r=n[i],r||(r=n[i]=W.current.bindPoint(e,i)),r},formatPointValue:function(e,t){return null===e.value?"":Wt(t,e.value)},pointValue:function(e){return e.valueFields.value},createVisual:ht}),se=oe.extend({render:function(){var e=this;oe.fn.render.apply(e),e.updateStackRange()},pointType:function(){return te},clusterType:function(){return X},stackType:function(){return Z},stackLimits:function(e,t){var i=oe.fn.stackLimits.call(this,e,t);return i.min=ut.min(0,i.min),i.max=ut.max(0,i.max),i},createPoint:function(e,t){var i,n,r,o,s=this,a=t.categoryIx,l=t.category,c=t.series,d=t.seriesIx,u=s.pointValue(e),h=s.options,p=s.children,f=s.options.isStacked,m=s.pointType(),g=s.clusterType(),v=this.pointOptions(c,d),y=v.labels;return f&&y.position==Bn&&(y.position=hn),v.isStacked=f,r=e.fields.color||c.color,0>u&&v.negativeColor&&(r=v.negativeColor),v=s.evalPointOptions(v,u,l,a,c,d),mt.isFunction(c.color)&&(r=v.color),i=new m(u,v),i.color=r,n=p[a],n||(n=new g({vertical:h.invertAxes,gap:h.gap,spacing:h.spacing}),s.append(n)),f?(o=s.getStackWrap(c,n),o.append(i)):n.append(i),i},getStackWrap:function(e,t){var i,n,r,o=e.stack,s=o?o.group||o:o,a=t.children;if(typeof s===dr){for(n=0;a.length>n;n++)if(a[n]._stackGroup===s){i=a[n];break}}else i=a[0];return i||(r=this.stackType(),i=new r({vertical:!this.options.invertAxes}),i._stackGroup=s,t.append(i)),i},categorySlot:function(e,t,i){var n,r,o=this,s=o.options,a=e.getSlot(t),l=i.startValue();return s.isStacked&&(r=i.getSlot(l,l,!0),n=s.invertAxes?zr:Hr,a[n+1]=a[n+2]=r[n+1]),a},reflowCategories:function(e){var t,i=this,n=i.children,r=n.length;for(t=0;r>t;t++)n[t].reflow(e[t])}}),ae=te.extend({defaults:{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}},createLabel:function(){var e=this.options.labels,t=bt({},e,e.from),i=bt({},e,e.to);
t.visible&&(this.labelFrom=this._createLabel(t),this.append(this.labelFrom)),i.visible&&(this.labelTo=this._createLabel(i),this.append(this.labelTo))},_createLabel:function(e){var t,i;return e.template?(i=xt(e.template),t=i({dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total,series:this.series})):t=this.formatValue(e.format),new j(t,bt({vertical:this.options.vertical},e))},reflow:function(e){this.render();var t=this,i=t.labelFrom,n=t.labelTo;t.box=e,i&&(i.options.aboveAxis=t.value.from>t.value.to,i.reflow(e)),n&&(n.options.aboveAxis=t.value.to>t.value.from,n.reflow(e)),t.note&&t.note.reflow(e)}}),le=se.extend({pointType:function(){return ae},pointValue:function(e){return e.valueFields},formatPointValue:function(e,t){return null===e.value.from&&null===e.value.to?"":Wt(t,e.value.from,e.value.to)},plotLimits:oe.fn.plotLimits,plotRange:function(e){return e?[e.value.from,e.value.to]:0},updateRange:function(e,t){var i=this,n=t.series.axis,r=e.from,o=e.to,s=i.valueAxisRanges[n];null!==e&&M(r)&&M(o)&&(s=i.valueAxisRanges[n]=s||{min:xn,max:Sn},s.min=ut.min(s.min,r),s.max=ut.max(s.max,r),s.min=ut.min(s.min,o),s.max=ut.max(s.max,o))},aboveAxis:function(e){var t=e.value;return t.to>t.from}}),ce=oe.extend({init:function(e,t){var i=this;i.wrapData(t),oe.fn.init.call(i,e,t)},wrapData:function(e){var t,i,n,r=e.series;for(t=0;r.length>t;t++)n=r[t],i=n.data,i&&!ct(i[0])&&typeof i[0]!=On&&(n.data=[i])},reflowCategories:function(e){var t,i=this,n=i.children,r=n.length;for(t=0;r>t;t++)n[t].reflow(e[t])},plotRange:function(e){var t=e.series,i=this.seriesValueAxis(t),n=this.categoryAxisCrossingValue(i);return[n,e.value.current||n]},createPoint:function(e,t){var i,n,r=this,o=t.categoryIx,s=t.category,a=t.series,l=t.seriesIx,c=e.valueFields,d=r.options,u=r.children,h=bt({vertical:!d.invertAxes,overlay:a.overlay,categoryIx:o,invertAxes:d.invertAxes},a);return h=r.evalPointOptions(h,c,s,o,a,l),i=new de(c,h),n=u[o],n||(n=new X({vertical:d.invertAxes,gap:d.gap,spacing:d.spacing}),r.append(n)),n.append(i),i},updateRange:function(e,t){var i=this,n=t.series.axis,r=e.current,o=e.target,s=i.valueAxisRanges[n];Jt(r)&&!isNaN(r)&&Jt(o&&!isNaN(o))&&(s=i.valueAxisRanges[n]=s||{min:xn,max:Sn},s.min=ut.min.apply(ut,[s.min,r,o]),s.max=ut.max.apply(ut,[s.max,r,o]))},formatPointValue:function(e,t){return Wt(t,e.value.current,e.value.target)},pointValue:function(e){return e.valueFields.current},aboveAxis:function(e){var t=e.value.current;return t>0}}),de=At.extend({init:function(e,t){var i=this;At.fn.init.call(i,t),i.value=e,i.aboveAxis=i.options.aboveAxis},options:{color:Fr,border:{width:1},vertical:!1,animation:{type:mi},opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}</br>Target: {1}"}},render:function(){var e=this,t=e.options;e._rendered||(e._rendered=!0,Jt(e.value.target)&&(e.target=new ue({type:t.target.shape,background:t.target.color||t.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:wr,align:Qn}),e.append(e.target)),e.createNote())},reflow:function(e){this.render();var t,i=this,n=i.options,r=i.owner,o=i.target,s=n.invertAxes,a=r.seriesValueAxis(i.options),l=r.categorySlot(r.categoryAxis,n.categoryIx,a),c=a.getSlot(i.value.target),d=s?c:l,u=s?l:c;o&&(t=new Dt(d.x1,u.y1,d.x2,u.y2),o.options.height=s?t.height():n.target.line.width,o.options.width=s?n.target.line.width:t.width(),o.reflow(t)),i.note&&i.note.reflow(e),i.box=e},createVisual:function(){var e,t;At.fn.createVisual.call(this),e=this.options,t=li.Path.fromRect(this.box.toRect(),{fill:{color:e.color,opacity:e.opacity},stroke:null}),e.border.width>0&&t.options.set("stroke",{color:e.border.color||e.color,width:e.border.width,dashType:e.border.dashType,opacity:si(e.border.opacity,e.opacity)}),Vt(t),this.visual.append(t)},createAnimation:function(){var e=this.options;bt(e,{animation:{aboveAxis:this.aboveAxis,vertical:e.vertical}}),At.fn.createAnimation.call(this)},tooltipAnchor:function(e,t){var i,n,r=this,o=r.options,s=r.box,a=o.vertical,l=r.aboveAxis;return a?(i=s.x2+xr,n=l?s.y1:s.y2-t):o.isStacked?(i=l?s.x2-e:s.x1,n=s.y1-t-xr):(i=l?s.x2+xr:s.x1-e-xr,n=s.y1),new Rt(i,n)},createHighlight:function(e){return li.Path.fromRect(this.box.toRect(),e)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),bt(de.fn,J),bt(de.fn,ee),ue=Ot.extend(),bt(ue.fn,J),he=At.extend({init:function(e,t,i,n,r,o){var s=this;s.low=e,s.high=t,s.isVertical=i,s.chart=n,s.series=r,At.fn.init.call(s,o)},options:{animation:{type:tn,delay:dn},endCaps:!0,line:{width:1},zIndex:1},getAxis:function(){},reflow:function(e){var t,i=this,n=i.options.endCaps,r=i.isVertical,o=i.getAxis(),s=o.getSlot(i.low,i.high),a=e.center(),l=i.getCapsWidth(e,r),c=r?a.x:a.y,d=c-l,u=c+l;r?(t=[Rt(a.x,s.y1),Rt(a.x,s.y2)],n&&t.push(Rt(d,s.y1),Rt(u,s.y1),Rt(d,s.y2),Rt(u,s.y2))):(t=[Rt(s.x1,a.y),Rt(s.x2,a.y)],n&&t.push(Rt(s.x1,d),Rt(s.x1,u),Rt(s.x2,d),Rt(s.x2,u))),i.linePoints=t},getCapsWidth:function(e,t){var i=t?e.width():e.height(),n=ut.min(ut.floor(i/2),Vi)||Vi;return n},createVisual:function(){var e,t,i=this,n=i.options,r={stroke:{color:n.color,width:n.line.width,dashType:n.line.dashType}},o=i.linePoints;for(At.fn.createVisual.call(this),e=0;o.length>e;e+=2)t=new li.Path(r).moveTo(o[e].x,o[e].y).lineTo(o[e+1].x,o[e+1].y),this.visual.append(t)}}),pe=he.extend({getAxis:function(){var e=this,t=e.chart,i=e.series,n=t.seriesValueAxis(i);return n}}),fe=he.extend({getAxis:function(){var e=this,t=e.chart,i=e.series,n=t.seriesAxes(i),r=e.isVertical?n.y:n.x;return r}}),me=At.extend({init:function(e,t){var i=this;At.fn.init.call(i),i.value=e,i.options=t,i.aboveAxis=si(i.options.aboveAxis,!0),i.tooltipTracking=!0},defaults:{vertical:!0,markers:{visible:!0,background:Fr,size:yn,type:Mi,border:{width:2},opacity:1},labels:{visible:!1,position:di,margin:qt(3),padding:qt(4),animation:{type:tn,delay:dn}},notes:{label:{}},highlight:{markers:{border:{}}}},render:function(){var e,t=this,i=t.options,n=i.markers,r=i.labels,o=t.value;t._rendered||(t._rendered=!0,n.visible&&n.size&&(t.marker=t.createMarker(),t.append(t.marker)),r.visible&&(r.template?(e=xt(r.template),o=e({dataItem:t.dataItem,category:t.category,value:t.value,percentage:t.percentage,series:t.series})):r.format&&(o=t.formatValue(r.format)),t.label=new Bt(o,bt({align:Ti,vAlign:Ti,margin:{left:5,right:5},zIndex:this.series.zIndex},r)),t.append(t.label)),t.createNote(),t.errorBar&&t.append(t.errorBar))},markerBorder:function(){var e=this.options.markers,t=e.background,i=bt({color:this.color},e.border);return Jt(i.color)||(i.color=new Et(t).brightness(gi).toHex()),i},createVisual:ht,createMarker:function(){var e=this.options.markers,t=new Ot({type:e.type,width:e.size,height:e.size,rotation:e.rotation,background:e.background,border:this.markerBorder(),opacity:e.opacity,zIndex:this.series.zIndex,animation:e.animation});return t},markerBox:function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},reflow:function(e){var t,i,n,r,o=this,s=o.options,a=s.vertical,l=o.aboveAxis;if(o.render(),o.box=e,t=e.clone(),a?l?t.y1-=t.height():t.y2+=t.height():l?t.x1+=t.width():t.x2-=t.width(),o._childBox=t,o.marker&&o.marker.reflow(t),o.reflowLabel(t),o.errorBars)for(n=0;o.errorBars.length>n;n++)o.errorBars[n].reflow(t);o.note&&(r=o.markerBox(),o.marker||(i=r.center(),r=Dt(i.x,i.y,i.x,i.y)),o.note.reflow(r))},reflowLabel:function(e){var t=this,i=t.options,n=t.label,r=i.labels.position;n&&(r=r===di?wr:r,r=r===vi?bi:r,n.reflow(e),n.box.alignTo(t.markerBox(),r),n.reflow(n.box))},createHighlight:function(){var e=this.options.highlight,t=e.markers,i=this.markerBorder().color,n=this.options.markers,r=new Ot({type:n.type,width:n.size,height:n.size,rotation:n.rotation,background:t.color||i,border:{color:t.border.color,width:t.border.width,opacity:t.border.opacity||0},fillOpacity:t.opacity||1});return r.reflow(this._childBox),r.getElement()},tooltipAnchor:function(e,i){var n=this,r=n.markerBox(),o=n.aboveAxis,s=r.x2+xr,a=o?r.y1-i:r.y2,l=n.owner.pane.clipBox(),c=!l||l.overlaps(r);return c?Rt(s,a):t},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),bt(me.fn,J),bt(me.fn,ee),ge=me.extend({init:function(e,t){var i=this;me.fn.init.call(i,e,t),i.category=e.category},defaults:{labels:{position:Ti},highlight:{opacity:1,border:{width:1,opacity:1}}},createHighlight:function(){var e=this.options.highlight,t=e.border,i=this.options.markers,n=this.box.center(),r=i.size/2-t.width/2,o=new li.Circle(new ai.Circle([n.x,n.y],r),{stroke:{color:t.color||new Et(i.background).brightness(gi).toHex(),width:t.width,opacity:t.opacity},fill:{color:i.background,opacity:e.opacity}});return o}}),ve=At.extend({init:function(e,t,i){var n=this;At.fn.init.call(n),n.linePoints=e,n.series=t,n.seriesIx=i},options:{closed:!1},points:function(e){var t,i,n=this,r=n.linePoints.concat(e||[]),o=[];for(t=0,i=r.length;i>t;t++)r[t].visible!==!1&&o.push(r[t]._childBox.toRect().center());return o},createVisual:function(){var e,t=this.options,i=this.series,n=i._defaults,r=i.color;kt(r)&&n&&(r=n.color),e=li.Path.fromPoints(this.points(),{stroke:{color:r,width:i.width,opacity:i.opacity,dashType:i.dashType},zIndex:i.zIndex}),t.closed&&e.close(),this.visual=e},aliasFor:function(e,t){var i=this,n=i.seriesIx;return i.parent.getNearestPoint(t.x,t.y,n)}}),ye={renderSegments:function(){var e,t,i,n,r,o,s,a,l=this,c=l.options,d=c.series,u=l.seriesPoints,h=u.length;for(this._segments=[],t=0;h>t;t++){for(e=d[t],i=l.sortPoints(u[t]),s=i.length,n=[],o=0;s>o;o++)r=i[o],r?n.push(r):l.seriesMissingValues(e)!==pn&&(n.length>1&&(a=l.createSegment(n,e,t,a),this._addSegment(a)),n=[]);n.length>1&&(a=l.createSegment(n,e,t,a),this._addSegment(a))}},_addSegment:function(e){this._segments.push(e),this.children.unshift(e),e.parent=this},sortPoints:function(e){return e},seriesMissingValues:function(e){var t=e.missingValues,i=!t&&this.options.isStacked;return i?Nr:t||pn},getNearestPoint:function(e,t,i){var n,r,o,s,a,l=new Rt(e,t),c=this.seriesPoints[i],d=xn;for(r=0;c.length>r;r++)o=c[r],o&&Jt(o.value)&&null!==o.value&&o.visible!==!1&&(s=o.box,a=s.center().distanceTo(l),d>a&&(n=o,d=a));return n}},_e=oe.extend({render:function(){var e=this;oe.fn.render.apply(e),e.updateStackRange(),e.renderSegments()},pointType:function(){return me},createPoint:function(e,t){var i,n,r,o=this,s=t.categoryIx,a=t.category,l=t.series,c=t.seriesIx,d=e.valueFields.value,u=o.seriesMissingValues(l);if(!Jt(d)||null===d){if(u!==Nr)return null;d=0}return n=this.pointOptions(l,c),n=o.evalPointOptions(n,d,a,s,l,c),r=e.fields.color||l.color,mt.isFunction(l.color)&&(r=n.color),i=new me(d,n),i.color=r,o.append(i),i},plotRange:function(e){var t,i,n,r,o=this.plotValue(e);if(this.options.isStacked)for(t=e.categoryIx,i=this.categoryPoints[t],n=0;i.length>n&&(r=i[n],e!==r);n++)o+=this.plotValue(r);return[o,o]},createSegment:function(e,t,i){var n,r=t.style;return new(n=r===sr?be:r===ar?we:ve)(e,t,i)}}),bt(_e.fn,ye),be=ve.extend({points:function(e){var t,i=this;return t=i.calculateStepPoints(i.linePoints),e&&e.length&&(t=t.concat(i.calculateStepPoints(e).reverse())),t},calculateStepPoints:function(e){var t,i,n,r,o,s=this,a=s.parent,l=a.plotArea,c=l.seriesCategoryAxis(s.series),d=a.seriesMissingValues(s.series)===pn,u=e.length,h=c.options.reverse,p=c.options.vertical,f=h?2:1,m=h?1:2,g=[];for(n=1;u>n;n++)t=e[n-1],i=e[n],r=t.markerBox().center(),o=i.markerBox().center(),c.options.justified?(g.push(new ai.Point(r.x,r.y)),g.push(p?new ai.Point(r.x,o.y):new ai.Point(o.x,r.y)),g.push(new ai.Point(o.x,o.y))):p?(g.push(new ai.Point(r.x,t.box[Hr+f])),g.push(new ai.Point(r.x,t.box[Hr+m])),d&&g.push(new ai.Point(r.x,i.box[Hr+f])),g.push(new ai.Point(o.x,i.box[Hr+f])),g.push(new ai.Point(o.x,i.box[Hr+m]))):(g.push(new ai.Point(t.box[zr+f],r.y)),g.push(new ai.Point(t.box[zr+m],r.y)),d&&g.push(new ai.Point(i.box[zr+f],r.y)),g.push(new ai.Point(i.box[zr+f],o.y)),g.push(new ai.Point(i.box[zr+m],o.y)));return g||[]}}),we=ve.extend({createVisual:function(){var e,t,i,n=this.series,r=n._defaults,o=n.color;kt(o)&&r&&(o=r.color),e=new It(this.options.closed),t=e.process(this.points()),i=new li.Path({stroke:{color:o,width:n.width,opacity:n.opacity,dashType:n.dashType},zIndex:n.zIndex}),i.segments.push.apply(i.segments,t),this.visual=i}}),ke={points:function(){var e,t,i=this,n=i.parent,r=n.plotArea,o=n.options.invertAxes,s=n.seriesValueAxis(i.series),a=s.lineBox(),l=r.seriesCategoryAxis(i.series),c=l.lineBox(),d=o?c.x1:c.y1,u=i.stackPoints,h=i._linePoints(u),p=o?zr:Hr;return d=ti(d,a[p+1],a[p+2]),!i.stackPoints&&h.length>1&&(e=h[0],t=ei(h),o?(h.unshift(new ai.Point(d,e.y)),h.push(new ai.Point(d,t.y))):(h.unshift(new ai.Point(e.x,d)),h.push(new ai.Point(t.x,d)))),h},createVisual:function(){var e=this.series,t=e._defaults,i=e.color;kt(i)&&t&&(i=t.color),this.visual=new li.Group({zIndex:e.zIndex}),this.createArea(i),this.createLine(i)},createLine:function(e){var t,i=this.series,n=bt({color:e,opacity:i.opacity},i.line);n.visible!==!1&&n.width>0&&(t=li.Path.fromPoints(this._linePoints(),{stroke:{color:n.color,width:n.width,opacity:n.opacity,dashType:n.dashType,lineCap:"butt"}}),this.visual.append(t))},createArea:function(e){var t=this.series,i=li.Path.fromPoints(this.points(),{fill:{color:e,opacity:t.opacity},stroke:null});this.visual.append(i)}},xe=ve.extend({init:function(e,t,i,n){var r=this;r.stackPoints=t,ve.fn.init.call(r,e,i,n)},_linePoints:ve.fn.points}),bt(xe.fn,ke),Ce=_e.extend({createSegment:function(e,t,i,n){var r,o,s=this,a=s.options,l=a.isStacked,c=(t.line||{}).style;return l&&i>0&&n&&(r=n.linePoints,c!==sr&&(r=r.slice(0).reverse())),c===ar?new Se(e,n,l,t,i):new(o=c===sr?Te:xe)(e,r,t,i)},seriesMissingValues:function(e){return e.missingValues||Nr}}),Se=xe.extend({init:function(e,t,i,n,r){var o=this;o.prevSegment=t,o.isStacked=i,ve.fn.init.call(o,e,n,r)},strokeSegments:function(){var e,t,i=this._strokeSegments;return i||(e=new It(this.options.closed),t=ve.fn.points.call(this),i=this._strokeSegments=e.process(t)),i},createVisual:function(){var e=this.series,t=e._defaults,i=e.color;kt(i)&&t&&(i=t.color),this.visual=new li.Group,this.createFill({fill:{color:i,opacity:e.opacity},stroke:null}),this.createStroke({stroke:bt({color:i,opacity:e.opacity,lineCap:"butt"},e.line)})},createFill:function(t){var i,n,r,o,s,a=this.strokeSegments(),l=a.slice(0),c=this.prevSegment;this.isStacked&&c&&(i=c.strokeSegments(),n=ei(i).anchor(),l.push(new li.Segment(n,n,ei(a).anchor())),r=e.map(i,function(e){return new li.Segment(e.anchor(),e.controlOut(),e.controlIn())}).reverse(),Zt(l,r),o=l[0].anchor(),l.push(new li.Segment(o,o,ei(r).anchor()))),s=new li.Path(t),s.segments.push.apply(s.segments,l),this.closeFill(s),this.visual.append(s)},closeFill:function(e){var t=this,i=t.parent,n=t.prevSegment,r=i.plotArea,o=i.options.invertAxes,s=i.seriesValueAxis(t.series),a=s.lineBox(),l=r.seriesCategoryAxis(t.series),c=l.lineBox(),d=o?c.x1:c.y1,u=o?zr:Hr,h=t.strokeSegments(),p=h[0].anchor(),f=ei(h).anchor();d=ti(d,a[u+1],a[u+2]),i.options.isStacked&&n||!(h.length>1)||(o?e.lineTo(d,f.y).lineTo(d,p.y):e.lineTo(f.x,d).lineTo(p.x,d))},createStroke:function(e){if(e.stroke.width>0){var t=new li.Path(e);t.segments.push.apply(t.segments,this.strokeSegments()),this.visual.append(t)}}}),Te=be.extend({init:function(e,t,i,n){var r=this;r.stackPoints=t,be.fn.init.call(r,e,i,n)},_linePoints:be.fn.points}),bt(Te.fn,ke),De=At.extend({init:function(e,t){var i=this;At.fn.init.call(i,t),i.plotArea=e,i.xAxisRanges={},i.yAxisRanges={},i.points=[],i.seriesPoints=[],i.seriesOptions=[],i._evalSeries=[],i.render()},options:{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0},render:function(){var e=this;e.traverseDataPoints(ft(e.addValue,e))},addErrorBar:function(e,t,i){var n,r=this,o=e.value[t],s=t+"Value",a=t+"ErrorLow",l=t+"ErrorHigh",c=i.seriesIx,d=i.series,u=e.options.errorBars,h=i[a],p=i[l];M(o)&&(M(h)&&M(p)&&(n={low:h,high:p}),u&&Jt(u[s])&&(r.seriesErrorRanges=r.seriesErrorRanges||{x:[],y:[]},r.seriesErrorRanges[t][c]=r.seriesErrorRanges[t][c]||new re(u[s],d,t),n=r.seriesErrorRanges[t][c].getErrorRange(o)),n&&r.addPointErrorBar(n,e,t))},addPointErrorBar:function(e,t,i){var n,r=this,o=e.low,s=e.high,a=t.series,l=i===Hr,c=t.options.errorBars,d={};t[i+"Low"]=o,t[i+"High"]=s,t.errorBars=t.errorBars||[],n=new fe(o,s,l,r,a,c),t.errorBars.push(n),t.append(n),d[i]=o,r.updateRange(d,a),d[i]=s,r.updateRange(d,a)},addValue:function(e,t){var i,n=this,r=e.x,o=e.y,s=t.seriesIx,a=n.seriesPoints[s];n.updateRange(e,t.series),Jt(r)&&null!==r&&Jt(o)&&null!==o&&(i=n.createPoint(e,t),i&&(pt(i,t),n.addErrorBar(i,zr,t),n.addErrorBar(i,Hr,t))),n.points.push(i),a.push(i)},updateRange:function(e,t){var i=this,n=e.x,r=e.y,o=t.xAxis,s=t.yAxis,a=i.xAxisRanges[o],l=i.yAxisRanges[s];Jt(n)&&null!==n&&(a=i.xAxisRanges[o]=a||{min:xn,max:Sn},typeof n===dr&&(n=p(n)),a.min=ut.min(a.min,n),a.max=ut.max(a.max,n)),Jt(r)&&null!==r&&(l=i.yAxisRanges[s]=l||{min:xn,max:Sn},typeof r===dr&&(r=p(r)),l.min=ut.min(l.min,r),l.max=ut.max(l.max,r))},evalPointOptions:function(e,t,i){var n=i.series,r=i.seriesIx,o={defaults:n._defaults,excluded:["data","tooltip","tempate"]},s=this._evalSeries[r];return Jt(s)||(this._evalSeries[r]=s=P(e,{},o,!0)),s&&(e=bt({},e),P(e,{value:t,series:n,dataItem:i.dataItem},o)),e},pointType:function(){return me},pointOptions:function(e,t){var i,n=this.seriesOptions[t];return n||(i=this.pointType().fn.defaults,this.seriesOptions[t]=n=bt({},i,{markers:{opacity:e.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},e)),n},createPoint:function(e,t){var i,n=this,r=t.series,o=this.pointOptions(r,t.seriesIx),s=t.color||r.color;return o=n.evalPointOptions(o,e,t),mt.isFunction(r.color)&&(s=o.color),i=new me(e,o),i.color=s,n.append(i),i},seriesAxes:function(e){var t=this.plotArea,i=e.xAxis,n=i?t.namedXAxes[i]:t.axisX,r=e.yAxis,o=r?t.namedYAxes[r]:t.axisY;if(!n)throw Error("Unable to locate X axis with name "+i);if(!o)throw Error("Unable to locate Y axis with name "+r);return{x:n,y:o}},reflow:function(e){var t,i,n=this,r=n.points,o=0,s=!n.options.clip;n.traverseDataPoints(function(e,a){t=r[o++],i=n.seriesAxes(a.series);var l,c=i.x.getSlot(e.x,e.x,s),d=i.y.getSlot(e.y,e.y,s);t&&(c&&d?(l=n.pointSlot(c,d),t.reflow(l)):t.visible=!1)}),n.box=e},pointSlot:function(e,t){return new Dt(e.x1,t.y1,e.x2,t.y2)},traverseDataPoints:function(e){var t,i,n,r,o,s,a,l=this,c=l.options,d=c.series,u=l.seriesPoints;for(i=0;d.length>i;i++)for(n=d[i],r=u[i],r||(u[i]=[]),t=0;n.data.length>t;t++)o=this._bindPoint(n,i,t),s=o.valueFields,a=o.fields,e(s,bt({pointIx:t,series:n,seriesIx:i,dataItem:n.data[t],owner:l},a))},_bindPoint:oe.fn._bindPoint,formatPointValue:function(e,t){var i=e.value;return Wt(t,i.x,i.y)},createVisual:ht}),Me=De.extend({render:function(){var e=this;De.fn.render.call(e),e.renderSegments()},createSegment:function(e,t,i){var n,r=t.style;return new(n=r===ar?we:ve)(e,t,i)}}),bt(Me.fn,ye),Ae=De.extend({options:{tooltip:{format:"{3}"},labels:{format:"{3}"}},addValue:function(e,t){(null!==e.size&&e.size>=0||t.series.negativeValues.visible)&&De.fn.addValue.call(this,e,t)},reflow:function(e){var t=this;t.updateBubblesSize(e),De.fn.reflow.call(t,e)},pointType:function(){return ge},createPoint:function(e,t){var i,n,r=this,o=t.series,s=o.data.length,a=t.pointIx*(dn/s),l={delay:a,duration:dn-a,type:ki},c=t.color||o.color;return 0>e.size&&o.negativeValues.visible&&(c=si(o.negativeValues.color,c)),n=bt({labels:{animation:{delay:a,duration:dn-a}}},this.pointOptions(o,t.seriesIx),{markers:{type:Mi,border:o.border,opacity:o.opacity,animation:l}}),n=r.evalPointOptions(n,e,t),mt.isFunction(o.color)&&(c=n.color),n.markers.background=c,i=new ge(e,n),i.color=c,r.append(i),i},updateBubblesSize:function(e){var t,i,n,r,o,s,a,l,c,d,u,h,p,f,m,g,v=this,y=v.options,_=y.series,b=ut.min(e.width(),e.height());for(t=0;_.length>t;t++)for(n=_[t],r=v.seriesPoints[t],o=v.maxSize(r),s=n.minSize||ut.max(.02*b,10),a=n.maxSize||.2*b,l=s/2,c=a/2,d=ut.PI*l*l,u=ut.PI*c*c,h=u-d,p=h/o,i=0;r.length>i;i++)f=r[i],m=ut.abs(f.value.size)*p,g=ut.sqrt((d+m)/ut.PI),bt(f.options,{markers:{size:2*g,zIndex:c-g},labels:{zIndex:c-g+1}})},maxSize:function(e){var t,i,n=e.length,r=0;for(t=0;n>t;t++)i=e[t].value.size,r=ut.max(r,ut.abs(i));return r},formatPointValue:function(e,t){var i=e.value;return Wt(t,i.x,i.y,i.size,e.category)}}),Ee=At.extend({init:function(e,t){At.fn.init.call(this,t),this.value=e},options:{border:{_brightness:.8},line:{width:2},overlay:{gradient:sn},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{4:d}</th><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}},reflow:function(e){var t,i,n,r=this,o=r.options,s=r.owner,a=r.value,l=s.seriesValueAxis(o),c=[];i=l.getSlot(a.open,a.close),n=l.getSlot(a.low,a.high),i.x1=n.x1=e.x1,i.x2=n.x2=e.x2,r.realBody=i,t=n.center().x,c.push([[t,n.y1],[t,i.y1]]),c.push([[t,i.y2],[t,n.y2]]),r.lines=c,r.box=n.clone().wrap(i),r._rendered||(r._rendered=!0,r.createNote()),r.reflowNote()},reflowNote:function(){var e=this;e.note&&e.note.reflow(e.box)},createVisual:function(){At.fn.createVisual.call(this),this.visual.append(this.mainVisual(this.options)),this.createOverlay()},mainVisual:function(e){var t=new li.Group;return this.createBody(t,e),this.createLines(t,e),t},createBody:function(e,t){var i=li.Path.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:t.opacity},stroke:null});t.border.width>0&&i.options.set("stroke",{color:this.getBorderColor(),width:t.border.width,dashType:t.border.dashType,opacity:si(t.border.opacity,t.opacity)}),Vt(i),e.append(i),U(t)&&e.append(this.createGradientOverlay(i,{baseColor:this.color},bt({},t.overlay)))},createLines:function(e,t){this.drawLines(e,t,this.lines,t.line)},drawLines:function(e,t,i,n){var r,o,s={stroke:{color:n.color||this.color,opacity:si(n.opacity,t.opacity),width:n.width,dashType:n.dashType,lineCap:"butt"}};for(r=0;i.length>r;r++)o=li.Path.fromPoints(i[r],s),Vt(o),e.append(o)},getBorderColor:function(){var e=this,t=e.options,i=t.border,n=i.color;return Jt(n)||(n=new Et(e.color).brightness(i._brightness).toHex()),n},createOverlay:function(){var e=li.Path.fromRect(this.box.toRect(),{fill:{color:Fr,opacity:0},stroke:null});this.visual.append(e)},createHighlight:function(){var e,t=this.options.highlight,i=this.color;return this.color=t.color||this.color,e=this.mainVisual(bt({},this.options,{line:{color:this.getBorderColor()}},t)),this.color=i,e},tooltipAnchor:function(){var e=this,t=e.box,i=e.owner.pane.clipBox()||t;return new Rt(t.x2+xr,ut.max(t.y1,i.y1)+xr)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),bt(Ee.fn,J),bt(Ee.fn,ee),Ie=oe.extend({options:{},reflowCategories:function(e){var t,i=this,n=i.children,r=n.length;for(t=0;r>t;t++)n[t].reflow(e[t])},addValue:function(e,t){var i,n,r=this,o=t.categoryIx,s=t.category,a=t.series,l=t.seriesIx,c=r.options,d=e.valueFields,u=r.children,h=r.splitValue(d),p=E(h),f=r.categoryPoints[o],m=a.data[o];f||(r.categoryPoints[o]=f=[]),p&&(i=r.createPoint(e,t)),n=u[o],n||(n=new X({vertical:c.invertAxes,gap:c.gap,spacing:c.spacing}),r.append(n)),i&&(r.updateRange(d,t),n.append(i),i.categoryIx=o,i.category=s,i.series=a,i.seriesIx=l,i.owner=r,i.dataItem=m,i.noteText=e.fields.noteText),r.points.push(i),f.push(i)},pointType:function(){return Ee},createPoint:function(e,t){var i,n=this,r=t.categoryIx,o=t.category,s=t.series,a=t.seriesIx,l=e.valueFields,c=bt({},s),d=n.pointType(),u=e.fields.color||s.color;return c=n.evalPointOptions(c,l,o,r,s,a),s.type==Ci&&l.open>l.close&&(u=e.fields.downColor||s.downColor||s.color),mt.isFunction(s.color)&&(u=c.color),i=new d(l,c),i.color=u,i},splitValue:function(e){return[e.low,e.open,e.close,e.high]},updateRange:function(e,t){var i=this,n=t.series.axis,r=i.valueAxisRanges[n],o=i.splitValue(e);r=i.valueAxisRanges[n]=r||{min:xn,max:Sn},r=i.valueAxisRanges[n]={min:ut.min.apply(ut,o.concat([r.min])),max:ut.max.apply(ut,o.concat([r.max]))}},formatPointValue:function(e,t){var i=e.value;return Wt(t,i.open,i.high,i.low,i.close,e.category)}}),Pe=Ee.extend({reflow:function(e){var t,i,n,r,o=this,s=o.options,a=o.owner,l=o.value,c=a.seriesValueAxis(s),d=[],u=[],h=[];r=c.getSlot(l.low,l.high),i=c.getSlot(l.open,l.open),n=c.getSlot(l.close,l.close),i.x1=n.x1=r.x1=e.x1,i.x2=n.x2=r.x2=e.x2,t=r.center().x,d.push([i.x1,i.y1]),d.push([t,i.y1]),u.push([t,n.y1]),u.push([n.x2,n.y1]),h.push([t,r.y1]),h.push([t,r.y2]),o.lines=[d,u,h],o.box=r.clone().wrap(i.clone().wrap(n)),o.reflowNote()},createBody:e.noop}),Fe=Ie.extend({pointType:function(){return Pe}}),ze=Ie.extend({addValue:function(e,t){var i,n,r=this,o=t.categoryIx,s=t.category,a=t.series,l=t.seriesIx,c=r.options,d=r.children,u=e.valueFields,h=r.splitValue(u),p=E(h),f=r.categoryPoints[o],m=a.data[o];f||(r.categoryPoints[o]=f=[]),p&&(i=r.createPoint(e,t)),n=d[o],n||(n=new X({vertical:c.invertAxes,gap:c.gap,spacing:c.spacing}),r.append(n)),i&&(r.updateRange(u,t),n.append(i),i.categoryIx=o,i.category=s,i.series=a,i.seriesIx=l,i.owner=r,i.dataItem=m),r.points.push(i),f.push(i)},pointType:function(){return He},splitValue:function(e){return[e.lower,e.q1,e.median,e.q3,e.upper]},updateRange:function(e,t){var i=this,n=t.series.axis,r=i.valueAxisRanges[n],o=i.splitValue(e).concat(i.filterOutliers(e.outliers));Jt(e.mean)&&(o=o.concat(e.mean)),r=i.valueAxisRanges[n]=r||{min:xn,max:Sn},r=i.valueAxisRanges[n]={min:ut.min.apply(ut,o.concat([r.min])),max:ut.max.apply(ut,o.concat([r.max]))}},formatPointValue:function(e,t){var i=e.value;return Wt(t,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,e.category)},filterOutliers:function(e){var t,i,n=(e||[]).length,r=[];for(t=0;n>t;t++)i=e[t],Jt(i)&&T(r,i);return r}}),He=Ee.extend({init:function(e,t){var i=this;At.fn.init.call(i,t),i.value=e,i.createNote()},options:{border:{_brightness:.8},line:{width:2},mean:{width:2,dashType:"dash"},overlay:{gradient:sn},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{6:d}</th><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:yn,type:Fi,background:Fr,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:yn,type:Mi,background:Fr,border:{width:2,opacity:1},opacity:0}},reflow:function(e){var t,i,n,r,o,s=this,a=s.options,l=s.owner,c=s.value,d=l.seriesValueAxis(a);n=d.getSlot(c.q1,c.q3),s.boxSlot=n,i=d.getSlot(c.lower,c.upper),r=d.getSlot(c.median),n.x1=i.x1=e.x1,n.x2=i.x2=e.x2,s.realBody=n,c.mean&&(o=d.getSlot(c.mean),s.meanPoints=[[[e.x1,o.y1],[e.x2,o.y1]]]),t=i.center().x,s.whiskerPoints=[[[t-5,i.y1],[t+5,i.y1],[t,i.y1],[t,n.y1]],[[t-5,i.y2],[t+5,i.y2],[t,i.y2],[t,n.y2]]],s.medianPoints=[[[e.x1,r.y1],[e.x2,r.y1]]],s.box=i.clone().wrap(n),s.reflowNote()},renderOutliers:function(e){var t,i,n,r,o=this,s=e.markers||{},a=o.value,l=a.outliers||[],c=(o.owner.seriesValueAxis(e),3*ut.abs(a.q3-a.q1)),d=[];for(r=0;l.length>r;r++)n=l[r],s=a.q3+c>n&&n>a.q1-c?e.outliers:e.extremes,t=bt({},s.border),Jt(t.color)||(t.color=Jt(o.color)?o.color:new Et(s.background).brightness(gi).toHex()),i=new Ot({type:s.type,width:s.size,height:s.size,rotation:s.rotation,background:s.background,border:t,opacity:s.opacity}),i.value=n,d.push(i);return this.reflowOutliers(d),d},reflowOutliers:function(e){var t,i,n,r=this.owner.seriesValueAxis(this.options),o=this.box.center().x;for(t=0;e.length>t;t++)i=e[t].value,n=r.getSlot(i).move(o),this.box=this.box.wrap(n),e[t].reflow(n)},mainVisual:function(e){var t,i,n=Ee.fn.mainVisual.call(this,e),r=this.renderOutliers(e);for(t=0;r.length>t;t++)i=r[t].getElement(),i&&n.append(i);return n},createLines:function(e,t){this.drawLines(e,t,this.whiskerPoints,t.line),this.drawLines(e,t,this.medianPoints,t.median),this.drawLines(e,t,this.meanPoints,t.mean)},getBorderColor:function(){return this.color?this.color:Ee.getBorderColor.call(this)}}),bt(He.fn,J),Re=At.extend({init:function(e,t,i){var n=this;n.value=e,n.sector=t,At.fn.init.call(n,i)},options:{color:Fr,overlay:{gradient:Kn},border:{width:.5},labels:{visible:!1,distance:35,font:Oi,margin:qt(.5),align:Mi,zIndex:1,position:Bn},animation:{type:Un},highlight:{visible:!0,border:{width:1}},visible:!0},render:function(){var e,t=this,i=t.options,n=i.labels,r=t.value;t._rendered||t.visible===!1||(t._rendered=!0,n.template?(e=xt(n.template),r=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series,percentage:t.percentage})):n.format&&(r=Wt(n.format,r)),n.visible&&r&&(t.label=new Bt(r,bt({},n,{align:Ti,vAlign:"",animation:{type:tn,delay:t.animationDelay}})),t.append(t.label)))},reflow:function(e){var t=this;t.render(),t.box=e,t.reflowLabel()},reflowLabel:function(){var e,t,i,n,r=this,o=r.sector.clone(),s=r.options,a=r.label,l=s.labels,c=l.distance,d=o.middle();a&&(n=a.box.height(),i=a.box.width(),l.position==Ti?(o.r=ut.abs((o.r-n)/2)+n,e=o.point(d),a.reflow(Dt(e.x,e.y-n/2,e.x,e.y))):l.position==hn?(o.r=o.r-n/2,e=o.point(d),a.reflow(Dt(e.x,e.y-n/2,e.x,e.y))):(e=o.clone().expand(c).point(d),e.x>=o.c.x?(t=e.x+i,a.orientation=Qn):(t=e.x-i,a.orientation=fn),a.reflow(Dt(t,e.y-n,e.x,e.y))))},createVisual:function(){var e,t=this,i=t.sector,n=t.options,r=n.border||{},o=r.width>0?{stroke:{color:r.color,width:r.width,opacity:r.opacity,dashType:r.dashType}}:{},s=n.color,a={color:s,opacity:n.opacity};At.fn.createVisual.call(this),t.value&&(e=t.createSegment(i,bt({fill:a,stroke:{opacity:n.opacity},zIndex:n.zIndex},o)),this.visual.append(e),U(n)&&this.visual.append(this.createGradientOverlay(e,{baseColor:s,fallbackFill:a},bt({center:[i.c.x,i.c.y],innerRadius:i.ir,radius:i.r,userSpace:!0},n.overlay))))},createSegment:function(e,t){return t.singleSegment?new li.Circle(new ai.Circle(new ai.Point(e.c.x,e.c.y),e.r),t):Lt.current.createRing(e,t)},createAnimation:function(){var e=this.options,t=this.sector.c;bt(e,{animation:{center:[t.x,t.y],delay:this.animationDelay}}),At.fn.createAnimation.call(this)},createHighlight:function(e){var t=this,i=t.options.highlight||{},n=i.border||{};return t.createSegment(t.sector,bt({},e,{fill:{color:i.color,opacity:i.opacity},stroke:{opacity:n.opacity,width:n.width,color:n.color}}))},tooltipAnchor:function(e,t){var i=this,n=i.sector.adjacentBox(xr,e,t);return new Rt(n.x1,n.y1)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),bt(Re.fn,J),Ne={createLegendItem:function(e,t){var i,n,r,o,s,a=this,l=a.options.legend||{},c=l.labels||{},d=l.inactiveItems||{},u=d.labels||{};t&&t.visibleInLegend!==!1&&(s=t.visible!==!1,i=t.category||"",n=s?c.template:u.template||c.template,n&&(i=xt(n)({text:i,series:t.series,dataItem:t.dataItem,percentage:t.percentage,value:e})),s?(o={},r=(t.series||{}).color):(o={color:u.color,font:u.font},r=(d.markers||{}).color),i&&a.legendItems.push({pointIndex:t.index,text:i,series:t.series,markerColor:r,labels:o}))}},$e=At.extend({init:function(e,t){var i=this;At.fn.init.call(i,t),i.plotArea=e,i.points=[],i.legendItems=[],i.render()},options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4},inactiveItems:{markers:{},labels:{}}},render:function(){var e=this;e.traverseDataPoints(ft(e.addValue,e))},traverseDataPoints:function(e){var t,i,n,r,o,s,a,l,c,d,u,h,p,f=this,m=f.options,g=f.plotArea.options.seriesColors||[],v=g.length,y=m.series,_=y.length,b=0;for(r=0;_>r;r++){for(t=y[r],s=t.data,u=B(t),a=360/u,h=Jt(t.startAngle)?t.startAngle:m.startAngle,r!=_-1&&t.labels.position==Bn&&(t.labels.position=Ti),p=0;s.length>p;p++)i=W.current.bindPoint(t,p),l=i.valueFields.value,c=ut.abs(l),n=i.fields,o=Kt(c*a,Bi),d=1!=s.length&&!!n.explode,
kt(t.color)||(t.color=n.color||g[p%v]),e(l,new $t(null,0,0,h,o),{owner:f,category:n.category||"",index:b,series:t,seriesIx:r,dataItem:s[p],percentage:c/u,explode:d,visibleInLegend:n.visibleInLegend,visible:n.visible,zIndex:_-r,animationDelay:f.animationDelay(p,r,_)}),i.fields.visible!==!1&&(h+=o),b++;b=0}},evalSegmentOptions:function(e,t,i){var n=i.series;P(e,{value:t,series:n,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:n._defaults,excluded:["data","template"]})},addValue:function(e,t,i){var n,r,o=this;o.createLegendItem(e,i),i.visible!==!1&&(r=bt({},i.series,{index:i.index}),o.evalSegmentOptions(r,e,i),n=new Re(e,t,r),pt(n,i),o.append(n),o.points.push(n))},reflow:function(e){var t,i,n,r,o,s,a,l,c=this,d=c.options,u=e.clone(),h=5,p=ut.min(u.width(),u.height()),f=p/2,m=p-.85*p,g=si(d.padding,m),v=Dt(u.x1,u.y1,u.x1+p,u.y1+p),y=v.center(),_=c.seriesConfigs||[],b=u.center(),w=c.points,k=w.length,x=d.series.length,C=[],S=[];for(g=g>f-h?f-h:g,v.translate(b.x-y.x,b.y-y.y),s=f-g,l=Rt(s+v.x1+g,s+v.y1+g),a=0;k>a;a++)r=w[a],o=r.sector,o.r=s,o.c=l,i=r.seriesIx,_.length&&(t=_[i],o.ir=t.ir,o.r=t.r),i==x-1&&r.explode&&(o.c=o.clone().radius(.15*o.r).point(o.middle())),r.reflow(v),n=r.label,n&&n.options.position===Bn&&i==x-1&&(n.orientation===Qn?S.push(n):C.push(n));C.length>0&&(C.sort(c.labelComparator(!0)),c.leftLabelsReflow(C)),S.length>0&&(S.sort(c.labelComparator(!1)),c.rightLabelsReflow(S)),c.box=v},leftLabelsReflow:function(e){var t=this,i=t.distanceBetweenLabels(e);t.distributeLabels(i,e)},rightLabelsReflow:function(e){var t=this,i=t.distanceBetweenLabels(e);t.distributeLabels(i,e)},distanceBetweenLabels:function(e){var t,i,n,r=this,o=r.points,s=o[o.length-1],a=s.sector,l=e[0].box,c=e.length-1,d=a.r+s.options.labels.distance,u=[];for(i=Kt(l.y1-(a.c.y-d-l.height()-l.height()/2)),u.push(i),n=0;c>n;n++)l=e[n].box,t=e[n+1].box,i=Kt(t.y1-l.y2),u.push(i);return i=Kt(a.c.y+d-e[c].box.y2-e[c].box.height()/2),u.push(i),u},distributeLabels:function(e,t){var i,n,r,o,s=this,a=e.length;for(o=0;a>o;o++)for(n=r=o,i=-e[o];i>0&&(n>=0||a>r);)i=s._takeDistance(e,o,--n,i),i=s._takeDistance(e,o,++r,i);s.reflowLabels(e,t)},_takeDistance:function(e,t,i,n){if(e[i]>0){var r=ut.min(e[i],n);n-=r,e[i]-=r,e[t]+=r}return n},reflowLabels:function(e,t){var i,n,r,o,s=this,a=s.points,l=a[a.length-1],c=l.sector,d=t.length,u=l.options.labels,h=u.distance,p=c.c.y-(c.r+h)-t[0].box.height();for(e[0]+=2,o=0;d>o;o++)i=t[o],p+=e[o],r=i.box,n=s.hAlignLabel(r.x2,c.clone().expand(h),p,p+r.height(),i.orientation==Qn),i.orientation==Qn?(u.align!==Mi&&(n=c.r+c.c.x+h),i.reflow(Dt(n+r.width(),p,n,p))):(u.align!==Mi&&(n=c.c.x-c.r-h),i.reflow(Dt(n-r.width(),p,n,p))),p+=r.height()},createVisual:function(){var e,t,i,r,o,s,a,l,c,d,u,h,p,f,m=this,g=m.options,v=g.connectors,y=m.points,_=y.length,b=4;for(At.fn.createVisual.call(this),this._connectorLines=[],a=0;_>a;a++)r=y[a],t=r.sector,i=t.middle(),s=r.label,o={seriesId:r.seriesIx},s&&(e=new li.Path({stroke:{color:v.color,width:v.width},animation:{type:tn,delay:r.animationDelay}}),s.options.position===Bn&&0!==r.value&&(l=s.box,c=t.c,d=t.point(i),u=Rt(l.x1,l.center().y),d=t.clone().expand(v.padding).point(i),e.moveTo(d.x,d.y),s.orientation==Qn?(p=Rt(l.x1-v.padding,l.center().y),f=n(c,d,u,p),u=Rt(p.x-b,p.y),f=f||u,f.x=ut.min(f.x,u.x),m.pointInCircle(f,t.c,t.r+b)||t.c.x>f.x?(h=t.c.x+t.r+b,r.options.labels.align!==Ii?u.x>h?e.lineTo(h,d.y):e.lineTo(d.x+2*b,d.y):e.lineTo(h,d.y),e.lineTo(u.x,p.y)):(f.y=p.y,e.lineTo(f.x,f.y))):(p=Rt(l.x2+v.padding,l.center().y),f=n(c,d,u,p),u=Rt(p.x+b,p.y),f=f||u,f.x=ut.max(f.x,u.x),m.pointInCircle(f,t.c,t.r+b)||f.x>t.c.x?(h=t.c.x-t.r-b,r.options.labels.align!==Ii?h>u.x?e.lineTo(h,d.y):e.lineTo(d.x-2*b,d.y):e.lineTo(h,d.y),e.lineTo(u.x,p.y)):(f.y=p.y,e.lineTo(f.x,f.y))),e.lineTo(p.x,p.y),this._connectorLines.push(e),this.visual.append(e)))},labelComparator:function(e){return e=e?-1:1,function(t,i){return t=(t.parent.sector.middle()+270)%360,i=(i.parent.sector.middle()+270)%360,(t-i)*e}},hAlignLabel:function(e,t,i,n,r){var o=t.c.x,s=t.c.y,a=t.r,l=ut.min(ut.abs(s-i),ut.abs(s-n));return l>a?e:o+ut.sqrt(a*a-l*l)*(r?1:-1)},pointInCircle:function(e,t,i){return d(t.x-e.x)+d(t.y-e.y)<d(i)},formatPointValue:function(e,t){return Wt(t,e.value)},animationDelay:function(e){return e*Vn}}),bt($e.fn,Ne),Oe=Re.extend({options:{overlay:{gradient:Xn},labels:{position:Ti},animation:{type:Un}},reflowLabel:function(){var e,t,i=this,n=i.sector.clone(),r=i.options,o=i.label,s=r.labels,a=n.middle();o&&(t=o.box.height(),s.position==Ti?(n.r-=(n.r-n.ir)/2,e=n.point(a),o.reflow(new Dt(e.x,e.y-t/2,e.x,e.y))):Re.fn.reflowLabel.call(i))},createSegment:function(e,t){return Lt.current.createRing(e,t)}}),bt(Oe.fn,J),Le=$e.extend({options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4}},addValue:function(e,t,i){var n,r,o=this;o.createLegendItem(e,i),e&&i.visible!==!1&&(r=bt({},i.series,{index:i.index}),o.evalSegmentOptions(r,e,i),n=new Oe(e,t,r),pt(n,i),o.append(n),o.points.push(n))},reflow:function(e){var t,i,n,r,o,s,a=this,l=a.options,c=e.clone(),d=5,u=ut.min(c.width(),c.height()),h=u/2,p=u-.85*u,f=si(l.padding,p),m=l.series,g=m.length,v=0,y=0,_=0,b=0;for(a.seriesConfigs=[],f=f>h-d?h-d:f,n=h-f,o=0;g>o;o++)t=m[o],0===o&&Jt(t.holeSize)&&(i=t.holeSize,n-=t.holeSize),Jt(t.size)?n-=t.size:v++,Jt(t.margin)&&o!=g-1&&(n-=t.margin);for(Jt(i)||(b=(h-f)/(g+.75),i=.75*b,n-=i),_=i,o=0;g>o;o++)t=m[o],r=si(t.size,n/v),_+=y,s=_+r,a.seriesConfigs.push({ir:_,r:s}),y=t.margin||0,_=s;$e.fn.reflow.call(a,e)},animationDelay:function(e,t,i){return e*ji+dn*(t+1)/(i+1)}}),Be=se.extend({render:function(){se.fn.render.call(this),this.createSegments()},traverseDataPoints:function(e){var t,i,n,r,o,s,a,l,d,u,h=this.options.series,p=this.categoryAxis.options.categories||[],f=c(h),m=!this.options.invertAxes;for(t=0;h.length>t;t++)for(i=h[t],n=0,r=0,o=0;f>o;o++)s=W.current.bindPoint(i,o),a=s.valueFields.value,l=s.fields.summary,d=n,l?"total"===l.toLowerCase()?(s.valueFields.value=n,d=0,u=n):(s.valueFields.value=r,u=d-r,r=0):M(a)&&(r+=a,n+=a,u=n),e(s,{category:p[o],categoryIx:o,series:i,seriesIx:t,total:n,runningTotal:r,from:d,to:u,isVertical:m})},updateRange:function(e,t){se.fn.updateRange.call(this,{value:t.to},t)},aboveAxis:function(e){return e.value>=0},plotRange:function(e){return[e.from,e.to]},createSegments:function(){var e,t,i,n,r,o,s,a=this.options.series,l=this.seriesPoints,c=this.segments=[];for(e=0;a.length>e;e++)if(t=a[e],i=l[e])for(r=0;i.length>r;r++)o=i[r],o&&n&&(s=new Ue(n,o,t),c.push(s),this.append(s)),n=o}}),Ue=At.extend({init:function(e,t,i){var n=this;At.fn.init.call(n),n.from=e,n.to=t,n.series=i},options:{animation:{type:tn,delay:dn}},linePoints:function(){var e,t,i=[],n=this.from,r=n.box,o=this.to.box;return n.isVertical?(e=n.aboveAxis?r.y1:r.y2,i.push([r.x1,e],[o.x2,e])):(t=n.aboveAxis?r.x2:r.x1,i.push([t,r.y1],[t,o.y2])),i},createVisual:function(){var e,t;At.fn.createVisual.call(this),e=this.options,t=this.series.line||{},this.visual.append(li.Path.fromPoints(this.linePoints(),{stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType}}))}}),Ve=Mt.extend({init:function(e){var t=this;Mt.fn.init.call(t,e),e=t.options,t.id=mt.guid(),t.createTitle(),t.content=new At,t.chartContainer=new We({},t),t.append(t.content),t.axes=[],t.charts=[]},options:{zIndex:-1,shrinkToFit:!0,title:{align:fn},visible:!0},createTitle:function(){var e=this,t=e.options.title;typeof t===On&&(t=bt({},t,{align:t.position,position:wr})),e.title=Ut.buildTitle(t,e,Ve.fn.options.title)},appendAxis:function(e){var t=this;t.content.append(e),t.axes.push(e),e.pane=t},appendChart:function(e){var t=this;t.chartContainer.parent!==t.content&&t.content.append(t.chartContainer),t.charts.push(e),t.chartContainer.append(e),e.pane=t},empty:function(){var e,t=this,i=t.parent;if(i){for(e=0;t.axes.length>e;e++)i.removeAxis(t.axes[e]);for(e=0;t.charts.length>e;e++)i.removeChart(t.charts[e])}t.axes=[],t.charts=[],t.content.destroy(),t.content.children=[],t.chartContainer.children=[]},reflow:function(e){var t,i=this;ei(i.children)===i.content&&(t=i.children.pop()),Mt.fn.reflow.call(i,e),t&&i.children.push(t),i.title&&(i.contentBox.y1+=i.title.box.height())},renderComplete:function(){this.options.visible&&this.createGridLines()},stackRoot:function(){return this},createGridLines:function(){var e,t,i,n,r,o,s=this,a=s.axes,l=a.concat(s.parent.axes),c=[],d=[];for(t=0;a.length>t;t++)for(n=a[t],r=n.options.vertical,e=r?c:d,i=0;l.length>i;i++)0===e.length&&(o=l[i],r!==o.options.vertical&&Zt(e,n.createGridLines(o)))},refresh:function(){this.visual.clear(),this.content.parent=null,this.content.createGradient=e.proxy(this.createGradient,this),this.content.renderVisual(),this.content.parent=this,this.visual.append(this.content.visual),this.renderComplete()},clipBox:function(){return this.chartContainer.clipBox}}),We=At.extend({init:function(e,t){var i=this;At.fn.init.call(i,e),i.pane=t},shouldClip:function(){var e,t=this,i=t.children,n=i.length;for(e=0;n>e;e++)if(i[e].options.clip===!0)return!0;return!1},_clipBox:function(){var e,t,i,n,r=this,o=r.pane,s=o.axes,a=s.length,l=o.box.clone();for(t=0;a>t;t++)n=s[t],e=n.options.vertical?Hr:zr,i=n.lineBox(),l[e+1]=i[e+1],l[e+2]=i[e+2];return l},createVisual:function(){var e,t,i;this.visual=new li.Group({zIndex:0}),this.shouldClip()&&(e=this.clipBox=this._clipBox(),t=e.toRect(),i=li.Path.fromRect(t),this.visual.clip(i),this.unclipLabels())},stackRoot:function(){return this},unclipLabels:function(){var e,t,i,n,r,o=this,s=o.children,a=o.clipBox;for(i=0;s.length>i;i++)for(e=s[i].points||{},r=e.length,n=0;r>n;n++)t=e[n],t&&t.label&&t.label.options.visible&&t.box.overlaps(a)&&(t.label.alignToClipBox&&t.label.alignToClipBox(a),t.label.options.noclip=!0)},destroy:function(){At.fn.destroy.call(this),delete this.parent}}),je=At.extend({init:function(e,t){var i=this;At.fn.init.call(i,t),i.series=e,i.initSeries(),i.charts=[],i.options.legend.items=[],i.axes=[],i.crosshairs=[],i.createPanes(),i.render(),i.createCrosshairs()},options:{series:[],plotArea:{margin:{}},background:"",border:{color:yi,width:0},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}},initSeries:function(){var e,t,i=this.series;for(e=0;i.length>e;e++)t=i[e],t.index=e},createPanes:function(){var e,t,i=this,n=[],r=i.options.panes||[],o=ut.max(r.length,1);for(e=0;o>e;e++)t=new Ve(r[e]),t.paneIndex=e,n.push(t),i.append(t);i.panes=n},destroy:function(){var e,t=this,i=t.charts,n=t.axes,r=t.crosshairs;for(e=0;i.length>e;e++)i[e].destroy();for(e=0;n.length>e;e++)n[e].destroy();for(e=0;r.length>e;e++)r[e].destroy();At.fn.destroy.call(t)},createCrosshairs:function(e){var t,i,n,r,o,s=this;for(e=e||s.panes,t=0;e.length>t;t++)for(n=e[t],i=0;n.axes.length>i;i++)r=n.axes[i],r.options.crosshair&&r.options.crosshair.visible&&(o=new nt(r,r.options.crosshair),s.crosshairs.push(o),n.content.append(o))},removeCrosshairs:function(e){var t,i,n=this,r=n.crosshairs,o=e.axes;for(t=r.length-1;t>=0;t--)for(i=0;o.length>i;i++)if(r[t].axis===o[i]){r.splice(t,1);break}},findPane:function(e){var t,i,n=this,r=n.panes;for(t=0;r.length>t;t++)if(r[t].options.name===e){i=r[t];break}return i||r[0]},findPointPane:function(e){var t,i,n=this,r=n.panes;for(t=0;r.length>t;t++)if(r[t].box.containsPoint(e)){i=r[t];break}return i},appendAxis:function(e){var t=this,i=t.findPane(e.options.pane);i.appendAxis(e),t.axes.push(e),e.plotArea=t},removeAxis:function(e){var t,i,n=this,r=[];for(t=0;n.axes.length>t;t++)i=n.axes[t],e!==i?r.push(i):i.destroy();n.axes=r},appendChart:function(e,t){var i=this;i.charts.push(e),t?t.appendChart(e):i.append(e)},removeChart:function(e){var t,i,n=this,r=[];for(t=0;n.charts.length>t;t++)i=n.charts[t],i!==e?r.push(i):i.destroy();n.charts=r},addToLegend:function(e){var t,i,n,r,o,s,a,l,c,d=e.length,u=[],h=this.options.legend,p=h.labels||{},f=h.inactiveItems||{},m=f.labels||{};for(t=0;d>t;t++)i=e[t],l=i.visible!==!1,i.visibleInLegend!==!1&&(n=i.name||"",c=l?p.template:m.template||p.template,c&&(n=xt(c)({text:n,series:i})),r=i.color,a=i._defaults,kt(r)&&a&&(r=a.color),l?(o={},s=r):(o={color:m.color,font:m.font},s=f.markers.color),n&&u.push({text:n,labels:o,markerColor:s,series:i,active:l}));Zt(h.items,u)},groupAxes:function(e){var t,i,n,r,o=[],s=[];for(n=0;e.length>n;n++)for(t=e[n].axes,r=0;t.length>r;r++)i=t[r],i.options.vertical?s.push(i):o.push(i);return{x:o,y:s,any:o.concat(s)}},groupSeriesByPane:function(){var e,t,i,n=this,r=n.series,o={};for(e=0;r.length>e;e++)i=r[e],t=n.seriesPaneName(i),o[t]?o[t].push(i):o[t]=[i];return o},filterVisibleSeries:function(e){var t,i,n=[];for(t=0;e.length>t;t++)i=e[t],i.visible!==!1&&n.push(i);return n},reflow:function(e){var t=this,i=t.options.plotArea,n=t.panes,r=qt(i.margin);t.box=e.clone().unpad(r),t.reflowPanes(),t.reflowAxes(n),t.reflowCharts(n)},redraw:function(e){var t,i=this;for(e=[].concat(e),this.initSeries(),t=0;e.length>t;t++)i.removeCrosshairs(e[t]),e[t].empty();for(i.render(e),i.reflowAxes(i.panes),i.reflowCharts(e),i.createCrosshairs(e),t=0;e.length>t;t++)e[t].refresh()},axisCrossingValues:function(e,t){var i,n=e.options,r=[].concat(n.axisCrossingValues||n.axisCrossingValue),o=t.length-r.length,s=r[0]||0;for(i=0;o>i;i++)r.push(s);return r},alignAxisTo:function(e,t,i,n){var r=e.getSlot(i,i,!0),o=e.options.reverse?2:1,s=t.getSlot(n,n,!0),a=t.options.reverse?2:1,l=e.box.translate(s[zr+a]-r[zr+o],s[Hr+a]-r[Hr+o]);e.pane!==t.pane&&l.translate(0,e.pane.box.y1-t.pane.box.y1),e.reflow(l)},alignAxes:function(e,t){var i,n,r,o,s=this,a=e[0],l=t[0],c=s.axisCrossingValues(a,t),d=s.axisCrossingValues(l,e),u={},h={},p={},f={};for(o=0;t.length>o;o++)r=t[o],i=r.pane,n=i.id,s.alignAxisTo(r,a,d[o],c[o]),r.options._overlap||(Kt(r.lineBox().x1)===Kt(a.lineBox().x1)&&(u[n]&&r.reflow(r.box.alignTo(u[n].box,fn).translate(-r.options.margin,0)),u[n]=r),Kt(r.lineBox().x2)===Kt(a.lineBox().x2)&&(r._mirrored||(r.options.labels.mirror=!r.options.labels.mirror,r._mirrored=!0),s.alignAxisTo(r,a,d[o],c[o]),h[n]&&r.reflow(r.box.alignTo(h[n].box,Qn).translate(r.options.margin,0)),h[n]=r),0!==o&&l.pane===r.pane&&r.alignTo(l));for(o=0;e.length>o;o++)r=e[o],i=r.pane,n=i.id,s.alignAxisTo(r,l,c[o],d[o]),r.options._overlap||(Kt(r.lineBox().y1)===Kt(l.lineBox().y1)&&(r._mirrored||(r.options.labels.mirror=!r.options.labels.mirror,r._mirrored=!0),s.alignAxisTo(r,l,c[o],d[o]),p[n]&&r.reflow(r.box.alignTo(p[n].box,wr).translate(0,-r.options.margin)),p[n]=r),Kt(r.lineBox().y2,Pi)===Kt(l.lineBox().y2,Pi)&&(f[n]&&r.reflow(r.box.alignTo(f[n].box,bi).translate(0,r.options.margin)),f[n]=r),0!==o&&r.alignTo(a))},shrinkAxisWidth:function(e){var t,i,n,r=this,o=r.groupAxes(e).any,s=x(o),a=0;for(t=0;e.length>t;t++)i=e[t],i.axes.length>0&&(a=ut.max(a,s.width()-i.contentBox.width()));for(t=0;o.length>t;t++)n=o[t],n.options.vertical||n.reflow(n.box.shrink(a,0))},shrinkAxisHeight:function(e){var t,i,n,r,o,s;for(t=0;e.length>t;t++)for(i=e[t],n=i.axes,r=ut.max(0,x(n).height()-i.contentBox.height()),o=0;n.length>o;o++)s=n[o],s.options.vertical&&s.reflow(s.box.shrink(0,r))},fitAxes:function(e){var t,i,n,r,o,s,a,l,c=this,d=c.groupAxes(e).any,u=0;for(a=0;e.length>a;a++)if(o=e[a],t=o.axes,i=o.contentBox,t.length>0)for(n=x(t),u=ut.max(u,i.x1-n.x1),r=ut.max(i.y1-n.y1,i.y2-n.y2),l=0;t.length>l;l++)s=t[l],s.reflow(s.box.translate(0,r));for(a=0;d.length>a;a++)s=d[a],s.reflow(s.box.translate(u,0))},reflowAxes:function(e){var t,i=this,n=i.groupAxes(e);for(t=0;e.length>t;t++)i.reflowPaneAxes(e[t]);n.x.length>0&&n.y.length>0&&(i.alignAxes(n.x,n.y),i.shrinkAxisWidth(e),i.alignAxes(n.x,n.y),i.shrinkAxisHeight(e),i.alignAxes(n.x,n.y),i.fitAxes(e))},reflowPaneAxes:function(e){var t,i=e.axes,n=i.length;if(n>0)for(t=0;n>t;t++)i[t].reflow(e.contentBox)},reflowCharts:function(e){var t,i,n=this,r=n.charts,o=r.length,s=n.box;for(i=0;o>i;i++)t=r[i].pane,(!t||Gt(t,e))&&r[i].reflow(s)},reflowPanes:function(){var e,t,i,n,r,o=this,s=o.box,a=o.panes,l=a.length,c=s.height(),d=l,u=0,h=s.y1;for(e=0;l>e;e++)t=a[e],n=t.options.height,t.options.width=s.width(),t.options.height?(n.indexOf&&n.indexOf("%")&&(r=parseInt(n,10)/100,t.options.height=r*s.height()),t.reflow(s.clone()),c-=t.options.height):u++;for(e=0;l>e;e++)t=a[e],t.options.height||(t.options.height=c/u);for(e=0;l>e;e++)t=a[e],i=s.clone().move(s.x1,h),t.reflow(i),d--,h+=t.options.height},backgroundBox:function(){var e,t,i,n,r,o,s=this,a=s.axes,l=a.length;for(i=0;l>i;i++)for(r=a[i],n=0;l>n;n++)o=a[n],r.options.vertical!==o.options.vertical&&(e=r.lineBox().clone().wrap(o.lineBox()),t=t?t.wrap(e):e);return t||s.box},createVisual:function(){var e,t,i,n;At.fn.createVisual.call(this),e=this.backgroundBox(),t=this.options.plotArea,i=t.border||{},n=li.Path.fromRect(e.toRect(),{fill:{color:t.background,opacity:t.opacity},stroke:{color:i.width?i.color:"",width:i.width},zIndex:-1}),this.appendVisual(n)},pointsByCategoryIndex:function(e){var t,i,n,r,o,s=this.charts,a=[];if(null!==e)for(t=0;s.length>t;t++)if(o=s[t],"_navigator"!==o.pane.options.name&&(n=s[t].categoryPoints[e],n&&n.length))for(i=0;n.length>i;i++)r=n[i],r&&Jt(r.value)&&null!==r.value&&a.push(r);return a},pointsBySeriesIndex:function(e){var t,i,n,r,o,s=this.charts,a=[];for(n=0;s.length>n;n++)for(o=s[n],t=o.points,r=0;t.length>r;r++)i=t[r],i&&i.options.index===e&&a.push(i);return a},paneByPoint:function(e){var t,i,n=this,r=n.panes;for(i=0;r.length>i;i++)if(t=r[i],t.box.containsPoint(e))return t}}),qe=je.extend({init:function(e,t){var i,n,r=this;if(r.namedCategoryAxes={},r.namedValueAxes={},r.valueAxisRangeTracker=new Ge,e.length>0)for(r.invertAxes=Gt(e[0].type,[mi,xi,Er,Mr,qn,ln]),i=0;e.length>i;i++)if(n=e[i].stack,n&&"100%"===n.type){r.stack100=!0;break}je.fn.init.call(r,e,t)},options:{categoryAxis:{categories:[]},valueAxis:{}},render:function(e){var t=this;e=e||t.panes,t.createCategoryAxes(e),t.aggregateCategories(e),t.createCharts(e),t.createValueAxes(e)},removeAxis:function(e){var t=this,i=e.options.name;je.fn.removeAxis.call(t,e),e instanceof Y?delete t.namedCategoryAxes[i]:(t.valueAxisRangeTracker.reset(i),delete t.namedValueAxes[i]),e===t.categoryAxis&&delete t.categoryAxis,e===t.valueAxis&&delete t.valueAxis},createCharts:function(e){var t,i,n,r,o=this,s=o.groupSeriesByPane();for(t=0;e.length>t;t++)i=e[t],n=s[i.options.name||"default"]||[],o.addToLegend(n),r=o.filterVisibleSeries(n),r&&(o.createAreaChart(z(r,[ui,Mr]),i),o.createBarChart(z(r,[Ii,mi]),i),o.createRangeBarChart(z(r,[Gn,qn]),i),o.createBulletChart(z(r,[xi,Ar]),i),o.createCandlestickChart(z(r,Ci),i),o.createBoxPlotChart(z(r,wi),i),o.createOHLCChart(z(r,Ln),i),o.createWaterfallChart(z(r,[Ir,ln]),i),o.createLineChart(z(r,[vn,Er]),i))},aggregateCategories:function(e){var t,i,n,r,o,s=this,a=s.srcSeries||s.series,l=[];for(t=0;a.length>t;t++)i=a[t],n=s.seriesCategoryAxis(i),r=s.findPane(n.options.pane),o=C(n.options.type,Ni),(o||i.categoryField)&&Gt(r,e)&&(i=s.aggregateSeries(i,n)),l.push(i);s.srcSeries=a,s.series=l},aggregateSeries:function(e,t){var n,r,o,s,a,l=t.options,c=C(t.options.type,Ni),d=l.categories,p=l.srcCategories||d,f=e.data,m=[],g=t.range(),v=bt({},e),y=bt({},e),_=u;for(v.data=s=[],c&&(_=h),n=0;f.length>n;n++)r=e.categoryField?_(e.categoryField,f[n]):p[n],o=t.categoryIndex(r,g),o>-1&&(m[o]=m[o]||[],m[o].push(n));for(a=new at(y,W.current,i.current),n=0;d.length>n;n++)s[n]=a.aggregatePoints(m[n],d[n]);return v},appendChart:function(e,t){for(var i=this,n=e.options.series,r=i.seriesCategoryAxis(n[0]),o=r.options.categories,s=ut.max(0,c(n)-o.length);s--;)o.push("");i.valueAxisRangeTracker.update(e.valueAxisRanges),je.fn.appendChart.call(i,e,t)},seriesPaneName:function(t){var i=this,n=i.options,r=t.axis,o=[].concat(n.valueAxis),s=e.grep(o,function(e){return e.name===r})[0],a=n.panes||[{}],l=(a[0]||{}).name||"default",c=(s||{}).pane||l;return c},seriesCategoryAxis:function(e){var t=this,i=e.categoryAxis,n=i?t.namedCategoryAxes[i]:t.categoryAxis;if(!n)throw Error("Unable to locate category axis with name "+i);return n},stackableChartOptions:function(e,t){var i,n=e.stack,r=n&&"100%"===n.type;return Jt(t.options.clip)?i=t.options.clip:r&&(i=!1),{isStacked:n,isStacked100:r,clip:i}},createBarChart:function(e,t){if(0!==e.length){var i=this,n=e[0],r=new se(i,pt({series:e,invertAxes:i.invertAxes,gap:n.gap,spacing:n.spacing},i.stackableChartOptions(n,t)));i.appendChart(r,t)}},createRangeBarChart:function(e,t){if(0!==e.length){var i=this,n=e[0],r=new le(i,{series:e,invertAxes:i.invertAxes,gap:n.gap,spacing:n.spacing});i.appendChart(r,t)}},createBulletChart:function(e,t){if(0!==e.length){var i=this,n=e[0],r=new ce(i,{series:e,invertAxes:i.invertAxes,gap:n.gap,spacing:n.spacing,clip:t.options.clip});i.appendChart(r,t)}},createLineChart:function(e,t){if(0!==e.length){var i=this,n=e[0],r=new _e(i,pt({invertAxes:i.invertAxes,series:e},i.stackableChartOptions(n,t)));i.appendChart(r,t)}},createAreaChart:function(e,t){if(0!==e.length){var i=this,n=e[0],r=new Ce(i,pt({invertAxes:i.invertAxes,series:e},i.stackableChartOptions(n,t)));i.appendChart(r,t)}},createOHLCChart:function(e,t){if(0!==e.length){var i=this,n=e[0],r=new Fe(i,{invertAxes:i.invertAxes,gap:n.gap,series:e,spacing:n.spacing,clip:t.options.clip});i.appendChart(r,t)}},createCandlestickChart:function(e,t){if(0!==e.length){var i=this,n=e[0],r=new Ie(i,{invertAxes:i.invertAxes,gap:n.gap,series:e,spacing:n.spacing,clip:t.options.clip});i.appendChart(r,t)}},createBoxPlotChart:function(e,t){if(0!==e.length){var i=this,n=e[0],r=new ze(i,{invertAxes:i.invertAxes,gap:n.gap,series:e,spacing:n.spacing,clip:t.options.clip});i.appendChart(r,t)}},createWaterfallChart:function(e,t){if(0!==e.length){var i=this,n=e[0],r=new Be(i,{series:e,invertAxes:i.invertAxes,gap:n.gap,spacing:n.spacing});i.appendChart(r,t)}},axisRequiresRounding:function(e,t){var i,n,r=this,o=z(r.series,Vr);for(i=0;o.length>i;i++)if(n=o[i].categoryAxis||"",n===e||!n&&0===t)return!0},createCategoryAxes:function(e){var t,i,n,r,o,s,a,l,c=this,d=c.invertAxes,u=[].concat(c.options.categoryAxis),h=[];for(t=0;u.length>t;t++)if(i=u[t],n=c.findPane(i.pane),Gt(n,e)){if(s=i.name,r=i.categories||[],o=i.type||"",i=bt({vertical:d,axisCrossingValue:d?xn:0},i),Jt(i.justified)||(i.justified=c.isJustified()),c.axisRequiresRounding(s,t)&&(i.justified=!1,i.roundToBaseUnit=!0),a=$(i,r[0])?new Q(i):new Y(i),s){if(c.namedCategoryAxes[s])throw Error("Category axis with name "+s+" is already defined");c.namedCategoryAxes[s]=a}a.axisIndex=t,h.push(a),c.appendAxis(a)}l=c.categoryAxis||h[0],c.categoryAxis=l,d?c.axisY=l:c.axisX=l},isJustified:function(){var e,t,i=this,n=i.series;for(e=0;n.length>e;e++)if(t=n[e],!Gt(t.type,[ui,Mr]))return!1;return!0},createValueAxes:function(e){var t,i,n,r,o,s,a,l,c,d=this,u=d.valueAxisRangeTracker,h=u.query(),p=[].concat(d.options.valueAxis),f=d.invertAxes,m={vertical:!f},g=[];for(d.stack100&&(m.roundToMajorUnit=!1,m.labels={format:"P0"}),c=0;p.length>c;c++)if(t=p[c],i=d.findPane(t.pane),Gt(i,e)){if(l=t.name,a=C(t.type,bn)?{min:.1,max:1}:{min:0,max:1},o=u.query(l)||h||a,0===c&&o&&h&&(o.min=ut.min(o.min,h.min),o.max=ut.max(o.max,h.max)),s=C(t.type,bn)?zt:Ht,n=new s(o.min,o.max,bt({},m,t)),l){if(d.namedValueAxes[l])throw Error("Value axis with name "+l+" is already defined");d.namedValueAxes[l]=n}n.axisIndex=c,g.push(n),d.appendAxis(n)}r=d.valueAxis||g[0],d.valueAxis=r,f?d.axisX=r:d.axisY=r},click:function(t,i){var n,r,o,s=this,a=t._eventCoordinates(i),l=new Rt(a.x,a.y),c=s.pointPane(l),d=[],u=[];if(c){for(n=c.axes,r=0;n.length>r;r++)o=n[r],o.getValue?T(u,o.getValue(l)):T(d,o.getCategory(l));0===d.length&&T(d,s.categoryAxis.getCategory(l)),d.length>0&&u.length>0&&t.trigger(Wn,{element:e(i.target),originalEvent:i,category:k(d),value:k(u)})}},pointPane:function(e){var t,i,n=this,r=n.panes;for(i=0;r.length>i;i++)if(t=r[i],t.contentBox.containsPoint(e))return t}}),Ge=gt.extend({init:function(){var e=this;e.axisRanges={}},update:function(e){var t,i,n,r=this,o=r.axisRanges;for(n in e)t=o[n],i=e[n],o[n]=t=t||{min:xn,max:Sn},t.min=ut.min(t.min,i.min),t.max=ut.max(t.max,i.max)},reset:function(e){this.axisRanges[e]=t},query:function(e){return this.axisRanges[e]}}),Ye=je.extend({init:function(e,t){var i=this;i.namedXAxes={},i.namedYAxes={},i.xAxisRangeTracker=new Ge,i.yAxisRangeTracker=new Ge,je.fn.init.call(i,e,t)},options:{xAxis:{},yAxis:{}},render:function(e){var t,i,n,r,o=this,s=o.groupSeriesByPane();for(e=e||o.panes,t=0;e.length>t;t++)i=e[t],n=s[i.options.name||"default"]||[],o.addToLegend(n),r=o.filterVisibleSeries(n),r&&(o.createScatterChart(z(r,Zn),i),o.createScatterLineChart(z(r,Jn),i),o.createBubbleChart(z(r,ki),i));o.createAxes(e)},appendChart:function(e,t){var i=this;i.xAxisRangeTracker.update(e.xAxisRanges),i.yAxisRangeTracker.update(e.yAxisRanges),je.fn.appendChart.call(i,e,t)},removeAxis:function(e){var t=this,i=e.options.name;je.fn.removeAxis.call(t,e),e.options.vertical?(t.yAxisRangeTracker.reset(i),delete t.namedYAxes[i]):(t.xAxisRangeTracker.reset(i),delete t.namedXAxes[i]),e===t.axisX&&delete t.axisX,e===t.axisY&&delete t.axisY},seriesPaneName:function(t){var i=this,n=i.options,r=t.xAxis,o=[].concat(n.xAxis),s=e.grep(o,function(e){return e.name===r})[0],a=t.yAxis,l=[].concat(n.yAxis),c=e.grep(l,function(e){return e.name===a})[0],d=n.panes||[{}],u=d[0].name||"default",h=(s||{}).pane||(c||{}).pane||u;return h},createScatterChart:function(e,t){var i=this;e.length>0&&i.appendChart(new De(i,{series:e,clip:t.options.clip}),t)},createScatterLineChart:function(e,t){var i=this;e.length>0&&i.appendChart(new Me(i,{series:e,clip:t.options.clip}),t)},createBubbleChart:function(e,t){var i=this;e.length>0&&i.appendChart(new Ae(i,{series:e,clip:t.options.clip}),t)},createXYAxis:function(e,t,i){var n,r,o,s,a,l,c,d,u=this,h=e.name,p=t?u.namedYAxes:u.namedXAxes,f=t?u.yAxisRangeTracker:u.xAxisRangeTracker,m=bt({},e,{vertical:t}),g=C(m.type,bn),v=f.query(),y=g?{min:.1,max:1}:{min:0,max:1},_=f.query(h)||v||y,b=u.series,w=[m.min,m.max];for(o=0;b.length>o;o++)if(s=b[o],a=s[t?"yAxis":"xAxis"],a==m.name||0===i&&!a){l=W.current.bindPoint(s,0).valueFields,w.push(l[t?"y":"x"]);break}for(0===i&&v&&(_.min=ut.min(_.min,v.min),_.max=ut.max(_.max,v.max)),d=0;w.length>d;d++)if(w[d]instanceof Date){c=!0;break}if(r=C(m.type,Ni)||!m.type&&c?K:g?zt:Ht,n=new r(_.min,_.max,m),h){if(p[h])throw Error((t?"Y":"X")+" axis with name "+h+" is already defined");p[h]=n}return u.appendAxis(n),n},createAxes:function(e){var t,i=this,n=i.options,r=[].concat(n.xAxis),o=[],s=[].concat(n.yAxis),a=[];lt(r,function(n){t=i.findPane(this.pane),Gt(t,e)&&o.push(i.createXYAxis(this,!1,n))}),lt(s,function(n){t=i.findPane(this.pane),Gt(t,e)&&a.push(i.createXYAxis(this,!0,n))}),i.axisX=i.axisX||o[0],i.axisY=i.axisY||a[0]},click:function(t,i){var n,r,o,s,a=this,l=t._eventCoordinates(i),c=new Rt(l.x,l.y),d=a.axes,u=d.length,h=[],p=[];for(n=0;u>n;n++)r=d[n],s=r.options.vertical?p:h,o=r.getValue(c),null!==o&&s.push(o);h.length>0&&p.length>0&&t.trigger(Wn,{element:e(i.target),originalEvent:i,x:k(h),y:k(p)})}}),Qe=je.extend({render:function(){var e=this,t=e.series;e.createPieChart(t)},createPieChart:function(e){var t=this,i=e[0],n=new $e(t,{series:e,padding:i.padding,startAngle:i.startAngle,connectors:i.connectors,legend:t.options.legend});t.appendChart(n)},appendChart:function(e,t){je.fn.appendChart.call(this,e,t),Zt(this.options.legend.items,e.legendItems)}}),Ke=Qe.extend({render:function(){var e=this,t=e.series;e.createDonutChart(t)},createDonutChart:function(e){var t=this,i=e[0],n=new Le(t,{series:e,padding:i.padding,connectors:i.connectors,legend:t.options.legend});t.appendChart(n)}}),Xe=li.Animation.extend({options:{easing:"easeOutElastic",duration:dn},setup:function(){this.element.transform(ai.transform().scale(0,0,this.options.center))},step:function(e){this.element.transform(ai.transform().scale(e,e,this.options.center))}}),li.AnimationFactory.current.register(Un,Xe),Ze=li.Animation.extend({options:{easing:"easeOutElastic"},setup:function(){var e=this.center=this.element.bbox().center();this.element.transform(ai.transform().scale(0,0,e))},step:function(e){this.element.transform(ai.transform().scale(e,e,this.center))}}),li.AnimationFactory.current.register(ki,Ze),Je=gt.extend({init:function(){this._points=[]},destroy:function(){this._points=[]},show:function(e){var t,i;for(e=[].concat(e),this.hide(),t=0;e.length>t;t++)i=e[t],i&&i.toggleHighlight&&(i.toggleHighlight(!0),this._points.push(i))},hide:function(){for(var e=this._points;e.length;)e.pop().toggleHighlight(!1)},isHighlighted:function(e){var t,i,n=this._points;for(t=0;n.length>t;t++)if(i=n[t],e==i)return!0;return!1}}),et=gt.extend({init:function(t,i){var n=this;n.options=bt({},n.options,i),n.chartElement=t,n.template=et.template,n.template||(n.template=et.template=oi("<div class='"+zi+"tooltip "+zi+"chart-tooltip' style='display:none; position: absolute; font: #= d.font #;border: #= d.border.width #px solid;opacity: #= d.opacity #; filter: alpha(opacity=#= d.opacity * 100 #);'></div>")),n.element=e(n.template(n.options)),n.move=ft(n.move,n),n._mouseleave=ft(n._mouseleave,n)},destroy:function(){this._clearShowTimeout(),this.element&&(this.element.off(Mn).remove(),this.element=null)},options:{border:{width:1},opacity:1,animation:{duration:kr}},move:function(){var e,t=this,i=t.options,n=t.element;t.anchor&&(e=t._offset(),t.visible||n.css({top:e.top,left:e.left}),t._ensureElement(document.body),n.stop(!0,!0).show().animate({left:e.left,top:e.top},i.animation.duration),t.visible=!0)},_clearShowTimeout:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)},_padding:function(){if(!this._chartPadding){var e=this.chartElement;this._chartPadding={top:parseInt(e.css("paddingTop"),10),left:parseInt(e.css("paddingLeft"),10)}}return this._chartPadding},_offset:function(){var t=this,i=t._measure(),n=t.anchor,r=t._padding(),o=t.chartElement.offset(),s=Kt(n.y+r.top+o.top),a=Kt(n.x+r.left+o.left),l=mt.support.zoomLevel(),c=e(window),d=window.pageYOffset||document.documentElement.scrollTop||0,u=window.pageXOffset||document.documentElement.scrollLeft||0;return s+=t._fit(s-d,i.height,c.outerHeight()/l),a+=t._fit(a-u,i.width,c.outerWidth()/l),{top:s,left:a}},setStyle:function(e,t){var i,n,r=e.background,o=e.border.color;t&&(i=t.color||t.options.color,r=si(r,i),o=si(o,i)),Jt(e.color)||(n=new Et(r).percBrightness(),this.element.toggleClass(zi+Tr,n>180)),this.element.css({backgroundColor:r,borderColor:o,font:e.font,color:e.color,opacity:e.opacity,borderWidth:e.border.width})},show:function(){this._clearShowTimeout(),this.showTimeout=setTimeout(this.move,Cr)},hide:function(){var e=this;clearTimeout(e.showTimeout),e._hideElement(),e.visible&&(e.point=null,e.visible=!1,e.index=null)},_measure:function(){this._ensureElement();var e={width:this.element.outerWidth(),height:this.element.outerHeight()};return e},_ensureElement:function(){this.element&&this.element.appendTo(document.body).on(Mn,this._mouseleave)},_mouseleave:function(t){var i=t.relatedTarget,n=this.chartElement[0];i&&i!==n&&!e.contains(n,i)&&this.hide()},_hideElement:function(){this.element&&this.element.fadeOut({always:function(){e(this).off(Mn).remove()}})},_pointContent:function(e){var t,i,n=this,r=bt({},n.options,e.options.tooltip);return Jt(e.value)&&(t=""+e.value),r.template?(i=xt(r.template),t=i({value:e.value,category:e.category,series:e.series,dataItem:e.dataItem,percentage:e.percentage,runningTotal:e.runningTotal,total:e.total,low:e.low,high:e.high,xLow:e.xLow,xHigh:e.xHigh,yLow:e.yLow,yHigh:e.yHigh})):r.format&&(t=e.formatValue(r.format)),t},_pointAnchor:function(e){var t=this._measure();return e.tooltipAnchor(t.width,t.height)},_fit:function(e,t,i){var n=0;return e+t>i&&(n=i-(e+t)),0>e&&(n=-e),n}}),tt=et.extend({show:function(e){var t=this,i=bt({},t.options,e.options.tooltip);e&&e.tooltipAnchor&&t.element&&(t.element.html(t._pointContent(e)),t.anchor=t._pointAnchor(e),t.anchor?(t.setStyle(i,e),et.fn.show.call(t,e)):t.hide())}}),it=et.extend({init:function(e,t,i){var n=this;et.fn.init.call(n,e,i),n.plotArea=t},options:{sharedTemplate:"<table><th colspan='2'>#= categoryText #</th># for(var i = 0; i < points.length; i++) { ## var point = points[i]; #<tr># if(point.series.name) { # <td> #= point.series.name #:</td># } #<td>#= content(point) #</td></tr># } #</table>",
categoryFormat:"{0:d}"},showAt:function(t,i){var n,r=this,o=r.options,s=r.plotArea,a=s.categoryAxis,l=a.pointCategoryIndex(i),c=a.getCategory(i),d=a.getSlot(l);t=e.grep(t,function(e){var t=e.series.tooltip,i=t&&t.visible===!1;return!i}),t.length>0&&(n=r._content(t,c),r.element.html(n),r.anchor=r._slotAnchor(i,d),r.setStyle(o,t[0]),et.fn.show.call(r))},_slotAnchor:function(e,t){var i,n=this,r=n.plotArea,o=r.categoryAxis,s=this._measure(),a=e.y-s.height/2;return i=o.options.vertical?Rt(e.x,a):Rt(t.center().x,a)},_content:function(e,t){var i,n,r=this;return i=mt.template(r.options.sharedTemplate),n=i({points:e,category:t,categoryText:Wt(r.options.categoryFormat,t),content:r._pointContent})}}),nt=At.extend({init:function(e,t){At.fn.init.call(this,t),this.axis=e,this.stickyMode=e instanceof Y},options:{color:yi,width:1,zIndex:-1,tooltip:{visible:!1}},showAt:function(e){var t;this.point=e,this.moveLine(),this.line.visible(!0),t=this.options.tooltip,t.visible&&(this.tooltip||(this.tooltip=new rt(this,bt({},t,{stickyMode:this.stickyMode}))),this.tooltip.showAt(e))},hide:function(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},moveLine:function(){var e,t,i,n=this,r=n.axis,o=r.options.vertical,s=n.getBox(),a=n.point,l=o?Hr:zr;t=new ai.Point(s.x1,s.y1),i=o?new ai.Point(s.x2,s.y1):new ai.Point(s.x1,s.y2),a&&(n.stickyMode?(e=r.getSlot(r.pointCategoryIndex(a)),t[l]=i[l]=e.center()[l]):t[l]=i[l]=a[l]),n.box=s,this.line.moveTo(t).lineTo(i)},getBox:function(){var e,t,i,n=this,r=n.axis,o=r.pane.axes,s=o.length,a=r.options.vertical,l=r.lineBox().clone(),c=a?zr:Hr;for(i=0;s>i;i++)t=o[i],t.options.vertical!=a&&(e?e.wrap(t.lineBox()):e=t.lineBox().clone());return l[c+1]=e[c+1],l[c+2]=e[c+2],l},createVisual:function(){At.fn.createVisual.call(this);var e=this.options;this.line=new li.Path({stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},destroy:function(){var e=this;e.tooltip&&e.tooltip.destroy(),At.fn.destroy.call(e)}}),rt=et.extend({init:function(e,t){var i=this,n=e.axis.getRoot().chart.element;i.crosshair=e,et.fn.init.call(i,n,bt({},i.options,{background:e.axis.plotArea.options.seriesColors[0]},t)),i.setStyle(i.options)},options:{padding:10},showAt:function(e){var t=this,i=t.element;i&&(t.point=e,t.element.html(t.content(e)),t.anchor=t.getAnchor(),t.move())},move:function(){var e=this,t=e.element,i=e._offset();e._ensureElement(),t.css({top:i.top,left:i.left}).show()},content:function(e){var t,i,n,r=this,o=r.options,s=r.crosshair.axis,a=s.options;return i=t=s[o.stickyMode?"getCategory":"getValue"](e),o.template?(n=xt(o.template),t=n({value:i})):o.format?t=Wt(o.format,i):a.type===Ni&&(t=Wt(a.labels.dateFormats[a.baseUnit],i)),t},getAnchor:function(){var e,t=this,i=t.options,n=i.position,r=this.crosshair,o=!r.axis.options.vertical,s=r.line.bbox(),a=this._measure(),l=a.width/2,c=a.height/2,d=i.padding;return e=o?n===bi?s.bottomLeft().translate(-l,d):s.topLeft().translate(-l,-a.height-d):n===fn?s.topLeft().translate(-a.width-d,-c):s.topRight().translate(d,-c)},hide:function(){this.element.hide(),this.point=null},destroy:function(){et.fn.destroy.call(this),this.point=null}}),ot={min:function(e){var t,i,n=xn,r=e.length;for(t=0;r>t;t++)i=e[t],M(i)&&(n=ut.min(n,i));return n===xn?e[0]:n},max:function(e){var t,i,n=Sn,r=e.length;for(t=0;r>t;t++)i=e[t],M(i)&&(n=ut.max(n,i));return n===Sn?e[0]:n},sum:function(e){var t,i,n=e.length,r=0;for(t=0;n>t;t++)i=e[t],M(i)&&(r+=i);return r},sumOrNull:function(e){var t=null;return A(e)&&(t=ot.sum(e)),t},count:function(e){var t,i,n=e.length,r=0;for(t=0;n>t;t++)i=e[t],null!==i&&Jt(i)&&r++;return r},avg:function(e){var t=e[0],i=A(e);return i>0&&(t=ot.sum(e)/i),t},first:function(e){var t,i,n=e.length;for(t=0;n>t;t++)if(i=e[t],null!==i&&Jt(i))return i;return e[0]}},i.prototype={register:function(e,t){for(var i=0;e.length>i;i++)this._defaults[e[i]]=t},query:function(e){return this._defaults[e]}},i.current=new i,st=vt.extend({init:function(t,i,n){var r,o,s=this,a=t.element,l=i.lineBox(),c=s.getValueAxis(i),d=c.lineBox(),u="."+zi;vt.fn.init.call(s),s.options=bt({},s.options,n),n=s.options,s.chart=t,s.chartElement=a,s.categoryAxis=i,s._dateAxis=s.categoryAxis instanceof Q,s.valueAxis=c,s._dateAxis&&bt(n,{min:p(n.min),max:p(n.max),from:p(n.from),to:p(n.to)}),s.template=st.template,s.template||(s.template=st.template=oi("<div class='"+zi+"selector' style='width: #= d.width #px; height: #= d.height #px; top: #= d.offset.top #px; left: #= d.offset.left #px;'><div class='"+zi+"mask'></div><div class='"+zi+"mask'></div><div class='"+zi+"selection'><div class='"+zi+"selection-bg'></div><div class='"+zi+"handle "+zi+"leftHandle'><div></div></div><div class='"+zi+"handle "+zi+"rightHandle'><div></div></div></div></div>")),o={left:parseInt(a.css("paddingLeft"),10),right:parseInt(a.css("paddingTop"),10)},s.options=bt({},{width:l.width(),height:d.height(),padding:o,offset:{left:d.x2+o.left,top:d.y1+o.right},from:n.min,to:n.max},n),s.options.visible&&(s.wrapper=r=e(s.template(s.options)).appendTo(a),s.selection=r.find(u+"selection"),s.leftMask=r.find(u+"mask").first(),s.rightMask=r.find(u+"mask").last(),s.leftHandle=r.find(u+"leftHandle"),s.rightHandle=r.find(u+"rightHandle"),s.options.selection={border:{left:parseFloat(s.selection.css("border-left-width"),10),right:parseFloat(s.selection.css("border-right-width"),10)}},s.leftHandle.css("top",(s.selection.height()-s.leftHandle.height())/2),s.rightHandle.css("top",(s.selection.height()-s.rightHandle.height())/2),s.set(s._index(n.from),s._index(n.to)),s.bind(s.events,s.options),s.wrapper[0].style.cssText=s.wrapper[0].style.cssText,s.wrapper.on(Hn,ft(s._mousewheel,s)),mt.UserEvents?s.userEvents=new mt.UserEvents(s.wrapper,{global:!0,stopPropagation:!0,multiTouch:!0,start:ft(s._start,s),move:ft(s._move,s),end:ft(s._end,s),tap:ft(s._tap,s),gesturestart:ft(s._gesturechange,s),gesturechange:ft(s._gesturechange,s)}):s.leftHandle.add(s.rightHandle).removeClass(zi+"handle"))},events:[tr,ir,nr],options:{visible:!0,mousewheel:{zoom:_i},min:Sn,max:xn},destroy:function(){var e=this,t=e.userEvents;t&&t.destroy(),e._state=null,this.wrapper.remove()},_rangeEventArgs:function(e){var t=this;return{axis:t.categoryAxis.options,from:t._value(e.from),to:t._value(e.to)}},_start:function(t){var i,n=this,r=n.options,o=e(t.event.target);!n._state&&o&&(n.chart._unsetActivePoint(),n._state={moveTarget:o.parents(".k-handle").add(o).first(),startLocation:t.x?t.x.location:0,range:{from:n._index(r.from),to:n._index(r.to)}},i=n._rangeEventArgs({from:n._index(r.from),to:n._index(r.to)}),n.trigger(tr,i)&&(n.userEvents.cancel(),n._state=null))},_move:function(e){if(this._state){var t=this,i=t._state,n=t.options,r=t.categoryAxis.options.categories,o=t._index(n.from),s=t._index(n.to),a=t._index(n.min),l=t._index(n.max),c=i.startLocation-e.x.location,d=i.range,u={from:d.from,to:d.to},h=d.to-d.from,p=i.moveTarget,f=t.wrapper.width()/(r.length-1),m=ut.round(c/f);p&&(e.preventDefault(),p.is(".k-selection, .k-selection-bg")?(d.from=ut.min(ut.max(a,o-m),l-h),d.to=ut.min(d.from+h,l)):p.is(".k-leftHandle")?(d.from=ut.min(ut.max(a,o-m),l-1),d.to=ut.max(d.from+1,d.to)):p.is(".k-rightHandle")&&(d.to=ut.min(ut.max(a+1,s-m),l),d.from=ut.min(d.to-1,d.from)),(d.from!==u.from||d.to!==u.to)&&(t.move(d.from,d.to),t.trigger(ir,t._rangeEventArgs(d))))}},_end:function(){var e=this,t=e._state.range;delete e._state,e.set(t.from,t.to),e.trigger(nr,e._rangeEventArgs(t))},_gesturechange:function(e){if(this._state){var t=this,i=t.chart,n=t._state,r=t.options,o=t.categoryAxis,s=n.range,a=i._toModelCoordinates(e.touches[0].x.location).x,l=i._toModelCoordinates(e.touches[1].x.location).x,c=ut.min(a,l),d=ut.max(a,l);e.preventDefault(),n.moveTarget=null,s.from=o.pointCategoryIndex(new Ct.Point2D(c))||r.min,s.to=o.pointCategoryIndex(new Ct.Point2D(d))||r.max,t.move(s.from,s.to)}},_tap:function(e){var t=this,i=t.options,n=t.chart._eventCoordinates(e),r=t.categoryAxis,o=r.pointCategoryIndex(new Ct.Point2D(n.x,r.box.y1)),s=t._index(i.from),a=t._index(i.to),l=t._index(i.min),c=t._index(i.max),d=a-s,u=s+d/2,h=ut.round(u-o),p={},f=3===e.event.which;t._state||f||(e.preventDefault(),t.chart._unsetActivePoint(),r.options.justified||h--,p.from=ut.min(ut.max(l,s-h),c-d),p.to=ut.min(p.from+d,c),t._start(e),t._state&&(t._state.range=p,t.trigger(ir,t._rangeEventArgs(p)),t._end()))},_mousewheel:function(e){var t,i=this,n=i.options,r=Qt(e);i._start({event:{target:i.selection}}),i._state&&(t=i._state.range,e.preventDefault(),e.stopPropagation(),ut.abs(r)>1&&(r*=$r),n.mousewheel.reverse&&(r*=-1),i.expand(r)&&i.trigger(ir,{axis:i.categoryAxis.options,delta:r,originalEvent:e,from:i._value(t.from),to:i._value(t.to)}),i._mwTimeout&&clearTimeout(i._mwTimeout),i._mwTimeout=setTimeout(function(){i._end()},zn))},_index:function(e){var t=this,i=t.categoryAxis,n=i.options.categories,r=e;return e instanceof Date&&(r=D(e,n),!i.options.justified&&e>ei(n)&&(r+=1)),r},_value:function(e){var t=this,i=this.categoryAxis,n=i.options.categories,r=e;return t._dateAxis&&(r=e>n.length-1?t.options.max:n[e]),r},_slot:function(e){var t=this,i=this.categoryAxis;return i.getSlot(t._index(e))},move:function(e,t){var i,n,r,o,s=this,a=s.options,l=a.offset,c=a.padding,d=a.selection.border;r=s._slot(e),i=Kt(r.x1-l.left+c.left),s.leftMask.width(i),s.selection.css("left",i),r=s._slot(t),n=Kt(a.width-(r.x1-l.left+c.left)),s.rightMask.width(n),o=a.width-n,o!=a.width&&(o+=d.right),s.rightMask.css("left",o),s.selection.width(ut.max(a.width-(i+n)-d.right,0))},set:function(e,t){var i=this,n=i.options,r=i._index(n.min),o=i._index(n.max);e=ti(i._index(e),r,o),t=ti(i._index(t),e+1,o),n.visible&&i.move(e,t),n.from=i._value(e),n.to=i._value(t)},expand:function(e){var i=this,n=i.options,r=i._index(n.min),o=i._index(n.max),s=n.mousewheel.zoom,a=i._index(n.from),l=i._index(n.to),c={from:a,to:l},d=bt({},c);return i._state&&(c=i._state.range),s!==Qn&&(c.from=ti(ti(a-e,0,l-1),r,o)),s!==fn&&(c.to=ti(ti(l+e,c.from+1,o),r,o)),c.from!==d.from||c.to!==d.to?(i.set(c.from,c.to),!0):t},getValueAxis:function(e){var t,i,n=e.pane.axes,r=n.length;for(t=0;r>t;t++)if(i=n[t],i.options.vertical!==e.options.vertical)return i}}),at=function(e,t,i){var n,r,o,s=this,a=t.canonicalFields(e),l=t.valueFields(e),c=t.sourceFields(e,a),d=s._seriesFields=[],u=i.query(e.type),h=e.aggregate||u;for(s._series=e,s._binder=t,n=0;a.length>n;n++){if(r=a[n],typeof h===On)o=h[r];else{if(0!==n&&!Gt(r,l))break;o=h}o&&d.push({canonicalName:r,name:c[n],transform:kt(o)?o:ot[o]})}},at.prototype={aggregatePoints:function(e,t){var i,n,r,o,s,a=this,l=a._bindPoints(e||[]),c=a._series,d=a._seriesFields,u=l.dataItems[0],h={};for(!u||M(u)||ct(u)||(s=function(){},s.prototype=u,h=new s),i=0;d.length>i;i++){if(n=d[i],r=a._bindField(l.values,n.canonicalName),o=n.transform(r,c,l.dataItems,t),null!==o&&typeof o===On&&!Jt(o.length)){h=o;break}Jt(o)&&(L(n.name,h),mt.setter(n.name)(h,o))}return h},_bindPoints:function(e){var t,i,n=this,r=n._binder,o=n._series,s=[],a=[];for(t=0;e.length>t;t++)i=e[t],s.push(r.bindPoint(o,i)),a.push(o.data[i]);return{values:s,dataItems:a}},_bindField:function(e,t){var i,n,r,o,s=[],a=e.length;for(i=0;a>i;i++)n=e[i],o=n.valueFields,r=Jt(o[t])?o[t]:n.fields[t],s.push(r);return s}},pt(e.easing,{easeOutElastic:function(e,t,i,n){var r=1.70158,o=0,s=n;return 0===e?i:1===e?i+n:(o||(o=.5),s<ut.abs(n)?(s=n,r=o/4):r=o/(2*ut.PI)*ut.asin(n/s),s*ut.pow(2,-10*e)*ut.sin(1.1*(1*e-r)*ut.PI/o)+n+i)}}),Ct.ui.plugin(jr),V.current.register(qe,[mi,Ii,vn,Er,ui,Mr,Ci,Ln,xi,Ar,wi,Gn,qn,Ir,ln]),V.current.register(Ye,[Zn,Jn,ki]),V.current.register(Qe,[Un]),V.current.register(Ke,[Wi]),W.current.register([mi,Ii,vn,Er,ui,Mr],[Dr],[Si,Ei,$n,Qi,Ki]),W.current.register([Gn,qn],[rn,br],[Si,Ei,$n]),W.current.register([Ir,ln],[Dr],[Si,Ei,$n,ur]),i.current.register([mi,Ii,vn,Er,ui,Mr,Ir,ln],{value:wn,color:nn,noteText:nn,errorLow:Cn,errorHigh:wn}),i.current.register([Gn,qn],{from:Cn,to:wn,color:nn,noteText:nn}),W.current.register([Zn,Jn,ki],[zr,Hr],[Ei,$n,Xi,Zi,Ji,en]),W.current.register([ki],[zr,Hr,"size"],[Ei,Si,$n]),W.current.register([Ci,Ln],["open","high","low","close"],[Si,Ei,"downColor",$n]),i.current.register([Ci,Ln],{open:wn,high:wn,low:Cn,close:wn,color:nn,downColor:nn,noteText:nn}),W.current.register([wi],["lower","q1","median","q3","upper","mean","outliers"],[Si,Ei,$n]),i.current.register([wi],{lower:wn,q1:wn,median:wn,q3:wn,upper:wn,mean:wn,outliers:nn,color:nn,noteText:nn}),W.current.register([xi,Ar],["current","target"],[Si,Ei,"visibleInLegend",$n]),i.current.register([xi,Ar],{current:wn,target:wn,color:nn,noteText:nn}),W.current.register([Un,Wi],[Dr],[Si,Ei,"explode","visibleInLegend","visible"]),bt(Ct,{EQUALLY_SPACED_SERIES:Vr,Aggregates:ot,AreaChart:Ce,AreaSegment:xe,AxisGroupRangeTracker:Ge,Bar:te,BarChart:se,BarLabel:j,BubbleChart:Ae,BulletChart:ce,CandlestickChart:Ie,Candlestick:Ee,CategoricalChart:oe,CategoricalErrorBar:pe,CategoricalPlotArea:qe,CategoryAxis:Y,ChartContainer:We,ClusterLayout:X,Crosshair:nt,CrosshairTooltip:rt,DateCategoryAxis:Q,DateValueAxis:K,DefaultAggregates:i,DonutChart:Le,DonutPlotArea:Ke,DonutSegment:Oe,ErrorBarBase:he,ErrorRangeCalculator:re,Highlight:Je,SharedTooltip:it,Legend:G,LegendItem:q,LineChart:_e,LinePoint:me,LineSegment:ve,Pane:Ve,PieAnimation:Xe,PieChart:$e,PieChartMixin:Ne,PiePlotArea:Qe,PieSegment:Re,PlotAreaBase:je,PlotAreaFactory:V,PointEventsMixin:J,RangeBar:ae,RangeBarChart:le,ScatterChart:De,ScatterErrorBar:fe,ScatterLineChart:Me,Selection:st,SeriesAggregator:at,SeriesBinder:W,ShapeElement:Ot,SplineSegment:we,SplineAreaSegment:Se,StackWrap:Z,Tooltip:tt,OHLCChart:Fe,OHLCPoint:Pe,WaterfallChart:Be,WaterfallSegment:Ue,XYPlotArea:Ye,addDuration:m,areNumbers:E,axisGroupBox:x,categoriesCount:c,ceilDate:y,countNumbers:A,duration:w,ensureTree:L,indexOf:H,isNumber:M,floorDate:v,filterSeriesByType:z,lteDateIndex:D,evalOptions:P,seriesTotal:B,singleItemOrArray:k,sortDates:R,startOfWeek:g,transpose:O,toDate:p,toTime:f,uniqueDates:N})}(window.kendo.jQuery),function(e,t){function i(e,t){return e.value.x-t.value.x}function n(e,t){return 180-C.abs(C.abs(e-t)-180)}var r,o,s,a,l,c,d,u,h,p,f,m,g,v,y,_,b,w,k,x,C=Math,S=window.kendo,T=S.deepExtend,D=S.util,M=D.append,A=S.drawing,E=S.geometry,I=S.dataviz,P=I.AreaSegment,F=I.Axis,z=I.AxisGroupRangeTracker,H=I.BarChart,R=I.Box2D,N=I.CategoryAxis,$=I.CategoricalChart,O=I.CategoricalPlotArea,L=I.ChartElement,B=I.CurveProcessor,U=I.DonutSegment,V=I.LineChart,W=I.LineSegment,j=I.LogarithmicAxis,q=I.NumericAxis,G=I.PlotAreaBase,Y=I.PlotAreaFactory,Q=I.Point2D,K=I.Ring,X=I.ScatterChart,Z=I.ScatterLineChart,J=I.SeriesBinder,ee=I.ShapeBuilder,te=I.SplineSegment,ie=I.SplineAreaSegment,ne=I.getSpacing,re=I.filterSeriesByType,oe=D.limitValue,se=I.round,ae="arc",le="#000",ce=I.COORD_PRECISION,de=.15,ue=C.PI/180,he="log",pe="plotAreaClick",fe="polarArea",me="polarLine",ge="polarScatter",ve="radarArea",ye="radarColumn",_e="radarLine",be="smooth",we="x",ke="y",xe="zero",Ce=[fe,me,ge],Se=[ve,ye,_e],Te={createGridLines:function(e){var t,i,n=this,r=n.options,o=C.abs(n.box.center().y-e.lineBox().y1),s=!1,a=[];return r.majorGridLines.visible&&(t=n.majorGridLineAngles(e),s=!0,a=n.renderGridLines(t,o,r.majorGridLines)),r.minorGridLines.visible&&(i=n.minorGridLineAngles(e,s),M(a,n.renderGridLines(i,o,r.minorGridLines))),a},renderGridLines:function(e,t,i){var n,r,o={stroke:{Width:i.width,color:i.color,dashType:i.dashType}},s=this.box.center(),a=new E.Circle([s.x,s.y],t),l=this.gridLinesVisual();for(n=0;e.length>n;n++)r=new A.Path(o),r.moveTo(a.center).lineTo(a.pointAt(e[n])),l.append(r);return l.children},gridLineAngles:function(i,n,r){var o=this,s=o.intervals(n,r);return e.map(s,function(e){var n=o.intervalAngle(e);return i.options.visible&&90===n?t:n})}},De=N.extend({options:{startAngle:90,labels:{margin:ne(10)},majorGridLines:{visible:!0},justified:!0},range:function(){return{min:0,max:this.options.categories.length}},reflow:function(e){this.box=e,this.reflowLabels()},lineBox:function(){return this.box},reflowLabels:function(){var e,t,i=this,n=new R,r=i.labels;for(t=0;r.length>t;t++)r[t].reflow(n),e=r[t].box,r[t].reflow(i.getSlot(t).adjacentBox(0,e.width(),e.height()))},intervals:function(e,t){var i,n=this,r=n.options,o=r.categories.length,s=0,a=0,l=o/e||1,c=360/l,d=[];for(t&&(a=360/(o/t)),i=0;l>i;i++)s=se(s,ce),s%a!==0&&d.push(s%360),r.reverse?s=360+s-c:s+=c;return d},majorIntervals:function(){return this.intervals(1)},minorIntervals:function(){return this.intervals(.5)},intervalAngle:function(e){return(360+e+this.options.startAngle)%360},majorAngles:function(){return e.map(this.majorIntervals(),e.proxy(this.intervalAngle,this))},createLine:function(){return[]},majorGridLineAngles:function(e){return this.gridLineAngles(e,1)},minorGridLineAngles:function(e,t){return this.gridLineAngles(e,.5,t?1:0)},createPlotBands:function(){var e,t,i,n,r,o,s,a=this,l=a.options,c=l.plotBands||[],d=new A.Group({zIndex:-1});for(e=0;c.length>e;e++)t=c[e],i=a.plotBandSlot(t),n=a.getSlot(t.from),r=t.from-C.floor(t.from),i.startAngle+=r*n.angle,o=C.ceil(t.to)-t.to,i.angle-=(o+r)*n.angle,s=ee.current.createRing(i,{fill:{color:t.color,opacity:t.opacity},stroke:{opacity:t.opacity}}),d.append(s);a.appendVisual(d)},plotBandSlot:function(e){return this.getSlot(e.from,e.to-1)},getSlot:function(e,t){var i,n,r,o=this,s=o.options,a=s.justified,l=o.box,c=o.majorAngles(),d=c.length,u=360/d;return s.reverse&&!a&&(e=(e+1)%d),e=oe(C.floor(e),0,d-1),n=c[e],a&&(n-=u/2,0>n&&(n+=360)),t=oe(C.ceil(t||e),e,d-1),i=t-e+1,r=u*i,new K(l.center(),0,l.height()/2,n,r)},pointCategoryIndex:function(e){var t,i,n=this,r=null,o=n.options.categories.length;for(t=0;o>t;t++)if(i=n.getSlot(t),i.containsPoint(e)){r=t;break}return r}});T(De.fn,Te),r={options:{majorGridLines:{visible:!0}},createPlotBands:function(){var e,t,i,n,r,o,s=this,a=s.options,l=a.plotBands||[],c=a.majorGridLines.type,d=s.plotArea.polarAxis,u=d.majorAngles(),h=d.box.center(),p=new A.Group({zIndex:-1});for(e=0;l.length>e;e++)t=l[e],i={fill:{color:t.color,opacity:t.opacity},stroke:{opacity:t.opacity}},n=s.getSlot(t.from,t.to,!0),r=new K(h,h.y-n.y2,h.y-n.y1,0,360),o=c===ae?ee.current.createRing(r,i):A.Path.fromPoints(s.plotBandPoints(r,u),i).close(),p.append(o);s.appendVisual(p)},plotBandPoints:function(e,t){var i,n=[],r=[],o=[e.c.x,e.c.y],s=new E.Circle(o,e.ir),a=new E.Circle(o,e.r);for(i=0;t.length>i;i++)n.push(s.pointAt(t[i])),r.push(a.pointAt(t[i]));return n.reverse(),n.push(n[0]),r.push(r[0]),r.concat(n)},createGridLines:function(e){var t,i=this,n=i.options,r=i.radarMajorGridLinePositions(),o=e.majorAngles(),s=e.box.center(),a=[];return n.majorGridLines.visible&&(a=i.renderGridLines(s,r,o,n.majorGridLines)),n.minorGridLines.visible&&(t=i.radarMinorGridLinePositions(),M(a,i.renderGridLines(s,t,o,n.minorGridLines))),a},renderGridLines:function(e,t,i,n){var r,o,s,a,l,c={stroke:{width:n.width,color:n.color,dashType:n.dashType}},d=this.gridLinesVisual();for(o=0;t.length>o;o++)if(r=e.y-t[o],r>0)if(a=new E.Circle([e.x,e.y],r),n.type===ae)d.append(new A.Circle(a,c));else{for(l=new A.Path(c),s=0;i.length>s;s++)l.lineTo(a.pointAt(i[s]));l.close(),d.append(l)}return d.children},getValue:function(e){var t,i,r,o,s,a,l,c=this,d=c.options,u=c.lineBox(),h=c.plotArea.polarAxis,p=h.majorAngles(),f=h.box.center(),m=e.distanceTo(f),g=m;return d.majorGridLines.type!==ae&&p.length>1&&(t=e.x-f.x,i=e.y-f.y,r=(C.atan2(i,t)/ue+540)%360,p.sort(function(e,t){return n(e,r)-n(t,r)}),o=n(p[0],p[1])/2,s=n(r,p[0]),a=90-o,l=180-s-a,g=m*(C.sin(l*ue)/C.sin(a*ue))),c.axisType().fn.getValue.call(c,new Q(u.x1,u.y2-g))}},o=q.extend({radarMajorGridLinePositions:function(){return this.getTickPositions(this.options.majorUnit)},radarMinorGridLinePositions:function(){var e=this,t=e.options,i=0;return t.majorGridLines.visible&&(i=t.majorUnit),e.getTickPositions(t.minorUnit,i)},axisType:function(){return q}}),T(o.fn,r),s=j.extend({radarMajorGridLinePositions:function(){var e=this,t=[];return e.traverseMajorTicksPositions(function(e){t.push(e)},e.options.majorGridLines),t},radarMinorGridLinePositions:function(){var e=this,t=[];return e.traverseMinorTicksPositions(function(e){t.push(e)},e.options.minorGridLines),t},axisType:function(){return j}}),T(s.fn,r),a=F.extend({init:function(e){var t=this;F.fn.init.call(t,e),e=t.options,e.minorUnit=e.minorUnit||t.options.majorUnit/2},options:{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:ne(10)},majorGridLines:{color:le,visible:!0,width:1},minorGridLines:{color:"#aaa"}},getDivisions:function(e){return q.fn.getDivisions.call(this,e)-1},reflow:function(e){this.box=e,this.reflowLabels()},reflowLabels:function(){var e,t,i=this,n=new R,r=i.majorIntervals(),o=i.labels;for(t=0;o.length>t;t++)o[t].reflow(n),e=o[t].box,o[t].reflow(i.getSlot(r[t]).adjacentBox(0,e.width(),e.height()))},lineBox:function(){return this.box},intervals:function(e,t){var i,n=this,r=n.options,o=n.getDivisions(e),s=r.min,a=[];for(t&&(t/=e),i=0;o>i;i++)i%t!==0&&a.push((360+s)%360),s+=e;return a},majorIntervals:function(){return this.intervals(this.options.majorUnit)},minorIntervals:function(){return this.intervals(this.options.minorUnit)},intervalAngle:function(e){return(360+e-this.options.startAngle)%360},majorAngles:De.fn.majorAngles,createLine:function(){return[]},majorGridLineAngles:function(e){return this.gridLineAngles(e,this.options.majorUnit)},minorGridLineAngles:function(e,t){return this.gridLineAngles(e,this.options.minorUnit,t?this.options.majorUnit:0)},createPlotBands:De.fn.createPlotBands,plotBandSlot:function(e){return this.getSlot(e.from,e.to)},getSlot:function(e,t){var i,n=this,r=n.options,o=r.startAngle,s=n.box;return e=oe(e,r.min,r.max),t=oe(t||e,e,r.max),r.reverse&&(e*=-1,t*=-1),e=(540-e-o)%360,t=(540-t-o)%360,e>t&&(i=e,e=t,t=i),new K(s.center(),0,s.height()/2,e,t-e)},getValue:function(e){var t=this,i=t.options,n=t.box.center(),r=e.x-n.x,o=e.y-n.y,s=C.round(C.atan2(o,r)/ue),a=i.startAngle;return i.reverse||(s*=-1,a*=-1),(s+a+360)%360},labelsCount:q.fn.labelsCount,createAxisLabel:q.fn.createAxisLabel}),T(a.fn,Te),l=L.extend({options:{gap:1,spacing:0},reflow:function(e){var t,i,n=this,r=n.options,o=n.children,s=r.gap,a=r.spacing,l=o.length,c=l+s+a*(l-1),d=e.angle/c,u=e.startAngle+d*(s/2);for(i=0;l>i;i++)t=e.clone(),t.startAngle=u,t.angle=d,o[i].sector&&(t.r=o[i].sector.r),o[i].reflow(t),o[i].sector=t,u+=d+d*a}}),c=L.extend({reflow:function(e){var t,i,n=this,r=n.options.isReversed,o=n.children,s=o.length,a=r?s-1:0,l=r?-1:1;for(n.box=new R,i=a;i>=0&&s>i;i+=l)t=o[i].sector,t.startAngle=e.startAngle,t.angle=e.angle}}),d=U.extend({init:function(e,t){U.fn.init.call(this,e,null,t)},options:{overlay:{gradient:null},labels:{distance:10}}}),u=H.extend({pointType:function(){return d},clusterType:function(){return l},stackType:function(){return c},categorySlot:function(e,t){return e.getSlot(t)},pointSlot:function(e,t){var i=e.clone(),n=e.c.y;return i.r=n-t.y1,i.ir=n-t.y2,i},reflow:$.fn.reflow,reflowPoint:function(e,t){e.sector=t,e.reflow()},options:{clip:!1}}),h=V.extend({options:{clip:!1},pointSlot:function(e,t){var i=e.c.y-t.y1,n=Q.onCircle(e.c,e.middle(),i);return new R(n.x,n.y,n.x,n.y)},createSegment:function(e,t,i){var n,r,o=t.style;return r=o==be?te:W,n=new r(e,t,i),e.length===t.data.length&&(n.options.closed=!0),n}}),p=P.extend({points:function(){return W.fn.points.call(this,this.stackPoints)}}),f=ie.extend({areaPoints:function(){return[]}}),m=h.extend({createSegment:function(e,t,i,n){var r,o,s=this,a=s.options,l=a.isStacked,c=(t.line||{}).style;return c===be?(o=new f(e,n,l,t,i),o.options.closed=!0):(l&&i>0&&n&&(r=n.linePoints.slice(0).reverse()),e.push(e[0]),o=new p(e,r,t,i)),o},seriesMissingValues:function(e){return e.missingValues||xe}}),g=X.extend({pointSlot:function(e,t){var i=e.c.y-t.y1,n=Q.onCircle(e.c,e.startAngle,i);return new R(n.x,n.y,n.x,n.y)},options:{clip:!1}}),v=Z.extend({pointSlot:g.fn.pointSlot,options:{clip:!1}}),y=P.extend({points:function(){var e=this,t=e.parent,i=t.plotArea,n=i.polarAxis,r=n.box.center(),o=e.stackPoints,s=W.fn.points.call(e,o);return s.unshift([r.x,r.y]),s.push([r.x,r.y]),s}}),_=ie.extend({areaPoints:function(){var e=this,t=e.parent,i=t.plotArea,n=i.polarAxis,r=n.box.center();return[r]},points:function(){var e,t=this,i=t.parent,n=i.plotArea,r=n.polarAxis,o=r.box.center(),s=new B((!1)),a=W.fn.points.call(this);return a.push(o),e=s.process(a),e.splice(e.length-3,e.length-1),t.curvePoints=e,e}}),b=v.extend({createSegment:function(e,t,i){var n,r=(t.line||{}).style;return n=r==be?new _(e,null,(!1),t,i):new y(e,[],t,i)},seriesMissingValues:function(e){return e.missingValues||xe},sortPoints:function(e){return e.sort(i)}}),w=G.extend({init:function(e,t){var i=this;i.valueAxisRangeTracker=new z,G.fn.init.call(i,e,t)},render:function(){var e=this;e.addToLegend(e.series),e.createPolarAxis(),e.createCharts(),e.createValueAxis()},createValueAxis:function(){var e,t,i,n,r=this,a=r.valueAxisRangeTracker,l=a.query(),c=r.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});c.type===he?(i=s,n={min:.1,max:1}):(i=o,n={min:0,max:1}),e=a.query(name)||l||n,e&&l&&(e.min=C.min(e.min,l.min),e.max=C.max(e.max,l.max)),t=new i(e.min,e.max,c),r.valueAxis=t,r.appendAxis(t)},reflowAxes:function(){var e,t=this,i=t.options.plotArea,n=t.valueAxis,r=t.polarAxis,o=t.box,s=C.min(o.width(),o.height())*de,a=ne(i.padding||{},s),l=o.clone().unpad(a),c=l.clone().shrink(0,l.height()/2);r.reflow(l),n.reflow(c),e=n.lineBox().height()-n.box.height(),n.reflow(n.box.unpad({top:e})),t.axisBox=l,t.alignAxes(l)},alignAxes:function(){var e=this,t=e.valueAxis,i=t.getSlot(t.options.min),n=t.options.reverse?2:1,r=e.polarAxis.getSlot(0).c,o=t.box.translate(r.x-i[we+n],r.y-i[ke+n]);t.reflow(o)},backgroundBox:function(){return this.box}}),k=w.extend({options:{categoryAxis:{categories:[]},valueAxis:{}},createPolarAxis:function(){var e,t=this;e=new De(t.options.categoryAxis),t.polarAxis=e,t.categoryAxis=e,t.appendAxis(e)},valueAxisOptions:function(e){var t=this;return t._hasBarCharts&&T(e,{majorGridLines:{type:ae},minorGridLines:{type:ae}}),t._isStacked100&&T(e,{roundToMajorUnit:!1,labels:{format:"P0"}}),T(e,t.options.valueAxis)},appendChart:O.fn.appendChart,createCharts:function(){var e=this,t=e.filterVisibleSeries(e.series),i=e.panes[0];e.createAreaChart(re(t,[ve]),i),e.createLineChart(re(t,[_e]),i),e.createBarChart(re(t,[ye]),i)},chartOptions:function(e){var t,i,n={series:e},r=e[0];return r&&(t=this.filterVisibleSeries(e),i=r.stack,n.isStacked=i&&t.length>1,n.isStacked100=i&&"100%"===i.type&&t.length>1,n.isStacked100&&(this._isStacked100=!0)),n},createAreaChart:function(e,t){if(0!==e.length){var i=new m(this,this.chartOptions(e));this.appendChart(i,t)}},createLineChart:function(e,t){if(0!==e.length){var i=new h(this,this.chartOptions(e));this.appendChart(i,t)}},createBarChart:function(e,t){var i,n,r;0!==e.length&&(i=e[0],n=this.chartOptions(e),n.gap=i.gap,n.spacing=i.spacing,r=new u(this,n),this.appendChart(r,t),this._hasBarCharts=!0)},seriesCategoryAxis:function(){return this.categoryAxis},click:function(t,i){var n,r,o=this,s=t._eventCoordinates(i),a=new Q(s.x,s.y);n=o.categoryAxis.getCategory(a),r=o.valueAxis.getValue(a),null!==n&&null!==r&&t.trigger(pe,{element:e(i.target),category:n,value:r})}}),x=w.extend({options:{xAxis:{},yAxis:{}},createPolarAxis:function(){var e,t=this;e=new a(t.options.xAxis),t.polarAxis=e,t.axisX=e,t.appendAxis(e)},valueAxisOptions:function(e){var t=this;return T(e,{majorGridLines:{type:ae},minorGridLines:{type:ae}},t.options.yAxis)},createValueAxis:function(){var e=this;w.fn.createValueAxis.call(e),e.axisY=e.valueAxis},appendChart:function(e,t){var i=this;i.valueAxisRangeTracker.update(e.yAxisRanges),G.fn.appendChart.call(i,e,t)},createCharts:function(){var e=this,t=e.filterVisibleSeries(e.series),i=e.panes[0];e.createLineChart(re(t,[me]),i),e.createScatterChart(re(t,[ge]),i),e.createAreaChart(re(t,[fe]),i)},createLineChart:function(e,t){if(0!==e.length){var i=this,n=new v(i,{series:e});i.appendChart(n,t)}},createScatterChart:function(e,t){if(0!==e.length){var i=this,n=new g(i,{series:e});i.appendChart(n,t)}},createAreaChart:function(e,t){if(0!==e.length){var i=this,n=new b(i,{series:e});i.appendChart(n,t)}},click:function(t,i){var n,r,o=this,s=t._eventCoordinates(i),a=new Q(s.x,s.y);n=o.axisX.getValue(a),r=o.axisY.getValue(a),null!==n&&null!==r&&t.trigger(pe,{element:e(i.target),x:n,y:r})}}),Y.current.register(x,Ce),Y.current.register(k,Se),J.current.register(Ce,[we,ke],["color"]),J.current.register(Se,["value"],["color"]),I.DefaultAggregates.current.register(Se,{value:"max",color:"first"}),T(I,{PolarAreaChart:b,PolarAxis:a,PolarLineChart:v,PolarPlotArea:x,RadarAreaChart:m,RadarBarChart:u,RadarCategoryAxis:De,RadarClusterLayout:l,RadarLineChart:h,RadarNumericAxis:o,RadarPlotArea:k,SplinePolarAreaSegment:_,SplineRadarAreaSegment:f,RadarStackLayout:c})}(window.kendo.jQuery),function(e,t){var i,n=window.kendo,r=n.deepExtend,o=e.extend,s=n.isFunction,a=n.template,l=n.util,c=l.append,d=n.drawing,u=n.geometry,h=n.dataviz,p=n.drawing.Color,f=h.ChartElement,m=h.PieChartMixin,g=h.PlotAreaBase,v=h.PlotAreaFactory,y=h.Point2D,_=h.Box2D,b=h.SeriesBinder,w=h.TextBox,k=h.autoFormat,x=h.evalOptions,C=l.limitValue,S=h.seriesTotal,T="category",D="color",M="funnel",A="value",E="black",I="white",P=g.extend({render:function(){var e=this,t=e.series;e.createFunnelChart(t)},createFunnelChart:function(e){var t=this,i=e[0],n=new F(t,{series:e,legend:t.options.legend,neckRatio:i.neckRatio,dynamicHeight:i.dynamicHeight,dynamicSlope:i.dynamicSlope,segmentSpacing:i.segmentSpacing,highlight:i.highlight});t.appendChart(n)},appendChart:function(e,t){g.fn.appendChart.call(this,e,t),c(this.options.legend.items,e.legendItems)}}),F=f.extend({init:function(e,t){var i=this;f.fn.init.call(i,t),i.plotArea=e,i.points=[],i.labels=[],i.legendItems=[],i.render()},options:{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:"center",position:"center"}},formatPointValue:function(e,t){return k(t,e.value)},render:function(){var e,i,n,o,a,l,c,d=this,u=d.options,h=d.plotArea.options.seriesColors||[],p=h.length,f=u.series[0],m=f.data;if(m)for(n=S(f),a=0;m.length>a;a++)e=b.current.bindPoint(f,a),o=e.valueFields.value,null!==o&&o!==t&&(i=e.fields,s(f.color)||(f.color=i.color||h[a%p]),i=r({index:a,owner:d,series:f,category:i.category,dataItem:m[a],percentage:Math.abs(o)/n,visibleInLegend:i.visibleInLegend,visible:i.visible},i),l=d.createSegment(o,i),c=d.createLabel(o,i),l&&c&&l.append(c))},evalSegmentOptions:function(e,t,i){var n=i.series;x(e,{value:t,series:n,dataItem:i.dataItem,index:i.index},{defaults:n._defaults,excluded:["data"]})},createSegment:function(e,n){var s,a,l=this;return l.createLegendItem(e,n),n.visible!==!1?(a=r({},n.series),l.evalSegmentOptions(a,e,n),s=new i(e,a,n),o(s,n),l.append(s),l.points.push(s),s):t},createLabel:function(e,i){var n,o,s,l=this,c=i.series,d=i.dataItem,u=r({},l.options.labels,c.labels),h=e;return u.visible?(u.template?(o=a(u.template),h=o({dataItem:d,value:e,percentage:i.percentage,category:i.category,series:c})):u.format&&(h=k(u.format,h)),u.color||"center"!==u.align||(s=new p(c.color).percBrightness(),u.color=s>180?E:I),l.evalSegmentOptions(u,e,i),n=new w(h,r({vAlign:u.position},u)),l.labels.push(n),n):t},labelPadding:function(){var e,t,i,n,r=this.labels,o={left:0,right:0};for(n=0;r.length>n;n++)e=r[n],t=e.options.align,"center"!==t&&(i=r[n].box.width(),"left"===t?o.left=Math.max(o.left,i):o.right=Math.max(o.right,i));return o},reflow:function(t){var i,n,r,o,s,a,l,c,d,h,p,f,m=this,g=m.options,v=m.points,y=v.length,_=1>=g.neckRatio,b=t.clone().unpad(m.labelPadding()),w=b.width(),k=0,x=_?0:(w-w/g.neckRatio)/2,S=g.segmentSpacing,T=g.dynamicSlope,D=b.height()-S*(y-1),M=_?g.neckRatio*w:w;if(y){if(T)for(l=v[0],c=l,e.each(v,function(e,t){t.percentage>c.percentage&&(c=t)}),r=l.percentage/c.percentage*w,x=(w-r)/2,i=0;y>i;i++)s=v[i].percentage,d=v[i+1],h=d?d.percentage:s,o=v[i].points=[],n=g.dynamicHeight?D*s:D/y,a=(w-r*(h/s))/2,a=C(a,0,w),o.push(new u.Point(b.x1+x,b.y1+k)),
o.push(new u.Point(b.x1+w-x,b.y1+k)),o.push(new u.Point(b.x1+w-a,b.y1+n+k)),o.push(new u.Point(b.x1+a,b.y1+n+k)),x=a,k+=n+S,r*=h/s,r=C(r,0,w);else for(p=_?w:w-2*x,f=(p-M)/2,i=0;y>i;i++)o=v[i].points=[],s=v[i].percentage,a=g.dynamicHeight?f*s:f/y,n=g.dynamicHeight?D*s:D/y,o.push(new u.Point(b.x1+x,b.y1+k)),o.push(new u.Point(b.x1+w-x,b.y1+k)),o.push(new u.Point(b.x1+w-x-a,b.y1+n+k)),o.push(new u.Point(b.x1+x+a,b.y1+n+k)),x+=a,k+=n+S;for(i=0;y>i;i++)v[i].reflow(t)}}});r(F.fn,m),i=f.extend({init:function(e,t,i){var n=this;f.fn.init.call(n,t),n.value=e,n.options.index=i.index},options:{color:I,border:{width:1}},reflow:function(e){var t=this,i=t.points,n=t.children[0];t.box=new _(i[0].x,i[0].y,i[1].x,i[2].y),n&&n.reflow(new _(e.x1,i[0].y,e.x2,i[2].y))},createVisual:function(){var e,t,i;f.fn.createVisual.call(this),e=this.options,t=e.border,i=d.Path.fromPoints(this.points,{fill:{color:e.color,opacity:e.opacity},stroke:{color:t.color,opacity:t.opacity,width:t.width}}).close(),this.visual.append(i)},createHighlight:function(e){return d.Path.fromPoints(this.points,e)},highlightOverlay:function(e,t){var i,n,r,s=this.options,a=s.highlight||{};if(a.visible!==!1)return i=a.border||{},n=o({},t,{fill:a.color,stroke:i.color,strokeOpacity:i.opacity,strokeWidth:i.width,fillOpacity:a.opacity}),r=e.createPolyline(this.points,!0,n)},tooltipAnchor:function(e){var t=this.box;return new y(t.center().x-e/2,t.y1)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),r(i.fn,h.PointEventsMixin),v.current.register(P,[M]),b.current.register([M],[A],[T,D,"visibleInLegend","visible"]),r(h,{FunnelChart:F})}(window.kendo.jQuery),function(e,t){function i(e,t){var i=e.box,n=e.children[0].box,o=t.border||{},s=t.background||"",a=new M,l=A.fromRect(new E([i.x1,i.y1],[i.width(),i.height()]),{stroke:{}}),c=new I(e.text,new D(n.x1,n.y1),{font:t.font,fill:{color:t.color}}),d=r(c.bbox().clone(),t.padding),u=A.fromRect(d,{stroke:{color:o.width?o.color:"",width:o.width,dashType:o.dashType,lineJoin:"round",lineCap:"round"},fill:{color:s}});return a.append(l),a.append(u),a.append(c),a}function n(e,t,i){var n=b(e.from)?e.from:B,r=b(e.to)?e.to:L;return e.from=l.max(l.min(r,n),t),e.to=l.min(l.max(r,n),i),e}function r(e,t){var i=e.getOrigin(),n=e.getSize(),r=x(t);return e.setOrigin([i.x-r.left,i.y-r.top]),e.setSize([n.width+(r.left+r.right),n.height+(r.top+r.bottom)]),e}function o(e,t){var i=x(t);return i.left=-i.left,i.top=-i.top,i.right=-i.right,i.bottom=-i.bottom,r(e,i)}var s,a,l=Math,c=window.kendo,d=c.util,u=c.ui.Widget,h=c.deepExtend,p=c.dataviz,f=p.autoMajorUnit,m=p.ChartElement,g=p.NumericAxis,v=p.Axis,y=p.Box2D,_=c.Class,b=d.defined,w=d.isNumber,k=p.interpolateValue,x=p.getSpacing,C=p.round,S=p.geometry,T=p.drawing,D=S.Point,M=T.Group,A=T.Path,E=S.Rect,I=T.Text,P=150,F=250,z="arrow",H="arrowPointer",R="barPointer",N="#000",$=.05,O=p.COORD_PRECISION,L=Number.MAX_VALUE,B=-Number.MAX_VALUE,U=200,V=.5,W=200,j=60,q=60,G=5,Y=l.PI/180,Q=180,K="inside",X="linear",Z="needle",J="outside",ee="radialPointer",te="x",ie="y",ne=_.extend({init:function(e,t){var i=this,n=e.options;m.fn.init.call(i,t),t=i.options,t.fill=t.color,i.scale=e,t.value=b(t.value)?l.min(l.max(t.value,n.min),n.max):n.min},options:{color:N},value:function(e){var i=this,n=i.options,r=n.value,o=i.scale.options;return 0===arguments.length?r:(n._oldValue=n._oldValue!==t?n.value:o.min,n.value=l.min(l.max(e,o.min),o.max),i.elements&&i.repaint(),t)}}),re=ne.extend({options:{shape:Z,cap:{size:$},arrow:{width:16,height:14},animation:{type:ee,duration:P}},setRadius:function(e){var t=this;e&&(t.elements.clear(),t.render(t.parent,t.center,e))},setAngle:function(e){this.elements.transform(S.transform().rotate(e,this.center))},repaint:function(){var e=this,t=e.scale,i=e.options,n=t.slotAngle(i._oldValue),r=t.slotAngle(i.value);i.animation.transitions===!1?e.setAngle(r):new pe(e.elements,h(i.animation,{oldAngle:n,newAngle:r})).play()},render:function(){var e=this,t=e.scale,i=t.arc.center,n=e.options,r=(t.slotAngle(t.options.min),new M);return n.animation!==!1&&h(n.animation,{startAngle:0,center:i,reverse:t.options.reverse}),n.shape===Z?r.append(e._renderNeedle(),e._renderCap()):r.append(e._renderArrow()),e.elements=r,e.setAngle(Y),r},reflow:function(e){var t=this,i=t.center=e.center,n=t.radius=e.getRadiusX(),r=t.capSize=Math.round(n*t.options.cap.size);t.bbox=E.fromPoints(new D(i.x-r,i.y-r),new D(i.x+r,i.y+r))},_renderNeedle:function(){var e=this,t=e.options,i=e.scale.options.minorTicks.size,n=e.center,r=t.color,o=new A({fill:{color:r},stroke:{color:r,width:V}});return o.moveTo(n.x+e.radius-i,n.y).lineTo(n.x,n.y-e.capSize/2).lineTo(n.x,n.y+e.capSize/2).close(),o},_renderCap:function(){var e=this,t=e.options,i=t.cap.color||t.color,n=new S.Circle(e.center,e.capSize),r=new T.Circle(n,{fill:{color:i},stroke:{color:i}});return r}}),oe=g.extend({init:function(e){var t=this;t.options=h({},t.options,e),t.options.majorUnit=t.options.majorUnit||f(t.options.min,t.options.max),t.options.minorUnit=t.options.minorUnit||t.options.majorUnit/10,v.fn.init.call(t,t.options)},options:{min:0,max:100,majorTicks:{size:15,align:K,color:N,width:V,visible:!0},minorTicks:{size:10,align:K,color:N,width:V,visible:!0},startAngle:-30,endAngle:210,labels:{position:K,padding:2}},render:function(e,t){var i=this,n=i.renderArc(e,t);i.bbox=n.bbox(),i.labelElements=i.renderLabels(),i.ticks=i.renderTicks(),i.ranges=i.renderRanges()},reflow:function(e){var i=this,n=e.center(),r=l.min(e.height(),e.width())/2;return i.bbox===t?i.render(n,r):(i.bbox=i.arc.bbox(),i.radius(i.arc.getRadiusX()),i.repositionRanges(),i.renderLabels(),t)},slotAngle:function(e){var t,i=this.options,n=i.startAngle,r=i.reverse,o=i.endAngle-n,s=i.min,a=i.max;return t=r?i.endAngle-(e-s)/(a-s)*o:(e-s)/(a-s)*o+n,t+Q},renderLabels:function(){var e,n,r,o,s,a,c,d,u,h,f,m,g,v,y=this,_=y.options,b=_.majorTicks.size,w=y.arc.clone(),k=w.getRadiusX(),x=y.tickAngles(w,_.majorUnit),C=y.labels,T=C.length,A=_.labels,I=A.padding,P=.05*k,F=_.rangeSize=_.rangeSize||.1*k,z=_.ranges||[],H=new M;for(y.options.rangeDistance!==t?P=y.options.rangeDistance:y.options.rangeDistance=P,A.position===K&&(k-=b,z.length&&y.labelElements===t&&(k-=F+P),w.setRadiusX(k).setRadiusY(k)),c=0;T>c;c++)s=C[c],e=s.box.width()/2,n=s.box.height()/2,o=x[c],r=(o-Q)*Y,h=A.position===K,a=w.pointAt(o),d=a.x+l.cos(r)*(e+I)*(h?1:-1),u=a.y+l.sin(r)*(n+I)*(h?1:-1),s.reflow(new p.Box2D(d-e,u-n,d+e,u+n)),m=new D(s.box.x1,s.box.y1),y.labelElements===t?(f=i(s,_.labels),H.append(f)):(f=y.labelElements.children[c],g=f.bbox().origin,v=f.transform()||S.transform(),v.translate(m.x-g.x,m.y-g.y),f.transform(v)),y.bbox=E.union(y.bbox,f.bbox());return H},repositionRanges:function(){var e,t,i,n=this,r=n.ranges.children,o=n.options.rangeSize,s=n.options.rangeDistance;if(r.length>0){for(e=n.getRangeRadius(),n.options.labels.position===K&&(e+=o+s),t=e+o/2,i=0;r.length>i;i++)r[i]._geometry.setRadiusX(t).setRadiusY(t);n.bbox=E.union(n.bbox,n.ranges.bbox())}},renderRanges:function(){var e,t,i,n,r,o,s=this,a=s.arc,l=new M,c=s.rangeSegments(),d=c.length,u=s.options.reverse,h=(s.radius(),s.options.rangeSize),p=s.options.rangeDistance;if(d)for(n=s.getRangeRadius(),s.radius(s.radius()-h-p),o=0;d>o;o++)i=c[o],e=s.slotAngle(i[u?"to":"from"]),t=s.slotAngle(i[u?"from":"to"]),t-e!==0&&(r=new S.Arc(a.center,{radiusX:n+h/2,radiusY:n+h/2,startAngle:e,endAngle:t}),l.append(new T.Arc(r,{stroke:{width:h,color:i.color,opacity:i.opacity}})));return l},rangeSegments:function(){function e(e,t,i,n){return{from:e,to:t,color:i,opacity:n}}var t,i,r,o,s,a=this,l=a.options,c=l.ranges||[],d=c.length,u=l.rangePlaceholderColor,h=[],p=l.min,f=l.max;if(d)for(h.push(e(p,f,u)),o=0;d>o;o++)for(t=n(c[o],p,f),i=h.length,s=0;i>s;s++)if(r=h[s],t.from>=r.from&&r.to>=t.from){h.push(e(t.from,t.to,t.color,t.opacity)),t.to>=r.from&&r.to>=t.to&&h.push(e(t.to,r.to,u,t.opacity)),r.to=t.from;break}return h},getRangeRadius:function(){var e,t=this,i=t.options,n=i.majorTicks.size,r=i.rangeSize,o=i.rangeDistance,s=t.arc;return e=i.labels.position===J?s.getRadiusX()-n-o-r:s.getRadiusX()-r},renderArc:function(e,t){var i=this,n=i.options,r=i.arc=new S.Arc(e,{radiusX:t,radiusY:t,startAngle:n.startAngle+Q,endAngle:n.endAngle+Q});return r},renderTicks:function(){function e(e,t,i,n){var r,o,s,a=new M,l=e.center,c=e.getRadiusX(),d=n.visible;if(d)for(r=0;t.length>r;r++)o=e.pointAt(t[r]),s=new D(l.x+c-n.size,l.y).rotate(t[r],l),a.append(new A({stroke:{color:n.color,width:n.width}}).moveTo(o).lineTo(s));return a}var t=this,i=t.arc,n=t.options,r=n.labels.position,o=new M,s=n.majorTicks.size,a=n.minorTicks.size,l=i.clone(),c=l.getRadiusX();return t.majorTickAngles=t.tickAngles(i,n.majorUnit),t.majorTicks=e(l,t.majorTickAngles,n.majorUnit,n.majorTicks),o.append(t.majorTicks),t._tickDifference=s-a,r===J&&l.setRadiusX(c-s+a).setRadiusY(c-s+a),t.minorTickAngles=t.normalizeTickAngles(t.tickAngles(i,n.minorUnit)),t.minorTicks=e(l,t.minorTickAngles,n.minorUnit,n.minorTicks,n.majorUnit),o.append(t.minorTicks),o},normalizeTickAngles:function(e){var t,i=this,n=i.options,r=n.majorUnit/n.minorUnit;for(t=e.length-1;t>=0;t--)t%r===0&&e.splice(t,1);return e},tickAngles:function(e,t){var i,n=this,r=n.options,o=r.reverse,s=r.max-r.min,a=e.endAngle-e.startAngle,l=e.startAngle,c=s/t,d=a/c,u=[];for(o&&(l+=a,d=-d),i=0;c>i;i++)u.push(C(l,O)),l+=d;return C(l)<=e.endAngle&&u.push(l),u},radius:function(e){var i=this;return e?(i.arc.setRadiusX(e).setRadiusY(e),i.repositionTicks(i.majorTicks.children,i.majorTickAngles),i.repositionTicks(i.minorTicks.children,i.minorTickAngles,!0),t):i.arc.getRadiusX()},repositionTicks:function(e,t,i){var n,r,o,s,a,l=this,c=i?l._tickDifference||0:0,d=l.arc,u=d.getRadiusX();for(i&&l.options.labels.position===J&&0!==c&&(d=l.arc.clone(),d.setRadiusX(u-c).setRadiusY(u-c)),n=0;e.length>n;n++)r=d.pointAt(t[n]),o=e[n].segments,s=r.x-o[0].anchor().x,a=r.y-o[0].anchor().y,e[n].transform((new S.Transformation).translate(s,a))}}),se=u.extend({init:function(t,i){var n,r,o,s,a,l=this,d=p.ui.themes||{};if(c.destroy(t),e(t).empty(),u.fn.init.call(l,t),l.wrapper=l.element,l._originalOptions=h({},i),n=h({},l.options,i),o=n.theme,s=d[o]||d[o.toLowerCase()],r=o&&s?s.gauge:{},l.options=h({},r,n),e.isArray(n.pointer))for(a=0;n.pointer.length>a;a++)l.options.pointer[a]=h({},r.pointer,n.pointer[a]);l.element.addClass("k-gauge"),l.surface=l._createSurface(),l.redraw()},options:{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}},destroy:function(){this.surface.destroy(),u.fn.destroy.call(this)},value:function(e){var i=this,n=i.pointers[0];return 0===arguments.length?n.value():(n.value(e),t)},_draw:function(){var e=this.surface;e.clear(),e.draw(this._visuals)},exportVisual:function(){return this._visuals},allValues:function(t){var i,n=this,r=n.pointers,o=[];if(0===arguments.length){for(i=0;r.length>i;i++)o.push(r[i].value());return o}if(e.isArray(t))for(i=0;t.length>i;i++)w(t[i])&&r[i].value(t[i])},_resize:function(){var e,t=this,i=t.options.transitions;for(t.options.transitions=!1,e=0;t.pointers.length>e;e++)t.pointers[e].options.animation.transitions=!1;for(t.redraw(),t.options.transitions=i,e=0;t.pointers.length>e;e++)t.pointers[e].options.animation.transitions=i},redraw:function(){var e,t=this,i=h(t._getSize(),t.options.gaugeArea),n=new E([0,0],[i.width,i.height]);t.surface.clear(),t.gaugeArea=t._createGaugeArea(),t._createModel(),e=o(n.bbox(),t._gaugeAreaMargin),t.reflow(e)},_createGaugeArea:function(){var e,t=this,i=t.options.gaugeArea,n=t.surface.size(),r=(t._gaugeAreaMargin=i.margin||G,i.border||{}),s=new E([0,0],[n.width,n.height]);return r.width>0&&(s=o(s,r.width)),e=A.fromRect(s,{stroke:{color:r.width?r.color:"",width:r.width,dashType:r.dashType,lineJoin:"round",lineCap:"round"},fill:{color:i.background}})},_createSurface:function(){var t,i=this,n=i.options,r=i._getSize();return r=n.gaugeArea?h(r,n.gaugeArea):r,t=e("<div></div>").appendTo(i.element).css({width:r.width,height:r.height}),new T.Surface.create(t,{type:n.renderAs})},getSize:function(){return this._getSize()},_getSize:function(){var e=this,t=e.element,i=t.width(),n=t.height();return i||(i=W),n||(n=U),{width:i,height:n}}}),ae=se.extend({init:function(e,t){var i=this;se.fn.init.call(i,e,t),c.notify(i,p.ui)},options:{name:"RadialGauge",transitions:!0,gaugeArea:{background:""}},reflow:function(e){var t,i,n=this,r=n.pointers;for(n.scale.reflow(e),n._initialPlotArea=n.scale.bbox,t=0;r.length>t;t++)i=r[t].reflow(n.scale.arc),n._initialPlotArea=E.union(n._initialPlotArea,r[t].bbox);n.fitScale(e),n.alignScale(e),n._buildVisual(n.gaugeArea,r,n.scale),n._draw()},_buildVisual:function(e,t,i){var n,r,o=new M;for(o.append(e),o.append(i.ticks),o.append(i.ranges),r=0;t.length>r;r++)n=t[r],n.render(),o.append(n.elements),n.value(n.options.value);o.append(i.labelElements),this._visuals=o},fitScale:function(e){for(var t,i,n,r,o=this,s=o.scale,a=s.arc,c=o._initialPlotArea,d=l.abs(o.getDiff(c,e)),u=C(d,O),h=C(-d,O),p=0;!(!(100>p)||(p++,u!=r&&(t=o.getPlotBox(u,e,a),t>=0&&2>=t))||h!=r&&(n=o.getPlotBox(h,e,a),n>=0&&2>=n)||(r=t>0&&n>0?2*u:0>t&&0>n?2*h:C((u+h)/2||1,O),i=o.getPlotBox(r,e,a),i>=0&&2>=i));)i>0?(h=r,n=i):(u=r,t=i)},getPlotBox:function(e,t,i){var n,r=this,o=r.scale,s=r.pointers,a=i.getRadiusX();for(i=i.clone(),i.setRadiusX(a+e).setRadiusY(a+e),o.arc=i,o.reflow(t),r.plotBbox=o.bbox,n=0;s.length>n;n++)s[n].reflow(i),r.plotBbox=E.union(r.plotBbox,s[n].bbox);return r.getDiff(r.plotBbox,t)},getDiff:function(e,t){return l.min(t.width()-e.width(),t.height()-e.height())},alignScale:function(e){var t,i=this,n=i.plotBbox.center(),r=e.center(),o=n.x-r.x,s=n.y-r.y,a=i.scale,l=i.pointers;for(a.arc.center.x-=o,a.arc.center.y-=s,a.reflow(e),t=0;l.length>t;t++)l[t].reflow(a.arc),i.plotBbox=E.union(a.bbox,l[t].bbox)},_createModel:function(){var t,i,n=this,r=n.options,o=r.pointer,s=n.scale=new oe(r.scale);for(n.pointers=[],o=e.isArray(o)?o:[o],i=0;o.length>i;i++)t=new re(s,h({},o[i],{animation:{transitions:r.transitions}})),n.pointers.push(t)}}),le=se.extend({init:function(e,t){var i=this;se.fn.init.call(i,e,t),c.notify(i,p.ui)},options:{name:"LinearGauge",transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}},reflow:function(e){var t,i=this,n=i.pointers,r=e.origin.x,o=e.origin.y,s=new p.Box2D(r,r,r+e.width(),o+e.height());for(i.scale.reflow(s),t=0;n.length>t;t++)n[t].reflow();i.bbox=i._getBox(s),i._alignElements(),i._shrinkElements(),i._buildVisual(),i._draw()},_buildVisual:function(){var e,t,i=this,n=new M,r=i.scale.render(),o=i.pointers;for(n.append(i.gaugeArea),n.append(r),t=0;o.length>t;t++)e=o[t],n.append(e.render()),e.value(e.options.value);i._visuals=n},_createModel:function(){var t,i,n,r=this,o=r.options,s=o.pointer,a=r.scale=new ce(o.scale);for(r.pointers=[],s=e.isArray(s)?s:[s],n=0;s.length>n;n++)i=h({},s[n],{animation:{transitions:o.transitions}}),t=i.shape===z?new ue(a,i):new he(a,i),r.pointers.push(t)},_getSize:function(){var e=this,t=e.element,i=t.width(),n=t.height(),r=e.options.scale.vertical;return i||(i=r?j:W),n||(n=r?U:q),{width:i,height:n}},_getBox:function(e){var t,i,n=this,r=n.scale,o=n.pointers,s=e.center(),a=o[0].box.clone().wrap(r.box);for(i=0;o.length>i;i++)a.wrap(o[i].box.clone());return r.options.vertical?(t=a.width()/2,a=new y(s.x-t,e.y1,s.x+t,e.y2)):(t=a.height()/2,a=new y(e.x1,s.y-t,e.x2,s.y+t)),a},_alignElements:function(){var e,t,i=this,n=i.scale,r=i.pointers,o=n.box,s=r[0].box.clone().wrap(n.box),a=i.bbox;for(t=0;r.length>t;t++)s.wrap(r[t].box.clone());for(n.options.vertical?(e=a.center().x-s.center().x,n.reflow(new y(o.x1+e,a.y1,o.x2+e,a.y2))):(e=a.center().y-s.center().y,n.reflow(new y(a.x1,o.y1+e,a.x2,o.y2+e))),t=0;r.length>t;t++)r[t].reflow(i.bbox)},_shrinkElements:function(){var e,t=this,i=t.scale,n=t.pointers,r=i.box.clone(),o=i.options.vertical?"y":"x",s=n[0].box;for(e=0;n.length>e;e++)s.wrap(n[e].box.clone());for(r[o+1]+=l.max(r[o+1]-s[o+1],0),r[o+2]-=l.max(s[o+2]-r[o+2],0),i.reflow(r),e=0;n.length>e;e++)n[e].reflow(t.bbox)}}),ce=g.extend({init:function(e){var t=this;t.options=h({},t.options,e),t.options=h({},t.options,{labels:{mirror:t.options.mirror}}),t.options.majorUnit=t.options.majorUnit||f(t.options.min,t.options.max),v.fn.init.call(t,t.options),t.options.minorUnit=t.options.minorUnit||t.options.majorUnit/10},options:{min:0,max:50,majorTicks:{size:15,align:K,color:N,width:V,visible:!0},minorTicks:{size:10,align:K,color:N,width:V,visible:!0},line:{width:V},labels:{position:K,padding:2},mirror:!1,_alignLines:!1},render:function(){var e=this,t=e.elements=new M,i=e.renderLabels(),n=e.renderLine(),r=e.renderTicks(),o=e.renderRanges();return t.append(n,i,r,o),t},renderRanges:function(){var e,t,i,r,o,s=this,a=s.options,l=a.min,c=a.max,d=a.ranges||[],u=a.vertical,h=a.labels.mirror,p=new M,f=d.length,m=a.rangeSize||a.minorTicks.size/2;if(f)for(o=0;f>o;o++)e=n(d[o],l,c),t=s.getSlot(e.from,e.to),i=u?s.lineBox():t,r=u?t:s.lineBox(),u?i.x1-=m*(h?-1:1):r.y2+=m*(h?-1:1),p.append(A.fromRect(new E([i.x1,r.y1],[i.x2-i.x1,r.y2-r.y1]),{fill:{color:e.color,opacity:e.opacity},stroke:{}}));return p},renderLabels:function(){var e,t=this,n=t.options,r=t.labels,o=new M;for(e=0;r.length>e;e++)o.append(i(r[e],n.labels));return o},renderLine:function(){var e,t=this,i=t.options,n=i.line,r=t.lineBox(),o=new M;return n.width>0&&n.visible&&(e=new A({stroke:{color:n.color,dashType:n.dashType,width:n.width}}),e.moveTo(r.x1,r.y1).lineTo(r.x2,r.y2),o.append(e)),o},renderTicks:function(){function e(e,n){var s,l=e.length;if(n.visible)for(s=n.skip;l>s;s+=n.step)s%n.skipUnit!==0&&(a.tickX=o?r.x2:r.x2-n.size,a.tickY=o?r.y1-n.size:r.y1,a.position=e[s],i.append(t.renderAxisTick(a,n)))}var t=this,i=new M,n=t.options,r=t.lineBox(),o=n.labels.mirror,s=n.majorTicks.visible?n.majorUnit:0,a={_alignLines:n._alignLines,vertical:n.vertical};return e(t.getMajorTickPositions(),n.majorTicks),e(t.getMinorTickPositions(),h({},{skipUnit:s/n.minorUnit},n.minorTicks)),i},renderAxisTick:function(e,t){var i,n,r,o=e.tickX,s=e.tickY,a=e.position;return e.vertical?(i=new D(o,a),n=new D(o+t.size,a)):(i=new D(a,s),n=new D(a,s+t.size)),r=new A({stroke:{color:t.color,width:t.width}}).moveTo(i).lineTo(n)}}),de=ne.extend({init:function(e,t){var i=this;ne.fn.init.call(i,e,t),i.options=h({track:{visible:b(t.track)}},i.options)},options:{shape:R,track:{border:{width:1}},color:N,border:{width:1},opacity:1,margin:x(3),animation:{type:R},visible:!0},reflow:function(){var e,t,i,n=this,r=n.options,o=n.scale,s=o.lineBox(),a=r.track.size||r.size,l=r.size/2,c=o.options.mirror,d=x(r.margin),u=o.options.vertical,h=u?d[c?"left":"right"]:d[c?"bottom":"top"];h=c?-h:h,u?(i=new y(s.x1+h,s.y1,s.x1+h,s.y2),c?i.x1-=a:i.x2+=a,r.shape!==R&&(t=new y(s.x2+h,s.y1-l,s.x2+h,s.y2+l),e=t)):(i=new y(s.x1,s.y1-h,s.x2,s.y1-h),c?i.y2+=a:i.y1-=a,r.shape!==R&&(t=new y(s.x1-l,s.y1-h,s.x2+l,s.y1-h),e=t)),n.trackBox=i,n.pointerRangeBox=t,n.box=e||i.clone().pad(r.border.width)},getElementOptions:function(){var e=this.options;return new M,{fill:{color:e.color,opacity:e.opacity},stroke:b(e.border)?{color:e.border.width?e.border.color||e.color:"",width:e.border.width,dashType:e.border.dashType,opacity:e.opacity}:null}},_margin:function(){var e=this,t=e.options,i=e.scale,n=i.options.mirror,r=x(t.margin),o=i.options.vertical,s=o?r[n?"left":"right"]:r[n?"bottom":"top"];return s}}),ue=de.extend({init:function(e,i){de.fn.init.call(this,e,i),this.options.size===t&&(this.options.size=.6*this.scale.options.majorTicks.size)},pointerShape:function(){var e,t,i=this,n=i.options,r=i.scale,o=n.size,s=r.options.vertical,a=o/2,l=r.options.mirror?-1:1,c=r.options.reverse;return s?(e=c?"y2":"y1",t=[new D(0,0-a),new D(0-l*o,0),new D(0,0+a)]):(e=c?"x1":"x2",t=[new D(0-a,0),new D(0,0+l*o),new D(0+a,0)]),t},repaint:function(){var e=this,t=e.scale,i=e.options,n=new s(e.elements,h(i.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:e._margin(i.margin),from:t.getSlot(i._oldValue),to:t.getSlot(i.value)}));i.animation.transitions===!1&&(n.options.duration=0),n.setup(),n.play()},render:function(){var e,t=this,i=t.options,n=new M,r=t.scale,o=t.getElementOptions(),s=t.pointerShape(i.value);return i.animation.type=H,n=new A({stroke:o.stroke,fill:o.fill}).moveTo(s[0]).lineTo(s[1]).lineTo(s[2]).close(),e=r.getSlot(i.value),n.transform(S.transform().translate(e.x1,e.y1)),t.elements=n,n}}),he=de.extend({init:function(e,i){de.fn.init.call(this,e,i),this.options.size===t&&(this.options.size=.3*this.scale.options.majorTicks.size)},pointerShape:function(e){var t,i,n,r=this,o=r.options,s=r.scale,a=s.options.vertical,l=s.options.mirror,c=l==a?-1:1,d=o.size*c,u=s.getSlot(s.options.min),h=s.getSlot(e),p=a?ie:te,f=a?te:ie,m=r._margin()*c,g=new D;return g[p]=u[p+"1"],g[f]=u[f+"1"],t=new D,t[p]=h[p+"1"],t[f]=h[f+"1"],a?(g.translate(m,0),t.translate(m,0)):(g.translate(0,m),t.translate(0,m)),i=t.clone(),n=g.clone(),a?(i.translate(d,0),n.translate(d,0)):(i.translate(0,d),n.translate(0,d)),[g,t,i,n]},repaint:function(){var e,t=this,i=t.scale,n=t.options,r=t.pointerShape(n.value),o=t.elements.children[0],s=t.pointerShape(n._oldValue);o.moveTo(r[0]).lineTo(r[1]).lineTo(r[2]).lineTo(r[3]).close(),e=new a(o,h(n.animation,{reverse:i.options.reverse,vertical:i.options.vertical,oldPoints:[s[1],s[2]],newPoints:[r[1],r[2]]})),n.animation.transitions===!1&&(e.options.duration=0),e.setup(),e.play()},render:function(){var e=this,t=new M,i=e.getElementOptions(),n=new A({stroke:i.stroke,fill:i.fill});return t.append(n),e.elements=t,t}}),pe=T.Animation.extend({init:function(e,t){T.Animation.fn.init.call(this,e,t),t=this.options,t.duration=l.max(l.abs(t.newAngle-t.oldAngle)/t.duration*1e3,1)},options:{easing:X,duration:P},step:function(e){var t=this,i=t.options,n=k(i.oldAngle,i.newAngle,e);t.element.transform(S.transform().rotate(n,i.center))}});T.AnimationFactory.current.register(ee,pe),s=T.Animation.extend({options:{easing:X,duration:F},setup:function(){var e,t,i=this.options,n=(this.element.bbox().width()/2,i.margin),r=i.from,o=i.to,s=i.vertical?"x1":"y1";i.mirror==i.vertical?(r[s]-=n,o[s]-=n):(r[s]+=n,o[s]+=n),e=this.fromScale=new D(r.x1,r.y1),t=this.toScale=new D(o.x1,o.y1),0!==i.duration&&(i.duration=l.max(e.distanceTo(t)/i.duration*1e3,1))},step:function(e){var t=k(this.fromScale.x,this.toScale.x,e),i=k(this.fromScale.y,this.toScale.y,e);this.element.transform(S.transform().translate(t,i))}}),T.AnimationFactory.current.register(H,s),a=T.Animation.extend({options:{easing:X,speed:F},setup:function(){var e=this.options,t=e.newPoints,i=e.oldPoints,n=this.axis=e.vertical?ie:te,r=this.to=t[0][n],o=this.from=i[0][n];0!==e.duration&&(e.duration=l.max(l.abs(r-o)/e.speed*1e3,1)),this._set(o)},step:function(e){var t=k(this.from,this.to,e);this._set(t)},_set:function(e){var t="set"+this.axis.toUpperCase(),i=this.options.newPoints;i[0][t](e),i[1][t](e)}}),T.AnimationFactory.current.register(R,a),p.ui.plugin(ae),p.ui.plugin(le),p.ExportMixin.extend(se.fn),h(p,{Gauge:se,RadialPointer:re,LinearPointer:de,ArrowLinearPointer:ue,BarLinearPointer:he,LinearScale:ce,RadialScale:oe,LinearGauge:le,RadialGauge:ae})}(window.kendo.jQuery),function(e,t){function i(e,t,i){return e.substring(t,t+i)}var n,r,o,s,a,l,c=window.kendo,d=c.ui.Widget,u=e.extend,h=c.deepExtend,p=e.inArray,f=e.isPlainObject,m=c.drawing,g=c.geometry,v=c.util,y=v.defined,_=c.dataviz,b=_.Box2D,w=_.TextBox,k=300,x=100,C=10,S=/^\d+$/,T=/^[a-z0-9]+$/i,D="Character '{0}' is not valid for symbology {1}",M=c.Class.extend({init:function(e){this.setOptions(e)},setOptions:function(e){var t=this;t.options=u({},t.options,e),t.quietZoneLength=t.options.addQuietZone?2*t.options.quietZoneLength:0},encode:function(e,t,i){var n=this;return y(e)&&(e+=""),n.initValue(e,t,i),n.options.addQuietZone&&n.addQuietZone(),n.addData(),n.options.addQuietZone&&n.addQuietZone(),{baseUnit:n.baseUnit,pattern:n.pattern}},options:{quietZoneLength:C,addQuietZone:!0,addCheckSum:!0},initValue:function(){},addQuietZone:function(){this.pattern.push(this.options.quietZoneLength||C)},addData:function(){},invalidCharacterError:function(e){throw Error(c.format(D,e,this.name))}}),A={},E=M.extend({minBaseUnitLength:.7,addData:function(){var e,t=this,i=t.value;for(t.addStart(),e=0;i.length>e;e++)t.addCharacter(i.charAt(e));t.options.addCheckSum&&t.pushCheckSum(),t.addStop(),t.prepareValues()},addCharacter:function(e){var t=this,i=t.characterMap[e];i||t.invalidCharacterError(e),t.addBase(i)},addBase:function(){}}),I={addCharacter:function(e){var t=this;t.characterMap[e]?t.addBase(t.characterMap[e]):e.charCodeAt(0)>127?t.invalidCharacterError(e):t.addExtended(e.charCodeAt(0))},addExtended:function(e){var i,n,r,o=this;for(n=0;o.extendedMappings.length>n;n++)if(i=o.extendedMappings[n].call(o,e)){for(r=0;i.length>r;r++)o.addBase(i[r]);return o.dataLength+=i.length-1,t}},extendedMappings:[function(e){if(e>=97&&122>=e){var t=this;return[t.characterMap[t.shiftCharacters[0]],t.characterMap[String.fromCharCode(e-32)]]}},function(e){if(e>=33&&58>=e){var t=this;return[t.characterMap[t.shiftCharacters[1]],t.characterMap[String.fromCharCode(e+32)]]}},function(e){if(e>=1&&26>=e){var t=this;return[t.characterMap[t.shiftCharacters[2]],t.characterMap[String.fromCharCode(e+64)]]}},function(e){var t,i,n,r=this;if(r.specialAsciiCodes[e])for(t=[],n=0;r.specialAsciiCodes[e].length>n;n++)t.push(r.characterMap[r.shiftCharacters[3]]),t.push(r.characterMap[r.specialAsciiCodes[e][n]]);else i=6*Math.floor(e/32)+(e-27)%32+64,t=[r.characterMap[r.shiftCharacters[3]],r.characterMap[String.fromCharCode(i)]];return t}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]};A.code39=E.extend({name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",initValue:function(e,t,i){var n=this;n.width=t,n.height=i,n.value=e,n.dataLength=e.length,n.pattern=[],n.patternString=""},prepareValues:function(){var e,t,i=this,n=i.minBaseUnitLength,r=i.maxRatio,o=i.minRatio,s=Math.max(.15*i.width,24);if(s>i.height)throw Error("Insufficient Height. The minimum height for value: "+i.value+" is: "+s);for(;(e=i.getBaseUnit(r))<n&&r>o;)r=parseFloat((r-.1).toFixed(1));if(n>e)throw t=Math.ceil(i.getBaseWidth(o)*n),Error("Insufficient width. The minimum width for value: "+i.value+" is: "+t);i.ratio=r,i.baseUnit=e,i.patternString=i.patternString.substring(0,i.patternString.length-1),i.pattern=i.pattern.concat(i.patternString.replace(/ratio/g,r).split(i.splitCharacter))},getBaseUnit:function(e){return this.width/this.getBaseWidth(e)},getBaseWidth:function(e){var t=this,i=3*(e+2);return t.quietZoneLength+i*(t.dataLength+2)+t.gapWidth*(t.dataLength+1)},addStart:function(){var e=this;e.addPattern(e.characterMap.START.pattern),e.addCharacterGap()},addBase:function(e){this.addPattern(e.pattern),this.addCharacterGap()},addStop:function(){this.addPattern(this.characterMap.START.pattern)},addPattern:function(e){for(var t=0;e.length>t;t++)this.patternString+=this.patternMappings[e.charAt(t)]},addCharacterGap:function(){var e=this;e.patternString+=e.gapWidth+e.splitCharacter},patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}},options:{addCheckSum:!1}}),A.code39extended=A.code39.extend(h({},I,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})),A.code93=E.extend({name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,initValue:function(e,t,i){var n=this;n.value=e,n.width=t,n.height=i,n.pattern=[],n.values=[],n.dataLength=e.length},prepareValues:function(){var e=this,t=Math.max(.15*e.width,24);if(t>e.height)throw Error("Insufficient Height");if(e.setBaseUnit(),e.minBaseUnitLength>e.baseUnit)throw Error("Insufficient Width")},setBaseUnit:function(){var e=this,t=2;e.baseUnit=e.width/(9*(e.dataLength+2+t)+e.quietZoneLength+1)},addStart:function(){var e=this.characterMap.START.pattern;this.addPattern(e)},addStop:function(){var e=this;e.addStart(),e.pattern.push(e.characterMap.TERMINATION_BAR)},addBase:function(e){this.addPattern(e.pattern),this.values.push(e.value)},pushCheckSum:function(){var e,t,i=this,n=i._getCheckValues();for(i.checksum=n.join(""),t=0;n.length>t;t++)e=i.characterMap[i._findCharacterByValue(n[t])],i.addPattern(e.pattern)},_getCheckValues:function(){var e,t,i,n=this,r=n.values,o=r.length,s=0;for(i=o-1;i>=0;i--)s+=n.weightedValue(r[i],o-i,n.cCheckSumTotal);for(e=s%n.checkSumMod,s=n.weightedValue(e,1,n.kCheckSumTotal),i=o-1;i>=0;i--)s+=n.weightedValue(r[i],o-i+1,n.kCheckSumTotal);return t=s%n.checkSumMod,[e,t]},_findCharacterByValue:function(e){for(var t in this.characterMap)if(this.characterMap[t].value===e)return t},weightedValue:function(e,t,i){return(t%i||i)*e},addPattern:function(e){var t,i;for(i=0;e.length>i;i++)t=parseInt(e.charAt(i),10),this.pattern.push(t)},characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}}),A.code93extended=A.code93.extend(h({},I,{name:"Code 93 extended",pushCheckSum:function(){var e,t,i=this,n=i._getCheckValues();for(i.checksum=n.join(""),t=0;n.length>t;t++)e=n[t],i.shiftValuesAsciiCodes[e]?i.addExtended(i.shiftValuesAsciiCodes[e]):i.addPattern(i.characterMap[i._findCharacterByValue(e)].pattern);
}})),n=c.Class.extend({init:function(e){this.encoding=e},addStart:function(){},is:function(){},move:function(){},pushState:function(){}}),r=n.extend({FNC4:"FNC4",init:function(e,t){var i=this;i.encoding=e,i.states=t,i._initMoves(t)},addStart:function(){this.encoding.addPattern(this.START)},is:function(e,t){var i=e.charCodeAt(t);return this.isCode(i)},move:function(e){for(var t=this,i=0;!t._moves[i].call(t,e)&&t._moves.length>i;)i++},pushState:function(e){var t,i,n=this,r=n.states,o=e.value,s=o.length;for(p("C",r)>=0&&(i=o.substr(e.index).match(/\d{4,}/g),i&&(s=o.indexOf(i[0],e.index)));(t=e.value.charCodeAt(e.index))>=0&&n.isCode(t)&&s>e.index;)n.encoding.addPattern(n.getValue(t)),e.index++},_initMoves:function(e){var t=this;t._moves=[],p(t.FNC4,e)>=0&&t._moves.push(t._moveFNC),p(t.shiftKey,e)>=0&&t._moves.push(t._shiftState),t._moves.push(t._moveState)},_moveFNC:function(e){return e.fnc?(e.fnc=!1,e.previousState==this.key):t},_shiftState:function(e){var i=this;return e.previousState==i.shiftKey&&(e.index+1>=e.value.length||i.encoding[i.shiftKey].is(e.value,e.index+1))?(i.encoding.addPattern(i.SHIFT),e.shifted=!0,!0):t},_moveState:function(){return this.encoding.addPattern(this.MOVE),!0},SHIFT:98}),o={},o.A=r.extend({key:"A",shiftKey:"B",isCode:function(e){return e>=0&&96>e},getValue:function(e){return 32>e?e+64:e-32},MOVE:101,START:103}),o.B=r.extend({key:"B",shiftKey:"A",isCode:function(e){return e>=32&&128>e},getValue:function(e){return e-32},MOVE:100,START:104}),o.C=n.extend({key:"C",addStart:function(){this.encoding.addPattern(this.START)},is:function(e,t){var n=i(e,t,4);return(e.length>=t+4||2==e.length)&&S.test(n)},move:function(){this.encoding.addPattern(this.MOVE)},pushState:function(e){for(var t;(t=i(e.value,e.index,2))&&S.test(t)&&2==t.length;)this.encoding.addPattern(parseInt(t,10)),e.index+=2},getValue:function(e){return e},MOVE:99,START:105}),o.FNC4=n.extend({key:"FNC4",dependentStates:["A","B"],init:function(e,t){this.encoding=e,this._initSubStates(t)},addStart:function(e){var t=e.value.charCodeAt(0)-128,i=this._getSubState(t);this.encoding[i].addStart()},is:function(e,t){var i=e.charCodeAt(t);return this.isCode(i)},isCode:function(e){return e>=128&&256>e},pushState:function(e){var t,i=this,n=i._initSubState(e),r=i.encoding,o=n.value.length;if(e.index+=o,3>o)for(;o>n.index;n.index++)t=n.value.charCodeAt(n.index),n.state=i._getSubState(t),n.previousState!=n.state&&(n.previousState=n.state,r[n.state].move(n)),r.addPattern(r[n.state].MOVE),r.addPattern(r[n.state].getValue(t));else n.state!=n.previousState&&r[n.state].move(n),i._pushStart(n),r.pushData(n,i.subStates),e.value.length>e.index&&i._pushStart(n);e.fnc=!0,e.state=n.state},_pushStart:function(e){var t=this;t.encoding.addPattern(t.encoding[e.state].MOVE),t.encoding.addPattern(t.encoding[e.state].MOVE)},_initSubState:function(e){var t=this,i={value:t._getAll(e.value,e.index),index:0};return i.state=t._getSubState(i.value.charCodeAt(0)),i.previousState=e.previousState==t.key?i.state:e.previousState,i},_initSubStates:function(e){var t,i=this;for(i.subStates=[],t=0;e.length>t;t++)p(e[t],i.dependentStates)>=0&&i.subStates.push(e[t])},_getSubState:function(e){var t,i=this;for(t=0;i.subStates.length>t;t++)if(i.encoding[i.subStates[t]].isCode(e))return i.subStates[t]},_getAll:function(e,t){for(var i,n="";(i=e.charCodeAt(t++))&&this.isCode(i);)n+=String.fromCharCode(i-128);return n}}),o.FNC1=n.extend({key:"FNC1",startState:"C",dependentStates:["C","B"],startAI:"(",endAI:")",init:function(e,t){this.encoding=e,this.states=t},addStart:function(){this.encoding[this.startState].addStart()},is:function(){return p(this.key,this.states)>=0},pushState:function(e){var t,i,n,r=this,o=r.encoding,s=e.value.replace(/\s/g,""),a=RegExp("["+r.startAI+r.endAI+"]","g"),l=e.index,c={state:r.startState};for(o.addPattern(r.START);;){if(c.index=0,n=s.charAt(l)===r.startAI?2:0,t=n>0?r.getBySeparator(s,l):r.getByLength(s,l),t.ai.length)i=l+n+t.id.length+t.ai.length;else if(i=s.indexOf(r.startAI,l+1),0>i){if(s.length>l+t.ai.max+t.id.length+n)throw Error("Separators are required after variable length identifiers");i=s.length}if(c.value=s.substring(l,i).replace(a,""),r.validate(t,c.value),o.pushData(c,r.dependentStates),i>=s.length)break;l=i,c.state!=r.startState&&(o[r.startState].move(c),c.state=r.startState),t.ai.length||o.addPattern(r.START)}e.index=e.value.length},validate:function(e,t){var i=t.substr(e.id.length),n=e.ai;if(!n.type&&!S.test(i))throw Error("Application identifier "+e.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"==n.type&&!T.test(i))throw Error("Application identifier "+e.id+" is alphanumeric only but contains non alphanumeric character(s).");if(n.length&&n.length!==i.length)throw Error("Application identifier "+e.id+" must be "+n.length+" characters long.");if(n.min&&n.min>i.length)throw Error("Application identifier "+e.id+" must be at least "+n.min+" characters long.");if(n.max&&i.length>n.max)throw Error("Application identifier "+e.id+" must be at most "+n.max+" characters long.")},getByLength:function(e,t){var n,r,o,s=this;for(o=2;4>=o;o++)if(n=i(e,t,o),r=s.getAI(n)||s.getAI(n.substring(0,n.length-1)))return{id:n,ai:r};s.unsupportedAIError(n)},unsupportedAIError:function(e){throw Error(c.format("'{0}' is not a supported Application Identifier"),e)},getBySeparator:function(e,t){var i=this,n=e.indexOf(i.startAI,t),r=e.indexOf(i.endAI,n),o=e.substring(n+1,r),s=i.getAI(o)||i.getAI(o.substr(o.length-1));return s||i.unsupportedAIError(o),{ai:s,id:o}},getAI:function(e){var t,i,n,r=this.applicationIdentifiers,o=r.multiKey;if(r[e])return r[e];for(t=0;o.length>t;t++){if(o[t].ids&&p(e,o[t].ids)>=0)return o[t].type;if(o[t].ranges)for(i=o[t].ranges,n=0;i.length>n;n++)if(e>=i[n][0]&&i[n][1]>=e)return o[t].type}},applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102}),s=M.extend({init:function(e){M.fn.init.call(this,e),this._initStates()},_initStates:function(){var e,t=this;for(e=0;t.states.length>e;e++)t[t.states[e]]=new o[t.states[e]](t,t.states)},initValue:function(e,t,i){var n=this;n.pattern=[],n.value=e,n.width=t,n.height=i,n.checkSum=0,n.totalUnits=0,n.index=0,n.position=1},addData:function(){var e=this,t={value:e.value,index:0,state:""};0!==e.value.length&&(t.state=t.previousState=e.getNextState(t,e.states),e.addStart(t),e.pushData(t,e.states),e.addCheckSum(),e.addStop(),e.setBaseUnit())},pushData:function(e,t){for(var i,n=this;n[e.state].pushState(e),!(e.index>=e.value.length);)e.shifted?(i=e.state,e.state=e.previousState,e.previousState=i,e.shifted=!1):(e.previousState=e.state,e.state=n.getNextState(e,t),n[e.state].move(e))},addStart:function(e){this[e.state].addStart(e),this.position=1},addCheckSum:function(){var e=this;e.checksum=e.checkSum%103,e.addPattern(e.checksum)},addStop:function(){this.addPattern(this.STOP)},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(e.totalUnits+e.quietZoneLength)},addPattern:function(e){var t,i,n=this,r=""+n.characterMap[e];for(i=0;r.length>i;i++)t=parseInt(r.charAt(i),10),n.pattern.push(t),n.totalUnits+=t;n.checkSum+=e*n.position++},getNextState:function(e,t){for(var i=0;t.length>i;i++)if(this[t[i]].is(e.value,e.index))return t[i];this.invalidCharacterError(e.value.charAt(e.index))},characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106}),A.code128a=s.extend({name:"Code 128 A",states:["A"]}),A.code128b=s.extend({name:"Code 128 B",states:["B"]}),A.code128c=s.extend({name:"Code 128 C",states:["C"]}),A.code128=s.extend({name:"Code 128",states:["C","B","A","FNC4"]}),A["gs1-128"]=s.extend({name:"Code GS1-128",states:["FNC1","C","B"]}),a=M.extend({initValue:function(e,t){var i=this;i.pattern=[],i.value=e,i.checkSumLength=0,i.width=t},setBaseUnit:function(){var e=this,t=7;e.baseUnit=e.width/(12*(e.value.length+e.checkSumLength)+e.quietZoneLength+t)},addData:function(){var e,t=this,i=t.value;for(t.addPattern(t.START),e=0;i.length>e;e++)t.addCharacter(i.charAt(e));t.options.addCheckSum&&t.addCheckSum(),t.addPattern(t.STOP),t.setBaseUnit()},addCharacter:function(e){var t=this,i=t.characterMap[e];i||t.invalidCharacterError(e),t.addPattern(i)},addPattern:function(e){for(var t=0;e.length>t;t++)this.pattern.push(parseInt(e.charAt(t),10))},addCheckSum:function(){var e,t=this,i=t.checkSums[t.checkSumType],n=i.call(t.checkSums,t.value);for(t.checksum=n.join(""),e=0;n.length>e;e++)t.checkSumLength++,t.addPattern(t.characterMap[n[e]])},checkSums:{Modulo10:function(e){var t,i,n,r=[0,""],o=e.length%2;for(t=0;e.length>t;t++)r[(t+o)%2]+=parseInt(e.charAt(t),10);for(n=r[0],i=""+2*r[1],t=0;i.length>t;t++)n+=parseInt(i.charAt(t),10);return[(10-n%10)%10]},Modulo11:function(e){var t,i,n,r=0,o=11,s=e.length;for(n=0;s>n;n++)t=((s-n)%6||6)+1,r+=t*e.charAt(n);return i=(o-r%o)%o,10!=i?[i]:[1,0]},Modulo11Modulo10:function(e){var t,i=this.Modulo11(e);return t=e+i[0],i.concat(this.Modulo10(t))},Modulo10Modulo10:function(e){var t,i=this.Modulo10(e);return t=e+i[0],i.concat(this.Modulo10(t))}},characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:""}),A.msimod10=a.extend({name:"MSI Modulo10",checkSumType:"Modulo10"}),A.msimod11=a.extend({name:"MSI Modulo11",checkSumType:"Modulo11"}),A.msimod1110=a.extend({name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"}),A.msimod1010=a.extend({name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"}),A.code11=M.extend({name:"Code 11",cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221",initValue:function(e,t){var i=this;i.pattern=[],i.value=e,i.width=t,i.totalUnits=0},addData:function(){var e,t=this,i=t.value;for(t.addPattern(t.START),e=0;i.length>e;e++)t.addCharacter(i.charAt(e));t.options.addCheckSum&&t.addCheckSum(),t.addPattern(t.STOP),t.setBaseUnit()},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(e.totalUnits+e.quietZoneLength)},addCheckSum:function(){var e,t=this,i=t.value,n=i.length,r=t.getWeightedSum(i,n,t.cCheckSumTotal)%t.checkSumMod;t.checksum=r+"",t.addPattern(t.characterMap[r]),n++,n>=t.kCheckSumMinLength&&(e=(r+t.getWeightedSum(i,n,t.kCheckSumTotal))%t.checkSumMod,t.checksum+=e,t.addPattern(t.characterMap[e]))},getWeightedSum:function(e,t,i){var n,r=0;for(n=0;e.length>n;n++)r+=this.weightedValue(this.getValue(e.charAt(n)),t,n,i);return r},weightedValue:function(e,t,i,n){var r=(t-i)%n||n;return r*e},getValue:function(e){var t=this;return isNaN(e)?(e!==t.DASH&&t.invalidCharacterError(e),t.DASH_VALUE):parseInt(e,10)},addCharacter:function(e){var t=this,i=t.getValue(e),n=t.characterMap[i];t.addPattern(n)},addPattern:function(e){var t,i;for(i=0;e.length>i;i++)t=parseInt(e.charAt(i),10),this.pattern.push(t),this.totalUnits+=t},characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],options:{addCheckSum:!0}}),A.postnet=M.extend({name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",initValue:function(e,t,i){var n=this;n.height=i,n.width=t,n.baseHeight=i/2,n.value=e.replace(RegExp(n.DIGIT_SEPARATOR,"g"),""),n.pattern=[],n.validate(n.value),n.checkSum=0,n.setBaseUnit()},addData:function(){var e,t=this,i=t.value;for(t.addPattern(t.START),e=0;i.length>e;e++)t.addCharacter(i.charAt(e));t.options.addCheckSum&&t.addCheckSum(),t.addPattern(t.START),t.pattern.pop()},addCharacter:function(e){var t=this,i=t.characterMap[e];t.checkSum+=parseInt(e,10),t.addPattern(i)},addCheckSum:function(){var e=this;e.checksum=(10-e.checkSum%10)%10,e.addCharacter(e.checksum)},setBaseUnit:function(){var e=this,t=3;e.baseUnit=e.width/(10*(e.value.length+1)+t+e.quietZoneLength)},validate:function(e){var t=this;if(S.test(e)||t.invalidCharacterError(e.match(/[^0-9]/)[0]),p(e.length,t.VALID_CODE_LENGTHS)<0)throw Error("Invalid value length. Valid lengths for the Postnet symbology are "+t.VALID_CODE_LENGTHS.join(","))},addPattern:function(e){var t,i,n=this;for(i=0;e.length>i;i++)t=n.height-n.baseHeight*e.charAt(i),n.pattern.push({width:1,y1:t,y2:n.height}),n.pattern.push(1)},characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]}),A.ean13=M.extend({initValue:function(e,t,i){if(e+="",12!=e.length||/\D/.test(e))throw Error('The value of the "EAN13" encoding should be 12 symbols');var n=this;n.pattern=[],n.options.height=i,n.baseUnit=t/(95+n.quietZoneLength),n.value=e,n.checksum=n.calculateChecksum(),n.leftKey=e[0],n.leftPart=e.substr(1,6),n.rightPart=e.substr(7)+n.checksum},addData:function(){var e=this;e.addPieces(e.characterMap.start),e.addSide(e.leftPart,e.leftKey),e.addPieces(e.characterMap.middle),e.addSide(e.rightPart),e.addPieces(e.characterMap.start)},addSide:function(e,t){var i,n=this;for(i=0;e.length>i;i++)t&&parseInt(n.keyTable[t].charAt(i),10)?n.addPieces(Array.prototype.slice.call(n.characterMap.digits[e.charAt(i)]).reverse(),!0):n.addPieces(n.characterMap.digits[e.charAt(i)],!0)},addPieces:function(e,t){var i,n=this;for(i=0;e.length>i;i++)n.pattern.push(t?{y1:0,y2:.95*n.options.height,width:e[i]}:e[i])},calculateChecksum:function(){var e,t,i=0,n=0,r=this.value.split("").reverse().join("");for(e=0;r.length>e;e++)e%2?n+=parseInt(r.charAt(e),10):i+=parseInt(r.charAt(e),10);return t=(10-(3*i+n)%10)%10},keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}}),A.ean8=A.ean13.extend({initValue:function(e,t,i){var n=this;if(7!=e.length||/\D/.test(e))throw Error("Invalid value provided");n.value=e,n.options.height=i,n.checksum=n.calculateChecksum(n.value),n.leftPart=n.value.substr(0,4),n.rightPart=n.value.substr(4)+n.checksum,n.pattern=[],n.baseUnit=t/(67+n.quietZoneLength)}}),l=d.extend({init:function(t,i){var n=this;d.fn.init.call(n,t,i),n.element=e(t),n.wrapper=n.element,n.element.addClass("k-barcode").css("display","block"),n.surfaceWrap=e("<div />").css("position","relative").appendTo(this.element),n.surface=m.Surface.create(n.surfaceWrap,{type:n.options.renderAs}),n.setOptions(i)},setOptions:function(e){var t=this;if(t.type=(e.type||t.options.type).toLowerCase(),"upca"==t.type&&(t.type="ean13",e.value="0"+e.value),"upce"==t.type&&(t.type="ean8",e.value="0"+e.value),!A[t.type])throw Error("Encoding "+t.type+"is not supported.");t.encoding=new A[t.type],t.options=u(!0,t.options,e),y(e.value)&&t.redraw()},redraw:function(){var e=this._getSize();this.surfaceWrap.css({width:e.width,height:e.height}),this.surface.clear(),this.createVisual(),this.surface.draw(this.visual)},getSize:function(){return c.dimensions(this.element)},_resize:function(){this.redraw()},createVisual:function(){this.visual=this._render()},_render:function(){var e,t,i,n,r=this,o=r.options,s=o.value,a=o.text,l=_.getSpacing(a.margin),c=r._getSize(),d=o.border||{},u=r.encoding,h=b(0,0,c.width,c.height).unpad(d.width).unpad(o.padding),p=h.height(),f=new m.Group;return r.contentBox=h,f.append(r._getBackground(c)),a.visible&&(t=s,o.checksum&&y(u.checksum)&&(t+=" "+u.checksum),n=r._getText(t),i=n.bbox().height(),p-=i+l.top+l.bottom,f.append(n)),e=u.encode(s,h.width(),p),r.barHeight=p,f.append(this._getBands(e.pattern,e.baseUnit)),f},exportVisual:function(){return this._render()},_getSize:function(){var e=this,t=e.element,i=new g.Size(k,x);return t.width()>0&&(i.width=t.width()),t.height()>0&&(i.height=t.height()),e.options.width&&(i.width=e.options.width),e.options.height&&(i.height=e.options.height),i},value:function(e){var i=this;return y(e)?(i.options.value=e+"",i.redraw(),t):i.options.value},_getBands:function(e,t){var i,n,r,o,s,a=this,l=a.contentBox,c=l.x1,d=new m.Group;for(r=0;e.length>r;r++)n=f(e[r])?e[r]:{width:e[r],y1:0,y2:a.barHeight},i=n.width*t,r%2&&(o=g.Rect.fromPoints(new g.Point(c,n.y1+l.y1),new g.Point(c+i,n.y2+l.y1)),s=m.Path.fromRect(o,{fill:{color:a.options.color},stroke:null}),d.append(s)),c+=i;return d},_getBackground:function(e){var t=this,i=t.options,n=i.border||{},r=b(0,0,e.width,e.height).unpad(n.width/2),o=m.Path.fromRect(r.toRect(),{fill:{color:i.background},stroke:{color:n.width?n.color:"",width:n.width,dashType:n.dashType}});return o},_getText:function(e){var t=this,i=t.options.text,n=new w(e,{font:i.font,color:i.color,align:"center",vAlign:"bottom",margin:i.margin});return n.reflow(t.contentBox),n.renderVisual(),n.visual},options:{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}}}),_.ExportMixin.extend(l.fn),_.ui.plugin(l),c.deepExtend(_,{encodings:A,Encoding:M})}(window.kendo.jQuery),function(e,t){function i(e){return parseInt(e,2)}function n(e,t){var i=(+e).toString(2);return t>i.length&&(i=Array(t-i.length+1).join(0)+i),i}function r(e,t){for(var i=[],n=0;e.length>n;)i.push(e.substring(n,n+t)),n+=t;return i}function o(e,t,i,n){for(var r=0;e.length>r;r++)e[r][i][n]=t}function s(e,t,i,n){for(var r=0;ve.length>r;r++)e[r][i][n]=ve[r](i,n)?1^t:parseInt(t,10)}function a(){var e,t;for(t=1;255>t;t++)e=2*oe[t-1],e>255&&(e=285^e),oe[t]=e,re[e]=t;e=2*oe[t-1]^285,oe[t]=e,oe[-1]=0}function l(){var e,t,i,n=68;for(e=2;n>=e;e++)t=se[e-1],i=[e,0],se[e]=b(t,i)}function c(e,i){var n=[],r=e.length-1;do n[r]=oe[(e[r]+i)%255],r--;while(e[r]!==t);return n}function d(e,t){return parseInt(e.charAt(t),10)}function u(e,t,i,n,r){t[e][n]=(t[e][n]<<1^r)%128,t[e][n]==ge&&(i[e]+=40)}function h(e,t,i,n,r,o){i[e][o]==n?r[e][o]++:(i[e][o]=n,r[e][o]>=5&&(t[e]+=3+r[e][o]-5),r[e][o]=1)}function p(e,t){var i=Math.floor(e/t*100),n=i%5,r=Math.abs(i-n-50),o=Math.abs(i+5-n-50),s=10*Math.min(r/5,o/5);return s}var f,m,g,v,y,_,b,w,k,x,C,S,T,D,M,A,E,I,P,F,z,H,R,N,$,O,L,B,U,V,W,j,q,G,Y=window.kendo,Q=e.extend,K=Y.drawing,X=Y.dataviz,Z=Y.ui.Widget,J=X.Box2D,ee="0000",te="numeric",ie="alphanumeric",ne="byte",re={1:0},oe={0:1},se=[[1,0],[1,25,0]],ae={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},le=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30
},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],ce=[1,0,1,1,1],de=[1,0,1],ue={L:"01",M:"00",Q:"11",H:"10"},he="101010000010010",pe="10100110111",fe="1111100100101",me=["11101100","00010001"],ge=93,ve=[function(e,t){return(e+t)%2===0},function(e){return e%2===0},function(e,t){return t%3===0},function(e,t){return(e+t)%3===0},function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2===0},function(e,t){return e*t%2+e*t%3===0},function(e,t){return(e*t%2+e*t%3)%2===0},function(e,t){return((e+t)%2+e*t%3)%2===0}],ye=/^\d+/,_e="A-Z0-9 $%*+./:-",be="A-Z $%*+./:-",we=RegExp("^["+be+"]+"),ke=RegExp("^["+_e+"]+"),xe=RegExp("^[^"+_e+"]+"),Ce=8,Se=5,Te=8,De=17,Me=9,Ae=16,Ee=Math.round,Ie=Y.Class.extend({getVersionIndex:function(e){return 10>e?0:e>26?2:1},getBitsCharacterCount:function(e){var t=this;return t.bitsInCharacterCount[t.getVersionIndex(e||40)]},getModeCountString:function(e,t){var i=this;return i.modeIndicator+n(e,i.getBitsCharacterCount(t))},encode:function(){},getStringBitsLength:function(){},getValue:function(){},modeIndicator:"",bitsInCharacterCount:[]}),Pe={};Pe[te]=Ie.extend({bitsInCharacterCount:[10,12,14],modeIndicator:"0001",getValue:function(e){return parseInt(e,10)},encode:function(e,t){var i,o=this,s=r(e,3),a=o.getModeCountString(e.length,t);for(i=0;s.length-1>i;i++)a+=n(s[i],10);return a+n(s[i],1+3*s[i].length)},getStringBitsLength:function(e,t){var i=e%3;return 4+this.getBitsCharacterCount(t)+10*Math.floor(e/3)+3*i+(0===i?0:1)}}),Pe[ie]=Ie.extend({characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010",getValue:function(e){return this.characters[e]},encode:function(e,t){var i,o,s=this,a=r(e,2),l=s.getModeCountString(e.length,t);for(o=0;a.length-1>o;o++)i=45*s.getValue(a[o].charAt(0))+s.getValue(a[o].charAt(1)),l+=n(i,11);return i=2==a[o].length?45*s.getValue(a[o].charAt(0))+s.getValue(a[o].charAt(1)):s.getValue(a[o].charAt(0)),l+n(i,1+5*a[o].length)},getStringBitsLength:function(e,t){return 4+this.getBitsCharacterCount(t)+11*Math.floor(e/2)+6*(e%2)}}),Pe[ne]=Ie.extend({bitsInCharacterCount:[8,16,16],modeIndicator:"0100",getValue:function(e){var t=e.charCodeAt(0);if(127>=t||t>=160&&255>=t)return t;throw Error("Unsupported character: "+e)},encode:function(e,t){var i,r=this,o=r.getModeCountString(e.length,t);for(i=0;e.length>i;i++)o+=n(r.getValue(e.charAt(i)),8);return o},getStringBitsLength:function(e,t){return 4+this.getBitsCharacterCount(t)+8*e}}),f={};for(m in Pe)f[m]=new Pe[m];g=function(e){var i=this,n=e.length-1,r=e.length-1,o=r,s=-1,a=0;i.move=function(){n+=s*a,a^=1,r=o-a},i.getNextCell=function(){for(;e[n][r]!==t;)i.move(),(0>n||n>=e.length)&&(s=-s,o-=8!=o?2:3,r=o,n=0>s?e.length-1:0);return{row:n,column:r}},i.getNextRemainderCell=function(){return i.move(),e[n][r]===t?{row:n,column:r}:t}},v=function(e,t){var i,n,r,o,a,l,c=new g(e[0]);for(o=0;t.length>o;o++)for(i=t[o],n=0;i.length>0;){for(a=0;i.length>a;a++)for(l=0;8>l;l++)r=c.getNextCell(),s(e,i[a][n].charAt(l),r.row,r.column);for(n++;i[0]&&n==i[0].length;)i.splice(0,1)}for(;r=c.getNextRemainderCell();)s(e,0,r.row,r.column)},y=function(e,t){for(var i=8*t,n=0,r=0;i>e.length&&ee.length>n;)e+=ee.charAt(n++);for(e.length%8!==0&&(e+=Array(9-e.length%8).join("0"));i>e.length;)e+=me[r],r^=1;return e},_=function(e,t){var i,n=[],r=e.length-2;for(i=r;i>=0;i--)n[i]=e[i]^t[i];return n},b=function(e,i){var n,r,o=[];for(n=0;e.length>n;n++)for(r=0;i.length>r;r++)o[n+r]=o[n+r]===t?(e[n]+(i[r]>=0?i[r]:0))%255:re[oe[o[n+r]]^oe[(e[n]+i[r])%255]];return o},a(),l(),w=function(e,t){var i,r,o=se[t-1],s=Array(t).concat(e),a=Array(s.length-o.length).concat(o),l=e.length,d=[];for(r=0;l>r;r++)i=c(a,re[s[s.length-1]]),a.splice(0,1),s=_(i,s);for(r=s.length-1;r>=0;r--)d[t-1-r]=n(s[r],8);return d},k=function(e,t){var n,r,o,s,a,l,c,d,u=0,h=[],p=[],f=t.groups;for(l=0;f.length>l;l++)for(o=f[l][0],c=0;o>c;c++){for(r=f[l][1],n=[],s=[],d=1;r>=d;d++)a=e.substring(u,u+8),n.push(a),s[r-d]=i(a),u+=8;h.push(n),p.push(w(s,t.errorCodewordsPerBlock))}return[h,p]},x=function(e,t,i,n,r){var o,s,a=ye.exec(e),l=a?a[0]:"",c=we.exec(e),d=c?c[0]:"",u=ke.exec(e),h=u?u[0]:"";return l&&(l.length>=t||e.length==l.length||l.length>=i&&!ke.test(e.charAt(l.length)))?(o=te,s=l):h&&(e.length==h.length||h.length>=n||r==ie)?(o=ie,s=l||d):(o=ne,s=h?h+xe.exec(e.substring(h.length))[0]:xe.exec(e)[0]),{mode:o,modeString:s}},C=function(e){var t,i,n=[],r=0;for(n.push(x(e,Ce,Se,Te,t)),t=n[0].mode,e=e.substr(n[0].modeString.length);e.length>0;)i=x(e,De,Me,Ae,t),i.mode!=t?(t=i.mode,n.push(i),r++):n[r].modeString+=i.modeString,e=e.substr(i.modeString.length);return n},S=function(e){var t,i,n=0;for(i=0;e.length>i;i++)t=f[e[i].mode],n+=t.getStringBitsLength(e[i].modeString.length);return Math.ceil(n/8)},T=function(e,t){var i=0,n=le.length-1,r=Math.floor(le.length/2);do le[r][t].totalDataCodewords>e?n=r:i=r,r=i+Math.floor((n-i)/2);while(n-i>1);return le[i][t].totalDataCodewords>=e?r+1:n+1},D=function(e,t){var i,n,r="";for(n=0;e.length>n;n++)i=f[e[n].mode],r+=i.encode(e[n].modeString,t);return r},M=function(e){var t,n,r=i(e),o="";if(0===r)return"101010000010010";for(t=A(i(e),pe,15),n=0;t.length>n;n++)o+=t.charAt(n)^he.charAt(n);return o},A=function(e,t,r){var o=i(t),s=t.length-1,a=e<<s,l=r-s,c=n(e,l),d=E(a,o);return d=c+n(d,s)},E=function(e,t){var i=t.toString(2).length,n=e.toString(2).length;do e^=t<<n-i,n=e.toString(2).length;while(n>=i);return e},I=function(e){var t,i,n=[],r=17+4*e;for(t=0;ve.length>t;t++)for(n[t]=Array(r),i=0;r>i;i++)n[t][i]=Array(r);return n},P=function(e,t){var i,n,r=e[0],s=0,a=t.length;for(i=0,n=8;8>=i;i++)6!==i&&o(e,d(t,a-1-s++),i,n);for(i=8,n=7;n>=0;n--)6!==n&&o(e,d(t,a-1-s++),i,n);for(s=0,n=r.length-1,i=8;n>=r.length-8;n--)o(e,d(t,a-1-s++),i,n);for(o(e,1,r.length-8,8),i=r.length-7,n=8;r.length>i;i++)o(e,d(t,a-1-s++),i,n)},F=function(e){return A(e,fe,18)},z=function(e,t){var i,n,r,s,a=e[0],l=a.length,c=0,u=l-11,h=l-11,p=0;for(s=0;t.length>s;s++)i=Math.floor(s/3),n=s%3,r=d(t,t.length-s-1),o(e,r,c+i,u+n),o(e,r,h+n,p+i)},H=function(e,t,i,n){var r,s,a,l=t.length+2,c=t.length+1;for(s=0;t.length>s;s++)for(a=s;l-s>a;a++)r=t[s],o(e,r,i+a,n+s),o(e,r,i+s,n+a),o(e,r,i+c-a,n+c-s),o(e,r,i+c-s,n+c-a)},R=function(e,t,i,n){var r=i,s=n,a=e[0];do o(e,0,r,n),o(e,0,i,s),r+=t[0],s+=t[1];while(r>=0&&a.length>r)},N=function(e){var t=e[0].length;H(e,ce,0,0),R(e,[-1,-1],7,7),H(e,ce,t-7,0),R(e,[1,-1],t-8,7),H(e,ce,0,t-7),R(e,[-1,1],7,t-8)},$=function(e,i){var n,r,o,s,a,l,c,d,u;if(!(2>i)){for(n=e[0],r=n.length,o=Math.floor(i/7),s=[6],c=0,(a=ae[i])?l=(r-13-a)/o:a=l=(r-13)/(o+1),s.push(s[c++]+a);r>s[c]+l;)s.push(s[c++]+l);for(d=0;s.length>d;d++)for(u=0;s.length>u;u++)n[s[d]][s[u]]===t&&H(e,de,s[d]-2,s[u]-2)}},O=function(e){var t,i=6,n=6,r=1,s=e[0].length;for(t=8;s-8>t;t++)o(e,r,i,t),o(e,r,t,n),r^=1},L=function(e){var t,i,n,r,o,s,a,l=[],c=[],d=[],f=[],m=[],g=0,v=1,y=e[0].length;for(i=0;e.length>i;i++)l[i]=0,d[i]=0,m[i]=[0,0],f[i]=[0,0],c[i]=[];for(i=0;y>i;i++)for(n=0;y>n;n++)for(r=0;e.length>r;r++)t=e[r],d[r]+=parseInt(t[i][n],10),c[r][g]===t[i][n]&&y>i+1&&n-1>=0&&t[i+1][n]==c[r][g]&&t[i+1][n-1]==c[r][g]&&(l[r]+=3),u(r,f,l,g,t[i][n]),u(r,f,l,v,t[n][i]),h(r,l,c,t[i][n],m,g),h(r,l,c,t[n][i],m,v);for(o=y*y,a=Number.MAX_VALUE,i=0;l.length>i;i++)l[i]+=p(d[i],o),a>l[i]&&(a=l[i],s=i);return s},B=function(e,t){this.dataString=e,this.version=t},U=function(){this.getEncodingResult=function(e,t){var i=C(e),n=S(i),r=T(n,t),o=D(i,r);return new B(o,r)}},V=function(){this.mode=f[this.encodingMode]},V.fn=V.prototype={encodingMode:ne,utfBOM:"111011111011101110111111",initialModeCountStringLength:20,getEncodingResult:function(e,t){var i=this,n=i.encode(e),r=i.getDataCodewordsCount(n),o=T(r,t),s=i.mode.getModeCountString(n.length/8,o)+n;return new B(s,o)},getDataCodewordsCount:function(e){var t=this,i=e.length,n=Math.ceil((t.initialModeCountStringLength+i)/8);return n},encode:function(e){var t,i=this,n=i.utfBOM;for(t=0;e.length>t;t++)n+=i.encodeCharacter(e.charCodeAt(t));return n},encodeCharacter:function(e){var t,i,r=this.getBytesCount(e),o=r-1,s="";if(1==r)s=n(e,8);else{for(t=8-r,i=0;o>i;i++)s=n(e>>6*i&63|128,8)+s;s=(e>>6*o|255>>t<<t).toString(2)+s}return s},getBytesCount:function(e){var t,i=this.ranges;for(t=0;i.length>t;t++)if(i[t]>e)return t+1},ranges:[128,2048,65536,2097152,67108864]},W=function(e){return e&&e.toLowerCase().indexOf("utf_8")>=0?new V:new U},j=function(e,t,i){var r,o,s,a=new W(i),l=a.getEncodingResult(e,t),c=l.version,d=le[c-1][t],u=y(l.dataString,d.totalDataCodewords),h=k(u,d),p=I(c);return N(p),$(p,c),O(p),c>=7&&z(p,n(0,18)),P(p,n(0,15)),v(p,h),r=L(p),o=p[r],c>=7&&z([o],F(c)),s=ue[t]+n(r,3),P([o],M(s)),o},q={DEFAULT_SIZE:200,QUIET_ZONE_LENGTH:4,DEFAULT_ERROR_CORRECTION_LEVEL:"L",DEFAULT_BACKGROUND:"#fff",DEFAULT_DARK_MODULE_COLOR:"#000",MIN_BASE_UNIT_SIZE:1},G=Z.extend({init:function(t,i){var n=this;Z.fn.init.call(n,t,i),n.element=e(t),n.wrapper=n.element,n.element.addClass("k-qrcode"),n.surfaceWrap=e("<div />").css("position","relative").appendTo(this.element),n.surface=K.Surface.create(n.surfaceWrap,{type:n.options.renderAs}),n.setOptions(i)},redraw:function(){var e=this._getSize();this.surfaceWrap.css({width:e,height:e}),this.surface.clear(),this.createVisual(),this.surface.draw(this.visual)},getSize:function(){return Y.dimensions(this.element)},_resize:function(){this.redraw()},createVisual:function(){this.visual=this._render()},exportVisual:function(){return this._render()},_render:function(){var e,t,i,n,r,o,s,a=this,l=a._value,c=a.options.border||{},d=a.options.padding||0,u=c.width||0;return c.width=u,s=new K.Group,l&&(i=j(l,a.options.errorCorrection,a.options.encoding),n=a._getSize(),o=n-2*(u+d),e=a._calculateBaseUnit(o,i.length),r=i.length*e,t=u+d+(o-r)/2,s.append(a._renderBackground(n,c)),s.append(a._renderMatrix(i,e,t))),s},_getSize:function(){var e,t,i,n=this;return n.options.size?e=parseInt(n.options.size,10):(t=n.element,i=Math.min(t.width(),t.height()),e=i>0?i:q.DEFAULT_SIZE),e},_calculateBaseUnit:function(e,t){var i=Math.floor(e/t);if(q.MIN_BASE_UNIT_SIZE>i)throw Error("Insufficient size.");return i*t>=e&&i-1>=q.MIN_BASE_UNIT_SIZE&&i--,i},_renderMatrix:function(e,t,i){var n,r,o,s,a,l,c,d,u=new K.MultiPath({fill:{color:this.options.color},stroke:null});for(n=0;e.length>n;n++)for(r=i+n*t,o=0;e.length>o;){for(;0===e[n][o]&&e.length>o;)o++;if(e.length>o){for(s=o;1==e[n][o];)o++;a=Ee(i+s*t),l=Ee(r),c=Ee(i+o*t),d=Ee(r+t),u.moveTo(a,l).lineTo(a,d).lineTo(c,d).lineTo(c,l).close()}}return u},_renderBackground:function(e,t){var i=J(0,0,e,e).unpad(t.width/2);return K.Path.fromRect(i.toRect(),{fill:{color:this.options.background},stroke:{color:t.color,width:t.width}})},setOptions:function(e){var i=this;e=e||{},i.options=Q(i.options,e),e.value!==t&&(i._value=i.options.value+""),i.redraw()},value:function(e){var i=this;return e===t?i._value:(i._value=e+"",i.redraw(),t)},options:{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:q.DEFAULT_ERROR_CORRECTION_LEVEL,background:q.DEFAULT_BACKGROUND,color:q.DEFAULT_DARK_MODULE_COLOR,size:"",padding:0,border:{color:"",width:0}}}),X.ExportMixin.extend(G.fn),X.ui.plugin(G),Y.deepExtend(X,{QRCode:G,QRCodeDefaults:q,QRCodeFunctions:{FreeCellVisitor:g,fillData:v,padDataString:y,generateErrorCodewords:w,xorPolynomials:_,getBlocks:k,multiplyPolynomials:b,chooseMode:x,getModes:C,getDataCodewordsCount:S,getVersion:T,getDataString:D,encodeFormatInformation:M,encodeBCH:A,dividePolynomials:E,initMatrices:I,addFormatInformation:P,encodeVersionInformation:F,addVersionInformation:z,addCentricPattern:H,addFinderSeparator:R,addFinderPatterns:N,addAlignmentPatterns:$,addTimingFunctions:O,scoreMaskMatrixes:L,encodeData:j,UTF8Encoder:V},QRCodeFields:{modes:f,powersOfTwo:re,powersOfTwoResult:oe,generatorPolynomials:se}})}(window.kendo.jQuery),function(e,t){function i(){}function n(e){return i.prototype=e,new i}var r,o=window.kendo,s=o.Class,a=o.Observable,l=o.deepExtend,c=Math,d=e.proxy,u=o.util,h=u.last,p=u.renderTemplate,f=o.dataviz,m=u.defined,g=f.filterSeriesByType,v=o.template,y=f.ui.Chart,_=f.Selection,b=f.addDuration,w=u.limitValue,k=f.lteDateIndex,x=f.toDate,C=f.toTime,S=28,T="change",D="k-",M="drag",A="dragEnd",E="_navigator",I=E,P=f.EQUALLY_SPACED_SERIES,F=3,z="zoom",H="zoomEnd",R=y.extend({init:function(t,i){e(t).addClass(D+"chart"),y.fn.init.call(this,t,i)},_applyDefaults:function(e,t){var i=this,n=i.element.width()||f.DEFAULT_WIDTH,r={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:c.floor(n/S)}}};t&&(t=l({},t,r)),i._navigator||N.setup(e,t),y.fn._applyDefaults.call(i,e,t)},_initDataSource:function(e){var t,i,n=e||{},r=n.dataSource,o=r&&r.serverFiltering,s=[].concat(n.categoryAxis)[0],a=n.navigator||{},c=a.select,d=c&&c.from&&c.to;o&&d&&(t=[].concat(r.filter||[]),i=new f.DateCategoryAxis(l({baseUnit:"fit"},s,{categories:[c.from,c.to]})),r.filter=N.buildFilter(i.range().min,c.to).concat(t)),y.fn._initDataSource.call(this,e)},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}},_resize:function(){var e=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=e},_redraw:function(){var e=this,t=e._navigator;t&&t.dataSource?t.redrawSlaves():e._fullRedraw()},_fullRedraw:function(){var e=this,t=e._navigator;t||(t=e._navigator=new N(e)),t._setRange(),y.fn._redraw.call(e),t._initSelection()},_onDataChanged:function(){var e=this;y.fn._onDataChanged.call(e),e._dataBound=!0},_bindCategoryAxis:function(e,t,i){var n,r=this,o=r.options.categoryAxis,s=o.length;if(y.fn._bindCategoryAxis.apply(this,arguments),e.name===I)for(;s>i;)n=o[i++],n.pane==E&&(n.categories=e.categories)},_trackSharedTooltip:function(e){var t=this,i=t._plotArea,n=i.paneByPoint(e);n&&n.options.name===E?t._unsetActivePoint():y.fn._trackSharedTooltip.call(t,e)},destroy:function(){var e=this;e._navigator.destroy(),y.fn.destroy.call(e)}}),N=a.extend({init:function(e){var t=this;t.chart=e,t.options=l({},t.options,e.options.navigator),t._initDataSource(),m(t.options.hint.visible)||(t.options.hint.visible=t.options.visible),e.bind(M,d(t._drag,t)),e.bind(A,d(t._dragEnd,t)),e.bind(z,d(t._zoom,t)),e.bind(H,d(t._zoomEnd,t))},options:{},_initDataSource:function(){var e=this,t=e.options,i=t.autoBind,n=t.dataSource;m(i)||(i=e.chart.options.autoBind),e._dataChangedHandler=d(e._onDataChanged,e),n&&(e.dataSource=o.data.DataSource.create(n).bind(T,e._dataChangedHandler),i&&e.dataSource.fetch())},_onDataChanged:function(){var e,t,i,n,r,o=this,s=o.chart,a=s.options.series,l=a.length,c=s.options.categoryAxis,d=c.length,u=o.dataSource.view();for(e=0;l>e;e++)i=a[e],i.axis==I&&s._isBindable(i)&&(i.data=u);for(t=0;d>t;t++)n=c[t],n.pane==E&&(n.name==I?(s._bindCategoryAxis(n,u,t),r=n.categories):n.categories=r);s._model&&(o.redraw(),o.filterAxes(),(!s.options.dataSource||s.options.dataSource&&s._dataBound)&&o.redrawSlaves())},destroy:function(){var e=this,t=e.dataSource;t&&t.unbind(T,e._dataChangeHandler),e.selection&&e.selection.destroy()},redraw:function(){this._redrawSelf(),this._initSelection()},_initSelection:function(){var t=this,i=t.chart,o=t.options,s=t.mainAxis(),a=n(s),l=s.range(),c=l.min,d=l.max,u=s.options.categories,h=t.options.select,p=t.selection,f=x(h.from),m=x(h.to);0!==u.length&&(p&&(p.destroy(),p.wrapper.remove()),a.box=s.box,p=t.selection=new _(i,a,{min:c,max:d,from:f,to:m,selectStart:e.proxy(t._selectStart,t),select:e.proxy(t._select,t),selectEnd:e.proxy(t._selectEnd,t),mousewheel:{zoom:"left"}}),o.hint.visible&&(t.hint=new r(i.element,{min:c,max:d,template:o.hint.template,format:o.hint.format})))},_setRange:function(){var e,t=this.chart._createPlotArea(!0),i=t.namedCategoryAxes[I],n=i.options,r=i.range(),o=r.min,s=b(r.max,n.baseUnitStep,n.baseUnit),a=this.options.select||{},l=x(a.from)||o;o>l&&(l=o),e=x(a.to)||s,e>s&&(e=s),this.options.select={from:l,to:e},this.filterAxes()},_redrawSelf:function(e){var t=this.chart._plotArea;t&&t.redraw(h(t.panes),e)},redrawSlaves:function(){var e=this,t=e.chart,i=t._plotArea,n=i.panes.slice(0,-1);i.srcSeries=t.options.series,i.redraw(n)},_drag:function(e){var t,i,n,r=this,o=r.chart,s=o._eventCoordinates(e.originalEvent),a=r.mainAxis(),l=a.range(),c=a.pane.box.containsPoint(s),d=o._plotArea.categoryAxis,u=e.axisRanges[d.options.name],h=r.options.select,p=r.selection;u&&!c&&p&&(t=h.from&&h.to?C(h.to)-C(h.from):C(p.options.to)-C(p.options.from),i=x(w(C(u.min),l.min,C(l.max)-t)),n=x(w(C(i)+t,C(l.min)+t,l.max)),r.options.select={from:i,to:n},r._liveDrag()&&(r.filterAxes(),r.redrawSlaves()),p.set(i,n),r.showHint(i,n))},_dragEnd:function(){var e=this;e.filterAxes(),e.filterDataSource(),e.redrawSlaves(),e.hint&&e.hint.hide()},_liveDrag:function(){var e=o.support,t=e.touch,i=e.browser,n=i.mozilla,r=i.msie&&9>i.version;return!t&&!n&&!r},readSelection:function(){var e=this,t=e.selection,i=t.options,n=e.options.select;n.from=i.from,n.to=i.to},filterAxes:function(){var e,t,i=this,n=i.options.select||{},r=i.chart,o=r.options.categoryAxis,s=n.from,a=n.to;for(e=0;o.length>e;e++)t=o[e],t.pane!==E&&(t.min=x(s),t.max=x(a))},filterDataSource:function(){var e,t=this,i=t.options.select||{},n=t.chart,r=n.dataSource,o=r&&r.options.serverFiltering;t.dataSource&&o&&(e=new f.DateCategoryAxis(l({baseUnit:"fit"},n.options.categoryAxis[0],{categories:[i.from,i.to]})).options,r.filter(N.buildFilter(b(e.min,-e.baseUnitStep,e.baseUnit),b(e.max,e.baseUnitStep,e.baseUnit))))},_zoom:function(e){var t,i,n=this,r=n.chart,s=e.delta,a=r._plotArea.categoryAxis,l=n.options.select,d=n.selection,u=n.mainAxis().options.categories;d&&(t=k(d.options.from,u),i=k(d.options.to,u),e.originalEvent.preventDefault(),c.abs(s)>1&&(s*=F),i-t>1?(d.expand(s),n.readSelection()):(a.options.min=l.from,l.from=a.scaleRange(-e.delta).min),o.support.touch||(n.filterAxes(),n.redrawSlaves()),d.set(l.from,l.to),n.showHint(n.options.select.from,n.options.select.to))},_zoomEnd:function(e){this._dragEnd(e)},showHint:function(e,t){var i=this,n=i.chart,r=n._plotArea;i.hint&&i.hint.show(e,t,r.backgroundBox())},_selectStart:function(e){var t=this.chart;t._selectStart.call(t,e)},_select:function(e){var t=this,i=t.chart;t.showHint(e.from,e.to),i._select.call(i,e)},_selectEnd:function(e){var t=this,i=t.chart;t.hint&&t.hint.hide(),t.readSelection(),t.filterAxes(),t.filterDataSource(),t.redrawSlaves(),i._selectEnd.call(i,e)},mainAxis:function(){var e=this.chart._plotArea;return e?e.namedCategoryAxes[I]:t}});N.setup=function(e,t){e=e||{},t=t||{};var i=l({},t.navigator,e.navigator),n=e.panes=[].concat(e.panes),r=l({},i.pane,{name:E});i.visible||(r.visible=!1,r.height=.1),n.push(r),N.attachAxes(e,i),N.attachSeries(e,i,t)},N.attachAxes=function(e,t){var i=t.series||[],n=e.categoryAxis=[].concat(e.categoryAxis),r=e.valueAxis=[].concat(e.valueAxis),o=g(i,P),s=0===o.length,a=l({type:"date",pane:E,roundToBaseUnit:!s,justified:s,_collapse:!1,tooltip:{visible:!1},labels:{step:1},autoBind:!t.dataSource,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]},_overlap:!1}),c=t.categoryAxis;n.push(l({},a,{maxDateGroups:200},c,{name:I,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),l({},a,c,{name:I+"_labels",maxDateGroups:20,baseUnitStep:"auto",autoBaseUnitSteps:{minutes:[]},majorTicks:{visible:!0}}),l({},a,c,{name:I+"_ticks",maxDateGroups:200,majorTicks:{visible:!0,width:.5},labels:{visible:!1,mirror:!0}})),r.push(l({name:I,pane:E,majorGridLines:{visible:!1},visible:!1},t.valueAxis))},N.attachSeries=function(e,t,i){var n,r=e.series=e.series||[],o=[].concat(t.series||[]),s=i.seriesColors,a=t.seriesDefaults;for(n=0;o.length>n;n++)r.push(l({color:s[n%s.length],categoryField:t.dateField,visibleInLegend:!1,tooltip:{visible:!1}},a,o[n],{axis:I,categoryAxis:I,autoBind:!t.dataSource}))},N.buildFilter=function(e,t){return[{field:"Date",operator:"gte",value:x(e)},{field:"Date",operator:"lt",value:x(t)}]},r=s.extend({init:function(t,i){var n=this;n.options=l({},n.options,i),n.container=t,n.chartPadding={top:parseInt(t.css("paddingTop"),10),left:parseInt(t.css("paddingLeft"),10)},n.template=n.template,n.template||(n.template=n.template=p("<div class='"+D+"navigator-hint' style='display: none; position: absolute; top: 1px; left: 1px;'><div class='"+D+"tooltip "+D+"chart-tooltip'>&nbsp;</div><div class='"+D+"scroll' /></div>")),n.element=e(n.template()).appendTo(t)},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(e,t,i){var n,r=this,s=x(C(e)+C(t-e)/2),a=r.options,l=o.format(r.options.format,e,t),c=r.element.find("."+D+"tooltip"),d=r.element.find("."+D+"scroll"),u=.4*i.width(),h=i.center().x-u,p=i.center().x,f=p-h,m=a.max-a.min,g=f/m,y=s-a.min;r._hideTimeout&&clearTimeout(r._hideTimeout),r._visible||(r.element.stop(!1,!0).css("visibility","hidden").show(),r._visible=!0),a.template&&(n=v(a.template),l=n({from:e,to:t})),c.html(l).css({left:i.center().x-c.outerWidth()/2,top:i.y1}),d.css({width:u,left:h+y*g,top:i.y1+parseInt(c.css("margin-top"),10)+parseInt(c.css("border-top-width"),10)+c.height()/2}),r.element.css("visibility","visible")},hide:function(){var e=this;e._hideTimeout&&clearTimeout(e._hideTimeout),e._hideTimeout=setTimeout(function(){e._visible=!1,e.element.fadeOut("slow")},e.options.hideDelay)}}),f.ui.plugin(R),l(f,{Navigator:N})}(window.kendo.jQuery),function(e){function t(e){return"number"==typeof e?[e]:e}var i=window.kendo,n=i.dataviz,r=n.ui.Chart,o=i.data.ObservableArray,s=n.SharedTooltip,a=i.deepExtend,l=e.isArray,c=n.inArray,d=Math,u="k-",h=150,p=150,f="bar",m="bullet",g="pie",v=[f,m],y=r.extend({init:function(i,n){var s=this,h=s.stage=e("<span />"),p=n||{};i=e(i).addClass(u+"sparkline").empty().append(h),s._initialWidth=d.floor(i.width()),p=t(p),(l(p)||p instanceof o)&&(p={seriesDefaults:{data:p}}),p.series||(p.series=[{data:t(p.data)}]),a(p,{seriesDefaults:{type:p.type}}),(c(p.series[0].type,v)||c(p.seriesDefaults.type,v))&&(p=a({},{categoryAxis:{crosshair:{visible:!1}}},p)),r.fn.init.call(s,i,p)},options:{name:"Sparkline",chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]},_modelOptions:function(){var t,i,n=this,r=n.options,o=n._initialWidth,s=n.stage;return n.stage.children().hide(),i=e("<span>&nbsp;</span>"),n.stage.append(i),t=a({width:o?o:n._autoWidth(),height:s.height(),transitions:r.transitions},r.chartArea,{inline:!0,align:!1}),s.css({width:t.width,height:t.height}),i.remove(),n.stage.children().show(),n.surface.resize(),t},_createTooltip:function(){var e,t=this,i=t.options,n=t.element;return e=t._sharedTooltip()?new _(n,t._plotArea,i.tooltip):r.fn._createTooltip.call(t)},_surfaceWrap:function(){return this.stage},_autoWidth:function(){var e,t,i,r=this,o=r.options,s=n.getSpacing(o.chartArea.margin),a=o.series,l=r.dataSource.total(),c=0;for(t=0;a.length>t;t++){if(i=a[t],i.type===f)return h;if(i.type===m)return p;if(i.type===g)return r.stage.height();i.data&&(c=d.max(c,i.data.length))}return e=d.max(l,c)*o.pointWidth,e>0&&(e+=s.left+s.right),e}}),_=s.extend({options:{animation:{duration:0}},_anchor:function(e,t){var i=s.fn._anchor.call(this,e,t),n=this._measure();return i.y=-n.height-this.options.offset,i},_hideElement:function(){this.element&&this.element.hide().remove()}});n.ui.plugin(y),a(n,{SparklineSharedTooltip:_})}(window.kendo.jQuery),function(e,t){var i,n=Math,r=n.abs,o=n.atan,s=n.atan2,a=n.cos,l=n.max,c=n.min,d=n.sin,u=n.tan,h=window.kendo,p=h.Class,f=h.dataviz,m=h.deepExtend,g=h.util,v=g.defined,y=g.deg,_=g.rad,b=g.round,w=g.sqr,k=g.valueOrDefault,x=p.extend({init:function(e,t){1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=t)},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(e){return e&&e.lat===this.lat&&e.lng===this.lng},clone:function(){return new x(this.lat,this.lng)},round:function(e){return this.lng=b(this.lng,e),this.lat=b(this.lat,e),this},wrap:function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},distanceTo:function(e,t){return this.greatCircleTo(e,t).distance},destination:function(e,t,i){var r,o,l,c,u;return t=_(t),i=i||f.map.datums.WGS84,r=_(this.lat),o=_(this.lng),l=e/h.dataviz.map.datums.WGS84.a,c=n.asin(d(r)*a(l)+a(r)*d(l)*a(t)),u=o+s(d(t)*d(l)*a(r),a(l)-d(r)*d(c)),new x(y(c),y(u))},greatCircleTo:function(e,t){var i,l,c,h,p,m,g,v,k,C,S,T,D,M,A,E,I,P,F,z,H,R,N,$,O,L,B,U,V;if(e=x.create(e),t=t||f.map.datums.WGS84,!e||this.clone().round(8).equals(e.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(i=t.a,l=t.b,c=t.f,h=_(e.lng-this.lng),p=o((1-c)*u(_(this.lat))),m=d(p),g=a(p),v=o((1-c)*u(_(e.lat))),k=d(v),C=a(v),S=h,D=this.DISTANCE_ITERATIONS,M=!1;!M&&D-- >0;)A=d(S),E=a(S),I=n.sqrt(w(C*A)+w(g*k-m*C*E)),F=m*k+g*C*E,H=s(I,F),R=g*C*A/I,P=1-w(R),z=0,0!==P&&(z=F-2*m*k/P),T=S,N=c/16*P*(4+c*(4-3*P)),S=h+(1-N)*c*R*(H+N*I*(z+N*F*(-1+2*w(z)))),M=r(S-T)<=this.DISTANCE_CONVERGENCE;return $=P*(w(i)-w(l))/w(l),O=1+$/16384*(4096+$*(-768+$*(320-175*$))),L=$/1024*(256+$*(-128+$*(74-47*$))),B=L*I*(z+L/4*(F*(-1+2*w(z))-L/6*z*(-3+4*w(I))*(-3+4*w(z)))),U=s(C*A,g*k-m*C*E),V=s(g*A,-m*C+g*k*E),{distance:b(l*O*(H-B),this.DISTANCE_PRECISION),azimuthFrom:y(U),azimuthTo:y(V)}}});x.fn.toString=function(){return h.format(this.FORMAT,this.lng,this.lat)},x.fromLngLat=function(e){return new x(e[1],e[0])},x.fromLatLng=function(e){return new x(e[0],e[1])},x.create=function(e,i){return v(e)?e instanceof x?e.clone():1===arguments.length&&2===e.length?x.fromLatLng(e):new x(e,i):t},i=p.extend({init:function(e,t){e=x.create(e),t=x.create(t),e.lng+180>t.lng+180&&t.lat+90>e.lat+90?(this.se=e,this.nw=t):(this.se=t,this.nw=e)},contains:function(e){var t=this.nw,i=this.se,n=k(e.lng,e[1]),r=k(e.lat,e[0]);return e&&n+180>=t.lng+180&&i.lng+180>=n+180&&r+90>=i.lat+90&&t.lat+90>=r+90},center:function(){var e=this.nw,t=this.se,i=e.lng+(t.lng-e.lng)/2,n=e.lat+(t.lat-e.lat)/2;return new x(n,i)},containsAny:function(e){var t,i=!1;for(t=0;e.length>t;t++)i=i||this.contains(e[t]);return i},include:function(e){var t=this.nw,i=this.se,n=k(e.lng,e[1]),r=k(e.lat,e[0]);t.lng=c(t.lng,n),t.lat=l(t.lat,r),i.lng=l(i.lng,n),i.lat=c(i.lat,r)},includeAll:function(e){for(var t=0;e.length>t;t++)this.include(e[t])},edges:function(){var e=this.nw,t=this.se;return{nw:this.nw,ne:new x(e.lat,t.lng),se:this.se,sw:new x(t.lat,e.lng)}},toArray:function(){var e=this.nw,t=this.se;return[e,new x(e.lat,t.lng),t,new x(t.lat,e.lng)]},overlaps:function(e){return this.containsAny(e.toArray())||e.containsAny(this.toArray())}}),i.World=new i([90,-180],[-90,180]),i.create=function(e,n){return e instanceof i?e:e&&n?new i(e,n):e&&4===e.length&&!n?new i([e[0],e[1]],[e[2],e[3]]):t},m(f,{map:{Extent:i,Location:x}})}(window.kendo.jQuery),function(){var e=window.kendo,t=e.ui.Widget,i=e.template,n=e.util.valueOrDefault,r=e.util.defined,o=t.extend({init:function(e,i){t.fn.init.call(this,e,i),this._initOptions(i),this.items=[],this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(e,t){this._extent=e,this._zoom=t,this._render()},add:function(e){r(e)&&("string"==typeof e&&(e={text:e}),this.items.push(e),this._render())},remove:function(e){var t,i,n=[];for(t=0;this.items.length>t;t++)i=this.items[t],i.text!==e&&n.push(i);this.items=n,this._render()},clear:function(){this.items=[],this.element.empty()},_render:function(){var e,t,n,r=[],o=i(this.options.itemTemplate);for(e=0;this.items.length>e;e++)t=this.items[e],n=this._itemText(t),""!==n&&r.push(o({text:n}));r.length>0?this.element.empty().append(r.join(this.options.separator)).show():this.element.hide()},_itemText:function(e){var t="",i=this._inZoomLevel(e.minZoom,e.maxZoom),n=this._inArea(e.extent);return i&&n&&(t+=e.text),t},_inZoomLevel:function(e,t){var i=!0;return e=n(e,-Number.MAX_VALUE),t=n(t,Number.MAX_VALUE),i=this._zoom>e&&t>this._zoom},_inArea:function(e){var t=!0;return e&&(t=e.contains(this._extent)),t}});e.dataviz.ui.plugin(o)}(window.kendo.jQuery),function(e){function t(e){return i.format('<button class="k-button k-navigator-{0}"><span class="k-icon k-i-arrow-{0}"/></button>',e)}var i=window.kendo,n=i.ui.Widget,r=i.keys,o=e.proxy,s=".kendoNavigator",a=t("n")+t("e")+t("s")+t("w"),l=n.extend({init:function(e,t){n.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-header k-shadow k-navigator").append(a).on("click"+s,".k-button",o(this,"_click"));var r=this.element.parent().closest("["+i.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(e,t){var i=this.options.panStep;this.trigger("pan",{x:e*i,y:t*i})},_click:function(t){var i=0,n=0,r=e(t.currentTarget);r.is(".k-navigator-n")?n=1:r.is(".k-navigator-s")?n=-1:r.is(".k-navigator-e")?i=1:r.is(".k-navigator-w")&&(i=-1),this._pan(i,n),t.preventDefault()},_keydown:function(e){switch(e.which){case r.UP:this._pan(0,1),e.preventDefault();break;case r.DOWN:this._pan(0,-1),e.preventDefault();break;case r.RIGHT:this._pan(1,0),e.preventDefault();break;case r.LEFT:this._pan(-1,0),e.preventDefault()}}});i.dataviz.ui.plugin(l)}(window.kendo.jQuery),function(e){function t(e,t){return i.format('<button class="k-button k-zoom-{0}" title="zoom-{0}">{1}</button>',e,t)}var i=window.kendo,n=i.ui.Widget,r=i.keys,o=e.proxy,s=".kendoZoomControl",a=t("in","+")+t("out","-"),l=187,c=189,d=61,u=173,h=n.extend({init:function(e,t){n.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal").append(a).on("click"+s,".k-button",o(this,"_click"));var r=this.element.parent().closest("["+i.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(e){var t=this.options.zoomStep;this.trigger("change",{delta:e*t})},_click:function(t){var i=e(t.currentTarget),n=1;i.is(".k-zoom-out")&&(n=-1),this._change(n),t.preventDefault()},_keydown:function(e){switch(e.which){case r.NUMPAD_PLUS:case l:case d:this._change(1);break;case r.NUMPAD_MINUS:case c:case u:this._change(-1)}}});i.dataviz.ui.plugin(h)}(window.kendo.jQuery),function(){var e=Math,t=e.atan,i=e.exp,n=e.pow,r=e.sin,o=e.log,s=e.tan,a=window.kendo,l=a.Class,c=a.dataviz,d=a.deepExtend,u=a.geometry,h=u.Point,p=c.map,f=p.Location,m=a.util,g=m.rad,v=m.deg,y=m.limitValue,_=e.PI,b=_/2,w=_/4,k=_/180,x={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149},C=l.extend({init:function(e){this._initOptions(e)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:x},forward:function(e,t){var i=this,n=i.options,r=n.datum,o=r.a,s=n.centralMeridian,a=y(e.lat,-i.MAX_LAT,i.MAX_LAT),l=t?y(e.lng,-i.MAX_LNG,i.MAX_LNG):e.lng,c=g(l-s)*o,d=i._projectLat(a);
return new h(c,d)},_projectLat:function(e){var t=this.options.datum,i=t.e,a=t.a,l=g(e),c=s(w+l/2),d=i*r(l),u=n((1-d)/(1+d),i/2);return a*o(c*u)},inverse:function(e,t){var i=this,n=i.options,r=n.datum,o=r.a,s=n.centralMeridian,a=e.x/(k*o)+s,l=y(i._inverseY(e.y),-i.MAX_LAT,i.MAX_LAT);return t&&(a=y(a,-i.MAX_LNG,i.MAX_LNG)),new f(l,a)},_inverseY:function(o){var s,a,l,c,d=this,u=d.options.datum,h=u.a,p=u.e,f=p/2,m=i(-o/h),g=b-2*t(m);for(s=0;d.INVERSE_ITERATIONS>=s&&(a=p*r(g),l=n((1-a)/(1+a),f),c=b-2*t(m*l)-g,g+=c,!(e.abs(c)<=d.INVERSE_CONVERGENCE));s++);return v(g)}}),S=C.extend({MAX_LAT:85.0511287798,_projectLat:function(e){var t=this.options.datum.a,i=g(e),n=s(w+i/2);return t*o(n)},_inverseY:function(e){var n=this.options.datum.a,r=i(-e/n);return v(b-2*t(r))}}),T=l.extend({forward:function(e){return new h(e.lng,e.lat)},inverse:function(e){return new f(e.y,e.x)}}),D=l.extend({init:function(){var e=this,t=e._proj=new S,i=this.c=2*_*t.options.datum.a;this._tm=u.transform().translate(.5,.5).scale(1/i,-1/i),this._itm=u.transform().scale(i,-i).translate(-.5,-.5)},toPoint:function(e,t,i){var n=this._proj.forward(e,i);return n.transform(this._tm).scale(t||1)},toLocation:function(e,t,i){return e=e.clone().scale(1/(t||1)).transform(this._itm),this._proj.inverse(e,i)}}),M=l.extend({init:function(){this._proj=new C},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}}),A=l.extend({init:function(){this._proj=new T},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}});d(c,{map:{crs:{EPSG3395:M,EPSG3857:D,EPSG4326:A},datums:{WGS84:x},projections:{Equirectangular:T,Mercator:C,SphericalMercator:S}}})}(window.kendo.jQuery),function(e){var t=e.proxy,i=window.kendo,n=i.Class,r=i.dataviz,o=i.deepExtend,s=r.map.Extent,a=i.util,l=a.defined,c=n.extend({init:function(i,n){this._initOptions(n),this.map=i,this.element=e("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(i.scrollElement),this._beforeReset=t(this._beforeReset,this),this._reset=t(this._reset,this),this._resize=t(this._resize,this),this._panEnd=t(this._panEnd,this),this._activate(),this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset(),this._activate(),this._applyExtent(!0)},hide:function(){this._deactivate(),this._setVisibility(!1)},reset:function(){this._beforeReset(),this._reset()},_reset:function(){this._applyExtent()},_beforeReset:e.noop,_resize:e.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var e=this.options,t=this.map.zoom(),i=!l(e.minZoom)||t>=e.minZoom,n=!l(e.maxZoom)||e.maxZoom>=t,r=s.create(e.extent),o=!r||r.overlaps(this.map.extent());this._setVisibility(i&&n&&o)},_setVisibility:function(e){this.element.css("display",e?"":"none")},_activate:function(){var e=this.map;e.bind("beforeReset",this._beforeReset),e.bind("reset",this._reset),e.bind("resize",this._resize),e.bind("panEnd",this._panEnd)},_deactivate:function(){var e=this.map;e.unbind("beforeReset",this._beforeReset),e.unbind("reset",this._reset),e.unbind("resize",this._resize),e.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var e=this.map.attribution;e&&e.add(this.options.attribution)}});o(r,{map:{layers:{Layer:c}}})}(window.kendo.jQuery),function(e){var t=e.proxy,i=window.kendo,n=i.Class,r=i.data.DataSource,o=i.dataviz,s=i.deepExtend,a=i.util.last,l=i.util.defined,c=i.geometry,d=i.drawing,u=d.Group,h=o.map,p=h.Location,f=h.layers.Layer,m=f.extend({init:function(e,t){f.fn.init.call(this,e,t),this.surface=d.Surface.create(this.element,{width:e.scrollElement.width(),height:e.scrollElement.height()}),this._initRoot(),this.movable=new i.ui.Movable(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseenter=this._handler("shapeMouseEnter"),this.surface.bind("mouseenter",this._mouseenter),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this._initDataSource()},options:{autoBind:!0},destroy:function(){f.fn.destroy.call(this),this.surface.destroy(),this.dataSource.unbind("change",this._dataChange)},setDataSource:function(e){this.dataSource&&this.dataSource.unbind("change",this._dataChange),this.dataSource=e,this.dataSource.bind("change",this._dataChange),this.options.autoBind&&this.dataSource.fetch()},_reset:function(){f.fn._reset.call(this),this._translateSurface(),this._data&&this._load(this._data)},_initRoot:function(){this._root=new u,this.surface.draw(this._root)},_beforeReset:function(){this.surface.clear(),this._initRoot()},_resize:function(){this.surface.size(this.map.size())},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=t(this._dataChange,this),this.dataSource=r.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._data=e.sender.view(),this._load(this._data)},_load:function(e){var t,i,n;for(this._clearMarkers(),this._loader||(this._loader=new g(this.map,this.options.style,this)),t=new u,i=0;e.length>i;i++)n=this._loader.parse(e[i]),n&&t.append(n);this._root.clear(),this._root.append(t)},shapeCreated:function(e){var t,i=!1;return e instanceof d.Circle&&(i=l(this._createMarker(e))),i||(t={layer:this,shape:e},i=this.map.trigger("shapeCreated",t)),i},_createMarker:function(e){var t=this.map.markers.bind({location:e.location},e.dataItem);return t&&this._markers.push(t),t},_clearMarkers:function(){for(var e=0;this._markers.length>e;e++)this.map.markers.remove(this._markers[e]);this._markers=[]},_panEnd:function(e){f.fn._panEnd.call(this,e),this._translateSurface()},_translateSurface:function(){var e=this.map,t=e.locationToView(e.extent().nw);this.surface.translate&&(this.surface.translate(t),this.movable.moveTo({x:t.x,y:t.y}))},_handler:function(e){var t=this;return function(i){if(i.element){var n={layer:t,shape:i.element,originalEvent:i.originalEvent};t.map.trigger(e,n)}}}}),g=n.extend({init:function(e,t,i){this.observer=i,this.locator=e,this.style=t},parse:function(e){var t=new u;return"Feature"===e.type?this._loadGeometryTo(t,e.geometry,e):this._loadGeometryTo(t,e,e),2>t.children.length&&(t=t.children[0]),t},_shapeCreated:function(e){var t=!1;return this.observer&&this.observer.shapeCreated&&(t=this.observer.shapeCreated(e)),t},_loadGeometryTo:function(e,t,i){var n,r,o=t.coordinates;switch(t.type){case"LineString":r=this._loadPolygon(e,[o],i),this._setLineFill(r);break;case"MultiLineString":for(n=0;o.length>n;n++)r=this._loadPolygon(e,[o[n]],i),this._setLineFill(r);break;case"Polygon":this._loadPolygon(e,o,i);break;case"MultiPolygon":for(n=0;o.length>n;n++)this._loadPolygon(e,o[n],i);break;case"Point":this._loadPoint(e,o,i);break;case"MultiPoint":for(n=0;o.length>n;n++)this._loadPoint(e,o[n],i)}},_setLineFill:function(e){var t=e.segments;(4>t.length||!t[0].anchor().equals(a(t).anchor()))&&(e.options.fill=null)},_loadShape:function(e,t){return this._shapeCreated(t)||e.append(t),t},_loadPolygon:function(e,t,i){var n=this._buildPolygon(t);return n.dataItem=i,this._loadShape(e,n)},_buildPolygon:function(e){var t,i,n,r=e.length>1?d.MultiPath:d.Path,o=new r(this.style);for(t=0;e.length>t;t++)for(i=0;e[t].length>i;i++)n=this.locator.locationToView(p.fromLngLat(e[t][i])),0===i?o.moveTo(n.x,n.y):o.lineTo(n.x,n.y);return o},_loadPoint:function(e,t,i){var n=p.fromLngLat(t),r=this.locator.locationToView(n),o=new c.Circle(r,10),s=new d.Circle(o,this.style);return s.dataItem=i,s.location=n,this._loadShape(e,s)}});s(i.data,{schemas:{geojson:{type:"json",data:function(e){return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e}}},transports:{geojson:{read:{dataType:"json"}}}}),s(o,{map:{layers:{shape:m,ShapeLayer:m},GeoJSONLoader:g}})}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.getter,n=t.dataviz,r=t.deepExtend,o=t.util,s=o.defined,a=t.geometry,l=t.drawing,c=n.map,d=c.Location,u=c.layers.ShapeLayer,h=u.extend({options:{autoBind:!0,locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle"},_load:function(e){var t,n,r,o,a,l,c,u,h,p,f,m;if(0!==e.length)for(t=this.options,n=i(t.valueField),e=e.slice(0),e.sort(function(e,t){return n(t)-n(e)}),r=n(e[0]),o=this._scaleType(),l=0;e.length>l;l++)c=e[l],u=i(t.locationField)(c),h=i(t.valueField)(c),s(u)&&s(h)&&(a||(a=new o([0,h],[t.minSize,t.maxSize])),u=d.create(u),p=this.map.locationToView(u),f=a.map(h),m=this._createSymbol({center:p,size:f,style:t.style,dataItem:c,location:u}),m.dataItem=c,m.location=u,m.value=h,this._drawSymbol(m))},_scaleType:function(){var e=this.options.scale;return t.isFunction(e)?e:n.map.scales[e]},_createSymbol:function(e){var i=this.options.symbol;return t.isFunction(i)||(i=n.map.symbols[i]),i(e)},_drawSymbol:function(e){var t={layer:this,shape:e},i=this.map.trigger("shapeCreated",t);i||this.surface.draw(e)}}),p=t.Class.extend({init:function(e,t){var i,n;this._domain=e,this._range=t,i=Math.sqrt(e[1])-Math.sqrt(e[0]),n=t[1]-t[0],this._ratio=n/i},map:function(e){var t=(Math.sqrt(e)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+t}}),f={circle:function(e){var t=new a.Circle(e.center,e.size/2);return new l.Circle(t,e.style)},square:function(e){var t=new l.Path(e.style),i=e.size/2,n=e.center;return t.moveTo(n.x-i,n.y-i).lineTo(n.x+i,n.y-i).lineTo(n.x+i,n.y+i).lineTo(n.x-i,n.y+i).close(),t}};r(n,{map:{layers:{bubble:h,BubbleLayer:h},scales:{sqrt:p},symbols:f}})}(window.kendo.jQuery),function(e){function t(e){return new u(f(e.x),f(e.y))}function i(e,t){return"x:"+e.x+"y:"+e.y+"zoom:"+t}var n=Math,r=e.proxy,o=window.kendo,s=o.Class,a=o.template,l=o.dataviz,c=o.deepExtend,d=o.geometry,u=d.Point,h=l.map.layers.Layer,p=o.util,f=p.round,m=p.renderSize,g=p.limitValue,v=h.extend({init:function(e,t){h.fn.init.call(this,e,t),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var i=this._viewType();this._view=new i(this.element,this.options)},destroy:function(){h.fn.destroy.call(this),this._view.destroy(),this._view=null},_reset:function(){h.fn._reset.call(this),this._updateView(),this._view.clear(),this._view.reset()},_viewType:function(){return y},_activate:function(){h.fn._activate.call(this),o.support.mobileOS||(this._pan||(this._pan=o.throttle(r(this._render,this),100)),this.map.bind("pan",this._pan))},_deactivate:function(){h.fn._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},_updateView:function(){var e=this._view,t=this.map,i=t.extent(),n={nw:t.locationToLayer(i.nw).round(),se:t.locationToLayer(i.se).round()};e.center(t.locationToLayer(t.center())),e.extent(n),e.zoom(t.zoom())},_resize:function(){this._render()},_panEnd:function(e){h.fn._panEnd.call(this,e),this._render()},_render:function(){this._updateView(),this._view.render()}}),y=s.extend({init:function(e,t){this.element=e,this._initOptions(t),this.pool=new b},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(e){this._center=e},extent:function(e){this._extent=e},zoom:function(e){this._zoom=e},pointToTileIndex:function(e){return new u(n.floor(e.x/this.options.tileSize),n.floor(e.y/this.options.tileSize))},clear:function(){this.pool.empty()},tileCount:function(){var e=this.size(),t=this.pointToTileIndex(this._extent.nw),i=this._extent.nw,r=this.indexToPoint(t).translate(-i.x,-i.y);return{x:n.ceil((n.abs(r.x)+e.width)/this.options.tileSize),y:n.ceil((n.abs(r.y)+e.height)/this.options.tileSize)}},size:function(){var e=this._extent.nw,t=this._extent.se,i=t.clone().translate(-e.x,-e.y);return{width:i.x,height:i.y}},indexToPoint:function(e){var t=e.x,i=e.y;return new u(t*this.options.tileSize,i*this.options.tileSize)},subdomainText:function(){var e=this.options.subdomains;return e[this.subdomainIndex++%e.length]},destroy:function(){this.element.empty(),this.pool.empty()},reset:function(){this.subdomainIndex=0,this.basePoint=this._extent.nw,this.render()},render:function(){var e,t,i,n=this.tileCount(),r=this.pointToTileIndex(this._extent.nw);for(t=0;n.x>t;t++)for(i=0;n.y>i;i++)e=this.createTile({x:r.x+t,y:r.y+i}),e.options.visible||(this.element.append(e.element),e.options.visible=!0)},createTile:function(e){var t=this.tileOptions(e);return this.pool.get(this._center,t)},tileOptions:function(e){var i=this.wrapIndex(e),n=this.indexToPoint(e),r=this.basePoint,o=n.clone().translate(-r.x,-r.y);return{index:i,currentIndex:e,point:n,offset:t(o),zoom:this._zoom,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(e){var t=n.pow(2,this._zoom);return{x:this.wrapValue(e.x,t),y:g(e.y,0,t-1)}},wrapValue:function(e,t){var i=n.abs(e)%t;return e=e>=0?i:t-(0===i?t:i)}}),_=s.extend({init:function(e){this._initOptions(e),this.createElement(),this.load(),this.options.visible=!1},options:{urlTemplate:"",errorUrlTemplate:"",visible:!1},createElement:function(){this.element=e("<img style='position: absolute; display: block; visibility: visible;' />").error(r(function(e){this.errorUrl()?e.target.setAttribute("src",this.errorUrl()):e.target.removeAttribute("src")},this))},load:function(e){this.options=c({},this.options,e);var t=this.element[0];t.style.visibility="visible",t.style.display="block",t.style.top=m(this.options.offset.y),t.style.left=m(this.options.offset.x),t.setAttribute("src",this.url()),this.options.id=i(this.options.currentIndex,this.options.zoom),this.options.visible=!0},url:function(){var e=a(this.options.urlTemplate);return e(this.urlOptions())},errorUrl:function(){var e=a(this.options.errorUrlTemplate);return e(this.urlOptions())},urlOptions:function(){var e=this.options;return{zoom:e.zoom,subdomain:e.subdomain,z:e.zoom,x:e.index.x,y:e.index.y,s:e.subdomain,quadkey:e.quadkey,q:e.quadkey,culture:e.culture,c:e.culture}},destroy:function(){this.element&&(this.element.remove(),this.element=null)}}),b=s.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(e,t){var i,n=this;return i=n._items.length>=n.options.maxSize?n._update(e,t):n._create(t)},empty:function(){var e,t=this._items;for(e=0;t.length>e;e++)t[e].destroy();this._items=[]},_create:function(e){var t,n,r,o,s=this,a=s._items,l=i(e.currentIndex,e.zoom);for(n=0;a.length>n;n++)r=a[n],r.options.id===l&&(t=r,o=t);return t?t.load(e):(o=new _(e),this._items.push(o)),o},_update:function(e,t){var n,r,o,s,a=this,l=a._items,c=-Number.MAX_VALUE,d=i(t.currentIndex,t.zoom);for(o=0;l.length>o;o++){if(s=l[o],n=s.options.point.clone().distanceTo(e),s.options.id===d)return l[o];n>c&&(r=o,c=n)}return l[r].load(t),l[r]}});c(l,{map:{layers:{tile:v,TileLayer:v,ImageTile:_,TilePool:b,TileView:y}}})}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.dataviz,r=i.deepExtend,o=i.util.defined,s=n.map.Extent,a=n.map.Location,l=n.map.layers.TileLayer,c=n.map.layers.TileView,d=l.extend({init:function(t,i){l.fn.init.call(this,t,i),this._onMetadata=e.proxy(this._onMetadata,this),this._fetchMetadata()},options:{baseUrl:"//dev.virtualearth.net/REST/v1/Imagery/Metadata/",imagerySet:"road"},_fetchMetadata:function(){var t=this.options;if(!t.key)throw Error("Bing tile layer: API key is required");e.ajax({url:t.baseUrl+t.imagerySet,data:{output:"json",include:"ImageryProviders",key:t.key,uriScheme:this._scheme(window.location.protocol)},type:"get",dataType:"jsonp",jsonp:"jsonp",success:this._onMetadata})},_scheme:function(e){return"https"===e.replace(":","")?"https":"http"},_onMetadata:function(e){var t,i;e&&e.resourceSets.length&&(t=this.resource=e.resourceSets[0].resources[0],r(this._view.options,{urlTemplate:t.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:t.imageUrlSubdomains}),i=this.options,o(i.minZoom)||(i.minZoom=t.zoomMin),o(i.maxZoom)||(i.maxZoom=t.zoomMax),this._addAttribution(),this.reset())},_viewType:function(){return u},_addAttribution:function(){var e,t,i,n,r,o=this.map.attribution;if(o&&(e=this.resource.imageryProviders))for(t=0;e.length>t;t++)for(i=e[t],n=0;i.coverageAreas.length>n;n++)r=i.coverageAreas[n],o.add({text:i.attribution,minZoom:r.zoomMin,maxZoom:r.zoomMax,extent:new s(new a(r.bbox[2],r.bbox[1]),new a(r.bbox[0],r.bbox[3]))})},imagerySet:function(e){return e?(this.options.imagerySet=e,this.map.attribution.clear(),this._fetchMetadata(),this._reset(),t):this.options.imagerySet}}),u=c.extend({options:{culture:"en-US"},tileOptions:function(e){var t=c.fn.tileOptions.call(this,e);return t.culture=this.options.culture,t.quadkey=this.tileQuadKey(this.wrapIndex(e)),t},tileQuadKey:function(e){var t,i,n,r="";for(n=this._zoom;n>0;n--)t=0,i=1<<n-1,0!==(e.x&i)&&t++,0!==(e.y&i)&&(t+=2),r+=t;return r}});r(n,{map:{layers:{bing:d,BingLayer:d,BingView:u}}})}(window.kendo.jQuery),function(e,t){var i=document,n=Math,r=e.inArray,o=e.proxy,s=window.kendo,a=s.Class,l=s.data.DataSource,c=s.ui.Tooltip,d=s.dataviz,u=s.deepExtend,h=d.map,p=h.Location,f=h.layers.Layer,m=f.extend({init:function(e,t){f.fn.init.call(this,e,t),this._markerClick=o(this._markerClick,this),this.element.on("click",".k-marker",this._markerClick),this.items=[],this._initDataSource()},destroy:function(){f.fn.destroy.call(this),this.element.off("click",".k-marker",this._markerClick),this.dataSource.unbind("change",this._dataChange),this.clear()},options:{zIndex:1e3,autoBind:!0,dataSource:{},locationField:"location",titleField:"title"},add:function(t){if(!e.isArray(t))return this._addOne(t);for(var i=0;t.length>i;i++)this._addOne(t[i])},remove:function(e){e.destroy();var t=r(e,this.items);t>-1&&this.items.splice(t,1)},clear:function(){for(var e=0;this.items.length>e;e++)this.items[e].destroy();this.items=[]},update:function(e){var t,i=e.location();i&&(e.showAt(this.map.locationToView(i)),t={marker:e,layer:this},this.map.trigger("markerActivate",t))},_reset:function(){var e,t;for(f.fn._reset.call(this),e=this.items,t=0;e.length>t;t++)this.update(e[t])},bind:function(e,i){var n,r,o=h.Marker.create(e,this.options);return o.dataItem=i,n={marker:o,layer:this},r=this.map.trigger("markerCreated",n),r?t:(this.add(o),o)},setDataSource:function(e){this.dataSource&&this.dataSource.unbind("change",this._dataChange),this.dataSource=e,this.dataSource.bind("change",this._dataChange),this.options.autoBind&&this.dataSource.fetch()},_addOne:function(e){var t=g.create(e,this.options);return t.addTo(this),t},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=o(this._dataChange,this),this.dataSource=l.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._load(e.sender.view())},_load:function(e){var t,i,n,r;for(this._data=e,this.clear(),t=s.getter(this.options.locationField),i=s.getter(this.options.titleField),n=0;e.length>n;n++)r=e[n],this.bind({location:t(r),title:i(r)},r)},_markerClick:function(t){var i={marker:e(t.target).data("kendoMarker"),layer:this};this.map.trigger("markerClick",i)}}),g=a.extend({init:function(e){this.options=e||{}},addTo:function(e){this.layer=e.markers||e,this.layer.items.push(this),this.layer.update(this)},location:function(e){return e?(this.options.location=p.create(e).toArray(),this.layer&&this.layer.update(this),this):p.create(this.options.location)},showAt:function(e){this.render(),this.element.css({left:n.round(e.x),top:n.round(e.y)}),this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},hide:function(){this.element&&(this.element.remove(),this.element=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},destroy:function(){this.layer=null,this.hide()},render:function(){var t,n;this.element||(t=this.options,n=this.layer,this.element=e(i.createElement("span")).addClass("k-marker k-marker-"+s.toHyphens(t.shape||"pin")).attr("title",t.title).data("kendoMarker",this).css("zIndex",t.zIndex),n&&n.element.append(this.element),this.renderTooltip())},renderTooltip:function(){var e,t,i=this,n=i.options.title,r=i.options.tooltip||{};r&&c&&(e=r.template,e&&(t=s.template(e),r.content=function(e){return e.location=i.location(),e.marker=i,t(e)}),(n||r.content||r.contentUrl)&&(this.tooltip=new c(this.element,r),this.tooltip.marker=this))}});g.create=function(e,t){return e instanceof g?e:new g(u({},t,e))},u(d,{map:{layers:{marker:m,MarkerLayer:m},Marker:g}})}(window.kendo.jQuery),function(e){var t=document,i=Math,n=i.min,r=i.pow,o=e.proxy,s=window.kendo,a=s.ui.Widget,l=s.deepExtend,c=s.dataviz,d=c.ui,u=s.geometry,h=u.Point,p=c.map,f=p.Extent,m=p.Location,g=p.crs.EPSG3857,v=s.util,y=v.defined,_=v.limitValue,b=v.renderPos,w=v.valueOrDefault,k="k-",x=.9,C=.93,S="DOMMouseScroll mousewheel",T=5,D=a.extend({init:function(e,i){s.destroy(e),a.fn.init.call(this,e),this._initOptions(i),this.bind(this.events,i),this.crs=new g,this.element.addClass(k+this.options.name.toLowerCase()).css("position","relative").empty().append(t.createElement("div")),this._viewOrigin=this._getOrigin(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheel=o(this._mousewheel,this),this.element.bind("click",o(this._click,this)),this.element.bind(S,this._mousewheel)},options:{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0},events:["beforeReset","click","reset","pan","panEnd","markerActivate","markerClick","markerCreated","shapeClick","shapeCreated","shapeMouseEnter","shapeMouseLeave","zoomStart","zoomEnd"],destroy:function(){this.scroller.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),this.markers.destroy();for(var e=0;this.layers.length>e;e++)this.layers[e].destroy();a.fn.destroy.call(this)},zoom:function(e){var t=this.options;return y(e)?(e=_(e,t.minZoom,t.maxZoom),t.zoom!==e&&(t.zoom=e,this._reset()),this):t.zoom},center:function(e){return e?(this.options.center=m.create(e).toArray(),this._reset(),this):m.create(this.options.center)},extent:function(e){return e?(this._setExtent(e),this):this._getExtent()},setOptions:function(e){a.fn.setOptions.call(this,e),this._reset()},locationToLayer:function(e,t){var i=!this.options.wraparound;return e=m.create(e),this.crs.toPoint(e,this._layerSize(t),i)},layerToLocation:function(e,t){var i=!this.options.wraparound;return e=h.create(e),this.crs.toLocation(e,this._layerSize(t),i)},locationToView:function(e){var t,i;return e=m.create(e),t=this.locationToLayer(this._viewOrigin),i=this.locationToLayer(e),i.translateWith(t.scale(-1))},viewToLocation:function(e,t){var i=this.locationToLayer(this._getOrigin(),t);return e=h.create(e),e=e.clone().translateWith(i),this.layerToLocation(e,t)},eventOffset:function(e){var t=this.element.offset(),i=e.originalEvent||e,n=w(i.pageX,i.clientX)-t.left,r=w(i.pageY,i.clientY)-t.top;return new u.Point(n,r)},eventToView:function(e){var t=this.eventOffset(e);return this.locationToView(this.viewToLocation(t))},eventToLayer:function(e){return this.locationToLayer(this.eventToLocation(e))},eventToLocation:function(e){var t=this.eventOffset(e);return this.viewToLocation(t)},viewSize:function(){var e=this.element,t=this._layerSize(),i=e.width();return this.options.wraparound||(i=n(t,i)),{width:i,height:n(t,e.height())}},_setOrigin:function(e,t){var i,n=this.viewSize();return e=this._origin=m.create(e),i=this.locationToLayer(e,t),i.x+=n.width/2,i.y+=n.height/2,this.options.center=this.layerToLocation(i,t).toArray(),this},_getOrigin:function(e){var t,i=this.viewSize();return(e||!this._origin)&&(t=this.locationToLayer(this.center()),t.x-=i.width/2,t.y-=i.height/2,this._origin=this.layerToLocation(t)),this._origin},_setExtent:function(e){var t,n,r,o,s,a,l;for(e=f.create(e),this.center(e.center()),t=this.element.width(),n=this.element.height(),r=this.options.maxZoom;r>=this.options.minZoom&&(o=this.locationToLayer(e.nw,r),s=this.locationToLayer(e.se,r),a=i.abs(s.x-o.x),l=i.abs(s.y-o.y),!(t>=a&&n>=l));r--);this.zoom(r)},_getExtent:function(){var e,t=this._getOrigin(),i=this.locationToLayer(t),n=this.viewSize();return i.x+=n.width,i.y+=n.height,e=this.layerToLocation(i),new f(t,e)},_zoomAround:function(e,t){this._setOrigin(this.layerToLocation(e,t),t),this.zoom(t)},_initControls:function(){var e=this.options.controls;d.Attribution&&e.attribution&&this._createAttribution(e.attribution),s.support.mobileOS||(d.Navigator&&e.navigator&&this._createNavigator(e.navigator),d.ZoomControl&&e.zoom&&this._createZoomControl(e.zoom))},_createControlElement:function(t,i){var n=t.position||i,r="."+b(n).replace(" ","."),o=e(".k-map-controls"+r,this.element);return 0===o.length&&(o=e("<div>").addClass("k-map-controls "+b(n)).appendTo(this.element)),e("<div>").appendTo(o)},_createAttribution:function(e){var t=this._createControlElement(e,"bottomRight");this.attribution=new d.Attribution(t,e)},_createNavigator:function(e){var t=this._createControlElement(e,"topLeft"),i=this.navigator=new d.Navigator(t,e);this._navigatorPan=o(this._navigatorPan,this),i.bind("pan",this._navigatorPan),this._navigatorCenter=o(this._navigatorCenter,this),i.bind("center",this._navigatorCenter)},_navigatorPan:function(e){var t=this,i=t.scroller,n=i.scrollLeft+e.x,r=i.scrollTop-e.y,o=this._virtualSize,s=this.element.height(),a=this.element.width();n=_(n,o.x.min,o.x.max-a),r=_(r,o.y.min,o.y.max-s),t.scroller.one("scroll",function(e){t._scrollEnd(e)}),t.scroller.scrollTo(-n,-r)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(e){var t=this._createControlElement(e,"topLeft"),i=this.zoomControl=new d.ZoomControl(t,e);this._zoomControlChange=o(this._zoomControlChange,this),i.bind("change",this._zoomControlChange)},_zoomControlChange:function(e){this.trigger("zoomStart",{originalEvent:e})||(this.zoom(this.zoom()+e.delta),this.trigger("zoomEnd",{originalEvent:e}))},_initScroller:function(){var e=s.support.mobileOS?C:x,t=this.options.zoomable!==!1,i=this.scroller=new s.mobile.ui.Scroller(this.element.children(0),{friction:e,velocityMultiplier:T,zoom:t,mousewheelScrolling:!1});i.bind("scroll",o(this._scroll,this)),i.bind("scrollEnd",o(this._scrollEnd,this)),i.userEvents.bind("gesturestart",o(this._scaleStart,this)),i.userEvents.bind("gestureend",o(this._scale,this)),this.scrollElement=i.scrollElement},_initLayers:function(){var e,t,i,n,r,o=this.options.layers,s=this.layers=[];for(e=0;o.length>e;e++)t=o[e],i=t.type||"shape",n=this.options.layerDefaults[i],r=c.map.layers[i],s.push(new r(this,l({},n,t)))},_initMarkers:function(){this.markers=new p.layers.MarkerLayer(this,this.options.markerDefaults),this.markers.add(this.options.markers)},_scroll:function(e){var t=this.locationToLayer(this._viewOrigin).round(),i=e.sender.movable,n=new u.Point(i.x,i.y).scale(-1).scale(1/i.scale);t.x+=n.x,t.y+=n.y,this._setOrigin(this.layerToLocation(t)),this.trigger("pan",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(e){this.trigger("panEnd",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scaleStart:function(e){if(this.trigger("zoomStart",{originalEvent:e})){var t=e.touches[1];t&&t.cancel()}},_scale:function(e){var t=this.scroller.movable.scale,i=this._scaleToZoom(t),n=new u.Point(e.center.x,e.center.y),r=this.viewToLocation(n,i),o=this.locationToLayer(r,i),s=o.translate(-n.x,-n.y);this._zoomAround(s,i),this.trigger("zoomEnd",{originalEvent:e})},_scaleToZoom:function(e){var t=this._layerSize()*e,n=t/this.options.minSize,r=i.log(n)/i.log(2);return i.round(r)},_reset:function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.trigger("beforeReset"),this.trigger("reset")},_resetScroller:function(){var e,t,i,n,o=this.scroller,s=o.dimensions.x,a=o.dimensions.y,l=this._layerSize(),c=20*l,d=this.extent().nw,u=this.locationToLayer(d).round();o.movable.round=!0,o.reset(),o.userEvents.cancel(),e=this.options.maxZoom-this.zoom(),o.dimensions.maxScale=r(2,e),t={min:-u.x,max:l-u.x},i={min:-u.y,max:l-u.y},this.options.wraparound&&(t.min=-c,t.max=c),this.options.pannable===!1&&(n=this.viewSize(),t.min=i.min=0,t.max=n.width,i.max=n.height),s.makeVirtual(),a.makeVirtual(),s.virtualSize(t.min,t.max),a.virtualSize(i.min,i.max),this._virtualSize={x:t,y:i}},_renderLayers:function(){var e,t,i,n,r,o=this.options.layers,s=this.layers=[],a=this.scrollWrap;for(a.empty(),e=0;o.length>e;e++)t=o[e],i=t.type||"shape",n=this.options.layerDefaults[i],r=c.map.layers[i],s.push(new r(this,l({},n,t)))},_layerSize:function(e){return e=w(e,this.options.zoom),this.options.minSize*r(2,e)},_click:function(e){var t=this.eventOffset(e);this.trigger("click",{originalEvent:e,location:this.viewToLocation(t)})},_mousewheel:function(e){var t,i,n,r,o,s,a,l;e.preventDefault(),t=c.mwDelta(e)>0?-1:1,i=this.options,n=this.zoom(),r=_(n+t,i.minZoom,i.maxZoom),i.zoomable!==!1&&r!==n&&(this.trigger("zoomStart",{originalEvent:e})||(o=this.eventOffset(e),s=this.viewToLocation(o),a=this.locationToLayer(s,r),l=a.translate(-o.x,-o.y),this._zoomAround(l,r),this.trigger("zoomEnd",{originalEvent:e})))}});c.ui.plugin(D)}(window.kendo.jQuery),function(e,t){function i(e,i,n){function r(e){for(var t=1;e*t%1;)t*=10;return t}var o,s,a,l;if(t===e||t===i)return[];if(n&&u.sign(i-e)!=u.sign(n))throw"The sign of the increment should allow to reach the stop-value.";if(n=n||1,e=e||0,i=i||e,(i-e)/n===1/0)throw"Infinite range defined.";if(o=[],s=-1,l=r(Math.abs(n)),e*=l,i*=l,n*=l,e>i&&n>0&&(n=-n),0>n)for(;(a=e+n*++s)>=i;)o.push(a/l);else for(;(a=e+n*++s)<=i;)o.push(a/l);return o}function n(e,t){if(e==t)return 0;var i=t.x-e.x,n=e.y-t.y,r=Math.atan(i/n);return n>=0?0>i?r+2*Math.PI:r:r+Math.PI}var r,o,s=window.kendo,a=s.dataviz.diagram={},l=s.deepExtend,c=e.isArray,d=1e-6,u={};l(u,{isNearZero:function(e){return Math.abs(e)<d},isDefined:function(e){return t!==e},isUndefined:function(e){return t===e||null===e},isObject:function(e){return e===Object(e)},has:function(e,t){return Object.hasOwnProperty.call(e,t)},isString:function(e){return"[object String]"==Object.prototype.toString.call(e)},isBoolean:function(e){return"[object Boolean]"==Object.prototype.toString.call(e)},isType:function(e,t){return Object.prototype.toString.call(e)=="[object "+t+"]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isEmpty:function(e){if(null===e)return!0;if(c(e)||u.isString(e))return 0===e.length;for(var t in e)if(u.has(e,t))return!1;return!0},simpleExtend:function(e,t){if(u.isObject(t))for(var i in t)e[i]=t[i]},initArray:function(e,t){var i,n=[];for(i=0;e>i;++i)n[i]=t;return n},serializePoints:function(e){var t,i,n=[];for(t=0;e.length>t;t++)i=e[t],n.push(i.x+";"+i.y);return n.join(";")},deserializePoints:function(e){var t,i=e.split(";"),n=[];if(i.length%2!==0)throw"Not an array of points.";for(t=0;i.length>t;t+=2)n.push(new a.Point(parseInt(i[t],10),parseInt(i[t+1],10)));return n},randomInteger:function(e,t){return parseInt(Math.floor(Math.random()*t)+e,10)},DFT:function(e,t){var i,n;if(t(e),e.childNodes)for(i=0;e.childNodes.length>i;i++)n=e.childNodes[i],this.DFT(n,t)},getMatrixAngle:function(e){return null===e||0===e.d?0:180*Math.atan2(e.b,e.d)/Math.PI},getMatrixScaling:function(e){var t=Math.sqrt(e.a*e.a+e.c*e.c),i=Math.sqrt(e.b*e.b+e.d*e.d);return[t,i]}}),u.sign=function(e){return e?0>e?-1:1:0},u.findAngle=function(e,t){return 180*n(e,t)/Math.PI},u.forEach=function(e,t,i){for(var n=0;e.length>n;n++)t.call(i,e[n],n,e)},u.any=function(e,t){for(var i=0;e.length>i;++i)if(t(e[i]))return e[i];return null},u.remove=function(e,t){for(var i;-1!==(i=u.indexOf(e,t));)e.splice(i,1);return e},u.contains=function(e,t){
return-1!==u.indexOf(e,t)},u.indexOf=function(t,i){return e.inArray(i,t)},u.fold=function(e,t,i,n){var r,o,s=arguments.length>2;for(r=0;e.length>r;r++)o=e[r],s?i=t.call(n,i,o,r,e):(i=o,s=!0);if(!s)throw"Reduce of empty array with no initial value";return i},u.find=function(e,t,i){var n;return u.any(e,function(e,r,o){return!!t.call(i,e,r,o)&&(n=e,!0)}),n},u.first=function(e,t,i){return 0===e.length?null:u.isUndefined(t)?e[0]:u.find(e,t,i)},u.insert=function(e,t,i){return e.splice(i,0,t),e},u.all=function(e,t,i){var n,r,o=!0;for(r=0;e.length>r&&(n=e[r],o=o&&t.call(i,n,r,e));r++);return o},u.clear=function(e){e.splice(0,e.length)},u.bisort=function(e,t,i){if(u.isUndefined(e))throw"First array is not specified.";if(u.isUndefined(t))throw"Second array is not specified.";if(e.length!=t.length)throw"The two arrays should have equal length";var n,r=[];for(n=0;e.length>n;n++)r.push({x:e[n],y:t[n]});for(r.sort(u.isUndefined(i)?function(e,t){return e.x-t.x}:function(e,t){return i(e.x,t.x)}),u.clear(e),u.clear(t),n=0;r.length>n;n++)e.push(r[n].x),t.push(r[n].y)},u.addRange=function(e,t){e.push.apply(e,t)},r={easeInOut:function(e){return-Math.cos(e*Math.PI)/2+.5}},o=s.Class.extend({init:function(){this.adapters=[],this.target=0,this.tick=0,this.interval=20,this.duration=800,this.lastTime=null,this.handlers=[];var e=this;this.transition=r.easeInOut,this.timerDelegate=function(){e.onTimerEvent()}},addAdapter:function(e){this.adapters.push(e)},onComplete:function(e){this.handlers.push(e)},removeHandler:function(t){this.handlers=e.grep(this.handlers,function(e){return e!==t})},trigger:function(){var e=this;this.handlers&&u.forEach(this.handlers,function(t){return t.call(null!==e.caller?e.caller:e)})},onStep:function(){},seekTo:function(e){this.seekFromTo(this.tick,e)},seekFromTo:function(e,t){this.target=Math.max(0,Math.min(1,t)),this.tick=Math.max(0,Math.min(1,e)),this.lastTime=(new Date).getTime(),this.intervalId||(this.intervalId=window.setInterval(this.timerDelegate,this.interval))},stop:function(){this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null,this.trigger())},play:function(e){0!==this.adapters.length&&(null!==e&&(this.caller=e),this.initState(),this.seekFromTo(0,1))},reverse:function(){this.seekFromTo(1,0)},initState:function(){if(0!==this.adapters.length)for(var e=0;this.adapters.length>e;e++)this.adapters[e].initState()},propagate:function(){var e,t=this.transition(this.tick);for(e=0;this.adapters.length>e;e++)this.adapters[e].update(t)},onTimerEvent:function(){var e,t=(new Date).getTime(),i=t-this.lastTime;this.lastTime=t,e=i/this.duration*(this.target>this.tick?1:-1),Math.abs(e)>=Math.abs(this.tick-this.target)?this.tick=this.target:this.tick+=e;try{this.propagate()}finally{this.onStep.call(this),this.target==this.tick&&this.stop()}}}),s.deepExtend(a,{init:function(e){s.init(e,a.ui)},Utils:u,Range:i,Ticker:o})}(window.kendo.jQuery),function(e,t){function i(e){return Math.abs(e)<F}function n(e,t,n,r,o){var s,a,l,c,d=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(!i(d)&&(s=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),a=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),l=s/d,c=a/d,!o||!(0>l||l>1||0>c||c>1)))return new M(e.x+l*(t.x-e.x),e.y+l*(t.y-e.y))}function r(e,t){var i,n,r;do i=2*Math.random()-1,n=2*Math.random()-1,r=i*i+n*n;while(!r||r>1);return e+t*i*Math.sqrt(-2*Math.log(r)/r)}function o(e){var t,i,n;for(D.isUndefined(e)&&(e=10),t="",i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=e;n>0;--n)t+=i.charAt(Math.round(Math.random()*(i.length-1)));return t}var s,a,l,c,d,u,h,p,f,m,g,v,y,_,b,w,k=window.kendo,x=k.dataviz.diagram,C=k.Class,S=k.deepExtend,T=k.dataviz,D=x.Utils,M=T.Point2D,A=k.isFunction,E=D.contains,I=e.map,P=3,F=1e-6;S(M.fn,{plus:function(e){return new M(this.x+e.x,this.y+e.y)},minus:function(e){return new M(this.x-e.x,this.y-e.y)},offset:function(e){return new M(this.x-e,this.y-e)},times:function(e){return new M(this.x*e,this.y*e)},normalize:function(){return 0===this.length()?new M:this.times(1/this.length())},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},toString:function(){return"("+this.x+","+this.y+")"},lengthSquared:function(){return this.x*this.x+this.y*this.y},middleOf:function(e,t){return new M(t.x-e.x,t.y-e.y).times(.5).plus(e)},toPolar:function(e){var t,i,n,r=1;if(e&&(r=180/Math.PI),t=Math.atan2(Math.abs(this.y),Math.abs(this.x)),i=Math.PI/2,n=this.length(),0===this.x){if(0===this.y)return new u(0,0);if(this.y>0)return new u(n,r*i);if(0>this.y)return new u(n,3*r*i)}else if(this.x>0){if(0===this.y)return new u(n,0);if(this.y>0)return new u(n,r*t);if(0>this.y)return new u(n,r*(4*i-t))}else{if(0===this.y)return new u(n,2*i);if(this.y>0)return new u(n,r*(2*i-t));if(0>this.y)return new u(n,r*(2*i+t))}},isOnLine:function(e,t){var i,n,r,o,s;return e.x>t.x&&(i=t,t=e,e=i),n=new a(e.x,e.y).inflate(P,P),r=new a(t.x,t.y).inflate(P,P),!!n.union(r).contains(this)&&(e.x===t.x||e.y===t.y||(t.y>e.y?(o=n.x+(r.x-n.x)*(this.y-(n.y+n.height))/(r.y+r.height-(n.y+n.height)),s=n.x+n.width+(r.x+r.width-(n.x+n.width))*(this.y-n.y)/(r.y-n.y)):(o=n.x+(r.x-n.x)*(this.y-n.y)/(r.y-n.y),s=n.x+n.width+(r.x+r.width-(n.x+n.width))*(this.y-(n.y+n.height))/(r.y+r.height-(n.y+n.height))),this.x>o&&s>this.x))}}),S(M,{parse:function(e){var i=e.slice(1,e.length-1),n=i.split(","),r=parseInt(n[0],10),o=parseInt(n[1],10);return isNaN(r)||isNaN(o)?t:new M(r,o)}}),s=C.extend({init:function(e,t,i){this.point=e,this.left=t,this.right=i}}),a=C.extend({init:function(e,t,i,n){this.x=e||0,this.y=t||0,this.width=i||0,this.height=n||0},contains:function(e){return e.x>=this.x&&this.x+this.width>=e.x&&e.y>=this.y&&this.y+this.height>=e.y},inflate:function(e,i){return i===t&&(i=e),this.x-=e,this.y-=i,this.width+=2*e+1,this.height+=2*i+1,this},offset:function(e,t){var i=e,n=t;return e instanceof M&&(i=e.x,n=e.y),this.x+=i,this.y+=n,this},union:function(e){var t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),n=Math.max(this.x+this.width,e.x+e.width),r=Math.max(this.y+this.height,e.y+e.height);return new a(t,i,n-t,r-i)},center:function(){return new M(this.x+this.width/2,this.y+this.height/2)},top:function(){return new M(this.x+this.width/2,this.y)},right:function(){return new M(this.x+this.width,this.y+this.height/2)},bottom:function(){return new M(this.x+this.width/2,this.y+this.height)},left:function(){return new M(this.x,this.y+this.height/2)},topLeft:function(){return new M(this.x,this.y)},topRight:function(){return new M(this.x+this.width,this.y)},bottomLeft:function(){return new M(this.x,this.y+this.height)},bottomRight:function(){return new M(this.x+this.width,this.y+this.height)},clone:function(){return new a(this.x,this.y,this.width,this.height)},isEmpty:function(){return!this.width&&!this.height},equals:function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},rotatedBounds:function(e){var t=this.clone(),i=this.rotatedPoints(e),n=i[0],r=i[1],o=i[2],s=i[3];return t.x=Math.min(o.x,n.x,r.x,s.x),t.y=Math.min(o.y,n.y,r.y,s.y),t.width=Math.max(o.x,n.x,r.x,s.x)-t.x,t.height=Math.max(o.y,n.y,r.y,s.y)-t.y,t},rotatedPoints:function(e){var t=this,i=t.center(),n=t.bottomRight().rotate(i,360-e),r=t.topLeft().rotate(i,360-e),o=t.topRight().rotate(i,360-e),s=t.bottomLeft().rotate(i,360-e);return[r,o,n,s]},toString:function(e){return e=e||" ",this.x+e+this.y+e+this.width+e+this.height},scale:function(e,t,i,n,r){var o,s,a,l=this.topLeft(),c=this.center();l.rotate(c,360-r).rotate(n,r),o=i.minus(l),s=new M(o.x*e,o.y*t),a=o.minus(s),l=l.plus(a),l.rotate(n,360-r).rotate(c,r),this.x=l.x,this.y=l.y,this.width*=e,this.height*=t},zoom:function(e){return this.x*=e,this.y*=e,this.width*=e,this.height*=e,this}}),l=C.extend({init:function(e,t){this.width=e,this.height=t}}),l.prototype.Empty=new l(0,0),a.toRect=function(e){return e instanceof a||(e=new a(e.x,e.y,e.width,e.height)),e},a.empty=function(){return new a(0,0,0,0)},a.fromPoints=function(e,t){if(isNaN(e.x)||isNaN(e.y)||isNaN(t.x)||isNaN(t.y))throw"Some values are NaN.";return new a(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.abs(e.x-t.x),Math.abs(e.y-t.y))},c={lines:function(e,t,i,r){return n(e,t,i,r)},segments:function(e,t,i,r){return n(e,t,i,r,!0)},rectWithLine:function(e,t,i){return c.segments(t,i,e.topLeft(),e.topRight())||c.segments(t,i,e.topRight(),e.bottomRight())||c.segments(t,i,e.bottomLeft(),e.bottomRight())||c.segments(t,i,e.topLeft(),e.bottomLeft())},rects:function(e,t,i){var n,r,o=t.topLeft(),s=t.topRight(),a=t.bottomLeft(),l=t.bottomRight(),d=t.center();return i&&(o=o.rotate(d,i),s=s.rotate(d,i),a=a.rotate(d,i),l=l.rotate(d,i)),n=e.contains(o)||e.contains(s)||e.contains(a)||e.contains(l)||c.rectWithLine(e,o,s)||c.rectWithLine(e,o,a)||c.rectWithLine(e,s,l)||c.rectWithLine(e,a,l),n||(o=e.topLeft(),s=e.topRight(),a=e.bottomLeft(),l=e.bottomRight(),i&&(r=360-i,o=o.rotate(d,r),s=s.rotate(d,r),a=a.rotate(d,r),l=l.rotate(d,r)),n=t.contains(o)||t.contains(s)||t.contains(a)||t.contains(l)),n}},d=C.extend({init:function(e){this.container=a.toRect(e)},align:function(e,t){var i,n=t.toLowerCase().split(" ");for(i=0;n.length>i;i++)e=this._singleAlign(e,n[i]);return e},_singleAlign:function(e,t){return A(this[t])?this[t](e):e},left:function(e){return this._align(e,this._left)},center:function(e){return this._align(e,this._center)},right:function(e){return this._align(e,this._right)},stretch:function(e){return this._align(e,this._stretch)},top:function(e){return this._align(e,this._top)},middle:function(e){return this._align(e,this._middle)},bottom:function(e){return this._align(e,this._bottom)},_left:function(e,t){t.x=e.x},_center:function(e,t){t.x=(e.width-t.width)/2||0},_right:function(e,t){t.x=e.width-t.width},_top:function(e,t){t.y=e.y},_middle:function(e,t){t.y=(e.height-t.height)/2||0},_bottom:function(e,t){t.y=e.height-t.height},_stretch:function(e,t){t.x=0,t.y=0,t.height=e.height,t.width=e.width},_align:function(e,t){return e=a.toRect(e),t(this.container,e),e}}),u=C.extend({init:function(e,t){this.r=e,this.angle=t}}),h=C.extend({init:function(e,t,i,n,r,o){this.a=e||0,this.b=t||0,this.c=i||0,this.d=n||0,this.e=r||0,this.f=o||0},plus:function(e){this.a+=e.a,this.b+=e.b,this.c+=e.c,this.d+=e.d,this.e+=e.e,this.f+=e.f},minus:function(e){this.a-=e.a,this.b-=e.b,this.c-=e.c,this.d-=e.d,this.e-=e.e,this.f-=e.f},times:function(e){return new h(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},apply:function(e){return new M(this.a*e.x+this.c*e.y+this.e,this.b*e.x+this.d*e.y+this.f)},applyRect:function(e){return a.fromPoints(this.apply(e.topLeft()),this.apply(e.bottomRight()))},toString:function(){return"matrix("+this.a+" "+this.b+" "+this.c+" "+this.d+" "+this.e+" "+this.f+")"}}),S(h,{fromSVGMatrix:function(e){var t=new h;return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t},fromMatrixVector:function(e){var t=new h;return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t},fromList:function(e){if(6!==e.length)throw"The given list should consist of six elements.";var t=new h;return t.a=e[0],t.b=e[1],t.c=e[2],t.d=e[3],t.e=e[4],t.f=e[5],t},translation:function(e,t){var i=new h;return i.a=1,i.b=0,i.c=0,i.d=1,i.e=e,i.f=t,i},unit:function(){return new h(1,0,0,1,0,0)},rotation:function(e,t,i){var n=new h;return n.a=Math.cos(e*Math.PI/180),n.b=Math.sin(e*Math.PI/180),n.c=-n.b,n.d=n.a,n.e=t-t*n.a+i*n.b||0,n.f=i-i*n.a-t*n.b||0,n},scaling:function(e,t){var i=new h;return i.a=e,i.b=0,i.c=0,i.d=t,i.e=0,i.f=0,i},parse:function(e){var t,i;if(e){if(e=e.trim(),"matrix"===e.slice(0,6).toLowerCase()){if(i=e.slice(7,e.length-1).trim(),t=i.split(","),6===t.length)return h.fromList(I(t,function(e){return parseFloat(e)}));if(t=i.split(" "),6===t.length)return h.fromList(I(t,function(e){return parseFloat(e)}))}if("("===e.slice(0,1)&&")"===e.slice(e.length-1)&&(e=e.substr(1,e.length-1)),e.indexOf(",")>0&&(t=e.split(","),6===t.length))return h.fromList(I(t,function(e){return parseFloat(e)}));if(e.indexOf(" ")>0&&(t=e.split(" "),6===t.length))return h.fromList(I(t,function(e){return parseFloat(e)}))}return t}}),p=C.extend({init:function(e,t,i,n,r,o){this.a=e||0,this.b=t||0,this.c=i||0,this.d=n||0,this.e=r||0,this.f=o||0},fromMatrix:function(e){var t=new p;return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t}}),f={_distanceToLineSquared:function(e,t,i){function n(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)}if(t===i)return n(e,t);var r=i.x-t.x,o=i.y-t.y,s=(e.x-t.x)*r+(e.y-t.y)*o;return 0>s?n(t,e):(s=(i.x-e.x)*r+(i.y-e.y)*o,0>s?n(i,e):(s=(i.x-e.x)*o-(i.y-e.y)*r,s*s/(r*r+o*o)))},distanceToLine:function(e,t,i){return Math.sqrt(this._distanceToLineSquared(e,t,i))},distanceToPolyline:function(e,t){var i,n,r,o,s=Number.MAX_VALUE;if(D.isUndefined(t)||0===t.length)return Number.MAX_VALUE;for(i=0;t.length-1>i;i++)n=t[i],r=t[i+1],o=this._distanceToLineSquared(e,n,r),s>o&&(s=o);return Math.sqrt(s)}},m=k.Class.extend({init:function(){this._buckets=[],this.length=0},add:function(e,t){var i=this._createGetBucket(e);return D.isDefined(t)&&(i.value=t),i},get:function(e){return this._bucketExists(e)?this._createGetBucket(e):null},set:function(e,t){this.add(e,t)},containsKey:function(e){return this._bucketExists(e)},remove:function(e){if(this._bucketExists(e)){var t=this._hash(e);return delete this._buckets[t],this.length--,e}},forEach:function(e){var t,i,n,r,o=this._hashes();for(t=0,i=o.length;i>t;t++)n=o[t],r=this._buckets[n],D.isUndefined(r)||e(r)},clone:function(){var e,t,i,n,r=new m,o=this._hashes();for(e=0,t=o.length;t>e;e++)i=o[e],n=this._buckets[i],D.isUndefined(n)||r.add(n.key,n.value);return r},_hashes:function(){var e,t=[];for(e in this._buckets)this._buckets.hasOwnProperty(e)&&t.push(e);return t},_bucketExists:function(e){var t=this._hash(e);return D.isDefined(this._buckets[t])},_createGetBucket:function(e){var t=this._hash(e),i=this._buckets[t];return D.isUndefined(i)&&(i={key:e},this._buckets[t]=i,this.length++),i},_hash:function(e){if(D.isNumber(e))return e;if(D.isString(e))return this._hashString(e);if(D.isObject(e))return this._objectHashId(e);throw"Unsupported key type."},_hashString:function(e){var t,i,n=0;if(0===e.length)return n;for(t=0;e.length>t;t++)i=e.charCodeAt(t),n=32*n-n+i;return n},_objectHashId:function(e){var t=e._hashId;return D.isUndefined(t)&&(t=o(),e._hashId=t),t}}),g=k.Observable.extend({init:function(t){var i,n=this;if(k.Observable.fn.init.call(n),this._hashTable=new m,this.length=0,D.isDefined(t))if(e.isArray(t))for(i=0;t.length>i;i++)this.add(t[i]);else t.forEach(function(e,t){this.add(e,t)},this)},add:function(e,t){var i=this._hashTable.get(e);i||(i=this._hashTable.add(e),this.length++,this.trigger("changed")),i.value=t},set:function(e,t){this.add(e,t)},get:function(e){var t=this._hashTable.get(e);if(t)return t.value;throw Error("Cannot find key "+e)},containsKey:function(e){return this._hashTable.containsKey(e)},remove:function(e){return this.containsKey(e)?(this.trigger("changed"),this.length--,this._hashTable.remove(e)):t},forEach:function(e,t){this._hashTable.forEach(function(i){e.call(t,i.key,i.value)})},forEachValue:function(e,t){this._hashTable.forEach(function(i){e.call(t,i.value)})},forEachKey:function(e,t){this._hashTable.forEach(function(i){e.call(t,i.key)})},keys:function(){var e=[];return this.forEachKey(function(t){e.push(t)}),e}}),v=k.Class.extend({init:function(){this._tail=null,this._head=null,this.length=0},enqueue:function(e){var t={value:e,next:null};this._head?(this._tail.next=t,this._tail=this._tail.next):(this._head=t,this._tail=this._head),this.length++},dequeue:function(){if(1>this.length)throw Error("The queue is empty.");var e=this._head.value;return this._head=this._head.next,this.length--,e},contains:function(e){for(var t=this._head;t;){if(t.value===e)return!0;t=t.next}return!1}}),y=k.Observable.extend({init:function(e){var t=this;k.Observable.fn.init.call(t),this._hashTable=new m,this.length=0,D.isDefined(e)&&(e instanceof m?e.forEach(function(e){this.add(e)}):e instanceof g&&e.forEach(function(e,t){this.add({key:e,value:t})},this))},contains:function(e){return this._hashTable.containsKey(e)},add:function(e){var t=this._hashTable.get(e);t||(this._hashTable.add(e,e),this.length++,this.trigger("changed"))},get:function(e){return this.contains(e)?this._hashTable.get(e).value:null},hash:function(e){return this._hashTable._hash(e)},remove:function(e){this.contains(e)&&(this._hashTable.remove(e),this.length--,this.trigger("changed"))},forEach:function(e,t){this._hashTable.forEach(function(t){e(t.value)},t)},toArray:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}}),_=k.Class.extend({init:function(e,t){if(this.links=[],this.outgoing=[],this.incoming=[],this.weight=1,this.id=D.isDefined(e)?e:o(),D.isDefined(t)){this.associatedShape=t;var i=t.bounds();this.width=i.width,this.height=i.height,this.x=i.x,this.y=i.y}else this.associatedShape=null;this.data=null,this.type="Node",this.shortForm="Node '"+this.id+"'",this.isVirtual=!1},isIsolated:function(){return D.isEmpty(this.links)},bounds:function(e){return D.isDefined(e)?(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,t):new x.Rect(this.x,this.y,this.width,this.height)},isLinkedTo:function(e){var t=this;return D.any(t.links,function(i){return i.getComplement(t)===e})},getChildren:function(){var e,t,i,n;if(0===this.outgoing.length)return[];for(e=[],t=0,i=this.outgoing.length;i>t;t++)n=this.outgoing[t],e.push(n.getComplement(this));return e},getParents:function(){var e,t,i,n;if(0===this.incoming.length)return[];for(e=[],t=0,i=this.incoming.length;i>t;t++)n=this.incoming[t],e.push(n.getComplement(this));return e},clone:function(){var e=new _;return D.isDefined(this.weight)&&(e.weight=this.weight),D.isDefined(this.balance)&&(e.balance=this.balance),D.isDefined(this.owner)&&(e.owner=this.owner),e.associatedShape=this.associatedShape,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},adjacentTo:function(e){return null!==this.isLinkedTo(e)},removeLink:function(e){e.source===this&&(D.remove(this.links,e),D.remove(this.outgoing,e),e.source=null),e.target===this&&(D.remove(this.links,e),D.remove(this.incoming,e),e.target=null)},hasLinkTo:function(e){return D.any(this.outgoing,function(t){return t.target===e})},degree:function(){return this.links.length},incidentWith:function(e){return E(this.links,e)},getLinksWith:function(e){return D.all(this.links,function(t){return t.getComplement(this)===e},this)},getNeighbors:function(){var e=[];return D.forEach(this.incoming,function(t){e.push(t.getComplement(this))},this),D.forEach(this.outgoing,function(t){e.push(t.getComplement(this))},this),e}}),b=k.Class.extend({init:function(e,t,i,n){if(D.isUndefined(e))throw"The source of the new link is not set.";if(D.isUndefined(t))throw"The target of the new link is not set.";var r,s;r=D.isString(e)?new _(e):e,s=D.isString(t)?new _(t):t,this.source=r,this.target=s,this.source.links.push(this),this.target.links.push(this),this.source.outgoing.push(this),this.target.incoming.push(this),this.id=D.isDefined(i)?i:o(),this.associatedConnection=D.isDefined(n)?n:null,this.type="Link",this.shortForm="Link '"+this.source.id+"->"+this.target.id+"'"},getComplement:function(e){if(this.source!==e&&this.target!==e)throw"The given node is not incident with this link.";return this.source===e?this.target:this.source},getCommonNode:function(e){return this.source===e.source||this.source===e.target?this.source:this.target===e.source||this.target===e.target?this.target:null},isBridging:function(e,t){return this.source===e&&this.target===t||this.source===t&&this.target===e},getNodes:function(){return[this.source,this.target]},incidentWith:function(e){return this.source===e||this.target===e},adjacentTo:function(e){return E(this.source.links,e)||E(this.target.links,e)},changeSource:function(e){D.remove(this.source.links,this),D.remove(this.source.outgoing,this),e.links.push(this),e.outgoing.push(this),this.source=e},changeTarget:function(e){D.remove(this.target.links,this),D.remove(this.target.incoming,this),e.links.push(this),e.incoming.push(this),this.target=e},changesNodes:function(e,t){this.source===e?this.changeSource(t):this.target===e&&this.changeTarget(t)},reverse:function(){var e=this.source,t=this.target;return this.source=t,D.remove(e.outgoing,this),this.source.outgoing.push(this),this.target=e,D.remove(t.incoming,this),this.target.incoming.push(this),this},directTo:function(e){if(this.source!==e&&this.target!==e)throw"The given node is not incident with this link.";this.target!==e&&this.reverse()},createReverseEdge:function(){var e=this.clone();return e.reverse(),e.reversed=!0,e},clone:function(){var e=new b(this.source,this.target);return e}}),w=k.Class.extend({init:function(e){this.links=[],this.nodes=[],this.diagram=null,this._root=null,D.isDefined(e)?D.isString(e)?this.id=e:(this.diagram=e,this.id=e.id):this.id=o(),this.bounds=new a,this._hasCachedRelationships=!1,this.type="Graph"},cacheRelationships:function(e){var t,i,n;if(D.isUndefined(e)&&(e=!1),!this._hasCachedRelationships||e){for(t=0,i=this.nodes.length;i>t;t++)n=this.nodes[t],n.children=this.getChildren(n),n.parents=this.getParents(n);this._hasCachedRelationships=!0}},assignLevels:function(e,t,i){var n,r,o,s;if(!e)throw"Start node not specified.";for(D.isUndefined(t)&&(t=0),this.cacheRelationships(),D.isUndefined(i)&&(i=new g,D.forEach(this.nodes,function(e){i.add(e,!1)})),i.set(e,!0),e.level=t,n=e.children,r=0,o=n.length;o>r;r++)s=n[r],s&&!i.get(s)&&this.assignLevels(s,t+1,i)},root:function(e){if(D.isUndefined(e)){if(this._root)return this._root;var t=D.first(this.nodes,function(e){return 0===e.incoming.length});return t?t:D.first(this.nodes)}this._root=e},getConnectedComponents:function(){var e,t,i,n,r;for(this.componentIndex=0,this.setItemIndices(),e=D.initArray(this.nodes.length,-1),t=0;this.nodes.length>t;t++)-1===e[t]&&(this._collectConnectedNodes(e,t),this.componentIndex++);for(i=[],n=0;this.componentIndex>n;++n)i[n]=new w;for(n=0;e.length>n;++n)r=i[e[n]],r.addNodeAndOutgoings(this.nodes[n]);return i.sort(function(e,t){return t.nodes.length-e.nodes.length}),i},_collectConnectedNodes:function(e,t){e[t]=this.componentIndex;var i=this.nodes[t];D.forEach(i.links,function(t){var n=t.getComplement(i),r=n.index;-1===e[r]&&this._collectConnectedNodes(e,r)},this)},calcBounds:function(){var e,t,i,n;if(this.isEmpty())return this.bounds=new a;for(e=null,t=0,i=this.nodes.length;i>t;t++)n=this.nodes[t],e=e?e.union(n.bounds()):n.bounds();return this.bounds=e},getSpanningTree:function(e){var t,i,n,r,o,s,a,l,c,d,u,h,p=new w,f=new g;for(p.root=e.clone(),p.root.level=0,p.root.id=e.id,f.add(e,p.root),e.level=0,n=[],r=[],p.nodes.push(p.root),n.push(e),r.push(e),o=1;r.length>0;)for(s=r.pop(),a=0;s.links.length>a;a++)l=s.links[a],c=l.getComplement(s),E(n,c)||(c.level=s.level+1,c.level+1>o&&(o=c.level+1),E(r,c)||r.push(c),E(n,c)||n.push(c),f.containsKey(s)?t=f.get(s):(t=s.clone(),t.level=s.level,t.id=s.id,f.add(s,t)),f.containsKey(c)?i=f.get(c):(i=c.clone(),i.level=c.level,i.id=c.id,f.add(c,i)),d=new b(t,i),p.addLink(d));for(u=[],h=0;o>h;h++)u.push([]);return D.forEach(p.nodes,function(e){u[e.level].push(e)}),p.treeLevels=u,p.cacheRelationships(),p},takeRandomNode:function(t,i){if(D.isUndefined(t)&&(t=[]),D.isUndefined(i)&&(i=4),0===this.nodes.length)return null;if(1===this.nodes.length)return E(t,this.nodes[0])?null:this.nodes[0];var n=e.grep(this.nodes,function(e){return!E(t,e)&&e.degree()<=i});return D.isEmpty(n)?null:n[D.randomInteger(0,n.length)]},isEmpty:function(){return D.isEmpty(this.nodes)},isHealthy:function(){return D.all(this.links,function(e){return E(this.nodes,e.source)&&E(this.nodes,e.target)},this)},getParents:function(e){if(!this.hasNode(e))throw"The given node is not part of this graph.";return e.getParents()},getChildren:function(e){if(!this.hasNode(e))throw"The given node is not part of this graph.";return e.getChildren()},addLink:function(e,i,n){var r,o,s;if(D.isUndefined(e))throw"The source of the link is not defined.";if(D.isUndefined(i)){if(D.isDefined(e.type)&&"Link"===e.type)return this.addExistingLink(e),t;throw"The target of the link is not defined."}return r=this.getNode(e),D.isUndefined(r)&&(r=this.addNode(e)),o=this.getNode(i),D.isUndefined(o)&&(o=this.addNode(i)),s=new b(r,o),D.isDefined(n)&&(s.owner=n),this.links.push(s),s},removeAllLinks:function(){for(;this.links.length>0;){var e=this.links[0];this.removeLink(e)}},addExistingLink:function(e){var t,i;this.hasLink(e)||(this.links.push(e),this.hasNode(e.source.id)?(t=this.getNode(e.source.id),e.changeSource(t)):this.addNode(e.source),this.hasNode(e.target.id)?(i=this.getNode(e.target.id),e.changeTarget(i)):this.addNode(e.target))},hasLink:function(e){if(D.isString(e))return D.any(this.links,function(t){return t.id===e});if("Link"===e.type)return E(this.links,e);throw"The given object is neither an identifier nor a Link."},getNode:function(e){if(D.isUndefined(e))throw"No identifier or Node specified.";return D.isString(e)?D.find(this.nodes,function(t){return t.id==e}):this.hasNode(e)?e:null},hasNode:function(e){if(D.isString(e))return D.any(this.nodes,function(t){return t.id===e});if(D.isObject(e))return D.any(this.nodes,function(t){return t===e});throw"The identifier should be a Node or the Id (string) of a node."},removeNode:function(e){var t,i,n,r,o=e;if(D.isString(e)&&(o=this.getNode(e)),!D.isDefined(o))throw"The identifier should be a Node or the Id (string) of a node.";for(t=o.links,o.links=[],i=0,n=t.length;n>i;i++)r=t[i],this.removeLink(r);D.remove(this.nodes,o)},areConnected:function(e,t){return D.any(this.links,function(i){return i.source==e&&i.target==t||i.source==t&&i.target==e})},removeLink:function(e){D.remove(this.links,e),D.remove(e.source.outgoing,e),D.remove(e.source.links,e),D.remove(e.target.incoming,e),D.remove(e.target.links,e)},addNode:function(e,t,i){var n=null;if(!D.isDefined(e))throw"No Node or identifier for a new Node is given.";if(D.isString(e)){if(this.hasNode(e))return this.getNode(e);n=new _(e)}else{if(this.hasNode(e))return this.getNode(e);n=e}return D.isDefined(t)&&n.bounds(t),D.isDefined(i)&&(n.owner=i),this.nodes.push(n),n},addNodeAndOutgoings:function(e){E(this.nodes,e)||this.nodes.push(e);var t=e.outgoing;e.outgoing=[],D.forEach(t,function(e){this.addExistingLink(e)},this)},setItemIndices:function(){var e;for(e=0;this.nodes.length>e;++e)this.nodes[e].index=e;for(e=0;this.links.length>e;++e)this.links[e].index=e},clone:function(e){var t,i=new w,n=D.isDefined(e)&&e===!0;return n&&(i.nodeMap=new g,i.linkMap=new g),t=new g,D.forEach(this.nodes,function(e){var r=e.clone();t.set(e,r),i.nodes.push(r),n&&i.nodeMap.set(r,e)}),D.forEach(this.links,function(e){if(t.containsKey(e.source)&&t.containsKey(e.target)){var r=i.addLink(t.get(e.source),t.get(e.target));n&&i.linkMap.set(r,e)}}),i},linearize:function(e){return w.Utils.linearize(this,e)},depthFirstTraversal:function(e,t){var i,n;if(D.isUndefined(e))throw"You need to supply a starting node.";if(D.isUndefined(t))throw"You need to supply an action.";if(!this.hasNode(e))throw"The given start-node is not part of this graph";i=this.getNode(e),n=[],this._dftIterator(i,t,n)},_dftIterator:function(e,t,i){var n,r,o,s;for(t(e),i.push(e),n=e.getChildren(),r=0,o=n.length;o>r;r++)s=n[r],E(i,s)||this._dftIterator(s,t,i)},breadthFirstTraversal:function(e,t){var i,n,r,o,s,a,l,c;if(D.isUndefined(e))throw"You need to supply a starting node.";if(D.isUndefined(t))throw"You need to supply an action.";if(!this.hasNode(e))throw"The given start-node is not part of this graph";for(i=this.getNode(e),n=new v,r=[],n.enqueue(i);n.length>0;)for(o=n.dequeue(),t(o),r.push(o),s=o.getChildren(),a=0,l=s.length;l>a;a++)c=s[a],E(r,c)||E(n,c)||n.enqueue(c)},_stronglyConnectedComponents:function(e,t,i,n,r,o,s){var a,l,c,d,u;for(i.add(t,s),n.add(t,s),s++,o.push(t),a=t.getChildren(),c=0,d=a.length;d>c;c++)l=a[c],i.containsKey(l)?E(o,l)&&n.add(t,Math.min(n.get(t),i.get(l))):(this._stronglyConnectedComponents(e,l,i,n,r,o,s),n.add(t,Math.min(n.get(t),n.get(l))));if(n.get(t)===i.get(t)){u=[];do l=o.pop(),u.push(l);while(l!==t);(!e||u.length>1)&&r.push(u)}},findCycles:function(e){var t,i,n,r,o,s,a;for(D.isUndefined(e)&&(e=!0),t=new g,i=new g,n=[],r=[],o=0,s=this.nodes.length;s>o;o++)a=this.nodes[o],t.containsKey(a)||this._stronglyConnectedComponents(e,a,t,i,n,r,0);return n},isAcyclic:function(){return D.isEmpty(this.findCycles())},isSubGraph:function(e){var t=e.linearize(),i=this.linearize();return D.all(t,function(e){return E(i,e)})},makeAcyclic:function(){var e,t,i,n,r,o,s,a,l,c,d,u,h,p,f,m,v,y,_,b,w,k,x,C,S,T,M,A,E,I,P,F;if(this.isEmpty()||1>=this.nodes.length||1>=this.links.length)return[];if(2==this.nodes.length){if(e=[],this.links.length>1)for(t=this.links[0],i=t.source,n=0,r=this.links.length;r>n;n++)o=this.links[n],o.source!=i&&(s=o.reverse(),e.push(s));return e}for(a=this.clone(!0),l=this.nodes.length,c=new g,d=function(e){return 0===e.outgoing.length?2-l:0===e.incoming.length?l-2:e.outgoing.length-e.incoming.length},u=function(e,t){var i=d(e,l);t.containsKey(i)||t.set(i,[]),t.get(i).push(e)},D.forEach(a.nodes,function(e){u(e,c)}),h=[],p=[];a.nodes.length>0;){if(c.containsKey(2-l))for(y=c.get(2-l);y.length>0;){for(m=y.pop(),_=0;m.links.length>_;_++)b=m.links[_],f=b.getComplement(m),v=d(f,l),D.remove(c.get(v),f),f.removeLink(b),u(f,c);D.remove(a.nodes,m),p.unshift(m)}if(c.containsKey(l-2))for(w=c.get(l-2);w.length>0;){for(f=w.pop(),k=0;f.links.length>k;k++)x=f.links[k],m=x.getComplement(f),v=d(m,l),D.remove(c.get(v),m),m.removeLink(x),u(m,c);h.push(f),D.remove(a.nodes,f)}if(a.nodes.length>0)for(C=l-3;C>2-l;C--)if(c.containsKey(C)&&c.get(C).length>0){for(S=c.get(C),T=S.pop(),M=0;T.links.length>M;M++)A=T.links[M],E=A.getComplement(T),v=d(E,l),D.remove(c.get(v),E),E.removeLink(A),u(E,c);h.push(T),D.remove(a.nodes,T);break}}for(h=h.concat(p),I=new g,P=0;this.nodes.length>P;P++)I.set(a.nodeMap.get(h[P]),P);return F=[],D.forEach(this.links,function(e){I.get(e.source)>I.get(e.target)&&(e.reverse(),F.push(e))}),F}}),w.Predefined={EightGraph:function(){return w.Utils.parse(["1->2","2->3","3->4","4->1","3->5","5->6","6->7","7->3"])},Mindmap:function(){return w.Utils.parse(["0->1","0->2","0->3","0->4","0->5","1->6","1->7","7->8","2->9","9->10","9->11","3->12","12->13","13->14","4->15","4->16","15->17","15->18","18->19","18->20","14->21","14->22","5->23","23->24","23->25","6->26"])},ThreeGraph:function(){return w.Utils.parse(["1->2","2->3","3->1"])},BinaryTree:function(e){return D.isUndefined(e)&&(e=5),w.Utils.createBalancedTree(e,2)},Linear:function(e){return D.isUndefined(e)&&(e=10),w.Utils.createBalancedTree(e,1)},Tree:function(e,t){return w.Utils.createBalancedTree(e,t)},Forest:function(e,t,i){return w.Utils.createBalancedForest(e,t,i)},Workflow:function(){return w.Utils.parse(["0->1","1->2","2->3","1->4","4->3","3->5","5->6","6->3","6->7","5->4"])},Grid:function(e,t){var i,n,r,o,s,a=new x.Graph;if(0>=e&&0>=t)return a;for(i=0;e+1>i;i++)for(n=null,r=0;t+1>r;r++)o=new _(""+i+"."+r),a.addNode(o),n&&a.addLink(n,o),i>0&&(s=a.getNode(""+(i-1)+"."+r),a.addLink(s,o)),n=o;return a}},w.Utils={parse:function(e){var t,i,n,r,o,s=new x.Graph,a=e.slice();for(i=0,n=a.length;n>i;i++){if(r=a[i],D.isString(r)){if(r.indexOf("->")<0)throw"The link should be specified as 'a->b'.";if(o=r.split("->"),2!=o.length)throw"The link should be specified as 'a->b'.";t=new b(o[0],o[1]),s.addLink(t)}if(D.isObject(r)){if(!t)throw"Specification found before Link definition.";k.deepExtend(t,r)}}return s},linearize:function(e,t){var i,n,r,o;if(D.isUndefined(e))throw"Expected an instance of a Graph object in slot one.";for(D.isUndefined(t)&&(t=!1),i=[],n=0,r=e.links.length;r>n;n++)o=e.links[n],i.push(o.source.id+"->"+o.target.id),t&&i.push({id:o.id});return i},_addShape:function(e,t,i,n){return D.isUndefined(t)&&(t=new x.Point(0,0)),D.isUndefined(i)&&(i=o()),n=k.deepExtend({width:20,height:20,id:i,radius:10,fill:"#778899",data:"circle",undoable:!1,x:t.x,y:t.y},n),e.addShape(n)},_addConnection:function(e,t,i,n){
return e.connect(t,i,n)},createDiagramFromGraph:function(e,t,i,n){var r,o,s,l,c,d,u,h,p,f,m,g,v,y,_,b;if(D.isUndefined(e))throw"The diagram surface is undefined.";if(D.isUndefined(t))throw"No graph specification defined.";for(D.isUndefined(i)&&(i=!0),D.isUndefined(n)&&(n=!1),r=e.element.clientWidth||200,o=e.element.clientHeight||200,s=[],d=0,u=t.nodes.length;u>d;d++)l=t.nodes[d],h=l.position,D.isUndefined(h)&&(h=D.isDefined(l.x)&&D.isDefined(l.y)?new M(l.x,l.y):new M(D.randomInteger(10,r-20),D.randomInteger(10,o-20))),p={},"0"===l.id||n&&k.deepExtend(p,{width:150*Math.random()+20,height:80*Math.random()+50,data:"rectangle",fill:{color:"#778899"}}),c=this._addShape(e,h,l.id,p),f=c.bounds(),D.isDefined(f)&&(l.x=f.x,l.y=f.y,l.width=f.width,l.height=f.height),s[l.id]=c;for(m=0;t.links.length>m;m++)g=t.links[m],v=s[g.source.id],D.isUndefined(v)||(y=s[g.target.id],D.isUndefined(y)||this._addConnection(e,v,y,{id:g.id}));if(i)for(_=new e.SpringLayout(e),_.layoutGraph(t,{limitToView:!1}),b=0;t.nodes.length>b;b++)l=t.nodes[b],c=s[l.id],c.bounds(new a(l.x,l.y,l.width,l.height))},createBalancedTree:function(e,t){var i,n,r,o,s,a,l,c,d,u;if(D.isUndefined(e)&&(e=3),D.isUndefined(t)&&(t=3),i=new x.Graph,n=-1,r=[],0>=e||0>=t)return i;for(s=new _(""+ ++n),i.addNode(s),i.root=s,r.push(s),a=0;e>a;a++){for(o=[],l=0;r.length>l;l++)for(c=r[l],d=0;t>d;d++)u=new _(""+ ++n),i.addLink(c,u),o.push(u);r=o}return i},createBalancedForest:function(e,t,i){var n,r,o,s,a,l,c,d,u,h,p;if(D.isUndefined(e)&&(e=3),D.isUndefined(t)&&(t=3),D.isUndefined(i)&&(i=5),n=new x.Graph,r=-1,o=[],0>=e||0>=t||0>=i)return n;for(a=0;i>a;a++)for(l=new _(""+ ++r),n.addNode(l),o=[l],c=0;e>c;c++){for(s=[],d=0;o.length>d;d++)for(u=o[d],h=0;t>h;h++)p=new _(""+ ++r),n.addLink(u,p),s.push(p);o=s}return n},createRandomConnectedGraph:function(e,t,i){var n,r,o,s,a,l,c,d,u,h;if(D.isUndefined(e)&&(e=40),D.isUndefined(t)&&(t=4),D.isUndefined(i)&&(i=!1),n=new x.Graph,r=-1,0>=e)return n;if(o=new _(""+ ++r),n.addNode(o),1===e)return n;if(e>1){for(s=1;e>s&&(a=n.takeRandomNode([],t));s++)l=n.addNode(""+s),n.addLink(a,l);if(!i&&e>1)for(c=D.randomInteger(1,e),d=0;c>d;d++)u=n.takeRandomNode([],t),h=n.takeRandomNode([],t),u&&h&&!n.areConnected(u,h)&&n.addLink(u,h);return n}},randomDiagram:function(e,t,i,n,r){var o=k.dataviz.diagram.Graph.Utils.createRandomConnectedGraph(t,i,n);w.Utils.createDiagramFromGraph(e,o,!1,r)}},k.deepExtend(x,{init:function(e){k.init(e,x.ui)},Point:M,Intersect:c,Geometry:f,Rect:a,Size:l,RectAlign:d,Matrix:h,MatrixVector:p,normalVariable:r,randomId:o,Dictionary:g,HashTable:m,Queue:v,Set:y,Node:_,Link:b,Graph:w,PathDefiner:s})}(window.kendo.jQuery),function(e,t){function i(e){return{x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}function n(e){if(e){var t=e;return N(t)&&(t={color:t}),t.color&&(t.color=r(t.color)),t}}function r(e){var t;return t=e!=V?new L.Color(e).toHex():e}function o(e,t){var i=t.x-e.x,n=t.y-e.y,r=M.util.deg(Math.atan2(n,i));return r}function s(e,t){var i,n,r,o=this.options,s=!1;for(r=0;t.length>r;r++)n=t[r],i=e[n],R(i)&&o[n]!==i&&(o[n]=i,s=!0);return s}function a(e,t){return new L.Segment(new O.Point(e,t))}var l,c,d,u,h,p,f,m,g,v,y,_,b,w,k,x,C,S,T,D,M=window.kendo,A=M.dataviz.diagram,E=M.Class,I=M.deepExtend,P=A.Point,F=A.Rect,z=A.Matrix,H=A.Utils,R=H.isNumber,N=H.isString,$=A.MatrixVector,O=M.geometry,L=M.drawing,B=M.util.defined,U=e.inArray,V="transparent",W={none:"none",arrowStart:"ArrowStart",filledCircle:"FilledCircle",arrowEnd:"ArrowEnd"},j=360,q="start",G="end",Y="width",Q="height",K="x",X="y";A.Markers=W,l=E.extend({init:function(e,t){this.x=e,this.y=t},toMatrix:function(){return z.scaling(this.x,this.y)},toString:function(){return M.format("scale({0},{1})",this.x,this.y)},invert:function(){return new l(1/this.x,1/this.y)}}),c=E.extend({init:function(e,t){this.x=e,this.y=t},toMatrixVector:function(){return new $(0,0,0,0,this.x,this.y)},toMatrix:function(){return z.translation(this.x,this.y)},toString:function(){return M.format("translate({0},{1})",this.x,this.y)},plus:function(e){this.x+=e.x,this.y+=e.y},times:function(e){this.x*=e,this.y*=e},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){0!==this.Length&&this.times(1/this.length())},invert:function(){return new c((-this.x),(-this.y))}}),d=E.extend({init:function(e,t,i){this.x=t||0,this.y=i||0,this.angle=e},toString:function(){return this.x&&this.y?M.format("rotate({0},{1},{2})",this.angle,this.x,this.y):M.format("rotate({0})",this.angle)},toMatrix:function(){return z.rotation(this.angle,this.x,this.y)},center:function(){return new P(this.x,this.y)},invert:function(){return new d(j-this.angle,this.x,this.y)}}),d.create=function(e){return new d(e.angle,e.x,e.y)},d.parse=function(e){var t=e.slice(1,e.length-1).split(","),i=t[0],n=t[1],r=t[2],o=new d(i,n,r);return o},u=E.extend({init:function(e,i,n,r,o,s){this.translate=new c(e,i),n!==t&&r!==t&&(this.scale=new l(n,r)),o!==t&&(this.rotate=s?new d(o,s.x,s.y):new d(o))},toString:function(){var e=function(e){return e?""+e:""};return e(this.translate)+e(this.rotate)+e(this.scale)},render:function(e){e._transform=this,e._renderTransform()},toMatrix:function(){var e=z.unit();return this.translate&&(e=e.times(this.translate.toMatrix())),this.rotate&&(e=e.times(this.rotate.toMatrix())),this.scale&&(e=e.times(this.scale.toMatrix())),e},invert:function(){var e,i,n=this.rotate?this.rotate.invert():t,r=n?n.toMatrix():z.unit(),o=this.scale?this.scale.invert():t,s=o?o.toMatrix():z.unit(),a=new P((-this.translate.x),(-this.translate.y));return a=r.times(s).apply(a),e=new c(a.x,a.y),i=new u,i.translate=e,i.rotate=n,i.scale=o,i}}),h={_setScale:function(){var e=this.options,t=this._originWidth,i=this._originHeight,n=e.width/t,r=e.height/i;R(n)||(n=1),R(r)||(r=1),this._transform.scale=new l(n,r)},_setTranslate:function(){var e=this.options,t=e.x||0,i=e.y||0;this._transform.translate=new c(t,i)},_initSize:function(){var e=this.options,t=!1;e.autoSize!==!1&&(B(e.width)||B(e.height))&&(this._measure(!0),this._setScale(),t=!0),(B(e.x)||B(e.y))&&(this._setTranslate(),t=!0),t&&this._renderTransform()},_updateSize:function(e){var t=!1;return this.options.autoSize!==!1&&this._diffNumericOptions(e,[Y,Q])&&(t=!0,this._measure(!0),this._setScale()),this._diffNumericOptions(e,[K,X])&&(t=!0,this._setTranslate()),t&&this._renderTransform(),t}},p=E.extend({init:function(e){var t=this;t.options=I({},t.options,e),t.id=t.options.id,t._originSize=F.empty(),t._transform=new u},visible:function(e){return this.drawingContainer().visible(e)},redraw:function(e){e&&e.id&&(this.id=e.id)},position:function(e,i){var n=this.options;return B(e)?(B(i)?(n.x=e,n.y=i):e instanceof P&&(n.x=e.x,n.y=e.y),this._transform.translate=new c(n.x,n.y),this._renderTransform(),t):new P(n.x,n.y)},rotate:function(e,t){return B(e)&&(this._transform.rotate=new d(e,t.x,t.y),this._renderTransform()),this._transform.rotate||new d(0)},drawingContainer:function(){return this.drawingElement},_renderTransform:function(){var e=this._transform.toMatrix();this.drawingContainer().transform(new O.Matrix(e.a,e.b,e.c,e.d,e.e,e.f))},_hover:function(){},_diffNumericOptions:s,_measure:function(e){var t,i,n;return!this._measured||e?(i=this._boundingBox()||new O.Rect,n=i.topLeft(),t=new F(n.x,n.y,i.width(),i.height()),this._originSize=t,this._originWidth=t.width,this._originHeight=t.height,this._measured=!0):t=this._originSize,t},_boundingBox:function(){return this.drawingElement.rawBBox()}}),f=p.extend({init:function(e){p.fn.init.call(this,e),e=this.options,e.fill=n(e.fill),e.stroke=n(e.stroke)},options:{stroke:{color:"gray",width:1},fill:{color:V}},fill:function(e,t){this._fill({color:r(e),opacity:t})},stroke:function(e,t,i){this._stroke({color:r(e),width:t,opacity:i})},redraw:function(e){var t,i;e&&(t=e.stroke,i=e.fill,t&&this._stroke(n(t)),i&&this._fill(n(i)),p.fn.redraw.call(this,e))},_hover:function(e){var t,i=this.drawingElement,r=this.options,o=r.hover;o&&o.fill&&(t=e?n(o.fill):r.fill,i.fill(t.color,t.opacity))},_stroke:function(e){var t,i=this.options;I(i,{stroke:e}),e=i.stroke,t=null,e.width>0&&(t={color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}),this.drawingElement.options.set("stroke",t)},_fill:function(e){var t,i=this.options;I(i,{fill:e}),t=i.fill,this.drawingElement.fill(t.color,t.opacity)}}),m=f.extend({init:function(e){this._textColor(e),f.fn.init.call(this,e),this._font(),this._initText(),this._initSize()},options:{fontSize:15,fontFamily:"sans-serif",stroke:{width:0},fill:{color:"black"},autoSize:!0},_initText:function(){var e=this.options;this.drawingElement=new L.Text(B(e.text)?e.text:"",new O.Point,{fill:e.fill,font:e.font}),this._stroke()},_textColor:function(e){e&&e.color&&I(e,{fill:{color:e.color}})},_font:function(){var e=this.options;e.fontFamily&&B(e.fontSize)?e.font=e.fontSize+"px "+e.fontFamily:delete e.font},content:function(e){return this.drawingElement.content(e)},redraw:function(e){var t,i;e&&(t=!1,i=this.options,this._textColor(e),f.fn.redraw.call(this,e),(e.fontFamily||B(e.fontSize))&&(I(i,{fontFamily:e.fontFamily,fontSize:e.fontSize}),this._font(),this.drawingElement.options.set("font",i.font),t=!0),e.text&&(this.content(e.text),t=!0),!this._updateSize(e)&&t&&this._initSize())}}),I(m.fn,h),g=f.extend({init:function(e){f.fn.init.call(this,e),this._initPath(),this._setPosition()},_setPosition:function(){var e=this.options,t=e.x,i=e.y;(B(t)||B(i))&&this.position(t||0,i||0)},redraw:function(e){e&&(f.fn.redraw.call(this,e),this._diffNumericOptions(e,[Y,Q])&&this._drawPath(),this._diffNumericOptions(e,[K,X])&&this._setPosition())},_initPath:function(){var e=this.options;this.drawingElement=new L.Path({fill:e.fill,stroke:e.stroke,closed:!0}),this._drawPath()},_drawPath:function(){var e=this.drawingElement,t=i(this.options),n=t.width,r=t.height;e.segments.elements([a(0,0),a(n,0),a(n,r),a(0,r)])}}),v=f.extend({init:function(e){f.fn.init.call(this,e);var t=this.options.anchor;this.anchor=new O.Point(t.x,t.y),this.createElement()},options:{stroke:{color:V,width:0},fill:{color:"black"}},_transformToPath:function(e,t){var i=t.transform();return e&&i&&(e=e.transformCopy(i)),e},redraw:function(e){e&&(e.position&&(this.options.position=e.position),f.fn.redraw.call(this,e))}}),y=v.extend({options:{radius:4,anchor:{x:0,y:0}},createElement:function(){var e=this.options;this.drawingElement=new L.Circle(new O.Circle(this.anchor,e.radius),{fill:e.fill,stroke:e.stroke})},positionMarker:function(e){var t,i,n=this.options,r=n.position,o=e.segments;t=r==q?o[0]:o[o.length-1],t&&(i=this._transformToPath(t.anchor(),e),this.drawingElement.transform(O.transform().translate(i.x,i.y)))}}),_=v.extend({options:{path:"M 0 0 L 10 5 L 0 10 L 3 5 z",anchor:{x:10,y:5}},createElement:function(){var e=this.options;this.drawingElement=L.Path.parse(e.path,{fill:e.fill,stroke:e.stroke})},positionMarker:function(e){var t,i,n=this._linePoints(e),r=n.start,s=n.end,a=O.transform();r&&a.rotate(o(r,s),s),s&&(t=this.anchor,i=s.clone().translate(-t.x,-t.y),a.translate(i.x,i.y)),this.drawingElement.transform(a)},_linePoints:function(e){var i,n,r,o,s,a=this.options,l=e.segments;return a.position==q?(r=l[0],r&&(n=r.anchor(),i=r.controlOut(),o=l[1],!i&&o&&(i=o.anchor()))):(r=l[l.length-1],r&&(n=r.anchor(),i=r.controlIn(),s=l[l.length-2],!i&&s&&(i=s.anchor()))),n?{start:this._transformToPath(i,e),end:this._transformToPath(n,e)}:t}}),b={_getPath:function(e){var i=this.drawingElement;return i instanceof L.MultiPath&&(i=e==q?i.paths[0]:i.paths[i.paths.length-1]),i&&i.segments.length?i:t},_removeMarker:function(e){var t=this._markers[e];t&&(this.drawingContainer().remove(t.drawingElement),delete this._markers[e])},_createMarkers:function(){var e=this.options,t=e.startCap,i=e.endCap;this._markers={},this._markers[q]=this._createMarker(t,q),this._markers[G]=this._createMarker(i,G)},_createMarker:function(e,i){var n,r,o=this._getPath(i);return o?(e==W.filledCircle?n=y:e==W.arrowStart||e==W.arrowEnd?n=_:this._removeMarker(i),n?(r=new n({position:i}),r.positionMarker(o),this.drawingContainer().append(r.drawingElement),r):t):(this._removeMarker(i),t)},_positionMarker:function(e){var t,i=this._markers[e];i&&(t=this._getPath(e),t?i.positionMarker(t):this._removeMarker(e))},_capMap:{start:"startCap",end:"endCap"},_redrawMarker:function(e,t,i){var n=this.options,r=this._capMap[t],o=i[r],s=!1;return o&&n[r]!=o?(n[r]=o,this._removeMarker(t),this._markers[t]=this._createMarker(o,t),s=!0):e&&!this._markers[t]&&n[r]&&(this._markers[t]=this._createMarker(n[r],t),s=!0),s},_redrawMarkers:function(e,t){!this._redrawMarker(e,q,t)&&e&&this._positionMarker(q),!this._redrawMarker(e,G,t)&&e&&this._positionMarker(G)}},w=f.extend({init:function(e){f.fn.init.call(this,e),this.container=new L.Group,this._createElements(),this._initSize()},options:{autoSize:!0},drawingContainer:function(){return this.container},data:function(e){var i=this.options;return e?(i.data!=e&&(i.data=e,this._setData(e),this._initSize(),this._redrawMarkers(!0,{})),t):i.data},redraw:function(e){var t,i;e&&(f.fn.redraw.call(this,e),t=this.options,i=e.data,B(i)&&t.data!=i?(t.data=i,this._setData(i),this._updateSize(e)||this._initSize(),this._redrawMarkers(!0,e)):(this._updateSize(e),this._redrawMarkers(!1,e)))},_createElements:function(){var e=this.options;this.drawingElement=L.Path.parse(e.data||"",{fill:e.fill,stroke:e.stroke}),this.container.append(this.drawingElement),this._createMarkers()},_setData:function(e){var t=this.drawingElement,i=L.Path.parse(e||""),n=i.paths.slice(0);i.paths.elements([]),t.paths.elements(n)}}),I(w.fn,h),I(w.fn,b),k=f.extend({init:function(e){f.fn.init.call(this,e),this.container=new L.Group,this._initPath(),this._createMarkers()},drawingContainer:function(){return this.container},redraw:function(e){var t,i;e&&(e=e||{},t=e.from,i=e.to,t&&(this.options.from=t),i&&(this.options.to=i),t||i?(this._drawPath(),this._redrawMarkers(!0,e)):this._redrawMarkers(!1,e),f.fn.redraw.call(this,e))},_initPath:function(){var e=this.options,t=this.drawingElement=new L.Path({fill:e.fill,stroke:e.stroke});this._drawPath(),this.container.append(t)},_drawPath:function(){var e=this.options,t=this.drawingElement,i=e.from||new P,n=e.to||new P;t.segments.elements([a(i.x,i.y),a(n.x,n.y)])}}),I(k.fn,b),x=f.extend({init:function(e){f.fn.init.call(this,e),this.container=new L.Group,this._initPath(),this._createMarkers()},drawingContainer:function(){return this.container},points:function(e){var i=this.options;return e?(i.points=e,this._updatePath(),t):i.points},redraw:function(e){if(e){var t=e.points;f.fn.redraw.call(this,e),t&&this._pointsDiffer(t)?(this.points(t),this._redrawMarkers(!0,e)):this._redrawMarkers(!1,e)}},_initPath:function(){var e=this.options;this.drawingElement=new L.Path({fill:e.fill,stroke:e.stroke}),this.container.append(this.drawingElement),e.points&&this._updatePath()},_pointsDiffer:function(e){var t,i=this.options.points,n=i.length!==e.length;if(!n)for(t=0;e.length>t;t++)if(i[t].x!==e[t].x||i[t].y!==e[t].y){n=!0;break}return n},_updatePath:function(){var e,t,i=this.drawingElement,n=this.options,r=n.points,o=[];for(t=0;r.length>t;t++)e=r[t],o.push(a(e.x,e.y));i.segments.elements(o)},options:{points:[]}}),I(x.fn,b),C=p.extend({init:function(e){p.fn.init.call(this,e),this._initImage()},redraw:function(e){e&&(e.source&&this.drawingElement.src(e.source),this._diffNumericOptions(e,[Y,Q,K,X])&&this.drawingElement.rect(this._rect()),p.fn.redraw.call(this,e))},_initImage:function(){var e=this.options,t=this._rect();this.drawingElement=new L.Image(e.source,t,{})},_rect:function(){var e=i(this.options),t=new O.Point(e.x,e.y),n=new O.Size(e.width,e.height);return new O.Rect(t,n)}}),S=p.extend({init:function(e){this.children=[],p.fn.init.call(this,e),this.drawingElement=new L.Group,this._initSize()},options:{autoSize:!1},append:function(e){this.drawingElement.append(e.drawingContainer()),this.children.push(e),this._childrenChange=!0},remove:function(e){this._remove(e)&&(this._childrenChange=!0)},_remove:function(e){var i=U(e,this.children);return i>=0?(this.drawingElement.removeAt(i),this.children.splice(i,1),!0):t},clear:function(){this.drawingElement.clear(),this.children=[],this._childrenChange=!0},toFront:function(e){var t,i;for(i=0;e.length>i;i++)t=e[i],this._remove(t)&&this.append(t)},toBack:function(e){this._reorderChildren(e,0)},toIndex:function(e,t){this._reorderChildren(e,t)},_reorderChildren:function(e,t){var i,n,r,o,s,a=this.drawingElement,l=a.children.slice(0),c=this.children,d=R(t);for(i=0;e.length>i;i++)s=e[i],o=s.drawingContainer(),n=U(s,c),n>=0&&(l.splice(n,1),c.splice(n,1),r=d?t:t[i],l.splice(r,0,o),c.splice(r,0,s));a.clear(),a.append.apply(a,l)},redraw:function(e){e&&(this._childrenChange?(this._childrenChange=!1,this._updateSize(e)||this._initSize()):this._updateSize(e),p.fn.redraw.call(this,e))},_boundingBox:function(){var e,t,i,n,r=this.children;for(n=0;r.length>n;n++)t=r[n],t.visible()&&t._includeInBBox!==!1&&(i=t.drawingContainer().bbox(null),i&&(e=e?F.union(e,i):i));return e}}),I(S.fn,h),T=f.extend({init:function(e){f.fn.init.call(this,e),this._initCircle(),this._initSize()},redraw:function(e){if(e){var t=this.options;e.center&&(I(t,{center:e.center}),this._center.move(t.center.x,t.center.y)),this._diffNumericOptions(e,["radius"])&&this._circle.setRadius(t.radius),this._updateSize(e),f.fn.redraw.call(this,e)}},_initCircle:function(){var e,t=this.options,i=t.width,n=t.height,r=t.radius;B(r)||(B(i)||(i=n),B(n)||(n=i),t.radius=r=Math.min(i,n)/2),e=t.center||{x:r,y:r},this._center=new O.Point(e.x,e.y),this._circle=new O.Circle(this._center,r),this.drawingElement=new L.Circle(this._circle,{fill:t.fill,stroke:t.stroke})}}),I(T.fn,h),D=E.extend({init:function(e,t){t=t||{},this.element=e,this.surface=L.Surface.create(e,t),M.isFunction(this.surface.translate)&&(this.translate=this._translate),this.drawingElement=new L.Group,this._viewBox=new F(0,0,t.width,t.height),this.size(this._viewBox)},bounds:function(){var e=this.drawingElement.bbox();return new F(0,0,e.width(),e.height())},size:function(e){var t=this._viewBox;return B(e)&&(t.width=e.width,t.height=e.height,this.surface.setSize(e)),{width:t.width,height:t.height}},_translate:function(e,t){var i=this._viewBox;return B(e)&&B(t)&&(i.x=e,i.y=t,this.surface.translate({x:e,y:t})),{x:i.x,y:i.y}},draw:function(){this.surface.draw(this.drawingElement)},append:function(e){return this.drawingElement.append(e.drawingContainer()),this},remove:function(e){this.drawingElement.remove(e.drawingContainer())},insertBefore:function(){},clear:function(){this.drawingElement.clear()},destroy:function(t){this.surface.destroy(),t&&e(this.element).remove()}}),M.deepExtend(A,{init:function(e){M.init(e,A.ui)},diffNumericOptions:s,Element:p,Scale:l,Translation:c,Rotation:d,Circle:T,Group:S,Rectangle:g,Canvas:D,Path:w,Line:k,MarkerBase:v,ArrowMarker:_,CircleMarker:y,Polyline:x,CompositeTransform:u,TextBlock:m,Image:C,VisualBase:f})}(window.kendo.jQuery),function(e,t){function i(e,t){e.isSelected?t.ctrlKey&&e.select(!1):e.diagram.select(e,{addToSelection:t.ctrlKey})}function n(e){return e.ctrlKey===!1&&e.altKey===!1&&e.shiftKey===!1}function r(e,t){var i=e!==!1;return e.key&&"none"!=e.key&&(i=t[e.key+"Key"]),i}function o(e,t){return t.charCodeAt(0)==e||t.toUpperCase().charCodeAt(0)==e}function s(e,t){var i;return-1==e.x&&-1==e.y?i=t.bottomRight():1==e.x&&1==e.y?i=t.topLeft():-1==e.x&&1==e.y?i=t.topRight():1==e.x&&-1==e.y?i=t.bottomLeft():0===e.x&&-1==e.y?i=t.bottom():0===e.x&&1==e.y?i=t.top():1==e.x&&0===e.y?i=t.left():-1==e.x&&0===e.y&&(i=t.right()),i}var a,l,c,d,u,h,p,f,m,g,v,y,_,b,w,k,x,C,S,T,D,M,A,E,I,P,F,z,H,R,N,$,O=window.kendo,L=O.dataviz,B=L.diagram,U=O.Class,V=B.Group,W=B.Rect,j=B.Rectangle,q=B.Utils,G=q.isUndefined,Y=B.Point,Q=B.Circle,K=B.Ticker,X=O.deepExtend,Z=O.ui.Movable,J=O.support.browser,ee=O.util.defined,te=e.proxy,ie={arrow:"default",grip:"pointer",cross:"pointer",add:"pointer",move:"move",select:"pointer",south:"s-resize",east:"e-resize",west:"w-resize",north:"n-resize",rowresize:"row-resize",colresize:"col-resize"},ne=10,re="Auto",oe="Top",se="Right",ae="Left",le="Bottom",ce=[oe,se,le,ae,re],de="itemRotate",ue="itemBoundsChange",he="zoomStart",pe="zoomEnd",fe=-2e4,me=2e4,ge=.9,ve=.93,ye=5,_e="transparent",be="pan";B.Cursors=ie,a=O.Class.extend({init:function(e){this.layoutState=e,this.diagram=e.diagram},initState:function(){function e(e,t){var i=this.diagram.getShapeById(e);i&&(this.subjects.push(i),this.froms.push(i.bounds().topLeft()),this.tos.push(t.topLeft()))}this.froms=[],this.tos=[],this.subjects=[],this.layoutState.nodeMap.forEach(e,this)},update:function(e){if(!(0>=this.subjects.length))for(var t=0;this.subjects.length>t;t++)this.subjects[t].position(new Y(this.froms[t].x+(this.tos[t].x-this.froms[t].x)*e,this.froms[t].y+(this.tos[t].y-this.froms[t].y)*e))}}),l=U.extend({init:function(e,t,i){this.animate=!G(i)&&i,this._initialState=e,this._finalState=t,this.title="Diagram layout"},undo:function(){this.setState(this._initialState)},redo:function(){this.setState(this._finalState)},setState:function(e){var t,i=e.diagram;this.animate?(e.linkMap.forEach(function(e,t){var n=i.getShapeById(e);n.visible(!1),n&&n.points(t)}),t=new K,t.addAdapter(new a(e)),t.onComplete(function(){e.linkMap.forEach(function(e){var t=i.getShapeById(e);t.visible(!0)})}),t.play()):(e.nodeMap.forEach(function(e,t){var n=i.getShapeById(e);n&&n.position(t.topLeft())}),e.linkMap.forEach(function(e,t){var n=i.getShapeById(e);n&&n.points(t)}))}}),c=U.extend({init:function(e){this.units=[],this.title="Composite unit",e!==t&&this.units.push(e)},add:function(e){this.units.push(e)},undo:function(){for(var e=0;this.units.length>e;e++)this.units[e].undo()},redo:function(){for(var e=0;this.units.length>e;e++)this.units[e].redo()}}),d=U.extend({init:function(e,t,i){this.item=e,this._redoSource=t,this._redoTarget=i,this._undoSource=e.source(),this._undoTarget=e.target(),this.title="Connection Editing"},undo:function(){this._undoSource!==t&&this.item.source(this._undoSource,!1),this._undoTarget!==t&&this.item.target(this._undoTarget,!1),this.item.updateModel(this._undoSource,this._undoTarget)},redo:function(){this._redoSource!==t&&this.item.source(this._redoSource,!1),this._redoTarget!==t&&this.item.target(this._redoTarget,!1),this.item.updateModel(this._undoSource,this._undoTarget)}}),u=U.extend({init:function(e,t,i){this.item=e,this._undoSource=t,this._undoTarget=i,this._redoSource=e.source(),this._redoTarget=e.target(),this.title="Connection Editing"},undo:function(){this.item.source(this._undoSource,!1),this.item.target(this._undoTarget,!1),this.item.updateModel(this._undoSource,this._undoTarget)},redo:function(){this.item.source(this._redoSource,!1),this.item.target(this._redoTarget,!1),this.item.updateModel(this._undoSource,this._undoTarget)}}),h=U.extend({init:function(e){this.connection=e,this.diagram=e.diagram,this.targetConnector=e.targetConnector,this.title="Delete connection"},undo:function(){this.diagram._addConnection(this.connection,!1)},redo:function(){this.diagram._remove(this.connection,!1)}}),p=U.extend({init:function(e){this.shape=e,this.diagram=e.diagram,this.title="Deletion"},undo:function(){this.diagram._addShape(this.shape,{undoable:!1}),this.shape.select(!1)},redo:function(){this.shape.select(!1),this.diagram._remove(this.shape,!1)}}),f=U.extend({init:function(e,t,i){var n,r;for(this.shapes=e,this.undoStates=t,this.title="Transformation",this.redoStates=[],this.adorner=i,n=0;this.shapes.length>n;n++)r=this.shapes[n],this.redoStates.push(r.bounds())},undo:function(){var e,t;for(e=0;this.shapes.length>e;e++)t=this.shapes[e],t.bounds(this.undoStates[e]),t.hasOwnProperty("layout")&&t.layout(t,this.redoStates[e],this.undoStates[e]);this.adorner&&(this.adorner.refreshBounds(),this.adorner.refresh())},redo:function(){var e,t;for(e=0;this.shapes.length>e;e++)t=this.shapes[e],t.bounds(this.redoStates[e]),t.hasOwnProperty("layout")&&t.layout(t,this.undoStates[e],this.redoStates[e]);this.adorner&&(this.adorner.refreshBounds(),this.adorner.refresh())}}),m=U.extend({init:function(e,t){this.connection=e,this.diagram=t,this.title="New connection"},undo:function(){this.diagram._remove(this.connection,!1)},redo:function(){this.diagram._addConnection(this.connection,!1)}}),g=U.extend({init:function(e,t){this.shape=e,this.diagram=t,this.title="New shape"},undo:function(){this.diagram.deselect(),this.diagram._remove(this.shape,!1)},redo:function(){this.diagram._addShape(this.shape,!1)}}),v=U.extend({init:function(e,t,i){this.initial=e,this.finalPos=t,this.diagram=i,this.title="Pan Unit"},undo:function(){this.diagram.pan(this.initial)},redo:function(){this.diagram.pan(this.finalPos)}}),y=U.extend({init:function(e,t,i){var n,r;for(this.shapes=t,this.undoRotates=i,this.title="Rotation",this.redoRotates=[],this.redoAngle=e._angle,this.adorner=e,this.center=e._innerBounds.center(),n=0;this.shapes.length>n;n++)r=this.shapes[n],this.redoRotates.push(r.rotate().angle)},undo:function(){var e,t;for(e=0;this.shapes.length>e;e++)t=this.shapes[e],t.rotate(this.undoRotates[e],this.center,!1),t.hasOwnProperty("layout")&&t.layout(t);this.adorner&&(this.adorner._initialize(),this.adorner.refresh())},redo:function(){var e,t;for(e=0;this.shapes.length>e;e++)t=this.shapes[e],t.rotate(this.redoRotates[e],this.center,!1),t.hasOwnProperty("layout")&&t.layout(t);this.adorner&&(this.adorner._initialize(),this.adorner.refresh())}}),_=U.extend({init:function(e,t,i){this.diagram=e,this.indices=i,this.items=t,this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toFront(this.items,!1)}}),b=U.extend({init:function(e,t,i){this.diagram=e,this.indices=i,this.items=t,this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toBack(this.items,!1)}}),w=U.extend({init:function(){this.stack=[],this.index=0,this.capacity=100},begin:function(){this.composite=new c},cancel:function(){this.composite=t},commit:function(){this.composite.units.length>0&&this._restart(this.composite),this.composite=t},addCompositeItem:function(e){this.composite?this.composite.add(e):this.add(e)},add:function(e,t){this._restart(e,t)},count:function(){return this.stack.length},undo:function(){this.index>0&&(this.index--,this.stack[this.index].undo())},redo:function(){this.stack.length>0&&this.stack.length>this.index&&(this.stack[this.index].redo(),this.index++)},_restart:function(e,t){this.stack.splice(this.index,this.stack.length-this.index),this.stack.push(e),G(t)||t&&t===!0?this.redo():this.index++,this.stack.length>this.capacity&&(this.stack.splice(0,this.stack.length-this.capacity),this.index=this.capacity)},clear:function(){this.stack=[],this.index=0}}),k=U.extend({init:function(e){this.toolService=e},start:function(){},move:function(){},end:function(){},tryActivate:function(){return!1},getCursor:function(){return ie.arrow}}),x=k.extend({init:function(t){var i,n,r,o,s=this,a=O.support.mobileOS?ve:ge;k.fn.init.call(s,t),i=s.toolService.diagram,n=i.canvas,r=i.scroller=s.scroller=e(i.scrollable).kendoMobileScroller({friction:a,velocityMultiplier:ye,mousewheelScrolling:!1,zoom:!1,scroll:te(s._move,s)}).data("kendoMobileScroller"),n.translate&&(s.movableCanvas=new Z(n.element)),o=function(e,t,i){e.makeVirtual(),e.virtualSize(t||fe,i||me)},o(r.dimensions.x),o(r.dimensions.y),r.disable()},tryActivate:function(e,t){var i=this.toolService,r=i.diagram.options.pannable,o=t.ctrlKey;return ee(r.key)&&(o=r.key&&"none"!=r.key?t[r.key+"Key"]&&!(t.ctrlKey&&ee(i.hoveredItem)):n(t)),r!==!1&&o&&!ee(i.hoveredAdorner)&&!ee(i._hoveredConnector)},start:function(){this.scroller.enable()},move:function(){},_move:function(e){var t=this,i=t.toolService.diagram,n=i.canvas,r=new Y(e.scrollLeft,e.scrollTop);n.translate?(i._storePan(r.times(-1)),t.movableCanvas.moveTo(r),n.translate(r.x,r.y)):r=r.plus(i._pan.times(-1)),i.trigger(be,{pan:r})},end:function(){this.scroller.disable()},getCursor:function(){return ie.move}}),C=U.extend({init:function(e){this.toolService=e},tryActivate:function(){return!0},start:function(e,t){var n=this.toolService,o=n.diagram,s=n.hoveredItem,a=o.options.selectable;s&&(r(a,t)&&i(s,t),s.adorner&&(this.adorner=s.adorner,this.handle=this.adorner._hitTest(e))),this.handle||(this.handle=o._resizingAdorner._hitTest(e),this.handle&&(this.adorner=o._resizingAdorner)),this.adorner&&this.adorner.start(e)},move:function(e){var t=this;this.adorner&&this.adorner.move(t.handle,e)},end:function(e,i){var n,r=this.toolService.diagram,o=this.toolService;this.adorner&&(n=this.adorner.stop(),n&&r.undoRedoService.add(n,!1)),o.hoveredItem&&this.toolService.triggerClick({item:o.hoveredItem,point:e,meta:i}),this.adorner=t,this.handle=t},getCursor:function(e){return this.toolService.hoveredItem?this.toolService.hoveredItem._getCursor(e):ie.arrow}}),S=U.extend({init:function(e){this.toolService=e},tryActivate:function(e,t){var i=this.toolService,n=r(i.diagram.options.selectable,t);return n&&!ee(i.hoveredItem)&&!ee(i.hoveredAdorner)},start:function(e){var t=this.toolService.diagram;t.deselect(),t.selector.start(e)},move:function(e){var t=this.toolService.diagram;t.selector.move(e)},end:function(e,t){var i=this.toolService.diagram,n=this.toolService.hoveredItem,r=i.selector.bounds();n&&n.isSelected||t.ctrlKey||i.deselect(),r.isEmpty()||i.selectArea(r),i.selector.end()},getCursor:function(){return ie.arrow}}),T=U.extend({init:function(e){this.toolService=e,this.type="ConnectionTool"},tryActivate:function(){return this.toolService._hoveredConnector},start:function(e,t){var n=this.toolService.diagram,r=this.toolService._hoveredConnector,o=n.connect(r._c,e);this.toolService._connectionManipulation(o,r._c.shape,!0),this.toolService._removeHover(),i(this.toolService.activeConnection,t)},move:function(e){return this.toolService.activeConnection.target(e),!0},end:function(){var e=this.toolService.activeConnection,t=this.toolService.hoveredItem,i=this.toolService._hoveredConnector;i&&i._c!=e.sourceConnector?e.target(i._c):t&&e.target(t),e.updateModel(),this.toolService._connectionManipulation()},getCursor:function(){return ie.arrow}}),D=U.extend({init:function(e){this.toolService=e,this.type="ConnectionTool"},tryActivate:function(e,t){var i=this.toolService,n=i.diagram,o=n.options.selectable,s=i.hoveredItem,a=r(o,t)&&s&&s.path&&!(s.isSelected&&t.ctrlKey);return a&&(this._c=s),a},start:function(e,t){i(this._c,t),this.handle=this._c.adorner._hitTest(e),this._c.adorner.start(e)},move:function(e){return this._c.adorner.move(this.handle,e),!0},end:function(e,t){this.toolService.triggerClick({item:this._c,point:e,meta:t});var i=this._c.adorner.stop(e);this.toolService.diagram.undoRedoService.add(i,!1)},getCursor:function(){return ie.move}}),M=U.extend({init:function(e){this.diagram=e,this.tools=[new x(this),new D(this),new T(this),new S(this),new C(this)],this.activeTool=t},start:function(e,t){return t=X({},t),this.activeTool&&this.activeTool.end(e,t),this._updateHoveredItem(e),this._activateTool(e,t),this.activeTool.start(e,t),this._updateCursor(e),this.diagram.focus(),this.startPoint=e,!0},move:function(e,t){t=X({},t);var i=!0;return this.activeTool&&(i=this.activeTool.move(e,t)),i&&this._updateHoveredItem(e),this._updateCursor(e),!0},end:function(e,i){return i=X({},i),this.activeTool&&this.activeTool.end(e,i),this.activeTool=t,this._updateCursor(e),!0},keyDown:function(e,t){var i=this.diagram;if(t=X({ctrlKey:!1,metaKey:!1,altKey:!1},t),!t.ctrlKey&&!t.metaKey||t.altKey){if(46===e||8===e)return i.remove(i.select(),!0),i._destroyToolBar(),!0;if(27===e)return this._discardNewConnection(),i.deselect(),i._destroyToolBar(),!0}else{if(o(e,"a"))return i.selectAll(),i._destroyToolBar(),!0;if(o(e,"z"))return i.undo(),i._destroyToolBar(),!0;if(o(e,"y"))return i.redo(),i._destroyToolBar(),!0;o(e,"c")?(i.copy(),i._destroyToolBar()):o(e,"x")?(i.cut(),i._destroyToolBar()):o(e,"v")?(i.paste(),i._destroyToolBar()):o(e,"l")?(i.layout(),i._destroyToolBar()):o(e,"d")&&(i._destroyToolBar(),
i.copy(),i.paste())}},wheel:function(e,t){var i=this.diagram,n=t.delta,r=i.zoom(),o=i.options,s=o.zoomRate,a={point:e,meta:t,zoom:r};return i.trigger(he,a),0>n?r+=s:r-=s,r=O.dataviz.round(Math.max(o.minZoom,Math.min(o.maxZoom,r)),2),a.zoom=r,i.zoom(r,a),i.trigger(pe,a),!0},setTool:function(e,t){e.toolService=this,this.tools[t]=e},triggerClick:function(e){this.startPoint.equals(e.point)&&this.diagram.trigger("click",e)},_discardNewConnection:function(){this.newConnection&&(this.diagram.remove(this.newConnection),this.newConnection=t)},_activateTool:function(e,t){var i,n;for(i=0;this.tools.length>i;i++)if(n=this.tools[i],n.tryActivate(e,t)){this.activeTool=n;break}},_updateCursor:function(e){var t=this.diagram.element,i=this.activeTool?this.activeTool.getCursor(e):this.hoveredAdorner?this.hoveredAdorner._getCursor(e):this.hoveredItem?this.hoveredItem._getCursor(e):ie.arrow;t.css({cursor:i}),J.msie&&7==J.version&&(t[0].style.cssText=t[0].style.cssText)},_connectionManipulation:function(e,i,n){this.activeConnection=e,this.disabledShape=i,this.newConnection=n?this.activeConnection:t},_updateHoveredItem:function(e){var i=this._hitTest(e);i==this.hoveredItem||this.disabledShape&&i==this.disabledShape||(this.hoveredItem&&this.hoveredItem._hover(!1),i&&i.options.enable?(this.hoveredItem=i,this.hoveredItem._hover(!0)):this.hoveredItem=t)},_removeHover:function(){this.hoveredItem&&(this.hoveredItem._hover(!1),this.hoveredItem=t)},_hitTest:function(e){var i,n,r,o,s=this.diagram;if(this._hoveredConnector&&(this._hoveredConnector._hover(!1),this._hoveredConnector=t),s._connectorsAdorner._visible&&(i=s._connectorsAdorner._hitTest(e)))return i;if(i=this.diagram._resizingAdorner._hitTest(e)){if(this.hoveredAdorner=s._resizingAdorner,0!==i.x&&0!==i.y)return;i=t}else this.hoveredAdorner=t;if(!this.activeTool||"ConnectionTool"!==this.activeTool.type){for(o=[],r=0;s._selectedItems.length>r;r++)n=s._selectedItems[r],n instanceof B.Connection&&o.push(n);i=this._hitTestItems(o,e)}return i||this._hitTestItems(s.shapes,e)||this._hitTestItems(s.connections,e)},_hitTestItems:function(e,t){var i,n,r;for(i=e.length-1;i>=0;i--)if(n=e[i],r=n._hitTest(t))return r}}),A=O.Class.extend({init:function(){}}),E=A.extend({init:function(e){var t=this;A.fn.init.call(t),this.connection=e},hitTest:function(e){var t=this.getBounds().inflate(10);return!!t.contains(e)&&B.Geometry.distanceToPolyline(e,this.connection.allPoints())<ne},getBounds:function(){var e,t=this.connection.allPoints(),i=t[0],n=t[t.length-1],r=Math.max(i.x,n.x),o=Math.min(i.x,n.x),s=Math.min(i.y,n.y),a=Math.max(i.y,n.y);for(e=1;t.length-1>e;++e)r=Math.max(r,t[e].x),o=Math.min(o,t[e].x),s=Math.min(s,t[e].y),a=Math.max(a,t[e].y);return new W(o,s,r-o,a-s)}}),I=E.extend({init:function(e){var t=this;E.fn.init.call(t),this.connection=e},route:function(){}}),P=E.extend({init:function(e){var t=this;E.fn.init.call(t),this.connection=e},route:function(){function e(){if(null!==u){if(u===se||u===ae)return!0;if(u===oe||u===le)return!1}return Math.abs(o.x-s.x)>Math.abs(o.y-s.y)}var t,i,n,r=this.connection,o=this.connection.sourcePoint(),s=this.connection.targetPoint(),a=[o,o,s,s],l=s.x-o.x,c=s.y-o.y,d=a.length,u=null,h=null;if(q.isDefined(r._resolvedSourceConnector)&&(u=r._resolvedSourceConnector.options.name),q.isDefined(r._resolvedTargetConnector)&&(h=r._resolvedTargetConnector.options.name),null!==u&&null!==h&&q.contains(ce,u)&&q.contains(ce,h))this.connection.points(u===oe||u==le?h==oe||h==le?[new Y(o.x,o.y+c/2),new Y(s.x,o.y+c/2)]:[new Y(o.x,o.y+c)]:h==ae||h==se?[new Y(o.x+l/2,o.y),new Y(o.x+l/2,o.y+c)]:[new Y(s.x,o.y)]);else{for(this.connection.cascadeStartHorizontal=e(this.connection),n=1;d-1>n;++n)r.cascadeStartHorizontal?n%2!==0?(t=l/(d/2),i=0):(t=0,i=c/((d-1)/2)):n%2!==0?(t=0,i=c/(d/2)):(t=l/((d-1)/2),i=0),a[n]=new Y(a[n-1].x+t,a[n-1].y+i);n--,a[d-2]=r.cascadeStartHorizontal&&n%2!==0||!r.cascadeStartHorizontal&&n%2===0?new Y(a[d-1].x,a[d-2].y):new Y(a[d-2].x,a[d-1].y),this.connection.points([a[1],a[2]])}}}),F=U.extend({init:function(e,t){var i=this;i.diagram=e,i.options=X({},i.options,t),i.visual=new V,i.diagram._adorners.push(i)},refresh:function(){}}),z=F.extend({init:function(e,t){var i,n,r,o=this;o.connection=e,i=o.connection.diagram,o._ts=i.toolService,F.fn.init.call(o,i,t),n=o.connection.sourcePoint(),r=o.connection.targetPoint(),o.spVisual=new Q(X(o.options.handles,{center:n})),o.epVisual=new Q(X(o.options.handles,{center:r})),o.visual.append(o.spVisual),o.visual.append(o.epVisual)},options:{handles:{}},_getCursor:function(){return ie.move},start:function(e){switch(this.handle=this._hitTest(e),this.startPoint=e,this._initialSource=this.connection.source(),this._initialTarget=this.connection.target(),this.handle){case-1:this.connection.targetConnector&&this._ts._connectionManipulation(this.connection,this.connection.targetConnector.shape);break;case 1:this.connection.sourceConnector&&this._ts._connectionManipulation(this.connection,this.connection.sourceConnector.shape)}},move:function(e,t){switch(e){case-1:this.connection.source(t);break;case 1:this.connection.target(t);break;default:var i=t.minus(this.startPoint);this.startPoint=t,this.connection.sourceConnector||this.connection.source(this.connection.sourcePoint().plus(i)),this.connection.targetConnector||this.connection.target(this.connection.targetPoint().plus(i))}return this.refresh(),!0},stop:function(e){var i,n=this.diagram.toolService,r=n.hoveredItem;return i=n._hoveredConnector?n._hoveredConnector._c:r&&r instanceof B.Shape?r:e,-1===this.handle?this.connection.source(i):1===this.handle&&this.connection.target(i),this.handle&&this.connection.updateModel(),this.handle=t,this._ts._connectionManipulation(),new u(this.connection,this._initialSource,this._initialTarget)},_hitTest:function(e){var t=this.connection.sourcePoint(),i=this.connection.targetPoint(),n=this.options.handles.width/2,r=this.options.handles.height/2,o=new W(t.x,t.y).inflate(n,r),s=new W(i.x,i.y).inflate(n,r);return o.contains(e)?-1:s.contains(e)?1:0},refresh:function(){this.spVisual.redraw({center:this.diagram.modelToLayer(this.connection.sourcePoint())}),this.epVisual.redraw({center:this.diagram.modelToLayer(this.connection.targetPoint())})}}),H=F.extend({init:function(e,t){var i=this;F.fn.init.call(i,e,t),i._refreshHandler=function(e){e.item==i.shape&&i.refresh()}},show:function(e){var t,i,n,r=this;for(r._visible=!0,r.shape=e,r.diagram.bind(ue,r._refreshHandler),t=e.connectors.length,r.connectors=[],r.visual.clear(),i=0;t>i;i++)n=new $(e.connectors[i]),r.connectors.push(n),r.visual.append(n.visual);r.visual.visible(!0),r.refresh()},destroy:function(){var e=this;e.diagram.unbind(ue,e._refreshHandler),e.shape=t,e._visible=t,e.visual.visible(!1)},_hitTest:function(e){var t,i;for(i=0;this.connectors.length>i;i++)if(t=this.connectors[i],t._hitTest(e)){t._hover(!0),this.diagram.toolService._hoveredConnector=t;break}},refresh:function(){if(this.shape){var t=this.shape.bounds();t=this.diagram.modelToLayer(t),this.visual.position(t.topLeft()),e.each(this.connectors,function(){this.refresh()})}}}),R=F.extend({init:function(e,t){var i=this;F.fn.init.call(i,e,t),i._manipulating=!1,i.map=[],i.shapes=[],i._initSelection(),i._createHandles(),i.redraw(),i.diagram.bind("select",function(e){i._initialize(e.selected)}),i._refreshHandler=function(){i._internalChange||(i.refreshBounds(),i.refresh())},i._rotatedHandler=function(){1==i.shapes.length&&(i._angle=i.shapes[0].rotate().angle),i._refreshHandler()},i.diagram.bind(ue,i._refreshHandler).bind(de,i._rotatedHandler),i.refreshBounds(),i.refresh()},options:{editable:{},selectable:{stroke:{color:"#778899",width:1,dashType:"dash"},fill:{color:_e}},offset:10},_initSelection:function(){var e=this,t=e.diagram,i=t.options.selectable,n=X({},e.options.selectable,i);e.rect=new j(n),e.visual.append(e.rect)},_createHandles:function(){var e,t,i,n,r=this.options.editable;if(r&&r.resize)for(e=r.resize.handles,n=-1;1>=n;n++)for(i=-1;1>=i;i++)(0!==n||0!==i)&&(t=new j(e),t.drawingElement._hover=te(this._hover,this),this.map.push({x:n,y:i,visual:t}),this.visual.append(t))},bounds:function(e){return e?(this._innerBounds=e.clone(),this._bounds=this.diagram.modelToLayer(e).inflate(this.options.offset,this.options.offset),t):this._bounds},_hitTest:function(e){var i,n,r,o,s=this.diagram.modelToLayer(e),a=this.options.editable,l=this.map.length;if(this._angle&&(s=s.clone().rotate(this._bounds.center(),this._angle)),a&&a.rotate&&this._rotationThumbBounds&&this._rotationThumbBounds.contains(s))return new Y((-1),(-2));if(a&&a.resize)for(i=0;l>i;i++)if(o=this.map[i],n=new Y(o.x,o.y),r=this._getHandleBounds(n),r.offset(this._bounds.x,this._bounds.y),r.contains(s))return n;return this._bounds.contains(s)?new Y(0,0):t},_getHandleBounds:function(e){var i,n,r,o,s=this.options.editable;return s&&s.resize?(i=s.resize.handles||{},n=i.width,r=i.height,o=new W(0,0,n,r),0>e.x?o.x=-n/2:0===e.x?o.x=Math.floor(this._bounds.width/2)-n/2:e.x>0&&(o.x=this._bounds.width+1-n/2),0>e.y?o.y=-r/2:0===e.y?o.y=Math.floor(this._bounds.height/2)-r/2:e.y>0&&(o.y=this._bounds.height+1-r/2),o):t},_getCursor:function(e){var t,i=this._hitTest(e);if(i&&i.x>=-1&&1>=i.x&&i.y>=-1&&1>=i.y&&this.options.editable&&this.options.editable.resize){if(t=this._angle,t&&(t=360-t,i.rotate(new Y(0,0),t),i=new Y(Math.round(i.x),Math.round(i.y))),-1==i.x&&-1==i.y)return"nw-resize";if(1==i.x&&1==i.y)return"se-resize";if(-1==i.x&&1==i.y)return"sw-resize";if(1==i.x&&-1==i.y)return"ne-resize";if(0===i.x&&-1==i.y)return"n-resize";if(0===i.x&&1==i.y)return"s-resize";if(1==i.x&&0===i.y)return"e-resize";if(-1==i.x&&0===i.y)return"w-resize"}return this._manipulating?ie.move:ie.select},_initialize:function(){var e,t,i=this,n=i.diagram.select();for(i.shapes=[],e=0;n.length>e;e++)t=n[e],t instanceof B.Shape&&(i.shapes.push(t),t._rotationOffset=new Y);i._angle=1==i.shapes.length?i.shapes[0].rotate().angle:0,i._startAngle=i._angle,i._rotates(),i._positions(),i.refreshBounds(),i.refresh(),i.redraw()},_rotates:function(){var e,t,i=this;for(i.initialRotates=[],e=0;i.shapes.length>e;e++)t=i.shapes[e],i.initialRotates.push(t.rotate().angle)},_positions:function(){var e,t,i=this;for(i.initialStates=[],e=0;i.shapes.length>e;e++)t=i.shapes[e],i.initialStates.push(t.bounds())},_hover:function(e,t){var i,n,r,o,s=this.options.editable;s&&s.resize&&(i=s.resize.handles,n=i.hover,r=i.stroke,o=i.fill,e&&q.isDefined(n.stroke)&&(r=X({},r,n.stroke)),e&&q.isDefined(n.fill)&&(o=n.fill),t.stroke(r.color,r.width,r.opacity),t.fill(o.color,o.opacity))},start:function(e){var t,i;for(this._sp=e,this._cp=e,this._lp=e,this._manipulating=!0,this._internalChange=!0,this.shapeStates=[],t=0;this.shapes.length>t;t++)i=this.shapes[t],this.shapeStates.push(i.bounds())},redraw:function(){var e,t,i=this,n=i.options.editable,r=n.resize,o=n.rotate,s=!(!n||!r),a=!(!n||!o);for(e=0;this.map.length>e;e++)t=this.map[e],t.visual.visible(s);i.rotationThumb&&i.rotationThumb.visible(a)},angle:function(e){return ee(e)&&(this._angle=e),this._angle},rotate:function(){var e,t,i=this._innerBounds.center(),n=this.angle();for(this._internalChange=!0,e=0;this.shapes.length>e;e++)t=this.shapes[e],n=(n+this.initialRotates[e]-this._startAngle)%360,t.rotate(n,i);this.refresh()},move:function(e,i){var n,r,o,a,l,c,d,u,h,p,f,m,g,v,y=new Y,_=new Y,b=0;if(-2===e.y&&-1===e.x){for(a=this._innerBounds.center(),this._angle=this._truncateAngle(q.findAngle(a,i)),c=0;this.shapes.length>c;c++)l=this.shapes[c],d=(this._angle+this.initialRotates[c]-this._startAngle)%360,l.rotate(d,a),l.hasOwnProperty("layout")&&l.layout(l),this._rotating=!0;this.refresh()}else{if(this.diagram.options.snap.enabled===!0){if(m=this._truncateDistance(i.minus(this._lp)),0===m.x&&0===m.y)return this._cp=i,t;n=m,this._lp=new Y(this._lp.x+m.x,this._lp.y+m.y)}else n=i.minus(this._cp);for(0===e.x&&0===e.y?(_=y=n,r=!0):(this._angle&&n.rotate(new Y(0,0),this._angle),-1==e.x?y.x=n.x:1==e.x&&(_.x=n.x),-1==e.y?y.y=n.y:1==e.y&&(_.y=n.y)),r||(h=s(e,this._innerBounds),p=(this._innerBounds.width+n.x*e.x)/this._innerBounds.width,f=(this._innerBounds.height+n.y*e.y)/this._innerBounds.height),c=0;this.shapes.length>c;c++)l=this.shapes[c],o=l.bounds(),r?u=this._displaceBounds(o,y,_,r):(u=o.clone(),u.scale(p,f,h,this._innerBounds.center(),l.rotate().angle),g=u.center(),g.rotate(o.center(),-this._angle),u=new W(g.x-u.width/2,g.y-u.height/2,u.width,u.height)),u.width>=l.options.minWidth&&u.height>=l.options.minHeight&&(v=o,l.bounds(u),l.hasOwnProperty("layout")&&l.layout(l,v,u),l.rotate(l.rotate().angle),b+=1);b==c&&(u=this._displaceBounds(this._innerBounds,y,_,r),this.bounds(u),this.refresh()),this._positions()}this._cp=i},_truncatePositionToGuides:function(e){return this.diagram.ruler?this.diagram.ruler.truncatePositionToGuides(e):e},_truncateSizeToGuides:function(e){return this.diagram.ruler?this.diagram.ruler.truncateSizeToGuides(e):e},_truncateAngle:function(e){var t=Math.max(this.diagram.options.snap.angle,5);return this.diagram.options.snap.enabled===!0?Math.floor(e%360/t)*t:e%360},_truncateDistance:function(e){if(e instanceof B.Point)return new B.Point(this._truncateDistance(e.x),this._truncateDistance(e.y));var t=Math.max(this.diagram.options.snap.size,5);return this.diagram.options.snap.enabled===!0?Math.floor(e/t)*t:e},_displaceBounds:function(e,t,i,n){var r,o=e.topLeft().plus(t),s=e.bottomRight().plus(i),a=W.fromPoints(o,s);return n||(r=a.center(),r.rotate(e.center(),-this._angle),a=new W(r.x-a.width/2,r.y-a.height/2,a.width,a.height)),a},stop:function(){var e,i,n,r;if(this._cp!=this._sp)if(this._rotating)e=new y(this,this.shapes,this.initialRotates),this._rotating=!1;else{if(this.diagram.ruler)for(i=0;this.shapes.length>i;i++)n=this.shapes[i],r=n.bounds(),r=this._truncateSizeToGuides(this._truncatePositionToGuides(r)),n.bounds(r),this.refreshBounds(),this.refresh();for(i=0;this.shapes.length>i;i++)n=this.shapes[i],n.updateModel();e=new f(this.shapes,this.shapeStates,this)}return this._manipulating=t,this._internalChange=t,this._rotating=t,e},refreshBounds:function(){var e=1==this.shapes.length?this.shapes[0].bounds().clone():this.diagram.boundingBox(this.shapes,!0);this.bounds(e)},refresh:function(){var t,i,n,r,o=this;this.shapes.length>0?(i=this.bounds(),this.visual.visible(!0),this.visual.position(i.topLeft()),e.each(this.map,function(){t=o._getHandleBounds(new Y(this.x,this.y)),this.visual.position(t.topLeft())}),this.visual.position(i.topLeft()),n=new Y(i.width/2,i.height/2),this.visual.rotate(this._angle,n),this.rect.redraw({width:i.width,height:i.height}),this.rotationThumb&&(r=this.options.editable.rotate.thumb,this._rotationThumbBounds=new W(i.center().x,i.y+r.y,0,0).inflate(r.width),this.rotationThumb.redraw({x:i.width/2-r.width/2}))):this.visual.visible(!1)}}),N=U.extend({init:function(e){var t=e.options.selectable;this.options=X({},this.options,t),this.visual=new j(this.options),this.diagram=e},options:{stroke:{color:"#778899",width:1,dashType:"dash"},fill:{color:_e}},start:function(e){this._sp=this._ep=e,this.refresh(),this.diagram._adorn(this,!0)},end:function(){this._sp=this._ep=t,this.diagram._adorn(this,!1)},bounds:function(e){return e&&(this._bounds=e),this._bounds},move:function(e){this._ep=e,this.refresh()},refresh:function(){if(this._sp){var e=W.fromPoints(this.diagram.modelToLayer(this._sp),this.diagram.modelToLayer(this._ep));this.bounds(W.fromPoints(this._sp,this._ep)),this.visual.position(e.topLeft()),this.visual.redraw({height:e.height+1,width:e.width+1})}}}),$=U.extend({init:function(e){this.options=X({},e.options),this._c=e,this.visual=new Q(this.options),this.refresh()},_hover:function(e){var t=this.options,i=t.hover,n=t.stroke,r=t.fill;e&&q.isDefined(i.stroke)&&(n=X({},n,i.stroke)),e&&q.isDefined(i.fill)&&(r=i.fill),this.visual.redraw({stroke:n,fill:r})},refresh:function(){var e=this._c.shape.diagram.modelToView(this._c.position()),t=e.minus(this._c.shape.bounds("transformed").topLeft()),i=new W(e.x,e.y,0,0);i.inflate(this.options.width/2,this.options.height/2),this._visualBounds=i,this.visual.redraw({center:new Y(t.x,t.y)})},_hitTest:function(e){var t=this._c.shape.diagram.modelToView(e);return this._visualBounds.contains(t)}}),X(B,{CompositeUnit:c,TransformUnit:f,PanUndoUnit:v,AddShapeUnit:g,AddConnectionUnit:m,DeleteShapeUnit:p,DeleteConnectionUnit:h,ConnectionEditAdorner:z,UndoRedoService:w,ResizingAdorner:R,Selector:N,ToolService:M,ConnectorsAdorner:H,LayoutUndoUnit:l,ConnectionEditUnit:d,ToFrontUnit:_,ToBackUnit:b,ConnectionRouterBase:A,PolylineRouter:I,CascadingRouter:P,SelectionTool:S,ScrollerTool:x,PointerTool:C,ConnectionEditTool:D,RotateUnit:y})}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.dataviz.diagram,n=i.Graph,r=i.Node,o=i.Link,s=t.deepExtend,a=i.Size,l=i.Rect,c=i.Dictionary,d=i.Set,u=i.Graph,h=i.Utils,p=i.Point,f=1e-6,m=Math.PI/180,g=h.contains,v=e.grep,y=t.Class.extend({defaultOptions:{type:"Tree",subtype:"Down",roots:null,animate:!1,limitToView:!1,friction:.9,nodeDistance:50,iterations:300,horizontalSeparation:90,verticalSeparation:50,underneathVerticalTopOffset:15,underneathHorizontalOffset:15,underneathVerticalSeparation:15,grid:{width:1500,offsetX:50,offsetY:50,componentSpacingX:20,componentSpacingY:20},layerSeparation:50,layeredIterations:2,startRadialAngle:0,endRadialAngle:360,radialSeparation:150,radialFirstLevelSeparation:200,keepComponentsInOneRadialLayout:!1,ignoreContainers:!0,layoutContainerChildren:!1,ignoreInvisible:!0,animateTransitions:!1},init:function(){},gridLayoutComponents:function(e){var t,i,n,r,o,s,a,l,c,d,u,f,m,g,v;if(!e)throw"No components supplied.";for(h.forEach(e,function(e){e.calcBounds()}),e.sort(function(e,t){return t.bounds.width-e.bounds.width}),t=this.options.grid.width,i=this.options.grid.componentSpacingX,n=this.options.grid.componentSpacingY,r=0,o=this.options.grid.offsetX,s=this.options.grid.offsetY,a=o,l=s,d=[],u=[];e.length>0;){for(a>=t&&(a=o,l+=r+n,r=0),f=e.pop(),this.moveToOffset(f,new p(a,l)),c=0;f.nodes.length>c;c++)u.push(f.nodes[c]);for(c=0;f.links.length>c;c++)d.push(f.links[c]);m=f.bounds,g=m.height,(0>=g||isNaN(g))&&(g=0),v=m.width,(0>=v||isNaN(v))&&(v=0),g>=r&&(r=g),a+=v+i}return{nodes:u,links:d}},moveToOffset:function(e,t){var i,n,r,o,s,a,c,d,u=e.bounds,h=t.x-u.x,f=t.y-u.y;for(i=0;e.nodes.length>i;i++)r=e.nodes[i],o=r.bounds(),0===o.width&&0===o.height&&0===o.x&&0===o.y&&(o=new l(0,0,0,0)),o.x+=h,o.y+=f,r.bounds(o);for(i=0;e.links.length>i;i++)if(s=e.links[i],s.points){for(a=[],c=s.points,n=0;c.length>n;n++)d=c[n],d.x+=h,d.y+=f,a.push(d);s.points=a}return this.currentHorizontalOffset+=u.width+this.options.grid.offsetX,new p(h,f)},transferOptions:function(e){this.options=t.deepExtend({},this.defaultOptions),h.isUndefined(e)||(this.options=t.deepExtend(this.options,e||{}))}}),_=t.Class.extend({init:function(e){this.nodeMap=new c,this.shapeMap=new c,this.nodes=[],this.edges=[],this.edgeMap=new c,this.finalNodes=[],this.finalLinks=[],this.ignoredConnections=[],this.ignoredShapes=[],this.hyperMap=new c,this.hyperTree=new n,this.finalGraph=null,this.diagram=e},convert:function(e){if(h.isUndefined(this.diagram))throw"No diagram to convert.";return this.options=t.deepExtend({ignoreInvisible:!0,ignoreContainers:!0,layoutContainerChildren:!1},e||{}),this.clear(),this._renormalizeShapes(),this._renormalizeConnections(),this.finalNodes=new c(this.nodes),this.finalLinks=new c(this.edges),this.finalGraph=new n,this.finalNodes.forEach(function(e){this.finalGraph.addNode(e)},this),this.finalLinks.forEach(function(e){this.finalGraph.addExistingLink(e)},this),this.finalGraph},mapConnection:function(e){return this.edgeMap.first(function(t){return g(this.edgeMap.get(t),e)})},mapShape:function(e){var t,i,n,r=this.nodeMap.keys();for(t=0,i=r.length;i>t;t++)if(n=r[t],g(this.nodeMap.get(n),e))return n},getEdge:function(e,t){return h.first(e.links,function(i){return i.getComplement(e)===t})},clear:function(){this.finalGraph=null,this.hyperTree=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new u:null,this.hyperMap=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new c:null,this.nodeMap=new c,this.shapeMap=new c,this.nodes=[],this.edges=[],this.edgeMap=new c,this.ignoredConnections=[],this.ignoredShapes=[],this.finalNodes=[],this.finalLinks=[]},listToRoot:function(e){var t=[],i=e.container;if(!i)return t;for(t.push(i);i.parentContainer;)i=i.parentContainer,t.push(i);return t.reverse(),t},firstNonIgnorableContainer:function(e){return e.isContainer&&!this._isIgnorableItem(e)?e:e.parentContainer?this.firstNonIgnorableContainer(e.parentContainer):null},isContainerConnection:function(e,t){return!(!e.isContainer||!this.isDescendantOf(e,t))||t.isContainer&&this.isDescendantOf(t,e)},isDescendantOf:function(e,t){var i,n,r,o;if(!e.isContainer)throw"Expecting a container.";if(e===t)return!1;if(g(e.children,t))return!0;for(i=[],n=0,r=e.children.length;r>n;n++)o=e.children[n],o.isContainer&&this.isDescendantOf(o,t)&&i.push(o);return i.length>0},isIgnorableItem:function(e){return this.options.ignoreInvisible?(!e.isCollapsed||!this._isVisible(e))&&!(!e.isCollapsed&&this._isVisible(e)):e.isCollapsed&&!this._isTop(e)},isShapeMapped:function(e){return e.isCollapsed&&!this._isVisible(e)&&!this._isTop(e)},leastCommonAncestor:function(e,t){var i,n,r,o,s,a;if(!e)throw"Parameter should not be null.";if(!t)throw"Parameter should not be null.";if(!this.hyperTree)throw"No hypertree available.";if(i=this.listToRoot(e),n=this.listToRoot(t),r=null,h.isEmpty(i)||h.isEmpty(n))return this.hyperTree.root.data;for(o=i[0],s=n[0],a=0;o===s&&(r=i[a],a++,!(a>=i.length||a>=n.length));)o=i[a],s=n[a];return r?v(this.hyperTree.nodes,function(e){return e.data.container===r}):this.hyperTree.root.data},_isTop:function(e){return!e.parentContainer},_isVisible:function(e){return!!e.visible()&&(e.parentContainer?this._isVisible(e.parentContainer):e.visible())},_isCollapsed:function(e){return!(!e.isContainer||!e.isCollapsed)||e.parentContainer&&this._isCollapsed(e.parentContainer)},_renormalizeShapes:function(){var e,t,i,n;if(!this.options.ignoreContainers)throw"Containers are not supported yet, but stay tuned.";for(e=0,t=this.diagram.shapes.length;t>e;e++)i=this.diagram.shapes[e],this.options.ignoreInvisible&&!this._isVisible(i)||i.isContainer?this.ignoredShapes.push(i):(n=new r(i.id,i),n.isVirtual=!1,this.nodeMap.add(n,[i]),this.nodes.push(n))},_renormalizeConnections:function(){var e,t,i,n,r,s,a,l;if(0!==this.diagram.connections.length)for(e=0,t=this.diagram.connections.length;t>e;e++)if(i=this.diagram.connections[e],this.isIgnorableItem(i))this.ignoredConnections.push(i);else if(n=i.sourceConnector?i.sourceConnector.shape:null,r=i.targetConnector?i.targetConnector.shape:null,n&&r)if(!g(this.ignoredShapes,n)||this.shapeMap.containsKey(n))if(!g(this.ignoredShapes,r)||this.shapeMap.containsKey(r))if(this.shapeMap.containsKey(n)&&(n=this.shapeMap[n]),this.shapeMap.containsKey(r)&&(r=this.shapeMap[r]),s=this.mapShape(n),a=this.mapShape(r),s===a||this.areConnectedAlready(s,a))this.ignoredConnections.push(i);else{if(null===s||null===a)throw"A shape was not mapped to a node.";if(!this.options.ignoreContainers)throw"Containers are not supported yet, but stay tuned.";s.isVirtual||a.isVirtual?this.ignoredConnections.push(i):(l=new o(s,a,i.id,i),this.edgeMap.add(l,[i]),this.edges.push(l))}else this.ignoredConnections.push(i);else this.ignoredConnections.push(i);else this.ignoredConnections.push(i)},areConnectedAlready:function(e,t){return h.any(this.edges,function(i){return i.source===e&&i.target===t||i.source===t&&i.target===e})}}),b=y.extend({init:function(e){var t=this;if(y.fn.init.call(t),h.isUndefined(e))throw"Diagram is not specified.";this.diagram=e},layout:function(e){var t,n,r,o,s,a;if(this.transferOptions(e),t=new _(this.diagram),n=t.convert(e),!n.isEmpty()&&(r=n.getConnectedComponents(),!h.isEmpty(r))){for(o=0;r.length>o;o++)s=r[o],this.layoutGraph(s,e);return a=this.gridLayoutComponents(r),new i.LayoutState(this.diagram,a)}},layoutGraph:function(e,t){var i,n,r;for(h.isDefined(t)&&this.transferOptions(t),this.graph=e,i=9*this.options.nodeDistance,this.temperature=i,n=this._expectedBounds(),this.width=n.width,this.height=n.height,r=0;this.options.iterations>r;r++)this.refineStage=r>=5*this.options.iterations/6,this.tick(),this.temperature=this.refineStage?i/30:i*(1-r/(2*this.options.iterations))},tick:function(){var e,t,i;for(e=0;this.graph.nodes.length>e;e++)this._repulsion(this.graph.nodes[e]);for(e=0;this.graph.links.length>e;e++)this._attraction(this.graph.links[e]);for(e=0;this.graph.nodes.length>e;e++){if(t=this.graph.nodes[e],i=Math.sqrt(t.dx*t.dx+t.dy*t.dy),0===i)return;t.x+=Math.min(i,this.temperature)*t.dx/i,t.y+=Math.min(i,this.temperature)*t.dy/i,this.options.limitToView&&(t.x=Math.min(this.width,Math.max(t.width/2,t.x)),t.y=Math.min(this.height,Math.max(t.height/2,t.y)))}},_shake:function(e){var t=Math.random()*this.options.nodeDistance/4,i=2*Math.random()*Math.PI;e.x+=t*Math.cos(i),e.y-=t*Math.sin(i)},_InverseSquareForce:function(e,t,i){var n,r,o,s,a,l,c;return this.refineStage?(r=t.x-i.x,o=t.y-i.y,s=t.width/2,a=t.height/2,l=i.width/2,c=i.height/2,n=Math.pow(r,2)/Math.pow(s+l+this.options.nodeDistance,2)+Math.pow(o,2)/Math.pow(a+c+this.options.nodeDistance,2)):n=Math.pow(e,2)/Math.pow(this.options.nodeDistance,2),4*n/3},_SquareForce:function(e,t,i){return 1/this._InverseSquareForce(e,t,i)},_repulsion:function(e){e.dx=0,e.dy=0,h.forEach(this.graph.nodes,function(t){var i,n,r,o;if(t!==e){for(;e.x===t.x&&e.y===t.y;)this._shake(t);i=e.x-t.x,n=e.y-t.y,r=Math.sqrt(i*i+n*n),o=2*this._SquareForce(r,e,t),e.dx+=i/r*o,e.dy+=n/r*o}},this)},_attraction:function(e){var t,i,n,r,o,s,a=e.target,l=e.source;if(l!==a){for(;l.x===a.x&&l.y===a.y;)this._shake(a);t=l.x-a.x,i=l.y-a.y,n=Math.sqrt(t*t+i*i),r=5*this._InverseSquareForce(n,l,a),o=t/n*r,s=i/n*r,a.dx+=o,a.dy+=s,l.dx-=o,l.dy-=s}},_expectedBounds:function(){var e,t,i,n,r,o=this.graph.nodes.length,s=1.5,a=4;return 0===o?e:(e=h.fold(this.graph.nodes,function(e,t){var i=t.width*t.height;return i>0?e+=Math.sqrt(i):0},0,this),t=e/o,i=t*Math.ceil(Math.sqrt(o)),n=i*Math.sqrt(s),r=i/Math.sqrt(s),{width:n*a,height:r*a})}}),w=t.Class.extend({init:function(e){this.center=null,this.options=e},layout:function(e,t){if(this.graph=e,this.graph.nodes&&0!==this.graph.nodes.length){if(!g(this.graph.nodes,t))throw"The given root is not in the graph.";this.center=t,this.graph.cacheRelationships(),this.layoutSwitch()}},layoutLeft:function(e){var t,i,n,r,o,s,l,c;for(this.setChildrenDirection(this.center,"Left",!1),this.setChildrenLayout(this.center,"Default",!1),t=0,i=0,r=0;e.length>r;r++)o=e[r],o.TreeDirection="Left",s=this.measure(o,a.Empty),i=Math.max(i,s.Width),t+=s.height+this.options.verticalSeparation;for(t-=this.options.verticalSeparation,l=this.center.x-this.options.horizontalSeparation,n=this.center.y+(this.center.height-t)/2,r=0;e.length>r;r++)o=e[r],c=new p(l-o.Size.width,n),this.arrange(o,c),n+=o.Size.height+this.options.verticalSeparation},layoutRight:function(e){var t,i,n,r,o,s,l,c;for(this.setChildrenDirection(this.center,"Right",!1),this.setChildrenLayout(this.center,"Default",!1),t=0,i=0,r=0;e.length>r;r++)o=e[r],o.TreeDirection="Right",s=this.measure(o,a.Empty),i=Math.max(i,s.Width),t+=s.height+this.options.verticalSeparation;for(t-=this.options.verticalSeparation,l=this.center.x+this.options.horizontalSeparation+this.center.width,n=this.center.y+(this.center.height-t)/2,r=0;e.length>r;r++)o=e[r],c=new p(l,n),this.arrange(o,c),n+=o.Size.height+this.options.verticalSeparation},layoutUp:function(e){var t,i,n,r,o,s,l;for(this.setChildrenDirection(this.center,"Up",!1),this.setChildrenLayout(this.center,"Default",!1),t=0,r=0;e.length>r;r++)n=e[r],n.TreeDirection="Up",o=this.measure(n,a.Empty),t+=o.width+this.options.horizontalSeparation;for(t-=this.options.horizontalSeparation,s=this.center.x+this.center.width/2-t/2,r=0;e.length>r;r++)n=e[r],i=this.center.y-this.options.verticalSeparation-n.Size.height,l=new p(s,i),this.arrange(n,l),s+=n.Size.width+this.options.horizontalSeparation},layoutDown:function(e){var t,i,n,r,o,s,l;for(this.setChildrenDirection(this.center,"Down",!1),this.setChildrenLayout(this.center,"Default",!1),n=0,i=0;e.length>i;i++)t=e[i],t.treeDirection="Down",o=this.measure(t,a.Empty),n+=o.width+this.options.horizontalSeparation;for(n-=this.options.horizontalSeparation,s=this.center.x+this.center.width/2-n/2,r=this.center.y+this.options.verticalSeparation+this.center.height,i=0;e.length>i;i++)t=e[i],l=new p(s,r),this.arrange(t,l),s+=t.Size.width+this.options.horizontalSeparation},layoutRadialTree:function(){var e,t;if(this.setChildrenDirection(this.center,"Radial",!1),this.setChildrenLayout(this.center,"Default",!1),this.previousRoot=null,e=this.options.startRadialAngle*m,t=this.options.endRadialAngle*m,e>=t)throw"Final angle should not be less than the start angle.";this.maxDepth=0,this.origin=new p(this.center.x,this.center.y),this.calculateAngularWidth(this.center,0),this.maxDepth>0&&this.radialLayout(this.center,this.options.radialFirstLevelSeparation,e,t),this.center.Angle=t-e},tipOverTree:function(e,t){var i,n,r,o,s,l,c;for(h.isUndefined(t)&&(t=0),this.setChildrenDirection(this.center,"Down",!1),this.setChildrenLayout(this.center,"Default",!1),this.setChildrenLayout(this.center,"Underneath",!1,t),i=0,o=0;e.length>o;o++)r=e[o],r.TreeDirection="Down",s=this.measure(r,a.Empty),i+=s.width+this.options.horizontalSeparation;for(i-=this.options.horizontalSeparation,i-=e[e.length-1].width,i+=e[e.length-1].associatedShape.bounds().width,l=this.center.x+this.center.width/2-i/2,n=this.center.y+this.options.verticalSeparation+this.center.height,o=0;e.length>o;o++)r=e[o],c=new p(l,n),this.arrange(r,c),l+=r.Size.width+this.options.horizontalSeparation},calculateAngularWidth:function(e,t){var i,n,r,o,s,a,l;if(t>this.maxDepth&&(this.maxDepth=t),i=0,n=1e3,r=1e3,o=0===t?0:Math.sqrt(n*n+r*r)/t,e.children.length>0){for(s=0,a=e.children.length;a>s;s++)l=e.children[s],i+=this.calculateAngularWidth(l,t+1);i=Math.max(o,i)}else i=o;return e.sectorAngle=i,i},sortChildren:function(e){var t,i,n,r,o,s,a,l,c,d,u,f=0;if(e.parents.length>1)throw"Node is not part of a tree.";if(i=e.parents[0],i&&(n=new p(i.x,i.y),r=new p(e.x,e.y),f=this.normalizeAngle(Math.atan2(n.y-r.y,n.x-r.x))),o=e.children.length,0===o)return null;for(s=[],a=[],t=0;o>t;++t)l=e.children[t],c=new p(l.x,l.y),a[t]=t,s[t]=this.normalizeAngle(-f+Math.atan2(c.y-c.y,c.x-c.x));for(h.bisort(s,a),d=[],u=e.children,t=0;o>t;++t)d.push(u[a[t]]);return d},normalizeAngle:function(e){for(;e>2*Math.PI;)e-=2*Math.PI;for(;0>e;)e+=2*Math.PI;return e},radialLayout:function(e,t,i,n){var r,o,s,a,l,c=n-i,d=c/2,u=e.sectorAngle,h=0,p=this.sortChildren(e);for(r=0,o=p.length;o>r;r++)s=p[r],a=s,l=a.sectorAngle/u,s.children.length>0&&this.radialLayout(s,t+this.options.radialSeparation,i+h*c,i+(h+l)*c),this.setPolarLocation(s,t,i+h*c+l*d),a.angle=l*c,h+=l},setPolarLocation:function(e,t,i){e.x=this.origin.x+t*Math.cos(i),e.y=this.origin.y+t*Math.sin(i),e.BoundingRectangle=new l(e.x,e.y,e.width,e.height)},setChildrenDirection:function(e,t,i){var n=e.treeDirection;this.graph.depthFirstTraversal(e,function(e){e.treeDirection=t}),i||(e.treeDirection=n)},setChildrenLayout:function(e,t,i,n){h.isUndefined(n)&&(n=0);var r=e.childrenLayout;n>0?(this.graph.assignLevels(e),this.graph.depthFirstTraversal(e,function(e){e.level>=n+1&&(e.childrenLayout=t)})):(this.graph.depthFirstTraversal(e,function(e){e.childrenLayout=t}),i||(e.childrenLayout=r))},measure:function(e,t){var i,n,r,o,s,l,c,d=0,u=0,p=new a(0,0);if(!e)throw"";if(n=e.associatedShape.bounds(),r=n.width,o=n.height,1!==e.parents.length)throw"Node not in a spanning tree.";if(s=e.parents[0],"Undefined"===e.treeDirection&&(e.treeDirection=s.treeDirection),h.isEmpty(e.children))p=new a(Math.abs(r)<f?50:r,Math.abs(o)<f?25:o);else if(1===e.children.length){switch(e.treeDirection){case"Radial":i=this.measure(e.children[0],t),d=r+this.options.radialSeparation*Math.cos(e.AngleToParent)+i.width,u=o+Math.abs(this.options.radialSeparation*Math.sin(e.AngleToParent))+i.height;
break;case"Left":case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":break;case"BottomAlignedWithParent":break;case"Underneath":i=this.measure(e.children[0],t),d=r+i.width+this.options.underneathHorizontalOffset,u=o+this.options.underneathVerticalTopOffset+i.height;break;case"Default":i=this.measure(e.children[0],t),d=r+this.options.horizontalSeparation+i.width,u=Math.max(o,i.height);break;default:throw"Unhandled TreeDirection in the Radial layout measuring."}break;case"Up":case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":i=this.measure(e.children[0],t),d=Math.max(r,i.width+this.options.underneathHorizontalOffset),u=o+this.options.underneathVerticalTopOffset+i.height;break;case"Default":i=this.measure(e.children[0],t),u=o+this.options.verticalSeparation+i.height,d=Math.max(r,i.width);break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}p=new a(d,u)}else{switch(e.treeDirection){case"Left":case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(d=r,u=o+this.options.underneathVerticalTopOffset,l=0;e.children.length>l;l++)c=e.children[l],i=this.measure(c,t),d=Math.max(d,i.width+this.options.underneathHorizontalOffset),u+=i.height+this.options.underneathVerticalSeparation;u-=this.options.underneathVerticalSeparation;break;case"Default":for(d=r,u=0,l=0;e.children.length>l;l++)c=e.children[l],i=this.measure(c,t),d=Math.max(d,r+this.options.horizontalSeparation+i.width),u+=i.height+this.options.verticalSeparation;u-=this.options.verticalSeparation;break;default:throw"Unhandled TreeDirection in the Right layout measuring."}break;case"Up":case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(d=r,u=o+this.options.underneathVerticalTopOffset,l=0;e.children.length>l;l++)c=e.children[l],i=this.measure(c,t),d=Math.max(d,i.width+this.options.underneathHorizontalOffset),u+=i.height+this.options.underneathVerticalSeparation;u-=this.options.underneathVerticalSeparation;break;case"Default":for(d=0,u=0,l=0;e.children.length>l;l++)c=e.children[l],i=this.measure(c,t),d+=i.width+this.options.horizontalSeparation,u=Math.max(u,i.height+this.options.verticalSeparation+o);d-=this.options.horizontalSeparation;break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}p=new a(d,u)}return e.SectorAngle=Math.sqrt(d*d/4+u*u/4),e.Size=p,p},arrange:function(e,t){var i,n,r,o,s,a,c,d,u=e.associatedShape.bounds(),m=u.width,g=u.height;if(h.isEmpty(e.children))e.x=t.x,e.y=t.y,e.BoundingRectangle=new l(t.x,t.y,m,g);else switch(e.treeDirection){case"Left":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(d=t,e.x=d.x,e.y=d.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),c=t.y+g+this.options.underneathVerticalTopOffset,i=0;o.children.length>i;i++)o=o.children[i],a=d.x-o.associatedShape.width-this.options.underneathHorizontalOffset,n=new p(a,c),this.arrange(o,n),c+=o.Size.height+this.options.underneathVerticalSeparation;break;case"Default":for(d=new p(t.x+e.Size.width-m,t.y+(e.Size.height-g)/2),e.x=d.x,e.y=d.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),a=d.x-this.options.horizontalSeparation,c=t.y,i=0;e.children.length>i;i++)o=e.children[i],n=new p(a-o.Size.width,c),this.arrange(o,n),c+=o.Size.height+this.options.verticalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"Right":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(d=t,e.x=d.x,e.y=d.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),a=t.x+m+this.options.underneathHorizontalOffset,c=t.y+g+this.options.underneathVerticalTopOffset,i=0;e.children.length>i;i++)o=e.children[i],n=new p(a,c),this.arrange(o,n),c+=o.Size.height+this.options.underneathVerticalSeparation;break;case"Default":for(d=new p(t.x,t.y+(e.Size.height-g)/2),e.x=d.x,e.y=d.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),a=t.x+m+this.options.horizontalSeparation,c=t.y,i=0;e.children.length>i;i++)o=e.children[i],n=new p(a,c),this.arrange(o,n),c+=o.Size.height+this.options.verticalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"Up":if(d=new p(t.x+(e.Size.width-m)/2,t.y+e.Size.height-g),e.x=d.x,e.y=d.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),Math.abs(d.x-t.x)<f){for(s=0,i=0;e.children.length>i;i++)r=e.children[i],s+=r.Size.width+this.options.horizontalSeparation;s-=this.options.horizontalSeparation,a=t.x+(m-s)/2}else a=t.x;for(i=0;e.children.length>i;i++)o=e.children[i],c=d.y-this.options.verticalSeparation-o.Size.height,n=new p(a,c),this.arrange(o,n),a+=o.Size.width+this.options.horizontalSeparation;break;case"Down":switch(e.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(d=t,e.x=d.x,e.y=d.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),a=t.x+this.options.underneathHorizontalOffset,c=t.y+g+this.options.underneathVerticalTopOffset,i=0;e.children.length>i;i++)o=e.children[i],n=new p(a,c),this.arrange(o,n),c+=o.Size.height+this.options.underneathVerticalSeparation;break;case"Default":if(d=new p(t.x+(e.Size.width-m)/2,t.y),e.x=d.x,e.y=d.y,e.BoundingRectangle=new l(e.x,e.y,e.width,e.height),Math.abs(d.x-t.x)<f){for(s=0,i=0;e.children.length>i;i++)r=e.children[i],s+=r.Size.width+this.options.horizontalSeparation;s-=this.options.horizontalSeparation,a=t.x+(m-s)/2}else a=t.x;for(i=0;e.children.length>i;i++)o=e.children[i],c=d.y+this.options.verticalSeparation+g,n=new p(a,c),this.arrange(o,n),a+=o.Size.width+this.options.horizontalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"None":break;default:throw"Unsupported TreeDirection"}},layoutSwitch:function(){var e,t,i,n,r,o;if(this.center&&!h.isEmpty(this.center.children))switch(e=this.options.subtype,h.isUndefined(e)&&(e="Down"),o=this.center.children,e.toLowerCase()){case"radial":case"radialtree":this.layoutRadialTree();break;case"mindmaphorizontal":case"mindmap":t=this.center.children,1===this.center.children.length?this.layoutRight(t):(r=o.length/2,i=v(this.center.children,function(e){return h.indexOf(o,e)<r}),n=v(this.center.children,function(e){return h.indexOf(o,e)>=r}),this.layoutLeft(i),this.layoutRight(n));break;case"mindmapvertical":t=this.center.children,1===this.center.children.length?this.layoutDown(t):(r=o.length/2,i=v(this.center.children,function(e){return h.indexOf(o,e)<r}),n=v(this.center.children,function(e){return h.indexOf(o,e)>=r}),this.layoutUp(i),this.layoutDown(n));break;case"right":this.layoutRight(this.center.children);break;case"left":this.layoutLeft(this.center.children);break;case"up":case"bottom":this.layoutUp(this.center.children);break;case"down":case"top":this.layoutDown(this.center.children);break;case"tipover":case"tipovertree":if(0>this.options.tipOverTreeStartLevel)throw"The tip-over level should be a positive integer.";this.tipOverTree(this.center.children,this.options.tipOverTreeStartLevel);break;case"undefined":case"none":}}}),k=y.extend({init:function(e){var t=this;if(y.fn.init.call(t),h.isUndefined(e))throw"No diagram specified.";this.diagram=e},layout:function(e){var t,n;return this.transferOptions(e),t=new _(this.diagram),this.graph=t.convert(),n=this.layoutComponents(),new i.LayoutState(this.diagram,n)},layoutComponents:function(){var e,t,i,n,r,o,s,a;if(!this.graph.isEmpty()&&(e=this.graph.getConnectedComponents(),!h.isEmpty(e))){for(t=new w(this.options),i=[],n=0;e.length>n;n++){if(r=e[n],o=this.getTree(r),!o)throw"Failed to find a spanning tree for the component.";s=o.root,a=o.tree,t.layout(a,s),i.push(a)}return this.gridLayoutComponents(i)}},getTree:function(e){var t,i,n,r,o,s=null;if(this.options.roots&&this.options.roots.length>0)for(t=0,i=e.nodes.length;i>t;t++)for(n=e.nodes[t],r=0;this.options.roots.length>r;r++)if(o=this.options.roots[r],o===n.associatedShape){s=n;break}if(!s&&(s=e.root(),!s))throw"Unable to find a root for the tree.";return this.getTreeForRoot(e,s)},getTreeForRoot:function(e,t){var i=e.getSpanningTree(t);return h.isUndefined(i)||i.isEmpty()?null:{tree:i,root:i.root}}}),x=y.extend({init:function(e){var t=this;if(y.fn.init.call(t),h.isUndefined(e))throw"Diagram is not specified.";this.diagram=e},layout:function(e){var t,n,r,o,s,a;if(this.transferOptions(e),t=new _(this.diagram),n=t.convert(e),!n.isEmpty()&&(r=n.getConnectedComponents(),!h.isEmpty(r))){for(o=0;r.length>o;o++)s=r[o],this.layoutGraph(s,e);return a=this.gridLayoutComponents(r),new i.LayoutState(this.diagram,a)}},_initRuntimeProperties:function(){var e,t;for(e=0;this.graph.nodes.length>e;e++)t=this.graph.nodes[e],t.layer=-1,t.downstreamLinkCount=0,t.upstreamLinkCount=0,t.isVirtual=!1,t.uBaryCenter=0,t.dBaryCenter=0,t.upstreamPriority=0,t.downstreamPriority=0,t.gridPosition=0},_prepare:function(e){var t,i,n,r,o,s,a,l,d,u,p,f,m=[];for(i=0;e.links.length>i;i++)e.links[i].depthOfDumminess=0;for(r=new c,h.forEach(e.nodes,function(e){0===e.incoming.length&&(r.set(e,0),m.push(e))});m.length>0;)for(o=m.shift(),t=0;o.outgoing.length>t;t++)n=o.outgoing[t],s=n.target,r.containsKey(s)?r.set(s,Math.max(r.get(o)+1,r.get(s))):r.set(s,r.get(o)+1),g(m,s)||m.push(s);for(a=0,r.forEachValue(function(e){a=Math.max(a,e)}),l=[],h.addRange(l,r.keys()),l.sort(function(e,t){var i=r.get(e),n=r.get(t);return h.sign(n-i)}),d=0;l.length>d;++d)if(u=l[d],p=Number.MAX_VALUE,0!==u.outgoing.length){for(i=0;u.outgoing.length>i;++i)n=u.outgoing[i],p=Math.min(p,r.get(n.target));p>1&&r.set(u,p-1)}for(this.layers=[],t=0;a+1>t;t++)this.layers.push([]);for(r.forEach(function(e,t){e.layer=t,this.layers[t].push(e)},this),i=0;this.layers.length>i;i++)for(f=this.layers[i],t=0;f.length>t;t++)f[t].gridPosition=t},layoutGraph:function(e,t){if(h.isUndefined(e))throw"No graph given or graph analysis of the diagram failed.";h.isDefined(t)&&this.transferOptions(t),this.graph=e,e.setItemIndices();var i=e.makeAcyclic();this._initRuntimeProperties(),this._prepare(e,t),this._dummify(),this._optimizeCrossings(),this._swapPairs(),this.arrangeNodes(),this._moveThingsAround(),this._dedummify(),h.forEach(i,function(e){e.points&&e.points.reverse()})},setMinDist:function(e,t,i){var n=e.layer,r=e.layerIndex;this.minDistances[n][r]=i},getMinDist:function(e,t){var i,n=0,r=e.layerIndex,o=t.layerIndex,s=e.layer,a=Math.min(r,o),l=Math.max(r,o);for(i=a;l>i;++i)n+=this.minDistances[s][i];return n},placeLeftToRight:function(e){var t,i,n,r,o,s,a,l,d,u,p=new c;for(n=0;this.layers.length>n;++n)if(r=e[n]){for(t=0;r.length>t;t++)i=r[t],p.containsKey(i)||this.placeLeft(i,p,n);for(o=Number.POSITIVE_INFINITY,t=0;r.length>t;t++)i=r[t],s=this.rightSibling(i),s&&this.nodeLeftClass.get(s)!==n&&(o=Math.min(o,p.get(s)-p.get(i)-this.getMinDist(i,s)));if(o===Number.POSITIVE_INFINITY){for(a=[],t=0;r.length>t;t++)for(i=r[t],l=[],h.addRange(l,this.upNodes.get(i)),h.addRange(l,this.downNodes.get(i)),d=0;l.length>d;d++)u=l[d],this.nodeLeftClass.get(u)<n&&a.push(p.get(u)-p.get(i));a.sort(),o=0===a.length?0:a.length%2===1?a[this.intDiv(a.length,2)]:(a[this.intDiv(a.length,2)-1]+a[this.intDiv(a.length,2)])/2}for(t=0;r.length>t;t++)i=r[t],p.set(i,p.get(i)+o)}return p},placeRightToLeft:function(e){var t,i,n,r,o,s,a,l,d,u,p=new c;for(n=0;this.layers.length>n;++n)if(r=e[n]){for(t=0;r.length>t;t++)i=r[t],p.containsKey(i)||this.placeRight(i,p,n);for(o=Number.NEGATIVE_INFINITY,t=0;r.length>t;t++)i=r[t],s=this.leftSibling(i),s&&this.nodeRightClass.get(s)!==n&&(o=Math.max(o,p.get(s)-p.get(i)+this.getMinDist(s,i)));if(o===Number.NEGATIVE_INFINITY){for(a=[],t=0;r.length>t;t++)for(i=r[t],l=[],h.addRange(l,this.upNodes.get(i)),h.addRange(l,this.downNodes.get(i)),d=0;l.length>d;d++)u=l[d],this.nodeRightClass.get(u)<n&&a.push(p.get(i)-p.get(u));a.sort(),o=0===a.length?0:a.length%2===1?a[this.intDiv(a.length,2)]:(a[this.intDiv(a.length,2)-1]+a[this.intDiv(a.length,2)])/2}for(t=0;r.length>t;t++)i=r[t],p.set(i,p.get(i)+o)}return p},_getLeftWing:function(){var e={value:null},t=this.computeClasses(e,1);return this.nodeLeftClass=e.value,t},_getRightWing:function(){var e={value:null},t=this.computeClasses(e,-1);return this.nodeRightClass=e.value,t},computeClasses:function(e,t){var i,n,r,o,s,a,l,d,u,h=0,p=e.value=new c;for(i=0;this.layers.length>i;++i)for(h=i,n=this.layers[i],r=1===t?0:n.length-1;r>=0&&n.length>r;r+=t)if(o=n[r],p.containsKey(o))h=p.get(o);else if(p.set(o,h),o.isVirtual)for(s=this._nodesInLink(o),a=0;s.length>a;a++)l=s[a],p.set(l,h);for(d=[],u=0;this.layers.length>u;u++)d.push(null);return p.forEach(function(e,t){null===d[t]&&(d[t]=[]),d[t].push(e)}),d},_isVerticalLayout:function(){return"up"===this.options.subtype.toLowerCase()||"down"===this.options.subtype.toLowerCase()||"vertical"===this.options.subtype.toLowerCase()},_isHorizontalLayout:function(){return"right"===this.options.subtype.toLowerCase()||"left"===this.options.subtype.toLowerCase()||"horizontal"===this.options.subtype.toLowerCase()},_isIncreasingLayout:function(){return"right"===this.options.subtype.toLowerCase()||"down"===this.options.subtype.toLowerCase()},_moveThingsAround:function(){function e(e,t){var i,n,r=Number.MIN_VALUE;for(i=0;e.length>i;++i)n=e[i],r=t._isVerticalLayout()?Math.max(r,n.height):Math.max(r,n.width);return r}var t,i,n,r,o,s,a,l,d,u,p,f,m,g,v,y,_,b,w,k,x,C,S,T,D,M,A;for(i=0;this.layers.length>i;++i)r=this.layers[i],r.sort(this._gridPositionComparer);for(this.minDistances=[],i=0;this.layers.length>i;++i)for(r=this.layers[i],this.minDistances[i]=[],o=0;r.length>o;++o)n=r[o],n.layerIndex=o,this.minDistances[i][o]=this.options.nodeDistance,r.length-1>o&&(this.minDistances[i][o]+=this._isVerticalLayout()?(n.width+r[o+1].width)/2:(n.height+r[o+1].height)/2);for(this.downNodes=new c,this.upNodes=new c,h.forEach(this.graph.nodes,function(e){this.downNodes.set(e,[]),this.upNodes.set(e,[])},this),h.forEach(this.graph.links,function(e){var t=e.source,i=e.target,n=null,r=null;t.layer>i.layer?(n=e.source,r=e.target):(r=e.source,n=e.target),this.downNodes.get(r).push(n),this.upNodes.get(n).push(r)},this),this.downNodes.forEachValue(function(e){e.sort(this._gridPositionComparer)},this),this.upNodes.forEachValue(function(e){e.sort(this._gridPositionComparer)},this),i=0;this.layers.length-1>i;++i)for(r=this.layers[i],s=0;r.length-1>s;s++)if(a=r[s],a.isVirtual&&(l=this.downNodes.get(a)[0],l.isVirtual))for(o=s+1;r.length>o;++o)n=r[o],n.isVirtual&&(d=this.downNodes.get(n)[0],d.isVirtual&&l.gridPosition>d.gridPosition&&(u=l.gridPosition,l.gridPosition=d.gridPosition,d.gridPosition=u,p=l.layerIndex,f=d.layerIndex,this.layers[i+1][p]=d,this.layers[i+1][f]=l,l.layerIndex=f,d.layerIndex=p));for(m=this._getLeftWing(),g=this._getRightWing(),v=this.placeLeftToRight(m),y=this.placeRightToLeft(g),_=new c,h.forEach(this.graph.nodes,function(e){_.set(e,(v.get(e)+y.get(e))/2)}),b=new c,w=new c,i=0;this.layers.length>i;++i)for(r=this.layers[i],k=-1,x=-1,o=0;r.length>o;++o)n=r[o],b.set(n,0),w.set(n,!1),n.isVirtual&&(-1===k?k=o:k===o-1?k=o:(x=o,b.set(r[k],0),_.get(n)-_.get(r[k])===this.getMinDist(r[k],n)?w.set(r[k],!0):w.set(r[k],!1),k=o));for(C=[1,-1],h.forEach(C,function(e){var i,n,r,o,s,a,l,c=1===e?0:this.layers.length-1;for(i=c;i>=0&&this.layers.length>i;i+=e){if(n=this.layers[i],r=this._firstVirtualNode(n),o=null,s=null,-1!==r)for(o=n[r],s=[],t=0;r>t;t++)s.push(n[t]);else o=null,s=n;if(s.length>0){for(this._sequencer(_,null,o,e,s),t=0;s.length-1>t;++t)this.setMinDist(s[t],s[t+1],_.get(s[t+1])-_.get(s[t]));o&&this.setMinDist(s[s.length-1],o,_.get(o)-_.get(s[s.length-1]))}for(;o;){if(a=this.nextVirtualNode(n,o)){if(b.get(o)===e){for(r=o.layerIndex,l=a.layerIndex,s=[],t=r+1;l>t;t++)s.push(n[t]);s.length>0&&this._sequencer(_,o,a,e,s),w.set(o,!0)}}else{for(r=o.layerIndex,s=[],t=r+1;n.length>t;t++)s.push(n[t]);if(s.length>0){for(this._sequencer(_,o,null,e,s),t=0;s.length-1>t;++t)this.setMinDist(s[t],s[t+1],_.get(s[t+1])-_.get(s[t]));this.setMinDist(o,s[0],_.get(s[0])-_.get(o))}}o=a}this.adjustDirections(i,e,b,w)}},this),S=this._isIncreasingLayout()?0:this.layers.length-1,T=function(e,t){return t._isIncreasingLayout()?t.layers.length>e:e>=0},D=this._isIncreasingLayout()?1:-1,M=0,t=S;T(t,this);t+=D){for(r=this.layers[t],A=e(r,this),o=0;r.length>o;++o)n=r[o],this._isVerticalLayout()?(n.x=_.get(n),n.y=M+A/2):(n.x=M+A/2,n.y=_.get(n));M+=this.options.layerSeparation+A}},adjustDirections:function(e,t,i,n){var r,o,s,a,l,c,d,u,h,p,f,m,g,v;if(!(0>e+t||e+t>=this.layers.length))for(r=null,o=null,s=this.layers[e+t],a=0;s.length>a;++a)if(l=s[a],l.isVirtual&&(c=this.getNeighborOnLayer(l,e),c.isVirtual)){if(r){for(d=n.get(o),u=this.layers[e],h=o.layerIndex,p=c.layerIndex,f=h+1;p>f;++f)u[f].isVirtual&&(d=d&&n.get(u[f]));if(d)for(i.set(r,t),m=r.layerIndex,g=l.layerIndex,v=m+1;g>v;++v)s[v].isVirtual&&i.set(s[v],t)}r=l,o=c}},getNeighborOnLayer:function(e,t){var i=this.upNodes.get(e)[0];return i.layer===t?i:(i=this.downNodes.get(e)[0],i.layer===t?i:null)},_sequencer:function(e,t,i,n,r){if(1===r.length&&this._sequenceSingle(e,t,i,n,r[0]),r.length>1){var o=r.length,s=this.intDiv(o,2);this._sequencer(e,t,i,n,r.slice(0,s)),this._sequencer(e,t,i,n,r.slice(s)),this.combineSequences(e,t,i,n,r)}},_sequenceSingle:function(e,t,i,n,r){var o=-1===n?this.downNodes.get(r):this.upNodes.get(r),s=o.length;0!==s&&(s%2===1?e.set(r,e.get(o[this.intDiv(s,2)])):e.set(r,(e.get(o[this.intDiv(s,2)-1])+e.get(o[this.intDiv(s,2)]))/2),t&&e.set(r,Math.max(e.get(r),e.get(t)+this.getMinDist(t,r))),i&&e.set(r,Math.min(e.get(r),e.get(i)-this.getMinDist(r,i))))},combineSequences:function(e,t,i,n,r){var o,s,a,l,c,d,u,h,p,f,m=r.length,g=this.intDiv(m,2),v=[];for(o=0;g>o;++o){for(s=0,l=-1===n?this.downNodes.get(r[o]):this.upNodes.get(r[o]),a=0;l.length>a;++a)c=l[a],e.get(c)>=e.get(r[o])?s++:(s--,v.push({k:e.get(c)+this.getMinDist(r[o],r[g-1]),v:2}));v.push({k:e.get(r[o])+this.getMinDist(r[o],r[g-1]),v:s})}for(t&&v.push({k:e.get(t)+this.getMinDist(t,r[g-1]),v:Number.MAX_VALUE}),v.sort(this._positionDescendingComparer),u=[],o=g;m>o;++o){for(s=0,l=-1===n?this.downNodes.get(r[o]):this.upNodes.get(r[o]),a=0;l.length>a;++a)c=l[a],e.get(c)<=e.get(r[o])?s++:(s--,u.push({k:e.get(c)-this.getMinDist(r[o],r[g]),v:2}));u.push({k:e.get(r[o])-this.getMinDist(r[o],r[g]),v:s})}for(i&&u.push({k:e.get(i)-this.getMinDist(i,r[g]),v:Number.MAX_VALUE}),u.sort(this._positionAscendingComparer),h=0,p=0,f=this.getMinDist(r[g-1],r[g]);e.get(r[g])-e.get(r[g-1])<f;)if(p>h){if(0===v.length){e.set(r[g-1],e.get(r[g])-f);break}d=v.shift(),h+=d.v,e.set(r[g-1],d.k),e.set(r[g-1],Math.max(e.get(r[g-1]),e.get(r[g])-f))}else{if(0===u.length){e.set(r[g],e.get(r[g-1])+f);break}d=u.shift(),p+=d.v,e.set(r[g],d.k),e.set(r[g],Math.min(e.get(r[g]),e.get(r[g-1])+f))}for(o=g-2;o>=0;o--)e.set(r[o],Math.min(e.get(r[o]),e.get(r[g-1])-this.getMinDist(r[o],r[g-1])));for(o=g+1;m>o;o++)e.set(r[o],Math.max(e.get(r[o]),e.get(r[g])+this.getMinDist(r[o],r[g])))},placeLeft:function(e,t,i){var n=Number.NEGATIVE_INFINITY;h.forEach(this._getComposite(e),function(e){var r=this.leftSibling(e);r&&this.nodeLeftClass.get(r)===this.nodeLeftClass.get(e)&&(t.containsKey(r)||this.placeLeft(r,t,i),n=Math.max(n,t.get(r)+this.getMinDist(r,e)))},this),n===Number.NEGATIVE_INFINITY&&(n=0),h.forEach(this._getComposite(e),function(e){t.set(e,n)})},placeRight:function(e,t,i){var n=Number.POSITIVE_INFINITY;h.forEach(this._getComposite(e),function(e){var r=this.rightSibling(e);r&&this.nodeRightClass.get(r)===this.nodeRightClass.get(e)&&(t.containsKey(r)||this.placeRight(r,t,i),n=Math.min(n,t.get(r)-this.getMinDist(e,r)))},this),n===Number.POSITIVE_INFINITY&&(n=0),h.forEach(this._getComposite(e),function(e){t.set(e,n)})},leftSibling:function(e){var t=this.layers[e.layer],i=e.layerIndex;return 0===i?null:t[i-1]},rightSibling:function(e){var t=this.layers[e.layer],i=e.layerIndex;return i===t.length-1?null:t[i+1]},_getComposite:function(e){return e.isVirtual?this._nodesInLink(e):[e]},arrangeNodes:function(){var e,t,i,n,r,o,s,a;for(t=0;this.layers.length>t;t++)for(n=this.layers[t],i=0;n.length>i;i++)r=n[i],r.upstreamPriority=r.upstreamLinkCount,r.downstreamPriority=r.downstreamLinkCount;for(o=2,s=0;o>s;s++){for(e=this.layers.length-1;e>=1;e--)this.layoutLayer(!1,e);for(e=0;this.layers.length-1>e;e++)this.layoutLayer(!0,e)}for(a=Number.MAX_VALUE,t=0;this.layers.length>t;t++)for(n=this.layers[t],i=0;n.length>i;i++)r=n[i],a=Math.min(a,r.gridPosition);if(0>a)for(t=0;this.layers.length>t;t++)for(n=this.layers[t],i=0;n.length>i;i++)r=n[i],r.gridPosition=r.gridPosition-a},layoutLayer:function(e,t){var i,n,r,o;for(n=e?this.layers[i=t+1]:this.layers[i=t-1],r=[],o=0;n.length>o;o++)r.push(n[o]);r.sort(function(e,t){var i=(e.upstreamPriority+e.downstreamPriority)/2,n=(t.upstreamPriority+t.downstreamPriority)/2;return Math.abs(i-n)<1e-4?0:n>i?1:-1}),h.forEach(r,function(e){var t=e.gridPosition,i=this.calcBaryCenter(e),r=(e.upstreamPriority+e.downstreamPriority)/2;if(!(Math.abs(t-i)<1e-4||Math.abs(t-i)<.2501))if(i>t)for(;i>t&&this.moveRight(e,n,r);)t=e.gridPosition;else for(;t>i&&this.moveLeft(e,n,r);)t=e.gridPosition},this),i>0&&this.calcDownData(i-1),this.layers.length-1>i&&this.calcUpData(i+1)},moveRight:function(e,t,i){var n,r,o=h.indexOf(t,e);return o===t.length-1?(e.gridPosition=e.gridPosition+.5,!0):(n=t[o+1],r=(n.upstreamPriority+n.downstreamPriority)/2,n.gridPosition>e.gridPosition+1?(e.gridPosition=e.gridPosition+.5,!0):!(r>i||Math.abs(r-i)<1e-4)&&(!!this.moveRight(n,t,i)&&(e.gridPosition=e.gridPosition+.5,!0)))},moveLeft:function(e,t,i){var n,r,o=h.indexOf(t,e);return 0===o?(e.gridPosition=e.gridPosition-.5,!0):(n=t[o-1],r=(n.upstreamPriority+n.downstreamPriority)/2,e.gridPosition-1>n.gridPosition?(e.gridPosition=e.gridPosition-.5,!0):!(r>i||Math.abs(r-i)<1e-4)&&(!!this.moveLeft(n,t,i)&&(e.gridPosition=e.gridPosition-.5,!0)))},mapVirtualNode:function(e,t){this.nodeToLinkMap.set(e,t),this.linkToNodeMap.containsKey(t)||this.linkToNodeMap.set(t,[]),this.linkToNodeMap.get(t).push(e)},_nodesInLink:function(e){return this.linkToNodeMap.get(this.nodeToLinkMap.get(e))},_dummify:function(){var e,t,i,n,s,a,l,d,u,p,f,m,g,v,y,_,b,w;for(this.linkToNodeMap=new c,this.nodeToLinkMap=new c,u=this.graph.links.slice(0),d=0;u.length>d;d++){if(p=u[d],f=p.source,m=p.target,g=f.layer,v=m.layer,y=f.gridPosition,_=m.gridPosition,b=(_-y)/Math.abs(v-g),w=f,g-v>1){for(l=g-1;l>v;l--){for(i=new r,i.x=f.x,i.y=f.y,i.width=f.width/100,i.height=f.height/100,e=this.layers[l],t=(l-v)*b+y,t>e.length&&(t=e.length),y>=this.layers[g].length-1&&_>=this.layers[v].length-1?t=e.length:0===y&&0===_&&(t=0),i.layer=l,i.uBaryCenter=0,i.dBaryCenter=0,i.upstreamLinkCount=0,i.downstreamLinkCount=0,i.gridPosition=t,i.isVirtual=!0,h.insert(e,i,t),s=t+1;e.length>s;s++)n=e[s],n.gridPosition=n.gridPosition+1;a=new o(w,i),a.depthOfDumminess=0,w=i,this.graph.nodes.push(i),this.graph.addLink(a),i.index=this.graph.nodes.length-1,this.mapVirtualNode(i,p)}p.changeSource(w),p.depthOfDumminess=g-v-1}if(-1>g-v){for(l=g+1;v>l;l++){for(i=new r,i.x=f.x,i.y=f.y,i.width=f.width/100,i.height=f.height/100,e=this.layers[l],t=(l-g)*b+y,t>e.length&&(t=e.length),y>=this.layers[g].length-1&&_>=this.layers[v].length-1?t=e.length:0===y&&0===_&&(t=0),i.layer=l,i.uBaryCenter=0,i.dBaryCenter=0,i.upstreamLinkCount=0,i.downstreamLinkCount=0,i.gridPosition=t,i.isVirtual=!0,t&=t,h.insert(e,i,t),s=t+1;e.length>s;s++)n=e[s],n.gridPosition=n.gridPosition+1;a=new o(w,i),a.depthOfDumminess=0,w=i,this.graph.nodes.push(i),this.graph.addLink(a),i.index=this.graph.nodes.length-1,this.mapVirtualNode(i,p)}p.changeSource(w),p.depthOfDumminess=v-g-1}}},_dedummify:function(){for(var e,t,i,n,r,o,s,a,l=!0;l;)for(l=!1,e=0;this.graph.links.length>e;e++)if(t=this.graph.links[e],0!==t.depthOfDumminess){for(i=[],i.unshift({x:t.target.x,y:t.target.y}),i.unshift({x:t.source.x,y:t.source.y}),n=t,r=t.depthOfDumminess,o=0;r>o;o++)s=n.source,a=s.incoming[0],i.unshift({x:a.source.x,y:a.source.y}),n=a;t.changeSource(n.source),t.depthOfDumminess=0,i.length>2?(i.splice(0,1),i.splice(i.length-1),t.points=i):t.points=[],l=!0;break}},_optimizeCrossings:function(){for(var e,t=-1,i=3,n=0;0!==t&&!(n++>i);){for(t=0,e=this.layers.length-1;e>=1;e--)t+=this.optimizeLayerCrossings(!1,e);for(e=0;this.layers.length-1>e;e++)t+=this.optimizeLayerCrossings(!0,e)}},calcUpData:function(e){var t,i,n,r,o,s,a,l,c;if(0!==e){for(t=this.layers[e],o=new d,s=this.layers[e-1],i=0;s.length>i;i++)o.add(s[i]);for(i=0;t.length>i;i++){for(a=t[i],l=0,c=0,n=0;a.incoming.length>n;n++)r=a.incoming[n],o.contains(r.source)&&(c++,l+=r.source.gridPosition);for(n=0;a.outgoing.length>n;n++)r=a.outgoing[n],o.contains(r.target)&&(c++,l+=r.target.gridPosition);c>0?(a.uBaryCenter=l/c,a.upstreamLinkCount=c):(a.uBaryCenter=i,a.upstreamLinkCount=0)}}},calcDownData:function(e){var t,i,n,r,o,s,a,l,c;if(e!==this.layers.length-1){for(t=this.layers[e],o=new d,s=this.layers[e+1],i=0;s.length>i;i++)o.add(s[i]);for(i=0;t.length>i;i++){for(a=t[i],l=0,c=0,n=0;a.incoming.length>n;n++)r=a.incoming[n],o.contains(r.source)&&(c++,l+=r.source.gridPosition);for(n=0;a.outgoing.length>n;n++)r=a.outgoing[n],o.contains(r.target)&&(c++,l+=r.target.gridPosition);c>0?(a.dBaryCenter=l/c,a.downstreamLinkCount=c):(a.dBaryCenter=i,a.downstreamLinkCount=0)}}},optimizeLayerCrossings:function(e,t){var i,n,r,o,s,a,l,c;for(n=e?this.layers[i=t+1]:this.layers[i=t-1],r=n.slice(0),e?this.calcUpData(i):this.calcDownData(i),o=this,n.sort(function(e,t){var i,n=o.calcBaryCenter(e),r=o.calcBaryCenter(t);return Math.abs(n-r)<1e-4?e.degree()===t.degree()?o.compareByIndex(e,t):e.degree()<t.degree()?1:-1:(i=1e3*(r-n),i>0?-1:0>i?1:o.compareByIndex(e,t))}),a=0,s=0;n.length>s;s++)n[s]!==r[s]&&a++;if(a>0)for(l=0,s=0;n.length>s;s++)c=n[s],c.gridPosition=l++;return a},_swapPairs:function(){for(var e,t,i,n,r,o,s,a,l,c,d,u,h,p,f,m,g,v=this.options.layeredIterations,y=0;!(y++>v);)for(e=1>=y%4,t=y%4===1,i=e?0:this.layers.length-1;e?this.layers.length-1>=i:i>=0;i+=e?1:-1){for(n=this.layers[i],r=!1,o=!0,s=0,a=0;n.length-1>a;a++)l=0,c=0,d=0,o?(0!==i&&(l=this.countLinksCrossingBetweenTwoLayers(i-1,i)),i!==this.layers.length-1&&(c=this.countLinksCrossingBetweenTwoLayers(i,i+1)),e?l*=2:c*=2,d=l+c):d=s,0!==d&&(u=n[a],h=n[a+1],p=u.gridPosition,f=h.gridPosition,n[a]=h,n[a+1]=u,u.gridPosition=f,h.gridPosition=p,l=0,0!==i&&(l=this.countLinksCrossingBetweenTwoLayers(i-1,i)),c=0,i!==this.layers.length-1&&(c=this.countLinksCrossingBetweenTwoLayers(i,i+1)),e?l*=2:c*=2,m=l+c,g=!1,g=t?m>=d:m>d,g?(u=n[a],h=n[a+1],p=u.gridPosition,f=h.gridPosition,n[a]=h,n[a+1]=u,u.gridPosition=f,h.gridPosition=p,s=d,o=!1):(r=!0,o=!0));r&&(i!==this.layers.length-1&&this.calcUpData(i+1),0!==i&&this.calcDownData(i-1))}},countLinksCrossingBetweenTwoLayers:function(e,t){var i,n,r,o,s,a,l,c,u,p,f,m,g,v,y,_,b,w,k,x,C=0,S=new d,T=this.layers[e];for(i=0;T.length>i;i++)S.add(T[i]);for(n=new d,r=this.layers[t],i=0;r.length>i;i++)n.add(r[i]);for(o=new d,s=[],a=[],S.forEach(function(e){h.addRange(a,e.incoming),h.addRange(a,e.outgoing)}),l=0;a.length>l;l++)c=a[l],S.contains(c.source)&&n.contains(c.target)?(o.add(c),s.push(c)):n.contains(c.source)&&S.contains(c.target)&&s.push(c);for(u=0;s.length>u;u++)for(p=s[u],f=0;s.length>f;f++)u!==f&&(m=s[f],o.contains(p)?(g=p.source,v=p.target):(g=p.target,v=p.source),o.contains(m)?(y=m.source,_=m.target):(y=m.target,_=m.source),b=g.gridPosition,w=v.gridPosition,k=y.gridPosition,x=_.gridPosition,0>(b-k)*(w-x)&&C++);return C/2},calcBaryCenter:function(e){var t=e.upstreamLinkCount,i=e.downstreamLinkCount,n=e.uBaryCenter,r=e.dBaryCenter;return t>0&&i>0?(n+r)/2:t>0?n:i>0?r:0},_gridPositionComparer:function(e,t){return t.gridPosition>e.gridPosition?-1:e.gridPosition>t.gridPosition?1:0},_positionAscendingComparer:function(e,t){return t.k>e.k?-1:e.k>t.k?1:0},_positionDescendingComparer:function(e,t){return t.k>e.k?1:e.k>t.k?-1:0},_firstVirtualNode:function(e){for(var t=0;e.length>t;t++)if(e[t].isVirtual)return t;return-1},compareByIndex:function(e,t){var i=e.index,n=t.index;return n>i?1:i>n?-1:0},intDiv:function(e,t){return(e-e%t)/t},nextVirtualNode:function(e,t){var i,n=t.layerIndex;for(i=n+1;e.length>i;++i)if(e[i].isVirtual)return e[i];return null}}),C=t.Class.extend({init:function(e,t){if(h.isUndefined(e))throw"No diagram given";this.diagram=e,this.nodeMap=new c,this.linkMap=new c,this.capture(t?t:e)},capture:function(e){var t,n,r,o,s,a,c,d,u;if(e instanceof i.Graph){for(o=0;e.nodes.length>o;o++)t=e.nodes[o],r=t.associatedShape,this.nodeMap.set(r.visual.id,new l(t.x,t.y,t.width,t.height));for(o=0;e.links.length>o;o++)a=e.links[o],s=a.associatedConnection,this.linkMap.set(s.visual.id,a.points())}else if(e instanceof Array)for(n=e,o=0;n.length>o;o++)t=n[o],r=t.associatedShape,r&&this.nodeMap.set(r.visual.id,new l(t.x,t.y,t.width,t.height));else if(e.hasOwnProperty("links")&&e.hasOwnProperty("nodes")){for(n=e.nodes,c=e.links,o=0;n.length>o;o++)t=n[o],r=t.associatedShape,r&&this.nodeMap.set(r.visual.id,new l(t.x,t.y,t.width,t.height));for(o=0;c.length>o;o++)a=c[o],s=a.associatedConnection,s&&this.linkMap.set(s.visual.id,a.points)}else{for(d=this.diagram.shapes,u=this.diagram.connections,o=0;d.length>o;o++)r=d[o],this.nodeMap.set(r.visual.id,r.bounds());for(o=0;u.length>o;o++)s=u[o],this.linkMap.set(s.visual.id,s.points())}}});s(i,{init:function(e){t.init(e,i.ui)},SpringLayout:b,TreeLayout:k,GraphAdapter:_,LayeredLayout:x,LayoutBase:y,LayoutState:C})}(window.kendo.jQuery),function(e,t){function i(e){var t=e.originalEvent,i=0;return t.wheelDelta?(i=-t.wheelDelta/40,i=i>0?ce.ceil(i):ce.floor(i)):t.detail&&(i=t.detail),i}function n(e){return e.options.name.toLowerCase()===ge.toLowerCase()}function r(e){var t,i,r,s,a,l,c,d,u,p,f=we,m=e.source(),g=e.target(),v=[0,2,3,1,4];if(m instanceof L?t=m:m instanceof h&&(n(m)?r=m.shape:(e._resolvedSourceConnector=m,t=m.position())),g instanceof L?i=g:g instanceof h&&(n(g)?s=g.shape:(e._resolvedTargetConnector=g,i=g.position())),t)s&&(e._resolvedTargetConnector=o(t,s));else if(r)if(i)e._resolvedSourceConnector=o(i,r);else if(s)for(c=0;r.connectors.length>c;c++)l=5==r.connectors.length?v[c]:c,a=r.connectors[l],n(a)||(d=a.position(),u=o(d,s),p=ce.round(u.position().distanceTo(d)),f>p&&(f=p,e._resolvedSourceConnector=a,e._resolvedTargetConnector=u))}function o(e,t){var i,r,o,s,a=we,l=t.connectors;for(r=0;l.length>r;r++)o=l[r],n(o)||(s=e.distanceTo(o.position()),a>s&&(a=s,i=o));return i}function s(e,t){var i,n,r,o=[],s=e.drawingContainer().children,a=s.length;for(i=0;t.length>i;i++)for(n=t[i],r=0;a>r;r++)if(s[r]==n.drawingContainer()){o.push(r);break}return o}function a(e){var t={};return e=e||{},re(e.text)&&null!==e.text&&(t.text=e.text),re(e.x)&&null!==e.x&&(t.x=e.x),re(e.y)&&null!==e.y&&(t.y=e.y),re(e.width)&&null!==e.width&&(t.width=e.width),re(e.height)&&null!==e.height&&(t.height=e.height),re(e.type)&&null!==e.type&&(t.type=e.type),t}function l(e){var t={};return e=e||{},re(e.text)&&null!==e.text&&(t.content=e.text),re(e.type)&&null!==e.type&&(t.type=e.type),re(e.from)&&null!==e.from&&(t.from=e.from),re(e.fromX)&&null!==e.fromX&&(t.fromX=e.fromX),re(e.fromY)&&null!==e.fromY&&(t.fromY=e.fromY),re(e.to)&&null!==e.to&&(t.to=e.to),re(e.toX)&&null!==e.toX&&(t.toX=e.toX),re(e.toY)&&null!==e.toY&&(t.toY=e.toY),t}function c(t,i){var n=this.dataSource.reader.model,r=n.fn.fields.text?"text":n.idField;e("<input name='"+i.field+"' />").appendTo(t).kendoDropDownList({dataValueField:n.idField,dataTextField:r,dataSource:this.dataSource.data().toJSON(),optionLabel:" "})}var d,u,h,p,f,m,g,v,y,_=kendo.dataviz,b=kendo.drawing,w=kendo.geometry,k=_.diagram,x=kendo.ui.Widget,C=kendo.Class,S=e.proxy,T=kendo.deepExtend,D=e.extend,M=kendo.data.HierarchicalDataSource,A=k.Canvas,E=k.Group,I=k.Rectangle,P=k.Circle,F=k.CompositeTransform,z=k.Rect,H=k.Path,R=k.DeleteShapeUnit,N=k.DeleteConnectionUnit,$=k.TextBlock,O=k.Image,L=k.Point,B=k.Intersect,U=k.ConnectionEditAdorner,V=k.UndoRedoService,W=k.ToolService,j=k.Selector,q=k.ResizingAdorner,G=k.ConnectorsAdorner,Y=k.Cursors,Q=k.Utils,K=kendo.Observable,X=k.ToBackUnit,Z=k.ToFrontUnit,J=k.Dictionary,ee=k.PolylineRouter,te=k.CascadingRouter,ie=Q.isUndefined,ne=Q.isDefined,re=kendo.util.defined,oe=e.isArray,se=kendo.isFunction,ae=Q.isString,le=e.isPlainObject,ce=Math,de=".kendoDiagram",ue="cascading",he="itemBoundsChange",pe="change",fe="click",me="error",ge="Auto",ve="Top",ye="Right",_e="Left",be="Bottom",we=9007199254740992,ke="select",xe="itemRotate",Ce="pan",Se="zoomStart",Te="zoomEnd",De="none",Me=600,Ae=600,Ee="rectangle",Ie=100,Pe=100,Fe=20,ze=20,He=0,Re="Yellow",Ne=Number.MAX_VALUE,$e=-Number.MAX_VALUE,Oe="absolute",Le="transformed",Be="rotated",Ue="transparent",Ve="width",We="height",je="x",qe="y",Ge="DOMMouseScroll"+de+" mousewheel"+de,Ye=.05,Qe=5,Ke='<a class="k-button k-button-icontext #=className#" href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>';
k.DefaultConnectors=[{name:ve,description:"Top Connector"},{name:ye,description:"Right Connector"},{name:be,description:"Bottom Connector"},{name:_e,Description:"Left Connector"},{name:ge,Description:"Auto Connector",position:function(e){return e.getPosition("center")}}],d={cancel:{text:"Cancel",imageClass:"k-cancel",className:"k-diagram-cancel",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-diagram-update",iconClass:"k-icon"}},k.shapeDefaults=function(e){var t={type:Ee,path:"",autoSize:!0,visual:null,x:He,y:He,minWidth:Fe,minHeight:ze,width:Ie,height:Pe,hover:{},editable:{connect:!0,tools:[]},connectors:k.DefaultConnectors,rotation:{angle:0}};return Q.simpleExtend(t,e),t},u=K.extend({init:function(e){var t=this;t.dataItem=(e||{}).dataItem,K.fn.init.call(t),t.options=T({id:k.randomId()},t.options,e),t.dataItem&&(t.options.dataItem=t.dataItem),t.isSelected=!1,t.visual=new E({id:t.options.id,autoSize:t.options.autoSize}),t._template()},options:{hover:{},cursor:Y.grip,content:{align:"center middle"},selectable:!0,serializable:!0,enable:!0},_getCursor:function(e){return this.adorner?this.adorner._getCursor(e):this.options.cursor},visible:function(e){return ie(e)?this.visual.visible():(this.visual.visible(e),t)},bounds:function(){},refresh:function(){this.visual.redraw()},position:function(e){this.options.x=e.x,this.options.y=e.y,this.visual.position(e)},toString:function(){return this.options.id},serialize:function(){var e=T({},{options:this.options});return this.options.dataItem&&(e.dataItem=""+this.options.dataItem),e},_content:function(e){var i,n,r,o;return e!==t&&(i=this.options,n=this.bounds(),k.Utils.isString(e)?i.content.text=e:T(i.content,e),r=i.content,o=this._contentVisual,!o&&r.text?(this._contentVisual=new $(r),this._contentVisual._includeInBBox=!1,this.visual.append(this._contentVisual)):o&&o.redraw(r)),this.options.content.text},_hitTest:function(e){var t=this.bounds();return this.visible()&&t.contains(e)&&this.options.enable},_template:function(){var e,t,i=this;i.options.content.template&&(e=i.options.dataItem||{},t=kendo.template(i.options.content.template,{paramName:"dataItem"}),i.options.content.text=t(e))},_canSelect:function(){return this.options.selectable!==!1},toJSON:function(){return{id:this.options.id}}}),h=C.extend({init:function(e,t){this.options=T({},this.options,t),this.connections=[],this.shape=e},options:{width:7,height:7,fill:{color:Re},hover:{}},position:function(){return this.options.position?this.options.position(this.shape):this.shape.getPosition(this.options.name)},toJSON:function(){return{shapeId:""+this.shape,connector:this.options.name}}}),h.parse=function(e,t){var i,n,r=t.split(":"),o=r[0],s=r[1]||ge;for(i=0;e.shapes.length>i;i++)if(n=e.shapes[i],n.options.id==o)return n.getConnector(s.trim())},p=u.extend({init:function(e){var i=this;u.fn.init.call(i,e),this.updateOptionsFromModel(),e=i.options,i.connectors=[],i.type=e.type,i.shapeVisual=p.createShapeVisual(i.options),i.visual.append(this.shapeVisual),i.updateBounds(),i.content(i.content()),i._createConnectors(),i.parentContainer=null,i.isContainer=!1,i.isCollapsed=!1,i.id=i.visual.id,e.hasOwnProperty("layout")&&e.layout!==t&&(i.layout=e.layout.bind(e))},options:k.shapeDefaults(),updateOptionsFromModel:function(e,t){if(this.diagram&&this.diagram._isEditable){var i=a(e||this.options.dataItem);e?t&&!_.inArray(t,["x","y","width","height"])&&(this.options.visual?this.redrawVisual():i.type&&(this.options=T({},this.options,i),this.redrawVisual()),this.options.content&&(this._template(),this.content(this.options.content))):this.options=T({},this.options,i)}},redrawVisual:function(){this.visual.clear(),this._contentVisual=null,this.shapeVisual=p.createShapeVisual(this.options),this.visual.append(this.shapeVisual),this.updateBounds()},updateModel:function(){var e,t;this.diagram&&this.diagram._isEditable&&(e=this._bounds,this.options.dataItem&&(t=this.diagram.dataSource.getByUid(this.options.dataItem.uid)),t&&(re(t.x)&&e.x!==t.x&&t.set("x",e.x),re(t.y)&&e.y!==t.y&&t.set("y",e.y),re(t.width)&&e.width!==t.width&&t.set("width",e.width),re(t.height)&&e.height!==t.height&&t.set("height",e.height),this.dataItem=this.options.dataItem=t))},updateBounds:function(){var e=this.visual._measure(!0),t=this.options;this.bounds(new z(t.x,t.y,e.width,e.height)),this._rotate(),this._alignContent()},content:function(e){var t=this._content(e);return this._alignContent(),t},_alignContent:function(){var e,t,i,n,r,o=this.options.content||{},s=this._contentVisual;s&&o.align&&(e=this.visual._measure(),t=new k.RectAlign(e),i=s.drawingElement.bbox(null),n=new z(0,0,i.width(),i.height()),r=t.align(n,o.align),s.position(r.topLeft()))},_createConnectors:function(){var e,t,i=this.options,n=i.connectors.length,r=i.connectorDefaults;for(t=0;n>t;t++)e=new h(this,T({},r,i.connectors[t])),this.connectors.push(e)},bounds:function(e){var t,i;if(e)if(ae(e))switch(e){case Le:t=this._transformedBounds();break;case Oe:t=this._transformedBounds(),i=this.diagram._pan,t.x+=i.x,t.y+=i.y;break;case Be:t=this._rotatedBounds();break;default:t=this._bounds}else this._setBounds(e),this.refreshConnections(),this._triggerBoundsChange();else t=this._bounds;return t},_setBounds:function(e){var t=this.options,i=e.topLeft(),n=t.x=i.x,r=t.y=i.y,o=t.width=ce.max(e.width,t.minWidth),s=t.height=ce.max(e.height,t.minHeight);this._bounds=new z(n,r,o,s),this.visual.redraw({x:n,y:r,width:o,height:s})},position:function(e){return e?(this.bounds(new z(e.x,e.y,this._bounds.width,this._bounds.height)),t):this._bounds.topLeft()},clone:function(){var e=this.serialize();return e.options.id=k.randomId(),this.diagram&&this.diagram._isEditable&&re(this.options.dataItem)&&(e.options.dataItem=this.options.dataItem.toJSON(),e.options.dataItem[this.options.dataItem.idField]=this.options.dataItem._defaultId),new p(e.options)},select:function(e){var i,n,r=this.diagram;return ie(e)&&(e=!0),this._canSelect()&&this.isSelected!=e?(i=[],n=[],this.isSelected=e,this.isSelected?(r._selectedItems.push(this),i.push(this)):(Q.remove(r._selectedItems,this),n.push(this)),r._internalSelection||r._selectionChanged(i,n),!0):t},rotate:function(e,i,n){var r,o,s,a,l=this.visual.rotate();return e!==t&&(n!==!1&&this.diagram&&this.diagram.undoRedoService&&this.diagram.undoRedoService.add(new k.RotateUnit(this.diagram._resizingAdorner,[this],[l.angle]),!1),r=this.bounds(),o=new L(r.width/2,r.height/2),i&&(s=e-l.angle,a=r.center().rotate(i,360-s).minus(o),this._rotationOffset=this._rotationOffset.plus(a.minus(r.topLeft())),this.position(a)),this.visual.rotate(e,o),this.options.rotation.angle=e,this.diagram&&this.diagram._connectorsAdorner&&this.diagram._connectorsAdorner.refresh(),this.refreshConnections(),this.diagram&&this.diagram.trigger(xe,{item:this})),l},connections:function(e){var t,i,n,r,o,s,a,l=[];for(t=0;this.connectors.length>t;t++)for(o=this.connectors[t],r=o.connections,i=0,r;r.length>i;i++)n=r[i],"out"==e?(s=n.source(),s.shape&&s.shape==this&&l.push(n)):"in"==e?(a=n.target(),a.shape&&a.shape==this&&l.push(n)):l.push(n);return l},refreshConnections:function(){e.each(this.connections(),function(){this.refresh()})},getConnector:function(e){var t,i;if(!ae(e))return e instanceof L?o(e,this):this.connectors.length?this.connectors[0]:null;for(e=e.toLocaleLowerCase(),t=0;this.connectors.length>t;t++)if(i=this.connectors[t],i.options.name.toLocaleLowerCase()==e)return i},getPosition:function(e){var t=this.bounds(),i=e.charAt(0).toLowerCase()+e.slice(1);return se(t[i])?this._transformPoint(t[i]()):t.center()},redraw:function(e){var t,i;e&&(t=this.options,this.shapeVisual.redraw(this._visualOptions(e)),this._diffNumericOptions(e,[Ve,We,je,qe])&&(this.bounds(new z(t.x,t.y,t.width,t.height)),i=!0),t=T(t,e),(e.rotation||i)&&this._rotate(),t.content&&this.content(t.content))},_diffNumericOptions:k.diffNumericOptions,_visualOptions:function(e){return{data:e.path,source:e.source,hover:e.hover,fill:e.fill,stroke:e.stroke,startCap:e.startCap,endCap:e.endCap}},_triggerBoundsChange:function(){this.diagram&&this.diagram.trigger(he,{item:this,bounds:this._bounds.clone()})},_transformPoint:function(e){var t=this.rotate(),i=this.bounds(),n=i.topLeft();return t.angle&&e.rotate(t.center().plus(n),360-t.angle),e},_transformedBounds:function(){var e=this.bounds(),t=e.topLeft(),i=e.bottomRight();return z.fromPoints(this.diagram.modelToView(t),this.diagram.modelToView(i))},_rotatedBounds:function(){var e=this.bounds().rotatedBounds(this.rotate().angle),t=e.topLeft(),i=e.bottomRight();return z.fromPoints(t,i)},_rotate:function(){var e=this.options.rotation;e&&e.angle&&this.rotate(e.angle),this._rotationOffset=new L},_hover:function(e){var t=this.options,i=t.hover,n=t.stroke,r=t.fill;e&&ne(i.stroke)&&(n=T({},n,i.stroke)),e&&ne(i.fill)&&(r=i.fill),this.shapeVisual.redraw({stroke:n,fill:r}),t.editable&&t.editable.connect&&this.diagram._showConnectors(this,e)},_hitTest:function(e){if(this.visible()){var t,i=this.bounds(),n=this.rotate().angle;if(e.isEmpty&&!e.isEmpty())return B.rects(e,i,n?n:0);if(t=e.clone().rotate(i.center(),n),i.contains(t))return this}},toJSON:function(){return{shapeId:this.options.id}}}),p.createShapeVisual=function(e){function t(e,t){switch(e.toLocaleLowerCase()){case"rectangle":return new I(t);case"circle":return new P(t);case"text":return new $(t);case"image":return new O(t);default:var i=new H(t);return i}}function i(e,t){return t.data=e,new H(t)}function n(e,t,i){return e.call(t,i)}var r,o,s;return delete e.diagram,r=T({},e,{x:0,y:0}),o=r.visual,s=r.type,se(o)?n(o,this,r):r.path?i(r.path,r):ae(s)?t(r.type.toLocaleLowerCase(),r):new I(r)},f=u.extend({init:function(e,t,i){var n=this;u.fn.init.call(n,i),this.updateOptionsFromModel(),this._initRouter(),n.path=new k.Polyline(n.options),n.path.fill(Ue),n.visual.append(n.path),n._sourcePoint=n._targetPoint=new L,n.source(e),n.target(t),n.content(n.options.content),n.definers=[],re(i)&&i.points&&n.points(i.points),n.refresh()},options:{hover:{stroke:{}},startCap:De,endCap:De,points:[],selectable:!0},updateOptionsFromModel:function(e){if(this.diagram&&this.diagram._isEditable){var t=l(e||this.options.dataItem);e?(re(t.from)?this.source(t.from):re(t.fromX)&&re(t.fromY)&&this.source(new L(t.fromX,t.fromY)),re(t.to)?this.target(t.to):re(t.toX)&&re(t.toY)&&this.target(new L(t.toX,t.toY)),this.options.dataItem=e,this._template(),this.redraw(this.options)):this.options=T({},t,this.options)}},updateModel:function(e){if(this.diagram&&this.diagram._isEditable&&this.diagram.connectionsDataSource){var t=this.diagram.connectionsDataSource.getByUid(this.options.dataItem.uid);t&&(this.diagram._shouldRefresh=!1,re(this.options.fromX)&&null!==this.options.fromX?(t._set("from",null),t._set("fromX",this.options.fromX),t._set("fromY",this.options.fromY)):(t._set("from",this.options.from),t._set("fromX",null),t._set("fromY",null)),re(this.options.toX)&&null!==this.options.toX?(t._set("to",null),t._set("toX",this.options.toX),t._set("toY",this.options.toY)):(t._set("to",this.options.to),t._set("toX",null),t._set("toY",null)),this.dataItem=this.options.dataItem=t,e!==!1&&(this.diagram._shouldRefresh=!0,t.trigger("change")))}},sourcePoint:function(){return this._resolvedSourceConnector?this._resolvedSourceConnector.position():this._sourcePoint},source:function(e,i){var n;return ne(e)&&(i&&this.diagram?this.diagram.undoRedoService.addCompositeItem(new k.ConnectionEditUnit(this,e)):(e!==t&&(this.from=e),null===e?this.sourceConnector&&(this._sourcePoint=this._resolvedSourceConnector.position(),this._clearSourceConnector()):e instanceof h?(n=e.shape.options.dataItem,n&&(this.options.from=n.id,this.options.fromX=null,this.options.fromY=null),this.sourceConnector=e,this.sourceConnector.connections.push(this)):e instanceof L?(this.options.fromX=e.x,this.options.fromY=e.y,this.options.from=null,this._sourcePoint=e,this.sourceConnector&&this._clearSourceConnector()):e instanceof p&&(n=e.options.dataItem,n&&(this.options.from=n.id,this.options.fromX=null,this.options.fromY=null),this.sourceConnector=e.getConnector(ge),this.sourceConnector.connections.push(this)),this.refresh())),this.sourceConnector?this.sourceConnector:this._sourcePoint},sourceDefiner:function(e){if(!e)return this._sourceDefiner||(this._sourceDefiner=new k.PathDefiner(this.sourcePoint(),null,null)),this._sourceDefiner;if(!(e instanceof k.PathDefiner))throw"The sourceDefiner needs to be a PathDefiner.";e.left=null,this._sourceDefiner=e,this.source(e.point)},targetPoint:function(){return this._resolvedTargetConnector?this._resolvedTargetConnector.position():this._targetPoint},target:function(e,i){var n;return ne(e)&&(i&&this.diagram?this.diagram.undoRedoService.addCompositeItem(new k.ConnectionEditUnit(this,e)):(e!==t&&(this.to=e),null===e?this.targetConnector&&(this._targetPoint=this._resolvedTargetConnector.position(),this._clearTargetConnector()):e instanceof h?(n=e.shape.options.dataItem,n&&(this.options.to=n.id,this.options.toX=null,this.options.toY=null),this.targetConnector=e,this.targetConnector.connections.push(this)):e instanceof L?(this.options.toX=e.x,this.options.toY=e.y,this.options.to=null,this._targetPoint=e,this.targetConnector&&this._clearTargetConnector()):e instanceof p&&(n=e.options.dataItem,n&&(this.options.to=n.id,this.options.toX=null,this.options.toY=null),this.targetConnector=e.getConnector(ge),this.targetConnector.connections.push(this))),this.refresh()),this.targetConnector?this.targetConnector:this._targetPoint},targetDefiner:function(e){if(!e)return this._targetDefiner||(this._targetDefiner=new k.PathDefiner(this.targetPoint(),null,null)),this._targetDefiner;if(!(e instanceof k.PathDefiner))throw"The sourceDefiner needs to be a PathDefiner.";e.right=null,this._targetDefiner=e,this.target(e.point)},content:function(e){return this._content(e)},select:function(e){var i,n,r=this.diagram;return this._canSelect()&&this.isSelected!==e?(this.isSelected=e,i=[],n=[],this.isSelected?(this.adorner=new U(this,this.options.selection),r._adorn(this.adorner,!0),r._selectedItems.push(this),i.push(this)):this.adorner&&(r._adorn(this.adorner,!1),Q.remove(r._selectedItems,this),this.adorner=t,n.push(this)),this.refresh(),r._internalSelection||r._selectionChanged(i,n),!0):t},bounds:function(e){return!e||ae(e)?this._bounds:(this._bounds=e,t)},type:function(e){var i=this.options;return e?(e!==i.type&&(i.type=e,this._initRouter(),this.refresh()),t):i.type},_initRouter:function(){var e=(this.options.type||"").toLowerCase();this._router=e==ue?new te(this):new ee(this)},points:function(e){var t,i,n,r;if(!e){if(n=[],ne(this.definers))for(r=0;this.definers.length>r;r++)n.push(this.definers[r].point);return n}for(this.definers=[],t=0;e.length>t;t++)if(i=e[t],i instanceof k.Point)this.definers.push(new k.PathDefiner(i));else{if(!i.hasOwnProperty("x")||!i.hasOwnProperty("y"))throw"A Connection point needs to be a Point or an object with x and y properties.";this.definers.push(new k.PathDefiner(new L(i.x,i.y)))}},allPoints:function(){var e,t=[this.sourcePoint()];if(this.definers)for(e=0;this.definers.length>e;e++)t.push(this.definers[e].point);return t.push(this.targetPoint()),t},refresh:function(){r(this);var e,t,i,n,o=this.sourcePoint(),s=this.targetPoint();this._refreshPath(),e=this._bounds.topLeft(),t=o.minus(e),i=s.minus(e),this._contentVisual&&(n=L.fn.middleOf(t,i),this._contentVisual.position(new L(n.x+e.x,n.y+e.y))),this.adorner&&this.adorner.refresh()},redraw:function(e){if(e){this.options=T({},this.options,e);var t=this.options.points;(e&&e.content||e.text)&&this.content(e.content),re(t)&&t.length>0&&(this.points(t),this._refreshPath()),this.path.redraw({fill:e.fill,stroke:e.stroke,startCap:e.startCap,endCap:e.endCap})}},clone:function(){var e=this.serialize();return this.diagram&&this.diagram._isEditable&&re(this.options.dataItem)&&(e.options.dataItem=this.options.dataItem.toJSON(),e.options.dataItem[this.options.dataItem.idField]=this.options.dataItem._defaultId),new f(this.from,this.to,e.options)},serialize:function(){var e=this.from.toJSON?this.from.toJSON:""+this.from,t=this.to.toJSON?this.to.toJSON:""+this.to,i=T({},{options:this.options,from:e,to:t});return re(this.dataItem)&&(i.dataItem=""+this.dataItem),i.options.points=this.points(),i},_hitTest:function(e){if(this.visible()){var t=new L(e.x,e.y),i=this.sourcePoint(),n=this.targetPoint();if(e.isEmpty&&!e.isEmpty()&&e.contains(i)&&e.contains(n))return this;if(this._router.hitTest(t))return this}},_hover:function(e){var t=(this.options.stroke||{}).color;e&&ne(this.options.hover.stroke.color)&&(t=this.options.hover.stroke.color),this.path.redraw({stroke:{color:t}})},_refreshPath:function(){re(this.path)&&(this._drawPath(),this.bounds(this._router.getBounds()))},_drawPath:function(){var e,t,i;this._router&&this._router.route(),e=this.sourcePoint(),t=this.targetPoint(),i=this.points(),this.path.redraw({points:[e].concat(i,[t])})},_clearSourceConnector:function(){Q.remove(this.sourceConnector.connections,this),this.sourceConnector=t,this._resolvedSourceConnector=t},_clearTargetConnector:function(){Q.remove(this.targetConnector.connections,this),this.targetConnector=t,this._resolvedTargetConnector=t}}),m=x.extend({init:function(e,t){var i=this;kendo.destroy(e),x.fn.init.call(i,e,t),i._initTheme(),i._initElements(),i._extendLayoutOptions(i.options),i._initShapeDefaults(),i._initCanvas(),i.mainLayer=new E({id:"main-layer"}),i.canvas.append(i.mainLayer),i._pan=new L,i._adorners=[],i.adornerLayer=new E({id:"adorner-layer"}),i.canvas.append(i.adornerLayer),i._createHandlers(),i._initialize(),i._fetchFreshData(),i._createGlobalToolBar(),i._resizingAdorner=new q(i,{editable:i.options.editable}),i._connectorsAdorner=new G(i),i._adorn(i._resizingAdorner,!0),i._adorn(i._connectorsAdorner,!0),i.selector=new j(i),i._clipboard=[],i.options.layout&&i.layout(i.options.layout),i.pauseMouseHandlers=!1,i._createShapes(),i._createConnections(),i.zoom(i.options.zoom),i.canvas.draw(),this._shouldRefresh=!0},options:{name:"Diagram",theme:"default",layout:"",zoomRate:.1,zoom:1,minZoom:0,maxZoom:2,dataSource:{},draggable:!0,template:"",autoBind:!0,editable:{rotate:{},resize:{},text:!0,tools:[]},pannable:{key:"ctrl"},selectable:{key:"none"},tooltip:{enabled:!0,format:"{0}"},copy:{enabled:!0,offsetX:20,offsetY:20},snap:{enabled:!0,size:10,angle:10},shapeDefaults:k.shapeDefaults({undoable:!0}),connectionDefaults:{editable:{tools:[]}},shapes:[],connections:[]},events:[Te,Se,Ce,ke,xe,he,pe,fe,"toolBarClick","save","cancel","edit","remove","add","dataBound"],_createGlobalToolBar:function(){var e=this.options.editable.tools;this._isEditable&&0===e.length&&(e=["createShape","undo","redo","rotateClockwise","rotateAnticlockwise"]),e&&e.length&&(this.toolBar=new g(this,{tools:e||{},click:S(this._toolBarClick,this),modal:!1}),this.toolBar.element.css({position:"absolute",top:0,left:0,width:this.element.width(),textAlign:"left"}),this.element.append(this.toolBar.element))},createShape:function(){var e,t,i,n=this;(this.editor&&this.editor.end()||!this.editor)&&!this.trigger("add",{shape:{}})&&(e=this.dataSource.view()||[],t=e.length,i=this.dataSource.insert(t,{}),this.dataSource.one("sync",function(){var e=n._dataMap[i.id];n.edit(e)}),this.dataSource.sync())},createConnection:function(){var e,t,i,n;(this.editor&&this.editor.end()||!this.editor)&&!this.trigger("add",{connection:{}})&&(e=this.connectionsDataSource.view()||[],t=e.length,i=this.connectionsDataSource.insert(t,{}),n=this._connectionsDataMap[i.uid],this.edit(n))},edit:function(e){var t,i,n,r,o;if(this.cancelEdit(),r=this.options.editable,e instanceof p)t="shape",i=r.shapeEditors,n=r.shapeTemplate;else{if(!(e instanceof f))return;t="connection",o=S(c,this),i=T({},{from:o,to:o},r.connectionEditors),n=r.connectionTemplate}e.options.dataItem&&(this.editor=new y(this.element,{update:S(this._update,this),cancel:S(this._cancel,this),model:e.dataItem,type:t,target:this,editors:i,template:n}),this.trigger("edit",this._editArgs()))},cancelEdit:function(){this.editor&&(this._getEditDataSource().cancelChanges(this.editor.model),this._destroyEditor())},saveEdit:function(){this.editor&&this.editor.end()&&!this.trigger("save",this._editArgs())&&this._getEditDataSource().sync()},_update:function(){this.editor&&this.editor.end()&&!this.trigger("save",this._editArgs())&&(this._getEditDataSource().sync(),this._destroyEditor())},_cancel:function(){this.editor&&!this.trigger("cancel",this._editArgs())&&(this._getEditDataSource().cancelChanges(this.editor.model),this._destroyEditor())},_getEditDataSource:function(){return"shape"===this.editor.options.type?this.dataSource:this.connectionsDataSource},_editArgs:function(){var e={container:this.editor.element};return e[this.editor.options.type]=this.editor.model,e},_destroyEditor:function(){this.editor&&(this.editor.close(),this.editor=null)},_initElements:function(){this.wrapper=this.element.empty().css("position","relative").attr("tabindex",0).addClass("k-widget k-diagram"),this.scrollable=e("<div />").appendTo(this.element)},_initShapeDefaults:function(){var e=this.options;e.editable===!1&&T(e.shapeDefaults,{editable:{connect:!1}})},_initCanvas:function(){var t=e("<div class='k-layer'></div>").appendTo(this.scrollable)[0],i=this.viewport();this.canvas=new A(t,{width:i.width||Me,height:i.height||Ae})},_createHandlers:function(){var e=this,t=e.element;t.on(Ge,S(e._wheel,e)),kendo.support.touch||kendo.support.mobileOS?(e._userEvents=new kendo.UserEvents(t,{multiTouch:!0,tap:S(e._tap,e)}),e._userEvents.bind(["gesturestart","gesturechange","gestureend"],{gesturestart:S(e._gestureStart,e),gesturechange:S(e._gestureChange,e),gestureend:S(e._gestureEnd,e)}),e.toolService=new W(e),e.options.pannable!==!1&&e.scroller.enable()):(e.toolService=new W(e),this.scroller.wrapper.on("mousemove"+de,S(e._mouseMove,e)).on("mouseup"+de,S(e._mouseUp,e)).on("mousedown"+de,S(e._mouseDown,e)).on("mouseover"+de,S(e._mouseover,e)).on("mouseout"+de,S(e._mouseout,e)),t.on("keydown"+de,S(e._keydown,e))),e._resizeHandler=S(e.resize,e),kendo.onResize(e._resizeHandler),this.bind(Se,S(e._destroyToolBar,e)),this.bind(Ce,S(e._destroyToolBar,e))},_tap:function(e){var t,i=this.toolService,n=this._caculateMobilePosition(e);i._updateHoveredItem(n),i.hoveredItem&&(t=i.hoveredItem,this.options.selectable!==!1&&(this._destroyToolBar(),t.isSelected?t.select(!1):this.select(t,{addToSelection:!0}),this._createToolBar()),this.trigger("click",{item:t,point:n}))},_caculateMobilePosition:function(e){return this.documentToModel(L(e.x.location,e.y.location))},_gestureStart:function(e){this._destroyToolBar(),this.scroller.disable(),this._gesture=e,this._initialCenter=this.documentToModel(new L(e.center.x,e.center.y)),this.trigger(Se,{point:this._initialCenter,zoom:this.zoom()})},_gestureChange:function(e){var t,i,n=this._gesture,r=this._initialCenter,o=this.documentToView(new L(e.center.x,e.center.y)),s=e.distance/n.distance,a=this._zoom,l=!1;ce.abs(s-1)>=Ye&&(this._zoom=a=this._getValidZoom(a*s),this.options.zoom=a,this._gesture=e,l=!0),t=r.times(a),i=o.minus(t),(l||this._pan.distanceTo(i)>=Qe)&&(this._panTransform(i),this._updateAdorners()),e.preventDefault()},_gestureEnd:function(){this.options.pannable!==!1&&this.scroller.enable(),this.trigger(Te,{point:this._initialCenter,zoom:this.zoom()})},_resize:function(e){this.canvas&&this.canvas.size(e),this.toolBar&&this.toolBar._toolBar.element.width(this.element.width())},_mouseover:function(e){var t=e.target._kendoNode;t&&t.srcElement._hover&&t.srcElement._hover(!0,t.srcElement)},_mouseout:function(e){var t=e.target._kendoNode;t&&t.srcElement._hover&&t.srcElement._hover(!1,t.srcElement)},_initTheme:function(){var e=this,t=_.ui.themes||{},i=((e.options||{}).theme||"").toLowerCase(),n=(t[i]||{}).diagram;e.options=T({},n,e.options)},_createShapes:function(){var e,t,i=this,n=i.options,r=n.shapes;for(t=0;r.length>t;t++)e=r[t],i.addShape(e)},_createConnections:function(){var e,t,i,n,r=this,o=r.options,s=o.connectionDefaults,a=o.connections;for(n=0;a.length>n;n++)e=a[n],t=r._findConnectionShape(e.from),i=r._findConnectionShape(e.to),r.connect(t,i,T({},s,e))},_findConnectionShape:function(e){var t=this,i=ae(e)?e:e.shapeId,n=t.getShapeById(i);return n.getConnector(e.connector||ge)},destroy:function(){var e=this;x.fn.destroy.call(e),this._userEvents&&this._userEvents.destroy(),kendo.unbindResize(e._resizeHandler),e.clear(),e.element.off(de),e.scroller.wrapper.off(de),e.canvas.destroy(!0),e.canvas=t,e._destroyEditor(),e.destroyScroller(),e._destroyGlobalToolBar(),e._destroyToolBar()},destroyScroller:function(){var e=this.scroller;e&&(e.destroy(),e.element.remove(),this.scroller=null)},save:function(){var e,t,i,n,r={};for(r.shapes=[],r.connections=[],e=0;this.shapes.length>e;e++)t=this.shapes[e],t.options.serializable&&r.shapes.push(t.options);for(e=0;this.connections.length>e;e++)i=this.connections[e],n=T({},i.options,{from:i.from.toJSON(),to:i.to.toJSON()}),r.connections.push(n);return r},focus:function(){if(!this.element.is(kendo._activeElement())){var e,t=this.element,i=t[0],n=[],r=[],o=document.documentElement;do i=i.parentNode,i.scrollHeight>i.clientHeight&&(n.push(i),r.push(i.scrollTop));while(i!=o);for(t.focus(),e=0;n.length>e;e++)n[e].scrollTop=r[e]}},load:function(e){this.clear(),this.setOptions(e),this._createShapes(),this._createConnections()},setOptions:function(e){T(this.options,e)},clear:function(){var e=this;e.select(!1),e.mainLayer.clear(),e._initialize()},connect:function(e,t,i){var n,r;return this.connectionsDataSource&&this._isEditable?(r=this.connectionsDataSource.add({}),n=this._connectionsDataMap[r.uid],n.source(e),n.target(t),this.connectionsDataSource.sync()):(n=new f(e,t,T({},this.options.connectionDefaults,i)),this.addConnection(n)),n},connected:function(e,t){var i,n;for(i=0;this.connections.length>i;i++)if(n=this.connections[i],n.from==e&&n.to==t)return!0;return!1},addConnection:function(e,t){return t!==!1&&this.undoRedoService.add(new k.AddConnectionUnit(e,this),!1),e.diagram=this,this.mainLayer.append(e.visual),this.connections.push(e),e.updateOptionsFromModel(),e},_addConnection:function(e,i){var n,r=this;return this.connectionsDataSource&&this._isEditable?(this.trigger("add",{connection:e.options.dataItem})?this._remove(e,!1):(n=this.connectionsDataSource.add(e.options.dataItem),this.connectionsDataSource.one("sync",function(){var t,i;for(t=0;r.connections.length>t;t++)i=r.connections[t],i.options.dataItem.uid===n.uid&&i.redraw(e.options)}),e.options.dataItem=n,this.connectionsDataSource.sync()),t):this.addConnection(e,i)},addShape:function(e,t){var i,n=this.options.shapeDefaults;if(e instanceof p)n=T({},n,t),e.redraw(t),i=e;else{if(e instanceof kendo.Class)return;n=T({},n,e||{}),i=new p(n)}return n.undoable&&this.undoRedoService.add(new k.AddShapeUnit(i,this),!1),this.shapes.push(i),i.diagram=this,this.mainLayer.append(i.visual),this.trigger(pe,{added:[i],removed:[]}),i.hasOwnProperty("layout")&&i.layout(i),i},_addShape:function(e,i){var n,r=this;return this.dataSource&&this._isEditable?(this.trigger("add",{shape:e.options.dataItem})?this._remove(e,!1):(n=this.dataSource.add(e.options.dataItem),this.dataSource.one("sync",function(){var t,i;for(t=0;r.shapes.length>t;t++)i=r.shapes[t],i.options.dataItem.uid===n.uid&&i.redraw(e.options)}),e.options.dataItem=n,this.dataSource.sync()),t):this.addShape(e,i)},remove:function(e,t){var i,n=oe(e);if(ie(t)&&(t=!0),t&&this.undoRedoService.begin(),n)for(e=e.slice(0),i=0;e.length>i;i++)this._removeItem(e[i],t);else(e instanceof p||e instanceof f)&&this._removeItem(e,t);t&&this.undoRedoService.commit(),this.trigger(pe,{added:[],removed:n?e:[e]})},_remove:function(e,t){var i,n={};this._isEditable&&(e.length?this._destroyToolBar():(e instanceof f?this.connectionsDataSource&&(i=this.connectionsDataSource,n.connection=e.options.dataItem):this.dataSource&&(i=this.dataSource,n.shape=e.options.dataItem),i&&!this.trigger("remove",n)&&(i.remove(e.options.dataItem),i.sync()))),this.remove(e,t)},undo:function(){this.undoRedoService.undo()},redo:function(){this.undoRedoService.redo()},select:function(e,t){if(!ne(e))return this._selectedItems;t=T({addToSelection:!1},t);var i,n,r=t.addToSelection,o=[],s=[];for(r||this.deselect(),this._internalSelection=!0,e instanceof Array?o=e:e instanceof u&&(o=[e]),i=0;o.length>i;i++)n=o[i],n.select(!0)&&s.push(n);this._selectionChanged(s,[]),this._internalSelection=!1},selectAll:function(){this.select(this.shapes.concat(this.connections))},selectArea:function(e){var t,i,n,r;if(this._internalSelection=!0,r=[],e instanceof z)for(i=this.shapes.concat(this.connections),t=0;i.length>t;t++)n=i[t],e&&!n._hitTest(e)||!n.options.enable||n.select(!0)&&r.push(n);this._selectionChanged(r,[]),this._internalSelection=!1},deselect:function(e){this._internalSelection=!0;var t,i,n=[],r=[];for(e instanceof Array?r=e:e instanceof u?r.push(e):ne(e)||(r=this._selectedItems.slice(0)),i=0;r.length>i;i++)t=r[i],t.select(!1)&&n.push(t);this._selectionChanged([],n),this._internalSelection=!1},toFront:function(e,t){var i,n,r;e||(e=this._selectedItems.slice()),i=this._getDiagramItems(e),!re(t)||t?(n=s(this.mainLayer,i.visuals),r=new Z(this,e,n),this.undoRedoService.add(r)):(this.mainLayer.toFront(i.visuals),this._fixOrdering(i,!0))},toBack:function(e,t){var i,n,r;e||(e=this._selectedItems.slice()),i=this._getDiagramItems(e),!re(t)||t?(n=s(this.mainLayer,i.visuals),r=new X(this,e,n),this.undoRedoService.add(r)):(this.mainLayer.toBack(i.visuals),this._fixOrdering(i,!1))},bringIntoView:function(e,t){var i,n,r,o,s=this.viewport(),a=new k.RectAlign(s);0!==s.width&&0!==s.height&&(t=T({animate:!1,align:"center middle"},t),"none"==t.align&&(t.align="center middle"),e instanceof u?n=e.bounds(Le):oe(e)?n=this.boundingBox(e):e instanceof z&&(n=e.clone()),r=n.clone(),n.zoom(this._zoom),this._storePan(new L),(n.width>s.width||n.height>s.height)&&(this._zoom=this._getValidZoom(ce.min(s.width/r.width,s.height/r.height)),n=r.clone().zoom(this._zoom)),this._zoomMainLayer(),i=n.clone(),a.align(n,t.align),o=n.topLeft().minus(i.topLeft()),this.pan(o.times(-1),t.animate))},alignShapes:function(e){var t,i,n,r,o,s,a;if(ie(e)&&(e="Left"),t=this.select(),0!==t.length){switch(e.toLowerCase()){case"left":case"top":i=Ne;break;case"right":case"bottom":i=$e}for(r=0;t.length>r;r++)if(n=t[r],n instanceof p)switch(e.toLowerCase()){case"left":i=ce.min(i,n.options.x);break;case"top":i=ce.min(i,n.options.y);break;case"right":i=ce.max(i,n.options.x);break;case"bottom":i=ce.max(i,n.options.y)}for(o=[],s=[],r=0;t.length>r;r++)if(n=t[r],n instanceof p)switch(s.push(n),o.push(n.bounds()),e.toLowerCase()){case"left":case"right":n.position(new L(i,n.options.y));break;case"top":case"bottom":n.position(new L(n.options.x,i))}a=new k.TransformUnit(s,o),this.undoRedoService.add(a,!1)}},zoom:function(e,t){var i,n,r,o;return e&&(i=t?t.point:new k.Point(0,0),e=this._zoom=this._getValidZoom(e),ie(i)||(i=new k.Point(ce.round(i.x),ce.round(i.y)),n=i.times(e),r=this.modelToView(i),o=r.minus(n),this._storePan(new k.Point(ce.round(o.x),ce.round(o.y)))),t&&(t.zoom=e),this._panTransform(),this._updateAdorners()),this._zoom},_getPan:function(e){var t=this.canvas;return t.translate||(e=e.plus(this._pan)),e},pan:function(e,t){var i,n;e instanceof L&&(i=this,n=i.scroller,e=i._getPan(e),e=e.times(-1),t?n.animatedScrollTo(e.x,e.y,function(){i._updateAdorners()}):(n.scrollTo(e.x,e.y),i._updateAdorners()))},viewport:function(){var e=this.element;return new z(0,0,e.width(),e.height())},copy:function(){var e,t;if(this.options.copy.enabled)for(this._clipboard=[],this._copyOffset=1,e=0;this._selectedItems.length>e;e++)t=this._selectedItems[e],this._clipboard.push(t)},cut:function(){var e,t;if(this.options.copy.enabled){for(this._clipboard=[],this._copyOffset=0,e=0;this._selectedItems.length>e;e++)t=this._selectedItems[e],this._clipboard.push(t);this.remove(this._clipboard,!0)}},paste:function(){var e,t,i,n,r,o,s,a;if(this._clipboard.length>0){for(a=new J,e=this._copyOffset*this.options.copy.offsetX,t=this._copyOffset*this.options.copy.offsetY,
this.deselect(),s=0;this._clipboard.length>s;s++)i=this._clipboard[s],i instanceof f||(n=i.clone(),a.set(i.id,n.id),n.position(new L(i.options.x+e,i.options.y+t)),n.diagram=this,this._addShape(n),n.select(),n.updateModel());for(s=0;this._clipboard.length>s;s++)i=this._clipboard[s],i instanceof p||(n=i.clone(),i.source()instanceof h&&(r=i.source(),a.containsKey(r.shape.id)?(o=this.getShapeById(a.get(r.shape.id)),n.source(o.getConnector(r.options.name))):n.source(new L(i.sourcePoint().x+e,i.sourcePoint().y+t))),i.target()instanceof h&&(r=i.target(),a.containsKey(r.shape.id)?(o=this.getShapeById(a.get(r.shape.id)),n.target(o.getConnector(r.options.name))):n.target(new L(i.targetPoint().x+e,i.targetPoint().y+t))),n.diagram=this,this._addConnection(n),n.position(new L(i.options.x+e,i.options.y+t)),n.select(!0),n.updateModel());this._copyOffset+=1}},boundingBox:function(e,t){var i,n,r,o=z.empty(),s=ne(e)?this._getDiagramItems(e):{shapes:this.shapes};if(s.shapes.length>0)for(n=s.shapes[0],o=n.bounds(Be),r=1;s.shapes.length>r;r++)n=s.shapes[r],i=n.bounds(Be),t===!0&&(i.x-=n._rotationOffset.x,i.y-=n._rotationOffset.y),o=o.union(i);return o},documentToView:function(e){var t=this.element.offset();return new L(e.x-t.left,e.y-t.top)},viewToDocument:function(e){var t=this.element.offset();return new L(e.x+t.left,e.y+t.top)},viewToModel:function(e){return this._transformWithMatrix(e,this._matrixInvert)},modelToView:function(e){return this._transformWithMatrix(e,this._matrix)},modelToLayer:function(e){return this._transformWithMatrix(e,this._layerMatrix)},layerToModel:function(e){return this._transformWithMatrix(e,this._layerMatrixInvert)},documentToModel:function(e){var t=this.documentToView(e);return this.canvas.translate||(t.x=t.x+this.scroller.scrollLeft,t.y=t.y+this.scroller.scrollTop),this.viewToModel(t)},modelToDocument:function(e){return this.viewToDocument(this.modelToView(e))},_transformWithMatrix:function(e,t){var i,n,r=e;return e instanceof L?t&&(r=t.apply(e)):(i=this._transformWithMatrix(e.topLeft(),t),n=this._transformWithMatrix(e.bottomRight(),t),r=z.fromPoints(i,n)),r},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},setConnectionsDataSource:function(e){this.options.connectionsDataSource=e,this._connectionDataSource(),this.options.autoBind&&this.connectionsDataSource.fetch()},layout:function(e){var t,i,n,r,o;switch(this.isLayouting=!0,ie(e)&&(e=this.options.layout),t=ie(e)||ie(e.type)?"Tree":e.type,t.toLowerCase()){case"tree":i=new k.TreeLayout(this);break;case"layered":i=new k.LayeredLayout(this);break;case"forcedirected":case"force":case"spring":case"springembedder":i=new k.SpringLayout(this);break;default:throw"Layout algorithm '"+t+"' is not supported."}n=new k.LayoutState(this),r=i.layout(e),r&&(o=new k.LayoutUndoUnit(n,r,e?e.animate:null),this.undoRedoService.add(o)),this.isLayouting=!1},getShapeById:function(e){var t;return(t=Q.first(this.shapes,function(t){return t.visual.id===e}))?t:t=Q.first(this.connections,function(t){return t.visual.id===e})},_extendLayoutOptions:function(e){e.layout&&(e.layout=T(k.LayoutBase.fn.defaultOptions||{},e.layout))},_selectionChanged:function(e,t){(e.length||t.length)&&this.trigger(ke,{selected:e,deselected:t})},_getValidZoom:function(e){return ce.min(ce.max(e,this.options.minZoom),this.options.maxZoom)},_panTransform:function(e){var t=this,i=e||t._pan;t.canvas.translate?(t.scroller.scrollTo(i.x,i.y),t._zoomMainLayer()):(t._storePan(i),t._transformMainLayer())},_finishPan:function(){this.trigger(Ce,{total:this._pan,delta:Number.NaN})},_storePan:function(e){this._pan=e,this._storeViewMatrix()},_zoomMainLayer:function(){var e=this._zoom,t=new F(0,0,e,e);t.render(this.mainLayer),this._storeLayerMatrix(t),this._storeViewMatrix()},_transformMainLayer:function(){var e=this._pan,t=this._zoom,i=new F(e.x,e.y,t,t);i.render(this.mainLayer),this._storeLayerMatrix(i),this._storeViewMatrix()},_storeLayerMatrix:function(e){this._layerMatrix=e.toMatrix(),this._layerMatrixInvert=e.invert().toMatrix()},_storeViewMatrix:function(){var e=this._pan,t=this._zoom,i=new F(e.x,e.y,t,t);this._matrix=i.toMatrix(),this._matrixInvert=i.invert().toMatrix()},_toIndex:function(e,t){var i=this._getDiagramItems(e);this.mainLayer.toIndex(i.visuals,t),this._fixOrdering(i,!1)},_fixOrdering:function(e,t){var i,n,r=t?this.shapes.length-1:0,o=t?this.connections.length-1:0;for(i=0;e.shapes.length>i;i++)n=e.shapes[i],Q.remove(this.shapes,n),Q.insert(this.shapes,n,r);for(i=0;e.cons.length>i;i++)n=e.cons[i],Q.remove(this.connections,n),Q.insert(this.connections,n,o)},_getDiagramItems:function(e){var t,i,n={},r=e;for(n.visuals=[],n.shapes=[],n.cons=[],e?oe(e)||(r=[e]):r=this._selectedItems.slice(),t=0;r.length>t;t++)i=r[t],i instanceof p?(n.shapes.push(i),n.visuals.push(i.visual)):i instanceof f&&(n.cons.push(i),n.visuals.push(i.visual));return n},_removeItem:function(e,t){e.select(!1),e instanceof p?this._removeShape(e,t):e instanceof f&&this._removeConnection(e,t),t||this.mainLayer.remove(e.visual)},_removeShape:function(e,t){var i,n,r,o,s=[],a=[];for(this.toolService._removeHover(),t?this.undoRedoService.addCompositeItem(new R(e)):Q.remove(this.shapes,e),i=0;e.connectors.length>i;i++)for(r=e.connectors[i],o=0;r.connections.length>o;o++)n=r.connections[o],n.sourceConnector==r?s.push(n):n.targetConnector==r&&a.push(n);for(i=0;s.length>i;i++)s[i].source(null,t);for(i=0;a.length>i;i++)a[i].target(null,t)},_removeConnection:function(e,t){e.sourceConnector&&Q.remove(e.sourceConnector.connections,e),e.targetConnector&&Q.remove(e.targetConnector.connections,e),t?this.undoRedoService.addCompositeItem(new N(e)):Q.remove(this.connections,e)},_removeDataItems:function(e,t){var i,n,r,o;for(e=oe(e)?e:[e];e.length;)if(i=e.shift(),r=this._dataMap[i.uid],r&&(this._removeShapeConnections(r),this._removeItem(r,!1),delete this._dataMap[i.uid],t&&i.hasChildren&&i.loaded()))for(n=i.children.data(),o=0;n.length>o;o++)e.push(n[o])},_removeShapeConnections:function(e){var t,i=e.connections();if(i)for(t=0;i.length>t;t++)this._removeItem(i[t],!1)},_addDataItem:function(e,t){if(re(e)){var i=this._dataMap[e.id];return i?i:(t=T({},this.options.shapeDefaults,t),t.dataItem=e,i=new p(t),this.addShape(i),this._dataMap[e.id]=i,i)}},_addDataItemByUid:function(e){var t,i;if(re(e))return(t=this._dataMap[e.uid])?t:(i=T({},this.options.shapeDefaults),i.dataItem=e,t=new p(i),this.addShape(t),this._dataMap[e.uid]=t,t)},_addDataItems:function(e,t){var i,n,r,o,s;for(n=0;e.length>n;n++)i=e[n],r=this._addDataItemByUid(i),o=this._addDataItemByUid(t),o&&!this.connected(o,r)&&(s=this.connect(o,r),s.type(ue))},_refreshSource:function(e){var t,i=this,n=e.node,r=e.action,o=e.items,s=i.options;if(!e.field){if("remove"==r)this._removeDataItems(e.items,!0);else for(r||n||i.clear(),this._addDataItems(o,n),t=0;o.length>t;t++)o[t].load();s.layout&&i.layout(s.layout)}},_mouseDown:function(e){var t=this._calculatePosition(e);1==e.which&&this.toolService.start(t,this._meta(e))&&(this._destroyToolBar(),e.preventDefault())},_addItem:function(e){e instanceof p?this.addShape(e):e instanceof f&&this.addConnection(e)},_mouseUp:function(e){var t=this._calculatePosition(e);1==e.which&&this.toolService.end(t,this._meta(e))&&(this._createToolBar(),e.preventDefault())},_createToolBar:function(){var e,t,i,n,r,o,s,a,l,c=this.toolService.diagram;this.singleToolBar||1!==c.select().length||(e=c.select()[0],e&&(t=e.options.editable.tools,this._isEditable&&0===t.length&&(e instanceof p?t=["edit","rotateClockwise","rotateAnticlockwise","delete"]:e instanceof f&&(t=["edit","delete"])),t&&(i=20,this.singleToolBar=new g(c,{tools:t,click:S(this._toolBarClick,this),modal:!0}),r=this.singleToolBar.element,o=this.singleToolBar._popup.element.outerWidth(),s=this.singleToolBar._popup.element.outerHeight(),e instanceof p?(a=this.modelToView(e.bounds(Be)),n=L(a.x,a.y).minus(L((o-a.width)/2,s+i))):e instanceof f&&(l=this.modelToView(e.bounds()),n=L(l.x,l.y).minus(L((o-l.width-20)/2,s+i))),n?(this.canvas.translate||(n=n.minus(L(this.scroller.scrollLeft,this.scroller.scrollTop))),n=this.viewToDocument(n),n=L(ce.max(n.x,0),ce.max(n.y,0)),this.singleToolBar.showAt(n)):this._destroyToolBar())))},_toolBarClick:function(e){this.trigger("toolBarClick",e),this._destroyToolBar()},_mouseMove:function(e){if(!this.pauseMouseHandlers){var t=this._calculatePosition(e);0!==e.which&&1!=e.which||!this.toolService.move(t,this._meta(e))||e.preventDefault()}},_keydown:function(e){this.toolService.keyDown(e.keyCode,this._meta(e))&&e.preventDefault()},_wheel:function(e){var t=i(e),n=this._calculatePosition(e),r=T(this._meta(e),{delta:t});this.toolService.wheel(n,r)&&e.preventDefault()},_meta:function(e){return{ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}},_calculatePosition:function(e){var i=e.pageX===t?e.originalEvent:e,n=new L(i.pageX,i.pageY),r=this.documentToModel(n);return r},_normalizePointZoom:function(e){return e.times(1/this.zoom())},_initialize:function(){this.shapes=[],this._selectedItems=[],this.connections=[],this._dataMap={},this._connectionsDataMap={},this._inactiveShapeItems=[],this._inactiveConnectionItems=[],this.undoRedoService=new V,this.id=k.randomId()},_fetchFreshData:function(){var t,i=this;i._dataSource(),i._isEditable&&i._connectionDataSource(),i.options.autoBind&&(i._isEditable?(i._preventRefresh=!0,i._preventConnectionsRefresh=!0,t=e.map([i.dataSource,i.connectionsDataSource],function(e){return e.fetch()}),e.when.apply(null,t).done(function(){i._preventRefresh=!1,i._preventConnectionsRefresh=!1,i.refresh()})):i.dataSource.fetch())},_dataSource:function(){var e,t;re(this.options.connectionsDataSource)?(this._isEditable=!0,e=this.options.dataSource||{},t=oe(e)?{data:e}:e,this.dataSource&&this._shapesRefreshHandler?this.dataSource.unbind("change",this._shapesRefreshHandler).unbind("error",this._shapesErrorHandler):(this._shapesRefreshHandler=S(this._refreshShapes,this),this._shapesErrorHandler=S(this._error,this)),this.dataSource=kendo.data.DataSource.create(t).bind("change",this._shapesRefreshHandler).bind("error",this._shapesErrorHandler)):(this._treeDataSource(),this._isEditable=!1)},_connectionDataSource:function(){var e,t=this.options.connectionsDataSource;t&&(e=oe(t)?{data:t}:t,this.connectionsDataSource&&this._connectionsRefreshHandler?this.connectionsDataSource.unbind("change",this._connectionsRefreshHandler).unbind("error",this._connectionsErrorHandler):(this._connectionsRefreshHandler=S(this._refreshConnections,this),this._connectionsErrorHandler=S(this._error,this)),this.connectionsDataSource=kendo.data.DataSource.create(e).bind("change",this._connectionsRefreshHandler).bind("error",this._connectionsErrorHandler))},_refreshShapes:function(e){"remove"===e.action?this._removeShapes(e.items):"itemchange"===e.action?this._updateShapes(e.items,e.field):"add"===e.action?this._inactiveShapeItems=this._inactiveShapeItems.concat(e.items):"sync"===e.action?this._syncShapes(e.items):this.refresh()},refresh:function(){this._preventRefresh||(this.trigger("dataBound"),this.clear(),this._addShapes(this.dataSource.view()),this.connectionsDataSource&&this._addConnections(this.connectionsDataSource.view()),this.options.layout&&this.layout(this.options.layout))},refreshConnections:function(){this._preventConnectionsRefresh||(this.trigger("dataBound"),this._addConnections(this.connectionsDataSource.view()),this.options.layout&&this.layout(this.options.layout))},_removeShapes:function(e){for(var t=0;e.length>t;t++)this.remove(this._dataMap[e[t].id],!1),this._dataMap[e[t].id]=null},_syncShapes:function(e){var t,i,n,r,o=[];for(i=0;this._inactiveShapeItems.length>i;i++)for(r=this._inactiveShapeItems[i],t=0;e.length>t;t++)if(n=e[t],r.uid===n.uid){this._addDataItem(n),o.push(r);break}this._inactiveShapeItems=o},_updateShapes:function(e,t){var i,n,r;for(i=0;e.length>i;i++)n=e[i],r=this._dataMap[n.id],r.updateOptionsFromModel(n,t)},_addShapes:function(e){for(var t=0;e.length>t;t++)this._addDataItem(e[t])},_refreshConnections:function(e){"remove"===e.action?this._removeConnections(e.items):"add"===e.action?(this._inactiveConnectionItems=this._inactiveConnectionItems.concat(e.items),this._addConnections(e.items)):"sync"===e.action?this._syncConnections(e.items):"itemchange"===e.action?this._shouldRefresh&&this._updateConnections(e.items):this.refreshConnections()},_removeConnections:function(e){for(var t=0;e.length>t;t++)this.remove(this._connectionsDataMap[e[t].uid],!1),this._connectionsDataMap[e[t].uid]=null},_syncConnections:function(e){var t,i,n,r,o=[];for(i=0;this._inactiveConnectionItems.length>i;i++)for(r=this._inactiveConnectionItems[i],t=0;e.length>t;t++)if(n=e[t],r.uid===n.uid){this._addConnectionDataItem(n),o.push(r);break}this._inactiveConnectionDataMaps=o},_updateConnections:function(e){var t,i,n,r,o;for(t=0;e.length>t;t++)i=e[t],n=this._connectionsDataMap[i.uid],n.updateOptionsFromModel(i),r=this._validateConnector(i.from),r&&n.source(r),o=this._validateConnector(i.to),o&&n.target(o)},_addConnections:function(e){var t,i,n=e.length;for(t=0;n>t;t++)i=e[t],this._addConnectionDataItem(i)},_addConnectionDataItem:function(e){var t,i,n,r;this._connectionsDataMap[e.uid]||(t=this._validateConnector(e.from),re(t)&&null!==t||(t=new L(e.fromX,e.fromY)),i=this._validateConnector(e.to),re(i)&&null!==i||(i=new L(e.toX,e.toY)),re(t)&&re(i)&&(n=T({},this.options.connectionDefaults),n.dataItem=e,r=new f(t,i,n),r.type(ue),this._connectionsDataMap[e.uid]=r,this.addConnection(r)))},_validateConnector:function(e){var t;return re(e)&&null!==e&&(t=this._dataMap[e]),t},_treeDataSource:function(){var e=this,t=e.options,i=t.dataSource;i=oe(i)?{data:i}:i,i.fields||(i.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),e.dataSource&&e._refreshHandler&&e._unbindDataSource(),e._refreshHandler=S(e._refreshSource,e),e._errorHandler=S(e._error,e),e.dataSource=M.create(i).bind(pe,e._refreshHandler).bind(me,e._errorHandler)},_unbindDataSource:function(){var e=this;e.dataSource.unbind(pe,e._refreshHandler).unbind(me,e._errorHandler)},_error:function(){},_adorn:function(e,i){i!==t&&e&&(i?(this._adorners.push(e),this.adornerLayer.append(e.visual)):(Q.remove(this._adorners,e),this.adornerLayer.remove(e.visual)))},_showConnectors:function(e,t){t?this._connectorsAdorner.show(e):this._connectorsAdorner.destroy()},_updateAdorners:function(){var e,t,i=this._adorners;for(e=0;i.length>e;e++)t=i[e],t.refreshBounds&&t.refreshBounds(),t.refresh()},_refresh:function(){for(var e=0;this.connections.length>e;e++)this.connections[e].refresh()},_destroyToolBar:function(){this.singleToolBar&&(this.singleToolBar.hide(),this.singleToolBar.destroy(),this.singleToolBar=null)},_destroyGlobalToolBar:function(){this.toolBar&&(this.toolBar.hide(),this.toolBar.destroy(),this.toolBar=null)},exportDOMVisual:function(){var e=this.canvas._viewBox,t=w.transform().translate(-e.x,-e.y),i=new w.Rect([0,0],[e.width,e.height]),n=b.Path.fromRect(i),r=new b.Group({transform:t,clip:n}),o=this.canvas.drawingElement.children[0];return r.children.push(o),r},exportVisual:function(){var e=w.transform().scale(1/this._zoom),t=new b.Group({transform:e}),i=this.canvas.drawingElement.children[0];return t.children.push(i),t}}),_.ExportMixin.extend(m.fn,!0),kendo.PDFMixin&&kendo.PDFMixin.extend(m.fn),g=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),this.diagram=e,this.options=T({},this.options,t),this._tools=[],this.createToolBar(),this.createTools(),this.appendTools(),this.options.modal&&this.createPopup(),this.bind(this.events,t)},events:["click"],createPopup:function(){this.container=e("<div/>").append(this.element),this._popup=this.container.kendoPopup({}).getKendoPopup()},appendTools:function(){var e,t;for(e=0;this._tools.length>e;e++)t=this._tools[e],(t.buttons&&t.buttons.length||!re(t.buttons))&&this._toolBar.add(t)},createToolBar:function(){this.element=e("<div/>"),this._toolBar=this.element.kendoToolBar({click:S(this.click,this),resizable:!1}).getKendoToolBar(),this.element.css("border","none")},createTools:function(){for(var e=0;this.options.tools.length>e;e++)this.createTool(this.options.tools[e])},createTool:function(e){le(e)?e.name?this[e.name+"Tool"](e):e.template&&this._toolBar.add({template:e.template}):(e=this[e+"Tool"]({}),e&&e.call(this))},showAt:function(e){this._popup&&this._popup.open(e.x,e.y)},hide:function(){this._popup&&this._popup.close()},newGroup:function(){return{type:"buttonGroup",buttons:[]}},editTool:function(){this._tools.push({spriteCssClass:"k-icon k-i-pencil",showText:"overflow",type:"button",text:"Edit",attributes:this._setAttributes({action:"edit"})})},deleteTool:function(){this._tools.push({spriteCssClass:"k-icon k-i-close",showText:"overflow",type:"button",text:"Delete",attributes:this._setAttributes({action:"delete"})})},rotateAnticlockwiseTool:function(e){this._appendGroup("rotate"),this._rotateGroup.buttons.push({spriteCssClass:"k-icon k-i-rotateccw",showText:"overflow",text:"RotateAnticlockwise",group:"rotate",attributes:this._setAttributes({action:"rotateAnticlockwise",step:e.step})})},rotateClockwiseTool:function(e){this._appendGroup("rotate"),this._rotateGroup.buttons.push({spriteCssClass:"k-icon k-i-rotatecw",attributes:this._setAttributes({action:"rotateClockwise",step:e.step}),showText:"overflow",text:"RotateClockwise",group:"rotate"})},createShapeTool:function(){this._appendGroup("create"),this._createGroup.buttons.push({spriteCssClass:"k-icon k-i-shape",showText:"overflow",text:"CreateShape",group:"create",attributes:this._setAttributes({action:"createShape"})})},createConnectionTool:function(){this._appendGroup("create"),this._createGroup.buttons.push({spriteCssClass:"k-icon k-i-connector",showText:"overflow",text:"CreateConnection",group:"create",attributes:this._setAttributes({action:"createConnection"})})},undoTool:function(){this._appendGroup("history"),this._historyGroup.buttons.push({spriteCssClass:"k-icon k-i-undo",showText:"overflow",text:"Undo",group:"history",attributes:this._setAttributes({action:"undo"})})},redoTool:function(){this._appendGroup("history"),this._historyGroup.buttons.push({spriteCssClass:"k-icon k-i-redo",showText:"overflow",text:"Redo",group:"history",attributes:this._setAttributes({action:"redo"})})},_appendGroup:function(e){var t="_"+e+"Group";this[t]||(this[t]=this.newGroup(),this._tools.push(this[t]))},_setAttributes:function(e){var t={};return e.action&&(t[kendo.attr("action")]=e.action),e.step&&(t[kendo.attr("step")]=e.step),t},_getAttributes:function(e){var t,i={},n=e.attr(kendo.attr("action"));return n&&(i.action=n),t=e.attr(kendo.attr("step")),t&&(i.step=t),i},click:function(t){var i=this._getAttributes(e(t.target)),n=i.action;n&&this[n](i),this.trigger("click",this.eventData(n))},eventData:function(e){var t=this.selectedElements(),i=[],n=[];return t instanceof p?i.push(t):n.push(t),{shapes:i,connections:n,action:e}},delete:function(){this.diagram.remove(this.selectedElements(),!0)},edit:function(){this.diagram.edit(this.selectedElements()[0])},rotateClockwise:function(e){var t=(this.selectedElements(),parseFloat(e.step||90));this._rotate(t)},rotateAnticlockwise:function(e){var t=(this.selectedElements(),parseFloat(e.step||90));this._rotate(-t)},_rotate:function(e){var t=this.diagram._resizingAdorner;t.angle(t.angle()+e),t.rotate()},selectedElements:function(){return this.diagram.select()},createShape:function(){this.diagram.createShape()},createConnection:function(){this.diagram.createConnection()},undo:function(){this.diagram.undo()},redo:function(){this.diagram.redo()},destroy:function(){this.diagram=null,this.element=null,this.options=null,this._toolBar&&this._toolBar.destroy(),this._popup&&this._popup.destroy()}}),v=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),this.options=D(!0,{},this.options,t),this.element=e,this.model=this.options.model,this.fields=this._getFields(),this._initContainer(),this.createEditable()},options:{editors:{}},_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new kendo.ui.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:!1,model:this.model})},_isEditable:function(e){return this.model.editable&&this.model.editable(e)},_getFields:function(){var e,t,i,n=[],r=this.model.fields;for(e in r)t={},this._isEditable(e)&&(i=this.options.editors[e],i&&(t.editor=i),t.field=e,n.push(t));return n},end:function(){return this.editable.end()},destroy:function(){this.editable.destroy(),this.editable.element.find("["+kendo.attr("container-for")+"]").empty(),this.model=this.wrapper=this.element=this.columns=this.editable=null}}),y=v.extend({init:function(e,t){v.fn.init.call(this,e,t),this.bind(this.events,this.options),this.open()},events:["update","cancel"],options:{window:{modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1}},_initContainer:function(){var t,i=this;this.wrapper=e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid),t="",this.options.template?(t+=this._renderTemplate(),this.fields=[]):t+=this._renderFields(),t+=this._renderButtons(),this.wrapper.append(e('<div class="k-edit-form-container"/>').append(t)),this.window=new kendo.ui.Window(this.wrapper,this.options.window),this.window.bind("close",function(e){e.userTriggered&&(e.sender.element.focus(),i._cancelClick())}),this._attachButtonEvents()},_renderTemplate:function(){var e=this.options.template;return"string"==typeof e&&(e=window.unescape(e)),e=kendo.template(e)(this.model)},_renderFields:function(){var e,t,i="";for(e=0;this.fields.length>e;e++)t=this.fields[e],i+='<div class="k-edit-label"><label for="'+t.field+'">'+(t.field||"")+"</label></div>",this._isEditable(t.field)&&(i+="<div "+kendo.attr("container-for")+'="'+t.field+'" class="k-edit-field"></div>');return i},_renderButtons:function(){var e='<div class="k-edit-buttons k-state-default">';return e+=this._createButton("update"),e+=this._createButton("cancel"),e+="</div>"},_createButton:function(e){return kendo.template(Ke)(d[e])},_attachButtonEvents:function(){this._cancelClickHandler=S(this._cancelClick,this),this.window.element.on(fe+de,"a.k-diagram-cancel",this._cancelClickHandler),this._updateClickHandler=S(this._updateClick,this),this.window.element.on(fe+de,"a.k-diagram-update",this._updateClickHandler)},_updateClick:function(e){e.preventDefault(),this.trigger("update")},_cancelClick:function(e){e.preventDefault(),this.trigger("cancel")},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",S(this.destroy,this)).close()},destroy:function(){this.window.close().destroy(),this.window.element.off(fe+de,"a.k-diagram-cancel",this._cancelClickHandler),this.window.element.off(fe+de,"a.k-diagram-update",this._updateClickHandler),this._cancelClickHandler=null,this._editUpdateClickHandler=null,this.window=null,v.fn.destroy.call(this)}}),_.ui.plugin(m),T(k,{Shape:p,Connection:f,Connector:h,DiagramToolBar:g})}(window.kendo.jQuery),function(e,t){function i(e,t){if(null===t)return t;var i=w(e,!0);return i(t)}function n(e){return typeof e!==E}function r(e,t,i){var n,r,l=a(e),c=a(t),d=u(e)-u(t)<0,h=[];for(h.push(e),n=0;i>n;n++)r={r:o(l.r,c.r,n,i,d),g:o(l.g,c.g,n,i,d),b:o(l.b,c.b,n,i,d)},h.push(s(r));return h.push(t),h}function o(e,t,i,n,r){var o,s=p.min(p.abs(e),p.abs(t)),a=p.max(p.abs(e),p.abs(t)),l=(a-s)/(n+1),c=l*(i+1);return o=r?s+c:a-c}function s(e){return"#"+l(e.r)+l(e.g)+l(e.b)}function a(e){e=e.replace("#","");var t=c(e);return{r:d(t.r),g:d(t.g),b:d(t.b)}}function l(e){var t=p.round(e).toString(16).toUpperCase();return 1===t.length&&(t="0"+t),t}function c(e){var t=e.length,i={};return 3===t?(i.r=e[0],i.g=e[1],i.b=e[2]):(i.r=e.substring(0,2),i.g=e.substring(2,4),i.b=e.substring(4,6)),i}function d(e){return parseInt(e.toString(16),16)}function u(e){var t=0;return e&&(e=a(e),t=p.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)),t}function h(e){var t=p.pow(10,4);return p.round(e*t)/t}var p=Math,f=e.proxy,m=window.kendo,g=m.Class,v=m.ui.Widget,y=m.template,_=m.deepExtend,b=m.data.HierarchicalDataSource,w=m.getter,k=m.dataviz,x=".kendoTreeMap",C="change",S="dataBound",T="itemCreated",D=Number.MAX_VALUE,M="mouseover"+x,A="mouseleave"+x,E="undefined",I=v.extend({init:function(t,i){m.destroy(t),e(t).empty(),v.fn.init.call(this,t,i),this._initTheme(this.options),this.element.addClass("k-widget k-treemap"),this._setLayout(),this._originalOptions=_({},this.options),this._initDataSource(),this._attachEvents(),m.notify(this,k.ui)},options:{name:"TreeMap",theme:"default",autoBind:!0,textField:"text",valueField:"value",colorField:"color"},events:[S,T],_initTheme:function(e){var t=this,i=k.ui.themes||{},n=((e||{}).theme||"").toLowerCase(),r=(i[n]||{}).treeMap;t.options=_({},r,e)},_attachEvents:function(){this.element.on(M,f(this._mouseover,this)).on(A,f(this._mouseleave,this))},_setLayout:function(){"horizontal"===this.options.type?(this._layout=new z((!1)),this._view=new H(this,this.options)):"vertical"===this.options.type?(this._layout=new z((!0)),this._view=new H(this,this.options)):(this._layout=new P,this._view=new F(this,this.options))},_initDataSource:function(){var e=this,t=e.options,i=t.dataSource;e._dataChangeHandler=f(e._onDataChange,e),e.dataSource=b.create(i).bind(C,e._dataChangeHandler),i&&e.options.autoBind&&e.dataSource.fetch()},setDataSource:function(e){var t=this;t.dataSource.unbind(C,t._dataChangeHandler),t.dataSource=e.bind(C,t._dataChangeHandler),e&&t.options.autoBind&&t.dataSource.fetch()},_onDataChange:function(e){var t,i,o,s,a,l,c=e.node,d=e.items,u=this.options;if(c){if(d.length){for(s=this._getByUid(c.uid),s.children=[],o=n(s.minColor)||n(s.maxColor)?r(s.minColor,s.maxColor,d.length)||[]:u.colors||[],i=0;d.length>i;i++)t=d[i],s.children.push(this._wrapItem(t));for(a=this._view.htmlSize(s),this._layout.compute(s.children,s.coord,a),i=0;s.children.length>i;i++)t=s.children[i],n(t.color)||("string"==typeof o[0]?t.color=o[i%o.length]:(l=o[i%o.length],l&&(t.color=l[0],t.minColor=l[0],t.maxColor=l[1])));this._view.render(s)}}else this.element.empty(),t=this._wrapItem(d[0]),this._layout.createRoot(t,this.element.outerWidth(),this.element.outerHeight(),"vertical"===this.options.type),this._view.createRoot(t),this._root=t;for(i=0;d.length>i;i++)d[i].load();c&&this.trigger(S,{node:c})},_contentSize:function(e){this.view.renderHeight(e)},_wrapItem:function(e){var t={};return n(this.options.valueField)&&(t.value=i(this.options.valueField,e)),n(this.options.colorField)&&(t.color=i(this.options.colorField,e)),n(this.options.textField)&&(t.text=i(this.options.textField,e)),t.level=e.level(),t.dataItem=e,t},_getByUid:function(e){for(var t,i=[this._root];i.length;){if(t=i.pop(),t.dataItem.uid===e)return t;t.children&&(i=i.concat(t.children))}},dataItem:function(t){var i=e(t).attr(m.attr("uid")),n=this.dataSource;return n&&n.getByUid(i)},findByUid:function(e){return this.element.find(".k-treemap-tile["+m.attr("uid")+"='"+e+"']")},_mouseover:function(t){var i=e(t.target);i.hasClass("k-leaf")&&(this._removeActiveState(),i.removeClass("k-state-hover").addClass("k-state-hover"))},_removeActiveState:function(){this.element.find(".k-state-hover").removeClass("k-state-hover")},_mouseleave:function(){this._removeActiveState()},destroy:function(){v.fn.destroy.call(this),this.element.off(x),this.dataSource&&this.dataSource.unbind(C,this._dataChangeHandler),this._root=null,m.destroy(this.element)},items:function(){return e()},getSize:function(){return m.dimensions(this.element)},_resize:function(){this.dataSource.fetch()},setOptions:function(e){var i=e.dataSource;e.dataSource=t,this._originalOptions=_(this._originalOptions,e),this.options=_({},this._originalOptions),this._setLayout(),this._initTheme(this.options),v.fn._setEvents.call(this,e),i&&this.setDataSource(b.create(i)),this.options.autoBind&&this.dataSource.fetch()}}),P=g.extend({createRoot:function(e,t,i){e.coord={width:t,height:i,top:0,left:0}},leaf:function(e){return!e.children},layoutChildren:function(e,t){var i,n,r,o,s=t.width*t.height,a=0,l=[];for(i=0;e.length>i;i++)l[i]=parseFloat(e[i].value),a+=l[i];for(i=0;l.length>i;i++)e[i].area=s*l[i]/a;n=this.layoutHorizontal()?t.height:t.width,e=new m.data.Query(e)._sortForGrouping("value","desc"),r=[e[0]],o=e.slice(1),this.squarify(o,r,n,t)},squarify:function(e,t,i,n){this.computeDim(e,t,i,n)},computeDim:function(e,i,n,r){var o,s,a;return e.length+i.length==1?(o=1==e.length?e:i,this.layoutLast(o,n,r),t):(e.length>=2&&0===i.length&&(i=[e[0]],e=e.slice(1)),0===e.length?(i.length>0&&this.layoutRow(i,n,r),t):(s=e[0],this.worstAspectRatio(i,n)>=this.worstAspectRatio([s].concat(i),n)?this.computeDim(e.slice(1),i.concat([s]),n,r):(a=this.layoutRow(i,n,r),this.computeDim(e,[],a.dim,a)),t))},layoutLast:function(e,t,i){e[0].coord=i},layoutRow:function(e,t,i){return this.layoutHorizontal()?this.layoutV(e,t,i):this.layoutH(e,t,i)},orientation:"h",layoutVertical:function(){return"v"===this.orientation},layoutHorizontal:function(){return"h"===this.orientation},layoutChange:function(){this.orientation=this.layoutVertical()?"h":"v"},worstAspectRatio:function(e,t){var i,n,r,o,s;if(!e||0===e.length)return D;for(i=0,n=0,r=D,o=0;e.length>o;o++)s=e[o].area,i+=s,r=s>r?r:s,n=n>s?n:s;return p.max(t*t*n/(i*i),i*i/(t*t*r))},compute:function(e,t,i){if(t.width>=t.height&&this.layoutHorizontal()||this.layoutChange(),e&&e.length>0){var n={width:t.width,height:t.height-i.text,top:0,left:0};this.layoutChildren(e,n)}},layoutV:function(e,t,i){var n,r,o,s=this._totalArea(e),a=0;for(t=h(s/t),n=0;e.length>n;n++)r=h(e[n].area/t),e[n].coord={height:r,width:t,top:i.top+a,left:i.left},a+=r;return o={height:i.height,width:i.width-t,top:i.top,left:i.left+t},o.dim=p.min(o.width,o.height),o.dim!=o.height&&this.layoutChange(),o},layoutH:function(e,t,i){var n,r,o=this._totalArea(e),s=h(o/t),a=i.top,l=0;for(n=0;e.length>n;n++)e[n].coord={height:s,width:h(e[n].area/s),top:a,left:i.left+l},l+=e[n].coord.width;return r={height:i.height-s,width:i.width,top:i.top+s,left:i.left},r.dim=p.min(r.width,r.height),r.dim!=r.width&&this.layoutChange(),r},_totalArea:function(e){var t,i=0;for(t=0;e.length>t;t++)i+=e[t].area;return i}}),F=g.extend({init:function(t,i){this.options=_({},this.options,i),this.treeMap=t,this.element=e(t.element),this.offset=0},htmlSize:function(e){var t,i,n=this._getByUid(e.dataItem.uid),r={text:0};return e.children&&(this._clean(n),t=this._getText(e),t&&(i=this._createTitle(e),n.append(i),r.text=i.height()),n.append(this._createWrap()),this.offset=(n.outerWidth()-n.innerWidth())/2),r},_getByUid:function(e){return this.element.find(".k-treemap-tile["+m.attr("uid")+"='"+e+"']")},render:function(e){var t,i,n,r,o=this._getByUid(e.dataItem.uid),s=e.children;if(s)for(t=o.find(".k-treemap-wrap"),i=0;s.length>i;i++)n=s[i],r=this._createLeaf(n),t.append(r),this.treeMap.trigger(T,{element:r})},createRoot:function(e){var t=this._createLeaf(e);this.element.append(t),this.treeMap.trigger(T,{element:t})},_clean:function(e){e.css("background-color",""),e.removeClass("k-leaf"),e.removeClass("k-inverse"),e.empty()},_createLeaf:function(t){return this._createTile(t).css("background-color",t.color).addClass("k-leaf").toggleClass("k-inverse",this._tileColorBrightness(t)>180).append(e("<div></div>").html(this._getText(t)))},_createTile:function(t){var i,r={width:t.coord.width,height:t.coord.height,left:t.coord.left,top:t.coord.top};return r.width+=r.left&&this.offset?2*this.offset:this.offset,r.height+=r.top?2*this.offset:this.offset,i=e("<div class='k-treemap-tile'></div>").css({width:r.width,height:r.height,left:r.left,top:r.top}),n(t.dataItem)&&n(t.dataItem.uid)&&i.attr(m.attr("uid"),t.dataItem.uid),i},_getText:function(e){var t=e.text;return this.options.template&&(t=this._renderTemplate(e)),t},_renderTemplate:function(e){var t=y(this.options.template);return t({dataItem:e.dataItem,text:e.text})},_createTitle:function(t){return e("<div class='k-treemap-title'></div>").append(e("<div></div>").html(this._getText(t)));
},_createWrap:function(){return e("<div class='k-treemap-wrap'></div>")},_tileColorBrightness:function(e){return u(e.color)}}),z=g.extend({createRoot:function(e,t,i,n){e.coord={width:t,height:i,top:0,left:0},e.vertical=n},init:function(e){this.vertical=e,this.quotient=e?1:0},compute:function(e,t,i){var n,r,o;e.length>0&&(n=t.width,r=t.height,this.vertical?r-=i.text:n-=i.text,o={width:n,height:r,top:0,left:0},this.layoutChildren(e,o))},layoutChildren:function(e,t){var i,n,r=t.width*t.height,o=0,s=[];for(i=0;e.length>i;i++)n=e[i],s[i]=parseFloat(e[i].value),o+=s[i],n.vertical=this.vertical;for(i=0;s.length>i;i++)e[i].area=r*s[i]/o;e=new m.data.Query(e)._sortForGrouping("value","desc"),this.sliceAndDice(e,t)},sliceAndDice:function(e,t){var i=this._totalArea(e);e[0].level%2===this.quotient?this.layoutHorizontal(e,t,i):this.layoutVertical(e,t,i)},layoutHorizontal:function(e,t,i){var n,r,o,s=0;for(n=0;e.length>n;n++)r=e[n],o=r.area/(i/t.width),r.coord={height:t.height,width:o,top:t.top,left:t.left+s},s+=o},layoutVertical:function(e,t,i){var n,r,o,s=0;for(n=0;e.length>n;n++)r=e[n],o=r.area/(i/t.height),r.coord={height:o,width:t.width,top:t.top+s,left:t.left},s+=o},_totalArea:function(e){var t,i=0;for(t=0;e.length>t;t++)i+=e[t].area;return i}}),H=F.extend({htmlSize:function(e){var t,i,n=this._getByUid(e.dataItem.uid),r={text:0,offset:0};return e.children&&(this._clean(n),t=this._getText(e),t&&(i=this._createTitle(e),n.append(i),r.text=e.vertical?i.height():i.width()),n.append(this._createWrap()),this.offset=(n.outerWidth()-n.innerWidth())/2),r},_createTitle:function(t){var i;return i=e(t.vertical?"<div class='k-treemap-title'></div>":"<div class='k-treemap-title-vertical'></div>"),i.append(e("<div></div>").html(this._getText(t)))}});k.ui.plugin(I)}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.mobile.ui,n=i.Shim,r=i.Widget,o="beforeOpen",s="open",a="close",l="init",c='<div class="km-modalview-wrapper" />',d=i.View.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t),i._id(),i._wrap(),i._shim(),this.options.$angular||(i._layout(),i._scroller(),i._model()),i.element.css("display",""),i.trigger(l)},events:[l,o,s,a],options:{name:"ModalView",modal:!0,width:null,height:null},destroy:function(){r.fn.destroy.call(this),this.shim.destroy()},open:function(t){var i=this;i.target=e(t),i.shim.show(),i._invokeNgController(),i.trigger("show",{view:i})},openFor:function(e){this.trigger(o,{target:e})||(this.open(e),this.trigger(s,{target:e}))},close:function(){this.element.is(":visible")&&!this.trigger(a)&&this.shim.hide()},_wrap:function(){var e,t,i=this,n=i.element,r=i.options;e=n[0].style.width||"auto",t=n[0].style.height||"auto",n.addClass("km-modalview").wrap(c),i.wrapper=n.parent().css({width:r.width||e||300,height:r.height||t||300}).addClass("auto"==t?" km-auto-height":""),n.css({width:"",height:""})},_shim:function(){var e=this;e.shim=new n(e.wrapper,{modal:e.options.modal,position:"center center",align:"center center",effect:"fade:in",className:"km-modalview-root",hide:function(t){e.trigger(a)&&t.preventDefault()}})}});i.plugin(d)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.mobile,r=i.support.mobileOS,o=i.effects.Transition,s=i.roleSelector,a="x",l=n.ui,c=!(r.ios&&7==r.majorVersion&&!r.appMode),d="beforeShow",u="init",h="show",p="hide",f="afterHide",m={enable:e.noop},g=l.View.extend({init:function(t,r){var o,a,l,d,h;if(e(t).parent().prepend(t),n.ui.Widget.fn.init.call(this,t,r),this.options.$angular||(this._layout(),this._scroller()),this._model(),o=this.element.closest(s("pane")).data("kendoMobilePane"))this.pane=o,this.pane.bind("viewShow",function(e){d._viewShow(e)}),this.pane.bind("sameViewRequested",function(){d.hide()}),a=this.userEvents=new i.UserEvents(o.element,{filter:s("view splitview"),allowSelection:!0});else{if(this.currentView=m,l=e(this.options.container),!l)throw Error("The drawer needs a container configuration option set.");a=this.userEvents=new i.UserEvents(l,{allowSelection:!0}),this._attachTransition(l)}d=this,h=function(e){d.visible&&(d.hide(),e.preventDefault())},this.options.swipeToOpen&&c?(a.bind("press",function(){d.transition.cancel()}),a.bind("start",function(e){d._start(e)}),a.bind("move",function(e){d._update(e)}),a.bind("end",function(e){d._end(e)}),a.bind("tap",h)):a.bind("press",h),this.leftPositioned="left"===this.options.position,this.visible=!1,this.element.hide().addClass("km-drawer").addClass(this.leftPositioned?"km-left-drawer":"km-right-drawer"),this.trigger(u)},options:{name:"Drawer",position:"left",views:[],swipeToOpenViews:[],swipeToOpen:!0,title:"",container:null},events:[d,p,f,u,h],show:function(){this._activate()&&this._show()},hide:function(){this.currentView&&(this.currentView.enable(),g.current=null,this._moveViewTo(0),this.trigger(p,{view:this}))},openFor:function(){this.visible?this.hide():this.show()},destroy:function(){l.View.fn.destroy.call(this),this.userEvents.destroy()},_activate:function(){if(this.visible)return!0;var e=this._currentViewIncludedIn(this.options.views);return!(!e||this.trigger(d,{view:this}))&&(this._setAsCurrent(),this.element.show(),this.trigger(h,{view:this}),this._invokeNgController(),!0)},_currentViewIncludedIn:function(t){if(!this.pane||!t.length)return!0;var i=this.pane.view();return e.inArray(i.id.replace("#",""),t)>-1||e.inArray(i.element.attr("id"),t)>-1},_show:function(){this.currentView.enable(!1),this.visible=!0;var e=this.element.width();this.leftPositioned||(e=-e),this._moveViewTo(e)},_setAsCurrent:function(){g.last!==this&&(g.last&&g.last.element.hide(),this.element.show()),g.last=this,g.current=this},_moveViewTo:function(e){this.userEvents.cancel(),this.transition.moveTo({location:e,duration:400,ease:o.easeOutExpo})},_viewShow:function(e){return this.currentView&&this.currentView.enable(),this.currentView===e.view?(this.hide(),t):(this.currentView=e.view,this._attachTransition(e.view.element),t)},_attachTransition:function(e){var t=this,n=this.movable,r=n&&n.x;this.transition&&(this.transition.cancel(),this.movable.moveAxis("x",0)),n=this.movable=new i.ui.Movable(e),this.transition=new o({axis:a,movable:this.movable,onEnd:function(){0===n[a]&&(e[0].style.cssText="",t.element.hide(),t.trigger(f),t.visible=!1)}}),r&&(e.addClass("k-fx-hidden"),i.animationFrame(function(){e.removeClass("k-fx-hidden"),t.movable.moveAxis(a,r),t.hide()}))},_start:function(e){var n,r,o,s,a,l=e.sender;return Math.abs(e.x.velocity)<Math.abs(e.y.velocity)||i.triggeredByInput(e.event)||!this._currentViewIncludedIn(this.options.swipeToOpenViews)?(l.cancel(),t):(n=this.leftPositioned,r=this.visible,o=n&&r||!n&&!g.current,s=!n&&r||n&&!g.current,a=0>e.x.velocity,(o&&a||s&&!a)&&this._activate()?(l.capture(),t):(l.cancel(),t))},_update:function(e){var t,i=this.movable,n=i.x+e.x.delta;t=this.leftPositioned?Math.min(Math.max(0,n),this.element.width()):Math.max(Math.min(0,n),-this.element.width()),this.movable.moveAxis(a,t),e.event.preventDefault(),e.event.stopPropagation()},_end:function(e){var t,i=e.x.velocity,n=Math.abs(this.movable.x)>this.element.width()/2,r=.8;t=this.leftPositioned?i>-r&&(i>r||n):r>i&&(-r>i||n),t?this._show():this.hide()}});l.plugin(g)}(window.kendo.jQuery),function(e){var t=window.kendo,i=t.mobile.ui,n=i.Widget,r="<div class='km-expanded-pane-shim' />",o=i.View,s=o.extend({init:function(o,s){var a,l,c=this;n.fn.init.call(c,o,s),o=c.element,e.extend(c,s),c._id(),c.options.$angular?c._overlay():(c._layout(),c._overlay()),c._style(),l=o.children(c._locate("modalview")),c.options.$angular?l.each(function(i,n){t.compileMobileDirective(e(n))}):t.mobile.init(l),c.panes=[],c._paramsHistory=[],c.options.$angular?c.element.children(t.directiveSelector("pane")).each(function(){a=t.compileMobileDirective(e(this)),c.panes.push(a)}):c.content.children(t.roleSelector("pane")).each(function(){a=t.initWidget(this,{},i.roles),c.panes.push(a)}),c.expandedPaneShim=e(r).appendTo(c.element),c._shimUserEvents=new t.UserEvents(c.expandedPaneShim,{tap:function(){c.collapsePanes()}})},_locate:function(e){return this.options.$angular?t.directiveSelector(e):t.roleSelector(e)},options:{name:"SplitView",style:"horizontal"},expandPanes:function(){this.element.addClass("km-expanded-splitview")},collapsePanes:function(){this.element.removeClass("km-expanded-splitview")},_layout:function(){var e=this,i=e.element;e.transition=t.attrValue(i,"transition"),t.mobile.ui.View.prototype._layout.call(this),t.mobile.init(this.header.add(this.footer)),e.element.addClass("km-splitview"),e.content.addClass("km-split-content")},_style:function(){var t,i=this.options.style,n=this.element;i&&(t=i.split(" "),e.each(t,function(){n.addClass("km-split-"+this)}))},showStart:function(){var t=this;t.element.css("display",""),t.inited||(t.inited=!0,e.each(t.panes,function(){this.options.initial?this.navigateToInitial():this.navigate("")}),t.trigger("init",{view:t})),t.trigger("show",{view:t})}});i.plugin(s)}(window.kendo.jQuery),function(e,t){function i(e,t){var i=[];return f&&i.push("km-on-"+f.name),i.push(e.skin?"km-"+e.skin:"ios"==e.name&&e.majorVersion>6?"km-ios7":"km-"+e.name),("ios"==e.name&&7>e.majorVersion||"ios"!=e.name)&&i.push("km-"+e.name+e.majorVersion),i.push("km-"+e.majorVersion),i.push("km-m"+(e.minorVersion?e.minorVersion[0]:0)),e.variant&&(e.skin&&e.skin===e.name||!e.skin)&&i.push("km-"+(e.skin?e.skin:e.name)+"-"+e.variant),e.cordova&&i.push("km-cordova"),i.push(e.appMode?"km-app":"km-web"),t&&t.statusBarStyle&&i.push("km-"+t.statusBarStyle+"-status-bar"),i.join(" ")}function n(t){return"km-wp-"+(t.noVariantSet?0===parseInt(e("<div style='background: Background' />").css("background-color").split(",")[1],10)?"dark":"light":t.variant+" km-wp-"+t.variant+"-force")}function r(e){return f.wp?"-kendo-landscape"==e.css("animation-name"):Math.abs(window.orientation)/90==1}function o(e){return r(e)?b:g}function s(e){e.parent().addBack().css("min-height",window.innerHeight)}function a(){e("meta[name=viewport]").remove(),H.append(k({height:", width=device-width"+(r()?", height="+window.innerHeight+"px":d.mobileOS.flatVersion>=600&&700>d.mobileOS.flatVersion?", height="+window.innerWidth+"px":", height=device-height")}))}var l=window.kendo,c=l.mobile,d=l.support,u=c.ui.Widget,h=c.ui.Pane,p="ios7",f=d.mobileOS,m="blackberry"==f.device&&f.flatVersion>=600&&1e3>f.flatVersion&&f.appMode,g="km-vertical",v="chrome"===f.browser,y=f.ios&&f.flatVersion>=700&&800>f.flatVersion&&(f.appMode||v),_=Math.abs(window.orientation)/90==1,b="km-horizontal",w={ios7:{ios:!0,browser:"default",device:"iphone",flatVersion:"700",majorVersion:"7",minorVersion:"0.0",name:"ios",tablet:!1},ios:{ios:!0,browser:"default",device:"iphone",flatVersion:"612",majorVersion:"6",minorVersion:"1.2",name:"ios",tablet:!1},android:{android:!0,browser:"default",device:"android",flatVersion:"442",majorVersion:"4",minorVersion:"4.2",name:"android",tablet:!1},blackberry:{blackberry:!0,browser:"default",device:"blackberry",flatVersion:"710",majorVersion:"7",minorVersion:"1.0",name:"blackberry",tablet:!1},meego:{meego:!0,browser:"default",device:"meego",flatVersion:"850",majorVersion:"8",minorVersion:"5.0",name:"meego",tablet:!1},wp:{wp:!0,browser:"default",device:"wp",flatVersion:"800",majorVersion:"8",minorVersion:"0.0",name:"wp",tablet:!1}},k=l.template('<meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no#=data.height#" name="viewport" />',{usedWithBlock:!1}),x=l.template('<meta name="apple-mobile-web-app-capable" content="#= data.webAppCapable === false ? \'no\' : \'yes\' #" /> <meta name="apple-mobile-web-app-status-bar-style" content="#=data.statusBarStyle#" /> <meta name="msapplication-tap-highlight" content="no" /> ',{usedWithBlock:!1}),C=l.template("<style>.km-view { clip: rect(0 #= data.width #px #= data.height #px 0); }</style>",{usedWithBlock:!1}),S=f.android&&"chrome"!=f.browser||f.blackberry,T=k({height:""}),D=l.template('<link rel="apple-touch-icon'+(f.android?"-precomposed":"")+'" # if(data.size) { # sizes="#=data.size#" #}# href="#=data.icon#" />',{usedWithBlock:!1}),M=("iphone"==f.device||"ipod"==f.device)&&7>f.majorVersion,A=("iphone"==f.device||"ipod"==f.device)&&f.majorVersion>=7,E=A?"none":null,I="mobilesafari"==f.browser?60:0,P=20,F=e(window),z=window.screen,H=e("head"),R="init",N=e.proxy,$=u.extend({init:function(t,i){t=e(t),t[0]||(t=e(document.body)),c.application=this,u.fn.init.call(this,t,i),this.element.removeAttr("data-"+l.ns+"role"),e(e.proxy(this,"bootstrap"))},bootstrap:function(){var t,i,n;this._setupPlatform(),this._attachMeta(),this._setupElementClass(),this._attachHideBarHandlers(),t=e.extend({},this.options),delete t.name,i=this,n=function(){i.pane=new h(i.element,t),i.pane.navigateToInitial(),i.options.updateDocumentTitle&&i._setupDocumentTitle(),i._startHistory(),i.trigger(R)},this.options.$angular?setTimeout(n):n()},options:{name:"Application",hideAddressBar:!0,browserHistory:!0,historyTransition:E,modelScope:window,statusBarStyle:"black",transition:"",platform:null,skin:null,updateDocumentTitle:!0,useNativeScrolling:!1},events:[R],navigate:function(e,t){this.pane.navigate(e,t)},replace:function(e,t){this.pane.replace(e,t)},scroller:function(){return this.view().scroller},hideLoading:function(){if(!this.pane)throw Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.");this.pane.hideLoading()},showLoading:function(){if(!this.pane)throw Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.");this.pane.showLoading()},changeLoadingMessage:function(e){if(!this.pane)throw Error("The mobile application instance is not fully instantiated. Please consider changing the message in the application init event handler.");this.pane.changeLoadingMessage(e)},view:function(){return this.pane.view()},skin:function(e){var t=this;return arguments.length?(t.options.skin=e||"",t.element[0].className="km-pane",t._setupPlatform(),t._setupElementClass(),t.options.skin):t.options.skin},destroy:function(){u.fn.destroy.call(this),this.pane.destroy(),this.router.destroy()},_setupPlatform:function(){var t=this,r=t.options.platform,o=t.options.skin,s=[],a=f||w[p];r&&("string"==typeof r?(s=r.split("-"),a=e.extend({variant:s[1]},a,w[s[0]])):a=r),o&&(s=o.split("-"),a=e.extend({},a,{skin:s[0],variant:s[1]})),a.variant||(a.noVariantSet=!0,a.variant="dark"),t.os=a,t.osCssClass=i(t.os,t.options),"wp"==a.name&&(t.refreshBackgroundColorProxy||(t.refreshBackgroundColorProxy=e.proxy(function(){(t.os.variant&&t.os.skin&&t.os.skin===t.os.name||!t.os.skin)&&t.element.removeClass("km-wp-dark km-wp-light km-wp-dark-force km-wp-light-force").addClass(n(t.os))},t)),e(document).off("visibilitychange",t.refreshBackgroundColorProxy),e(document).off("resume",t.refreshBackgroundColorProxy),a.skin||(t.element.parent().css("overflow","hidden"),e(document).on("visibilitychange",t.refreshBackgroundColorProxy),e(document).on("resume",t.refreshBackgroundColorProxy),t.refreshBackgroundColorProxy()))},_startHistory:function(){this.options.browserHistory?(this.router=new l.Router({pushState:this.options.pushState,root:this.options.root,hashBang:this.options.hashBang}),this.pane.bindToRouter(this.router),this.router.start()):this.options.initial||this.pane.navigate("")},_resizeToScreenHeight:function(){var t,i=e("meta[name=apple-mobile-web-app-status-bar-style]").attr("content").match(/black-translucent|hidden/),n=this.element;t=v?window.innerHeight:r(n)?i?_?z.availWidth+P:z.availWidth:_?z.availWidth:z.availWidth-P:i?_?z.availHeight:z.availHeight+P:_?z.availHeight-P:z.availHeight,n.height(t)},_setupElementClass:function(){var t,i=this,n=i.element;n.parent().addClass("km-root km-"+(i.os.tablet?"tablet":"phone")),n.addClass(i.osCssClass+" "+o(n)),this.options.useNativeScrolling&&n.parent().addClass("km-native-scrolling"),v&&n.addClass("km-ios-chrome"),d.wpDevicePixelRatio&&n.parent().css("font-size",d.wpDevicePixelRatio+"em"),m&&a(),i.options.useNativeScrolling?n.parent().addClass("km-native-scrolling"):S&&(t=(screen.availWidth>screen.availHeight?screen.availWidth:screen.availHeight)+200,e(C({width:t,height:t})).appendTo(H)),y&&i._resizeToScreenHeight(),l.onResize(function(){n.removeClass("km-horizontal km-vertical").addClass(o(n)),i.options.useNativeScrolling&&s(n),y&&i._resizeToScreenHeight(),m&&a(),l.resize(n)})},_clearExistingMeta:function(){H.find("meta").filter("[name|='apple-mobile-web-app'],[name|='msapplication-tap'],[name='viewport']").remove()},_attachMeta:function(){var e,t=this.options,i=t.icon;if(this._clearExistingMeta(),m||H.prepend(T),H.prepend(x(t)),i){"string"==typeof i&&(i={"":i});for(e in i)H.prepend(D({icon:i[e],size:e}))}t.useNativeScrolling&&s(this.element)},_attachHideBarHandlers:function(){var e=this,t=N(e,"_hideBar");!d.mobileOS.appMode&&e.options.hideAddressBar&&M&&!e.options.useNativeScrolling&&(e._initialHeight={},F.on("load",t),l.onResize(function(){setTimeout(window.scrollTo,0,0,1)}))},_setupDocumentTitle:function(){var e=this,i=document.title;e.pane.bind("viewShow",function(e){var n=e.view.title;document.title=n!==t?n:i})},_hideBar:function(){var t=this,i=t.element;i.height(l.support.transforms.css+"calc(100% + "+I+"px)"),e(window).trigger(l.support.resize)}});l.mobile.Application=$,l.ui.plugin($,l.mobile,"Mobile")}(window.kendo.jQuery),function(e,t){function i(t,i,n){e(i.target).closest(".km-button,.km-detail").toggleClass("km-state-active",n),d&&t.deactivateTimeoutID&&(clearTimeout(t.deactivateTimeoutID),t.deactivateTimeoutID=0)}function n(t){return e('<span class="km-badge">'+t+"</span>")}var r=window.kendo,o=r.mobile,s=o.ui,a=s.Widget,l=r.support,c=l.mobileOS,d=c.android&&c.flatVersion>=300,u="click",h="disabled",p="km-state-disabled",f=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n._wrap(),n._style(),n.options.enable=n.options.enable&&!n.element.attr(h),n.enable(n.options.enable),n._userEvents=new r.UserEvents(n.element,{press:function(e){n._activate(e)},tap:function(e){n._release(e)},release:function(e){i(n,e,!1)}}),d&&n.element.on("move",function(e){n._timeoutDeactivate(e)})},destroy:function(){a.fn.destroy.call(this),this._userEvents.destroy()},events:[u],options:{name:"Button",icon:"",style:"",badge:"",enable:!0},badge:function(e){var t=this.badgeElement=this.badgeElement||n(e).appendTo(this.element);return e||0===e?(t.html(e),this):e===!1?(t.empty().remove(),this.badgeElement=!1,this):t.html()},enable:function(e){var i=this.element;t===e&&(e=!0),this.options.enable=e,e?i.removeAttr(h):i.attr(h,h),i.toggleClass(p,!e)},_timeoutDeactivate:function(e){this.deactivateTimeoutID||(this.deactivateTimeoutID=setTimeout(i,500,this,e,!1))},_activate:function(e){var t=document.activeElement,n=t?t.nodeName:"";this.options.enable&&(i(this,e,!0),("INPUT"==n||"TEXTAREA"==n)&&t.blur())},_release:function(i){var n=this;if(!(i.which>1))return n.options.enable?(n.trigger(u,{target:e(i.target),button:n.element})&&i.preventDefault(),t):(i.preventDefault(),t)},_style:function(){var t,i=this.options.style,n=this.element;i&&(t=i.split(" "),e.each(t,function(){n.addClass("km-"+this)}))},_wrap:function(){var t=this,i=t.options.icon,r=t.options.badge,o='<span class="km-icon km-'+i,s=t.element.addClass("km-button"),a=s.children("span:not(.km-icon)").addClass("km-text"),l=s.find("img").addClass("km-image");!a[0]&&s.html()&&(a=s.wrapInner('<span class="km-text" />').children("span.km-text")),!l[0]&&i&&(a[0]||(o+=" km-notext"),t.iconElement=s.prepend(e(o+'" />'))),(r||0===r)&&(t.badgeElement=n(r).appendTo(s))}}),m=f.extend({options:{name:"BackButton",style:"back"},init:function(e,i){var n=this;f.fn.init.call(n,e,i),t===n.element.attr("href")&&n.element.attr("href","#:back")}}),g=f.extend({options:{name:"DetailButton",style:""},init:function(e,t){f.fn.init.call(this,e,t)},_style:function(){var t,i=this.options.style+" detail",n=this.element;i&&(t=i.split(" "),e.each(t,function(){n.addClass("km-"+this)}))},_wrap:function(){var t=this,i=t.options.icon,n='<span class="km-icon km-'+i,r=t.element,o=r.children("span"),s=r.find("img").addClass("km-image");!s[0]&&i&&(o[0]||(n+=" km-notext"),r.prepend(e(n+'" />')))}});s.plugin(f),s.plugin(m),s.plugin(g)}(window.kendo.jQuery),function(e,t){function i(t){return e('<span class="km-badge">'+t+"</span>")}var n=window.kendo,r=n.mobile.ui,o=r.Widget,s="km-state-active",a="km-state-disabled",l="select",c="li:not(."+s+")",d=o.extend({init:function(e,t){var i=this;o.fn.init.call(i,e,t),i.element.addClass("km-buttongroup").find("li").each(i._button),i.element.on(i.options.selectOn,c,"_select"),i._enable=!0,i.select(i.options.index),i.options.enable||(i._enable=!1,i.wrapper.addClass(a))},events:[l],options:{name:"ButtonGroup",selectOn:"down",index:-1,enable:!0},current:function(){return this.element.find("."+s)},select:function(i){var n=this,r=-1;i!==t&&-1!==i&&n._enable&&!e(i).is("."+a)&&(n.current().removeClass(s),"number"==typeof i?(r=i,i=e(n.element[0].children[i])):i.nodeType&&(i=e(i),r=i.index()),i.addClass(s),n.selectedIndex=r)},badge:function(t,n){var r,o=this.element;return isNaN(t)||(t=o.children().get(t)),t=o.find(t),r=e(t.children(".km-badge")[0]||i(n).appendTo(t)),n||0===n?(r.html(n),this):n===!1?(r.empty().remove(),this):r.html()},enable:function(e){var i=this.wrapper;t===e&&(e=!0),e?i.removeClass(a):i.addClass(a),this._enable=this.options.enable=e},_button:function(){var t=e(this).addClass("km-button"),r=n.attrValue(t,"icon"),o=n.attrValue(t,"badge"),s=t.children("span"),a=t.find("img").addClass("km-image");s[0]||(s=t.wrapInner("<span/>").children("span")),s.addClass("km-text"),!a[0]&&r&&t.prepend(e('<span class="km-icon km-'+r+'"/>')),(o||0===o)&&i(o).appendTo(t)},_select:function(e){e.which>1||e.isDefaultPrevented()||!this._enable||(this.select(e.currentTarget),this.trigger(l,{index:this.selectedIndex}))}});r.plugin(d)}(window.kendo.jQuery),function(e,t){function i(){return this.nodeType===v.TEXT_NODE&&this.nodeValue.match(U)}function n(e,t){t&&!e[0].querySelector(".km-icon")&&e.prepend('<span class="km-icon km-'+t+'"/>')}function r(e){n(e,T(e,"icon")),n(e,T(e.children(C),"icon"))}function o(e){var t=e.parent(),r=e.add(t.children(g.roleSelector("detailbutton"))),o=t.contents().not(r).not(i);o.length||(e.addClass("km-listview-link").attr(g.attr("role"),"listview-link"),n(e,T(t,"icon")),n(e,T(e,"icon")))}function s(e){if(e[0].querySelector("input[type=checkbox],input[type=radio]")){var t=e.parent();t.contents().not(e).not(function(){return 3==this.nodeType})[0]||(e.addClass("km-listview-label"),e.children("[type=checkbox],[type=radio]").addClass("km-widget km-icon km-check"))}}function a(t,i){e(t).css("transform","translate3d(0px, "+i+"px, 0px)")}var l,c,d,u,h,p,f,m,g=window.kendo,v=window.Node,y=g.mobile,_=y.ui,b=g.data.DataSource,w=_.DataBoundWidget,k=".km-list > li, > li:not(.km-group-container)",x=".km-listview-link, .km-listview-label",C="["+g.attr("icon")+"]",S=e.proxy,T=g.attrValue,D="km-group-title",M="km-state-active",A='<div class="'+D+'"><div class="km-text"></div></div>',E=g.template('<li><div class="'+D+'"><div class="km-text">#= this.headerTemplate(data) #</div></div><ul>#= kendo.render(this.template, data.items)#</ul></li>'),I='<div class="km-listview-wrapper" />',P=g.template('<form class="km-filter-form"><div class="km-filter-wrap"><input type="search" placeholder="#=placeholder#"/><a href="\\#" class="km-filter-reset" title="Clear"><span class="km-icon km-clear"></span><span class="km-text">Clear</span></a></div></form>'),F=".kendoMobileListView",z="styled",H="dataBound",R="dataBinding",N="itemChange",$="click",O="change",L="progress",B="function",U=/^\s+$/,V=/button/,W=g.Class.extend({init:function(e){var t,i,n=e.scroller();n&&(this.options=e.options,this.element=e.element,this.scroller=e.scroller(),this._shouldFixHeaders(),t=this,i=function(){t._cacheHeaders()},e.bind("resize",i),e.bind(z,i),e.bind(H,i),n.bind("scroll",function(e){t._fixHeader(e)}))},_fixHeader:function(t){if(this.fixedHeaders){var i,n,r,o=0,s=this.scroller,a=this.headers,l=t.scrollTop;do{if(i=a[o++],!i){r=e("<div />");break}n=i.offset,r=i.header}while(n+1>l);this.currentHeader!=o&&(s.fixedContainer.html(r.clone()),this.currentHeader=o)}},_shouldFixHeaders:function(){this.fixedHeaders="group"===this.options.type&&this.options.fixedHeaders},_cacheHeaders:function(){if(this._shouldFixHeaders(),this.fixedHeaders){var t=[],i=this.scroller.scrollTop;this.element.find("."+D).each(function(n,r){r=e(r),t.unshift({offset:r.position().top+i,header:r})}),this.headers=t,this._fixHeader({scrollTop:i})}}}),j=function(){return{page:1}},q=g.Class.extend({init:function(e){var t=this,i=e.options,n=e.scroller(),r=i.pullParameters||j;this.listView=e,this.scroller=n,e.bind("_dataSource",function(e){t.setDataSource(e.dataSource)}),n.setOptions({pullToRefresh:!0,pull:function(){t._pulled||(t._pulled=!0,t.dataSource.read(r.call(e,t._first)))},pullTemplate:i.messages.pullTemplate,releaseTemplate:i.messages.releaseTemplate,refreshTemplate:i.messages.refreshTemplate})},setDataSource:function(e){var t=this;this._first=e.view()[0],this.dataSource=e,e.bind("change",function(){t._change()}),e.bind("error",function(){t._change()})},_change:function(){var e,t=this.scroller,i=this.dataSource;this._pulled&&t.pullHandled(),(this._pulled||!this._first)&&(e=i.view(),e[0]&&(this._first=e[0])),this._pulled=!1}}),G=g.Observable.extend({init:function(e){var t=this;g.Observable.fn.init.call(t),t.buffer=e.buffer,t.height=e.height,t.item=e.item,t.items=[],t.footer=e.footer,t.buffer.bind("reset",function(){t.refresh()})},refresh:function(){for(var e,t,i,n,r=this.buffer,o=this.items,s=!1;o.length;)o.pop().destroy();for(this.offset=r.offset,e=this.item,n=0;r.viewSize>n;n++){if(n===r.total()){s=!0;break}i=e(this.content(this.offset+o.length)),i.below(t),t=i,o.push(i)}this.itemCount=o.length,this.trigger("reset"),this._resize(),s&&this.trigger("endReached")},totalHeight:function(){if(!this.items[0])return 0;var e=this,t=e.items,i=t[0].top,n=t[t.length-1].bottom,r=(n-i)/e.itemCount,o=e.buffer.length-e.offset-e.itemCount;return(this.footer?this.footer.height:0)+n+o*r},batchUpdate:function(e){var t,i,n=this.height(),r=this.items,o=this.offset;if(r[0]){if(this.lastDirection)for(;r[r.length-1].bottom>e+2*n&&0!==this.offset;)this.offset--,t=r.pop(),t.update(this.content(this.offset)),t.above(r[0]),r.unshift(t);else for(;e-n>r[0].top;){if(i=this.offset+this.itemCount,i===this.buffer.total()){this.trigger("endReached");break}if(i===this.buffer.length)break;t=r.shift(),t.update(this.content(this.offset+this.itemCount)),t.below(r[r.length-1]),r.push(t),this.offset++}o!==this.offset&&this._resize()}},update:function(e){var t,i,n,r,o=this,s=this.items,a=this.height(),l=this.itemCount,c=a/2,d=(this.lastTop||0)>e,u=e-c,h=e+a+c;s[0]&&(this.lastTop=e,this.lastDirection=d,d?s[0].top>u&&s[s.length-1].bottom>h+c&&this.offset>0&&(this.offset--,t=s.pop(),i=s[0],t.update(this.content(this.offset)),s.unshift(t),t.above(i),o._resize()):h>s[s.length-1].bottom&&u-c>s[0].top&&(r=this.offset+l,r===this.buffer.total()?this.trigger("endReached"):r!==this.buffer.length&&(t=s.shift(),n=s[s.length-1],s.push(t),t.update(this.content(this.offset+this.itemCount)),o.offset++,t.below(n),o._resize())))},content:function(e){return this.buffer.at(e)},destroy:function(){this.unbind()},_resize:function(){var e=this.items,t=0,i=0,n=e[0],r=e[e.length-1];n&&(t=n.top,i=r.bottom),this.trigger("resize",{top:t,bottom:i}),this.footer&&this.footer.below(r)}});g.mobile.ui.VirtualList=G,l=g.Class.extend({init:function(t,i){var n=t.append([i],!0)[0],r=n.offsetHeight;e.extend(this,{top:0,element:n,listView:t,height:r,bottom:r})},update:function(e){this.element=this.listView.setDataItem(this.element,e)},above:function(e){e&&(this.height=this.element.offsetHeight,this.top=e.top-this.height,this.bottom=e.top,a(this.element,this.top))},below:function(e){e&&(this.height=this.element.offsetHeight,this.top=e.bottom,this.bottom=this.top+this.height,a(this.element,this.top))},destroy:function(){g.destroy(this.element),e(this.element).remove()}}),c='<div><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>',d=g.Class.extend({init:function(t){this.element=e('<li class="km-load-more km-scroller-refresh" style="display: none"></li>').appendTo(t.element),this._loadIcon=e(c).appendTo(this.element)},enable:function(){this.element.show(),this.height=this.element.outerHeight(!0)},disable:function(){this.element.hide(),this.height=0},below:function(e){e&&(this.top=e.bottom,this.bottom=this.height+this.top,a(this.element,this.top))}}),u=d.extend({init:function(t,i){this._loadIcon=e(c).hide(),this._loadButton=e('<a class="km-load">'+t.options.messages.loadMoreText+"</a>").hide(),this.element=e('<li class="km-load-more" style="display: none"></li>').append(this._loadIcon).append(this._loadButton).appendTo(t.element);var n=this;this._loadButton.kendoMobileButton().data("kendoMobileButton").bind("click",function(){n._hideShowButton(),i.next()}),i.bind("resize",function(){n._showLoadButton()}),this.height=this.element.outerHeight(!0),this.disable()},_hideShowButton:function(){this._loadButton.hide(),this.element.addClass("km-scroller-refresh"),this._loadIcon.css("display","block")},_showLoadButton:function(){this._loadButton.show(),this.element.removeClass("km-scroller-refresh"),this._loadIcon.hide()}}),h=g.Class.extend({init:function(e){var t=this;this.chromeHeight=e.wrapper.children().not(e.element).outerHeight()||0,this.listView=e,this.scroller=e.scroller(),this.options=e.options,e.bind("_dataSource",function(e){t.setDataSource(e.dataSource,e.empty)}),e.bind("resize",function(){t.list.items.length&&(t.scroller.reset(),t.buffer.range(0),t.list.refresh())}),this.scroller.makeVirtual(),this.scroller.bind("scroll",function(e){t.list.update(e.scrollTop)}),this.scroller.bind("scrollEnd",function(e){t.list.batchUpdate(e.scrollTop)})},destroy:function(){this.list.unbind(),this.buffer.unbind()},setDataSource:function(t,i){var n,r,o,s,a=this,c=this.options,h=this.listView,p=h.scroller(),f=c.loadMore;if(this.dataSource=t,n=t.pageSize()||c.virtualViewSize,!n&&!i)throw Error("the DataSource does not have page size configured. Page Size setting is mandatory for the mobile listview virtual scrolling to work as expected.");this.buffer&&this.buffer.destroy(),r=new g.data.Buffer(t,Math.floor(n/2),f),o=f?new u(h,r):new d(h),this.list&&this.list.destroy(),s=new G({buffer:r,footer:o,item:function(e){return new l(h,e)},height:function(){return p.height()}}),s.bind("resize",function(){a.updateScrollerSize()}),s.bind("reset",function(){a.footer.enable()}),s.bind("endReached",function(){o.disable(),a.updateScrollerSize()}),r.bind("expand",function(){s.lastDirection=!1,s.batchUpdate(p.scrollTop)}),e.extend(this,{buffer:r,scroller:p,list:s,footer:o})},updateScrollerSize:function(){this.scroller.virtualSize(0,this.list.totalHeight()+this.chromeHeight)},refresh:function(){this.list.refresh()},reset:function(){this.buffer.range(0),this.list.refresh()}}),p=g.Class.extend({init:function(e){var t,i=this;this.listView=e,this.options=e.options,t=this,this._refreshHandler=function(e){t.refresh(e)},this._progressHandler=function(){e.showLoading()},e.bind("_dataSource",function(e){i.setDataSource(e.dataSource)})},destroy:function(){this._unbindDataSource()},reset:function(){},refresh:function(e){var i,n,r,o,s,a,l,c=e&&e.action,d=e&&e.items,u=this.listView,h=this.dataSource,p=this.options.appendOnRefresh,f=h.view(),m=h.group(),g=m&&m[0];return"itemchange"===c?(i=u.findByDataItem(d)[0],i&&u.setDataItem(i,d[0]),t):(s="add"===c&&!g||p&&!u._filter,a="remove"===c&&!g,s?n=[]:a&&(n=u.findByDataItem(d)),u.trigger(R,{action:c||"rebind",items:d,removedItems:n,index:e&&e.index})?(this._shouldShowLoading()&&u.hideLoading(),t):("add"!==c||g?"remove"!==c||g?g?u.replaceGrouped(f):p&&!u._filter?(r=u.prepend(f),o=f):u.replace(f):(r=[],u.remove(d)):(l=f.indexOf(d[0]),l>-1&&(r=u.insertAt(d,l),o=d)),
this._shouldShowLoading()&&u.hideLoading(),u.trigger(H,{ns:_,addedItems:r,addedDataItems:o}),t))},setDataSource:function(e){this.dataSource&&this._unbindDataSource(),this.dataSource=e,e.bind(O,this._refreshHandler),this._shouldShowLoading()&&this.dataSource.bind(L,this._progressHandler)},_unbindDataSource:function(){this.dataSource.unbind(O,this._refreshHandler).unbind(L,this._progressHandler)},_shouldShowLoading:function(){var e=this.options;return!e.pullToRefresh&&!e.loadMore&&!e.endlessScroll}}),f=g.Class.extend({init:function(e){var t=this,i=e.options.filterable,n="change paste";this.listView=e,this.options=i,e.element.before(P({placeholder:i.placeholder||"Search..."})),i.autoFilter!==!1&&(n+=" keyup"),this.element=e.wrapper.find(".km-search-form"),this.searchInput=e.wrapper.find("input[type=search]").closest("form").on("submit"+F,function(e){e.preventDefault()}).end().on("focus"+F,function(){t._oldFilter=t.searchInput.val()}).on(n.split(" ").join(F+" ")+F,S(this._filterChange,this)),this.clearButton=e.wrapper.find(".km-filter-reset").on($,S(this,"_clearFilter")).hide()},_search:function(e){this._filter=!0,this.clearButton[e?"show":"hide"](),this.listView.dataSource.filter(e)},_filterChange:function(e){var t=this;"paste"==e.type&&this.options.autoFilter!==!1?setTimeout(function(){t._applyFilter()},1):this._applyFilter()},_applyFilter:function(){var e=this.options,t=this.searchInput.val(),i=t.length?{field:e.field,operator:e.operator||"startsWith",ignoreCase:e.ignoreCase,value:t}:null;t!==this._oldFilter&&(this._oldFilter=t,this._search(i))},_clearFilter:function(e){this.searchInput.val(""),this._search(null),e.preventDefault()}}),m=w.extend({init:function(e,t){var i=this;w.fn.init.call(this,e,t),e=this.element,t=this.options,t.scrollTreshold&&(t.scrollThreshold=t.scrollTreshold),e.on("down",x,"_highlight").on("move up cancel",x,"_dim"),this._userEvents=new g.UserEvents(e,{filter:k,allowSelection:!0,tap:function(e){i._click(e)}}),e.css("-ms-touch-action","auto"),e.wrap(I),this.wrapper=this.element.parent(),this._headerFixer=new W(this),this._itemsCache={},this._templates(),this.virtual=t.endlessScroll||t.loadMore,this._style(),this.options.filterable&&(this._filter=new f(this)),this._itemBinder=this.virtual?new h(this):new p(this),this.options.pullToRefresh&&(this._pullToRefreshHandler=new q(this)),this.setDataSource(t.dataSource),this._enhanceItems(this.items()),g.notify(this,_)},events:[$,R,H,N],options:{name:"ListView",style:"",type:"flat",autoBind:!0,fixedHeaders:!1,template:"#:data#",headerTemplate:'<span class="km-text">#:value#</span>',appendOnRefresh:!1,loadMore:!1,endlessScroll:!1,scrollThreshold:30,pullToRefresh:!1,messages:{loadMoreText:"Press to load more",pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"},pullOffset:140,filterable:!1,virtualViewSize:null},refresh:function(){this._itemBinder.refresh()},reset:function(){this._itemBinder.reset()},setDataSource:function(e){var t=!e;this.dataSource=b.create(e),this.trigger("_dataSource",{dataSource:this.dataSource,empty:t}),this.options.autoBind&&!t&&(this.items().remove(),this.dataSource.fetch())},destroy:function(){w.fn.destroy.call(this),g.destroy(this.element),this._userEvents.destroy(),this._itemBinder&&this._itemBinder.destroy(),this.element.unwrap(),delete this.element,delete this.wrapper,delete this._userEvents},items:function(){return"group"===this.options.type?this.element.find(".km-list").children():this.element.children().not(".km-load-more")},scroller:function(){return this._scrollerInstance||(this._scrollerInstance=this.element.closest(".km-scroll-wrapper").data("kendoMobileScroller")),this._scrollerInstance},showLoading:function(){var e=this.view();e&&e.loader&&e.loader.show()},hideLoading:function(){var e=this.view();e&&e.loader&&e.loader.hide()},insertAt:function(e,t,i){var n=this;return n._renderItems(e,function(r){if(0===t?n.element.prepend(r):-1===t?n.element.append(r):n.items().eq(t-1).after(r),i)for(var o=0;r.length>o;o++)n.trigger(N,{item:r.eq(o),data:e[o],ns:_})})},append:function(e,t){return this.insertAt(e,-1,t)},prepend:function(e,t){return this.insertAt(e,0,t)},replace:function(e){return this.options.type="flat",this._angularItems("cleanup"),this.element.empty(),this._style(),this.insertAt(e,0)},replaceGrouped:function(t){this.options.type="group",this._angularItems("cleanup"),this.element.empty();var i=e(g.render(this.groupTemplate,t));this._enhanceItems(i.children("ul").children("li")),this.element.append(i),y.init(i),this._style(),this._angularItems("compile")},remove:function(e){var t=this.findByDataItem(e);this.angular("cleanup",function(){return{elements:t}}),g.destroy(t),t.remove()},findByDataItem:function(e){var t,i,n=[];for(t=0,i=e.length;i>t;t++)n[t]="[data-"+g.ns+"uid="+e[t].uid+"]";return this.element.find(n.join(","))},setDataItem:function(t,i){var n=this,r=function(r){var o=e(r[0]);g.destroy(t),e(t).replaceWith(o),n.trigger(N,{item:o,data:i,ns:_})};return this._renderItems([i],r)[0]},_renderItems:function(t,i){var n=e(g.render(this.template,t));return this.angular("compile",function(){return{elements:n,data:t.map(function(e){return{dataItem:e}})}}),i(n),y.init(n),this._enhanceItems(n),n},_dim:function(e){this._toggle(e,!1)},_highlight:function(e){this._toggle(e,!0)},_toggle:function(t,i){if(!(t.which>1)){var n=e(t.currentTarget),r=n.parent(),o=T(n,"role")||"",s=!o.match(V),a=t.isDefaultPrevented();s&&r.toggleClass(M,i&&!a)}},_templates:function(){var e=this.options.template,t=this.options.headerTemplate,i=' data-uid="#=arguments[0].uid || ""#"',n={},r={};typeof e===B&&(n.template=e,e="#=this.template(data)#"),this.template=S(g.template("<li"+i+">"+e+"</li>"),n),r.template=this.template,typeof t===B&&(r._headerTemplate=t,t="#=this._headerTemplate(data)#"),r.headerTemplate=g.template(t),this.groupTemplate=S(E,r)},_click:function(t){if(!(t.event.which>1||t.event.isDefaultPrevented())){var i,n=t.target,r=e(t.event.target),o=r.closest(g.roleSelector("button","detailbutton","backbutton")),s=g.widgetInstance(o,_),a=n.attr(g.attr("uid"));a&&(i=this.dataSource.getByUid(a)),this.trigger($,{target:r,item:n,dataItem:i,button:s})&&t.preventDefault()}},_styleGroups:function(){var t=this.element.children();t.children("ul").addClass("km-list"),t.each(function(){var t=e(this),i=t.contents().first();t.addClass("km-group-container"),i.is("ul")||i.is("div."+D)||i.wrap(A)})},_style:function(){var e=this.options,t="group"===e.type,i=this.element,n="inset"===e.style;i.addClass("km-listview").toggleClass("km-list",!t).toggleClass("km-virtual-list",this.virtual).toggleClass("km-listinset",!t&&n).toggleClass("km-listgroup",t&&!n).toggleClass("km-listgroupinset",t&&n),i.parents(".km-listview")[0]||i.closest(".km-content").toggleClass("km-insetcontent",n),t&&this._styleGroups(),this.trigger(z)},_enhanceItems:function(t){t.each(function(){var t,i=e(this),n=!1;i.children().each(function(){t=e(this),t.is("a")?(o(t),n=!0):t.is("label")&&(s(t),n=!0)}),n||r(i)})}}),_.plugin(m)}(window.kendo.jQuery),function(e,t){function i(i,n){var o=n.find("["+r.attr("align")+"="+i+"]");return o[0]?e('<div class="km-'+i+'item" />').append(o).prependTo(n):t}function n(t){var i=t.siblings(),n=!!t.children("ul")[0],r=!!i[0]&&""===e.trim(t.text());t.prevAll().toggleClass("km-absolute",n),t.toggleClass("km-show-title",r),t.toggleClass("km-fill-title",r&&!e.trim(t.html())),t.toggleClass("km-no-title",n),t.toggleClass("km-hide-title","hidden"==t.css("visibility")&&!i.children().is(":visible"))}var r=window.kendo,o=r.mobile,s=o.ui,a=s.Widget,l=a.extend({init:function(t,n){var r=this;a.fn.init.call(r,t,n),t=r.element,r.container().bind("show",e.proxy(this,"refresh")),t.addClass("km-navbar").wrapInner(e('<div class="km-view-title km-show-title" />')),r.leftElement=i("left",t),r.rightElement=i("right",t),r.centerElement=t.find(".km-view-title")},options:{name:"NavBar"},title:function(e){this.element.find(r.roleSelector("view-title")).text(e),n(this.centerElement)},refresh:function(e){var t=e.view;t.options.title?this.title(t.options.title):n(this.centerElement)},destroy:function(){a.fn.destroy.call(this),r.destroy(this.element)}});s.plugin(l)}(window.kendo.jQuery),function(e,t){var i,n,r,o,s,a,l,c,d=window.kendo,u=d.mobile,h=u.ui,p=e.proxy,f=d.effects.Transition,m=d.ui.Pane,g=d.ui.PaneDimensions,v=h.DataBoundWidget,y=d.data.DataSource,_=d.data.Buffer,b=d.data.BatchBuffer,w=Math,k=w.abs,x=w.ceil,C=w.round,S=w.max,T=w.min,D=w.floor,M="change",A="changing",E="refresh",I="km-current-page",P="km-virtual-page",F="function",z="itemChange",H="cleanup",R=3,N=-1,$=0,O=1,L=-1,B=0,U=1,V=d.Class.extend({init:function(t){var i=this,n=e("<ol class='km-pages'/>");t.element.append(n),this._changeProxy=p(i,"_change"),this._refreshProxy=p(i,"_refresh"),t.bind(M,this._changeProxy),t.bind(E,this._refreshProxy),e.extend(i,{element:n,scrollView:t})},items:function(){return this.element.children()},_refresh:function(e){var t,i="";for(t=0;e.pageCount>t;t++)i+="<li/>";this.element.html(i),this.items().eq(e.page).addClass(I)},_change:function(e){this.items().removeClass(I).eq(e.page).addClass(I)},destroy:function(){this.scrollView.unbind(M,this._changeProxy),this.scrollView.unbind(E,this._refreshProxy),this.element.remove()}});d.mobile.ui.ScrollViewPager=V,i="transitionEnd",n="dragStart",r="dragEnd",o=d.Observable.extend({init:function(t,o){var s,a,l,c,u,h,p=this;d.Observable.fn.init.call(this),this.element=t,this.container=t.parent(),s=new d.ui.Movable(p.element),a=new f({axis:"x",movable:s,onEnd:function(){p.trigger(i)}}),l=new d.UserEvents(t,{start:function(e){2*k(e.x.velocity)>=k(e.y.velocity)?l.capture():l.cancel(),p.trigger(n,e),a.cancel()},allowSelection:!0,end:function(e){p.trigger(r,e)}}),c=new g({element:p.element,container:p.container}),u=c.x,u.bind(M,function(){p.trigger(M)}),h=new m({dimensions:c,userEvents:l,movable:s,elastic:!0}),e.extend(p,{duration:o&&o.duration||1,movable:s,transition:a,userEvents:l,dimensions:c,dimension:u,pane:h}),this.bind([i,n,r,M],o)},size:function(){return{width:this.dimensions.x.getSize(),height:this.dimensions.y.getSize()}},total:function(){return this.dimension.getTotal()},offset:function(){return-this.movable.x},updateDimension:function(){this.dimension.update(!0)},refresh:function(){this.dimensions.refresh()},moveTo:function(e){this.movable.moveAxis("x",-e)},transitionTo:function(e,t,i){i?this.moveTo(-e):this.transition.moveTo({location:e,duration:this.duration,ease:t})}}),d.mobile.ui.ScrollViewElasticPane=o,s=d.Observable.extend({init:function(e,t,i){var n=this;d.Observable.fn.init.call(this),n.element=e,n.pane=t,n._getPages(),this.page=0,this.pageSize=i.pageSize||1,this.contentHeight=i.contentHeight,this.enablePager=i.enablePager},scrollTo:function(e,t){this.page=e,this.pane.transitionTo(-e*this.pane.size().width,f.easeOutExpo,t)},paneMoved:function(e,t,i,n){var r,o,s=this,a=s.pane,l=a.size().width*s.pageSize,c=C,d=t?f.easeOutBack:f.easeOutExpo;e===L?c=x:e===U&&(c=D),o=c(a.offset()/l),r=S(s.minSnap,T(-o*l,s.maxSnap)),o!=s.page&&i&&i({currentPage:s.page,nextPage:o})&&(r=-s.page*a.size().width),a.transitionTo(r,d,n)},updatePage:function(){var e=this.pane,t=C(e.offset()/e.size().width);return t!=this.page&&(this.page=t,!0)},forcePageUpdate:function(){return this.updatePage()},resizeTo:function(e){var t,i,n=this.pane,r=e.width;this.pageElements.width(r),"100%"===this.contentHeight&&(t=this.element.parent().height(),this.enablePager===!0&&(i=this.element.parent().find("ol.km-pages"),i.length&&(t-=i.outerHeight(!0))),this.element.css("height",t),this.pageElements.css("height",t)),n.updateDimension(),this._paged||(this.page=D(n.offset()/r)),this.scrollTo(this.page,!0),this.pageCount=x(n.total()/r),this.minSnap=-(this.pageCount-1)*r,this.maxSnap=0},_getPages:function(){this.pageElements=this.element.find(d.roleSelector("page")),this._paged=this.pageElements.length>0}}),d.mobile.ui.ScrollViewContent=s,a=d.Observable.extend({init:function(e,t,i){var n=this;d.Observable.fn.init.call(this),n.element=e,n.pane=t,n.options=i,n._templates(),n.page=i.page||0,n.pages=[],n._initPages(),n.resizeTo(n.pane.size()),n.pane.dimension.forceEnabled()},setDataSource:function(e){this.dataSource=y.create(e),this._buffer(),this._pendingPageRefresh=!1,this._pendingWidgetRefresh=!1},_viewShow:function(){var e=this;e._pendingWidgetRefresh&&(setTimeout(function(){e._resetPages()},0),e._pendingWidgetRefresh=!1)},_buffer:function(){var e=this.options.itemsPerPage;this.buffer&&this.buffer.destroy(),this.buffer=e>1?new b(this.dataSource,e):new _(this.dataSource,3*e),this._resizeProxy=p(this,"_onResize"),this._resetProxy=p(this,"_onReset"),this._endReachedProxy=p(this,"_onEndReached"),this.buffer.bind({resize:this._resizeProxy,reset:this._resetProxy,endreached:this._endReachedProxy})},_templates:function(){var e=this.options.template,t=this.options.emptyTemplate,i={},n={};typeof e===F&&(i.template=e,e="#=this.template(data)#"),this.template=p(d.template(e),i),typeof t===F&&(n.emptyTemplate=t,t="#=this.emptyTemplate(data)#"),this.emptyTemplate=p(d.template(t),n)},_initPages:function(){var e,t,i=this.pages,n=this.element;for(t=0;R>t;t++)e=new l(n),i.push(e);this.pane.updateDimension()},resizeTo:function(e){var t,i,n,r=this.pages,o=this.pane;for(t=0;r.length>t;t++)r[t].setWidth(e.width);"auto"===this.options.contentHeight?this.element.css("height",this.pages[1].element.height()):"100%"===this.options.contentHeight&&(i=this.element.parent().height(),this.options.enablePager===!0&&(n=this.element.parent().find("ol.km-pages"),n.length&&(i-=n.outerHeight(!0))),this.element.css("height",i),r[0].element.css("height",i),r[1].element.css("height",i),r[2].element.css("height",i)),o.updateDimension(),this._repositionPages(),this.width=e.width},scrollTo:function(e){var t,i=this.buffer;i.syncDataSource(),t=i.at(e),t&&(this._updatePagesContent(e),this.page=e)},paneMoved:function(e,t,i,n){var r,o=this,s=o.pane,a=s.size().width,l=s.offset(),c=Math.abs(l)>=a/3,u=t?d.effects.Transition.easeOutBack:d.effects.Transition.easeOutExpo,h=o.page+2>o.buffer.total(),p=0;e===U?0!==o.page&&(p=-1):e!==L||h?l>0&&c&&!h?p=1:0>l&&c&&0!==o.page&&(p=-1):p=1,r=o.page,p&&(r=p>0?r+1:r-1),i&&i({currentPage:o.page,nextPage:r})&&(p=0),0===p?o._cancelMove(u,n):-1===p?o._moveBackward(n):1===p&&o._moveForward(n)},updatePage:function(){var e=this.pages;return 0!==this.pane.offset()&&(this.pane.offset()>0?(e.push(this.pages.shift()),this.page++,this.setPageContent(e[2],this.page+1)):(e.unshift(this.pages.pop()),this.page--,this.setPageContent(e[0],this.page-1)),this._repositionPages(),this._resetMovable(),!0)},forcePageUpdate:function(){var e=this.pane.offset(),t=3*this.pane.size().width/4;return k(e)>t&&this.updatePage()},_resetMovable:function(){this.pane.moveTo(0)},_moveForward:function(e){this.pane.transitionTo(-this.width,d.effects.Transition.easeOutExpo,e)},_moveBackward:function(e){this.pane.transitionTo(this.width,d.effects.Transition.easeOutExpo,e)},_cancelMove:function(e,t){this.pane.transitionTo(0,e,t)},_resetPages:function(){this.page=this.options.page||0,this._updatePagesContent(this.page),this._repositionPages(),this.trigger("reset")},_onResize:function(){this.pageCount=x(this.dataSource.total()/this.options.itemsPerPage),this._pendingPageRefresh&&(this._updatePagesContent(this.page),this._pendingPageRefresh=!1),this.trigger("resize")},_onReset:function(){this.pageCount=x(this.dataSource.total()/this.options.itemsPerPage),this._resetPages()},_onEndReached:function(){this._pendingPageRefresh=!0},_repositionPages:function(){var e=this.pages;e[0].position(N),e[1].position($),e[2].position(O)},_updatePagesContent:function(e){var t=this.pages,i=e||0;this.setPageContent(t[0],i-1),this.setPageContent(t[1],i),this.setPageContent(t[2],i+1)},setPageContent:function(t,i){var n=this.buffer,r=this.template,o=this.emptyTemplate,s=null;i>=0&&(s=n.at(i),e.isArray(s)&&!s.length&&(s=null)),this.trigger(H,{item:t.element}),t.content(null!==s?r(s):o({})),d.mobile.init(t.element),this.trigger(z,{item:t.element,data:s,ns:d.mobile.ui})}}),d.mobile.ui.VirtualScrollViewContent=a,l=d.Class.extend({init:function(t){this.element=e("<div class='"+P+"'></div>"),this.width=t.width(),this.element.width(this.width),t.append(this.element)},content:function(e){this.element.html(e)},position:function(e){this.element.css("transform","translate3d("+this.width*e+"px, 0, 0)")},setWidth:function(e){this.width=e,this.element.width(e)}}),d.mobile.ui.VirtualPage=l,c=v.extend({init:function(e,t){var i,n,r,l=this;v.fn.init.call(l,e,t),t=l.options,e=l.element,d.stripWhitespace(e[0]),e.wrapInner("<div/>").addClass("km-scrollview"),this.options.enablePager&&(this.pager=new V(this)),l.inner=e.children().first(),l.page=0,l.inner.css("height",t.contentHeight),l.pane=new o(l.inner,{duration:this.options.duration,transitionEnd:p(this,"_transitionEnd"),dragStart:p(this,"_dragStart"),dragEnd:p(this,"_dragEnd"),change:p(this,E)}),l.bind("resize",function(){l.pane.refresh()}),l.page=t.page,i=0===this.inner.children().length,n=i?new a(l.inner,l.pane,t):new s(l.inner,l.pane,t),n.page=l.page,n.bind("reset",function(){l._syncWithContent(),l.trigger(E,{pageCount:n.pageCount,page:n.page})}),n.bind("resize",function(){l.trigger(E,{pageCount:n.pageCount,page:n.page})}),n.bind(z,function(e){l.trigger(z,e),l.angular("compile",function(){return{elements:e.item,data:[{dataItem:e.data}]}})}),n.bind(H,function(e){l.angular("cleanup",function(){return{elements:e.item}})}),l._content=n,l.setDataSource(t.dataSource),r=l.container(),r.nullObject?(l.viewInit(),l.viewShow()):r.bind("show",p(this,"viewShow")).bind("init",p(this,"viewInit"))},options:{name:"ScrollView",page:0,duration:400,velocityThreshold:.8,contentHeight:"auto",pageSize:1,itemsPerPage:1,bounceVelocityThreshold:1.6,enablePager:!0,autoBind:!0,template:"",emptyTemplate:""},events:[A,M,E],destroy:function(){v.fn.destroy.call(this),d.destroy(this.element)},viewInit:function(){this.options.autoBind&&this._content.scrollTo(this._content.page,!0)},viewShow:function(){this.pane.refresh()},refresh:function(){var e=this._content;e.resizeTo(this.pane.size()),this.page=e.page,this.trigger(E,{pageCount:e.pageCount,page:e.page})},content:function(e){this.element.children().first().html(e),this._content._getPages(),this.pane.refresh()},value:function(e){var i=this.dataSource;return e?(this.scrollTo(i.indexOf(e),!0),t):i.at(this.page)},scrollTo:function(e,t){this._content.scrollTo(e,t),this._syncWithContent()},prev:function(){var e=this,i=e.page-1;e._content instanceof a?e._content.paneMoved(U,t,function(t){return e.trigger(A,t)}):i>-1&&e.scrollTo(i)},next:function(){var e=this,i=e.page+1;e._content instanceof a?e._content.paneMoved(L,t,function(t){return e.trigger(A,t)}):e._content.pageCount>i&&e.scrollTo(i)},setDataSource:function(e){if(this._content instanceof a){var t=!e;this.dataSource=y.create(e),this._content.setDataSource(this.dataSource),this.options.autoBind&&!t&&this.dataSource.fetch()}},items:function(){return this.element.find("."+P)},_syncWithContent:function(){var e,i,n=this._content.pages,r=this._content.buffer;this.page=this._content.page,e=r?r.at(this.page):t,e instanceof Array||(e=[e]),i=n?n[1].element:t,this.trigger(M,{page:this.page,element:i,data:e})},_dragStart:function(){this._content.forcePageUpdate()&&this._syncWithContent()},_dragEnd:function(e){var t=this,i=e.x.velocity,n=this.options.velocityThreshold,r=B,o=k(i)>this.options.bounceVelocityThreshold;i>n?r=U:-n>i&&(r=L),this._content.paneMoved(r,o,function(e){return t.trigger(A,e)})},_transitionEnd:function(){this._content.updatePage()&&this._syncWithContent()}}),h.plugin(c)}(window.kendo.jQuery),function(e,t){function i(e,t,i){return Math.max(t,Math.min(i,e))}var n=window.kendo,r=n.mobile.ui,o=r.Widget,s=n.support,a="change",l="km-switch-on",c="km-switch-off",d="margin-left",u="km-state-active",h="km-state-disabled",p="disabled",f=s.transitions.css+"transform",m=e.proxy,g='<span class="km-switch km-widget">        <span class="km-switch-wrapper"><span class="km-switch-background"></span></span>         <span class="km-switch-container"><span class="km-switch-handle" >             <span class="km-switch-label-on">{0}</span>             <span class="km-switch-label-off">{1}</span>         </span>     </span>',v=o.extend({init:function(t,i){var r,s=this;o.fn.init.call(s,t,i),i=s.options,s.wrapper=e(n.format(g,i.onLabel,i.offLabel)),s.handle=s.wrapper.find(".km-switch-handle"),s.background=s.wrapper.find(".km-switch-background"),s.wrapper.insertBefore(s.element).prepend(s.element),s._drag(),s.origin=parseInt(s.background.css(d),10),s.constrain=0,s.snapPoint=0,t=s.element[0],t.type="checkbox",s._animateBackground=!0,r=s.options.checked,null===r&&(r=t.checked),s.check(r),s.options.enable=s.options.enable&&!s.element.attr(p),s.enable(s.options.enable),s.refresh(),n.notify(s,n.mobile.ui)},refresh:function(){var e=this,t=e.handle.outerWidth(!0);e.width=e.wrapper.width(),e.constrain=e.width-t,e.snapPoint=e.constrain/2,"number"!=typeof e.origin&&(e.origin=parseInt(e.background.css(d),10)),e.background.data("origin",e.origin),e.check(e.element[0].checked)},events:[a],options:{name:"Switch",onLabel:"on",offLabel:"off",checked:null,enable:!0},check:function(e){var i=this,n=i.element[0];return e===t?n.checked:(i._position(e?i.constrain:0),n.checked=e,i.wrapper.toggleClass(l,e).toggleClass(c,!e),t)},value:function(){return this.check.apply(this,arguments)},destroy:function(){o.fn.destroy.call(this),this.userEvents.destroy()},toggle:function(){var e=this;e.check(!e.element[0].checked)},enable:function(e){var i=this.element,n=this.wrapper;t===e&&(e=!0),this.options.enable=e,e?i.removeAttr(p):i.attr(p,p),n.toggleClass(h,!e)},_resize:function(){this.refresh()},_move:function(e){var t=this;e.preventDefault(),t._position(i(t.position+e.x.delta,0,t.width-t.handle.outerWidth(!0)))},_position:function(e){var t=this;t.position=e,t.handle.css(f,"translatex("+e+"px)"),t._animateBackground&&t.background.css(d,t.origin+e)},_start:function(){this.options.enable?(this.userEvents.capture(),this.handle.addClass(u)):this.userEvents.cancel()},_stop:function(){var e=this;e.handle.removeClass(u),e._toggle(e.position>e.snapPoint)},_toggle:function(e){var t,i=this,r=i.handle,o=i.element[0],s=o.checked,d=n.mobile.application&&n.mobile.application.os.wp?100:200;i.wrapper.toggleClass(l,e).toggleClass(c,!e),i.position=t=e*i.constrain,i._animateBackground&&i.background.kendoStop(!0,!0).kendoAnimate({effects:"slideMargin",offset:t,reset:!0,reverse:!e,axis:"left",duration:d}),r.kendoStop(!0,!0).kendoAnimate({effects:"slideTo",duration:d,offset:t+"px,0",reset:!0,complete:function(){s!==e&&(o.checked=e,i.trigger(a,{checked:e}))}})},_drag:function(){var e=this;e.userEvents=new n.UserEvents(e.wrapper,{tap:function(){e.options.enable&&e._toggle(!e.element[0].checked)},start:m(e._start,e),move:m(e._move,e),end:m(e._stop,e)})}});r.plugin(v)}(window.kendo.jQuery),function(e){function t(t){return e('<span class="km-badge">'+t+"</span>")}var i=window.kendo,n=i.mobile.ui,r=n.Widget,o="km-state-active",s="select",a=r.extend({init:function(t,i){var n=this;r.fn.init.call(n,t,i),n.container().bind("show",e.proxy(this,"refresh")),n.element.addClass("km-tabstrip").find("a").each(n._buildButton).eq(n.options.selectedIndex).addClass(o),n.element.on("down","a","_release")},events:[s],switchTo:function(t){var i,n,r=this.element.find("a"),o=0,s=r.length;if(!isNaN(t))return this._setActiveItem(r.eq(t)),!0;for(;s>o;o++)if(i=r[o],n=i.href.replace(/(\#.+)(\?.+)$/,"$1"),-1!==n.indexOf(t,n.length-t.length))return this._setActiveItem(e(i)),!0;return!1},switchByFullUrl:function(e){var t;t=this.element.find("a[href$='"+e+"']"),this._setActiveItem(t)},clear:function(){this.currentItem().removeClass(o)},currentItem:function(){return this.element.children("."+o)},badge:function(i,n){var r,o=this.element;return isNaN(i)||(i=o.children().get(i)),i=o.find(i),r=e(i.find(".km-badge")[0]||t(n).insertAfter(i.children(".km-icon"))),n||0===n?(r.html(n),this):n===!1?(r.empty().remove(),this):r.html()},_release:function(t){if(!(t.which>1)){var i=this,n=e(t.currentTarget);n[0]!==i.currentItem()[0]&&(i.trigger(s,{item:n})?t.preventDefault():i._setActiveItem(n))}},_setActiveItem:function(e){e[0]&&(this.clear(),e.addClass(o))},_buildButton:function(){var n=e(this),r=i.attrValue(n,"icon"),o=i.attrValue(n,"badge"),s=n.find("img"),a=e('<span class="km-icon"/>');n.addClass("km-button").attr(i.attr("role"),"tab").contents().not(s).wrapAll('<span class="km-text"/>'),s[0]?s.addClass("km-image").prependTo(n):(n.prepend(a),r&&(a.addClass("km-"+r),(o||0===o)&&t(o).insertAfter(a)))},refresh:function(e){var t=e.view.element.attr(i.attr("url"));!this.switchTo(e.view.id)&&t&&this.switchTo(t)},options:{name:"TabStrip",selectedIndex:0,enable:!0}});n.plugin(a)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()}),function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(e,t){return Se.call(e,t)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(e){_e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function o(e,t){var i=!0;return h(function(){return i&&(r(e),i=!1),t.apply(this,arguments)},t)}function s(e,t){gt[e]||(r(t),gt[e]=!0)}function a(e,t){return function(i){return m(e.call(this,i),t)}}function l(e,t){return function(i){return this.localeData().ordinal(e.call(this,i),t)}}function c(){}function d(e,t){t!==!1&&I(e),p(this,e),this._d=new Date((+e._d))}function u(e){var t=C(e),i=t.year||0,n=t.quarter||0,r=t.month||0,o=t.week||0,s=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*a,this._days=+s+7*o,this._months=+r+3*n+12*i,this._data={},this._locale=_e.localeData(),this._bubble()}function h(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t){var i,n,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),ze.length>0)for(i in ze)n=ze[i],r=t[n],"undefined"!=typeof r&&(e[n]=r);return e}function f(e){return e<0?Math.ceil(e):Math.floor(e)}function m(e,t,i){for(var n=""+Math.abs(e),r=e>=0;n.length<t;)n="0"+n;return(r?i?"+":"":"-")+n}function g(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function v(e,t){var i;return t=R(t,e),e.isBefore(t)?i=g(e,t):(i=g(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function y(e,t){return function(i,n){var r,o;return null===n||isNaN(+n)||(s(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=i,i=n,n=o),i="string"==typeof i?+i:i,r=_e.duration(i,n),_(this,r,e),this}}function _(e,t,i,n){var r=t._milliseconds,o=t._days,s=t._months;n=null==n||n,r&&e._d.setTime(+e._d+r*i),o&&pe(e,"Date",he(e,"Date")+o*i),s&&ue(e,he(e,"Month")+s*i),n&&_e.updateOffset(e,o||s)}function b(e){return"[object Array]"===Object.prototype.toString.call(e)}function w(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function k(e,t,i){var n,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(n=0;n<r;n++)(i&&e[n]!==t[n]||!i&&T(e[n])!==T(t[n]))&&s++;return s+o}function x(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ct[e]||dt[t]||t}return e}function C(e){var t,n,r={};for(n in e)i(e,n)&&(t=x(n),t&&(r[t]=e[n]));return r}function S(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}_e[t]=function(r,o){var s,a,l=_e._locale[t],c=[];if("number"==typeof r&&(o=r,r=e),a=function(e){var t=_e().utc().set(n,e);return l.call(_e._locale,t,r||"")},null!=o)return a(o);for(s=0;s<i;s++)c.push(a(s));return c}}function T(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function D(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function M(e,t,i){return ae(_e([e,11,31+t-i]),t,i).week}function A(e){return E(e)?366:365}function E(e){return e%4===0&&e%100!==0||e%400===0}function I(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[De]<0||e._a[De]>11?De:e._a[Me]<1||e._a[Me]>D(e._a[Te],e._a[De])?Me:e._a[Ae]<0||e._a[Ae]>23?Ae:e._a[Ee]<0||e._a[Ee]>59?Ee:e._a[Ie]<0||e._a[Ie]>59?Ie:e._a[Pe]<0||e._a[Pe]>999?Pe:-1,e._pf._overflowDayOfYear&&(t<Te||t>Me)&&(t=Me),e._pf.overflow=t)}function P(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function F(e){return e?e.toLowerCase().replace("_","-"):e}function z(e){for(var t,i,n,r,o=0;o<e.length;){for(r=F(e[o]).split("-"),t=r.length,i=F(e[o+1]),i=i?i.split("-"):null;t>0;){if(n=H(r.slice(0,t).join("-")))return n;if(i&&i.length>=t&&k(r,i,!0)>=t-1)break;t--}o++}return null}function H(e){var t=null;if(!Fe[e]&&He)try{t=_e.locale(),require("./locale/"+e),_e.locale(t)}catch(e){}return Fe[e]}function R(e,t){return t._isUTC?_e(e).zone(t._offset||0):_e(e).local()}function N(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function $(e){var t,i,n=e.match(Oe);for(t=0,i=n.length;t<i;t++)mt[n[t]]?n[t]=mt[n[t]]:n[t]=N(n[t]);return function(r){var o="";for(t=0;t<i;t++)o+=n[t]instanceof Function?n[t].call(r,e):n[t];return o}}function O(e,t){return e.isValid()?(t=L(t,e.localeData()),ut[t]||(ut[t]=$(t)),ut[t](e)):e.localeData().invalidDate()}function L(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(Le.lastIndex=0;n>=0&&Le.test(e);)e=e.replace(Le,i),Le.lastIndex=0,n-=1;return e}function B(e,t){var i,n=t._strict;switch(e){case"Q":return Xe;case"DDDD":return Je;case"YYYY":case"GGGG":case"gggg":return n?et:Ve;case"Y":case"G":case"g":return it;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?tt:We;case"S":if(n)return Xe;case"SS":if(n)return Ze;case"SSS":if(n)return Je;case"DDD":return Ue;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return qe;case"a":case"A":return t._locale._meridiemParse;case"X":return Qe;case"Z":case"ZZ":return Ge;case"T":return Ye;case"SSSS":return je;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Ze:Be;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Be;case"Do":return Ke;default:return i=new RegExp(K(Q(e.replace("\\","")),"i"))}}function U(e){e=e||"";var t=e.match(Ge)||[],i=t[t.length-1]||[],n=(i+"").match(at)||["-",0,0],r=+(60*n[1])+T(n[2]);return"+"===n[0]?-r:r}function V(e,t,i){var n,r=i._a;switch(e){case"Q":null!=t&&(r[De]=3*(T(t)-1));break;case"M":case"MM":null!=t&&(r[De]=T(t)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(t),null!=n?r[De]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[Me]=T(t));break;case"Do":null!=t&&(r[Me]=T(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=T(t));break;case"YY":r[Te]=_e.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[Te]=T(t);break;case"a":case"A":i._isPm=i._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":r[Ae]=T(t);break;case"m":case"mm":r[Ee]=T(t);break;case"s":case"ss":
r[Ie]=T(t);break;case"S":case"SS":case"SSS":case"SSSS":r[Pe]=T(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=U(t);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(t),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=T(t));break;case"gg":case"GG":i._w=i._w||{},i._w[e]=_e.parseTwoDigitYear(t)}}function W(e){var i,n,r,o,s,a,l;i=e._w,null!=i.GG||null!=i.W||null!=i.E?(s=1,a=4,n=t(i.GG,e._a[Te],ae(_e(),1,4).year),r=t(i.W,1),o=t(i.E,1)):(s=e._locale._week.dow,a=e._locale._week.doy,n=t(i.gg,e._a[Te],ae(_e(),s,a).year),r=t(i.w,1),null!=i.d?(o=i.d,o<s&&++r):o=null!=i.e?i.e+s:s),l=le(n,r,o,a,s),e._a[Te]=l.year,e._dayOfYear=l.dayOfYear}function j(e){var i,n,r,o,s=[];if(!e._d){for(r=G(e),e._w&&null==e._a[Me]&&null==e._a[De]&&W(e),e._dayOfYear&&(o=t(e._a[Te],r[Te]),e._dayOfYear>A(o)&&(e._pf._overflowDayOfYear=!0),n=ne(o,0,e._dayOfYear),e._a[De]=n.getUTCMonth(),e._a[Me]=n.getUTCDate()),i=0;i<3&&null==e._a[i];++i)e._a[i]=s[i]=r[i];for(;i<7;i++)e._a[i]=s[i]=null==e._a[i]?2===i?1:0:e._a[i];e._d=(e._useUTC?ne:ie).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function q(e){var t;e._d||(t=C(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],j(e))}function G(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Y(e){if(e._f===_e.ISO_8601)return void Z(e);e._a=[],e._pf.empty=!0;var t,i,n,r,o,s=""+e._i,a=s.length,l=0;for(n=L(e._f,e._locale).match(Oe)||[],t=0;t<n.length;t++)r=n[t],i=(s.match(B(r,e))||[])[0],i&&(o=s.substr(0,s.indexOf(i)),o.length>0&&e._pf.unusedInput.push(o),s=s.slice(s.indexOf(i)+i.length),l+=i.length),mt[r]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(r),V(r,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(r);e._pf.charsLeftOver=a-l,s.length>0&&e._pf.unusedInput.push(s),e._isPm&&e._a[Ae]<12&&(e._a[Ae]+=12),e._isPm===!1&&12===e._a[Ae]&&(e._a[Ae]=0),j(e),I(e)}function Q(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,r){return t||i||n||r})}function K(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(e){var t,i,r,o,s;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)s=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=n(),t._f=e._f[o],Y(t),P(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==r||s<r)&&(r=s,i=t));h(e,i||t)}function Z(e){var t,i,n=e._i,r=nt.exec(n);if(r){for(e._pf.iso=!0,t=0,i=ot.length;t<i;t++)if(ot[t][1].exec(n)){e._f=ot[t][0]+(r[6]||" ");break}for(t=0,i=st.length;t<i;t++)if(st[t][1].exec(n)){e._f+=st[t][0];break}n.match(Ge)&&(e._f+="Z"),Y(e)}else e._isValid=!1}function J(e){Z(e),e._isValid===!1&&(delete e._isValid,_e.createFromInputFallback(e))}function ee(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function te(t){var i,n=t._i;n===e?t._d=new Date:w(n)?t._d=new Date((+n)):null!==(i=Re.exec(n))?t._d=new Date((+i[1])):"string"==typeof n?J(t):b(n)?(t._a=ee(n.slice(0),function(e){return parseInt(e,10)}),j(t)):"object"==typeof n?q(t):"number"==typeof n?t._d=new Date(n):_e.createFromInputFallback(t)}function ie(e,t,i,n,r,o,s){var a=new Date(e,t,i,n,r,o,s);return e<1970&&a.setFullYear(e),a}function ne(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function re(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function oe(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function se(e,t,i){var n=_e.duration(e).abs(),r=Ce(n.as("s")),o=Ce(n.as("m")),s=Ce(n.as("h")),a=Ce(n.as("d")),l=Ce(n.as("M")),c=Ce(n.as("y")),d=r<ht.s&&["s",r]||1===o&&["m"]||o<ht.m&&["mm",o]||1===s&&["h"]||s<ht.h&&["hh",s]||1===a&&["d"]||a<ht.d&&["dd",a]||1===l&&["M"]||l<ht.M&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=i,oe.apply({},d)}function ae(e,t,i){var n,r=i-t,o=i-e.day();return o>r&&(o-=7),o<r-7&&(o+=7),n=_e(e).add(o,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function le(e,t,i,n,r){var o,s,a=ne(e,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:r,o=r-a+(a>n?7:0)-(a<r?7:0),s=7*(t-1)+(i-r)+o+1,{year:s>0?e:e-1,dayOfYear:s>0?s:A(e-1)+s}}function ce(t){var i=t._i,n=t._f;return t._locale=t._locale||_e.localeData(t._l),null===i||n===e&&""===i?_e.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),_e.isMoment(i)?new d(i,(!0)):(n?b(n)?X(t):Y(t):te(t),new d(t)))}function de(e,t){var i,n;if(1===t.length&&b(t[0])&&(t=t[0]),!t.length)return _e();for(i=t[0],n=1;n<t.length;++n)t[n][e](i)&&(i=t[n]);return i}function ue(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),D(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function he(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function pe(e,t,i){return"Month"===t?ue(e,i):e._d["set"+(e._isUTC?"UTC":"")+t](i)}function fe(e,t){return function(i){return null!=i?(pe(this,e,i),_e.updateOffset(this,t),this):he(this,e)}}function me(e){return 400*e/146097}function ge(e){return 146097*e/400}function ve(e){_e.duration.fn[e]=function(){return this._data[e]}}function ye(e){"undefined"==typeof ender&&(be=xe.moment,e?xe.moment=o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",_e):xe.moment=_e)}for(var _e,be,we,ke="2.8.3",xe="undefined"!=typeof global?global:this,Ce=Math.round,Se=Object.prototype.hasOwnProperty,Te=0,De=1,Me=2,Ae=3,Ee=4,Ie=5,Pe=6,Fe={},ze=[],He="undefined"!=typeof module&&module.exports,Re=/^\/?Date\((\-?\d+)/i,Ne=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,$e=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Oe=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Le=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Be=/\d\d?/,Ue=/\d{1,3}/,Ve=/\d{1,4}/,We=/[+\-]?\d{1,6}/,je=/\d+/,qe=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ge=/Z|[\+\-]\d\d:?\d\d/gi,Ye=/T/i,Qe=/[\+\-]?\d+(\.\d{1,3})?/,Ke=/\d{1,2}/,Xe=/\d/,Ze=/\d\d/,Je=/\d{3}/,et=/\d{4}/,tt=/[+-]?\d{6}/,it=/[+-]?\d+/,nt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rt="YYYY-MM-DDTHH:mm:ssZ",ot=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],st=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],at=/([\+\-]|\d\d)/gi,lt=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ct={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},dt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ut={},ht={s:45,m:45,h:22,d:26,M:11},pt="DDD w W M D d".split(" "),ft="M D H h m s w W".split(" "),mt={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return m(this.year()%100,2)},YYYY:function(){return m(this.year(),4)},YYYYY:function(){return m(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+m(Math.abs(e),6)},gg:function(){return m(this.weekYear()%100,2)},gggg:function(){return m(this.weekYear(),4)},ggggg:function(){return m(this.weekYear(),5)},GG:function(){return m(this.isoWeekYear()%100,2)},GGGG:function(){return m(this.isoWeekYear(),4)},GGGGG:function(){return m(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return T(this.milliseconds()/100)},SS:function(){return m(T(this.milliseconds()/10),2)},SSS:function(){return m(this.milliseconds(),3)},SSSS:function(){return m(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+m(T(e/60),2)+":"+m(T(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+m(T(e/60),2)+m(T(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},gt={},vt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];pt.length;)we=pt.pop(),mt[we+"o"]=l(mt[we],we);for(;ft.length;)we=ft.pop(),mt[we+we]=a(mt[we],2);mt.DDDD=a(mt.DDD,3),h(c.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;for(this._monthsParse||(this._monthsParse=[]),t=0;t<12;t++)if(this._monthsParse[t]||(i=_e.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;t<7;t++)if(this._weekdaysParse[t]||(i=_e([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var r=this._relativeTime[i];return"function"==typeof r?r(e,t,i,n):r.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ae(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),_e=function(t,i,r,o){var s;return"boolean"==typeof r&&(o=r,r=e),s={},s._isAMomentObject=!0,s._i=t,s._f=i,s._l=r,s._strict=o,s._isUTC=!1,s._pf=n(),ce(s)},_e.suppressDeprecationWarnings=!1,_e.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),_e.min=function(){var e=[].slice.call(arguments,0);return de("isBefore",e)},_e.max=function(){var e=[].slice.call(arguments,0);return de("isAfter",e)},_e.utc=function(t,i,r,o){var s;return"boolean"==typeof r&&(o=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=t,s._f=i,s._strict=o,s._pf=n(),ce(s).utc()},_e.unix=function(e){return _e(1e3*e)},_e.duration=function(e,t){var n,r,o,s,a=e,l=null;return _e.isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(l=Ne.exec(e))?(n="-"===l[1]?-1:1,a={y:0,d:T(l[Me])*n,h:T(l[Ae])*n,m:T(l[Ee])*n,s:T(l[Ie])*n,ms:T(l[Pe])*n}):(l=$e.exec(e))?(n="-"===l[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},a={y:o(l[2]),M:o(l[3]),d:o(l[4]),h:o(l[5]),m:o(l[6]),s:o(l[7]),w:o(l[8])}):"object"==typeof a&&("from"in a||"to"in a)&&(s=v(_e(a.from),_e(a.to)),a={},a.ms=s.milliseconds,a.M=s.months),r=new u(a),_e.isDuration(e)&&i(e,"_locale")&&(r._locale=e._locale),r},_e.version=ke,_e.defaultFormat=rt,_e.ISO_8601=function(){},_e.momentProperties=ze,_e.updateOffset=function(){},_e.relativeTimeThreshold=function(t,i){return ht[t]!==e&&(i===e?ht[t]:(ht[t]=i,!0))},_e.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return _e.locale(e,t)}),_e.locale=function(e,t){var i;return e&&(i="undefined"!=typeof t?_e.defineLocale(e,t):_e.localeData(e),i&&(_e.duration._locale=_e._locale=i)),_e._locale._abbr},_e.defineLocale=function(e,t){return null!==t?(t.abbr=e,Fe[e]||(Fe[e]=new c),Fe[e].set(t),_e.locale(e),Fe[e]):(delete Fe[e],null)},_e.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(e){return _e.localeData(e)}),_e.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return _e._locale;if(!b(e)){if(t=H(e))return t;e=[e]}return z(e)},_e.isMoment=function(e){return e instanceof d||null!=e&&i(e,"_isAMomentObject")},_e.isDuration=function(e){return e instanceof u};for(we=vt.length-1;we>=0;--we)S(vt[we]);_e.normalizeUnits=function(e){return x(e)},_e.invalid=function(e){var t=_e.utc(NaN);return null!=e?h(t._pf,e):t._pf.userInvalidated=!0,t},_e.parseZone=function(){return _e.apply(null,arguments).parseZone()},_e.parseTwoDigitYear=function(e){return T(e)+(T(e)>68?1900:2e3)},h(_e.fn=d.prototype,{clone:function(){return _e(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date((+this)):this._d},toISOString:function(){var e=_e(this).utc();return 0<e.year()&&e.year()<=9999?O(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return P(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&k(this._a,(this._isUTC?_e.utc(this._a):_e(this._a)).toArray())>0)},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=O(this,e||_e.defaultFormat);return this.localeData().postformat(t)},add:y(1,"add"),subtract:y(-1,"subtract"),diff:function(e,t,i){var n,r,o,s=R(e,this),a=6e4*(this.zone()-s.zone());return t=x(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+s.daysInMonth()),r=12*(this.year()-s.year())+(this.month()-s.month()),o=this-_e(this).startOf("month")-(s-_e(s).startOf("month")),o-=6e4*(this.zone()-_e(this).startOf("month").zone()-(s.zone()-_e(s).startOf("month").zone())),r+=o/n,"year"===t&&(r/=12)):(n=this-s,r="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-a)/864e5:"week"===t?(n-a)/6048e5:n),i?r:f(r)},from:function(e,t){return _e.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(_e(),e)},calendar:function(e){var t=e||_e(),i=R(t,this).startOf("day"),n=this.diff(i,"days",!0),r=n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this))},isLeapYear:function(){return E(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=re(e,this.localeData()),this.add(e-t,"d")):t},month:fe("Month",!0),startOf:function(e){switch(e=x(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=x(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+this>+e):+this.clone().startOf(t)>+_e(e).startOf(t)},isBefore:function(e,t){return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+this<+e):+this.clone().startOf(t)<+_e(e).startOf(t)},isSame:function(e,t){return t=x(t||"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+this===+e):+this.clone().startOf(t)===+R(e,this).startOf(t)},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=_e.apply(null,arguments),e<this?this:e}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=_e.apply(null,arguments),e>this?this:e}),zone:function(e,t){var i,n=this._offset||0;return null==e?this._isUTC?n:this._dateTzOffset():("string"==typeof e&&(e=U(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(i=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=i&&this.subtract(i,"m"),n!==e&&(!t||this._changeInProgress?_(this,_e.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_e.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?_e(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(e){var t=Ce((_e(this).startOf("day")-_e(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ae(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ae(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ae(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return M(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return M(this.year(),e.dow,e.doy)},get:function(e){return e=x(e),this[e]()},set:function(e,t){return e=x(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var i;return t===e?this._locale._abbr:(i=_e.localeData(t),null!=i&&(this._locale=i),this)},lang:o("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),_e.fn.millisecond=_e.fn.milliseconds=fe("Milliseconds",!1),_e.fn.second=_e.fn.seconds=fe("Seconds",!1),_e.fn.minute=_e.fn.minutes=fe("Minutes",!1),_e.fn.hour=_e.fn.hours=fe("Hours",!0),_e.fn.date=fe("Date",!0),_e.fn.dates=o("dates accessor is deprecated. Use date instead.",fe("Date",!0)),_e.fn.year=fe("FullYear",!0),_e.fn.years=o("years accessor is deprecated. Use year instead.",fe("FullYear",!0)),_e.fn.days=_e.fn.day,_e.fn.months=_e.fn.month,_e.fn.weeks=_e.fn.week,_e.fn.isoWeeks=_e.fn.isoWeek,_e.fn.quarters=_e.fn.quarter,_e.fn.toJSON=_e.fn.toISOString,h(_e.duration.fn=u.prototype,{_bubble:function(){var e,t,i,n=this._milliseconds,r=this._days,o=this._months,s=this._data,a=0;s.milliseconds=n%1e3,e=f(n/1e3),s.seconds=e%60,t=f(e/60),s.minutes=t%60,i=f(t/60),s.hours=i%24,r+=f(i/24),a=f(me(r)),r-=f(ge(a)),o+=f(r/30),r%=30,a+=f(o/12),o%=12,s.days=r,s.months=o,s.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(e){var t=se(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var i=_e.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=_e.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=x(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,i;if(e=x(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,i=this._months+12*me(t),"month"===e?i:i/12;switch(t=this._days+ge(this._months/12),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:_e.fn.lang,locale:_e.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||r||o?"T":"")+(n?n+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}}),_e.duration.fn.toString=_e.duration.fn.toISOString;for(we in lt)i(lt,we)&&ve(we.toLowerCase());_e.duration.fn.asMilliseconds=function(){return this.as("ms")},_e.duration.fn.asSeconds=function(){return this.as("s")},_e.duration.fn.asMinutes=function(){return this.as("m")},_e.duration.fn.asHours=function(){return this.as("h")},_e.duration.fn.asDays=function(){return this.as("d")},_e.duration.fn.asWeeks=function(){return this.as("weeks")},_e.duration.fn.asMonths=function(){return this.as("M")},_e.duration.fn.asYears=function(){return this.as("y")},_e.locale("en",{ordinal:function(e){var t=e%10,i=1===T(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),He?module.exports=_e:"function"==typeof define&&define.amd?(define("moment",function(e,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(xe.moment=be),_e}),ye(!0)):ye()}.call(this),function(e){void 0===e.fn.each2&&e.fn.extend({each2:function(t){for(var i=e([0]),n=-1,r=this.length;r>++n&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function i(e,t){for(var i=0,r=t.length;r>i;i+=1)if(n(e,t[i]))return i;return-1}function n(e,i){return e===i||e!==t&&i!==t&&(null!==e&&null!==i&&(e.constructor===String?e+""==i+"":i.constructor===String&&i+""==e+""))}function r(t,i){var n,r,o;if(null===t||1>t.length)return[];for(n=t.split(i),r=0,o=n.length;o>r;r+=1)n[r]=e.trim(n[r]);return n}function o(e){return e.outerWidth(!1)-e.width()}function s(i){var n="keyup-change-value";i.bind("keydown",function(){e.data(i,n)===t&&e.data(i,n,i.val())}),i.bind("keyup",function(){var r=e.data(i,n);r!==t&&i.val()!==r&&(e.removeData(i,n),i.trigger("keyup-change"))})}function a(i){i.bind("mousemove",function(i){var n=I;(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function l(e,i,n){n=n||t;var r;return function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout(function(){i.apply(n,t)},e)}}function c(e){var t,i=!1;return function(){return i===!1&&(t=e(),i=!0),t}}function d(e,t){var n=l(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){i(e.target,t.get())>=0&&n(e)})}function u(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],n=e.val().length;e.focus(),e.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function h(e){e.preventDefault(),e.stopPropagation()}function p(e){e.preventDefault(),e.stopImmediatePropagation()}function f(t){if(!E){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);E=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),E.attr("class","select2-sizer"),e("body").append(E)}return E.text(t.val()),E.width()}function m(t,i,n){var r,o,s=[];r=t.attr("class"),r&&(r=""+r,e(r.split(" ")).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),r=i.attr("class"),r&&(r=""+r,e(r.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=n(this),o&&s.push(this))})),t.attr("class",s.join(" "))}function g(e,i,n,r){var o=e.toUpperCase().indexOf(i.toUpperCase()),s=i.length;return 0>o?(n.push(r(e)),t):(n.push(r(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(r(e.substring(o,o+s))),n.push("</span>"),n.push(r(e.substring(o+s,e.length))),t)}function v(t){var i,n=0,r=null,o=t.quietMillis||100,s=t.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){n+=1;var i=n,o=t.data,c=s,d=t.transport||e.ajax,u=t.type||"GET",h={};o=o?o.call(a,l.term,l.page,l.context):null,c="function"==typeof c?c.call(a,l.term,l.page,l.context):c,null!==r&&r.abort(),t.params&&(e.isFunction(t.params)?e.extend(h,t.params.call(a)):e.extend(h,t.params)),e.extend(h,{url:c,dataType:t.dataType,data:o,type:u,cache:!1,success:function(e){if(!(n>i)){var r=t.results(e,l.page);l.callback(r)}}}),r=d.call(a,h)},o)}}function y(i){var n,r,o=i,s=function(e){return""+e.text};e.isArray(o)&&(r=o,o={results:r}),e.isFunction(o)===!1&&(r=o,o=function(){return r});var a=o();return a.text&&(s=a.text,e.isFunction(s)||(n=o.text,s=function(e){return e[n]})),function(i){var n,r=i.term,a={results:[]};return""===r?(i.callback(o()),t):(n=function(t,o){var a,l;if(t=t[0],t.children){a={};for(l in t)t.hasOwnProperty(l)&&(a[l]=t[l]);a.children=[],e(t.children).each2(function(e,t){n(t,a.children)}),(a.children.length||i.matcher(r,s(a),t))&&o.push(a)}else i.matcher(r,s(t),t)&&o.push(t)},e(o().results).each2(function(e,t){n(t,a.results)}),i.callback(a),t)}}function _(i){var n=e.isFunction(i);return function(r){var o=r.term,s={results:[]};e(n?i():i).each(function(){var e=this.text!==t,i=e?this.text:this;(""===o||r.matcher(o,i))&&s.results.push(e?this:{id:this,text:this})}),r.callback(s)}}function b(t){if(e.isFunction(t))return!0;if(!t)return!1;throw Error("formatterName must be a function or a falsy value")}function w(t){return e.isFunction(t)?t():t}function k(t){var i=0;return e.each(t,function(e,t){t.children?i+=k(t.children):i++}),i}function x(e,i,r,o){var s,a,l,c,d,u=e,h=!1;if(!o.createSearchChoice||!o.tokenSeparators||1>o.tokenSeparators.length)return t;for(;;){for(a=-1,l=0,c=o.tokenSeparators.length;c>l&&(d=o.tokenSeparators[l],a=e.indexOf(d),!(a>=0));l++);if(0>a)break;if(s=e.substring(0,a),e=e.substring(a+d.length),s.length>0&&(s=o.createSearchChoice(s,i),s!==t&&null!==s&&o.id(s)!==t&&null!==o.id(s))){for(h=!1,l=0,c=i.length;c>l;l++)if(n(o.id(s),o.id(i[l]))){h=!0;break}h||r(s)}}return u!==e?e:t}function C(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var S,T,D,M,A,E,I,P;S={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case S.LEFT:case S.RIGHT:case S.UP:case S.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case S.SHIFT:case S.CTRL:case S.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},P=e(document),A=function(){var e=1;return function(){return e++}}(),P.bind("mousemove",function(e){I={x:e.pageX,y:e.pageY}}),T=C(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,r,o=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+A()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=c(function(){return i.element.closest("body")}),m(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(w(i.containerCss)),this.container.addClass(w(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabIndex"),this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){e(this).select2("focus")}).attr("tabIndex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(w(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=n=this.container.find(o),this.search=r=this.container.find("input.select2-input"),
r.attr("tabIndex",this.elementTabIndex),this.resultsPage=0,this.context=null,this.initContainer(),a(this.results),this.dropdown.delegate(o,"mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent)),d(80,this.results),this.dropdown.delegate(o,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),e.fn.mousewheel&&n.mousewheel(function(e,t,i,r){var o=n.scrollTop();r>0&&0>=o-r?(n.scrollTop(0),h(e)):0>r&&n.get(0).scrollHeight-n.scrollTop()+r<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),h(e))}),s(r),r.bind("keyup-change input paste",this.bind(this.updateResults)),r.bind("focus",function(){r.addClass("select2-focused")}),r.bind("blur",function(){r.removeClass("select2-focused")}),this.dropdown.delegate(o,"mouseup",this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(i.element.is(":disabled")||i.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show())},prepareOpts:function(i){var o,s,a,l;if(o=i.element,"select"===o.get(0).tagName.toLowerCase()&&(this.select=s=i.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(n,r,o){var s,a=this.opts.id,l=this;(s=function(n,r,c){var d,u,h,p,f,m,g,v,y,_;for(n=i.sortResults(n,r,o),d=0,u=n.length;u>d;d+=1)h=n[d],f=h.disabled===!0,p=!f&&a(h)!==t,m=h.children&&h.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+c),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(l.opts.formatResultCssClass(h)),v=e(document.createElement("div")),v.addClass("select2-result-label"),_=i.formatResult(h,v,o,l.opts.escapeMarkup),_!==t&&v.html(_),g.append(v),m&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),s(h.children,y,c+1),g.append(y)),g.data("select2-data",h),r.append(g)})(r,n,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(a=i.id,i.id=function(e){return e[a]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(s?(i.query=this.bind(function(i){var r,s,a,l={results:[],more:!1},c=i.term;a=function(e,t){var r;e.is("option")?i.matcher(c,e.text(),e)&&t.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:n(e.attr("disabled"),"disabled")}):e.is("optgroup")&&(r={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")},e.children().each2(function(e,t){a(t,r.children)}),r.children.length>0&&t.push(r))},r=o.children(),this.getPlaceholder()!==t&&r.length>0&&(s=r[0],""===e(s).text()&&(r=r.not(s))),r.each2(function(e,t){a(t,l.results)}),i.callback(l)}),i.id=function(e){return e.id},i.formatResultCssClass=function(e){return e.css}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=v.call(i.element,i.ajax)):"data"in i?i.query=y(i.data):"tags"in i&&(i.query=_(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(e){return{id:e,text:e}}),i.initSelection===t&&(i.initSelection=function(o,s){var a=[];e(r(o.val(),i.separator)).each(function(){var r=this,o=this,s=i.tags;e.isFunction(s)&&(s=s()),e(s).each(function(){return n(this.id,r)?(o=this.text,!1):t}),a.push({id:r,text:o})}),s(a)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var e,t=this.opts.element;t.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,t;e="disabled"!==this.opts.element.attr("disabled"),t="readonly"===this.opts.element.attr("readonly"),e=e&&!t,this.enabled!==e&&(e?this.enable():this.disable()),m(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(w(this.opts.containerCssClass)),m(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(w(this.opts.dropdownCssClass))}),t.bind("propertychange.select2 DOMAttrModified.select2",e),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(t){t.forEach(e)}),this.propertyObserver.observe(t.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,n,r=this.container.offset(),o=this.container.outerHeight(!1),s=this.container.outerWidth(!1),a=this.dropdown.outerHeight(!1),l=e(window).scrollLeft()+e(window).width(),c=e(window).scrollTop()+e(window).height(),d=r.top+o,u=r.left,h=c>=d+a,p=r.top-a>=this.body().scrollTop(),f=this.dropdown.outerWidth(!1),m=l>=u+f,g=this.dropdown.hasClass("select2-drop-above");"static"!==this.body().css("position")&&(t=this.body().offset(),d-=t.top,u-=t.left),g?(i=!0,!p&&h&&(i=!1)):(i=!1,!h&&p&&(i=!0)),m||(u=r.left+s-f),i?(d=r.top-a,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),n=e.extend({top:d,left:u,width:s},w(this.opts.dropdownCss)),this.dropdown.css(n)},shouldOpen:function(){var t;return!this.opened()&&(t=e.Event("opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(window.setTimeout(this.bind(this.opening),1),!0)},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var i,n=this.containerId,r="scroll."+n,o="resize."+n,s="orientationchange."+n;this.clearDropdownAlignmentPreference(),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.updateResults(!0),i=e("#select2-drop-mask"),0==i.length&&(i=e(document.createElement("div")),i.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body()),i.bind("mousedown touchstart",function(){var t,i=e("#select2-drop");i.length>0&&(t=i.data("select2"),t.opts.selectOnBlur&&t.selectHighlighted({noFocus:!0}),t.close())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),i.css(t()),i.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var a=this;this.container.parents().add(window).each(function(){e(this).bind(o+" "+r+" "+s,function(){e("#select2-drop-mask").css(t()),a.positionDropdown()})}),this.focusSearch()},close:function(){if(this.opened()){var t=this.containerId,i="scroll."+t,n="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).unbind(i).unbind(n).unbind(r)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return w(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var i,n,r,o,s,a,l,c=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return c.scrollTop(0),t;i=this.findHighlightableChoices(),r=e(i[n]),o=r.offset().top+r.outerHeight(!0),n===i.length-1&&(l=c.find("li.select2-more-results"),l.length>0&&(o=l.offset().top+l.outerHeight(!0))),s=c.offset().top+c.outerHeight(!0),o>s&&c.scrollTop(c.scrollTop()+(o-s)),a=r.offset().top-c.offset().top,0>a&&"none"!=r.css("display")&&c.scrollTop(c.scrollTop()+a)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)"),this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&i.length>n;){n+=t;var r=e(i[n]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(n){var r,o,s=this.findHighlightableChoices();return 0===arguments.length?i(s.filter(".select2-highlighted")[0],s.get()):(n>=s.length&&(n=s.length-1),0>n&&(n=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),r=e(s[n]),r.addClass("select2-highlighted"),this.ensureHighlightVisible(),o=r.data("select2-data"),o&&this.opts.element.trigger({type:"highlight",val:this.id(o),choice:o}),t)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,r=this,o=this.search.val(),s=this.context;0!==i.length&&(e=i.offset().top-t.offset().top-t.height(),this.opts.loadMorePadding>=e&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:n,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){r.opened()&&(r.opts.populateResults.call(this,t,e.results,{term:o,page:n,context:s}),r.postprocessResults(e,!1,!1),e.more===!0?(i.detach().appendTo(t).text(r.opts.formatLoadMore(n+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):i.remove(),r.positionDropdown(),r.resultsPage=n,r.context=e.context)})})))},tokenize:function(){},updateResults:function(i){function r(){c.scrollTop(0),l.removeClass("select2-active"),u.positionDropdown()}function o(e){c.html(e),r()}var s,a,l=this.search,c=this.results,d=this.opts,u=this,h=l.val(),p=e.data(this.container,"select2-last-term");if((i===!0||!p||!n(h,p))&&(e.data(this.container,"select2-last-term",h),i===!0||this.showSearchInput!==!1&&this.opened())){var f=this.getMaximumSelectionSize();if(f>=1&&(s=this.data(),e.isArray(s)&&s.length>=f&&b(d.formatSelectionTooBig,"formatSelectionTooBig")))return o("<li class='select2-selection-limit'>"+d.formatSelectionTooBig(f)+"</li>"),t;if(l.val().length<d.minimumInputLength)return o(b(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+d.formatInputTooShort(l.val(),d.minimumInputLength)+"</li>":""),t;if(d.maximumInputLength&&l.val().length>d.maximumInputLength)return o(b(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+d.formatInputTooLong(l.val(),d.maximumInputLength)+"</li>":""),t;d.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+d.formatSearching()+"</li>"),l.addClass("select2-active"),a=this.tokenize(),a!=t&&null!=a&&l.val(a),this.resultsPage=1,d.query({element:d.element,term:l.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(s){var a;return this.opened()?(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&""!==l.val()&&(a=this.opts.createSearchChoice.call(null,l.val(),s.results),a!==t&&null!==a&&u.id(a)!==t&&null!==u.id(a)&&0===e(s.results).filter(function(){return n(u.id(this),u.id(a))}).length&&s.results.unshift(a)),0===s.results.length&&b(d.formatNoMatches,"formatNoMatches")?(o("<li class='select2-no-results'>"+d.formatNoMatches(l.val())+"</li>"),t):(c.empty(),u.opts.populateResults.call(this,c,s.results,{term:l.val(),page:this.resultsPage,context:null}),s.more===!0&&b(d.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+u.opts.escapeMarkup(d.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(s,i),r(),this.opts.element.trigger({type:"loaded",data:s}),t)):(this.search.removeClass("select2-active"),t)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){u(this.search)},selectHighlighted:function(e){var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n&&(this.highlight(t),this.onSelect(n,e))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function i(){var i,n,r,o,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==t)for(n=i.split(";"),o=0,s=n.length;s>o;o+=1)if(r=n[o].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==r&&r.length>=1)return r[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),D=C(T,{createContainer:function(){var t=e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop' style='display:none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments),this.focusser.attr("disabled","disabled"),this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),u(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var i,n=this.container,r=this.dropdown,o=!1;this.showSearch(this.opts.minimumResultsForSearch>=0),this.selection=i=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+A()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)return h(e),t;switch(e.which){case S.UP:case S.DOWN:return this.moveHighlight(e.which===S.UP?-1:1),h(e),t;case S.TAB:case S.ENTER:return this.selectHighlighted(),h(e),t;case S.ESC:return this.cancel(e),h(e),t}}})),this.search.bind("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.bind("keydown",this.bind(function(e){return!this.enabled||e.which===S.TAB||S.isControl(e)||S.isFunctionKey(e)||e.which===S.ESC?t:this.opts.openOnEnter===!1&&e.which===S.ENTER?(h(e),t):e.which==S.DOWN||e.which==S.UP||e.which==S.ENTER&&this.opts.openOnEnter?(this.open(),h(e),t):e.which==S.DELETE||e.which==S.BACKSPACE?(this.opts.allowClear&&this.clear(),h(e),t):t})),s(this.focusser),this.focusser.bind("keyup-change input",this.bind(function(e){this.opened()||(this.open(),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.focusser.val(""),h(e))})),i.delegate("abbr","mousedown",this.bind(function(e){this.enabled&&(this.clear(),p(e),this.close(),this.selection.focus())})),i.bind("mousedown",this.bind(function(e){o=!0,this.opened()?this.close():this.enabled&&this.open(),h(e),o=!1})),r.bind("mousedown",this.bind(function(){this.search.focus()})),i.bind("focus",this.bind(function(e){h(e)})),this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")})),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");t&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(t,i){var n=t.find(":selected");e.isFunction(i)&&i({id:n.attr("value"),text:n.text(),element:n})}:"data"in t&&(t.initSelection=t.initSelection||function(i,r){var o=i.val(),s=null;t.query({matcher:function(e,i,r){var a=n(o,t.id(r));return a&&(s=r),a},callback:e.isFunction(r)?function(){r(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(""===this.opts.element.val()&&e!==t){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(e,i,r){var o=0,s=this,a=!0;if(this.findHighlightableChoices().each2(function(e,i){return n(s.id(i.data("select2-data")),s.opts.element.val())?(o=e,!1):t}),r!==!1&&this.highlight(o),i===!0){var l=this.opts.minimumResultsForSearch;a=!(0>l)&&k(e.results)>=l,this.showSearch(a)}},showSearch:function(t){this.showSearchInput=t,this.dropdown.find(".select2-search")[t?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[t?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(e,t){var i=this.opts.element.val();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),n(i,this.id(e))||this.triggerChange()},updateSelection:function(e){var i,n=this.selection.find("span");this.selection.data("select2-data",e),n.empty(),i=this.opts.formatSelection(e,n),i!==t&&n.append(this.opts.escapeMarkup(i)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()},val:function(){var e,i=!1,n=null,r=this;if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return n={id:t.attr("value"),text:t.text(),element:t.get(0)},!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange();else{if(this.opts.initSelection===t)throw Error("cannot call val() if initSelection() is not defined");if(!e&&0!==e)return this.clear(i),i&&this.triggerChange(),t;this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),i&&r.triggerChange()})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var i;return 0===arguments.length?(i=this.selection.data("select2-data"),i==t&&(i=null),i):(e&&""!==e?(this.opts.element.val(e?this.id(e):""),this.updateSelection(e)):this.clear(),t)}}),M=C(T,{createContainer:function(){var t=e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find(":selected").each2(function(e,t){i.push({id:t.attr("value"),text:t.text(),element:t[0]})}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(i,o){var s=r(i.val(),t.separator),a=[];t.query({matcher:function(i,r,o){var l=e.grep(s,function(e){return n(e,t.id(o))}).length;return l&&a.push(o),l},callback:e.isFunction(o)?function(){o(a)}:e.noop})}),t},initContainer:function(){var i,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=i=this.container.find(n),this.search.attr("id","s2id_autogen"+A()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())})),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===S.BACKSPACE&&""===this.search.val()){this.close();var n,r=i.find(".select2-search-choice-focus");if(r.length>0)return this.unselect(r.first()),this.search.width(10),h(e),t;n=i.find(".select2-search-choice:not(.select2-locked)"),n.length>0&&n.last().addClass("select2-search-choice-focus")}else i.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case S.UP:case S.DOWN:return this.moveHighlight(e.which===S.UP?-1:1),h(e),t;case S.ENTER:case S.TAB:return this.selectHighlighted(),h(e),t;case S.ESC:return this.cancel(e),h(e),t}if(e.which!==S.TAB&&!S.isControl(e)&&!S.isFunctionKey(e)&&e.which!==S.BACKSPACE&&e.which!==S.ESC){if(e.which===S.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)&&h(e),e.which===S.ENTER&&h(e)}}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.opened()||this.clearSearch(),e.stopImmediatePropagation()})),this.container.delegate(n,"mousedown",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.delegate(n,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(this.getMaxSearchWidth())):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],o=this;e(t).each(function(){0>i(o.id(this),n)&&(n.push(o.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,r=!i.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),a=r?o:s,l=this.id(i),c=this.getVal();n=this.opts.formatSelection(i,a.find("div")),n!=t&&a.find("div").replaceWith("<div>"+this.opts.escapeMarkup(n)+"</div>"),r&&a.find(".select2-search-choice-close").bind("mousedown",h).bind("click dblclick",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),h(t))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",i),a.insertBefore(this.searchContainer),c.push(l),this.setVal(c)},unselect:function(e){var t,n,r=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(n=i(this.id(t),r),n>=0&&(r.splice(n,1),this.setVal(r),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(){var e=this.getVal(),t=this.results.find(".select2-result"),n=this.results.find(".select2-result-with-children"),r=this;t.each2(function(t,n){var o=r.id(n.data("select2-data"));i(o,e)>=0&&(n.addClass("select2-selected"),n.find(".select2-result-selectable").addClass("select2-selected"))}),n.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&r.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-o(this.search)},resizeSearch:function(){var e,t,i,n,r,s=o(this.search);e=f(this.search)+10,t=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,r=i-(t-n)-s,e>r&&(r=i-s),40>r&&(r=i-s),0>=r&&(r=e),this.search.width(r)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),r(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){0>i(this,n)&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},val:function(){var i,n=!1,r=this;if(0===arguments.length)return this.getVal();if(i=arguments[0],arguments.length>1&&(n=arguments[1]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),n&&this.triggerChange(),t;if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange();else{if(this.opts.initSelection===t)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e(t).map(r.id);r.setVal(i),r.updateSelection(t),r.clearSearch(),n&&r.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(i){var n,r=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(i||(i=[]),n=e.map(i,function(e){return r.opts.id(e)}),this.setVal(n),this.updateSelection(i),this.clearSearch(),t)}}),e.fn.select2=function(){var n,r,o,s,a=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];
return this.each(function(){if(0===a.length||"object"==typeof a[0])n=0===a.length?{}:e.extend({},a[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?s=n.element.attr("multiple"):(s=n.multiple||!1,"tags"in n&&(n.multiple=s=!0)),r=s?new M:new D,r.init(n);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(0>i(a[0],l))throw"Unknown method: "+a[0];if(o=t,r=e(this).data("select2"),r===t)return;if(o="container"===a[0]?r.container:r[a[0]].apply(r,a.slice(1)),o!==t)return!1}}),o===t?this:o},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var r=[];return g(e.text,i.term,r,n),r.join("")},formatSelection:function(e){return e?e.text:t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:x,escapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return(e+"").replace(/[&<>"'\/\\]/g,function(e){return t[e[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},window.Select2={query:{ajax:v,local:y,tags:_},util:{debounce:l,markMatch:g},class:{abstract:T,single:D,multi:M}}}}(jQuery),function(){var e=this,t=e._,i={},n=Array.prototype,r=Object.prototype,o=Function.prototype,s=n.push,a=n.slice,l=n.concat,c=r.toString,d=r.hasOwnProperty,u=n.forEach,h=n.map,p=n.reduce,f=n.reduceRight,m=n.filter,g=n.every,v=n.some,y=n.indexOf,_=n.lastIndexOf,b=Array.isArray,w=Object.keys,k=o.bind,x=function(e){return e instanceof x?e:this instanceof x?void(this._wrapped=e):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var C=x.each=x.forEach=function(e,t,n){if(null==e)return e;if(u&&e.forEach===u)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(n,e[r],r,e)===i)return}else for(var s=x.keys(e),r=0,o=s.length;o>r;r++)if(t.call(n,e[s[r]],s[r],e)===i)return;return e};x.map=x.collect=function(e,t,i){var n=[];return null==e?n:h&&e.map===h?e.map(t,i):(C(e,function(e,r,o){n.push(t.call(i,e,r,o))}),n)};var S="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,i,n){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return n&&(t=x.bind(t,n)),r?e.reduce(t,i):e.reduce(t);if(C(e,function(e,o,s){r?i=t.call(n,i,e,o,s):(i=e,r=!0)}),!r)throw new TypeError(S);return i},x.reduceRight=x.foldr=function(e,t,i,n){var r=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=x.bind(t,n)),r?e.reduceRight(t,i):e.reduceRight(t);var o=e.length;if(o!==+o){var s=x.keys(e);o=s.length}if(C(e,function(a,l,c){l=s?s[--o]:--o,r?i=t.call(n,i,e[l],l,c):(i=e[l],r=!0)}),!r)throw new TypeError(S);return i},x.find=x.detect=function(e,t,i){var n;return T(e,function(e,r,o){return t.call(i,e,r,o)?(n=e,!0):void 0}),n},x.filter=x.select=function(e,t,i){var n=[];return null==e?n:m&&e.filter===m?e.filter(t,i):(C(e,function(e,r,o){t.call(i,e,r,o)&&n.push(e)}),n)},x.reject=function(e,t,i){return x.filter(e,function(e,n,r){return!t.call(i,e,n,r)},i)},x.every=x.all=function(e,t,n){t||(t=x.identity);var r=!0;return null==e?r:g&&e.every===g?e.every(t,n):(C(e,function(e,o,s){return(r=r&&t.call(n,e,o,s))?void 0:i}),!!r)};var T=x.some=x.any=function(e,t,n){t||(t=x.identity);var r=!1;return null==e?r:v&&e.some===v?e.some(t,n):(C(e,function(e,o,s){return r||(r=t.call(n,e,o,s))?i:void 0}),!!r)};x.contains=x.include=function(e,t){return null!=e&&(y&&e.indexOf===y?e.indexOf(t)!=-1:T(e,function(e){return e===t}))},x.invoke=function(e,t){var i=a.call(arguments,2),n=x.isFunction(t);return x.map(e,function(e){return(n?t:e[t]).apply(e,i)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,i){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var n=-1/0,r=-1/0;return C(e,function(e,o,s){var a=t?t.call(i,e,o,s):e;a>r&&(n=e,r=a)}),n},x.min=function(e,t,i){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var n=1/0,r=1/0;return C(e,function(e,o,s){var a=t?t.call(i,e,o,s):e;r>a&&(n=e,r=a)}),n},x.shuffle=function(e){var t,i=0,n=[];return C(e,function(e){t=x.random(i++),n[i-1]=n[t],n[t]=e}),n},x.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var D=function(e){return null==e?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,i){return t=D(t),x.pluck(x.map(e,function(e,n,r){return{value:e,index:n,criteria:t.call(i,e,n,r)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var M=function(e){return function(t,i,n){var r={};return i=D(i),C(t,function(o,s){var a=i.call(n,o,s,t);e(r,a,o)}),r}};x.groupBy=M(function(e,t,i){x.has(e,t)?e[t].push(i):e[t]=[i]}),x.indexBy=M(function(e,t,i){e[t]=i}),x.countBy=M(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,i,n){i=D(i);for(var r=i.call(n,t),o=0,s=e.length;s>o;){var a=o+s>>>1;i.call(n,e[a])<r?o=a+1:s=a}return o},x.toArray=function(e){return e?x.isArray(e)?a.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:0>t?[]:a.call(e,0,t)},x.initial=function(e,t,i){return a.call(e,0,e.length-(null==t||i?1:t))},x.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,i){return a.call(e,null==t||i?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,i){return t&&x.every(e,x.isArray)?l.apply(i,e):(C(e,function(e){x.isArray(e)||x.isArguments(e)?t?s.apply(i,e):A(e,t,i):i.push(e)}),i)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,a.call(arguments,1))},x.partition=function(e,t){var i=[],n=[];return C(e,function(e){(t(e)?i:n).push(e)}),[i,n]},x.uniq=x.unique=function(e,t,i,n){x.isFunction(t)&&(n=i,i=t,t=!1);var r=i?x.map(e,i,n):e,o=[],s=[];return C(r,function(i,n){(t?n&&s[s.length-1]===i:x.contains(s,i))||(s.push(i),o.push(e[n]))}),o},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=a.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=l.apply(n,a.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=x.pluck(arguments,""+i);return t},x.object=function(e,t){if(null==e)return{};for(var i={},n=0,r=e.length;r>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},x.indexOf=function(e,t,i){if(null==e)return-1;var n=0,r=e.length;if(i){if("number"!=typeof i)return n=x.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,r+i):i}if(y&&e.indexOf===y)return e.indexOf(t,i);for(;r>n;n++)if(e[n]===t)return n;return-1},x.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(_&&e.lastIndexOf===_)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var r=n?i:e.length;r--;)if(e[r]===t)return r;return-1},x.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),r=0,o=new Array(n);n>r;)o[r++]=e,e+=i;return o};var E=function(){};x.bind=function(e,t){var i,n;if(k&&e.bind===k)return k.apply(e,a.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(a.call(arguments)));E.prototype=e.prototype;var r=new E;E.prototype=null;var o=e.apply(r,i.concat(a.call(arguments)));return Object(o)===o?o:r}},x.partial=function(e){var t=a.call(arguments,1);return function(){for(var i=0,n=t.slice(),r=0,o=n.length;o>r;r++)n[r]===x&&(n[r]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},x.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var i={};return t||(t=x.identity),function(){var n=t.apply(this,arguments);return x.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},x.delay=function(e,t){var i=a.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(a.call(arguments,1)))},x.throttle=function(e,t,i){var n,r,o,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:x.now(),s=null,o=e.apply(n,r),n=r=null};return function(){var c=x.now();a||i.leading!==!1||(a=c);var d=t-(c-a);return n=this,r=arguments,0>=d?(clearTimeout(s),s=null,a=c,o=e.apply(n,r),n=r=null):s||i.trailing===!1||(s=setTimeout(l,d)),o}},x.debounce=function(e,t,i){var n,r,o,s,a,l=function(){var c=x.now()-s;t>c?n=setTimeout(l,t-c):(n=null,i||(a=e.apply(o,r),o=r=null))};return function(){o=this,r=arguments,s=x.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(a=e.apply(o,r),o=r=null),a}},x.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=function(e){if(!x.isObject(e))return[];if(w)return w(e);var t=[];for(var i in e)x.has(e,i)&&t.push(i);return t},x.values=function(e){for(var t=x.keys(e),i=t.length,n=new Array(i),r=0;i>r;r++)n[r]=e[t[r]];return n},x.pairs=function(e){for(var t=x.keys(e),i=t.length,n=new Array(i),r=0;i>r;r++)n[r]=[t[r],e[t[r]]];return n},x.invert=function(e){for(var t={},i=x.keys(e),n=0,r=i.length;r>n;n++)t[e[i[n]]]=i[n];return t},x.functions=x.methods=function(e){var t=[];for(var i in e)x.isFunction(e[i])&&t.push(i);return t.sort()},x.extend=function(e){return C(a.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},x.pick=function(e){var t={},i=l.apply(n,a.call(arguments,1));return C(i,function(i){i in e&&(t[i]=e[i])}),t},x.omit=function(e){var t={},i=l.apply(n,a.call(arguments,1));for(var r in e)x.contains(i,r)||(t[r]=e[r]);return t},x.defaults=function(e){return C(a.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var I=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var r=c.call(e);if(r!=c.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=i.length;o--;)if(i[o]==e)return n[o]==t;var s=e.constructor,a=t.constructor;if(s!==a&&!(x.isFunction(s)&&s instanceof s&&x.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1;i.push(e),n.push(t);var l=0,d=!0;if("[object Array]"==r){if(l=e.length,d=l==t.length)for(;l--&&(d=I(e[l],t[l],i,n)););}else{for(var u in e)if(x.has(e,u)&&(l++,!(d=x.has(t,u)&&I(e[u],t[u],i,n))))break;if(d){for(u in t)if(x.has(t,u)&&!l--)break;d=!l}}return i.pop(),n.pop(),d};x.isEqual=function(e,t){return I(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=b||function(e){return"[object Array]"==c.call(e)},x.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!(!e||!x.has(e,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return d.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},x.times=function(e,t,i){for(var n=Array(Math.max(0,e)),r=0;e>r;r++)n[r]=t.call(i,r);return n},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=x.invert(P.escape);var F={escape:new RegExp("["+x.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(P.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(F[e],function(t){return P[e][t]})}}),x.result=function(e,t){if(null!=e){var i=e[t];return x.isFunction(i)?i.call(e):i}},x.mixin=function(e){C(x.functions(e),function(t){var i=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),$.call(this,i.apply(x,e))}})};var z=0;x.uniqueId=function(e){var t=++z+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,i){var n;i=x.defaults({},i,x.templateSettings);var r=new RegExp([(i.escape||H).source,(i.interpolate||H).source,(i.evaluate||H).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(r,function(t,i,n,r,a){return s+=e.slice(o,a).replace(N,function(e){return"\\"+R[e]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+t.length,t}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(e){throw e.source=s,e}if(t)return n(t,x);var a=function(e){return n.call(this,e,x)};return a.source="function("+(i.variable||"obj")+"){\n"+s+"}",a},x.chain=function(e){return x(e).chain()};var $=function(e){return this._chain?x(e).chain():e};x.mixin(x),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];x.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],$.call(this,i)}}),C(["concat","join","slice"],function(e){var t=n[e];x.prototype[e]=function(){return $.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this);